(self.webpackChunkfront_cloudbrain_portal=self.webpackChunkfront_cloudbrain_portal||[]).push([[998],{453:function(module){!function(t){module.exports=t()}((function(){return function(t){var e={};function n(r){var i;return(e[r]||(i=e[r]={exports:{},id:r,loaded:!1},t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i)).exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){var r,i=n(1),o=n(3),a=n(5),s=n(20),u=n(23),c=n(25),l=("undefined"!=typeof window&&(r=n(27)
/*!
	    Mock - 模拟请求 & 模拟数据
	    https://github.com/nuysoft/Mock
	    墨智 mozhi.gyy@taobao.com nuysoft@gmail.com
	*/),{Handler:i,Random:a,Util:o,XHR:r,RE:s,toJSONSchema:u,valid:c,heredoc:o.heredoc,setup:function(t){return r.setup(t)},_mocked:{}});l.version="1.0.1-beta3",r&&(r.Mock=l),l.mock=function(t,e,n){return 1===arguments.length?i.gen(t):(2===arguments.length&&(n=e,e=void 0),r&&(window.XMLHttpRequest=r),l._mocked[t+(e||"")]={rurl:t,rtype:e,template:n},l)},t.exports=l},function(module,exports,__nested_webpack_require_3371__){var Constant=__nested_webpack_require_3371__(2),Util=__nested_webpack_require_3371__(3),Parser=__nested_webpack_require_3371__(4),Random=__nested_webpack_require_3371__(5),RE=__nested_webpack_require_3371__(20),Handler={extend:Util.extend,gen:function(t,e,n){e=null==e?"":e+"",n={path:(n=n||{}).path||[Constant.GUID],templatePath:n.templatePath||[Constant.GUID++],currentContext:n.currentContext,templateCurrentContext:n.templateCurrentContext||t,root:n.root||n.currentContext,templateRoot:n.templateRoot||n.templateCurrentContext||t};var r=Parser.parse(e),i=Util.type(t);return Handler[i]?(i=Handler[i]({type:i,template:t,name:e,parsedName:e&&e.replace(Constant.RE_KEY,"$1"),rule:r,context:n}),n.root||(n.root=i),i):t}};Handler.extend({array:function(t){var e,n,r=[];if(0!==t.template.length)if(t.rule.parameters)if(1===t.rule.min&&void 0===t.rule.max)t.context.path.push(t.name),t.context.templatePath.push(t.name),r=Random.pick(Handler.gen(t.template,void 0,{path:t.context.path,templatePath:t.context.templatePath,currentContext:r,templateCurrentContext:t.template,root:t.context.root||r,templateRoot:t.context.templateRoot||t.template})),t.context.path.pop(),t.context.templatePath.pop();else if(t.rule.parameters[2])t.template.__order_index=t.template.__order_index||0,t.context.path.push(t.name),t.context.templatePath.push(t.name),r=Handler.gen(t.template,void 0,{path:t.context.path,templatePath:t.context.templatePath,currentContext:r,templateCurrentContext:t.template,root:t.context.root||r,templateRoot:t.context.templateRoot||t.template})[t.template.__order_index%t.template.length],t.template.__order_index+=+t.rule.parameters[2],t.context.path.pop(),t.context.templatePath.pop();else for(e=0;e<t.rule.count;e++)for(n=0;n<t.template.length;n++)t.context.path.push(r.length),t.context.templatePath.push(n),r.push(Handler.gen(t.template[n],r.length,{path:t.context.path,templatePath:t.context.templatePath,currentContext:r,templateCurrentContext:t.template,root:t.context.root||r,templateRoot:t.context.templateRoot||t.template})),t.context.path.pop(),t.context.templatePath.pop();else for(e=0;e<t.template.length;e++)t.context.path.push(e),t.context.templatePath.push(e),r.push(Handler.gen(t.template[e],e,{path:t.context.path,templatePath:t.context.templatePath,currentContext:r,templateCurrentContext:t.template,root:t.context.root||r,templateRoot:t.context.templateRoot||t.template})),t.context.path.pop(),t.context.templatePath.pop();return r},object:function(t){var e,n,r,i,o,a,s={};if(null!=t.rule.min)for(e=Util.keys(t.template),e=(e=Random.shuffle(e)).slice(0,t.rule.count),a=0;a<e.length;a++)i=(r=e[a]).replace(Constant.RE_KEY,"$1"),t.context.path.push(i),t.context.templatePath.push(r),s[i]=Handler.gen(t.template[r],r,{path:t.context.path,templatePath:t.context.templatePath,currentContext:s,templateCurrentContext:t.template,root:t.context.root||s,templateRoot:t.context.templateRoot||t.template}),t.context.path.pop(),t.context.templatePath.pop();else{for(r in e=[],n=[],t.template)("function"==typeof t.template[r]?n:e).push(r);for(e=e.concat(n),a=0;a<e.length;a++)i=(r=e[a]).replace(Constant.RE_KEY,"$1"),t.context.path.push(i),t.context.templatePath.push(r),s[i]=Handler.gen(t.template[r],r,{path:t.context.path,templatePath:t.context.templatePath,currentContext:s,templateCurrentContext:t.template,root:t.context.root||s,templateRoot:t.context.templateRoot||t.template}),t.context.path.pop(),t.context.templatePath.pop(),(o=r.match(Constant.RE_KEY))&&o[2]&&"number"===Util.type(t.template[r])&&(t.template[r]+=parseInt(o[2],10))}return s},number:function(t){var e,n;if(t.rule.decimal){for(t.template+="",(n=t.template.split("."))[0]=t.rule.range?t.rule.count:n[0],n[1]=(n[1]||"").slice(0,t.rule.dcount);n[1].length<t.rule.dcount;)n[1]+=n[1].length<t.rule.dcount-1?Random.character("number"):Random.character("123456789");e=parseFloat(n.join("."),10)}else e=t.rule.range&&!t.rule.parameters[2]?t.rule.count:t.template;return e},boolean:function(t){return t.rule.parameters?Random.bool(t.rule.min,t.rule.max,t.template):t.template},string:function(t){var e,n,r,i,o="";if(t.template.length){for(null==t.rule.count&&(o+=t.template),e=0;e<t.rule.count;e++)o+=t.template;for(n=o.match(Constant.RE_PLACEHOLDER)||[],e=0;e<n.length;e++)if(r=n[e],/^\\/.test(r))n.splice(e--,1);else{if(i=Handler.placeholder(r,t.context.currentContext,t.context.templateCurrentContext,t),1===n.length&&r===o&&typeof i!=typeof o){o=i;break}o=o.replace(r,i)}}else o=t.rule.range?Random.string(t.rule.count):t.template;return o},function:function(t){return t.template.call(t.context.currentContext,t)},regexp:function(t){var e="";null==t.rule.count&&(e+=t.template.source);for(var n=0;n<t.rule.count;n++)e+=t.template.source;return RE.Handler.gen(RE.Parser.parse(e))}}),Handler.extend({_all:function(){var t,e={};for(t in Random)e[t.toLowerCase()]=t;return e},placeholder:function(placeholder,obj,templateContext,options){Constant.RE_PLACEHOLDER.exec("");var parts=Constant.RE_PLACEHOLDER.exec(placeholder),key=parts&&parts[1],lkey=key&&key.toLowerCase(),okey=this._all()[lkey],params=parts&&parts[2]||"",pathParts=this.splitPathToArray(key);try{params=eval("(function(){ return [].splice.call(arguments, 0 ) })("+params+")")}catch(error){params=parts[2].split(/,\s*/)}if(obj&&key in obj)return obj[key];if("/"===key.charAt(0)||1<pathParts.length)return this.getValueByKeyPath(key,options);if(templateContext&&"object"==typeof templateContext&&key in templateContext&&placeholder!==templateContext[key])return templateContext[key]=Handler.gen(templateContext[key],key,{currentContext:obj,templateCurrentContext:templateContext}),templateContext[key];if(!(key in Random||lkey in Random||okey in Random))return placeholder;for(var i=0;i<params.length;i++)Constant.RE_PLACEHOLDER.exec(""),Constant.RE_PLACEHOLDER.test(params[i])&&(params[i]=Handler.placeholder(params[i],obj,templateContext,options));var handle=Random[key]||Random[lkey]||Random[okey];switch(Util.type(handle)){case"array":return Random.pick(handle);case"function":handle.options=options;var re=handle.apply(Random,params);return void 0===re&&(re=""),delete handle.options,re}},getValueByKeyPath:function(t,e){var n=t,r=this.splitPathToArray(t),i=[];"/"===t.charAt(0)?i=[e.context.path[0]].concat(this.normalizePath(r)):1<r.length&&((i=e.context.path.slice(0)).pop(),i=this.normalizePath(i.concat(r)));try{t=r[r.length-1];for(var o=e.context.root,a=e.context.templateRoot,s=1;s<i.length-1;s++)o=o[i[s]],a=a[i[s]];if(o&&t in o)return o[t];if(a&&"object"==typeof a&&t in a&&n!==a[t])return a[t]=Handler.gen(a[t],t,{currentContext:o,templateCurrentContext:a}),a[t]}catch(t){}return"@"+r.join("/")},normalizePath:function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n]){case"..":e.pop();break;case".":break;default:e.push(t[n])}return e},splitPathToArray:function(t){return t=t.split(/\/+/),(t=t[t.length-1]?t:t.slice(0,-1))[0]?t:t.slice(1)}}),module.exports=Handler},function(t,e){t.exports={GUID:1,RE_KEY:/(.+)\|(?:\+(\d+)|([\+\-]?\d+-?[\+\-]?\d*)?(?:\.(\d+-?\d*))?)/,RE_RANGE:/([\+\-]?\d+)-?([\+\-]?\d+)?/,RE_PLACEHOLDER:/\\*@([^@#%&()\?\s]+)(?:\((.*?)\))?/g}},function(t,e){var n={extend:function(){var t,e,r,i,o,a=arguments[0]||{},s=1,u=arguments.length;for(1===u&&(a=this,s=0);s<u;s++)if(t=arguments[s])for(e in t)r=a[e],a!==(i=t[e])&&void 0!==i&&(n.isArray(i)||n.isObject(i)?(n.isArray(i)&&(o=r&&n.isArray(r)?r:[]),n.isObject(i)&&(o=r&&n.isObject(r)?r:{}),a[e]=n.extend(o,i)):a[e]=i);return a},each:function(t,e,n){var r,i;if("number"===this.type(t))for(r=0;r<t;r++)e(r,r);else if(t.length===+t.length)for(r=0;r<t.length&&!1!==e.call(n,t[r],r,t);r++);else for(i in t)if(!1===e.call(n,t[i],i,t))break},type:function(t){return null==t?String(t):Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1].toLowerCase()}};n.each("String Object Array RegExp Function".split(" "),(function(t){n["is"+t]=function(e){return n.type(e)===t.toLowerCase()}})),n.isObjectOrArray=function(t){return n.isObject(t)||n.isArray(t)},n.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},n.keys=function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e);return n},n.values=function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(t[e]);return n},n.heredoc=function(t){return t.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"").replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")},n.noop=function(){},t.exports=n},function(t,e,n){var r=n(2),i=n(5);t.exports={parse:function(t){t=((t=null==t?"":t+"")||"").match(r.RE_KEY);var e,n=t&&t[3]&&t[3].match(r.RE_RANGE),o=n&&n[1]&&parseInt(n[1],10),a=n&&n[2]&&parseInt(n[2],10),s=n?n[2]?i.integer(o,a):parseInt(n[1],10):void 0,u=t&&t[4]&&t[4].match(r.RE_RANGE),c=u&&u[1]&&parseInt(u[1],10),l=u&&u[2]&&parseInt(u[2],10),h={parameters:t,range:n,min:o,max:a,count:s,decimal:u,dmin:c,dmax:l,dcount:u?!u[2]&&parseInt(u[1],10)||i.integer(c,l):void 0};for(e in h)if(null!=h[e])return h;return{}}}},function(t,e,n){var r={extend:n(3).extend};r.extend(n(6)),r.extend(n(7)),r.extend(n(8)),r.extend(n(10)),r.extend(n(13)),r.extend(n(15)),r.extend(n(16)),r.extend(n(17)),r.extend(n(14)),r.extend(n(19)),t.exports=r},function(t,e){t.exports={boolean:function(t,e,n){return void 0!==n?(t=void 0===t||isNaN(t)?1:parseInt(t,10),e=void 0===e||isNaN(e)?1:parseInt(e,10),Math.random()>1/(t+e)*t?!n:n):.5<=Math.random()},bool:function(t,e,n){return this.boolean(t,e,n)},natural:function(t,e){return t=void 0!==t?parseInt(t,10):0,e=void 0!==e?parseInt(e,10):9007199254740992,Math.round(Math.random()*(e-t))+t},integer:function(t,e){return t=void 0!==t?parseInt(t,10):-9007199254740992,e=void 0!==e?parseInt(e,10):9007199254740992,Math.round(Math.random()*(e-t))+t},int:function(t,e){return this.integer(t,e)},float:function(t,e,n,r){n=void 0===n?0:n,n=Math.max(Math.min(n,17),0),r=void 0===r?17:r,r=Math.max(Math.min(r,17),0);for(var i=this.integer(t,e)+".",o=0,a=this.natural(n,r);o<a;o++)i+=o<a-1?this.character("number"):this.character("123456789");return parseFloat(i,10)},character:function(t){var e={lower:"abcdefghijklmnopqrstuvwxyz",upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",number:"0123456789",symbol:"!@#$%^&*()[]"};return e.alpha=e.lower+e.upper,e[void 0]=e.lower+e.upper+e.number+e.symbol,(t=e[(""+t).toLowerCase()]||t).charAt(this.natural(0,t.length-1))},char:function(t){return this.character(t)},string:function(t,e,n){var r;switch(arguments.length){case 0:r=this.natural(3,7);break;case 1:r=t,t=void 0;break;case 2:"string"==typeof arguments[0]?r=e:(r=this.natural(t,e),t=void 0);break;case 3:r=this.natural(e,n)}for(var i="",o=0;o<r;o++)i+=this.character(t);return i},str:function(){return this.string.apply(this,arguments)},range:function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1,t=+t,e=+e,n=+n;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);i<r;)o[i++]=t,t+=n;return o}}},function(t,e){var n={yyyy:"getFullYear",yy:function(t){return(""+t.getFullYear()).slice(2)},y:"yy",MM:function(t){return t=t.getMonth()+1,t<10?"0"+t:t},M:function(t){return t.getMonth()+1},dd:function(t){return t=t.getDate(),t<10?"0"+t:t},d:"getDate",HH:function(t){return t=t.getHours(),t<10?"0"+t:t},H:"getHours",hh:function(t){return t=t.getHours()%12,t<10?"0"+t:t},h:function(t){return t.getHours()%12},mm:function(t){return t=t.getMinutes(),t<10?"0"+t:t},m:"getMinutes",ss:function(t){return t=t.getSeconds(),t<10?"0"+t:t},s:"getSeconds",SS:function(t){return t=t.getMilliseconds(),t<10&&"00"+t||t<100&&"0"+t||t},S:"getMilliseconds",A:function(t){return t.getHours()<12?"AM":"PM"},a:function(t){return t.getHours()<12?"am":"pm"},T:"getTime"};t.exports={_patternLetters:n,_rformat:new RegExp(function(){var t,e=[];for(t in n)e.push(t);return"("+e.join("|")+")"}(),"g"),_formatDate:function(t,e){return e.replace(this._rformat,(function e(r,i){return"function"==typeof n[i]?n[i](t):n[i]in n?e(r,n[i]):t[n[i]]()}))},_randomDate:function(t,e){return t=void 0===t?new Date(0):t,e=void 0===e?new Date:e,new Date(Math.random()*(e.getTime()-t.getTime()))},date:function(t){return t=t||"yyyy-MM-dd",this._formatDate(this._randomDate(),t)},time:function(t){return t=t||"HH:mm:ss",this._formatDate(this._randomDate(),t)},datetime:function(t){return t=t||"yyyy-MM-dd HH:mm:ss",this._formatDate(this._randomDate(),t)},now:function(t,e){1!==arguments.length||/year|month|day|hour|minute|second|week/.test(t)||(e=t,t=""),t=(t||"").toLowerCase(),e=e||"yyyy-MM-dd HH:mm:ss";var n=new Date;switch(t){case"year":n.setMonth(0);case"month":n.setDate(1);case"week":case"day":n.setHours(0);case"hour":n.setMinutes(0);case"minute":n.setSeconds(0);case"second":n.setMilliseconds(0)}return"week"===t&&n.setDate(n.getDate()-n.getDay()),this._formatDate(n,e)}}},function(t,e,n){(function(t){t.exports={_adSize:["300x250","250x250","240x400","336x280","180x150","720x300","468x60","234x60","88x31","120x90","120x60","120x240","125x125","728x90","160x600","120x600","300x600"],_screenSize:["320x200","320x240","640x480","800x480","800x480","1024x600","1024x768","1280x800","1440x900","1920x1200","2560x1600"],_videoSize:["720x480","768x576","1280x720","1920x1080"],image:function(t,e,n,r,i){return 4===arguments.length&&(i=r,r=void 0),3===arguments.length&&(i=n,n=void 0),"http://dummyimage.com/"+(t=t||this.pick(this._adSize))+((e=e&&~e.indexOf("#")?e.slice(1):e)?"/"+e:"")+((n=n&&~n.indexOf("#")?n.slice(1):n)?"/"+n:"")+(r?"."+r:"")+(i?"&text="+i:"")},img:function(){return this.image.apply(this,arguments)},_brandColors:{"4ormat":"#fb0a2a","500px":"#02adea","About.me (blue)":"#00405d","About.me (yellow)":"#ffcc33",Addvocate:"#ff6138",Adobe:"#ff0000",Aim:"#fcd20b",Amazon:"#e47911",Android:"#a4c639","Angie's List":"#7fbb00",AOL:"#0060a3",Atlassian:"#003366",Behance:"#053eff","Big Cartel":"#97b538",bitly:"#ee6123",Blogger:"#fc4f08",Boeing:"#0039a6","Booking.com":"#003580",Carbonmade:"#613854",Cheddar:"#ff7243","Code School":"#3d4944",Delicious:"#205cc0",Dell:"#3287c1",Designmoo:"#e54a4f",Deviantart:"#4e6252","Designer News":"#2d72da",Devour:"#fd0001",DEWALT:"#febd17","Disqus (blue)":"#59a3fc","Disqus (orange)":"#db7132",Dribbble:"#ea4c89",Dropbox:"#3d9ae8",Drupal:"#0c76ab",Dunked:"#2a323a",eBay:"#89c507",Ember:"#f05e1b",Engadget:"#00bdf6",Envato:"#528036",Etsy:"#eb6d20",Evernote:"#5ba525","Fab.com":"#dd0017",Facebook:"#3b5998",Firefox:"#e66000","Flickr (blue)":"#0063dc","Flickr (pink)":"#ff0084",Forrst:"#5b9a68",Foursquare:"#25a0ca",Garmin:"#007cc3",GetGlue:"#2d75a2",Gimmebar:"#f70078",GitHub:"#171515","Google Blue":"#0140ca","Google Green":"#16a61e","Google Red":"#dd1812","Google Yellow":"#fcca03","Google+":"#dd4b39",Grooveshark:"#f77f00",Groupon:"#82b548","Hacker News":"#ff6600",HelloWallet:"#0085ca","Heroku (light)":"#c7c5e6","Heroku (dark)":"#6567a5",HootSuite:"#003366",Houzz:"#73ba37",HTML5:"#ec6231",IKEA:"#ffcc33",IMDb:"#f3ce13",Instagram:"#3f729b",Intel:"#0071c5",Intuit:"#365ebf",Kickstarter:"#76cc1e",kippt:"#e03500",Kodery:"#00af81",LastFM:"#c3000d",LinkedIn:"#0e76a8",Livestream:"#cf0005",Lumo:"#576396",Mixpanel:"#a086d3",Meetup:"#e51937",Nokia:"#183693",NVIDIA:"#76b900",Opera:"#cc0f16",Path:"#e41f11","PayPal (dark)":"#1e477a","PayPal (light)":"#3b7bbf",Pinboard:"#0000e6",Pinterest:"#c8232c",PlayStation:"#665cbe",Pocket:"#ee4056",Prezi:"#318bff",Pusha:"#0f71b4",Quora:"#a82400","QUOTE.fm":"#66ceff",Rdio:"#008fd5",Readability:"#9c0000","Red Hat":"#cc0000",Resource:"#7eb400",Rockpack:"#0ba6ab",Roon:"#62b0d9",RSS:"#ee802f",Salesforce:"#1798c1",Samsung:"#0c4da2",Shopify:"#96bf48",Skype:"#00aff0",Snagajob:"#f47a20",Softonic:"#008ace",SoundCloud:"#ff7700","Space Box":"#f86960",Spotify:"#81b71a",Sprint:"#fee100",Squarespace:"#121212",StackOverflow:"#ef8236",Staples:"#cc0000","Status Chart":"#d7584f",Stripe:"#008cdd",StudyBlue:"#00afe1",StumbleUpon:"#f74425","T-Mobile":"#ea0a8e",Technorati:"#40a800","The Next Web":"#ef4423",Treehouse:"#5cb868",Trulia:"#5eab1f",Tumblr:"#34526f","Twitch.tv":"#6441a5",Twitter:"#00acee",TYPO3:"#ff8700",Ubuntu:"#dd4814",Ustream:"#3388ff",Verizon:"#ef1d1d",Vimeo:"#86c9ef",Vine:"#00a478",Virb:"#06afd8","Virgin Media":"#cc0000",Wooga:"#5b009c","WordPress (blue)":"#21759b","WordPress (orange)":"#d54e21","WordPress (grey)":"#464646",Wunderlist:"#2b88d9",XBOX:"#9bc848",XING:"#126567","Yahoo!":"#720e9e",Yandex:"#ffcc00",Yelp:"#c41200",YouTube:"#c4302b",Zalongo:"#5498dc",Zendesk:"#78a300",Zerply:"#9dcc7a",Zootool:"#5e8b1d"},_brandNames:function(){var t,e=[];for(t in this._brandColors)e.push(t);return e},dataImage:function(e,n){var r,i=(r="undefined"!=typeof document?document.createElement("canvas"):new(t.require("canvas")))&&r.getContext&&r.getContext("2d");if(!r||!i)return"";e=e||this.pick(this._adSize),n=void 0!==n?n:e,e=e.split("x");var o=parseInt(e[0],10),a=(e=parseInt(e[1],10),this._brandColors[this.pick(this._brandNames())]);return r.width=o,r.height=e,i.textAlign="center",i.textBaseline="middle",i.fillStyle=a,i.fillRect(0,0,o,e),i.fillStyle="#FFF",i.font="bold 14px sans-serif",i.fillText(n,o/2,e/2,o),r.toDataURL("image/png")}}}).call(e,n(9)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){var r=n(11),i=n(12);t.exports={color:function(t){return t||i[t]?i[t].nicer:this.hex()},hex:function(){var t=this._goldenRatioColor();t=r.hsv2rgb(t);return r.rgb2hex(t[0],t[1],t[2])},rgb:function(){var t=this._goldenRatioColor();t=r.hsv2rgb(t);return"rgb("+parseInt(t[0],10)+", "+parseInt(t[1],10)+", "+parseInt(t[2],10)+")"},rgba:function(){var t=this._goldenRatioColor();t=r.hsv2rgb(t);return"rgba("+parseInt(t[0],10)+", "+parseInt(t[1],10)+", "+parseInt(t[2],10)+", "+Math.random().toFixed(2)+")"},hsl:function(){var t=this._goldenRatioColor();t=r.hsv2hsl(t);return"hsl("+parseInt(t[0],10)+", "+parseInt(t[1],10)+", "+parseInt(t[2],10)+")"},_goldenRatioColor:function(t,e){return this._goldenRatio=.618033988749895,this._hue=this._hue||Math.random(),this._hue+=this._goldenRatio,this._hue%=1,[360*this._hue,100*(t="number"!=typeof t?.5:t),100*(e="number"!=typeof e?.95:e)]}}},function(t,e){t.exports={rgb2hsl:function(t){var e,n=t[0]/255,r=t[1]/255,i=(t=t[2]/255,Math.min(n,r,t)),o=Math.max(n,r,t),a=o-i;return o==i?e=0:n==o?e=(r-t)/a:r==o?e=2+(t-n)/a:t==o&&(e=4+(n-r)/a),(e=Math.min(60*e,360))<0&&(e+=360),t=(i+o)/2,[e,100*(o==i?0:t<=.5?a/(o+i):a/(2-o-i)),100*t]},rgb2hsv:function(t){var e,n=t[0],r=t[1],i=(t=t[2],Math.min(n,r,t)),o=Math.max(n,r,t),a=o-i,s=0===o?0:a/o*1e3/10;return o==i?e=0:n==o?e=(r-t)/a:r==o?e=2+(t-n)/a:t==o&&(e=4+(n-r)/a),(e=Math.min(60*e,360))<0&&(e+=360),[e,s,o/255*1e3/10]},hsl2rgb:function(t){var e,n,r=t[0]/360,i=t[1]/100;t=t[2]/100;if(0==i)return[n=255*t,n,n];for(var o,a=2*t-(o=t<.5?t*(1+i):t+i-t*i),s=[0,0,0],u=0;u<3;u++)(e=r+1/3*-(u-1))<0&&e++,1<e&&e--,s[u]=255*(n=6*e<1?a+6*(o-a)*e:2*e<1?o:3*e<2?a+(o-a)*(2/3-e)*6:a);return s},hsl2hsv:function(t){var e=t[0],n=t[1]/100;t=t[2]/100;return[e,2*(n*=(t*=2)<=1?t:2-t)/(t+n)*100,(t+n)/2*100]},hsv2rgb:function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=(t=Math.floor(e)%6,e=e-Math.floor(e),255*r*(1-n)),o=255*r*(1-n*e),a=255*r*(1-n*(1-e));switch(r*=255,t){case 0:return[r,a,i];case 1:return[o,r,i];case 2:return[i,r,a];case 3:return[i,o,r];case 4:return[a,i,r];case 5:return[r,i,o]}},hsv2hsl:function(t){var e=t[0],n=t[1]/100,r=(t=t[2]/100,(2-n)*t);n*=t;return[e,100*(n/=r<=1?r:2-r),100*(r/=2)]},rgb2hex:function(t,e,n){return"#"+((256+t<<8|e)<<8|n).toString(16).slice(1)},hex2rgb:function(t){return[(t="0x"+t.slice(1).replace(4<t.length?t:/./g,"$&$&")|0)>>16,t>>8&255,255&t]}}},function(t,e){t.exports={navy:{value:"#000080",nicer:"#001F3F"},blue:{value:"#0000ff",nicer:"#0074D9"},aqua:{value:"#00ffff",nicer:"#7FDBFF"},teal:{value:"#008080",nicer:"#39CCCC"},olive:{value:"#008000",nicer:"#3D9970"},green:{value:"#008000",nicer:"#2ECC40"},lime:{value:"#00ff00",nicer:"#01FF70"},yellow:{value:"#ffff00",nicer:"#FFDC00"},orange:{value:"#ffa500",nicer:"#FF851B"},red:{value:"#ff0000",nicer:"#FF4136"},maroon:{value:"#800000",nicer:"#85144B"},fuchsia:{value:"#ff00ff",nicer:"#F012BE"},purple:{value:"#800080",nicer:"#B10DC9"},silver:{value:"#c0c0c0",nicer:"#DDDDDD"},gray:{value:"#808080",nicer:"#AAAAAA"},black:{value:"#000000",nicer:"#111111"},white:{value:"#FFFFFF",nicer:"#FFFFFF"}}},function(t,e,n){var r=n(6),i=n(14);function o(t,e,n,i){return void 0===n?r.natural(t,e):void 0===i?n:r.natural(parseInt(n,10),parseInt(i,10))}t.exports={paragraph:function(t,e){for(var n=o(3,7,t,e),r=[],i=0;i<n;i++)r.push(this.sentence());return r.join(" ")},cparagraph:function(t,e){for(var n=o(3,7,t,e),r=[],i=0;i<n;i++)r.push(this.csentence());return r.join("")},sentence:function(t,e){for(var n=o(12,18,t,e),r=[],a=0;a<n;a++)r.push(this.word());return i.capitalize(r.join(" "))+"."},csentence:function(t,e){for(var n=o(12,18,t,e),r=[],i=0;i<n;i++)r.push(this.cword());return r.join("")+"。"},word:function(t,e){for(var n=o(3,10,t,e),i="",a=0;a<n;a++)i+=r.character("lower");return i},cword:function(t,e,n){var r,i="的一是在不了有和人这中大为上个国我以要他时来用们生到作地于出就分对成会可主发年动同工也能下过子说产种面而方后多定行学法所民得经十三之进着等部度家电力里如水化高自二理起小物现实加量都两体制机当使点从业本去把性好应开它合还因由其些然前外天政四日那社义事平形相全表间样与关各重新线内数正心反你明看原又么利比或但质气第向道命此变条只没结解问意建月公无系军很情者最立代想已通并提直题党程展五果料象员革位入常文总次品式活设及管特件长求老头基资边流路级少图山统接知较将组见计别她手角期根论运农指几九区强放决西被干做必战先回则任取据处队南给色光门即保治北造百规热领七海口东导器压志世金增争济阶油思术极交受联什认六共权收证改清己美再采转更单风切打白教速花带安场身车例真务具万每目至达走积示议声报斗完类八离华名确才科张信马节话米整空元况今集温传土许步群广石记需段研界拉林律叫且究观越织装影算低持音众书布复容儿须际商非验连断深难近矿千周委素技备半办青省列习响约支般史感劳便团往酸历市克何除消构府称太准精值号率族维划选标写存候毛亲快效斯院查江型眼王按格养易置派层片始却专状育厂京识适属圆包火住调满县局照参红细引听该铁价严龙飞";switch(arguments.length){case 0:t=i,r=1;break;case 1:"string"==typeof arguments[0]?r=1:(r=t,t=i);break;case 2:"string"==typeof arguments[0]?r=e:(r=this.natural(t,e),t=i);break;case 3:r=this.natural(e,n)}for(var o="",a=0;a<r;a++)o+=t.charAt(this.natural(0,t.length-1));return o},title:function(t,e){for(var n=o(3,7,t,e),r=[],i=0;i<n;i++)r.push(this.capitalize(this.word()));return r.join(" ")},ctitle:function(t,e){for(var n=o(3,7,t,e),r=[],i=0;i<n;i++)r.push(this.cword());return r.join("")}}},function(t,e,n){var r=n(3);t.exports={capitalize:function(t){return(t+"").charAt(0).toUpperCase()+(t+"").substr(1)},upper:function(t){return(t+"").toUpperCase()},lower:function(t){return(t+"").toLowerCase()},pick:function(t,e,n){return r.isArray(t)?(void 0===e&&(e=1),void 0===n&&(n=e)):(t=[].slice.call(arguments),n=e=1),1===e&&1===n?t[this.natural(0,t.length-1)]:this.shuffle(t,e,n)},shuffle:function(t,e,n){for(var r,i=(t=t||[]).slice(0),o=[],a=i.length,s=0;s<a;s++)r=this.natural(0,i.length-1),o.push(i[r]),i.splice(r,1);switch(arguments.length){case 0:case 1:return o;case 2:n=e;case 3:return e=parseInt(e,10),n=parseInt(n,10),o.slice(0,this.natural(e,n))}},order:function t(e){t.cache=t.cache||{},1<arguments.length&&(e=[].slice.call(arguments,0));var n=t.options.context.templatePath.join(".");n=t.cache[n]=t.cache[n]||{index:0,array:e};return n.array[n.index++%n.array.length]}}},function(t,e){t.exports={first:function(){var t=["James","John","Robert","Michael","William","David","Richard","Charles","Joseph","Thomas","Christopher","Daniel","Paul","Mark","Donald","George","Kenneth","Steven","Edward","Brian","Ronald","Anthony","Kevin","Jason","Matthew","Gary","Timothy","Jose","Larry","Jeffrey","Frank","Scott","Eric"].concat(["Mary","Patricia","Linda","Barbara","Elizabeth","Jennifer","Maria","Susan","Margaret","Dorothy","Lisa","Nancy","Karen","Betty","Helen","Sandra","Donna","Carol","Ruth","Sharon","Michelle","Laura","Sarah","Kimberly","Deborah","Jessica","Shirley","Cynthia","Angela","Melissa","Brenda","Amy","Anna"]);return this.pick(t)},last:function(){return this.pick(["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen"])},name:function(t){return this.first()+" "+(t?this.first()+" ":"")+this.last()},cfirst:function(){var t="王 李 张 刘 陈 杨 赵 黄 周 吴 徐 孙 胡 朱 高 林 何 郭 马 罗 梁 宋 郑 谢 韩 唐 冯 于 董 萧 程 曹 袁 邓 许 傅 沈 曾 彭 吕 苏 卢 蒋 蔡 贾 丁 魏 薛 叶 阎 余 潘 杜 戴 夏 锺 汪 田 任 姜 范 方 石 姚 谭 廖 邹 熊 金 陆 郝 孔 白 崔 康 毛 邱 秦 江 史 顾 侯 邵 孟 龙 万 段 雷 钱 汤 尹 黎 易 常 武 乔 贺 赖 龚 文".split(" ");return this.pick(t)},clast:function(){var t="伟 芳 娜 秀英 敏 静 丽 强 磊 军 洋 勇 艳 杰 娟 涛 明 超 秀兰 霞 平 刚 桂英".split(" ");return this.pick(t)},cname:function(){return this.cfirst()+this.clast()}}},function(t,e){t.exports={url:function(t,e){return(t||this.protocol())+"://"+(e||this.domain())+"/"+this.word()},protocol:function(){return this.pick("http ftp gopher mailto mid cid news nntp prospero telnet rlogin tn3270 wais".split(" "))},domain:function(t){return this.word()+"."+(t||this.tld())},tld:function(){return this.pick("com net org edu gov int mil cn com.cn net.cn gov.cn org.cn 中国 中国互联.公司 中国互联.网络 tel biz cc tv info name hk mobi asia cd travel pro museum coop aero ad ae af ag ai al am an ao aq ar as at au aw az ba bb bd be bf bg bh bi bj bm bn bo br bs bt bv bw by bz ca cc cf cg ch ci ck cl cm cn co cq cr cu cv cx cy cz de dj dk dm do dz ec ee eg eh es et ev fi fj fk fm fo fr ga gb gd ge gf gh gi gl gm gn gp gr gt gu gw gy hk hm hn hr ht hu id ie il in io iq ir is it jm jo jp ke kg kh ki km kn kp kr kw ky kz la lb lc li lk lr ls lt lu lv ly ma mc md mg mh ml mm mn mo mp mq mr ms mt mv mw mx my mz na nc ne nf ng ni nl no np nr nt nu nz om qa pa pe pf pg ph pk pl pm pn pr pt pw py re ro ru rw sa sb sc sd se sg sh si sj sk sl sm sn so sr st su sy sz tc td tf tg th tj tk tm tn to tp tr tt tv tw tz ua ug uk us uy va vc ve vg vn vu wf ws ye yu za zm zr zw".split(" "))},email:function(t){return this.character("lower")+"."+this.word()+"@"+(t||this.word()+"."+this.tld())},ip:function(){return this.natural(0,255)+"."+this.natural(0,255)+"."+this.natural(0,255)+"."+this.natural(0,255)}}},function(t,e,n){var r=n(18),i=["东北","华北","华东","华中","华南","西南","西北"];t.exports={region:function(){return this.pick(i)},province:function(){return this.pick(r).name},city:function(t){var e=this.pick(r),n=this.pick(e.children);return t?[e.name,n.name].join(" "):n.name},county:function(t){var e=this.pick(r),n=this.pick(e.children),i=this.pick(n.children)||{name:"-"};return t?[e.name,n.name,i.name].join(" "):i.name},zip:function(t){for(var e="",n=0;n<(t||6);n++)e+=this.natural(0,9);return e}}},function(t,e){var n={11e4:"北京",110100:"北京市",110101:"东城区",110102:"西城区",110105:"朝阳区",110106:"丰台区",110107:"石景山区",110108:"海淀区",110109:"门头沟区",110111:"房山区",110112:"通州区",110113:"顺义区",110114:"昌平区",110115:"大兴区",110116:"怀柔区",110117:"平谷区",110228:"密云县",110229:"延庆县",110230:"其它区",12e4:"天津",120100:"天津市",120101:"和平区",120102:"河东区",120103:"河西区",120104:"南开区",120105:"河北区",120106:"红桥区",120110:"东丽区",120111:"西青区",120112:"津南区",120113:"北辰区",120114:"武清区",120115:"宝坻区",120116:"滨海新区",120221:"宁河县",120223:"静海县",120225:"蓟县",120226:"其它区",13e4:"河北省",130100:"石家庄市",130102:"长安区",130103:"桥东区",130104:"桥西区",130105:"新华区",130107:"井陉矿区",130108:"裕华区",130121:"井陉县",130123:"正定县",130124:"栾城县",130125:"行唐县",130126:"灵寿县",130127:"高邑县",130128:"深泽县",130129:"赞皇县",130130:"无极县",130131:"平山县",130132:"元氏县",130133:"赵县",130181:"辛集市",130182:"藁城市",130183:"晋州市",130184:"新乐市",130185:"鹿泉市",130186:"其它区",130200:"唐山市",130202:"路南区",130203:"路北区",130204:"古冶区",130205:"开平区",130207:"丰南区",130208:"丰润区",130223:"滦县",130224:"滦南县",130225:"乐亭县",130227:"迁西县",130229:"玉田县",130230:"曹妃甸区",130281:"遵化市",130283:"迁安市",130284:"其它区",130300:"秦皇岛市",130302:"海港区",130303:"山海关区",130304:"北戴河区",130321:"青龙满族自治县",130322:"昌黎县",130323:"抚宁县",130324:"卢龙县",130398:"其它区",130400:"邯郸市",130402:"邯山区",130403:"丛台区",130404:"复兴区",130406:"峰峰矿区",130421:"邯郸县",130423:"临漳县",130424:"成安县",130425:"大名县",130426:"涉县",130427:"磁县",130428:"肥乡县",130429:"永年县",130430:"邱县",130431:"鸡泽县",130432:"广平县",130433:"馆陶县",130434:"魏县",130435:"曲周县",130481:"武安市",130482:"其它区",130500:"邢台市",130502:"桥东区",130503:"桥西区",130521:"邢台县",130522:"临城县",130523:"内丘县",130524:"柏乡县",130525:"隆尧县",130526:"任县",130527:"南和县",130528:"宁晋县",130529:"巨鹿县",130530:"新河县",130531:"广宗县",130532:"平乡县",130533:"威县",130534:"清河县",130535:"临西县",130581:"南宫市",130582:"沙河市",130583:"其它区",130600:"保定市",130602:"新市区",130603:"北市区",130604:"南市区",130621:"满城县",130622:"清苑县",130623:"涞水县",130624:"阜平县",130625:"徐水县",130626:"定兴县",130627:"唐县",130628:"高阳县",130629:"容城县",130630:"涞源县",130631:"望都县",130632:"安新县",130633:"易县",130634:"曲阳县",130635:"蠡县",130636:"顺平县",130637:"博野县",130638:"雄县",130681:"涿州市",130682:"定州市",130683:"安国市",130684:"高碑店市",130699:"其它区",130700:"张家口市",130702:"桥东区",130703:"桥西区",130705:"宣化区",130706:"下花园区",130721:"宣化县",130722:"张北县",130723:"康保县",130724:"沽源县",130725:"尚义县",130726:"蔚县",130727:"阳原县",130728:"怀安县",130729:"万全县",130730:"怀来县",130731:"涿鹿县",130732:"赤城县",130733:"崇礼县",130734:"其它区",130800:"承德市",130802:"双桥区",130803:"双滦区",130804:"鹰手营子矿区",130821:"承德县",130822:"兴隆县",130823:"平泉县",130824:"滦平县",130825:"隆化县",130826:"丰宁满族自治县",130827:"宽城满族自治县",130828:"围场满族蒙古族自治县",130829:"其它区",130900:"沧州市",130902:"新华区",130903:"运河区",130921:"沧县",130922:"青县",130923:"东光县",130924:"海兴县",130925:"盐山县",130926:"肃宁县",130927:"南皮县",130928:"吴桥县",130929:"献县",130930:"孟村回族自治县",130981:"泊头市",130982:"任丘市",130983:"黄骅市",130984:"河间市",130985:"其它区",131e3:"廊坊市",131002:"安次区",131003:"广阳区",131022:"固安县",131023:"永清县",131024:"香河县",131025:"大城县",131026:"文安县",131028:"大厂回族自治县",131081:"霸州市",131082:"三河市",131083:"其它区",131100:"衡水市",131102:"桃城区",131121:"枣强县",131122:"武邑县",131123:"武强县",131124:"饶阳县",131125:"安平县",131126:"故城县",131127:"景县",131128:"阜城县",131181:"冀州市",131182:"深州市",131183:"其它区",14e4:"山西省",140100:"太原市",140105:"小店区",140106:"迎泽区",140107:"杏花岭区",140108:"尖草坪区",140109:"万柏林区",140110:"晋源区",140121:"清徐县",140122:"阳曲县",140123:"娄烦县",140181:"古交市",140182:"其它区",140200:"大同市",140202:"城区",140203:"矿区",140211:"南郊区",140212:"新荣区",140221:"阳高县",140222:"天镇县",140223:"广灵县",140224:"灵丘县",140225:"浑源县",140226:"左云县",140227:"大同县",140228:"其它区",140300:"阳泉市",140302:"城区",140303:"矿区",140311:"郊区",140321:"平定县",140322:"盂县",140323:"其它区",140400:"长治市",140421:"长治县",140423:"襄垣县",140424:"屯留县",140425:"平顺县",140426:"黎城县",140427:"壶关县",140428:"长子县",140429:"武乡县",140430:"沁县",140431:"沁源县",140481:"潞城市",140482:"城区",140483:"郊区",140485:"其它区",140500:"晋城市",140502:"城区",140521:"沁水县",140522:"阳城县",140524:"陵川县",140525:"泽州县",140581:"高平市",140582:"其它区",140600:"朔州市",140602:"朔城区",140603:"平鲁区",140621:"山阴县",140622:"应县",140623:"右玉县",140624:"怀仁县",140625:"其它区",140700:"晋中市",140702:"榆次区",140721:"榆社县",140722:"左权县",140723:"和顺县",140724:"昔阳县",140725:"寿阳县",140726:"太谷县",140727:"祁县",140728:"平遥县",140729:"灵石县",140781:"介休市",140782:"其它区",140800:"运城市",140802:"盐湖区",140821:"临猗县",140822:"万荣县",140823:"闻喜县",140824:"稷山县",140825:"新绛县",140826:"绛县",140827:"垣曲县",140828:"夏县",140829:"平陆县",140830:"芮城县",140881:"永济市",140882:"河津市",140883:"其它区",140900:"忻州市",140902:"忻府区",140921:"定襄县",140922:"五台县",140923:"代县",140924:"繁峙县",140925:"宁武县",140926:"静乐县",140927:"神池县",140928:"五寨县",140929:"岢岚县",140930:"河曲县",140931:"保德县",140932:"偏关县",140981:"原平市",140982:"其它区",141e3:"临汾市",141002:"尧都区",141021:"曲沃县",141022:"翼城县",141023:"襄汾县",141024:"洪洞县",141025:"古县",141026:"安泽县",141027:"浮山县",141028:"吉县",141029:"乡宁县",141030:"大宁县",141031:"隰县",141032:"永和县",141033:"蒲县",141034:"汾西县",141081:"侯马市",141082:"霍州市",141083:"其它区",141100:"吕梁市",141102:"离石区",141121:"文水县",141122:"交城县",141123:"兴县",141124:"临县",141125:"柳林县",141126:"石楼县",141127:"岚县",141128:"方山县",141129:"中阳县",141130:"交口县",141181:"孝义市",141182:"汾阳市",141183:"其它区",15e4:"内蒙古自治区",150100:"呼和浩特市",150102:"新城区",150103:"回民区",150104:"玉泉区",150105:"赛罕区",150121:"土默特左旗",150122:"托克托县",150123:"和林格尔县",150124:"清水河县",150125:"武川县",150126:"其它区",150200:"包头市",150202:"东河区",150203:"昆都仑区",150204:"青山区",150205:"石拐区",150206:"白云鄂博矿区",150207:"九原区",150221:"土默特右旗",150222:"固阳县",150223:"达尔罕茂明安联合旗",150224:"其它区",150300:"乌海市",150302:"海勃湾区",150303:"海南区",150304:"乌达区",150305:"其它区",150400:"赤峰市",150402:"红山区",150403:"元宝山区",150404:"松山区",150421:"阿鲁科尔沁旗",150422:"巴林左旗",150423:"巴林右旗",150424:"林西县",150425:"克什克腾旗",150426:"翁牛特旗",150428:"喀喇沁旗",150429:"宁城县",150430:"敖汉旗",150431:"其它区",150500:"通辽市",150502:"科尔沁区",150521:"科尔沁左翼中旗",150522:"科尔沁左翼后旗",150523:"开鲁县",150524:"库伦旗",150525:"奈曼旗",150526:"扎鲁特旗",150581:"霍林郭勒市",150582:"其它区",150600:"鄂尔多斯市",150602:"东胜区",150621:"达拉特旗",150622:"准格尔旗",150623:"鄂托克前旗",150624:"鄂托克旗",150625:"杭锦旗",150626:"乌审旗",150627:"伊金霍洛旗",150628:"其它区",150700:"呼伦贝尔市",150702:"海拉尔区",150703:"扎赉诺尔区",150721:"阿荣旗",150722:"莫力达瓦达斡尔族自治旗",150723:"鄂伦春自治旗",150724:"鄂温克族自治旗",150725:"陈巴尔虎旗",150726:"新巴尔虎左旗",150727:"新巴尔虎右旗",150781:"满洲里市",150782:"牙克石市",150783:"扎兰屯市",150784:"额尔古纳市",150785:"根河市",150786:"其它区",150800:"巴彦淖尔市",150802:"临河区",150821:"五原县",150822:"磴口县",150823:"乌拉特前旗",150824:"乌拉特中旗",150825:"乌拉特后旗",150826:"杭锦后旗",150827:"其它区",150900:"乌兰察布市",150902:"集宁区",150921:"卓资县",150922:"化德县",150923:"商都县",150924:"兴和县",150925:"凉城县",150926:"察哈尔右翼前旗",150927:"察哈尔右翼中旗",150928:"察哈尔右翼后旗",150929:"四子王旗",150981:"丰镇市",150982:"其它区",152200:"兴安盟",152201:"乌兰浩特市",152202:"阿尔山市",152221:"科尔沁右翼前旗",152222:"科尔沁右翼中旗",152223:"扎赉特旗",152224:"突泉县",152225:"其它区",152500:"锡林郭勒盟",152501:"二连浩特市",152502:"锡林浩特市",152522:"阿巴嘎旗",152523:"苏尼特左旗",152524:"苏尼特右旗",152525:"东乌珠穆沁旗",152526:"西乌珠穆沁旗",152527:"太仆寺旗",152528:"镶黄旗",152529:"正镶白旗",152530:"正蓝旗",152531:"多伦县",152532:"其它区",152900:"阿拉善盟",152921:"阿拉善左旗",152922:"阿拉善右旗",152923:"额济纳旗",152924:"其它区",21e4:"辽宁省",210100:"沈阳市",210102:"和平区",210103:"沈河区",210104:"大东区",210105:"皇姑区",210106:"铁西区",210111:"苏家屯区",210112:"东陵区",210113:"新城子区",210114:"于洪区",210122:"辽中县",210123:"康平县",210124:"法库县",210181:"新民市",210184:"沈北新区",210185:"其它区",210200:"大连市",210202:"中山区",210203:"西岗区",210204:"沙河口区",210211:"甘井子区",210212:"旅顺口区",210213:"金州区",210224:"长海县",210281:"瓦房店市",210282:"普兰店市",210283:"庄河市",210298:"其它区",210300:"鞍山市",210302:"铁东区",210303:"铁西区",210304:"立山区",210311:"千山区",210321:"台安县",210323:"岫岩满族自治县",210381:"海城市",210382:"其它区",210400:"抚顺市",210402:"新抚区",210403:"东洲区",210404:"望花区",210411:"顺城区",210421:"抚顺县",210422:"新宾满族自治县",210423:"清原满族自治县",210424:"其它区",210500:"本溪市",210502:"平山区",210503:"溪湖区",210504:"明山区",210505:"南芬区",210521:"本溪满族自治县",210522:"桓仁满族自治县",210523:"其它区",210600:"丹东市",210602:"元宝区",210603:"振兴区",210604:"振安区",210624:"宽甸满族自治县",210681:"东港市",210682:"凤城市",210683:"其它区",210700:"锦州市",210702:"古塔区",210703:"凌河区",210711:"太和区",210726:"黑山县",210727:"义县",210781:"凌海市",210782:"北镇市",210783:"其它区",210800:"营口市",210802:"站前区",210803:"西市区",210804:"鲅鱼圈区",210811:"老边区",210881:"盖州市",210882:"大石桥市",210883:"其它区",210900:"阜新市",210902:"海州区",210903:"新邱区",210904:"太平区",210905:"清河门区",210911:"细河区",210921:"阜新蒙古族自治县",210922:"彰武县",210923:"其它区",211e3:"辽阳市",211002:"白塔区",211003:"文圣区",211004:"宏伟区",211005:"弓长岭区",211011:"太子河区",211021:"辽阳县",211081:"灯塔市",211082:"其它区",211100:"盘锦市",211102:"双台子区",211103:"兴隆台区",211121:"大洼县",211122:"盘山县",211123:"其它区",211200:"铁岭市",211202:"银州区",211204:"清河区",211221:"铁岭县",211223:"西丰县",211224:"昌图县",211281:"调兵山市",211282:"开原市",211283:"其它区",211300:"朝阳市",211302:"双塔区",211303:"龙城区",211321:"朝阳县",211322:"建平县",211324:"喀喇沁左翼蒙古族自治县",211381:"北票市",211382:"凌源市",211383:"其它区",211400:"葫芦岛市",211402:"连山区",211403:"龙港区",211404:"南票区",211421:"绥中县",211422:"建昌县",211481:"兴城市",211482:"其它区",22e4:"吉林省",220100:"长春市",220102:"南关区",220103:"宽城区",220104:"朝阳区",220105:"二道区",220106:"绿园区",220112:"双阳区",220122:"农安县",220181:"九台市",220182:"榆树市",220183:"德惠市",220188:"其它区",220200:"吉林市",220202:"昌邑区",220203:"龙潭区",220204:"船营区",220211:"丰满区",220221:"永吉县",220281:"蛟河市",220282:"桦甸市",220283:"舒兰市",220284:"磐石市",220285:"其它区",220300:"四平市",220302:"铁西区",220303:"铁东区",220322:"梨树县",220323:"伊通满族自治县",220381:"公主岭市",220382:"双辽市",220383:"其它区",220400:"辽源市",220402:"龙山区",220403:"西安区",220421:"东丰县",220422:"东辽县",220423:"其它区",220500:"通化市",220502:"东昌区",220503:"二道江区",220521:"通化县",220523:"辉南县",220524:"柳河县",220581:"梅河口市",220582:"集安市",220583:"其它区",220600:"白山市",220602:"浑江区",220621:"抚松县",220622:"靖宇县",220623:"长白朝鲜族自治县",220625:"江源区",220681:"临江市",220682:"其它区",220700:"松原市",220702:"宁江区",220721:"前郭尔罗斯蒙古族自治县",220722:"长岭县",220723:"乾安县",220724:"扶余市",220725:"其它区",220800:"白城市",220802:"洮北区",220821:"镇赉县",220822:"通榆县",220881:"洮南市",220882:"大安市",220883:"其它区",222400:"延边朝鲜族自治州",222401:"延吉市",222402:"图们市",222403:"敦化市",222404:"珲春市",222405:"龙井市",222406:"和龙市",222424:"汪清县",222426:"安图县",222427:"其它区",23e4:"黑龙江省",230100:"哈尔滨市",230102:"道里区",230103:"南岗区",230104:"道外区",230106:"香坊区",230108:"平房区",230109:"松北区",230111:"呼兰区",230123:"依兰县",230124:"方正县",230125:"宾县",230126:"巴彦县",230127:"木兰县",230128:"通河县",230129:"延寿县",230181:"阿城区",230182:"双城市",230183:"尚志市",230184:"五常市",230186:"其它区",230200:"齐齐哈尔市",230202:"龙沙区",230203:"建华区",230204:"铁锋区",230205:"昂昂溪区",230206:"富拉尔基区",230207:"碾子山区",230208:"梅里斯达斡尔族区",230221:"龙江县",230223:"依安县",230224:"泰来县",230225:"甘南县",230227:"富裕县",230229:"克山县",230230:"克东县",230231:"拜泉县",230281:"讷河市",230282:"其它区",230300:"鸡西市",230302:"鸡冠区",230303:"恒山区",230304:"滴道区",230305:"梨树区",230306:"城子河区",230307:"麻山区",230321:"鸡东县",230381:"虎林市",230382:"密山市",230383:"其它区",230400:"鹤岗市",230402:"向阳区",230403:"工农区",230404:"南山区",230405:"兴安区",230406:"东山区",230407:"兴山区",230421:"萝北县",230422:"绥滨县",230423:"其它区",230500:"双鸭山市",230502:"尖山区",230503:"岭东区",230505:"四方台区",230506:"宝山区",230521:"集贤县",230522:"友谊县",230523:"宝清县",230524:"饶河县",230525:"其它区",230600:"大庆市",230602:"萨尔图区",230603:"龙凤区",230604:"让胡路区",230605:"红岗区",230606:"大同区",230621:"肇州县",230622:"肇源县",230623:"林甸县",230624:"杜尔伯特蒙古族自治县",230625:"其它区",230700:"伊春市",230702:"伊春区",230703:"南岔区",230704:"友好区",230705:"西林区",230706:"翠峦区",230707:"新青区",230708:"美溪区",230709:"金山屯区",230710:"五营区",230711:"乌马河区",230712:"汤旺河区",230713:"带岭区",230714:"乌伊岭区",230715:"红星区",230716:"上甘岭区",230722:"嘉荫县",230781:"铁力市",230782:"其它区",230800:"佳木斯市",230803:"向阳区",230804:"前进区",230805:"东风区",230811:"郊区",230822:"桦南县",230826:"桦川县",230828:"汤原县",230833:"抚远县",230881:"同江市",230882:"富锦市",230883:"其它区",230900:"七台河市",230902:"新兴区",230903:"桃山区",230904:"茄子河区",230921:"勃利县",230922:"其它区",231e3:"牡丹江市",231002:"东安区",231003:"阳明区",231004:"爱民区",231005:"西安区",231024:"东宁县",231025:"林口县",231081:"绥芬河市",231083:"海林市",231084:"宁安市",231085:"穆棱市",231086:"其它区",231100:"黑河市",231102:"爱辉区",231121:"嫩江县",231123:"逊克县",231124:"孙吴县",231181:"北安市",231182:"五大连池市",231183:"其它区",231200:"绥化市",231202:"北林区",231221:"望奎县",231222:"兰西县",231223:"青冈县",231224:"庆安县",231225:"明水县",231226:"绥棱县",231281:"安达市",231282:"肇东市",231283:"海伦市",231284:"其它区",232700:"大兴安岭地区",232702:"松岭区",232703:"新林区",232704:"呼中区",232721:"呼玛县",232722:"塔河县",232723:"漠河县",232724:"加格达奇区",232725:"其它区",31e4:"上海",310100:"上海市",310101:"黄浦区",310104:"徐汇区",310105:"长宁区",310106:"静安区",310107:"普陀区",310108:"闸北区",310109:"虹口区",310110:"杨浦区",310112:"闵行区",310113:"宝山区",310114:"嘉定区",310115:"浦东新区",310116:"金山区",310117:"松江区",310118:"青浦区",310120:"奉贤区",310230:"崇明县",310231:"其它区",32e4:"江苏省",320100:"南京市",320102:"玄武区",320104:"秦淮区",320105:"建邺区",320106:"鼓楼区",320111:"浦口区",320113:"栖霞区",320114:"雨花台区",320115:"江宁区",320116:"六合区",320124:"溧水区",320125:"高淳区",320126:"其它区",320200:"无锡市",320202:"崇安区",320203:"南长区",320204:"北塘区",320205:"锡山区",320206:"惠山区",320211:"滨湖区",320281:"江阴市",320282:"宜兴市",320297:"其它区",320300:"徐州市",320302:"鼓楼区",320303:"云龙区",320305:"贾汪区",320311:"泉山区",320321:"丰县",320322:"沛县",320323:"铜山区",320324:"睢宁县",320381:"新沂市",320382:"邳州市",320383:"其它区",320400:"常州市",320402:"天宁区",320404:"钟楼区",320405:"戚墅堰区",320411:"新北区",320412:"武进区",320481:"溧阳市",320482:"金坛市",320483:"其它区",320500:"苏州市",320505:"虎丘区",320506:"吴中区",320507:"相城区",320508:"姑苏区",320581:"常熟市",320582:"张家港市",320583:"昆山市",320584:"吴江区",320585:"太仓市",320596:"其它区",320600:"南通市",320602:"崇川区",320611:"港闸区",320612:"通州区",320621:"海安县",320623:"如东县",320681:"启东市",320682:"如皋市",320684:"海门市",320694:"其它区",320700:"连云港市",320703:"连云区",320705:"新浦区",320706:"海州区",320721:"赣榆县",320722:"东海县",320723:"灌云县",320724:"灌南县",320725:"其它区",320800:"淮安市",320802:"清河区",320803:"淮安区",320804:"淮阴区",320811:"清浦区",320826:"涟水县",320829:"洪泽县",320830:"盱眙县",320831:"金湖县",320832:"其它区",320900:"盐城市",320902:"亭湖区",320903:"盐都区",320921:"响水县",320922:"滨海县",320923:"阜宁县",320924:"射阳县",320925:"建湖县",320981:"东台市",320982:"大丰市",320983:"其它区",321e3:"扬州市",321002:"广陵区",321003:"邗江区",321023:"宝应县",321081:"仪征市",321084:"高邮市",321088:"江都区",321093:"其它区",321100:"镇江市",321102:"京口区",321111:"润州区",321112:"丹徒区",321181:"丹阳市",321182:"扬中市",321183:"句容市",321184:"其它区",321200:"泰州市",321202:"海陵区",321203:"高港区",321281:"兴化市",321282:"靖江市",321283:"泰兴市",321284:"姜堰区",321285:"其它区",321300:"宿迁市",321302:"宿城区",321311:"宿豫区",321322:"沭阳县",321323:"泗阳县",321324:"泗洪县",321325:"其它区",33e4:"浙江省",330100:"杭州市",330102:"上城区",330103:"下城区",330104:"江干区",330105:"拱墅区",330106:"西湖区",330108:"滨江区",330109:"萧山区",330110:"余杭区",330122:"桐庐县",330127:"淳安县",330182:"建德市",330183:"富阳市",330185:"临安市",330186:"其它区",330200:"宁波市",330203:"海曙区",330204:"江东区",330205:"江北区",330206:"北仑区",330211:"镇海区",330212:"鄞州区",330225:"象山县",330226:"宁海县",330281:"余姚市",330282:"慈溪市",330283:"奉化市",330284:"其它区",330300:"温州市",330302:"鹿城区",330303:"龙湾区",330304:"瓯海区",330322:"洞头县",330324:"永嘉县",330326:"平阳县",330327:"苍南县",330328:"文成县",330329:"泰顺县",330381:"瑞安市",330382:"乐清市",330383:"其它区",330400:"嘉兴市",330402:"南湖区",330411:"秀洲区",330421:"嘉善县",330424:"海盐县",330481:"海宁市",330482:"平湖市",330483:"桐乡市",330484:"其它区",330500:"湖州市",330502:"吴兴区",330503:"南浔区",330521:"德清县",330522:"长兴县",330523:"安吉县",330524:"其它区",330600:"绍兴市",330602:"越城区",330621:"绍兴县",330624:"新昌县",330681:"诸暨市",330682:"上虞市",330683:"嵊州市",330684:"其它区",330700:"金华市",330702:"婺城区",330703:"金东区",330723:"武义县",330726:"浦江县",330727:"磐安县",330781:"兰溪市",330782:"义乌市",330783:"东阳市",330784:"永康市",330785:"其它区",330800:"衢州市",330802:"柯城区",330803:"衢江区",330822:"常山县",330824:"开化县",330825:"龙游县",330881:"江山市",330882:"其它区",330900:"舟山市",330902:"定海区",330903:"普陀区",330921:"岱山县",330922:"嵊泗县",330923:"其它区",331e3:"台州市",331002:"椒江区",331003:"黄岩区",331004:"路桥区",331021:"玉环县",331022:"三门县",331023:"天台县",331024:"仙居县",331081:"温岭市",331082:"临海市",331083:"其它区",331100:"丽水市",331102:"莲都区",331121:"青田县",331122:"缙云县",331123:"遂昌县",331124:"松阳县",331125:"云和县",331126:"庆元县",331127:"景宁畲族自治县",331181:"龙泉市",331182:"其它区",34e4:"安徽省",340100:"合肥市",340102:"瑶海区",340103:"庐阳区",340104:"蜀山区",340111:"包河区",340121:"长丰县",340122:"肥东县",340123:"肥西县",340192:"其它区",340200:"芜湖市",340202:"镜湖区",340203:"弋江区",340207:"鸠江区",340208:"三山区",340221:"芜湖县",340222:"繁昌县",340223:"南陵县",340224:"其它区",340300:"蚌埠市",340302:"龙子湖区",340303:"蚌山区",340304:"禹会区",340311:"淮上区",340321:"怀远县",340322:"五河县",340323:"固镇县",340324:"其它区",340400:"淮南市",340402:"大通区",340403:"田家庵区",340404:"谢家集区",340405:"八公山区",340406:"潘集区",340421:"凤台县",340422:"其它区",340500:"马鞍山市",340503:"花山区",340504:"雨山区",340506:"博望区",340521:"当涂县",340522:"其它区",340600:"淮北市",340602:"杜集区",340603:"相山区",340604:"烈山区",340621:"濉溪县",340622:"其它区",340700:"铜陵市",340702:"铜官山区",340703:"狮子山区",340711:"郊区",340721:"铜陵县",340722:"其它区",340800:"安庆市",340802:"迎江区",340803:"大观区",340811:"宜秀区",340822:"怀宁县",340823:"枞阳县",340824:"潜山县",340825:"太湖县",340826:"宿松县",340827:"望江县",340828:"岳西县",340881:"桐城市",340882:"其它区",341e3:"黄山市",341002:"屯溪区",341003:"黄山区",341004:"徽州区",341021:"歙县",341022:"休宁县",341023:"黟县",341024:"祁门县",341025:"其它区",341100:"滁州市",341102:"琅琊区",341103:"南谯区",341122:"来安县",341124:"全椒县",341125:"定远县",341126:"凤阳县",341181:"天长市",341182:"明光市",341183:"其它区",341200:"阜阳市",341202:"颍州区",341203:"颍东区",341204:"颍泉区",341221:"临泉县",341222:"太和县",341225:"阜南县",341226:"颍上县",341282:"界首市",341283:"其它区",341300:"宿州市",341302:"埇桥区",341321:"砀山县",341322:"萧县",341323:"灵璧县",341324:"泗县",341325:"其它区",341400:"巢湖市",341421:"庐江县",341422:"无为县",341423:"含山县",341424:"和县",341500:"六安市",341502:"金安区",341503:"裕安区",341521:"寿县",341522:"霍邱县",341523:"舒城县",341524:"金寨县",341525:"霍山县",341526:"其它区",341600:"亳州市",341602:"谯城区",341621:"涡阳县",341622:"蒙城县",341623:"利辛县",341624:"其它区",341700:"池州市",341702:"贵池区",341721:"东至县",341722:"石台县",341723:"青阳县",341724:"其它区",341800:"宣城市",341802:"宣州区",341821:"郎溪县",341822:"广德县",341823:"泾县",341824:"绩溪县",341825:"旌德县",341881:"宁国市",341882:"其它区",35e4:"福建省",350100:"福州市",350102:"鼓楼区",350103:"台江区",350104:"仓山区",350105:"马尾区",350111:"晋安区",350121:"闽侯县",350122:"连江县",350123:"罗源县",350124:"闽清县",350125:"永泰县",350128:"平潭县",350181:"福清市",350182:"长乐市",350183:"其它区",350200:"厦门市",350203:"思明区",350205:"海沧区",350206:"湖里区",350211:"集美区",350212:"同安区",350213:"翔安区",350214:"其它区",350300:"莆田市",350302:"城厢区",350303:"涵江区",350304:"荔城区",350305:"秀屿区",350322:"仙游县",350323:"其它区",350400:"三明市",350402:"梅列区",350403:"三元区",350421:"明溪县",350423:"清流县",350424:"宁化县",350425:"大田县",350426:"尤溪县",350427:"沙县",350428:"将乐县",350429:"泰宁县",350430:"建宁县",350481:"永安市",350482:"其它区",350500:"泉州市",350502:"鲤城区",350503:"丰泽区",350504:"洛江区",350505:"泉港区",350521:"惠安县",350524:"安溪县",350525:"永春县",350526:"德化县",350527:"金门县",350581:"石狮市",350582:"晋江市",350583:"南安市",350584:"其它区",350600:"漳州市",350602:"芗城区",350603:"龙文区",350622:"云霄县",350623:"漳浦县",350624:"诏安县",350625:"长泰县",350626:"东山县",350627:"南靖县",350628:"平和县",350629:"华安县",350681:"龙海市",350682:"其它区",350700:"南平市",350702:"延平区",350721:"顺昌县",350722:"浦城县",350723:"光泽县",350724:"松溪县",350725:"政和县",350781:"邵武市",350782:"武夷山市",350783:"建瓯市",350784:"建阳市",350785:"其它区",350800:"龙岩市",350802:"新罗区",350821:"长汀县",350822:"永定县",350823:"上杭县",350824:"武平县",350825:"连城县",350881:"漳平市",350882:"其它区",350900:"宁德市",350902:"蕉城区",350921:"霞浦县",350922:"古田县",350923:"屏南县",350924:"寿宁县",350925:"周宁县",350926:"柘荣县",350981:"福安市",350982:"福鼎市",350983:"其它区",36e4:"江西省",360100:"南昌市",360102:"东湖区",360103:"西湖区",360104:"青云谱区",360105:"湾里区",360111:"青山湖区",360121:"南昌县",360122:"新建县",360123:"安义县",360124:"进贤县",360128:"其它区",360200:"景德镇市",360202:"昌江区",360203:"珠山区",360222:"浮梁县",360281:"乐平市",360282:"其它区",360300:"萍乡市",360302:"安源区",360313:"湘东区",360321:"莲花县",360322:"上栗县",360323:"芦溪县",360324:"其它区",360400:"九江市",360402:"庐山区",360403:"浔阳区",360421:"九江县",360423:"武宁县",360424:"修水县",360425:"永修县",360426:"德安县",360427:"星子县",360428:"都昌县",360429:"湖口县",360430:"彭泽县",360481:"瑞昌市",360482:"其它区",360483:"共青城市",360500:"新余市",360502:"渝水区",360521:"分宜县",360522:"其它区",360600:"鹰潭市",360602:"月湖区",360622:"余江县",360681:"贵溪市",360682:"其它区",360700:"赣州市",360702:"章贡区",360721:"赣县",360722:"信丰县",360723:"大余县",360724:"上犹县",360725:"崇义县",360726:"安远县",360727:"龙南县",360728:"定南县",360729:"全南县",360730:"宁都县",360731:"于都县",360732:"兴国县",360733:"会昌县",360734:"寻乌县",360735:"石城县",360781:"瑞金市",360782:"南康市",360783:"其它区",360800:"吉安市",360802:"吉州区",360803:"青原区",360821:"吉安县",360822:"吉水县",360823:"峡江县",360824:"新干县",360825:"永丰县",360826:"泰和县",360827:"遂川县",360828:"万安县",360829:"安福县",360830:"永新县",360881:"井冈山市",360882:"其它区",360900:"宜春市",360902:"袁州区",360921:"奉新县",360922:"万载县",360923:"上高县",360924:"宜丰县",360925:"靖安县",360926:"铜鼓县",360981:"丰城市",360982:"樟树市",360983:"高安市",360984:"其它区",361e3:"抚州市",361002:"临川区",361021:"南城县",361022:"黎川县",361023:"南丰县",361024:"崇仁县",361025:"乐安县",361026:"宜黄县",361027:"金溪县",361028:"资溪县",361029:"东乡县",361030:"广昌县",361031:"其它区",361100:"上饶市",361102:"信州区",361121:"上饶县",361122:"广丰县",361123:"玉山县",361124:"铅山县",361125:"横峰县",361126:"弋阳县",361127:"余干县",361128:"鄱阳县",361129:"万年县",361130:"婺源县",361181:"德兴市",361182:"其它区",37e4:"山东省",370100:"济南市",370102:"历下区",370103:"市中区",370104:"槐荫区",370105:"天桥区",370112:"历城区",370113:"长清区",370124:"平阴县",370125:"济阳县",370126:"商河县",370181:"章丘市",370182:"其它区",370200:"青岛市",370202:"市南区",370203:"市北区",370211:"黄岛区",370212:"崂山区",370213:"李沧区",370214:"城阳区",370281:"胶州市",370282:"即墨市",370283:"平度市",370285:"莱西市",370286:"其它区",370300:"淄博市",370302:"淄川区",370303:"张店区",370304:"博山区",370305:"临淄区",370306:"周村区",370321:"桓台县",370322:"高青县",370323:"沂源县",370324:"其它区",370400:"枣庄市",370402:"市中区",370403:"薛城区",370404:"峄城区",370405:"台儿庄区",370406:"山亭区",370481:"滕州市",370482:"其它区",370500:"东营市",370502:"东营区",370503:"河口区",370521:"垦利县",370522:"利津县",370523:"广饶县",370591:"其它区",370600:"烟台市",370602:"芝罘区",370611:"福山区",370612:"牟平区",370613:"莱山区",370634:"长岛县",370681:"龙口市",370682:"莱阳市",370683:"莱州市",370684:"蓬莱市",370685:"招远市",370686:"栖霞市",370687:"海阳市",370688:"其它区",370700:"潍坊市",370702:"潍城区",370703:"寒亭区",370704:"坊子区",370705:"奎文区",370724:"临朐县",370725:"昌乐县",370781:"青州市",370782:"诸城市",370783:"寿光市",370784:"安丘市",370785:"高密市",370786:"昌邑市",370787:"其它区",370800:"济宁市",370802:"市中区",370811:"任城区",370826:"微山县",370827:"鱼台县",370828:"金乡县",370829:"嘉祥县",370830:"汶上县",370831:"泗水县",370832:"梁山县",370881:"曲阜市",370882:"兖州市",370883:"邹城市",370884:"其它区",370900:"泰安市",370902:"泰山区",370903:"岱岳区",370921:"宁阳县",370923:"东平县",370982:"新泰市",370983:"肥城市",370984:"其它区",371e3:"威海市",371002:"环翠区",371081:"文登市",371082:"荣成市",371083:"乳山市",371084:"其它区",371100:"日照市",371102:"东港区",371103:"岚山区",371121:"五莲县",371122:"莒县",371123:"其它区",371200:"莱芜市",371202:"莱城区",371203:"钢城区",371204:"其它区",371300:"临沂市",371302:"兰山区",371311:"罗庄区",371312:"河东区",371321:"沂南县",371322:"郯城县",371323:"沂水县",371324:"苍山县",371325:"费县",371326:"平邑县",371327:"莒南县",371328:"蒙阴县",371329:"临沭县",371330:"其它区",371400:"德州市",371402:"德城区",371421:"陵县",371422:"宁津县",371423:"庆云县",371424:"临邑县",371425:"齐河县",371426:"平原县",371427:"夏津县",371428:"武城县",371481:"乐陵市",371482:"禹城市",371483:"其它区",371500:"聊城市",371502:"东昌府区",371521:"阳谷县",371522:"莘县",371523:"茌平县",371524:"东阿县",371525:"冠县",371526:"高唐县",371581:"临清市",371582:"其它区",371600:"滨州市",371602:"滨城区",371621:"惠民县",371622:"阳信县",371623:"无棣县",371624:"沾化县",371625:"博兴县",371626:"邹平县",371627:"其它区",371700:"菏泽市",371702:"牡丹区",371721:"曹县",371722:"单县",371723:"成武县",371724:"巨野县",371725:"郓城县",371726:"鄄城县",371727:"定陶县",371728:"东明县",371729:"其它区",41e4:"河南省",410100:"郑州市",410102:"中原区",410103:"二七区",410104:"管城回族区",410105:"金水区",410106:"上街区",410108:"惠济区",410122:"中牟县",410181:"巩义市",410182:"荥阳市",410183:"新密市",410184:"新郑市",410185:"登封市",410188:"其它区",410200:"开封市",410202:"龙亭区",410203:"顺河回族区",410204:"鼓楼区",410205:"禹王台区",410211:"金明区",410221:"杞县",410222:"通许县",410223:"尉氏县",410224:"开封县",410225:"兰考县",410226:"其它区",410300:"洛阳市",410302:"老城区",410303:"西工区",410304:"瀍河回族区",410305:"涧西区",410306:"吉利区",410307:"洛龙区",410322:"孟津县",410323:"新安县",410324:"栾川县",410325:"嵩县",410326:"汝阳县",410327:"宜阳县",410328:"洛宁县",410329:"伊川县",410381:"偃师市",410400:"平顶山市",410402:"新华区",410403:"卫东区",410404:"石龙区",410411:"湛河区",410421:"宝丰县",410422:"叶县",410423:"鲁山县",410425:"郏县",410481:"舞钢市",410482:"汝州市",410483:"其它区",410500:"安阳市",410502:"文峰区",410503:"北关区",410505:"殷都区",410506:"龙安区",410522:"安阳县",410523:"汤阴县",410526:"滑县",410527:"内黄县",410581:"林州市",410582:"其它区",410600:"鹤壁市",410602:"鹤山区",410603:"山城区",410611:"淇滨区",410621:"浚县",410622:"淇县",410623:"其它区",410700:"新乡市",410702:"红旗区",410703:"卫滨区",410704:"凤泉区",410711:"牧野区",410721:"新乡县",410724:"获嘉县",410725:"原阳县",410726:"延津县",410727:"封丘县",410728:"长垣县",410781:"卫辉市",410782:"辉县市",410783:"其它区",410800:"焦作市",410802:"解放区",410803:"中站区",410804:"马村区",410811:"山阳区",410821:"修武县",410822:"博爱县",410823:"武陟县",410825:"温县",410881:"济源市",410882:"沁阳市",410883:"孟州市",410884:"其它区",410900:"濮阳市",410902:"华龙区",410922:"清丰县",410923:"南乐县",410926:"范县",410927:"台前县",410928:"濮阳县",410929:"其它区",411e3:"许昌市",411002:"魏都区",411023:"许昌县",411024:"鄢陵县",411025:"襄城县",411081:"禹州市",411082:"长葛市",411083:"其它区",411100:"漯河市",411102:"源汇区",411103:"郾城区",411104:"召陵区",411121:"舞阳县",411122:"临颍县",411123:"其它区",411200:"三门峡市",411202:"湖滨区",411221:"渑池县",411222:"陕县",411224:"卢氏县",411281:"义马市",411282:"灵宝市",411283:"其它区",411300:"南阳市",411302:"宛城区",411303:"卧龙区",411321:"南召县",411322:"方城县",411323:"西峡县",411324:"镇平县",411325:"内乡县",411326:"淅川县",411327:"社旗县",411328:"唐河县",411329:"新野县",411330:"桐柏县",411381:"邓州市",411382:"其它区",411400:"商丘市",411402:"梁园区",411403:"睢阳区",411421:"民权县",411422:"睢县",411423:"宁陵县",411424:"柘城县",411425:"虞城县",411426:"夏邑县",411481:"永城市",411482:"其它区",411500:"信阳市",411502:"浉河区",411503:"平桥区",411521:"罗山县",411522:"光山县",411523:"新县",411524:"商城县",411525:"固始县",411526:"潢川县",411527:"淮滨县",411528:"息县",411529:"其它区",411600:"周口市",411602:"川汇区",411621:"扶沟县",411622:"西华县",411623:"商水县",411624:"沈丘县",411625:"郸城县",411626:"淮阳县",411627:"太康县",411628:"鹿邑县",411681:"项城市",411682:"其它区",411700:"驻马店市",411702:"驿城区",411721:"西平县",411722:"上蔡县",411723:"平舆县",411724:"正阳县",411725:"确山县",411726:"泌阳县",411727:"汝南县",411728:"遂平县",411729:"新蔡县",411730:"其它区",42e4:"湖北省",420100:"武汉市",420102:"江岸区",420103:"江汉区",420104:"硚口区",420105:"汉阳区",420106:"武昌区",420107:"青山区",420111:"洪山区",420112:"东西湖区",420113:"汉南区",420114:"蔡甸区",420115:"江夏区",420116:"黄陂区",420117:"新洲区",420118:"其它区",420200:"黄石市",420202:"黄石港区",420203:"西塞山区",420204:"下陆区",420205:"铁山区",420222:"阳新县",420281:"大冶市",420282:"其它区",420300:"十堰市",420302:"茅箭区",420303:"张湾区",420321:"郧县",420322:"郧西县",420323:"竹山县",420324:"竹溪县",420325:"房县",420381:"丹江口市",420383:"其它区",420500:"宜昌市",420502:"西陵区",420503:"伍家岗区",420504:"点军区",420505:"猇亭区",420506:"夷陵区",420525:"远安县",420526:"兴山县",420527:"秭归县",420528:"长阳土家族自治县",420529:"五峰土家族自治县",420581:"宜都市",420582:"当阳市",420583:"枝江市",420584:"其它区",420600:"襄阳市",420602:"襄城区",420606:"樊城区",420607:"襄州区",420624:"南漳县",420625:"谷城县",420626:"保康县",420682:"老河口市",420683:"枣阳市",420684:"宜城市",420685:"其它区",420700:"鄂州市",420702:"梁子湖区",420703:"华容区",420704:"鄂城区",420705:"其它区",420800:"荆门市",420802:"东宝区",420804:"掇刀区",420821:"京山县",420822:"沙洋县",420881:"钟祥市",420882:"其它区",420900:"孝感市",420902:"孝南区",420921:"孝昌县",420922:"大悟县",420923:"云梦县",420981:"应城市",420982:"安陆市",420984:"汉川市",420985:"其它区",421e3:"荆州市",421002:"沙市区",421003:"荆州区",421022:"公安县",421023:"监利县",421024:"江陵县",421081:"石首市",421083:"洪湖市",421087:"松滋市",421088:"其它区",421100:"黄冈市",421102:"黄州区",421121:"团风县",421122:"红安县",421123:"罗田县",421124:"英山县",421125:"浠水县",421126:"蕲春县",421127:"黄梅县",421181:"麻城市",421182:"武穴市",421183:"其它区",421200:"咸宁市",421202:"咸安区",421221:"嘉鱼县",421222:"通城县",421223:"崇阳县",421224:"通山县",421281:"赤壁市",421283:"其它区",421300:"随州市",421302:"曾都区",421321:"随县",421381:"广水市",421382:"其它区",422800:"恩施土家族苗族自治州",422801:"恩施市",422802:"利川市",422822:"建始县",422823:"巴东县",422825:"宣恩县",422826:"咸丰县",422827:"来凤县",422828:"鹤峰县",422829:"其它区",429004:"仙桃市",429005:"潜江市",429006:"天门市",429021:"神农架林区",43e4:"湖南省",430100:"长沙市",430102:"芙蓉区",430103:"天心区",430104:"岳麓区",430105:"开福区",430111:"雨花区",430121:"长沙县",430122:"望城区",430124:"宁乡县",430181:"浏阳市",430182:"其它区",430200:"株洲市",430202:"荷塘区",430203:"芦淞区",430204:"石峰区",430211:"天元区",430221:"株洲县",430223:"攸县",430224:"茶陵县",430225:"炎陵县",430281:"醴陵市",430282:"其它区",430300:"湘潭市",430302:"雨湖区",430304:"岳塘区",430321:"湘潭县",430381:"湘乡市",430382:"韶山市",430383:"其它区",430400:"衡阳市",430405:"珠晖区",430406:"雁峰区",430407:"石鼓区",430408:"蒸湘区",430412:"南岳区",430421:"衡阳县",430422:"衡南县",430423:"衡山县",430424:"衡东县",430426:"祁东县",430481:"耒阳市",430482:"常宁市",430483:"其它区",430500:"邵阳市",430502:"双清区",430503:"大祥区",430511:"北塔区",430521:"邵东县",430522:"新邵县",430523:"邵阳县",430524:"隆回县",430525:"洞口县",430527:"绥宁县",430528:"新宁县",430529:"城步苗族自治县",430581:"武冈市",430582:"其它区",430600:"岳阳市",430602:"岳阳楼区",430603:"云溪区",430611:"君山区",430621:"岳阳县",430623:"华容县",430624:"湘阴县",430626:"平江县",430681:"汨罗市",430682:"临湘市",430683:"其它区",430700:"常德市",430702:"武陵区",430703:"鼎城区",430721:"安乡县",430722:"汉寿县",430723:"澧县",430724:"临澧县",430725:"桃源县",430726:"石门县",430781:"津市市",430782:"其它区",430800:"张家界市",430802:"永定区",430811:"武陵源区",430821:"慈利县",430822:"桑植县",430823:"其它区",430900:"益阳市",430902:"资阳区",430903:"赫山区",430921:"南县",430922:"桃江县",430923:"安化县",430981:"沅江市",430982:"其它区",431e3:"郴州市",431002:"北湖区",431003:"苏仙区",431021:"桂阳县",431022:"宜章县",431023:"永兴县",431024:"嘉禾县",431025:"临武县",431026:"汝城县",431027:"桂东县",431028:"安仁县",431081:"资兴市",431082:"其它区",431100:"永州市",431102:"零陵区",431103:"冷水滩区",431121:"祁阳县",431122:"东安县",431123:"双牌县",431124:"道县",431125:"江永县",431126:"宁远县",431127:"蓝山县",431128:"新田县",431129:"江华瑶族自治县",431130:"其它区",431200:"怀化市",431202:"鹤城区",431221:"中方县",431222:"沅陵县",431223:"辰溪县",431224:"溆浦县",431225:"会同县",431226:"麻阳苗族自治县",431227:"新晃侗族自治县",431228:"芷江侗族自治县",431229:"靖州苗族侗族自治县",431230:"通道侗族自治县",431281:"洪江市",431282:"其它区",431300:"娄底市",431302:"娄星区",431321:"双峰县",431322:"新化县",431381:"冷水江市",431382:"涟源市",431383:"其它区",433100:"湘西土家族苗族自治州",433101:"吉首市",433122:"泸溪县",433123:"凤凰县",433124:"花垣县",433125:"保靖县",433126:"古丈县",433127:"永顺县",433130:"龙山县",433131:"其它区",44e4:"广东省",440100:"广州市",440103:"荔湾区",440104:"越秀区",440105:"海珠区",440106:"天河区",440111:"白云区",440112:"黄埔区",440113:"番禺区",440114:"花都区",440115:"南沙区",440116:"萝岗区",440183:"增城市",440184:"从化市",440189:"其它区",440200:"韶关市",440203:"武江区",440204:"浈江区",440205:"曲江区",440222:"始兴县",440224:"仁化县",440229:"翁源县",440232:"乳源瑶族自治县",440233:"新丰县",440281:"乐昌市",440282:"南雄市",440283:"其它区",440300:"深圳市",440303:"罗湖区",440304:"福田区",440305:"南山区",440306:"宝安区",440307:"龙岗区",440308:"盐田区",440309:"其它区",440320:"光明新区",440321:"坪山新区",440322:"大鹏新区",440323:"龙华新区",440400:"珠海市",440402:"香洲区",440403:"斗门区",440404:"金湾区",440488:"其它区",440500:"汕头市",440507:"龙湖区",440511:"金平区",440512:"濠江区",440513:"潮阳区",440514:"潮南区",440515:"澄海区",440523:"南澳县",440524:"其它区",440600:"佛山市",440604:"禅城区",440605:"南海区",440606:"顺德区",440607:"三水区",440608:"高明区",440609:"其它区",440700:"江门市",440703:"蓬江区",440704:"江海区",440705:"新会区",440781:"台山市",440783:"开平市",440784:"鹤山市",440785:"恩平市",440786:"其它区",440800:"湛江市",440802:"赤坎区",440803:"霞山区",440804:"坡头区",440811:"麻章区",440823:"遂溪县",440825:"徐闻县",440881:"廉江市",440882:"雷州市",440883:"吴川市",440884:"其它区",440900:"茂名市",440902:"茂南区",440903:"茂港区",440923:"电白县",440981:"高州市",440982:"化州市",440983:"信宜市",440984:"其它区",441200:"肇庆市",441202:"端州区",441203:"鼎湖区",441223:"广宁县",441224:"怀集县",441225:"封开县",441226:"德庆县",441283:"高要市",441284:"四会市",441285:"其它区",441300:"惠州市",441302:"惠城区",441303:"惠阳区",441322:"博罗县",441323:"惠东县",441324:"龙门县",441325:"其它区",441400:"梅州市",441402:"梅江区",441421:"梅县",441422:"大埔县",441423:"丰顺县",441424:"五华县",441426:"平远县",441427:"蕉岭县",441481:"兴宁市",441482:"其它区",441500:"汕尾市",441502:"城区",441521:"海丰县",441523:"陆河县",441581:"陆丰市",441582:"其它区",441600:"河源市",441602:"源城区",441621:"紫金县",441622:"龙川县",441623:"连平县",441624:"和平县",441625:"东源县",441626:"其它区",441700:"阳江市",441702:"江城区",441721:"阳西县",441723:"阳东县",441781:"阳春市",441782:"其它区",441800:"清远市",441802:"清城区",441821:"佛冈县",441823:"阳山县",441825:"连山壮族瑶族自治县",441826:"连南瑶族自治县",441827:"清新区",441881:"英德市",441882:"连州市",441883:"其它区",441900:"东莞市",442e3:"中山市",442101:"东沙群岛",445100:"潮州市",445102:"湘桥区",445121:"潮安区",445122:"饶平县",445186:"其它区",445200:"揭阳市",445202:"榕城区",445221:"揭东区",445222:"揭西县",445224:"惠来县",445281:"普宁市",445285:"其它区",445300:"云浮市",445302:"云城区",445321:"新兴县",445322:"郁南县",445323:"云安县",445381:"罗定市",445382:"其它区",45e4:"广西壮族自治区",450100:"南宁市",450102:"兴宁区",450103:"青秀区",450105:"江南区",450107:"西乡塘区",450108:"良庆区",450109:"邕宁区",450122:"武鸣县",450123:"隆安县",450124:"马山县",450125:"上林县",450126:"宾阳县",450127:"横县",450128:"其它区",450200:"柳州市",450202:"城中区",450203:"鱼峰区",450204:"柳南区",450205:"柳北区",450221:"柳江县",450222:"柳城县",450223:"鹿寨县",450224:"融安县",450225:"融水苗族自治县",450226:"三江侗族自治县",450227:"其它区",450300:"桂林市",450302:"秀峰区",450303:"叠彩区",450304:"象山区",450305:"七星区",450311:"雁山区",450321:"阳朔县",450322:"临桂区",450323:"灵川县",450324:"全州县",450325:"兴安县",450326:"永福县",450327:"灌阳县",450328:"龙胜各族自治县",450329:"资源县",450330:"平乐县",450331:"荔浦县",450332:"恭城瑶族自治县",450333:"其它区",450400:"梧州市",450403:"万秀区",450405:"长洲区",450406:"龙圩区",450421:"苍梧县",450422:"藤县",450423:"蒙山县",450481:"岑溪市",450482:"其它区",450500:"北海市",450502:"海城区",450503:"银海区",450512:"铁山港区",450521:"合浦县",450522:"其它区",450600:"防城港市",450602:"港口区",450603:"防城区",450621:"上思县",450681:"东兴市",450682:"其它区",450700:"钦州市",450702:"钦南区",450703:"钦北区",450721:"灵山县",450722:"浦北县",450723:"其它区",450800:"贵港市",450802:"港北区",450803:"港南区",450804:"覃塘区",450821:"平南县",450881:"桂平市",450882:"其它区",450900:"玉林市",450902:"玉州区",450903:"福绵区",450921:"容县",450922:"陆川县",450923:"博白县",450924:"兴业县",450981:"北流市",450982:"其它区",451e3:"百色市",451002:"右江区",451021:"田阳县",451022:"田东县",451023:"平果县",451024:"德保县",451025:"靖西县",451026:"那坡县",451027:"凌云县",451028:"乐业县",451029:"田林县",451030:"西林县",451031:"隆林各族自治县",451032:"其它区",451100:"贺州市",451102:"八步区",451119:"平桂管理区",451121:"昭平县",451122:"钟山县",451123:"富川瑶族自治县",451124:"其它区",451200:"河池市",451202:"金城江区",451221:"南丹县",451222:"天峨县",451223:"凤山县",451224:"东兰县",451225:"罗城仫佬族自治县",451226:"环江毛南族自治县",451227:"巴马瑶族自治县",451228:"都安瑶族自治县",451229:"大化瑶族自治县",451281:"宜州市",451282:"其它区",451300:"来宾市",451302:"兴宾区",451321:"忻城县",451322:"象州县",451323:"武宣县",451324:"金秀瑶族自治县",451381:"合山市",451382:"其它区",451400:"崇左市",451402:"江州区",451421:"扶绥县",451422:"宁明县",451423:"龙州县",451424:"大新县",451425:"天等县",451481:"凭祥市",451482:"其它区",46e4:"海南省",460100:"海口市",460105:"秀英区",460106:"龙华区",460107:"琼山区",460108:"美兰区",460109:"其它区",460200:"三亚市",460300:"三沙市",460321:"西沙群岛",460322:"南沙群岛",460323:"中沙群岛的岛礁及其海域",469001:"五指山市",469002:"琼海市",469003:"儋州市",469005:"文昌市",469006:"万宁市",469007:"东方市",469025:"定安县",469026:"屯昌县",469027:"澄迈县",469028:"临高县",469030:"白沙黎族自治县",469031:"昌江黎族自治县",469033:"乐东黎族自治县",469034:"陵水黎族自治县",469035:"保亭黎族苗族自治县",469036:"琼中黎族苗族自治县",471005:"其它区",5e5:"重庆",500100:"重庆市",500101:"万州区",500102:"涪陵区",500103:"渝中区",500104:"大渡口区",500105:"江北区",500106:"沙坪坝区",500107:"九龙坡区",500108:"南岸区",500109:"北碚区",500110:"万盛区",500111:"双桥区",500112:"渝北区",500113:"巴南区",500114:"黔江区",500115:"长寿区",500222:"綦江区",500223:"潼南县",500224:"铜梁县",500225:"大足区",500226:"荣昌县",500227:"璧山县",500228:"梁平县",500229:"城口县",500230:"丰都县",500231:"垫江县",500232:"武隆县",500233:"忠县",500234:"开县",500235:"云阳县",500236:"奉节县",500237:"巫山县",500238:"巫溪县",500240:"石柱土家族自治县",500241:"秀山土家族苗族自治县",500242:"酉阳土家族苗族自治县",500243:"彭水苗族土家族自治县",500381:"江津区",500382:"合川区",500383:"永川区",500384:"南川区",500385:"其它区",51e4:"四川省",510100:"成都市",510104:"锦江区",510105:"青羊区",510106:"金牛区",510107:"武侯区",510108:"成华区",510112:"龙泉驿区",510113:"青白江区",510114:"新都区",510115:"温江区",510121:"金堂县",510122:"双流县",510124:"郫县",510129:"大邑县",510131:"蒲江县",510132:"新津县",510181:"都江堰市",510182:"彭州市",510183:"邛崃市",510184:"崇州市",510185:"其它区",510300:"自贡市",510302:"自流井区",510303:"贡井区",510304:"大安区",510311:"沿滩区",510321:"荣县",510322:"富顺县",510323:"其它区",510400:"攀枝花市",510402:"东区",510403:"西区",510411:"仁和区",510421:"米易县",510422:"盐边县",510423:"其它区",510500:"泸州市",510502:"江阳区",510503:"纳溪区",510504:"龙马潭区",510521:"泸县",510522:"合江县",510524:"叙永县",510525:"古蔺县",510526:"其它区",510600:"德阳市",510603:"旌阳区",510623:"中江县",510626:"罗江县",510681:"广汉市",510682:"什邡市",510683:"绵竹市",510684:"其它区",510700:"绵阳市",510703:"涪城区",510704:"游仙区",510722:"三台县",510723:"盐亭县",510724:"安县",510725:"梓潼县",510726:"北川羌族自治县",510727:"平武县",510781:"江油市",510782:"其它区",510800:"广元市",510802:"利州区",510811:"昭化区",510812:"朝天区",510821:"旺苍县",510822:"青川县",510823:"剑阁县",510824:"苍溪县",510825:"其它区",510900:"遂宁市",510903:"船山区",510904:"安居区",510921:"蓬溪县",510922:"射洪县",510923:"大英县",510924:"其它区",511e3:"内江市",511002:"市中区",511011:"东兴区",511024:"威远县",511025:"资中县",511028:"隆昌县",511029:"其它区",511100:"乐山市",511102:"市中区",511111:"沙湾区",511112:"五通桥区",511113:"金口河区",511123:"犍为县",511124:"井研县",511126:"夹江县",511129:"沐川县",511132:"峨边彝族自治县",511133:"马边彝族自治县",511181:"峨眉山市",511182:"其它区",511300:"南充市",511302:"顺庆区",511303:"高坪区",511304:"嘉陵区",511321:"南部县",511322:"营山县",511323:"蓬安县",511324:"仪陇县",511325:"西充县",511381:"阆中市",511382:"其它区",511400:"眉山市",511402:"东坡区",511421:"仁寿县",511422:"彭山县",511423:"洪雅县",511424:"丹棱县",511425:"青神县",511426:"其它区",511500:"宜宾市",511502:"翠屏区",511521:"宜宾县",511522:"南溪区",511523:"江安县",511524:"长宁县",511525:"高县",511526:"珙县",511527:"筠连县",511528:"兴文县",511529:"屏山县",511530:"其它区",511600:"广安市",511602:"广安区",511603:"前锋区",511621:"岳池县",511622:"武胜县",511623:"邻水县",511681:"华蓥市",511683:"其它区",511700:"达州市",511702:"通川区",511721:"达川区",511722:"宣汉县",511723:"开江县",511724:"大竹县",511725:"渠县",511781:"万源市",511782:"其它区",511800:"雅安市",511802:"雨城区",511821:"名山区",511822:"荥经县",511823:"汉源县",511824:"石棉县",511825:"天全县",511826:"芦山县",511827:"宝兴县",511828:"其它区",511900:"巴中市",511902:"巴州区",511903:"恩阳区",511921:"通江县",511922:"南江县",511923:"平昌县",511924:"其它区",512e3:"资阳市",512002:"雁江区",512021:"安岳县",512022:"乐至县",512081:"简阳市",512082:"其它区",513200:"阿坝藏族羌族自治州",513221:"汶川县",513222:"理县",513223:"茂县",513224:"松潘县",513225:"九寨沟县",513226:"金川县",513227:"小金县",513228:"黑水县",513229:"马尔康县",513230:"壤塘县",513231:"阿坝县",513232:"若尔盖县",513233:"红原县",513234:"其它区",513300:"甘孜藏族自治州",513321:"康定县",513322:"泸定县",513323:"丹巴县",513324:"九龙县",513325:"雅江县",513326:"道孚县",513327:"炉霍县",513328:"甘孜县",513329:"新龙县",513330:"德格县",513331:"白玉县",513332:"石渠县",513333:"色达县",513334:"理塘县",513335:"巴塘县",513336:"乡城县",513337:"稻城县",513338:"得荣县",513339:"其它区",513400:"凉山彝族自治州",513401:"西昌市",513422:"木里藏族自治县",513423:"盐源县",513424:"德昌县",513425:"会理县",513426:"会东县",513427:"宁南县",513428:"普格县",513429:"布拖县",513430:"金阳县",513431:"昭觉县",513432:"喜德县",513433:"冕宁县",513434:"越西县",513435:"甘洛县",513436:"美姑县",513437:"雷波县",513438:"其它区",52e4:"贵州省",520100:"贵阳市",520102:"南明区",520103:"云岩区",520111:"花溪区",520112:"乌当区",520113:"白云区",520121:"开阳县",520122:"息烽县",520123:"修文县",520151:"观山湖区",520181:"清镇市",520182:"其它区",520200:"六盘水市",520201:"钟山区",520203:"六枝特区",520221:"水城县",520222:"盘县",520223:"其它区",520300:"遵义市",520302:"红花岗区",520303:"汇川区",520321:"遵义县",520322:"桐梓县",520323:"绥阳县",520324:"正安县",520325:"道真仡佬族苗族自治县",520326:"务川仡佬族苗族自治县",520327:"凤冈县",520328:"湄潭县",520329:"余庆县",520330:"习水县",520381:"赤水市",520382:"仁怀市",520383:"其它区",520400:"安顺市",520402:"西秀区",520421:"平坝县",520422:"普定县",520423:"镇宁布依族苗族自治县",520424:"关岭布依族苗族自治县",520425:"紫云苗族布依族自治县",520426:"其它区",522200:"铜仁市",522201:"碧江区",522222:"江口县",522223:"玉屏侗族自治县",522224:"石阡县",522225:"思南县",522226:"印江土家族苗族自治县",522227:"德江县",522228:"沿河土家族自治县",522229:"松桃苗族自治县",522230:"万山区",522231:"其它区",522300:"黔西南布依族苗族自治州",522301:"兴义市",522322:"兴仁县",522323:"普安县",522324:"晴隆县",522325:"贞丰县",522326:"望谟县",522327:"册亨县",522328:"安龙县",522329:"其它区",522400:"毕节市",522401:"七星关区",522422:"大方县",522423:"黔西县",522424:"金沙县",522425:"织金县",522426:"纳雍县",522427:"威宁彝族回族苗族自治县",522428:"赫章县",522429:"其它区",522600:"黔东南苗族侗族自治州",522601:"凯里市",522622:"黄平县",522623:"施秉县",522624:"三穗县",522625:"镇远县",522626:"岑巩县",522627:"天柱县",522628:"锦屏县",522629:"剑河县",522630:"台江县",522631:"黎平县",522632:"榕江县",522633:"从江县",522634:"雷山县",522635:"麻江县",522636:"丹寨县",522637:"其它区",522700:"黔南布依族苗族自治州",522701:"都匀市",522702:"福泉市",522722:"荔波县",522723:"贵定县",522725:"瓮安县",522726:"独山县",522727:"平塘县",522728:"罗甸县",522729:"长顺县",522730:"龙里县",522731:"惠水县",522732:"三都水族自治县",522733:"其它区",53e4:"云南省",530100:"昆明市",530102:"五华区",530103:"盘龙区",530111:"官渡区",530112:"西山区",530113:"东川区",530121:"呈贡区",530122:"晋宁县",530124:"富民县",530125:"宜良县",530126:"石林彝族自治县",530127:"嵩明县",530128:"禄劝彝族苗族自治县",530129:"寻甸回族彝族自治县",530181:"安宁市",530182:"其它区",530300:"曲靖市",530302:"麒麟区",530321:"马龙县",530322:"陆良县",530323:"师宗县",530324:"罗平县",530325:"富源县",530326:"会泽县",530328:"沾益县",530381:"宣威市",530382:"其它区",530400:"玉溪市",530402:"红塔区",530421:"江川县",530422:"澄江县",530423:"通海县",530424:"华宁县",530425:"易门县",530426:"峨山彝族自治县",530427:"新平彝族傣族自治县",530428:"元江哈尼族彝族傣族自治县",530429:"其它区",530500:"保山市",530502:"隆阳区",530521:"施甸县",530522:"腾冲县",530523:"龙陵县",530524:"昌宁县",530525:"其它区",530600:"昭通市",530602:"昭阳区",530621:"鲁甸县",530622:"巧家县",530623:"盐津县",530624:"大关县",530625:"永善县",530626:"绥江县",530627:"镇雄县",530628:"彝良县",530629:"威信县",530630:"水富县",530631:"其它区",530700:"丽江市",530702:"古城区",530721:"玉龙纳西族自治县",530722:"永胜县",530723:"华坪县",530724:"宁蒗彝族自治县",530725:"其它区",530800:"普洱市",530802:"思茅区",530821:"宁洱哈尼族彝族自治县",530822:"墨江哈尼族自治县",530823:"景东彝族自治县",530824:"景谷傣族彝族自治县",530825:"镇沅彝族哈尼族拉祜族自治县",530826:"江城哈尼族彝族自治县",530827:"孟连傣族拉祜族佤族自治县",530828:"澜沧拉祜族自治县",530829:"西盟佤族自治县",530830:"其它区",530900:"临沧市",530902:"临翔区",530921:"凤庆县",530922:"云县",530923:"永德县",530924:"镇康县",530925:"双江拉祜族佤族布朗族傣族自治县",530926:"耿马傣族佤族自治县",530927:"沧源佤族自治县",530928:"其它区",532300:"楚雄彝族自治州",532301:"楚雄市",532322:"双柏县",532323:"牟定县",532324:"南华县",532325:"姚安县",532326:"大姚县",532327:"永仁县",532328:"元谋县",532329:"武定县",532331:"禄丰县",532332:"其它区",532500:"红河哈尼族彝族自治州",532501:"个旧市",532502:"开远市",532522:"蒙自市",532523:"屏边苗族自治县",532524:"建水县",532525:"石屏县",532526:"弥勒市",532527:"泸西县",532528:"元阳县",532529:"红河县",532530:"金平苗族瑶族傣族自治县",532531:"绿春县",532532:"河口瑶族自治县",532533:"其它区",532600:"文山壮族苗族自治州",532621:"文山市",532622:"砚山县",532623:"西畴县",532624:"麻栗坡县",532625:"马关县",532626:"丘北县",532627:"广南县",532628:"富宁县",532629:"其它区",532800:"西双版纳傣族自治州",532801:"景洪市",532822:"勐海县",532823:"勐腊县",532824:"其它区",532900:"大理白族自治州",532901:"大理市",532922:"漾濞彝族自治县",532923:"祥云县",532924:"宾川县",532925:"弥渡县",532926:"南涧彝族自治县",532927:"巍山彝族回族自治县",532928:"永平县",532929:"云龙县",532930:"洱源县",532931:"剑川县",532932:"鹤庆县",532933:"其它区",533100:"德宏傣族景颇族自治州",533102:"瑞丽市",533103:"芒市",533122:"梁河县",533123:"盈江县",533124:"陇川县",533125:"其它区",533300:"怒江傈僳族自治州",533321:"泸水县",533323:"福贡县",533324:"贡山独龙族怒族自治县",533325:"兰坪白族普米族自治县",533326:"其它区",533400:"迪庆藏族自治州",533421:"香格里拉县",533422:"德钦县",533423:"维西傈僳族自治县",533424:"其它区",54e4:"西藏自治区",540100:"拉萨市",540102:"城关区",540121:"林周县",540122:"当雄县",540123:"尼木县",540124:"曲水县",540125:"堆龙德庆县",540126:"达孜县",540127:"墨竹工卡县",540128:"其它区",542100:"昌都地区",542121:"昌都县",542122:"江达县",542123:"贡觉县",542124:"类乌齐县",542125:"丁青县",542126:"察雅县",542127:"八宿县",542128:"左贡县",542129:"芒康县",542132:"洛隆县",542133:"边坝县",542134:"其它区",542200:"山南地区",542221:"乃东县",542222:"扎囊县",542223:"贡嘎县",542224:"桑日县",542225:"琼结县",542226:"曲松县",542227:"措美县",542228:"洛扎县",542229:"加查县",542231:"隆子县",542232:"错那县",542233:"浪卡子县",542234:"其它区",542300:"日喀则地区",542301:"日喀则市",542322:"南木林县",542323:"江孜县",542324:"定日县",542325:"萨迦县",542326:"拉孜县",542327:"昂仁县",542328:"谢通门县",542329:"白朗县",542330:"仁布县",542331:"康马县",542332:"定结县",542333:"仲巴县",542334:"亚东县",542335:"吉隆县",542336:"聂拉木县",542337:"萨嘎县",542338:"岗巴县",542339:"其它区",542400:"那曲地区",542421:"那曲县",542422:"嘉黎县",542423:"比如县",542424:"聂荣县",542425:"安多县",542426:"申扎县",542427:"索县",542428:"班戈县",542429:"巴青县",542430:"尼玛县",542431:"其它区",542432:"双湖县",542500:"阿里地区",542521:"普兰县",542522:"札达县",542523:"噶尔县",542524:"日土县",542525:"革吉县",542526:"改则县",542527:"措勤县",542528:"其它区",542600:"林芝地区",542621:"林芝县",542622:"工布江达县",542623:"米林县",542624:"墨脱县",542625:"波密县",542626:"察隅县",542627:"朗县",542628:"其它区",61e4:"陕西省",610100:"西安市",610102:"新城区",610103:"碑林区",610104:"莲湖区",610111:"灞桥区",610112:"未央区",610113:"雁塔区",610114:"阎良区",610115:"临潼区",610116:"长安区",610122:"蓝田县",610124:"周至县",610125:"户县",610126:"高陵县",610127:"其它区",610200:"铜川市",610202:"王益区",610203:"印台区",610204:"耀州区",610222:"宜君县",610223:"其它区",610300:"宝鸡市",610302:"渭滨区",610303:"金台区",610304:"陈仓区",610322:"凤翔县",610323:"岐山县",610324:"扶风县",610326:"眉县",610327:"陇县",610328:"千阳县",610329:"麟游县",610330:"凤县",610331:"太白县",610332:"其它区",610400:"咸阳市",610402:"秦都区",610403:"杨陵区",610404:"渭城区",610422:"三原县",610423:"泾阳县",610424:"乾县",610425:"礼泉县",610426:"永寿县",610427:"彬县",610428:"长武县",610429:"旬邑县",610430:"淳化县",610431:"武功县",610481:"兴平市",610482:"其它区",610500:"渭南市",610502:"临渭区",610521:"华县",610522:"潼关县",610523:"大荔县",610524:"合阳县",610525:"澄城县",610526:"蒲城县",610527:"白水县",610528:"富平县",610581:"韩城市",610582:"华阴市",610583:"其它区",610600:"延安市",610602:"宝塔区",610621:"延长县",610622:"延川县",610623:"子长县",610624:"安塞县",610625:"志丹县",610626:"吴起县",610627:"甘泉县",610628:"富县",610629:"洛川县",610630:"宜川县",610631:"黄龙县",610632:"黄陵县",610633:"其它区",610700:"汉中市",610702:"汉台区",610721:"南郑县",610722:"城固县",610723:"洋县",610724:"西乡县",610725:"勉县",610726:"宁强县",610727:"略阳县",610728:"镇巴县",610729:"留坝县",610730:"佛坪县",610731:"其它区",610800:"榆林市",610802:"榆阳区",610821:"神木县",610822:"府谷县",610823:"横山县",610824:"靖边县",610825:"定边县",610826:"绥德县",610827:"米脂县",610828:"佳县",610829:"吴堡县",610830:"清涧县",610831:"子洲县",610832:"其它区",610900:"安康市",610902:"汉滨区",610921:"汉阴县",610922:"石泉县",610923:"宁陕县",610924:"紫阳县",610925:"岚皋县",610926:"平利县",610927:"镇坪县",610928:"旬阳县",610929:"白河县",610930:"其它区",611e3:"商洛市",611002:"商州区",611021:"洛南县",611022:"丹凤县",611023:"商南县",611024:"山阳县",611025:"镇安县",611026:"柞水县",611027:"其它区",62e4:"甘肃省",620100:"兰州市",620102:"城关区",620103:"七里河区",620104:"西固区",620105:"安宁区",620111:"红古区",620121:"永登县",620122:"皋兰县",620123:"榆中县",620124:"其它区",620200:"嘉峪关市",620300:"金昌市",620302:"金川区",620321:"永昌县",620322:"其它区",620400:"白银市",620402:"白银区",620403:"平川区",620421:"靖远县",620422:"会宁县",620423:"景泰县",620424:"其它区",620500:"天水市",620502:"秦州区",620503:"麦积区",620521:"清水县",620522:"秦安县",620523:"甘谷县",620524:"武山县",620525:"张家川回族自治县",620526:"其它区",620600:"武威市",620602:"凉州区",620621:"民勤县",620622:"古浪县",620623:"天祝藏族自治县",620624:"其它区",620700:"张掖市",620702:"甘州区",620721:"肃南裕固族自治县",620722:"民乐县",620723:"临泽县",620724:"高台县",620725:"山丹县",620726:"其它区",620800:"平凉市",620802:"崆峒区",620821:"泾川县",620822:"灵台县",620823:"崇信县",620824:"华亭县",620825:"庄浪县",620826:"静宁县",620827:"其它区",620900:"酒泉市",620902:"肃州区",620921:"金塔县",620922:"瓜州县",620923:"肃北蒙古族自治县",620924:"阿克塞哈萨克族自治县",620981:"玉门市",620982:"敦煌市",620983:"其它区",621e3:"庆阳市",621002:"西峰区",621021:"庆城县",621022:"环县",621023:"华池县",621024:"合水县",621025:"正宁县",621026:"宁县",621027:"镇原县",621028:"其它区",621100:"定西市",621102:"安定区",621121:"通渭县",621122:"陇西县",621123:"渭源县",621124:"临洮县",621125:"漳县",621126:"岷县",621127:"其它区",621200:"陇南市",621202:"武都区",621221:"成县",621222:"文县",621223:"宕昌县",621224:"康县",621225:"西和县",621226:"礼县",621227:"徽县",621228:"两当县",621229:"其它区",622900:"临夏回族自治州",622901:"临夏市",622921:"临夏县",622922:"康乐县",622923:"永靖县",622924:"广河县",622925:"和政县",622926:"东乡族自治县",622927:"积石山保安族东乡族撒拉族自治县",622928:"其它区",623e3:"甘南藏族自治州",623001:"合作市",623021:"临潭县",623022:"卓尼县",623023:"舟曲县",623024:"迭部县",623025:"玛曲县",623026:"碌曲县",623027:"夏河县",623028:"其它区",63e4:"青海省",630100:"西宁市",630102:"城东区",630103:"城中区",630104:"城西区",630105:"城北区",630121:"大通回族土族自治县",630122:"湟中县",630123:"湟源县",630124:"其它区",632100:"海东市",632121:"平安县",632122:"民和回族土族自治县",632123:"乐都区",632126:"互助土族自治县",632127:"化隆回族自治县",632128:"循化撒拉族自治县",632129:"其它区",632200:"海北藏族自治州",632221:"门源回族自治县",632222:"祁连县",632223:"海晏县",632224:"刚察县",632225:"其它区",632300:"黄南藏族自治州",632321:"同仁县",632322:"尖扎县",632323:"泽库县",632324:"河南蒙古族自治县",632325:"其它区",632500:"海南藏族自治州",632521:"共和县",632522:"同德县",632523:"贵德县",632524:"兴海县",632525:"贵南县",632526:"其它区",632600:"果洛藏族自治州",632621:"玛沁县",632622:"班玛县",632623:"甘德县",632624:"达日县",632625:"久治县",632626:"玛多县",632627:"其它区",632700:"玉树藏族自治州",632721:"玉树市",632722:"杂多县",632723:"称多县",632724:"治多县",632725:"囊谦县",632726:"曲麻莱县",632727:"其它区",632800:"海西蒙古族藏族自治州",632801:"格尔木市",632802:"德令哈市",632821:"乌兰县",632822:"都兰县",632823:"天峻县",632824:"其它区",64e4:"宁夏回族自治区",640100:"银川市",640104:"兴庆区",640105:"西夏区",640106:"金凤区",640121:"永宁县",640122:"贺兰县",640181:"灵武市",640182:"其它区",640200:"石嘴山市",640202:"大武口区",640205:"惠农区",640221:"平罗县",640222:"其它区",640300:"吴忠市",640302:"利通区",640303:"红寺堡区",640323:"盐池县",640324:"同心县",640381:"青铜峡市",640382:"其它区",640400:"固原市",640402:"原州区",640422:"西吉县",640423:"隆德县",640424:"泾源县",640425:"彭阳县",640426:"其它区",640500:"中卫市",640502:"沙坡头区",640521:"中宁县",640522:"海原县",640523:"其它区",65e4:"新疆维吾尔自治区",650100:"乌鲁木齐市",650102:"天山区",650103:"沙依巴克区",650104:"新市区",650105:"水磨沟区",650106:"头屯河区",650107:"达坂城区",650109:"米东区",650121:"乌鲁木齐县",650122:"其它区",650200:"克拉玛依市",650202:"独山子区",650203:"克拉玛依区",650204:"白碱滩区",650205:"乌尔禾区",650206:"其它区",652100:"吐鲁番地区",652101:"吐鲁番市",652122:"鄯善县",652123:"托克逊县",652124:"其它区",652200:"哈密地区",652201:"哈密市",652222:"巴里坤哈萨克自治县",652223:"伊吾县",652224:"其它区",652300:"昌吉回族自治州",652301:"昌吉市",652302:"阜康市",652323:"呼图壁县",652324:"玛纳斯县",652325:"奇台县",652327:"吉木萨尔县",652328:"木垒哈萨克自治县",652329:"其它区",652700:"博尔塔拉蒙古自治州",652701:"博乐市",652702:"阿拉山口市",652722:"精河县",652723:"温泉县",652724:"其它区",652800:"巴音郭楞蒙古自治州",652801:"库尔勒市",652822:"轮台县",652823:"尉犁县",652824:"若羌县",652825:"且末县",652826:"焉耆回族自治县",652827:"和静县",652828:"和硕县",652829:"博湖县",652830:"其它区",652900:"阿克苏地区",652901:"阿克苏市",652922:"温宿县",652923:"库车县",652924:"沙雅县",652925:"新和县",652926:"拜城县",652927:"乌什县",652928:"阿瓦提县",652929:"柯坪县",652930:"其它区",653e3:"克孜勒苏柯尔克孜自治州",653001:"阿图什市",653022:"阿克陶县",653023:"阿合奇县",653024:"乌恰县",653025:"其它区",653100:"喀什地区",653101:"喀什市",653121:"疏附县",653122:"疏勒县",653123:"英吉沙县",653124:"泽普县",653125:"莎车县",653126:"叶城县",653127:"麦盖提县",653128:"岳普湖县",653129:"伽师县",653130:"巴楚县",653131:"塔什库尔干塔吉克自治县",653132:"其它区",653200:"和田地区",653201:"和田市",653221:"和田县",653222:"墨玉县",653223:"皮山县",653224:"洛浦县",653225:"策勒县",653226:"于田县",653227:"民丰县",653228:"其它区",654e3:"伊犁哈萨克自治州",654002:"伊宁市",654003:"奎屯市",654021:"伊宁县",654022:"察布查尔锡伯自治县",654023:"霍城县",654024:"巩留县",654025:"新源县",654026:"昭苏县",654027:"特克斯县",654028:"尼勒克县",654029:"其它区",654200:"塔城地区",654201:"塔城市",654202:"乌苏市",654221:"额敏县",654223:"沙湾县",654224:"托里县",654225:"裕民县",654226:"和布克赛尔蒙古自治县",654227:"其它区",654300:"阿勒泰地区",654301:"阿勒泰市",654321:"布尔津县",654322:"富蕴县",654323:"福海县",654324:"哈巴河县",654325:"青河县",654326:"吉木乃县",654327:"其它区",659001:"石河子市",659002:"阿拉尔市",659003:"图木舒克市",659004:"五家渠市",71e4:"台湾",710100:"台北市",710101:"中正区",710102:"大同区",710103:"中山区",710104:"松山区",710105:"大安区",710106:"万华区",710107:"信义区",710108:"士林区",710109:"北投区",710110:"内湖区",710111:"南港区",710112:"文山区",710113:"其它区",710200:"高雄市",710201:"新兴区",710202:"前金区",710203:"芩雅区",710204:"盐埕区",710205:"鼓山区",710206:"旗津区",710207:"前镇区",710208:"三民区",710209:"左营区",710210:"楠梓区",710211:"小港区",710212:"其它区",710241:"苓雅区",710242:"仁武区",710243:"大社区",710244:"冈山区",710245:"路竹区",710246:"阿莲区",710247:"田寮区",710248:"燕巢区",710249:"桥头区",710250:"梓官区",710251:"弥陀区",710252:"永安区",710253:"湖内区",710254:"凤山区",710255:"大寮区",710256:"林园区",710257:"鸟松区",710258:"大树区",710259:"旗山区",710260:"美浓区",710261:"六龟区",710262:"内门区",710263:"杉林区",710264:"甲仙区",710265:"桃源区",710266:"那玛夏区",710267:"茂林区",710268:"茄萣区",710300:"台南市",710301:"中西区",710302:"东区",710303:"南区",710304:"北区",710305:"安平区",710306:"安南区",710307:"其它区",710339:"永康区",710340:"归仁区",710341:"新化区",710342:"左镇区",710343:"玉井区",710344:"楠西区",710345:"南化区",710346:"仁德区",710347:"关庙区",710348:"龙崎区",710349:"官田区",710350:"麻豆区",710351:"佳里区",710352:"西港区",710353:"七股区",710354:"将军区",710355:"学甲区",710356:"北门区",710357:"新营区",710358:"后壁区",710359:"白河区",710360:"东山区",710361:"六甲区",710362:"下营区",710363:"柳营区",710364:"盐水区",710365:"善化区",710366:"大内区",710367:"山上区",710368:"新市区",710369:"安定区",710400:"台中市",710401:"中区",710402:"东区",710403:"南区",710404:"西区",710405:"北区",710406:"北屯区",710407:"西屯区",710408:"南屯区",710409:"其它区",710431:"太平区",710432:"大里区",710433:"雾峰区",710434:"乌日区",710435:"丰原区",710436:"后里区",710437:"石冈区",710438:"东势区",710439:"和平区",710440:"新社区",710441:"潭子区",710442:"大雅区",710443:"神冈区",710444:"大肚区",710445:"沙鹿区",710446:"龙井区",710447:"梧栖区",710448:"清水区",710449:"大甲区",710450:"外埔区",710451:"大安区",710500:"金门县",710507:"金沙镇",710508:"金湖镇",710509:"金宁乡",710510:"金城镇",710511:"烈屿乡",710512:"乌坵乡",710600:"南投县",710614:"南投市",710615:"中寮乡",710616:"草屯镇",710617:"国姓乡",710618:"埔里镇",710619:"仁爱乡",710620:"名间乡",710621:"集集镇",710622:"水里乡",710623:"鱼池乡",710624:"信义乡",710625:"竹山镇",710626:"鹿谷乡",710700:"基隆市",710701:"仁爱区",710702:"信义区",710703:"中正区",710704:"中山区",710705:"安乐区",710706:"暖暖区",710707:"七堵区",710708:"其它区",710800:"新竹市",710801:"东区",710802:"北区",710803:"香山区",710804:"其它区",710900:"嘉义市",710901:"东区",710902:"西区",710903:"其它区",711100:"新北市",711130:"万里区",711131:"金山区",711132:"板桥区",711133:"汐止区",711134:"深坑区",711135:"石碇区",711136:"瑞芳区",711137:"平溪区",711138:"双溪区",711139:"贡寮区",711140:"新店区",711141:"坪林区",711142:"乌来区",711143:"永和区",711144:"中和区",711145:"土城区",711146:"三峡区",711147:"树林区",711148:"莺歌区",711149:"三重区",711150:"新庄区",711151:"泰山区",711152:"林口区",711153:"芦洲区",711154:"五股区",711155:"八里区",711156:"淡水区",711157:"三芝区",711158:"石门区",711200:"宜兰县",711214:"宜兰市",711215:"头城镇",711216:"礁溪乡",711217:"壮围乡",711218:"员山乡",711219:"罗东镇",711220:"三星乡",711221:"大同乡",711222:"五结乡",711223:"冬山乡",711224:"苏澳镇",711225:"南澳乡",711226:"钓鱼台",711300:"新竹县",711314:"竹北市",711315:"湖口乡",711316:"新丰乡",711317:"新埔镇",711318:"关西镇",711319:"芎林乡",711320:"宝山乡",711321:"竹东镇",711322:"五峰乡",711323:"横山乡",711324:"尖石乡",711325:"北埔乡",711326:"峨眉乡",711400:"桃园县",711414:"中坜市",711415:"平镇市",711416:"龙潭乡",711417:"杨梅市",711418:"新屋乡",711419:"观音乡",711420:"桃园市",711421:"龟山乡",711422:"八德市",711423:"大溪镇",711424:"复兴乡",711425:"大园乡",711426:"芦竹乡",711500:"苗栗县",711519:"竹南镇",711520:"头份镇",711521:"三湾乡",711522:"南庄乡",711523:"狮潭乡",711524:"后龙镇",711525:"通霄镇",711526:"苑里镇",711527:"苗栗市",711528:"造桥乡",711529:"头屋乡",711530:"公馆乡",711531:"大湖乡",711532:"泰安乡",711533:"铜锣乡",711534:"三义乡",711535:"西湖乡",711536:"卓兰镇",711700:"彰化县",711727:"彰化市",711728:"芬园乡",711729:"花坛乡",711730:"秀水乡",711731:"鹿港镇",711732:"福兴乡",711733:"线西乡",711734:"和美镇",711735:"伸港乡",711736:"员林镇",711737:"社头乡",711738:"永靖乡",711739:"埔心乡",711740:"溪湖镇",711741:"大村乡",711742:"埔盐乡",711743:"田中镇",711744:"北斗镇",711745:"田尾乡",711746:"埤头乡",711747:"溪州乡",711748:"竹塘乡",711749:"二林镇",711750:"大城乡",711751:"芳苑乡",711752:"二水乡",711900:"嘉义县",711919:"番路乡",711920:"梅山乡",711921:"竹崎乡",711922:"阿里山乡",711923:"中埔乡",711924:"大埔乡",711925:"水上乡",711926:"鹿草乡",711927:"太保市",711928:"朴子市",711929:"东石乡",711930:"六脚乡",711931:"新港乡",711932:"民雄乡",711933:"大林镇",711934:"溪口乡",711935:"义竹乡",711936:"布袋镇",712100:"云林县",712121:"斗南镇",712122:"大埤乡",712123:"虎尾镇",712124:"土库镇",712125:"褒忠乡",712126:"东势乡",712127:"台西乡",712128:"仑背乡",712129:"麦寮乡",712130:"斗六市",712131:"林内乡",712132:"古坑乡",712133:"莿桐乡",712134:"西螺镇",712135:"二仑乡",712136:"北港镇",712137:"水林乡",712138:"口湖乡",712139:"四湖乡",712140:"元长乡",712400:"屏东县",712434:"屏东市",712435:"三地门乡",712436:"雾台乡",712437:"玛家乡",712438:"九如乡",712439:"里港乡",712440:"高树乡",712441:"盐埔乡",712442:"长治乡",712443:"麟洛乡",712444:"竹田乡",712445:"内埔乡",712446:"万丹乡",712447:"潮州镇",712448:"泰武乡",712449:"来义乡",712450:"万峦乡",712451:"崁顶乡",712452:"新埤乡",712453:"南州乡",712454:"林边乡",712455:"东港镇",712456:"琉球乡",712457:"佳冬乡",712458:"新园乡",712459:"枋寮乡",712460:"枋山乡",712461:"春日乡",712462:"狮子乡",712463:"车城乡",712464:"牡丹乡",712465:"恒春镇",712466:"满州乡",712500:"台东县",712517:"台东市",712518:"绿岛乡",712519:"兰屿乡",712520:"延平乡",712521:"卑南乡",712522:"鹿野乡",712523:"关山镇",712524:"海端乡",712525:"池上乡",712526:"东河乡",712527:"成功镇",712528:"长滨乡",712529:"金峰乡",712530:"大武乡",712531:"达仁乡",712532:"太麻里乡",712600:"花莲县",712615:"花莲市",712616:"新城乡",712617:"太鲁阁",712618:"秀林乡",712619:"吉安乡",712620:"寿丰乡",712621:"凤林镇",712622:"光复乡",712623:"丰滨乡",712624:"瑞穗乡",712625:"万荣乡",712626:"玉里镇",712627:"卓溪乡",712628:"富里乡",712700:"澎湖县",712707:"马公市",712708:"西屿乡",712709:"望安乡",712710:"七美乡",712711:"白沙乡",712712:"湖西乡",712800:"连江县",712805:"南竿乡",712806:"北竿乡",712807:"莒光乡",712808:"东引乡",81e4:"香港特别行政区",810100:"香港岛",810101:"中西区",810102:"湾仔",810103:"东区",810104:"南区",810200:"九龙",810201:"九龙城区",810202:"油尖旺区",810203:"深水埗区",810204:"黄大仙区",810205:"观塘区",810300:"新界",810301:"北区",810302:"大埔区",810303:"沙田区",810304:"西贡区",810305:"元朗区",810306:"屯门区",810307:"荃湾区",810308:"葵青区",810309:"离岛区",82e4:"澳门特别行政区",820100:"澳门半岛",820200:"离岛",99e4:"海外",990100:"海外"},r=function(){var t,e=[];for(t in n){var r="0000"===t.slice(2,6)?void 0:"00"==t.slice(4,6)?t.slice(0,2)+"0000":t.slice(0,4)+"00";e.push({id:t,pid:r,name:n[t]})}for(var i=e,o={},a=0;a<i.length;a++)(u=i[a])&&u.id&&(o[u.id]=u);for(var s,u,c=[],l=0;l<i.length;l++)(u=i[l])&&(null==u.pid&&null==u.parentId?c.push(u):(s=o[u.pid]||o[u.parentId])&&(s.children||(s.children=[]),s.children.push(u)));return c}();t.exports=r},function(t,e,n){var r,i=n(18);t.exports={d4:function(){return this.natural(1,4)},d6:function(){return this.natural(1,6)},d8:function(){return this.natural(1,8)},d12:function(){return this.natural(1,12)},d20:function(){return this.natural(1,20)},d100:function(){return this.natural(1,100)},guid:function(){var t="abcdefABCDEF1234567890";return this.string(t,8)+"-"+this.string(t,4)+"-"+this.string(t,4)+"-"+this.string(t,4)+"-"+this.string(t,12)},uuid:function(){return this.guid()},id:function(){for(var t=0,e=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],n=this.pick(i).id+this.date("yyyyMMdd")+this.string("number",3),r=0;r<n.length;r++)t+=n[r]*e[r];return n+["1","0","X","9","8","7","6","5","4","3","2"][t%11]},increment:(r=0,function(t){return r+=+t||1}),inc:function(t){return this.increment(t)}}},function(t,e,n){var r=n(21);n=n(22);t.exports={Parser:r,Handler:n}},function(t,e){function n(t){this.type=t,this.offset=n.offset(),this.text=n.text()}function r(t,e){n.call(this,"alternate"),this.left=t,this.right=e}function i(t){n.call(this,"match"),this.body=t.filter(Boolean)}function o(t,e){n.call(this,t),this.body=e}function a(t){o.call(this,"capture-group"),this.index=x[this.offset]||(x[this.offset]=b++),this.body=t}function s(t,e){n.call(this,"quantified"),this.body=t,this.quantifier=e}function u(t,e){n.call(this,"quantifier"),this.min=t,this.max=e,this.greedy=!0}function c(t,e){n.call(this,"charset"),this.invert=t,this.body=e}function l(t,e){n.call(this,"range"),this.start=t,this.end=e}function h(t){n.call(this,"literal"),this.body=t,this.escaped=this.body!=this.text}function f(t){n.call(this,"unicode"),this.code=t.toUpperCase()}function d(t){n.call(this,"hex"),this.code=t.toUpperCase()}function p(t){n.call(this,"octal"),this.code=t.toUpperCase()}function g(t){n.call(this,"back-reference"),this.code=t.toUpperCase()}function m(t){n.call(this,"control-character"),this.code=t.toUpperCase()}v=_,y=Error,w.prototype=y.prototype,v.prototype=new w;var v,y={SyntaxError:_,parse:function(t){function e(e){if(Sn!==e){e<Sn&&(Sn=0,En={line:1,column:1,seenCR:!1});for(var n,r=En,i=e,o=Sn;o<i;o++)"\n"===(n=t.charAt(o))?(r.seenCR||r.line++,r.column=1,r.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(r.line++,r.column=1,r.seenCR=!0):(r.column++,r.seenCR=!1);Sn=e}return En}function v(t){_n<Mn||(Mn<_n&&(Mn=_n,An=[]),An.push(t))}function y(){var e,n,r,i=_n,o=function(){var e,n,r,i,o;if(e=_n,null!==(n=null===(n=function(){var e,n;return e=_n,94===t.charCodeAt(_n)?(n=ut,_n++):(n=null,0===Cn&&v(ct)),null!==n&&(wn=e,n=V()),null===n&&(_n=e),e=n,e}())?rt:n))if(r=_n,Cn++,i=w(),Cn--,r=null===i?rt:(_n=r,nt),null!==r){for(i=[],null===(o=x())&&(o=b());null!==o;)i.push(o),null===(o=x())&&(o=b());e=null!==i&&null!==(o=null===(o=function(){var e,n;return e=_n,36===t.charCodeAt(_n)?(n=lt,_n++):(n=null,0===Cn&&v(ht)),null!==n&&(wn=e,n=W()),null===n&&(_n=e),e=n,e}())?rt:o)?(wn=e,null===(n=st(n,i,o))&&(_n=e),n):(_n=e,nt)}else _n=e,e=nt;else _n=e,e=nt;return e}();return null!==o&&(e=_n,124===t.charCodeAt(_n)?(n=it,_n++):(n=null,0===Cn&&v(ot)),null!==(e=null===(e=null!==n&&null!==(r=y())?n=[n,r]:(_n=e,nt))?rt:e))?(wn=i,null===(o=at(o,e))&&(_n=i),o):(_n=i,nt)}function b(){var e,n,r,i;return e=_n,40===t.charCodeAt(_n)?(n=Rt,_n++):(n=null,0===Cn&&v(Bt)),null===(r=e=null!==n&&null!==(r=null===(r=function(){var e,n,r;return e=_n,t.substr(_n,2)===Vt?(n=Vt,_n+=2):(n=null,0===Cn&&v(Wt)),e=null!==n&&null!==(r=y())?(wn=e,null===(n=K(r))&&(_n=e),n):(_n=e,nt),e}())&&null===(r=function(){var e,n,r;return e=_n,t.substr(_n,2)===Ht?(n=Ht,_n+=2):(n=null,0===Cn&&v(Yt)),e=null!==n&&null!==(r=y())?(wn=e,null===(n=Z(r))&&(_n=e),n):(_n=e,nt),e}())&&null===(r=function(){var e,n,r;return e=_n,t.substr(_n,2)===Ut?(n=Ut,_n+=2):(n=null,0===Cn&&v(Gt)),e=null!==n&&null!==(r=y())?(wn=e,null===(n=X(r))&&(_n=e),n):(_n=e,nt),e}())?function(){var t,e;return t=_n,null!==(e=y())&&(wn=t,e=q(e)),null===e&&(_n=t),t=e,t}():r)&&(41===t.charCodeAt(_n)?(i=jt,_n++):(i=null,0===Cn&&v(Ft)),null!==i)?(wn=e,null===(n=zt(r))&&(_n=e),n):(_n=e,nt))&&null===(r=function(){var e,n,r,i,o;if(Cn++,e=_n,91===t.charCodeAt(_n)?(n=Xt,_n++):(n=null,0===Cn&&v(Kt)),null!==n)if(94===t.charCodeAt(_n)?(r=ut,_n++):(r=null,0===Cn&&v(ct)),null!==(r=null===r?rt:r)){for(i=[],null===(o=E())&&(o=M());null!==o;)i.push(o),null===(o=E())&&(o=M());e=null!==i&&(93===t.charCodeAt(_n)?(o=Zt,_n++):(o=null,0===Cn&&v($t)),null!==o)?(wn=e,null===(n=Jt(r,i))&&(_n=e),n):(_n=e,nt)}else _n=e,e=nt;else _n=e,e=nt;return Cn--,null===e&&(n=null,0===Cn)&&v(qt),e}())?e=null===(e=function(){var e,n;return e=_n,46===t.charCodeAt(_n)?(n=ae,_n++):(n=null,0===Cn&&v(se)),null!==n&&(wn=e,n=J()),null===n&&(_n=e),e=n,e}())&&null===(e=function(){var e;return null===(e=function(){var e,n;return e=_n,t.substr(_n,2)===he?(n=he,_n+=2):(n=null,0===Cn&&v(fe)),null!==n&&(wn=e,n=pe()),null===n&&(_n=e),e=n,e}())&&null===(e=function(){var e,n;return e=_n,t.substr(_n,2)===ge?(n=ge,_n+=2):(n=null,0===Cn&&v(me)),null!==n&&(wn=e,n=ve()),null===n&&(_n=e),e=n,e}())&&null===(e=B())&&null===(e=A())&&null===(e=C())&&null===(e=T())&&null===(e=k())&&null===(e=O())&&null===(e=P())&&null===(e=I())&&null===(e=N())&&null===(e=D())&&null===(e=L())&&null===(e=R())&&null===(e=function(){var e,n,r;return e=_n,92===t.charCodeAt(_n)?(n=en,_n++):(n=null,0===Cn&&v(nn)),e=null!==n&&(rn.test(t.charAt(_n))?(r=t.charAt(_n),_n++):(r=null,0===Cn&&v(on)),null!==r)?(wn=e,null===(n=an(r))&&(_n=e),n):(_n=e,nt),e}())&&null===(e=j())&&null===(e=F())&&null===(e=z())&&null===(e=U())&&(e=G()),e}())?function(){var e,n;return Cn++,e=_n,ce.test(t.charAt(_n))?(n=t.charAt(_n),_n++):(n=null,0===Cn&&v(le)),null!==n&&(wn=e,n=oe(n)),null===n&&(_n=e),e=n,Cn--,null===e&&(n=null,0===Cn)&&v(ue),e}():e:r}function x(){var t,e=_n,n=b();return null!==n&&null!==(t=w())?(wn=e,null===(n=H(n,t))&&(_n=e),n):(_n=e,nt)}function w(){var e,n,r,i;return Cn++,e=_n,e=null!==(i=i=null===(i=function(){var e,n,r,i,o;return e=_n,123===t.charCodeAt(_n)?(n=pt,_n++):(n=null,0===Cn&&v(gt)),e=null!==n&&null!==(r=S())&&(44===t.charCodeAt(_n)?(i=mt,_n++):(i=null,0===Cn&&v(vt)),null!==i)&&null!==(i=S())&&(125===t.charCodeAt(_n)?(o=yt,_n++):(o=null,0===Cn&&v(bt)),null!==o)?(wn=e,null===(n=xt(r,i))&&(_n=e),n):(_n=e,nt),e}())&&null===(i=function(){var e,n,r,i;return e=_n,123===t.charCodeAt(_n)?(n=pt,_n++):(n=null,0===Cn&&v(gt)),e=null!==n&&null!==(r=S())&&(t.substr(_n,2)===_t?(i=_t,_n+=2):(i=null,0===Cn&&v(wt)),null!==i)?(wn=e,null===(n=St(r))&&(_n=e),n):(_n=e,nt),e}())&&null===(i=function(){var e,n,r,i;return e=_n,123===t.charCodeAt(_n)?(n=pt,_n++):(n=null,0===Cn&&v(gt)),e=null!==n&&null!==(r=S())&&(125===t.charCodeAt(_n)?(i=yt,_n++):(i=null,0===Cn&&v(bt)),null!==i)?(wn=e,null===(n=Et(r))&&(_n=e),n):(_n=e,nt),e}())&&null===(i=function(){var e,n;return e=_n,43===t.charCodeAt(_n)?(n=Mt,_n++):(n=null,0===Cn&&v(At)),null!==n&&(wn=e,n=Ct()),null===n&&(_n=e),e=n,e}())&&null===(i=function(){var e,n;return e=_n,42===t.charCodeAt(_n)?(n=Tt,_n++):(n=null,0===Cn&&v(kt)),null!==n&&(wn=e,n=Ot()),null===n&&(_n=e),e=n,e}())?function(){var e,n;return e=_n,63===t.charCodeAt(_n)?(n=Pt,_n++):(n=null,0===Cn&&v(It)),null!==n&&(wn=e,n=Nt()),null===n&&(_n=e),e=n,e}():i)&&(63===t.charCodeAt(_n)?(r=Pt,_n++):(r=null,0===Cn&&v(It)),null!==(n=null===(n=r)?rt:r))?(wn=e,null===(i=dt(i,n))&&(_n=e),i):(_n=e,nt),Cn--,null===e&&(i=null,0===Cn)&&v(ft),e}function S(){var e,n=_n,r=[];if(Dt.test(t.charAt(_n))?(e=t.charAt(_n),_n++):(e=null,0===Cn&&v(Lt)),null!==e)for(;null!==e;)r.push(e),Dt.test(t.charAt(_n))?(e=t.charAt(_n),_n++):(e=null,0===Cn&&v(Lt));else r=nt;return null!==r&&(wn=n,r=Y(r)),null===r&&(_n=n),r}function E(){var e,n,r;return Cn++,e=_n,e=null!==(n=M())&&(45===t.charCodeAt(_n)?(r=te,_n++):(r=null,0===Cn&&v(ee)),null!==r)&&null!==(r=M())?(wn=e,null===(n=$(n,r))&&(_n=e),n):(_n=e,nt),Cn--,null===e&&(n=null,0===Cn)&&v(Qt),e}function M(){var e,n,r;return Cn++,null===(r=r=null===(r=function(){var e,n;return e=_n,t.substr(_n,2)===he?(n=he,_n+=2):(n=null,0===Cn&&v(fe)),null!==n&&(wn=e,n=de()),null===n&&(_n=e),e=n,e}())&&null===(r=B())&&null===(r=A())&&null===(r=C())&&null===(r=T())&&null===(r=k())&&null===(r=O())&&null===(r=P())&&null===(r=I())&&null===(r=N())&&null===(r=D())&&null===(r=L())&&null===(r=R())&&null===(r=j())&&null===(r=F())&&null===(r=z())&&null===(r=U())?G():r)&&(e=_n,re.test(t.charAt(_n))?(n=t.charAt(_n),_n++):(n=null,0===Cn&&v(ie)),null!==n&&(wn=e,n=oe(n)),null===n&&(_n=e),r=e=n),Cn--,null===r&&0===Cn&&v(ne),r}function A(){var e,n=_n;return t.substr(_n,2)===ye?(e=ye,_n+=2):(e=null,0===Cn&&v(be)),null!==e&&(wn=n,e=xe()),null===e&&(_n=n),e}function C(){var e,n=_n;return t.substr(_n,2)===_e?(e=_e,_n+=2):(e=null,0===Cn&&v(we)),null!==e&&(wn=n,e=Se()),null===e&&(_n=n),e}function T(){var e,n=_n;return t.substr(_n,2)===Ee?(e=Ee,_n+=2):(e=null,0===Cn&&v(Me)),null!==e&&(wn=n,e=Ae()),null===e&&(_n=n),e}function k(){var e,n=_n;return t.substr(_n,2)===Ce?(e=Ce,_n+=2):(e=null,0===Cn&&v(Te)),null!==e&&(wn=n,e=ke()),null===e&&(_n=n),e}function O(){var e,n=_n;return t.substr(_n,2)===Oe?(e=Oe,_n+=2):(e=null,0===Cn&&v(Pe)),null!==e&&(wn=n,e=Ie()),null===e&&(_n=n),e}function P(){var e,n=_n;return t.substr(_n,2)===Ne?(e=Ne,_n+=2):(e=null,0===Cn&&v(De)),null!==e&&(wn=n,e=Le()),null===e&&(_n=n),e}function I(){var e,n=_n;return t.substr(_n,2)===Re?(e=Re,_n+=2):(e=null,0===Cn&&v(Be)),null!==e&&(wn=n,e=je()),null===e&&(_n=n),e}function N(){var e,n=_n;return t.substr(_n,2)===Fe?(e=Fe,_n+=2):(e=null,0===Cn&&v(ze)),null!==e&&(wn=n,e=Ue()),null===e&&(_n=n),e}function D(){var e,n=_n;return t.substr(_n,2)===Ge?(e=Ge,_n+=2):(e=null,0===Cn&&v(Ve)),null!==e&&(wn=n,e=We()),null===e&&(_n=n),e}function L(){var e,n=_n;return t.substr(_n,2)===He?(e=He,_n+=2):(e=null,0===Cn&&v(Ye)),null!==e&&(wn=n,e=qe()),null===e&&(_n=n),e}function R(){var e,n=_n;return t.substr(_n,2)===Xe?(e=Xe,_n+=2):(e=null,0===Cn&&v(Ke)),null!==e&&(wn=n,e=Ze()),null===e&&(_n=n),e}function B(){var e,n,r=_n;return t.substr(_n,2)===$e?(e=$e,_n+=2):(e=null,0===Cn&&v(Je)),null!==e&&(t.length>_n?(n=t.charAt(_n),_n++):(n=null,0===Cn&&v(Qe)),null!==n)?(wn=r,null===(e=tn(n))&&(_n=r),e):(_n=r,nt)}function j(){var e,n,r,i=_n;if(t.substr(_n,2)===sn?(e=sn,_n+=2):(e=null,0===Cn&&v(un)),null!==e){if(n=[],cn.test(t.charAt(_n))?(r=t.charAt(_n),_n++):(r=null,0===Cn&&v(ln)),null!==r)for(;null!==r;)n.push(r),cn.test(t.charAt(_n))?(r=t.charAt(_n),_n++):(r=null,0===Cn&&v(ln));else n=nt;i=null!==n?(wn=i,null===(e=hn(n))&&(_n=i),e):(_n=i,nt)}else _n=i,i=nt;return i}function F(){var e,n,r,i=_n;if(t.substr(_n,2)===fn?(e=fn,_n+=2):(e=null,0===Cn&&v(dn)),null!==e){if(n=[],pn.test(t.charAt(_n))?(r=t.charAt(_n),_n++):(r=null,0===Cn&&v(gn)),null!==r)for(;null!==r;)n.push(r),pn.test(t.charAt(_n))?(r=t.charAt(_n),_n++):(r=null,0===Cn&&v(gn));else n=nt;i=null!==n?(wn=i,null===(e=mn(n))&&(_n=i),e):(_n=i,nt)}else _n=i,i=nt;return i}function z(){var e,n,r,i=_n;if(t.substr(_n,2)===vn?(e=vn,_n+=2):(e=null,0===Cn&&v(yn)),null!==e){if(n=[],pn.test(t.charAt(_n))?(r=t.charAt(_n),_n++):(r=null,0===Cn&&v(gn)),null!==r)for(;null!==r;)n.push(r),pn.test(t.charAt(_n))?(r=t.charAt(_n),_n++):(r=null,0===Cn&&v(gn));else n=nt;i=null!==n?(wn=i,null===(e=bn(n))&&(_n=i),e):(_n=i,nt)}else _n=i,i=nt;return i}function U(){var e,n=_n;return t.substr(_n,2)===sn?(e=sn,_n+=2):(e=null,0===Cn&&v(un)),null!==e&&(wn=n,e=xn()),null===e&&(_n=n),e}function G(){var e,n,r=_n;return 92===t.charCodeAt(_n)?(e=en,_n++):(e=null,0===Cn&&v(nn)),null!==e&&(t.length>_n?(n=t.charAt(_n),_n++):(n=null,0===Cn&&v(Qe)),null!==n)?(wn=r,null===(e=oe(n))&&(_n=r),e):(_n=r,nt)}function V(){return new n("start")}function W(){return new n("end")}function H(t,e){return new s(t,e)}function Y(t){return+t.join("")}function q(t){return new a(t)}function X(t){return new o("non-capture-group",t)}function K(t){return new o("positive-lookahead",t)}function Z(t){return new o("negative-lookahead",t)}function $(t,e){return new l(t,e)}function J(){return new n("any-character")}var Q=1<arguments.length?arguments[1]:{},tt={regexp:y},et=y,nt=null,rt="",it="|",ot='"|"',at=function(t,e){return e?new r(t,e[1]):t},st=function(t,e,n){return new i([t].concat(e).concat([n]))},ut="^",ct='"^"',lt="$",ht='"$"',ft="Quantifier",dt=function(t,e){return e&&(t.greedy=!1),t},pt="{",gt='"{"',mt=",",vt='","',yt="}",bt='"}"',xt=function(t,e){return new u(t,e)},_t=",}",wt='",}"',St=function(t){return new u(t,1/0)},Et=function(t){return new u(t,t)},Mt="+",At='"+"',Ct=function(){return new u(1,1/0)},Tt="*",kt='"*"',Ot=function(){return new u(0,1/0)},Pt="?",It='"?"',Nt=function(){return new u(0,1)},Dt=/^[0-9]/,Lt="[0-9]",Rt="(",Bt='"("',jt=")",Ft='")"',zt=function(t){return t},Ut="?:",Gt='"?:"',Vt="?=",Wt='"?="',Ht="?!",Yt='"?!"',qt="CharacterSet",Xt="[",Kt='"["',Zt="]",$t='"]"',Jt=function(t,e){return new c(!!t,e)},Qt="CharacterRange",te="-",ee='"-"',ne="Character",re=/^[^\\\]]/,ie="[^\\\\\\]]",oe=function(t){return new h(t)},ae=".",se='"."',ue="Literal",ce=/^[^|\\\/.[()?+*$\^]/,le="[^|\\\\\\/.[()?+*$\\^]",he="\\b",fe='"\\\\b"',de=function(){return new n("backspace")},pe=function(){return new n("word-boundary")},ge="\\B",me='"\\\\B"',ve=function(){return new n("non-word-boundary")},ye="\\d",be='"\\\\d"',xe=function(){return new n("digit")},_e="\\D",we='"\\\\D"',Se=function(){return new n("non-digit")},Ee="\\f",Me='"\\\\f"',Ae=function(){return new n("form-feed")},Ce="\\n",Te='"\\\\n"',ke=function(){return new n("line-feed")},Oe="\\r",Pe='"\\\\r"',Ie=function(){return new n("carriage-return")},Ne="\\s",De='"\\\\s"',Le=function(){return new n("white-space")},Re="\\S",Be='"\\\\S"',je=function(){return new n("non-white-space")},Fe="\\t",ze='"\\\\t"',Ue=function(){return new n("tab")},Ge="\\v",Ve='"\\\\v"',We=function(){return new n("vertical-tab")},He="\\w",Ye='"\\\\w"',qe=function(){return new n("word")},Xe="\\W",Ke='"\\\\W"',Ze=function(){return new n("non-word")},$e="\\c",Je='"\\\\c"',Qe="any character",tn=function(t){return new m(t)},en="\\",nn='"\\\\"',rn=/^[1-9]/,on="[1-9]",an=function(t){return new g(t)},sn="\\0",un='"\\\\0"',cn=/^[0-7]/,ln="[0-7]",hn=function(t){return new p(t.join(""))},fn="\\x",dn='"\\\\x"',pn=/^[0-9a-fA-F]/,gn="[0-9a-fA-F]",mn=function(t){return new d(t.join(""))},vn="\\u",yn='"\\\\u"',bn=function(t){return new f(t.join(""))},xn=function(){return new n("null-character")},_n=0,wn=0,Sn=0,En={line:1,column:1,seenCR:!1},Mn=0,An=[],Cn=0;if("startRule"in Q){if(!(Q.startRule in tt))throw new Error("Can't start parsing from rule \""+Q.startRule+'".');et=tt[Q.startRule]}if(n.offset=function(){return wn},n.text=function(){return t.substring(wn,_n)},null!==(tt=et())&&_n===t.length)return tt;throw function(t){var e=0;for(t.sort();e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(An),wn=Math.max(_n,Mn),new _(An,wn<t.length?t.charAt(wn):null,wn,e(wn).line,e(wn).column)}},b=1,x={};function _(t,e,n,r,i){this.expected=t,this.found=e,this.offset=n,this.line=r,this.column=i,this.name="SyntaxError",this.message=function(t,e){var n;switch(t.length){case 0:n="end of input";break;case 1:n=t[0];break;default:n=t.slice(0,-1).join(", ")+" or "+t[t.length-1]}return"Expected "+n+" but "+(e?'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(t){return"\\x"+r(t)})).replace(/[\u0180-\u0FFF]/g,(function(t){return"\\u0"+r(t)})).replace(/[\u1080-\uFFFF]/g,(function(t){return"\\u"+r(t)}))+'"':"end of input")+" found.";function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}}(t,e)}function w(){this.constructor=v}t.exports=y},function(t,e,n){var r=n(3),i=n(5),o={extend:r.extend},a=d(97,122),s=d(65,90),u=d(48,57),c=d(32,47)+d(58,64)+d(91,96)+d(123,126),l=d(32,126),h=" \f\n\r\t\v \u2028\u2029",f={"\\w":a+s+u+"_","\\W":c.replace("_",""),"\\s":h,"\\S":function(){for(var t=l,e=0;e<h.length;e++)t=t.replace(h[e],"");return t}(),"\\d":u,"\\D":a+s+c};function d(t,e){for(var n="",r=t;r<=e;r++)n+=String.fromCharCode(r);return n}o.gen=function(t,e,n){return n=n||{guid:1},o[t.type]?o[t.type](t,e,n):o.token(t,e,n)},o.extend({token:function(t,e,n){switch(t.type){case"start":case"end":return"";case"any-character":return i.character();case"backspace":case"word-boundary":return"";case"non-word-boundary":break;case"digit":return i.pick(u.split(""));case"non-digit":return i.pick((a+s+c).split(""));case"form-feed":break;case"line-feed":return t.body||t.text;case"carriage-return":break;case"white-space":return i.pick(h.split(""));case"non-white-space":return i.pick((a+s+u).split(""));case"tab":case"vertical-tab":break;case"word":return i.pick((a+s+u).split(""));case"non-word":return i.pick(c.replace("_","").split(""))}return t.body||t.text},alternate:function(t,e,n){return this.gen(i.boolean()?t.left:t.right,e,n)},match:function(t,e,n){e="";for(var r=0;r<t.body.length;r++)e+=this.gen(t.body[r],e,n);return e},"capture-group":function(t,e,n){return e=this.gen(t.body,e,n),n[n.guid++]=e},"non-capture-group":function(t,e,n){return this.gen(t.body,e,n)},"positive-lookahead":function(t,e,n){return this.gen(t.body,e,n)},"negative-lookahead":function(t,e,n){return""},quantified:function(t,e,n){e="";for(var r=this.quantifier(t.quantifier),i=0;i<r;i++)e+=this.gen(t.body,e,n);return e},quantifier:function(t,e,n){var r=Math.max(t.min,0);t=isFinite(t.max)?t.max:r+i.integer(3,7);return i.integer(r,t)},charset:function(t,e,n){return t.invert?this["invert-charset"](t,e,n):(t=i.pick(t.body),this.gen(t,e,n))},"invert-charset":function(t,e,n){for(var r,o=l,a=0;a<t.body.length;a++)switch((r=t.body[a]).type){case"literal":o=o.replace(r.body,"");break;case"range":for(var s=this.gen(r.start,e,n).charCodeAt(),u=this.gen(r.end,e,n).charCodeAt(),c=s;c<=u;c++)o=o.replace(String.fromCharCode(c),"");default:var h=f[r.text];if(h)for(var d=0;d<=h.length;d++)o=o.replace(h[d],"")}return i.pick(o.split(""))},range:function(t,e,n){var r=this.gen(t.start,e,n).charCodeAt();t=this.gen(t.end,e,n).charCodeAt();return String.fromCharCode(i.integer(r,t))},literal:function(t,e,n){return t.escaped?t.body:t.text},unicode:function(t,e,n){return String.fromCharCode(parseInt(t.code,16))},hex:function(t,e,n){return String.fromCharCode(parseInt(t.code,16))},octal:function(t,e,n){return String.fromCharCode(parseInt(t.code,8))},"back-reference":function(t,e,n){return n[t.code]||""},CONTROL_CHARACTER_MAP:function(){for(var t="@ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \\ ] ^ _".split(" "),e="\0        \b \t \n \v \f \r                  ".split(" "),n={},r=0;r<t.length;r++)n[t[r]]=e[r];return n}(),"control-character":function(t,e,n){return this.CONTROL_CHARACTER_MAP[t.code]}}),t.exports=o},function(t,e,n){t.exports=n(24)},function(t,e,n){var r=n(2),i=n(3),o=n(4);t.exports=function t(e,n,a){a=a||[];var s={name:"string"==typeof n?n.replace(r.RE_KEY,"$1"):n,template:e,type:i.type(e),rule:o.parse(n)};switch(s.path=a.slice(0),s.path.push(void 0===n?"ROOT":s.name),s.type){case"array":s.items=[],i.each(e,(function(e,n){s.items.push(t(e,n,s.path))}));break;case"object":s.properties=[],i.each(e,(function(e,n){s.properties.push(t(e,n,s.path))}))}return s}},function(t,e,n){t.exports=n(26)},function(t,e,n){var r=n(2),i=n(3),o=n(23);function a(t,e){t=o(t);for(var n=s.diff(t,e),r=0;r<n.length;r++);return n}var s={diff:function(t,e,n){var r=[];return this.name(t,e,n,r)&&this.type(t,e,n,r)&&(this.value(t,e,n,r),this.properties(t,e,n,r),this.items(t,e,n,r)),r},name:function(t,e,n,r){var i=r.length;return u.equal("name",t.path,n+"",t.name+"",r),r.length===i},type:function(t,e,n,o){var a=o.length;switch(t.type){case"string":if(t.template.match(r.RE_PLACEHOLDER))return!0;break;case"array":if(t.rule.parameters){if(void 0!==t.rule.min&&void 0===t.rule.max&&1===t.rule.count)return!0;if(t.rule.parameters[2])return!0}break;case"function":return!0}return u.equal("type",t.path,i.type(e),t.type,o),o.length===a},value:function(t,e,n,i){var o,a=i.length,s=t.rule,c=t.type;if("object"===c||"array"===c||"function"===c)return!0;if(s.parameters)switch(c){case"number":var l=(e+"").split(".");l[0]=+l[0],void 0!==s.min&&void 0!==s.max&&(u.greaterThanOrEqualTo("value",t.path,l[0],Math.min(s.min,s.max),i),u.lessThanOrEqualTo("value",t.path,l[0],Math.max(s.min,s.max),i)),void 0!==s.min&&void 0===s.max&&u.equal("value",t.path,l[0],s.min,i,"[value] "+n),s.decimal&&(void 0!==s.dmin&&void 0!==s.dmax&&(u.greaterThanOrEqualTo("value",t.path,l[1].length,s.dmin,i),u.lessThanOrEqualTo("value",t.path,l[1].length,s.dmax,i)),void 0!==s.dmin)&&void 0===s.dmax&&u.equal("value",t.path,l[1].length,s.dmin,i);break;case"boolean":break;case"string":o=(o=e.match(new RegExp(t.template,"g")))?o.length:0,void 0!==s.min&&void 0!==s.max&&(u.greaterThanOrEqualTo("repeat count",t.path,o,s.min,i),u.lessThanOrEqualTo("repeat count",t.path,o,s.max,i)),void 0!==s.min&&void 0===s.max&&u.equal("repeat count",t.path,o,s.min,i);break;case"regexp":o=(o=e.match(new RegExp(t.template.source.replace(/^\^|\$$/g,""),"g")))?o.length:0,void 0!==s.min&&void 0!==s.max&&(u.greaterThanOrEqualTo("repeat count",t.path,o,s.min,i),u.lessThanOrEqualTo("repeat count",t.path,o,s.max,i)),void 0!==s.min&&void 0===s.max&&u.equal("repeat count",t.path,o,s.min,i)}else{switch(c){case"regexp":return u.match("value",t.path,e,t.template,i),i.length===a;case"string":if(t.template.match(r.RE_PLACEHOLDER))return i.length===a}u.equal("value",t.path,e,t.template,i)}return i.length===a},properties:function(t,e,n,r){var o=r.length,a=t.rule,s=i.keys(e);if(t.properties){if(t.rule.parameters?(void 0!==a.min&&void 0!==a.max&&(u.greaterThanOrEqualTo("properties length",t.path,s.length,Math.min(a.min,a.max),r),u.lessThanOrEqualTo("properties length",t.path,s.length,Math.max(a.min,a.max),r)),void 0!==a.min&&void 0===a.max&&1!==a.count&&u.equal("properties length",t.path,s.length,a.min,r)):u.equal("properties length",t.path,s.length,t.properties.length,r),r.length!==o)return!1;for(var c=0;c<s.length;c++)r.push.apply(r,this.diff(function(){var e;return i.each(t.properties,(function(t){t.name===s[c]&&(e=t)})),e||t.properties[c]}(),e[s[c]],s[c]));return r.length===o}},items:function(t,e,n,r){var i=r.length;if(t.items){var o=t.rule;if(t.rule.parameters){if(void 0!==o.min&&void 0!==o.max&&(u.greaterThanOrEqualTo("items",t.path,e.length,Math.min(o.min,o.max)*t.items.length,r,"[{utype}] array is too short: {path} must have at least {expected} elements but instance has {actual} elements"),u.lessThanOrEqualTo("items",t.path,e.length,Math.max(o.min,o.max)*t.items.length,r,"[{utype}] array is too long: {path} must have at most {expected} elements but instance has {actual} elements")),void 0!==o.min&&void 0===o.max){if(1===o.count)return r.length===i;u.equal("items length",t.path,e.length,o.min*t.items.length,r)}if(o.parameters[2])return r.length===i}else u.equal("items length",t.path,e.length,t.items.length,r);if(r.length!==i)return!1;for(var a=0;a<e.length;a++)r.push.apply(r,this.diff(t.items[a%t.items.length],e[a],a%t.items.length));return r.length===i}}},u={message:function(t){return(t.message||"[{utype}] Expect {path}'{ltype} {action} {expected}, but is {actual}").replace("{utype}",t.type.toUpperCase()).replace("{ltype}",t.type.toLowerCase()).replace("{path}",i.isArray(t.path)&&t.path.join(".")||t.path).replace("{action}",t.action).replace("{expected}",t.expected).replace("{actual}",t.actual)},equal:function(t,e,n,r,i,o){return n===r||("type"===t&&"regexp"===r&&"string"===n||(e={path:e,type:t,actual:n,expected:r,action:"is equal to",message:o},e.message=u.message(e),i.push(e),!1))},match:function(t,e,n,r,i,o){return!!r.test(n)||((e={path:e,type:t,actual:n,expected:r,action:"matches",message:o}).message=u.message(e),i.push(e),!1)},notEqual:function(t,e,n,r,i,o){return n!==r||((e={path:e,type:t,actual:n,expected:r,action:"is not equal to",message:o}).message=u.message(e),i.push(e),!1)},greaterThan:function(t,e,n,r,i,o){return r<n||((e={path:e,type:t,actual:n,expected:r,action:"is greater than",message:o}).message=u.message(e),i.push(e),!1)},lessThan:function(t,e,n,r,i,o){return n<r||((e={path:e,type:t,actual:n,expected:r,action:"is less to",message:o}).message=u.message(e),i.push(e),!1)},greaterThanOrEqualTo:function(t,e,n,r,i,o){return r<=n||((e={path:e,type:t,actual:n,expected:r,action:"is greater than or equal to",message:o}).message=u.message(e),i.push(e),!1)},lessThanOrEqualTo:function(t,e,n,r,i,o){return n<=r||((e={path:e,type:t,actual:n,expected:r,action:"is less than or equal to",message:o}).message=u.message(e),i.push(e),!1)}};a.Diff=s,a.Assert=u,t.exports=a},function(t,e,n){t.exports=n(28)},function(t,e,n){var r=n(3);window._XMLHttpRequest=window.XMLHttpRequest,window._ActiveXObject=window.ActiveXObject;try{new window.Event("custom")}catch(t){window.Event=function(t,e,n,r){var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e,n,r),i}}n={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};var i="readystatechange loadstart progress abort error load timeout loadend".split(" "),o="timeout withCredentials".split(" "),a="readyState responseURL status statusText responseType response responseText responseXML".split(" "),s="OK";function u(){this.custom={events:{},requestHeaders:{},responseHeaders:{}}}u._settings={timeout:"10-100"},u.setup=function(t){return r.extend(u._settings,t),u._settings},r.extend(u,n),r.extend(u.prototype,n),u.prototype.mock=!0,u.prototype.match=!1,r.extend(u.prototype,{open:function(t,e,n,s,c){var l,h,f=this,d=(r.extend(this.custom,{method:t,url:e,async:"boolean"!=typeof n||n,username:s,password:c,options:{url:e,type:t}}),this.custom.timeout="number"==typeof(l=u._settings.timeout)?l:"string"!=typeof l||~l.indexOf("-")?"string"==typeof l&&~l.indexOf("-")?(d=l.split("-"),h=parseInt(d[0],10),d=parseInt(d[1],10),Math.round(Math.random()*(d-h))+h):void 0:parseInt(l,10),function(t){for(var e in u.Mock._mocked)if(e=u.Mock._mocked[e],(!e.rurl||n(e.rurl,t.url))&&(!e.rtype||n(e.rtype,t.type.toLowerCase())))return e;function n(t,e){return"string"===r.type(t)?t===e:"regexp"===r.type(t)&&t.test(e)}}(this.custom.options));function p(t){for(var e=0;e<a.length;e++)try{f[a[e]]=g[a[e]]}catch(t){}f.dispatchEvent(new Event(t.type))}if(d)this.match=!0,this.custom.template=d,this.readyState=u.OPENED,this.dispatchEvent(new Event("readystatechange"));else{h=function(){var t=location.href;t=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/.exec(t.toLowerCase())||[];return/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(t[1])}();var g=window.ActiveXObject?!h&&y()||function(){try{return new window._ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}():y();this.custom.xhr=g;for(var m=0;m<i.length;m++)g.addEventListener(i[m],p);s?g.open(t,e,n,s,c):g.open(t,e,n);for(var v=0;v<o.length;v++)try{g[o[v]]=f[o[v]]}catch(t){}}function y(){try{return new window._XMLHttpRequest}catch(t){}}},setRequestHeader:function(t,e){var n;this.match?(n=this.custom.requestHeaders)[t]?n[t]+=","+e:n[t]=e:this.custom.xhr.setRequestHeader(t,e)},timeout:0,withCredentials:!1,upload:{},send:function(t){var e=this;function n(){var t,n;e.readyState=u.HEADERS_RECEIVED,e.dispatchEvent(new Event("readystatechange")),e.readyState=u.LOADING,e.dispatchEvent(new Event("readystatechange")),e.status=200,e.statusText=s,e.response=e.responseText=JSON.stringify((t=e.custom.template,n=e.custom.options,r.isFunction(t.template)?t.template(n):u.Mock.mock(t.template)),null,4),e.readyState=u.DONE,e.dispatchEvent(new Event("readystatechange")),e.dispatchEvent(new Event("load")),e.dispatchEvent(new Event("loadend"))}this.custom.options.body=t,this.match?(this.setRequestHeader("X-Requested-With","MockXMLHttpRequest"),this.dispatchEvent(new Event("loadstart")),this.custom.async?setTimeout(n,this.custom.timeout):n()):this.custom.xhr.send(t)},abort:function(){this.match?(this.readyState=u.UNSENT,this.dispatchEvent(new Event("abort",!1,!1,this)),this.dispatchEvent(new Event("error",!1,!1,this))):this.custom.xhr.abort()}}),r.extend(u.prototype,{responseURL:"",status:u.UNSENT,statusText:"",getResponseHeader:function(t){return this.match?this.custom.responseHeaders[t.toLowerCase()]:this.custom.xhr.getResponseHeader(t)},getAllResponseHeaders:function(){if(!this.match)return this.custom.xhr.getAllResponseHeaders();var t,e=this.custom.responseHeaders,n="";for(t in e)e.hasOwnProperty(t)&&(n+=t+": "+e[t]+"\r\n");return n},overrideMimeType:function(){},responseType:"",response:null,responseText:"",responseXML:null}),r.extend(u.prototype,{addEventListener:function(t,e){var n=this.custom.events;n[t]||(n[t]=[]),n[t].push(e)},removeEventListener:function(t,e){for(var n=this.custom.events[t]||[],r=0;r<n.length;r++)n[r]===e&&n.splice(r--,1)},dispatchEvent:function(t){for(var e=this.custom.events[t.type]||[],n=0;n<e.length;n++)e[n].call(this,t);var r="on"+t.type;this[r]&&this[r](t)}}),t.exports=u}])}))},42754:function(t,e,n){"use strict";n.d(e,{Z:function(){return er}});var r=n(2212);const i=new r.JOQ,o=new r.iMs,a=new r.FM8,s=new r.Pa4,u=new r.Pa4,c=new r.Pa4,l=new r.yGw;class h extends r.pBf{constructor(t,e,n){super(),n.style.touchAction="none";let r=null,h=null;const f=[],d=this;function p(){n.addEventListener("pointermove",m),n.addEventListener("pointerdown",v),n.addEventListener("pointerup",y),n.addEventListener("pointerleave",y)}function g(){n.removeEventListener("pointermove",m),n.removeEventListener("pointerdown",v),n.removeEventListener("pointerup",y),n.removeEventListener("pointerleave",y),n.style.cursor=""}function m(p){!1!==d.enabled&&(b(p),o.setFromCamera(a,e),r?(o.ray.intersectPlane(i,u)&&r.position.copy(u.sub(s).applyMatrix4(l)),d.dispatchEvent({type:"drag",object:r})):"mouse"!==p.pointerType&&"pen"!==p.pointerType||(f.length=0,o.setFromCamera(a,e),o.intersectObjects(t,!0,f),0<f.length?(p=f[0].object,i.setFromNormalAndCoplanarPoint(e.getWorldDirection(i.normal),c.setFromMatrixPosition(p.matrixWorld)),h!==p&&null!==h&&(d.dispatchEvent({type:"hoveroff",object:h}),n.style.cursor="auto",h=null),h!==p&&(d.dispatchEvent({type:"hoveron",object:p}),n.style.cursor="pointer",h=p)):null!==h&&(d.dispatchEvent({type:"hoveroff",object:h}),n.style.cursor="auto",h=null)))}function v(h){!1!==d.enabled&&(b(h),f.length=0,o.setFromCamera(a,e),o.intersectObjects(t,!0,f),0<f.length)&&(r=!0===d.transformGroup?t[0]:f[0].object,i.setFromNormalAndCoplanarPoint(e.getWorldDirection(i.normal),c.setFromMatrixPosition(r.matrixWorld)),o.ray.intersectPlane(i,u)&&(l.copy(r.parent.matrixWorld).invert(),s.copy(u).sub(c.setFromMatrixPosition(r.matrixWorld))),n.style.cursor="move",d.dispatchEvent({type:"dragstart",object:r}))}function y(){!1!==d.enabled&&(r&&(d.dispatchEvent({type:"dragend",object:r}),r=null),n.style.cursor=h?"pointer":"auto")}function b(t){var e=n.getBoundingClientRect();a.x=(t.clientX-e.left)/e.width*2-1,a.y=-(t.clientY-e.top)/e.height*2+1}p(),this.enabled=!0,this.transformGroup=!1,this.activate=p,this.deactivate=g,this.dispose=function(){g()},this.getObjects=function(){return t},this.getRaycaster=function(){return o}}}var f={value:()=>{}};function d(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new p(r)}function p(t){this._=t}function g(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=f,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}p.prototype=d.prototype={constructor:p,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=g(i[n],t.name,e);else if(null==e)for(n in i)i[n]=g(i[n],t.name,null);return this}for(;++a<s;)if(n=(n=(t=o[a]).type)&&function(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}(i[n],t.name))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new p(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var m,v,y=d,b=0,x=0,_=0,w=1e3,S=0,E=0,M=0,A="object"==typeof performance&&performance.now?performance:Date,C="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function T(){return E||(C(k),E=A.now()+M)}function k(){E=0}function O(){this._call=this._time=this._next=null}function P(t,e,n){var r=new O;return r.restart(t,e,n),r}function I(){E=(S=A.now())+M,b=x=0;try{T(),++b;for(var t,e=m;e;)0<=(t=E-e._time)&&e._call.call(void 0,t),e=e._next;--b}finally{for(var n,r,i=m,o=1/(b=0);i;)i=i._call?(o>i._time&&(o=i._time),(n=i)._next):(r=i._next,i._next=null,n?n._next=r:m=r);v=n,D(o),E=0}}function N(){var t=A.now(),e=t-S;w<e&&(M-=e,S=t)}function D(t){b||(x=x&&clearTimeout(x),24<t-E?(t<1/0&&(x=setTimeout(I,t-A.now()-M)),_=_&&clearInterval(_)):(_||(S=A.now(),_=setInterval(N,w)),b=1,C(I)))}O.prototype=P.prototype={constructor:O,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?T():+n)+(null==e?0:+e),this._next||v===this||(v?v._next=this:m=this,v=this),this._call=t,this._time=n,D()},stop:function(){this._call&&(this._call=null,this._time=1/0,D())}};const L=1664525,R=1013904223,B=4294967296;function j(t){return t.x}function F(t){return t.y}function z(t){return t.z}var U=Math.PI*(3-Math.sqrt(5)),G=20*Math.PI/(9+Math.sqrt(221));function V(t,e){e=e||2;var n,r=Math.min(3,Math.max(1,Math.round(e))),i=1,o=.001,a=1-Math.pow(o,1/300),s=0,u=.6,c=new Map,l=P(d),h=y("tick","end"),f=function(){let t=1;return()=>(t=(L*t+R)%B)/B}();function d(){p(),h.call("tick",n),i<o&&(l.stop(),h.call("end",n))}function p(e){var o,l,h=t.length;void 0===e&&(e=1);for(var f=0;f<e;++f)for(i+=(s-i)*a,c.forEach((function(t){t(i)})),o=0;o<h;++o)null==(l=t[o]).fx?l.x+=l.vx*=u:(l.x=l.fx,l.vx=0),1<r&&(null==l.fy?l.y+=l.vy*=u:(l.y=l.fy,l.vy=0)),2<r&&(null==l.fz?l.z+=l.vz*=u:(l.z=l.fz,l.vz=0));return n}function g(){for(var e,n,i,o,a=0,s=t.length;a<s;++a)(o=t[a]).index=a,null!=o.fx&&(o.x=o.fx),null!=o.fy&&(o.y=o.fy),null!=o.fz&&(o.z=o.fz),(isNaN(o.x)||1<r&&isNaN(o.y)||2<r&&isNaN(o.z))&&(e=10*(2<r?Math.cbrt(.5+a):1<r?Math.sqrt(.5+a):a),n=a*U,i=a*G,1===r?o.x=e:2===r?(o.x=e*Math.cos(n),o.y=e*Math.sin(n)):(o.x=e*Math.sin(n)*Math.cos(i),o.y=e*Math.cos(n),o.z=e*Math.sin(n)*Math.sin(i))),(isNaN(o.vx)||1<r&&isNaN(o.vy)||2<r&&isNaN(o.vz))&&(o.vx=0,1<r&&(o.vy=0),2<r)&&(o.vz=0)}function m(e){return e.initialize&&e.initialize(t,f,r),e}return null==t&&(t=[]),g(),n={tick:p,restart:function(){return l.restart(d),n},stop:function(){return l.stop(),n},numDimensions:function(t){return arguments.length?(r=Math.min(3,Math.max(1,Math.round(t))),c.forEach(m),n):r},nodes:function(e){return arguments.length?(t=e,g(),c.forEach(m),n):t},alpha:function(t){return arguments.length?(i=+t,n):i},alphaMin:function(t){return arguments.length?(o=+t,n):o},alphaDecay:function(t){return arguments.length?(a=+t,n):+a},alphaTarget:function(t){return arguments.length?(s=+t,n):s},velocityDecay:function(t){return arguments.length?(u=1-t,n):1-u},randomSource:function(t){return arguments.length?(f=t,c.forEach(m),n):f},force:function(t,e){return 1<arguments.length?(null==e?c.delete(t):c.set(t,m(e)),n):c.get(t)},find:function(){var e,n,i,o=Array.prototype.slice.call(arguments),a=o.shift()||0,s=(1<r?o.shift():null)||0,u=(2<r?o.shift():null)||0,c=o.shift()||1/0,l=0,h=t.length;for(c*=c,l=0;l<h;++l)(e=(e=a-(n=t[l]).x)*e+(e=s-(n.y||0))*e+(e=u-(n.z||0))*e)<c&&(i=n,c=e);return i},on:function(t,e){return 1<arguments.length?(h.on(t,e),n):h.on(t)}}}function W(t){return function(){return t}}function H(t){return 1e-6*(t()-.5)}function Y(t){return t.index}function q(t,e){if(t=t.get(e),t)return t;throw new Error("node not found: "+e)}function X(t){var e,n,r,i,o,a,s,u=Y,c=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},l=W(30),h=1;function f(r){for(var o=0,u=t.length;o<h;++o)for(var c,l,f,d,p=0,g=0,m=0;p<u;++p)c=(l=t[p]).source,f=(l=l.target).x+l.vx-c.x-c.vx||H(s),1<i&&(g=l.y+l.vy-c.y-c.vy||H(s)),2<i&&(m=l.z+l.vz-c.z-c.vz||H(s)),f*=d=((d=Math.sqrt(f*f+g*g+m*m))-n[p])/d*r*e[p],g*=d,m*=d,l.vx-=f*(d=a[p]),1<i&&(l.vy-=g*d),2<i&&(l.vz-=m*d),c.vx+=f*(d=1-d),1<i&&(c.vy+=g*d),2<i&&(c.vz+=m*d)}function d(){if(r){var i,s=r.length,c=t.length,l=new Map(r.map(((t,e)=>[u(t,e,r),t]))),h=0;for(o=new Array(s);h<c;++h)(i=t[h]).index=h,"object"!=typeof i.source&&(i.source=q(l,i.source)),"object"!=typeof i.target&&(i.target=q(l,i.target)),o[i.source.index]=(o[i.source.index]||0)+1,o[i.target.index]=(o[i.target.index]||0)+1;for(h=0,a=new Array(c);h<c;++h)i=t[h],a[h]=o[i.source.index]/(o[i.source.index]+o[i.target.index]);e=new Array(c),p(),n=new Array(c),g()}}function p(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+c(t[n],n,t)}function g(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t,...e){r=t,s=e.find((t=>"function"==typeof t))||Math.random,i=e.find((t=>[1,2,3].includes(t)))||2,d()},f.links=function(e){return arguments.length?(t=e,d(),f):t},f.id=function(t){return arguments.length?(u=t,f):u},f.iterations=function(t){return arguments.length?(h=+t,f):h},f.strength=function(t){return arguments.length?(c="function"==typeof t?t:W(+t),p(),f):c},f.distance=function(t){return arguments.length?(l="function"==typeof t?t:W(+t),g(),f):l},f}function K(t,e,n){if(!isNaN(e)){var r,i,o,a,s,u,c=t._root,l={data:n},h=t._x0,f=t._x1;if(c){for(;c.length;)if((a=e>=(i=(h+f)/2))?h=i:f=i,!(c=(r=c)[s=+a]))return r[s]=l,t;if(e===(o=+t._x.call(null,c.data)))l.next=c,r?r[s]=l:t._root=l;else{for(;r=r?r[s]=new Array(2):t._root=new Array(2),(a=e>=(i=(h+f)/2))?h=i:f=i,(s=+a)==(u=+(i<=o)););r[u]=c,r[s]=l}}else t._root=l}return t}function Z(t,e,n){this.node=t,this.x0=e,this.x1=n}function $(t){return t[0]}function J(t,e){return e=new Q(null==e?$:e,NaN,NaN),null==t?e:e.addAll(t)}function Q(t,e,n){this._x=t,this._x0=e,this._x1=n,this._root=void 0}function tt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}function et(t,e,n,r){if(!isNaN(e)&&!isNaN(n)){var i,o,a,s,u,c,l,h,f,d=t._root,p={data:r},g=t._x0,m=t._y0,v=t._x1,y=t._y1;if(d){for(;d.length;)if((c=e>=(o=(g+v)/2))?g=o:v=o,(l=n>=(a=(m+y)/2))?m=a:y=a,!(d=(i=d)[h=l<<1|c]))return i[h]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)p.next=d,i?i[h]=p:t._root=p;else{for(;i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+v)/2))?g=o:v=o,(l=n>=(a=(m+y)/2))?m=a:y=a,(h=l<<1|c)==(f=(a<=u)<<1|o<=s););i[f]=d,i[h]=p}}else t._root=p}return t}function nt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function rt(t){return t[0]}function it(t){return t[1]}function ot(t,e,n){return e=new at(null==e?rt:e,null==n?it:n,NaN,NaN,NaN,NaN),null==t?e:e.addAll(t)}function at(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function st(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}function ut(t,e,n,r,i){if(!(isNaN(e)||isNaN(n)||isNaN(r))){var o,a,s,u,c,l,h,f,d,p,g,m,v=t._root,y={data:i},b=t._x0,x=t._y0,_=t._z0,w=t._x1,S=t._y1,E=t._z1;if(v){for(;v.length;)if((f=e>=(a=(b+w)/2))?b=a:w=a,(d=n>=(s=(x+S)/2))?x=s:S=s,(p=r>=(u=(_+E)/2))?_=u:E=u,!(v=(o=v)[g=p<<2|d<<1|f]))return o[g]=y,t;if(c=+t._x.call(null,v.data),l=+t._y.call(null,v.data),h=+t._z.call(null,v.data),e===c&&n===l&&r===h)y.next=v,o?o[g]=y:t._root=y;else{for(;o=o?o[g]=new Array(8):t._root=new Array(8),(f=e>=(a=(b+w)/2))?b=a:w=a,(d=n>=(s=(x+S)/2))?x=s:S=s,(p=r>=(u=(_+E)/2))?_=u:E=u,(g=p<<2|d<<1|f)==(m=(u<=h)<<2|(s<=l)<<1|a<=c););o[m]=v,o[g]=y}}else t._root=y}return t}function ct(t,e,n,r,i,o,a){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=a}function lt(t){return t[0]}function ht(t){return t[1]}function ft(t){return t[2]}function dt(t,e,n,r){return e=new pt(null==e?lt:e,null==n?ht:n,null==r?ft:r,NaN,NaN,NaN,NaN,NaN,NaN),null==t?e:e.addAll(t)}function pt(t,e,n,r,i,o,a,s,u){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=u,this._root=void 0}function gt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}e=J.prototype=Q.prototype,e.copy=function(){var t,e,n=new Q(this._x,this._x0,this._x1),r=this._root;if(r)if(r.length)for(t=[{source:r,target:n._root=new Array(2)}];r=t.pop();)for(var i=0;i<2;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(2)}):r.target[i]=tt(e));else n._root=tt(r);return n},e.add=function(t){var e=+this._x.call(null,t);return K(this.cover(e),e,t)},e.addAll=function(t){for(var e,n=t.length,r=new Array(n),i=1/0,o=-1/0,a=0;a<n;++a)isNaN(e=+this._x.call(null,t[a]))||((r[a]=e)<i&&(i=e),o<e&&(o=e));if(!(o<i))for(this.cover(i).cover(o),a=0;a<n;++a)K(this,r[a],t[a]);return this},e.cover=function(t){if(!isNaN(t=+t)){var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(t))+1;else{for(var r,i,o=n-e||1,a=this._root;t<e||n<=t;)switch(i=+(t<e),(r=new Array(2))[i]=a,a=r,o*=2,i){case 0:n=e+o;break;case 1:e=n-o}this._root&&this._root.length&&(this._root=a)}this._x0=e,this._x1=n}return this},e.data=function(){var t=[];return this.visit((function(e){if(!e.length)for(;t.push(e.data),e=e.next;);})),t},e.extent=function(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},e.find=function(t,e){var n,r,i,o,a,s=this._x0,u=this._x1,c=[],l=this._root;for(l&&c.push(new Z(l,s,u)),null==e?e=1/0:(s=t-e,u=t+e);r=c.pop();)!(l=r.node)||(a=r.x0)>u||(i=r.x1)<s||(l.length?(c.push(new Z(l[1],o=(a+i)/2,i),new Z(l[0],a,o)),(i=+(o<=t))&&(r=c[c.length-1],c[c.length-1]=c[c.length-1-i],c[c.length-1-i]=r)):(a=Math.abs(t-+this._x.call(null,l.data)))<e&&(s=t-(e=a),u=t+a,n=l.data));return n},e.remove=function(t){if(!isNaN(o=+this._x.call(null,t))){var e,n,r,i,o,a,s,u,c,l=this._root,h=this._x0,f=this._x1;if(l){if(l.length)for(;;){if((s=o>=(a=(h+f)/2))?h=a:f=a,!(l=(e=l)[u=+s]))return this;if(!l.length)break;e[u+1&1]&&(n=e,c=u)}for(;l.data!==t;)if(!(l=(r=l).next))return this;(i=l.next)&&delete l.next,r?i?r.next=i:delete r.next:e?(i?e[u]=i:delete e[u],(l=e[0]||e[1])&&l===(e[1]||e[0])&&!l.length&&(n?n[c]=l:this._root=l)):this._root=i}}return this},e.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},e.root=function(){return this._root},e.size=function(){var t=0;return this.visit((function(e){if(!e.length)for(;++t,e=e.next;);})),t},e.visit=function(t){var e,n,r,i,o=[],a=this._root;for(a&&o.push(new Z(a,this._x0,this._x1));r=o.pop();)!t(a=r.node,n=r.x0,r=r.x1)&&a.length&&(i=(n+r)/2,(e=a[1])&&o.push(new Z(e,i,r)),e=a[0])&&o.push(new Z(e,n,i));return this},e.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Z(this._root,this._x0,this._x1));e=n.pop();){var i,o,a,s,u=e.node;u.length&&(s=((o=e.x0)+(a=e.x1))/2,(i=u[0])&&n.push(new Z(i,o,s)),i=u[1])&&n.push(new Z(i,s,a)),r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.x1);return this},e.x=function(t){return arguments.length?(this._x=t,this):this._x},e=ot.prototype=at.prototype,e.copy=function(){var t,e,n=new at(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(r)if(r.length)for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=st(e));else n._root=st(r);return n},e.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return et(this.cover(e,n),e,n,t)},e.addAll=function(t){for(var e,n,r=t.length,i=new Array(r),o=new Array(r),a=1/0,s=1/0,u=-1/0,c=-1/0,l=0;l<r;++l)isNaN(e=+this._x.call(null,n=t[l]))||isNaN(n=+this._y.call(null,n))||((i[l]=e)<a&&(a=e),u<e&&(u=e),(o[l]=n)<s&&(s=n),c<n&&(c=n));if(!(u<a||c<s))for(this.cover(a,s).cover(u,c),l=0;l<r;++l)et(this,i[l],o[l],t[l]);return this},e.cover=function(t,e){if(!isNaN(t=+t)&&!isNaN(e=+e)){var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n||1,c=this._root;t<n||i<=t||e<r||o<=e;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}this._x0=n,this._y0=r,this._x1=i,this._y1=o}return this},e.data=function(){var t=[];return this.visit((function(e){if(!e.length)for(;t.push(e.data),e=e.next;);})),t},e.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},e.find=function(t,e,n){var r,i,o,a,s,u,c,l,h=this._x0,f=this._y0,d=this._x1,p=this._y1,g=[],m=this._root;for(m&&g.push(new nt(m,h,f,d,p)),null==n?n=1/0:(h=t-n,f=e-n,d=t+n,p=e+n,n*=n);r=g.pop();)!(m=r.node)||(s=r.x0)>d||(u=r.y0)>p||(a=r.x1)<h||(i=r.y1)<f||(m.length?(g.push(new nt(m[3],o=(s+a)/2,c=(u+i)/2,a,i),new nt(m[2],s,c,o,i),new nt(m[1],o,u,a,c),new nt(m[0],s,u,o,c)),(i=(c<=e)<<1|o<=t)&&(r=g[g.length-1],g[g.length-1]=g[g.length-1-i],g[g.length-1-i]=r)):(u=(a=t-+this._x.call(null,m.data))*a+(s=e-+this._y.call(null,m.data))*s)<n&&(h=t-(c=Math.sqrt(n=u)),f=e-c,d=t+c,p=e+c,l=m.data));return l},e.remove=function(t){if(!isNaN(o=+this._x.call(null,t))&&!isNaN(a=+this._y.call(null,t))){var e,n,r,i,o,a,s,u,c,l,h,f=this._root,d=this._x0,p=this._y0,g=this._x1,m=this._y1;if(f){if(f.length)for(;;){if((u=o>=(s=(d+g)/2))?d=s:g=s,(c=a>=(s=(p+m)/2))?p=s:m=s,!(f=(e=f)[l=c<<1|u]))return this;if(!f.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;f.data!==t;)if(!(f=(r=f).next))return this;(i=f.next)&&delete f.next,r?i?r.next=i:delete r.next:e?(i?e[l]=i:delete e[l],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[h]=f:this._root=f)):this._root=i}}return this},e.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},e.root=function(){return this._root},e.size=function(){var t=0;return this.visit((function(e){if(!e.length)for(;++t,e=e.next;);})),t},e.visit=function(t){var e,n,r,i,o,a,s,u=[],c=this._root;for(c&&u.push(new nt(c,this._x0,this._y0,this._x1,this._y1));o=u.pop();)!t(c=o.node,n=o.x0,r=o.y0,i=o.x1,o=o.y1)&&c.length&&(a=(n+i)/2,s=(r+o)/2,(e=c[3])&&u.push(new nt(e,a,s,i,o)),(e=c[2])&&u.push(new nt(e,n,s,a,o)),(e=c[1])&&u.push(new nt(e,a,r,i,s)),e=c[0])&&u.push(new nt(e,n,r,a,s));return this},e.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new nt(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i,o,a,s,u,c,l,h=e.node;h.length&&(o=e.x0,a=e.y0,c=(o+(s=e.x1))/2,l=(a+(u=e.y1))/2,(i=h[0])&&n.push(new nt(i,o,a,c,l)),(i=h[1])&&n.push(new nt(i,c,a,s,l)),(i=h[2])&&n.push(new nt(i,o,l,c,u)),i=h[3])&&n.push(new nt(i,c,l,s,u)),r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},e.x=function(t){return arguments.length?(this._x=t,this):this._x},e.y=function(t){return arguments.length?(this._y=t,this):this._y},e=dt.prototype=pt.prototype,e.copy=function(){var t,e,n=new pt(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(r)if(r.length)for(t=[{source:r,target:n._root=new Array(8)}];r=t.pop();)for(var i=0;i<8;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(8)}):r.target[i]=gt(e));else n._root=gt(r);return n},e.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return ut(this.cover(e,n,r),e,n,r,t)},e.addAll=function(t){for(var e,n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i),u=1/0,c=1/0,l=1/0,h=-1/0,f=-1/0,d=-1/0,p=0;p<i;++p)isNaN(e=+this._x.call(null,r=t[p]))||isNaN(n=+this._y.call(null,r))||isNaN(r=+this._z.call(null,r))||((o[p]=e)<u&&(u=e),h<e&&(h=e),(a[p]=n)<c&&(c=n),f<n&&(f=n),(s[p]=r)<l&&(l=r),d<r&&(d=r));if(!(h<u||f<c||d<l))for(this.cover(u,c,l).cover(h,f,d),p=0;p<i;++p)ut(this,o[p],a[p],s[p],t[p]);return this},e.cover=function(t,e,n){if(!(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))){var r=this._x0,i=this._y0,o=this._z0,a=this._x1,s=this._y1,u=this._z1;if(isNaN(r))a=(r=Math.floor(t))+1,s=(i=Math.floor(e))+1,u=(o=Math.floor(n))+1;else{for(var c,l,h=a-r||1,f=this._root;t<r||a<=t||e<i||s<=e||n<o||u<=n;)switch(l=(n<o)<<2|(e<i)<<1|t<r,(c=new Array(8))[l]=f,f=c,h*=2,l){case 0:a=r+h,s=i+h,u=o+h;break;case 1:r=a-h,s=i+h,u=o+h;break;case 2:a=r+h,i=s-h,u=o+h;break;case 3:r=a-h,i=s-h,u=o+h;break;case 4:a=r+h,s=i+h,o=u-h;break;case 5:r=a-h,s=i+h,o=u-h;break;case 6:a=r+h,i=s-h,o=u-h;break;case 7:r=a-h,i=s-h,o=u-h}this._root&&this._root.length&&(this._root=f)}this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=u}return this},e.data=function(){var t=[];return this.visit((function(e){if(!e.length)for(;t.push(e.data),e=e.next;);})),t},e.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},e.find=function(t,e,n,r){var i,o,a,s,u,c,l,h,f,d,p,g=this._x0,m=this._y0,v=this._z0,y=this._x1,b=this._y1,x=this._z1,_=[],w=this._root;for(w&&_.push(new ct(w,g,m,v,y,b,x)),null==r?r=1/0:(g=t-r,m=e-r,v=n-r,y=t+r,b=e+r,x=n+r,r*=r);i=_.pop();)!(w=i.node)||(h=i.x0)>y||(f=i.y0)>b||(d=i.z0)>x||(l=i.x1)<g||(c=i.y1)<m||(o=i.z1)<v||(w.length?(_.push(new ct(w[7],a=(h+l)/2,s=(f+c)/2,u=(d+o)/2,l,c,o),new ct(w[6],h,s,u,a,c,o),new ct(w[5],a,f,u,l,s,o),new ct(w[4],h,f,u,a,s,o),new ct(w[3],a,s,d,l,c,u),new ct(w[2],h,s,d,a,c,u),new ct(w[1],a,f,d,l,s,u),new ct(w[0],h,f,d,a,s,u)),(o=(u<=n)<<2|(s<=e)<<1|a<=t)&&(i=_[_.length-1],_[_.length-1]=_[_.length-1-o],_[_.length-1-o]=i)):(f=(c=t-+this._x.call(null,w.data))*c+(l=e-+this._y.call(null,w.data))*l+(h=n-+this._z.call(null,w.data))*h)<r&&(g=t-(d=Math.sqrt(r=f)),m=e-d,v=n-d,y=t+d,b=e+d,x=n+d,p=w.data));return p},e.remove=function(t){if(!(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t))||isNaN(s=+this._z.call(null,t)))){var e,n,r,i,o,a,s,u,c,l,h,f,d,p=this._root,g=this._x0,m=this._y0,v=this._z0,y=this._x1,b=this._y1,x=this._z1;if(p){if(p.length)for(;;){if((c=o>=(u=(g+y)/2))?g=u:y=u,(l=a>=(u=(m+b)/2))?m=u:b=u,(h=s>=(u=(v+x)/2))?v=u:x=u,!(p=(e=p)[f=h<<2|l<<1|c]))return this;if(!p.length)break;(e[f+1&7]||e[f+2&7]||e[f+3&7]||e[f+4&7]||e[f+5&7]||e[f+6&7]||e[f+7&7])&&(n=e,d=f)}for(;p.data!==t;)if(!(p=(r=p).next))return this;(i=p.next)&&delete p.next,r?i?r.next=i:delete r.next:e?(i?e[f]=i:delete e[f],(p=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&p===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[d]=p:this._root=p)):this._root=i}}return this},e.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},e.root=function(){return this._root},e.size=function(){var t=0;return this.visit((function(e){if(!e.length)for(;++t,e=e.next;);})),t},e.visit=function(t){var e,n,r,i,o,a,s,u,c,l,h=[],f=this._root;for(f&&h.push(new ct(f,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));s=h.pop();)!t(f=s.node,n=s.x0,r=s.y0,i=s.z0,o=s.x1,a=s.y1,s=s.z1)&&f.length&&(u=(n+o)/2,c=(r+a)/2,l=(i+s)/2,(e=f[7])&&h.push(new ct(e,u,c,l,o,a,s)),(e=f[6])&&h.push(new ct(e,n,c,l,u,a,s)),(e=f[5])&&h.push(new ct(e,u,r,l,o,c,s)),(e=f[4])&&h.push(new ct(e,n,r,l,u,c,s)),(e=f[3])&&h.push(new ct(e,u,c,i,o,a,l)),(e=f[2])&&h.push(new ct(e,n,c,i,u,a,l)),(e=f[1])&&h.push(new ct(e,u,r,i,o,c,l)),e=f[0])&&h.push(new ct(e,n,r,i,u,c,l));return this},e.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new ct(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=n.pop();){var i,o,a,s,u,c,l,h,f,d,p=e.node;p.length&&(o=e.x0,a=e.y0,s=e.z0,h=(o+(u=e.x1))/2,f=(a+(c=e.y1))/2,d=(s+(l=e.z1))/2,(i=p[0])&&n.push(new ct(i,o,a,s,h,f,d)),(i=p[1])&&n.push(new ct(i,h,a,s,u,f,d)),(i=p[2])&&n.push(new ct(i,o,f,s,h,c,d)),(i=p[3])&&n.push(new ct(i,h,f,s,u,c,d)),(i=p[4])&&n.push(new ct(i,o,a,d,h,f,l)),(i=p[5])&&n.push(new ct(i,h,a,d,u,f,l)),(i=p[6])&&n.push(new ct(i,o,f,d,h,c,l)),i=p[7])&&n.push(new ct(i,h,f,d,u,c,l)),r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.z0,e.x1,e.y1,e.z1);return this},e.x=function(t){return arguments.length?(this._x=t,this):this._x},e.y=function(t){return arguments.length?(this._y=t,this):this._y},e.z=function(t){return arguments.length?(this._z=t,this):this._z};e=n(54736),e=n.n(e);var mt=n(16505),vt=(mt=n.n(mt),n(20296)),yt=n.n(vt);function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xt(t,e,n){return e&&bt(t.prototype,e),n&&bt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){var n;if(t)return"string"==typeof t?wt(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var St=xt((function t(e,n){var r=n.default,i=(r=void 0===r?null:r,n.triggerUpdate);i=void 0===i||i,n=n.onChange,n=void 0===n?function(t,e){}:n;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.name=e,this.defaultVal=r,this.triggerUpdate=i,this.onChange=n}));function Et(t){var e=t.stateInit,n=void 0===e?function(){return{}}:e,r=(e=t.props,void 0===e?{}:e),i=(e=t.methods,void 0===e?{}:e),o=(e=t.aliases,void 0===e?{}:e),a=(e=t.init,void 0===e?function(){}:e),s=(e=t.update,void 0===e?function(){}:e),u=Object.keys(r).map((function(t){return new St(t,r[t])}));return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},n instanceof Function?n(t):n,{initialised:!1}),r={};function c(e){return l(e,t),h(),c}var l=function(t,n){a.call(c,t,e,n),e.initialised=!0},h=yt()((function(){e.initialised&&(s.call(c,e,r),r={})}),1);return u.forEach((function(t){var n,i,o,a,s;c[t.name]=(n=t.name,i=t.triggerUpdate,o=void 0!==i&&i,i=t.onChange,a=void 0===i?function(t,e){}:i,i=t.defaultVal,s=void 0===i?null:i,function(t){var i=e[n];return arguments.length?(e[n]=t=void 0===t?s:t,a.call(c,t,e,i),r.hasOwnProperty(n)||(r[n]=i),o&&h(),c):i})})),Object.keys(i).forEach((function(t){c[t]=function(){for(var n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=i[t]).call.apply(n,[c,e].concat(o))}})),Object.entries(o).forEach((function(t){t=_t(t,2);var e=t[0];t=t[1];return c[e]=c[t]})),c.resetProps=function(){return u.forEach((function(t){c[t.name](t.defaultVal)})),c},c.resetProps(),e._rerender=h,c}}var Mt=function(t){return t instanceof Function?t:"string"==typeof t?function(e){return e[t]}:function(e){return t}};function At(t,e){if(null==t)return{};var n,r=function(t,e){if(null==t)return{};for(var n,r={},i=Object.keys(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n]);return r}function Ct(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||kt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(t){return function(t){if(Array.isArray(t))return Ot(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||kt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(t,e){var n;if(t)return"string"==typeof t?Ot(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ot(t,e):void 0}function Ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pt(t){return t=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=typeof(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"==typeof t?t:String(t)}function It(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=(e instanceof Array?e.length?e:[void 0]:[e]).map((function(t){return{keyAccessor:t,isProp:!(t instanceof Function)}})),o=(t=t.reduce((function(t,e){var r=t,o=e;return i.forEach((function(t,e){var a,s=t.keyAccessor;t.isProp?(a=(t=o)[s],t=At(t,[s].map(Pt)),o=t):a=s(o,e),e+1<i.length?(r.hasOwnProperty(a)||(r[a]={}),r=r[a]):n?(r.hasOwnProperty(a)||(r[a]=[]),r[a].push(o)):r[a]=o})),t}),{}),n instanceof Function&&function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;r===i.length?Object.keys(e).forEach((function(t){return e[t]=n(e[t])})):Object.values(e).forEach((function(e){return t(e,r+1)}))}(t),t);return r&&(o=[],function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];n.length===i.length?o.push({keys:n,vals:e}):Object.entries(e).forEach((function(e){e=Ct(e,2);var r=e[0];e=e[1];return t(e,[].concat(Tt(n),[r]))}))}(t),e instanceof Array)&&0===e.length&&1===o.length&&(o[0].keys=[]),o}function Nt(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function Dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lt(t,e){if(null==t)return{};var n,r=function(t,e){if(null==t)return{};for(var n,r={},i=Object.keys(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n]);return r}function Rt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||jt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(t){return function(t){if(Array.isArray(t))return Ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||jt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(t,e){var n;if(t)return"string"==typeof t?Ft(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(t,e):void 0}function Ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var zt=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"];function Ut(t,e,n){function r(t){return t.hasOwnProperty(h)}var i,o,a,s,u,c=n.objBindAttr,l=void 0===c?"__obj":c,h=(c=n.dataBindAttr,void 0===c?"__data":c),f=(c=n.idAccessor,n=n.purge,n=void 0!==n&&n,e.filter((function(t){return!r(t)})));e=e.filter(r).map((function(t){return t[h]})),c=n?{enter:t,exit:e,update:[]}:(n=e,e=t,u={enter:[],update:[],exit:[]},(t=c)?(i=It(n,t,!1),o=It(e,t,!1),t=Object.assign({},i,o),Object.entries(t).forEach((function(t){t=Rt(t,2);var e=t[0],n=(t=t[1],i.hasOwnProperty(e)?o.hasOwnProperty(e)?"update":"exit":"enter");u[n].push("update"==n?[i[e],o[e]]:t)}))):(a=new Set(n),s=new Set(e),new Set([].concat(Bt(a),Bt(s))).forEach((function(t){var e=a.has(t)?s.has(t)?"update":"exit":"enter";u[e].push("update"==e?[t,t]:t)}))),u);return c.update=c.update.map((function(t){t=Rt(t,2);var e=t[0];t=t[1];return e!==t&&(t[l]=e[l],t[l][h]=t),t})),c.exit=c.exit.concat(f.map((function(t){return Dt({},l,t)}))),c}function Gt(t,e,n,r,i){var o,a=i.createObj,s=void 0===a?function(t){return{}}:a,u=(a=i.updateObj,void 0===a?function(t,e){}:a),c=(a=i.exitObj,void 0===a?function(t){}:a),l=(a=i.objBindAttr,void 0===a?"__obj":a),h=(a=i.dataBindAttr,void 0===a?"__data":a);a=Lt(i,zt),i=Ut(t,e,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(n),!0).forEach((function(e){Dt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({objBindAttr:l,dataBindAttr:h},a)),t=i.enter,e=i.update,i.exit.forEach((function(t){var e=t[l];delete t[l],c(e),r(e)})),o=[],t.forEach((function(t){var e=s(t);e&&((e[h]=t)[l]=e,o.push(e))})),a=o;[].concat(Bt(t),Bt(e)).forEach((function(t){var e=t[l];e&&(e[h]=t,u(e,t))})),a.forEach(n)}class Vt extends Map{constructor(t,e=qt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(Wt(this,t))}has(t){return super.has(Wt(this,t))}set(t,e){return super.set(Ht(this,t),e)}delete(t){return super.delete(Yt(this,t))}}function Wt({_intern:t,_key:e},n){return e=e(n),t.has(e)?t.get(e):n}function Ht({_intern:t,_key:e},n){return e=e(n),t.has(e)?t.get(e):(t.set(e,n),n)}function Yt({_intern:t,_key:e},n){return e=e(n),t.has(e)&&(n=t.get(n),t.delete(e)),n}function qt(t){return null!==t&&"object"==typeof t?t.valueOf():t}Set;const Xt=Symbol("implicit");vt=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");var Kt=n(17621),Zt=n.n(Kt);function $t(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function Jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$t(Object(n),!0).forEach((function(e){ee(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qt(t){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ee(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function re(t,e){return(re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ie(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function oe(t,e,n){return(oe=ie()?Reflect.construct.bind():function(t,e,n){var r=[null];return r.push.apply(r,e),e=new(Function.bind.apply(t,r)),n&&re(e,n.prototype),e}).apply(null,arguments)}function ae(t,e){if(null==t)return{};var n,r=function(t,e){if(null==t)return{};for(var n,r={},i=Object.keys(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n]);return r}function se(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ue(t){var e=ie();return function(){var n,r=ne(t);n=e?(n=ne(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return se(r)}}function ce(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||he(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(t){return function(t){if(Array.isArray(t))return fe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||he(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(t,e){var n;if(t)return"string"==typeof t?fe(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(t,e):void 0}function fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function de(t){t instanceof Array?t.forEach(de):(t.map&&t.map.dispose(),t.dispose())}function pe(t){for(;t.children.length;){var e=t.children[0];t.remove(e),ge(e)}}var ge=function t(e){e.geometry&&e.geometry.dispose(),e.material&&de(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(t)},me=["objFilter"];function ve(t,e,n){n=2<arguments.length&&void 0!==n?n:{};var r=n.objFilter;r=void 0===r?function(){return!0}:r,n=ae(n,me);Gt(t,e.children.filter(r),(function(t){return e.add(t)}),(function(t){e.remove(t),pe(t)}),Jt({objBindAttr:"__threeObj"},n))}function ye(t){return isNaN(t)?parseInt(Zt()(t).toHex(),16):t}function be(t){return isNaN(t)?Zt()(t).getAlpha():1}var xe=function t(){var e=new Vt,n=[],r=[],i=Xt;function o(t){let o=e.get(t);if(void 0===o){if(i!==Xt)return i;e.set(t,o=n.push(t)-1)}return r[o%r.length]}return o.domain=function(t){if(!arguments.length)return n.slice();n=[],e=new Vt;for(const r of t)e.has(r)||e.set(r,n.push(r)-1);return o},o.range=function(t){return arguments.length?(r=Array.from(t),o):r.slice()},o.unknown=function(t){return arguments.length?(i=t,o):i},o.copy=function(){return t(n,r).unknown(i)},function(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}.apply(o,arguments),o}(vt);function _e(t,e,n){e&&"string"==typeof n&&t.filter((function(t){return!t[n]})).forEach((function(t){t[n]=xe(e(t))}))}function we(t,e,n){var r=t.nodes,i=(t=t.links,n=2<arguments.length&&void 0!==n?n:{},n.nodeFilter),o=void 0===i?function(){return!0}:i,a=(i=n.onLoopError,void 0===i?function(t){throw"Invalid DAG structure! Found cycle in node path: ".concat(t.join(" -> "),".")}:i),s={},u=(r.forEach((function(t){return s[e(t)]={data:t,out:[],depth:-1,skip:!o(t)}})),t.forEach((function(t){var n=t.source;t=t.target,n=r(n),t=r(t);if(!s.hasOwnProperty(n))throw"Missing source node with id: ".concat(n);if(!s.hasOwnProperty(t))throw"Missing target node with id: ".concat(t);function r(t){return"object"===Qt(t)?e(t):t}s[n].out.push(s[t])})),[]);return function t(n){for(var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=0,s=n.length;o<s;o++){var c=n[o];if(-1!==r.indexOf(c)){var l=function(){var t=[].concat(le(r.slice(r.indexOf(c))),[c]).map((function(t){return e(t.data)}));return u.some((function(e){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}))||(u.push(t),a(t)),"continue"}();if("continue"===l)continue}i>c.depth&&(c.depth=i,t(c.out,[].concat(le(r),[c]),i+(c.skip?0:1)))}}(Object.values(s)),Object.assign.apply(Object,[{}].concat(le(Object.entries(s).filter((function(t){return!ce(t,2)[1].skip})).map((function(t){return t=ce(t,2),ee({},t[0],t[1].depth)})))))}var Se=window.THREE||{Group:r.ZAu,Mesh:r.Kj0,MeshLambertMaterial:r.YBo,Color:r.Ilk,BufferGeometry:r.u9r,BufferAttribute:r.TlE,Matrix4:r.yGw,Vector3:r.Pa4,SphereBufferGeometry:r.Aip,CylinderBufferGeometry:r.m_w,TubeBufferGeometry:r.Lcc,ConeBufferGeometry:r._3,Line:r.x12,LineBasicMaterial:r.nls,QuadraticBezierCurve3:r.mXe,CubicBezierCurve3:r.yj7,Box3:r.ZzF},Ee={graph:e(),forcelayout:mt()},Me=(new Se.BufferGeometry).setAttribute?"setAttribute":"addAttribute",Ae=(new Se.BufferGeometry).applyMatrix4?"applyMatrix4":"applyMatrix",Ce=function(t,e,n){var r=1<arguments.length&&void 0!==e?e:Object,i=2<arguments.length&&void 0!==n&&n,o=function(){var e=u,n=r;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&re(e,n);var o,a,s=ue(u);function u(){var e=this,n=u;if(!(e instanceof n))throw new TypeError("Cannot call a class as a function");for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=s.call.apply(s,[this].concat(o))).__kapsuleInstance=t().apply(void 0,[].concat(le(i?[se(e)]:[]),o)),e}return e=u,o&&te(e.prototype,o),a&&te(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}();return Object.keys(t()).forEach((function(t){return o.prototype[t]=function(){var e=(e=this.__kapsuleInstance)[t].apply(e,arguments);return e===this.__kapsuleInstance?this:e}})),o}(Et({props:{jsonUrl:{onChange:function(t,e){var n=this;t&&!e.fetchingJson&&(e.fetchingJson=!0,e.onLoading(),fetch(t).then((function(t){return t.json()})).then((function(t){e.fetchingJson=!1,e.onFinishLoading(t),n.graphData(t)})))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(t,e){e.engineRunning=!1}},numDimensions:{default:3,onChange:function(t,e){var n=e.d3ForceLayout.force("charge");function r(t,e){t.forEach((function(t){delete t[e],delete t["v".concat(e)]}))}n&&n.strength(2<t?-60:-30),t<3&&r(e.graphData.nodes,"z"),t<2&&r(e.graphData.nodes,"y")}},dagMode:{onChange:function(t,e){t||"d3"!==e.forceEngine||(e.graphData.nodes||[]).forEach((function(t){return t.fx=t.fy=t.fz=void 0}))}},dagLevelDistance:{},dagNodeFilter:{default:function(t){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaDecay(t)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaTarget(t)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.velocityDecay(t)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(t){return t._flushObjects=!0,t._rerender(),this},d3Force:function(t,e,n){return void 0===n?t.d3ForceLayout.force(e):(t.d3ForceLayout.force(e,n),this)},d3ReheatSimulation:function(t){return t.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(t){return t.cntTicks=0,t.startTickTime=new Date,t.engineRunning=!0,this},tickFrame:function(t){var e,n,r,i,o,a,s,u,c="ngraph"!==t.forceEngine;return t.engineRunning&&(++t.cntTicks>t.cooldownTicks||new Date-t.startTickTime>t.cooldownTime||c&&0<t.d3AlphaMin&&t.d3ForceLayout.alpha()<t.d3AlphaMin?(t.engineRunning=!1,t.onEngineStop()):(t.layout[c?"tick":"step"](),t.onEngineTick()),t.graphData.nodes.forEach((function(e){var n=e.__threeObj;n&&(e=c?e:t.layout.getNodePosition(e[t.nodeId]),n.position.x=e.x,n.position.y=e.y||0,n.position.z=e.z||0)})),e=Mt(t.linkWidth),n=Mt(t.linkCurvature),r=Mt(t.linkCurveRotation),i=Mt(t.linkThreeObjectExtend),t.graphData.links.forEach((function(o){var a,s,u,l,h,f,d,p,g,m,v=o.__lineObj;v&&(a=(s=c?o:t.layout.getLinkPosition(t.layout.graph.getLink(o.source,o.target).id))[c?"source":"from"],s=s[c?"target":"to"],a)&&s&&a.hasOwnProperty("x")&&s.hasOwnProperty("x")&&(g=o,m=(h=c?g:t.layout.getLinkPosition(t.layout.graph.getLink(g.source,g.target).id))[c?"source":"from"],h=h[c?"target":"to"],m&&h&&m.hasOwnProperty("x")&&h.hasOwnProperty("x")&&((p=n(g))?(f=new Se.Vector3(m.x,m.y||0,m.z||0),d=new Se.Vector3(h.x,h.y||0,h.z||0),l=f.distanceTo(d),u=r(g),p=0<l?(l=h.x-m.x,h=h.y-m.y||0,l=(m=(new Se.Vector3).subVectors(d,f)).clone().multiplyScalar(p).cross(0!=l||0!==h?new Se.Vector3(0,0,1):new Se.Vector3(0,1,0)).applyAxisAngle(m.normalize(),u).add((new Se.Vector3).addVectors(f,d).divideScalar(2)),new Se.QuadraticBezierCurve3(f,l,d)):(h=70*p,l=(m=-u)+Math.PI/2,new Se.CubicBezierCurve3(f,new Se.Vector3(h*Math.cos(l),h*Math.sin(l),0).add(f),new Se.Vector3(h*Math.cos(m),h*Math.sin(m),0).add(f),d)),g.__curve=p):g.__curve=null),u=i(o),t.linkPositionUpdate&&t.linkPositionUpdate(u?v.children[1]:v,{start:{x:a.x,y:a.y,z:a.z},end:{x:s.x,y:s.y,z:s.z}},o)&&!u||(l=o.__curve,"Line"===(h=v.children.length?v.children[0]:v).type?(l?h.geometry.setFromPoints(l.getPoints(30)):((m=h.geometry.getAttribute("position"))&&m.array&&6===m.array.length||h.geometry[Me]("position",m=new Se.BufferAttribute(new Float32Array(6),3)),m.array[0]=a.x,m.array[1]=a.y||0,m.array[2]=a.z||0,m.array[3]=s.x,m.array[4]=s.y||0,m.array[5]=s.z||0,m.needsUpdate=!0),h.geometry.computeBoundingSphere()):"Mesh"===h.type&&(l?(h.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(h.position.set(0,0,0),h.rotation.set(0,0,0),h.scale.set(1,1,1)),f=Math.ceil(10*e(o))/10,d=new Se.TubeBufferGeometry(l,30,f/2,t.linkResolution,!1),h.geometry.dispose(),h.geometry=d):(h.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||(p=Math.ceil(10*e(o))/10/2,(g=new Se.CylinderBufferGeometry(p,p,1,t.linkResolution,1,!1))[Ae]((new Se.Matrix4).makeTranslation(0,.5,0)),g[Ae]((new Se.Matrix4).makeRotationX(Math.PI/2)),h.geometry.dispose(),h.geometry=g),v=new Se.Vector3(a.x,a.y||0,a.z||0),m=new Se.Vector3(s.x,s.y||0,s.z||0),o=v.distanceTo(m),h.position.x=v.x,h.position.y=v.y,h.position.z=v.z,h.scale.z=o,h.parent.localToWorld(m),h.lookAt(m)))))}))),o=Mt(t.linkDirectionalArrowRelPos),a=Mt(t.linkDirectionalArrowLength),s=Mt(t.nodeVal),t.graphData.links.forEach((function(e){var n,r,i,u,l,h,f,d,p,g,m=e.__arrowObj;m&&(f=c?e:t.layout.getLinkPosition(t.layout.graph.getLink(e.source,e.target).id),n=f[c?"source":"from"],r=f[c?"target":"to"],n)&&r&&n.hasOwnProperty("x")&&r.hasOwnProperty("x")&&(f=Math.sqrt(Math.max(0,s(n)||1))*t.nodeRelSize,g=Math.sqrt(Math.max(0,s(r)||1))*t.nodeRelSize,i=a(e),u=o(e),l=e.__curve?function(t){return e.__curve.getPoint(t)}:function(t){function e(t,e,n,r){return e[t]+(n[t]-e[t])*r||0}return{x:e("x",n,r,t),y:e("y",n,r,t),z:e("z",n,r,t)}},h=e.__curve?e.__curve.getLength():Math.sqrt(["x","y","z"].map((function(t){return Math.pow((r[t]||0)-(n[t]||0),2)})).reduce((function(t,e){return t+e}),0)),d=l((f=f+i+(h-f-g-i)*u)/h),p=l((f-i)/h),["x","y","z"].forEach((function(t){return m.position[t]=p[t]})),g=oe(Se.Vector3,le(["x","y","z"].map((function(t){return d[t]})))),m.parent.localToWorld(g),m.lookAt(g))})),u=Mt(t.linkDirectionalParticleSpeed),t.graphData.links.forEach((function(e){var n,r,i,o,a,s=e.__photonsObj&&e.__photonsObj.children,l=e.__singleHopPhotonsObj&&e.__singleHopPhotonsObj.children;(l&&l.length||s&&s.length)&&(n=c?e:t.layout.getLinkPosition(t.layout.graph.getLink(e.source,e.target).id),r=n[c?"source":"from"],i=n[c?"target":"to"],r)&&i&&r.hasOwnProperty("x")&&i.hasOwnProperty("x")&&(o=u(e),a=e.__curve?function(t){return e.__curve.getPoint(t)}:function(t){function e(t,e,n,r){return e[t]+(n[t]-e[t])*r||0}return{x:e("x",r,i,t),y:e("y",r,i,t),z:e("z",r,i,t)}},[].concat(le(s||[]),le(l||[])).forEach((function(t,e){var n="singleHopPhotons"===t.parent.__linkThreeObjType;if(t.hasOwnProperty("__progressRatio")||(t.__progressRatio=n?0:e/s.length),t.__progressRatio+=o,1<=t.__progressRatio){if(n)return t.parent.remove(t),void pe(t);t.__progressRatio=t.__progressRatio%1}e=t.__progressRatio;var r=a(e);["x","y","z"].forEach((function(e){return t.position[e]=r[e]}))})))})),this},emitParticle:function(t,e){var n,r;return e&&(e.__singleHopPhotonsObj||((n=new Se.Group).__linkThreeObjType="singleHopPhotons",e.__singleHopPhotonsObj=n,t.graphScene.add(n)),n=Mt(t.linkDirectionalParticleWidth),n=Math.ceil(10*n(e))/10/2,r=t.linkDirectionalParticleResolution,n=new Se.SphereBufferGeometry(n,r,r),r=Mt(t.linkColor),r=Mt(t.linkDirectionalParticleColor)(e)||r(e)||"#f0f0f0",r=new Se.Color(ye(r)),t=3*t.linkOpacity,r=new Se.MeshLambertMaterial({color:r,transparent:!0,opacity:t}),e.__singleHopPhotonsObj.add(new Se.Mesh(n,r))),this},getGraphBbox:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0};return t.initialised&&(e=function t(e){var r,i=[];return e.geometry&&(e.geometry.computeBoundingBox(),(r=new Se.Box3).copy(e.geometry.boundingBox).applyMatrix4(e.matrixWorld),i.push(r)),i.concat.apply(i,le((e.children||[]).filter((function(t){return!t.hasOwnProperty("__graphObjType")||"node"===t.__graphObjType&&n(t.__data)})).map(t)))}(t.graphScene)).length?Object.assign.apply(Object,le(["x","y","z"].map((function(t){return ee({},t,[function(t,e){let n;if(void 0===e)for(const i of t)null!=i&&(n>i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(var r of t)null!=(r=e(r,++i,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}(e,(function(e){return e.min[t]})),function(t,e){let n;if(void 0===e)for(const i of t)null!=i&&(n<i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(var r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}(e,(function(e){return e.max[t]}))])})))):null}},stateInit:function(){return{d3ForceLayout:V().force("link",X()).force("charge",(f=W(-30),p=(d=1)/0,g=.81,m.initialize=function(t,...e){a=t,c=e.find((t=>"function"==typeof t))||Math.random,s=e.find((t=>[1,2,3].includes(t)))||2,v()},m.strength=function(t){return arguments.length?(f="function"==typeof t?t:W(+t),v(),m):f},m.distanceMin=function(t){return arguments.length?(d=t*t,m):Math.sqrt(d)},m.distanceMax=function(t){return arguments.length?(p=t*t,m):Math.sqrt(p)},m.theta=function(t){return arguments.length?(g=t*t,m):Math.sqrt(g)},m)).force("center",(o=1,null==e&&(e=0),null==n&&(n=0),null==r&&(r=0),t.initialize=function(t){i=t},t.x=function(n){return arguments.length?(e=+n,t):e},t.y=function(e){return arguments.length?(n=+e,t):n},t.z=function(e){return arguments.length?(r=+e,t):r},t.strength=function(e){return arguments.length?(o=+e,t):o},t)).force("dagRadial",null).stop(),engineRunning:!1};function t(){for(var t,a=i.length,s=0,u=0,c=0,l=0;l<a;++l)s+=(t=i[l]).x||0,u+=t.y||0,c+=t.z||0;for(s=(s/a-e)*o,u=(u/a-n)*o,c=(c/a-r)*o,l=0;l<a;++l)t=i[l],s&&(t.x-=s),u&&(t.y-=u),c&&(t.z-=c)}var e,n,r,i,o,a,s,u,c,l,h,f,d,p,g;function m(t){var e,n=a.length,r=(1===s?J(a,j):2===s?ot(a,j,F):3===s?dt(a,j,F,z):null).visitAfter(y);for(l=t,e=0;e<n;++e)u=a[e],r.visit(b)}function v(){if(a){var t,e,n=a.length;for(h=new Array(n),t=0;t<n;++t)e=a[t],h[e.index]=+f(e,t,a)}}function y(t){var e,n,r,i,o,a,u=0,c=0,l=t.length;if(l){for(r=i=o=a=0;a<l;++a)(e=t[a])&&(n=Math.abs(e.value))&&(u+=e.value,c+=n,r+=n*(e.x||0),i+=n*(e.y||0),o+=n*(e.z||0));u*=Math.sqrt(4/l),t.x=r/c,1<s&&(t.y=i/c),2<s&&(t.z=o/c)}else for((e=t).x=e.data.x,1<s&&(e.y=e.data.y),2<s&&(e.z=e.data.z);u+=h[e.data.index],e=e.next;);t.value=u}function b(t,e,n,r,i){if(!t.value)return!0;n=[n,r,i][s-1];var o=t.x-u.x,a=1<s?t.y-u.y:0,f=2<s?t.z-u.z:0,m=n-e,v=o*o+a*a+f*f;if(m*m/g<v)return v<p&&(0===o&&(v+=(o=H(c))*o),1<s&&0===a&&(v+=(a=H(c))*a),2<s&&0===f&&(v+=(f=H(c))*f),v<d&&(v=Math.sqrt(d*v)),u.vx+=o*t.value*l/v,1<s&&(u.vy+=a*t.value*l/v),2<s)&&(u.vz+=f*t.value*l/v),!0;if(!(t.length||p<=v))for((t.data!==u||t.next)&&(0===o&&(v+=(o=H(c))*o),1<s&&0===a&&(v+=(a=H(c))*a),2<s&&0===f&&(v+=(f=H(c))*f),v<d)&&(v=Math.sqrt(d*v));t.data!==u&&(m=h[t.data.index]*l/v,u.vx+=o*m,1<s&&(u.vy+=a*m),2<s)&&(u.vz+=f*m),t=t.next;);}},init:function(t,e){e.graphScene=t},update:function(t,e){function n(t){return t.some((function(t){return e.hasOwnProperty(t)}))}var r,i,o,a,s,u,c,l,h,f,d,p,g,m,v,y,b,x,_,w,S,E,M,A,C,T,k,O,P,I;if(t.engineRunning=!1,t.onUpdate(),null!==t.nodeAutoColorBy&&n(["nodeAutoColorBy","graphData","nodeColor"])&&_e(t.graphData.nodes,Mt(t.nodeAutoColorBy),t.nodeColor),null!==t.linkAutoColorBy&&n(["linkAutoColorBy","graphData","linkColor"])&&_e(t.graphData.links,Mt(t.linkAutoColorBy),t.linkColor),(t._flushObjects||n(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"]))&&(r=Mt(t.nodeThreeObject),i=Mt(t.nodeThreeObjectExtend),o=Mt(t.nodeVal),a=Mt(t.nodeColor),B=Mt(t.nodeVisibility),s={},u={},ve(t.graphData.nodes.filter(B),t.graphScene,{purge:t._flushObjects||n(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(t){return"node"===t.__graphObjType},createObj:function(e){var n,o=r(e);e=i(e);return(o=o&&t.nodeThreeObject===o?o.clone():o)&&!e?n=o:((n=new Se.Mesh).__graphDefaultObj=!0,o&&e&&n.add(o)),n.__graphObjType="node",n},updateObj:function(e,n){var r,i,c;e.__graphDefaultObj&&(c=o(n)||1,r=Math.cbrt(c)*t.nodeRelSize,i=t.nodeResolution,e.geometry.type.match(/^Sphere(Buffer)?Geometry$/)&&e.geometry.parameters.radius===r&&e.geometry.parameters.widthSegments===i||(s.hasOwnProperty(c)||(s[c]=new Se.SphereBufferGeometry(r,i,i)),e.geometry.dispose(),e.geometry=s[c]),r=a(n),i=new Se.Color(ye(r||"#ffffaa")),c=t.nodeOpacity*be(r),"MeshLambertMaterial"===e.material.type&&e.material.color.equals(i)&&e.material.opacity===c||(u.hasOwnProperty(r)||(u[r]=new Se.MeshLambertMaterial({color:i,transparent:!0,opacity:c})),e.material.dispose(),e.material=u[r]))}})),(t._flushObjects||n(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"]))&&(c=Mt(t.linkThreeObject),l=Mt(t.linkThreeObjectExtend),h=Mt(t.linkMaterial),B=Mt(t.linkVisibility),f=Mt(t.linkColor),d=Mt(t.linkWidth),p={},g={},m={},ve(B=t.graphData.links.filter(B),t.graphScene,{objBindAttr:"__lineObj",purge:t._flushObjects||n(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(t){return"link"===t.__graphObjType},createObj:function(e){var n,r,i=c(e),o=l(e);return(i=i&&t.linkThreeObject===i?i.clone():i)&&!o||(n=d(e)?new Se.Mesh:((e=new Se.BufferGeometry)[Me]("position",new Se.BufferAttribute(new Float32Array(6),3)),new Se.Line(e))),i?o?((r=new Se.Group).__graphDefaultObj=!0,r.add(n),r.add(i)):r=i:(r=n).__graphDefaultObj=!0,r.renderOrder=10,r.__graphObjType="link",r},updateObj:function(e,n){var r,i,o,a;e.__graphDefaultObj&&(e=e.children.length?e.children[0]:e,(a=!!(i=Math.ceil(10*d(n))/10))&&(r=i/2,o=t.linkResolution,e.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)&&e.geometry.parameters.radiusTop===r&&e.geometry.parameters.radialSegments===o||(p.hasOwnProperty(i)||((r=new Se.CylinderBufferGeometry(r,r,1,o,1,!1))[Ae]((new Se.Matrix4).makeTranslation(0,.5,0)),r[Ae]((new Se.Matrix4).makeRotationX(Math.PI/2)),p[i]=r),e.geometry.dispose(),e.geometry=p[i])),(o=h(n))?e.material=o:(r=f(n),i=new Se.Color(ye(r||"#f0f0f0")),o=t.linkOpacity*be(r),e.material.type===(n=a?"MeshLambertMaterial":"LineBasicMaterial")&&e.material.color.equals(i)&&e.material.opacity===o||((a=a?g:m).hasOwnProperty(r)||(a[r]=new Se[n]({color:i,transparent:o<1,opacity:o,depthWrite:1<=o})),e.material.dispose(),e.material=a[r])))}}),(t.linkDirectionalArrowLength||e.hasOwnProperty("linkDirectionalArrowLength"))&&(v=Mt(t.linkDirectionalArrowLength),y=Mt(t.linkDirectionalArrowColor),ve(B.filter(v),t.graphScene,{objBindAttr:"__arrowObj",objFilter:function(t){return"arrow"===t.__linkThreeObjType},createObj:function(){var t=new Se.Mesh(void 0,new Se.MeshLambertMaterial({transparent:!0}));return t.__linkThreeObjType="arrow",t},updateObj:function(e,n){var r=v(n),i=t.linkDirectionalArrowResolution;e.geometry.type.match(/^Cone(Buffer)?Geometry$/)&&e.geometry.parameters.height===r&&e.geometry.parameters.radialSegments===i||((i=new Se.ConeBufferGeometry(.25*r,r,i)).translate(0,r/2,0),i.rotateX(Math.PI/2),e.geometry.dispose(),e.geometry=i),e.material.color=new Se.Color(y(n)||f(n)||"#f0f0f0"),e.material.opacity=3*t.linkOpacity}})),t.linkDirectionalParticles||e.hasOwnProperty("linkDirectionalParticles"))&&(b=Mt(t.linkDirectionalParticles),x=Mt(t.linkDirectionalParticleWidth),_=Mt(t.linkDirectionalParticleColor),w={},S={},ve(B.filter(b),t.graphScene,{objBindAttr:"__photonsObj",objFilter:function(t){return"photons"===t.__linkThreeObjType},createObj:function(){var t=new Se.Group;return t.__linkThreeObjType="photons",t},updateObj:function(e,n){var r,i,o=Math.round(Math.abs(b(n))),a=!!e.children.length&&e.children[0],s=Math.ceil(10*x(n))/10/2,u=t.linkDirectionalParticleResolution;a&&a.geometry.parameters.radius===s&&a.geometry.parameters.widthSegments===u?r=a.geometry:(S.hasOwnProperty(s)||(S[s]=new Se.SphereBufferGeometry(s,u,u)),r=S[s],a&&a.geometry.dispose()),u=_(n)||f(n)||"#f0f0f0",s=new Se.Color(ye(u)),n=3*t.linkOpacity;a&&a.material.color.equals(s)&&a.material.opacity===n?i=a.material:(w.hasOwnProperty(u)||(w[u]=new Se.MeshLambertMaterial({color:s,transparent:!0,opacity:n})),i=w[u],a&&a.material.dispose()),ve(le(new Array(o)).map((function(t,e){return{idx:e}})),e,{idAccessor:function(t){return t.idx},createObj:function(){return new Se.Mesh(r,i)},updateObj:function(t){t.geometry=r,t.material=i}})}})),t._flushObjects=!1,n(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){t.engineRunning=!1,t.graphData.links.forEach((function(e){e.source=e[t.linkSource],e.target=e[t.linkTarget]}));var N,D,L,R,B,j,F,z,U,G="ngraph"!==t.forceEngine;G?((N=t.d3ForceLayout).stop().alpha(1).numDimensions(t.numDimensions).nodes(t.graphData.nodes),(B=t.d3ForceLayout.force("link"))&&B.id((function(e){return e[t.nodeId]})).links(t.graphData.links),D=t.dagMode&&we(t.graphData,(function(e){return e[t.nodeId]}),{nodeFilter:t.dagNodeFilter,onLoopError:t.onDagError||void 0}),L=Math.max.apply(Math,le(Object.values(D||[]))),R=t.dagLevelDistance||t.graphData.nodes.length/(L||1)*2*(-1!==["radialin","radialout"].indexOf(t.dagMode)?.7:1),t.dagMode&&(j=(B=function(e,n){return function(r){return e?(D[r[t.nodeId]]-L/2)*R*(n?-1:1):void 0}})(-1!==["lr","rl"].indexOf(t.dagMode),"rl"===t.dagMode),F=B(-1!==["td","bu"].indexOf(t.dagMode),"td"===t.dagMode),z=B(-1!==["zin","zout"].indexOf(t.dagMode),"zout"===t.dagMode),t.graphData.nodes.filter(t.dagNodeFilter).forEach((function(t){t.fx=j(t),t.fy=F(t),t.fz=z(t)}))),t.d3ForceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(t.dagMode)?(I=W(.1),"function"!=typeof(E=function(e){return e=D[e[t.nodeId]]||-1,("radialin"===t.dagMode?L-e:e)*R})&&(E=W(+E)),null==M&&(M=0),null==A&&(A=0),null==C&&(C=0),H.initialize=function(t,...e){T=t,k=e.find((t=>[1,2,3].includes(t)))||2,Y()},H.strength=function(t){return arguments.length?(I="function"==typeof t?t:W(+t),Y(),H):I},H.radius=function(t){return arguments.length?(E="function"==typeof t?t:W(+t),Y(),H):E},H.x=function(t){return arguments.length?(M=+t,H):M},H.y=function(t){return arguments.length?(A=+t,H):A},H.z=function(t){return arguments.length?(C=+t,H):C},H.strength((function(e){return t.dagNodeFilter(e)?1:0}))):null)):(U=Ee.graph(),t.graphData.nodes.forEach((function(e){U.addNode(e[t.nodeId])})),t.graphData.links.forEach((function(t){U.addLink(t.source,t.target)})),(N=Ee.forcelayout(U,Jt({dimensions:t.numDimensions},t.ngraphPhysics))).graph=U);for(var V=0;V<t.warmupTicks&&!(G&&0<t.d3AlphaMin&&t.d3ForceLayout.alpha()<t.d3AlphaMin);V++)N[G?"tick":"step"]();t.layout=N,this.resetCountdown()}function H(t){for(var e=0,n=T.length;e<n;++e){var r=T[e],i=r.x-M||1e-6,o=(r.y||0)-A||1e-6,a=(r.z||0)-C||1e-6,s=Math.sqrt(i*i+o*o+a*a);s=(P[e]-s)*O[e]*t/s;r.vx+=i*s,1<k&&(r.vy+=o*s),2<k&&(r.vz+=a*s)}}function Y(){if(T){var t,e=T.length;for(O=new Array(e),P=new Array(e),t=0;t<e;++t)P[t]=+E(T[t],t,T),O[t]=isNaN(P[t])?0:+I(T[t],t,T)}}t.engineRunning=!0,t.onFinishUpdate()}}),(window.THREE||{Group:r.ZAu}).Group,!0);const Te={type:"change"},ke={type:"start"},Oe={type:"end"};class Pe extends r.pBf{constructor(t,e){super();const n=this,i={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},o=(this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:r.RsA.ROTATE,MIDDLE:r.RsA.DOLLY,RIGHT:r.RsA.PAN},this.target=new r.Pa4,new r.Pa4);let a=1,s=i.NONE,u=i.NONE,c=0,l=0,h=0;const f=new r.Pa4,d=new r.FM8,p=new r.FM8,g=new r.Pa4,m=new r.FM8,v=new r.FM8,y=new r.FM8,b=new r.FM8,x=[],_={},w=(this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){var t=n.domElement.getBoundingClientRect(),e=n.domElement.ownerDocument.documentElement;n.screen.left=t.left+window.pageXOffset-e.clientLeft,n.screen.top=t.top+window.pageYOffset-e.clientTop,n.screen.width=t.width,n.screen.height=t.height},function(){const t=new r.FM8;return function(e,r){return t.set((e-n.screen.left)/n.screen.width,(r-n.screen.top)/n.screen.height),t}}()),S=function(){const t=new r.FM8;return function(e,r){return t.set((e-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-r))/n.screen.width),t}}();function E(t){if(!1!==n.enabled){if(0===x.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",M),n.domElement.addEventListener("pointerup",A)),e=t,x.push(e),"touch"===t.pointerType){var e=t;1===(N(e),x.length)?(s=i.TOUCH_ROTATE,p.copy(S(x[0].pageX,x[0].pageY)),d.copy(p)):(s=i.TOUCH_ZOOM_PAN,e=x[0].pageX-x[1].pageX,r=x[0].pageY-x[1].pageY,l=c=Math.sqrt(e*e+r*r),e=(x[0].pageX+x[1].pageX)/2,r=(x[0].pageY+x[1].pageY)/2,y.copy(w(e,r)),b.copy(y))}else{if(e=t,s===i.NONE)switch(e.button){case n.mouseButtons.LEFT:s=i.ROTATE;break;case n.mouseButtons.MIDDLE:s=i.ZOOM;break;case n.mouseButtons.RIGHT:s=i.PAN}var r=u!==i.NONE?u:s;r!==i.ROTATE||n.noRotate?r!==i.ZOOM||n.noZoom?r!==i.PAN||n.noPan||(y.copy(w(e.pageX,e.pageY)),b.copy(y)):(m.copy(w(e.pageX,e.pageY)),v.copy(m)):(p.copy(S(e.pageX,e.pageY)),d.copy(p))}n.dispatchEvent(ke)}}function M(t){var e,r,o,a;!1!==n.enabled&&("touch"===t.pointerType?1===(N(o=t),x.length)?(d.copy(p),p.copy(S(o.pageX,o.pageY))):(a=function(t){return t=t.pointerId===x[0].pointerId?x[1]:x[0],_[t.pointerId]}(o),e=o.pageX-a.x,r=o.pageY-a.y,l=Math.sqrt(e*e+r*r),e=(o.pageX+a.x)/2,r=(o.pageY+a.y)/2,b.copy(w(e,r))):(o=t,(a=u!==i.NONE?u:s)!==i.ROTATE||n.noRotate?a!==i.ZOOM||n.noZoom?a!==i.PAN||n.noPan||b.copy(w(o.pageX,o.pageY)):v.copy(w(o.pageX,o.pageY)):(d.copy(p),p.copy(S(o.pageX,o.pageY)))))}function A(t){if(!1!==n.enabled){if("touch"===t.pointerType){var e=t;switch(x.length){case 0:s=i.NONE;break;case 1:s=i.TOUCH_ROTATE,p.copy(S(e.pageX,e.pageY)),d.copy(p);break;case 2:s=i.TOUCH_ZOOM_PAN,p.copy(S(e.pageX-d.x,e.pageY-d.y)),d.copy(p)}}else s=i.NONE;n.dispatchEvent(Oe),I(t),0===x.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",M),n.domElement.removeEventListener("pointerup",A))}}function C(t){I(t)}function T(t){!1!==n.enabled&&(window.removeEventListener("keydown",T),u===i.NONE)&&(t.code!==n.keys[i.ROTATE]||n.noRotate?t.code!==n.keys[i.ZOOM]||n.noZoom?t.code!==n.keys[i.PAN]||n.noPan||(u=i.PAN):u=i.ZOOM:u=i.ROTATE)}function k(){!1!==n.enabled&&(u=i.NONE,window.addEventListener("keydown",T))}function O(t){if(!1!==n.enabled&&!0!==n.noZoom){switch(t.preventDefault(),t.deltaMode){case 2:m.y-=.025*t.deltaY;break;case 1:m.y-=.01*t.deltaY;break;default:m.y-=25e-5*t.deltaY}n.dispatchEvent(ke),n.dispatchEvent(Oe)}}function P(t){!1!==n.enabled&&t.preventDefault()}function I(t){delete _[t.pointerId];for(let e=0;e<x.length;e++)if(x[e].pointerId==t.pointerId)return void x.splice(e,1)}function N(t){let e=_[t.pointerId];void 0===e&&(e=new r.FM8,_[t.pointerId]=e),e.set(t.pageX,t.pageY)}this.rotateCamera=function(){const t=new r.Pa4,e=new r._fP,i=new r.Pa4,o=new r.Pa4,a=new r.Pa4,s=new r.Pa4;return function(){s.set(p.x-d.x,p.y-d.y,0);var r=s.length();r?(f.copy(n.object.position).sub(n.target),i.copy(f).normalize(),o.copy(n.object.up).normalize(),a.crossVectors(o,i).normalize(),o.setLength(p.y-d.y),a.setLength(p.x-d.x),s.copy(o.add(a)),t.crossVectors(s,f).normalize(),r*=n.rotateSpeed,e.setFromAxisAngle(t,r),f.applyQuaternion(e),n.object.up.applyQuaternion(e),g.copy(t),h=r):!n.staticMoving&&h&&(h*=Math.sqrt(1-n.dynamicDampingFactor),f.copy(n.object.position).sub(n.target),e.setFromAxisAngle(g,h),f.applyQuaternion(e),n.object.up.applyQuaternion(e)),d.copy(p)}}(),this.zoomCamera=function(){let t;s===i.TOUCH_ZOOM_PAN?(t=c/l,c=l,n.object.isPerspectiveCamera?f.multiplyScalar(t):n.object.isOrthographicCamera&&(n.object.zoom/=t,n.object.updateProjectionMatrix())):(1!==(t=1+(v.y-m.y)*n.zoomSpeed)&&0<t&&(n.object.isPerspectiveCamera?f.multiplyScalar(t):n.object.isOrthographicCamera&&(n.object.zoom/=t,n.object.updateProjectionMatrix())),n.staticMoving?m.copy(v):m.y+=(v.y-m.y)*this.dynamicDampingFactor)},this.panCamera=function(){const t=new r.FM8,e=new r.Pa4,i=new r.Pa4;return function(){var r,o;t.copy(b).sub(y),t.lengthSq()&&(n.object.isOrthographicCamera&&(r=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,o=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth,t.x*=r,t.y*=o),t.multiplyScalar(f.length()*n.panSpeed),i.copy(f).cross(n.object.up).setLength(t.x),i.add(e.copy(n.object.up).setLength(t.y)),n.object.position.add(i),n.target.add(i),n.staticMoving?y.copy(b):y.add(t.subVectors(b,y).multiplyScalar(n.dynamicDampingFactor)))}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(f.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,f.setLength(n.maxDistance)),m.copy(v)),f.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,f.setLength(n.minDistance)),m.copy(v)))},this.update=function(){f.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,f),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),1e-6<o.distanceToSquared(n.object.position)&&(n.dispatchEvent(Te),o.copy(n.object.position))):n.object.isOrthographicCamera&&(n.object.lookAt(n.target),1e-6<o.distanceToSquared(n.object.position)||a!==n.object.zoom)&&(n.dispatchEvent(Te),o.copy(n.object.position),a=n.object.zoom)},this.reset=function(){s=i.NONE,u=i.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),f.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(Te),o.copy(n.object.position),a=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",P),n.domElement.removeEventListener("pointerdown",E),n.domElement.removeEventListener("pointercancel",C),n.domElement.removeEventListener("wheel",O),n.domElement.removeEventListener("pointermove",M),n.domElement.removeEventListener("pointerup",A),window.removeEventListener("keydown",T),window.removeEventListener("keyup",k)},this.domElement.addEventListener("contextmenu",P),this.domElement.addEventListener("pointerdown",E),this.domElement.addEventListener("pointercancel",C),this.domElement.addEventListener("wheel",O,{passive:!1}),window.addEventListener("keydown",T),window.addEventListener("keyup",k),this.handleResize(),this.update()}}const Ie={type:"change"},Ne={type:"start"},De={type:"end"};class Le extends r.pBf{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new r.Pa4,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:r.RsA.ROTATE,MIDDLE:r.RsA.DOLLY,RIGHT:r.RsA.PAN},this.touches={ONE:r.QmN.ROTATE,TWO:r.QmN.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",W),this._domElementKeyEvents=t},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(Ie),n.update(),o=i.NONE},this.update=function(){const e=new r.Pa4,f=(new r._fP).setFromUnitVectors(t.up,new r.Pa4(0,1,0)),d=f.clone().invert(),p=new r.Pa4,g=new r._fP,m=2*Math.PI;return function(){var t=n.object.position;e.copy(t).sub(n.target),e.applyQuaternion(f),s.setFromVector3(e),n.autoRotate&&o===i.NONE&&E(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(s.theta+=u.theta*n.dampingFactor,s.phi+=u.phi*n.dampingFactor):(s.theta+=u.theta,s.phi+=u.phi);let r=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(r)&&isFinite(v)&&(r<-Math.PI?r+=m:r>Math.PI&&(r-=m),v<-Math.PI?v+=m:v>Math.PI&&(v-=m),s.theta=r<=v?Math.max(r,Math.min(v,s.theta)):s.theta>(r+v)/2?Math.max(r,s.theta):Math.min(v,s.theta)),s.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=c,s.radius=Math.max(n.minDistance,Math.min(n.maxDistance,s.radius)),!0===n.enableDamping?n.target.addScaledVector(l,n.dampingFactor):n.target.add(l),e.setFromSpherical(s),e.applyQuaternion(d),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,l.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),l.set(0,0,0)),c=1,!(!(h||p.distanceToSquared(n.object.position)>a||8*(1-g.dot(n.object.quaternion))>a)||(n.dispatchEvent(Ie),p.copy(n.object.position),g.copy(n.object.quaternion),h=!1))}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",H),n.domElement.removeEventListener("pointerdown",F),n.domElement.removeEventListener("pointercancel",G),n.domElement.removeEventListener("wheel",V),n.domElement.removeEventListener("pointermove",z),n.domElement.removeEventListener("pointerup",U),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",W)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const a=1e-6,s=new r.$V,u=new r.$V;let c=1;const l=new r.Pa4;let h=!1;const f=new r.FM8,d=new r.FM8,p=new r.FM8,g=new r.FM8,m=new r.FM8,v=new r.FM8,y=new r.FM8,b=new r.FM8,x=new r.FM8,_=[],w={};function S(){return Math.pow(.95,n.zoomSpeed)}function E(t){u.theta-=t}function M(t){u.phi-=t}const A=function(){const t=new r.Pa4;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),l.add(t)}}(),C=function(){const t=new r.Pa4;return function(e,r){!0===n.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),l.add(t)}}(),T=function(){const t=new r.Pa4;return function(e,r){var i,o=n.domElement;n.object.isPerspectiveCamera?(i=n.object.position,t.copy(i).sub(n.target),i=t.length(),i*=Math.tan(n.object.fov/2*Math.PI/180),A(2*e*i/o.clientHeight,n.object.matrix),C(2*r*i/o.clientHeight,n.object.matrix)):n.object.isOrthographicCamera?(A(e*(n.object.right-n.object.left)/n.object.zoom/o.clientWidth,n.object.matrix),C(r*(n.object.top-n.object.bottom)/n.object.zoom/o.clientHeight,n.object.matrix)):n.enablePan=!1}}();function k(t){n.object.isPerspectiveCamera?c/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),h=!0):n.enableZoom=!1}function O(t){n.object.isPerspectiveCamera?c*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),h=!0):n.enableZoom=!1}function P(t){f.set(t.clientX,t.clientY)}function I(t){g.set(t.clientX,t.clientY)}function N(){var t,e;1===_.length?f.set(_[0].pageX,_[0].pageY):(t=.5*(_[0].pageX+_[1].pageX),e=.5*(_[0].pageY+_[1].pageY),f.set(t,e))}function D(){var t,e;1===_.length?g.set(_[0].pageX,_[0].pageY):(t=.5*(_[0].pageX+_[1].pageX),e=.5*(_[0].pageY+_[1].pageY),g.set(t,e))}function L(){var t=_[0].pageX-_[1].pageX,e=_[0].pageY-_[1].pageY;t=Math.sqrt(t*t+e*e);y.set(0,t)}function R(t){1==_.length?d.set(t.pageX,t.pageY):(r=X(t),e=.5*(t.pageX+r.x),t=.5*(t.pageY+r.y),d.set(e,t)),p.subVectors(d,f).multiplyScalar(n.rotateSpeed);var e,r=n.domElement;E(2*Math.PI*p.x/r.clientHeight),M(2*Math.PI*p.y/r.clientHeight),f.copy(d)}function B(t){var e,r;1===_.length?m.set(t.pageX,t.pageY):(e=X(t),r=.5*(t.pageX+e.x),t=.5*(t.pageY+e.y),m.set(r,t)),v.subVectors(m,g).multiplyScalar(n.panSpeed),T(v.x,v.y),g.copy(m)}function j(t){var e=X(t),r=t.pageX-e.x;t=t.pageY-e.y,e=Math.sqrt(r*r+t*t);b.set(0,e),x.set(0,Math.pow(b.y/y.y,n.zoomSpeed)),k(x.y),y.copy(b)}function F(t){if(!1!==n.enabled){var e;if(0===_.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",z),n.domElement.addEventListener("pointerup",U)),e=t,_.push(e),"touch"!==t.pointerType){var a=t;let e;switch(a.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case r.RsA.DOLLY:if(!1===n.enableZoom)return;!function(t){y.set(t.clientX,t.clientY)}(a),o=i.DOLLY;break;case r.RsA.ROTATE:if(a.ctrlKey||a.metaKey||a.shiftKey){if(!1===n.enablePan)return;I(a),o=i.PAN}else{if(!1===n.enableRotate)return;P(a),o=i.ROTATE}break;case r.RsA.PAN:if(a.ctrlKey||a.metaKey||a.shiftKey){if(!1===n.enableRotate)return;P(a),o=i.ROTATE}else{if(!1===n.enablePan)return;I(a),o=i.PAN}break;default:o=i.NONE}}else switch(q(t),_.length){case 1:switch(n.touches.ONE){case r.QmN.ROTATE:if(!1===n.enableRotate)return;N(),o=i.TOUCH_ROTATE;break;case r.QmN.PAN:if(!1===n.enablePan)return;D(),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(n.touches.TWO){case r.QmN.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&L(),n.enablePan&&D(),o=i.TOUCH_DOLLY_PAN;break;case r.QmN.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&L(),n.enableRotate&&N(),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&n.dispatchEvent(Ne)}}function z(t){if(!1!==n.enabled)if("touch"===t.pointerType){var e=t;switch(q(e),o){case i.TOUCH_ROTATE:!1!==n.enableRotate&&(R(e),n.update());break;case i.TOUCH_PAN:!1!==n.enablePan&&(B(e),n.update());break;case i.TOUCH_DOLLY_PAN:!1===n.enableZoom&&!1===n.enablePan||(function(t){n.enableZoom&&j(t),n.enablePan&&B(t)}(e),n.update());break;case i.TOUCH_DOLLY_ROTATE:!1===n.enableZoom&&!1===n.enableRotate||(function(t){n.enableZoom&&j(t),n.enableRotate&&R(t)}(e),n.update());break;default:o=i.NONE}}else{var r=t;switch(o){case i.ROTATE:!1!==n.enableRotate&&function(t){d.set(t.clientX,t.clientY),p.subVectors(d,f).multiplyScalar(n.rotateSpeed),t=n.domElement,E(2*Math.PI*p.x/t.clientHeight),M(2*Math.PI*p.y/t.clientHeight),f.copy(d),n.update()}(r);break;case i.DOLLY:!1!==n.enableZoom&&function(t){b.set(t.clientX,t.clientY),x.subVectors(b,y),0<x.y?k(S()):x.y<0&&O(S()),y.copy(b),n.update()}(r);break;case i.PAN:!1!==n.enablePan&&function(t){m.set(t.clientX,t.clientY),v.subVectors(m,g).multiplyScalar(n.panSpeed),T(v.x,v.y),g.copy(m),n.update()}(r)}}}function U(t){Y(t),0===_.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",z),n.domElement.removeEventListener("pointerup",U)),n.dispatchEvent(De),o=i.NONE}function G(t){Y(t)}function V(t){!1!==n.enabled&&!1!==n.enableZoom&&o===i.NONE&&(t.preventDefault(),n.dispatchEvent(Ne),t.deltaY<0?O(S()):0<t.deltaY&&k(S()),n.update(),n.dispatchEvent(De))}function W(t){if(!1!==n.enabled&&!1!==n.enablePan){let e=!1;switch(t.code){case n.keys.UP:T(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:T(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:T(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:T(-n.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),n.update())}}function H(t){!1!==n.enabled&&t.preventDefault()}function Y(t){delete w[t.pointerId];for(let e=0;e<_.length;e++)if(_[e].pointerId==t.pointerId)return void _.splice(e,1)}function q(t){let e=w[t.pointerId];void 0===e&&(e=new r.FM8,w[t.pointerId]=e),e.set(t.pageX,t.pageY)}function X(t){return t=t.pointerId===_[0].pointerId?_[1]:_[0],w[t.pointerId]}n.domElement.addEventListener("contextmenu",H),n.domElement.addEventListener("pointerdown",F),n.domElement.addEventListener("pointercancel",G),n.domElement.addEventListener("wheel",V,{passive:!1}),this.update()}}const Re={type:"change"};class Be extends r.pBf{constructor(t,e){super(),this.object=t,this.domElement=e,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;const n=this,i=new r._fP,o=new r.Pa4,a=(this.tmpQuaternion=new r._fP,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new r.Pa4(0,0,0),this.rotationVector=new r.Pa4(0,0,0),this.keydown=function(t){if(!t.altKey){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(t){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(t){if(this.dragToLook)this.mouseStatus++;else{switch(t.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(t){var e,n,r;(!this.dragToLook||0<this.mouseStatus)&&(n=(e=this.getContainerDimensions()).size[0]/2,r=e.size[1]/2,this.moveState.yawLeft=-(t.pageX-e.offset[0]-n)/n,this.moveState.pitchDown=(t.pageY-e.offset[1]-r)/r,this.updateRotationVector())},this.mouseup=function(t){if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(t.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(t){var e=t*n.movementSpeed;t*=n.rollSpeed;n.object.translateX(n.moveVector.x*e),n.object.translateY(n.moveVector.y*e),n.object.translateZ(n.moveVector.z*e),n.tmpQuaternion.set(n.rotationVector.x*t,n.rotationVector.y*t,n.rotationVector.z*t,1).normalize(),n.object.quaternion.multiply(n.tmpQuaternion),(1e-6<o.distanceToSquared(n.object.position)||1e-6<8*(1-i.dot(n.object.quaternion)))&&(n.dispatchEvent(Re),i.copy(n.object.quaternion),o.copy(n.object.position))},this.updateMovementVector=function(){var t=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-t+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",je),this.domElement.removeEventListener("mousedown",s),this.domElement.removeEventListener("mousemove",a),this.domElement.removeEventListener("mouseup",u),window.removeEventListener("keydown",c),window.removeEventListener("keyup",l)},this.mousemove.bind(this)),s=this.mousedown.bind(this),u=this.mouseup.bind(this),c=this.keydown.bind(this),l=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",je),this.domElement.addEventListener("mousemove",a),this.domElement.addEventListener("mousedown",s),this.domElement.addEventListener("mouseup",u),window.addEventListener("keydown",c),window.addEventListener("keyup",l),this.updateMovementVector(),this.updateRotationVector()}}function je(t){t.preventDefault()}const Fe={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class ze{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){}}const Ue=new r.iKG(-1,1,1,-1,0,1),Ge=new r.u9r;Ge.setAttribute("position",new r.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),Ge.setAttribute("uv",new r.a$l([0,2,0,0,2,0],2));class Ve{constructor(t){this._mesh=new r.Kj0(Ge,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,Ue)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class We extends ze{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof r.jyz?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=r.rDY.clone(t.uniforms),this.material=new r.jyz({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new Ve(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?t.setRenderTarget(null):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil)),this.fsQuad.render(t)}}class He extends ze{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){var r=t.getContext(),i=t.state;let o,a;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),a=this.inverse?(o=0,1):(o=1,0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),i.buffers.stencil.setClear(a),i.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class Ye{constructor(t,e){var n;this.renderer=t,void 0===e?(n=t.getSize(new r.FM8),this._pixelRatio=t.getPixelRatio(),this._width=n.width,this._height=n.height,(e=new r.dd2(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"):(this._pixelRatio=1,this._width=e.width,this._height=e.height),this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new We(Fe),this.clock=new r.SUY}swapBuffers(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){t=this.passes.indexOf(t),-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());var e=this.renderer.getRenderTarget();let n=!1;for(let a=0,s=this.passes.length;a<s;a++){var r,i,o=this.passes[a];!1!==o.enabled&&(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(a),o.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),o.needsSwap&&(n&&(r=this.renderer.getContext(),(i=this.renderer.state.buffers.stencil).setFunc(r.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),i.setFunc(r.EQUAL,1,4294967295)),this.swapBuffers()),void 0!==He)&&o instanceof He&&(n=!0)}this.renderer.setRenderTarget(e)}reset(t){var e;void 0===t&&(e=this.renderer.getSize(new r.FM8),this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)),this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}}new r.iKG(-1,1,1,-1,0,1);const qe=new r.u9r;qe.setAttribute("position",new r.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),qe.setAttribute("uv",new r.a$l([0,2,0,0,2,0],2));class Xe extends ze{constructor(t,e,n,i,o){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new r.Ilk}render(t,e,n){var r=t.autoClear;let i,o;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),i=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=r}}function Ke(){return(Ke=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var Ze=n(5461),$e=n(86636),Je=n(44175);function Qe(t,e,n){return(Qe=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),1}catch(t){}}}()?Reflect.construct.bind():function(t,e,n){var r=[null];return r.push.apply(r,e),e=new(Function.bind.apply(t,r)),n&&(0,$e.Z)(e,n.prototype),e}).apply(null,arguments)}function tn(t){var e="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Qe(t,arguments,(0,Je.Z)(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,$e.Z)(n,t)}(t)}var en=function(t){var e,n;function r(e){return e=t.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+e+" for more information.")||this,(0,Ze.Z)(e)}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,(0,$e.Z)(e,n),r}(tn(Error));function nn(t){return Math.round(255*t)}function rn(t,e,n){return nn(t)+","+nn(e)+","+nn(n)}function on(t,e,n,r){var i,o,a,s;return void 0===r&&(r=rn),0===e?r(n,n,n):(t=(t%360+360)%360/60,i=(e=(1-Math.abs(2*n-1))*e)*(1-Math.abs(t%2-1)),(s=a=o=0)<=t&&t<1?(o=e,a=i):1<=t&&t<2?(o=i,a=e):2<=t&&t<3?(a=e,s=i):3<=t&&t<4?(a=i,s=e):4<=t&&t<5?(o=i,s=e):5<=t&&t<6&&(o=e,s=i),r(o+(t=n-e/2),a+t,s+t))}var an={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},sn=/^#[a-fA-F0-9]{6}$/,un=/^#[a-fA-F0-9]{8}$/,cn=/^#[a-fA-F0-9]{3}$/,ln=/^#[a-fA-F0-9]{4}$/,hn=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,fn=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,dn=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,pn=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function gn(t){if("string"!=typeof t)throw new en(3);var e="string"==typeof t&&(e=t.toLowerCase(),an[e])?"#"+an[e]:t;if(e.match(sn))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(un))return t=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2)),{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:t};if(e.match(cn))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(ln))return t=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2)),{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:t};if(t=hn.exec(e),t)return{red:parseInt(""+t[1],10),green:parseInt(""+t[2],10),blue:parseInt(""+t[3],10)};if(t=fn.exec(e.substring(0,50)),t)return{red:parseInt(""+t[1],10),green:parseInt(""+t[2],10),blue:parseInt(""+t[3],10),alpha:1<parseFloat(""+t[4])?parseFloat(""+t[4])/100:parseFloat(""+t[4])};if(t=dn.exec(e),t){t="rgb("+on(parseInt(""+t[1],10),parseInt(""+t[2],10)/100,parseInt(""+t[3],10)/100)+")";var n=hn.exec(t);if(n)return{red:parseInt(""+n[1],10),green:parseInt(""+n[2],10),blue:parseInt(""+n[3],10)};throw new en(4,e,t)}if(n=pn.exec(e.substring(0,50)),n){t="rgb("+on(parseInt(""+n[1],10),parseInt(""+n[2],10)/100,parseInt(""+n[3],10)/100)+")";var r=hn.exec(t);if(r)return{red:parseInt(""+r[1],10),green:parseInt(""+r[2],10),blue:parseInt(""+r[3],10),alpha:1<parseFloat(""+n[4])?parseFloat(""+n[4])/100:parseFloat(""+n[4])};throw new en(4,e,t)}throw new en(5)}var mn=function(t){return 7===t.length&&t[1]===t[2]&&t[3]===t[4]&&t[5]===t[6]?"#"+t[1]+t[3]+t[5]:t};function vn(t){return t=t.toString(16),1===t.length?"0"+t:t}function yn(t,e,n){if("number"==typeof t&&"number"==typeof e&&"number"==typeof n)return mn("#"+vn(t)+vn(e)+vn(n));if("object"==typeof t&&void 0===e&&void 0===n)return mn("#"+vn(t.red)+vn(t.green)+vn(t.blue));throw new en(6)}function bn(t,e,n,r){var i;if("string"==typeof t&&"number"==typeof e)return"rgba("+(i=gn(t)).red+","+i.green+","+i.blue+","+e+")";if("number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof r)return 1<=r?yn(t,e,n):"rgba("+t+","+e+","+n+","+r+")";if("object"==typeof t&&void 0===e&&void 0===n&&void 0===r)return 1<=t.alpha?yn(t.red,t.green,t.blue):"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")";throw new en(7)}function xn(t){return function t(e,n,r){return function(){var i=r.concat(Array.prototype.slice.call(arguments));return i.length>=n?e.apply(this,i):t(e,n,i)}}(t,t.length,[])}function _n(t,e,n){return Math.max(t,Math.min(e,n))}function wn(t,e){return"transparent"===e?e:bn(Ke({},e=gn(e),{alpha:_n(0,1,(100*("number"==typeof e.alpha?e.alpha:1)+100*parseFloat(t))/100)}))}var Sn=xn(wn),En=n(34155),Mn={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},Bounce:{In:function(t){return 1-Mn.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*Mn.Bounce.In(2*t):.5*Mn.Bounce.Out(2*t-1)+.5}}},An=(Kt="undefined"==typeof self&&void 0!==En&&En.hrtime?function(){var t=En.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},Kt);Cn.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map((function(e){return t._tweens[e]}))},Cn.prototype.removeAll=function(){this._tweens={}},Cn.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},Cn.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},Cn.prototype.update=function(t,e){void 0===t&&(t=An()),void 0===e&&(e=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;0<n.length;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]];i&&!1===i.update(t,!e)&&!e&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},vt=Cn;function Cn(){this._tweens={},this._tweensAddedDuringUpdate={}}var Tn,kn={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=kn.Utils.Linear;return e<0?o(t[0],t[1],r):1<e?o(t[n],t[n-1],n-r):o(t[i],t[n<i+1?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,o=kn.Utils.Bernstein,a=0;a<=r;a++)n+=i(1-e,r-a)*i(e,a)*t[a]*o(r,a);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=kn.Utils.CatmullRom;return t[0]===t[n]?o(t[((i=e<0?Math.floor(r=n*(1+e)):i)-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):1<e?t[n]-(o(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):o(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=kn.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(Tn=[1],function(t){var e=1;if(Tn[t])return Tn[t];for(var n=t;1<n;n--)e*=n;return Tn[t]=e}),CatmullRom:function(t,e,n,r,i){t=.5*(n-t),r=.5*(r-e);var o=i*i;return(2*e-2*n+t+r)*(i*o)+(-3*e+3*n-2*t-r)*o+t*i+e}}},On=(Pn.nextId=function(){return Pn._nextId++},Pn._nextId=0,Pn);function Pn(){}var In=new vt;Nn.prototype.getId=function(){return this._id},Nn.prototype.isPlaying=function(){return this._isPlaying},Nn.prototype.isPaused=function(){return this._isPaused},Nn.prototype.to=function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},Nn.prototype.duration=function(t){return this._duration=t,this},Nn.prototype.start=function(t){if(!this._isPlaying){if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var e in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==t?"string"==typeof t?An()+parseFloat(t):t:An(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat)}return this},Nn.prototype._setupProperties=function(t,e,n,r){for(var i in n){var o=t[i],a=Array.isArray(o),s=a?"array":typeof o,u=!a&&Array.isArray(n[i]);if("undefined"!=s&&"function"!=s){if(u){var c=n[i];if(0===c.length)continue;c=c.map(this._handleRelativeValue.bind(this,o)),n[i]=[o].concat(c)}if("object"!=s&&!a||!o||u)void 0===e[i]&&(e[i]=o),a||(e[i]*=1),r[i]=u?n[i].slice().reverse():e[i]||0;else{for(var l in e[i]=a?[]:{},o)e[i][l]=o[l];r[i]=a?[]:{},this._setupProperties(o,e[i],n[i],r[i])}}}},Nn.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying&&(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback)&&this._onStopCallback(this._object),this},Nn.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},Nn.prototype.pause=function(t){return void 0===t&&(t=An()),!this._isPaused&&this._isPlaying&&(this._isPaused=!0,this._pauseStart=t,this._group)&&this._group.remove(this),this},Nn.prototype.resume=function(t){return void 0===t&&(t=An()),this._isPaused&&this._isPlaying&&(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group)&&this._group.add(this),this},Nn.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},Nn.prototype.group=function(t){return this._group=t,this},Nn.prototype.delay=function(t){return this._delayTime=t,this},Nn.prototype.repeat=function(t){return this._initialRepeat=t,this._repeat=t,this},Nn.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},Nn.prototype.yoyo=function(t){return this._yoyo=t,this},Nn.prototype.easing=function(t){return this._easingFunction=t,this},Nn.prototype.interpolation=function(t){return this._interpolationFunction=t,this},Nn.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},Nn.prototype.onStart=function(t){return this._onStartCallback=t,this},Nn.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},Nn.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},Nn.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},Nn.prototype.onStop=function(t){return this._onStopCallback=t,this},Nn.prototype.update=function(t,e){if(void 0===t&&(t=An()),void 0===e&&(e=!0),this._isPaused)return!0;var n,r=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(r<t)return!1;e&&this.start(t)}if(this._goToEnd=!1,t<this._startTime)return!0;if(!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(t-this._startTime)/this._duration,r=0===this._duration||1<r?1:r,e=this._easingFunction(r),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,e),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1!=r)return!0;if(0<this._repeat){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var i=0,o=this._chainedTweens.length;i<o;i++)this._chainedTweens[i].start(this._startTime+this._duration);return this._isPlaying=!1},Nn.prototype._updateProperties=function(t,e,n,r){for(var i in n){var o,a,s,u;void 0!==e[i]&&(o=e[i]||0,a=n[i],s=Array.isArray(t[i]),u=Array.isArray(a),!s&&u?t[i]=this._interpolationFunction(a,r):"object"==typeof a&&a?this._updateProperties(t[i],o,a,r):"number"==typeof(a=this._handleRelativeValue(o,a))&&(t[i]=o+(a-o)*r))}},Nn.prototype._handleRelativeValue=function(t,e){return"string"!=typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},Nn.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],n=this._valuesEnd[t];this._valuesStartRepeat[t]="string"==typeof n?this._valuesStartRepeat[t]+parseFloat(n):this._valuesEnd[t],this._valuesEnd[t]=e},e=Nn;function Nn(t,e){void 0===e&&(e=In),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Mn.Linear.None,this._interpolationFunction=kn.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=On.nextId(),this._isChainStopped=!1,this._goToEnd=!1}mt=On.nextId,n=In,Kt=n.getAll.bind(n);var Dn=n.removeAll.bind(n),Ln=n.add.bind(n),Rn=n.remove.bind(n),Bn=(n=n.update.bind(n),{Easing:Mn,Group:vt,Interpolation:kn,now:An,Sequence:On,nextId:mt,Tween:e,VERSION:"18.6.4",getAll:Kt,removeAll:Dn,add:Ln,remove:Rn,update:n});function jn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||zn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(t){return function(t){if(Array.isArray(t))return Un(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||zn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zn(t,e){var n;if(t)return"string"==typeof t?Un(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Un(t,e):void 0}function Un(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}vt=".scene-nav-info {\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n}\n\n.scene-tooltip {\n  top: 0;\n  color: lavender;\n  font-size: 15px;\n}\n\n.scene-nav-info, .scene-tooltip {\n  position: absolute;\n  font-family: sans-serif;\n  pointer-events: none;\n}\n\n.scene-container canvas:focus {\n  outline: none;\n}",tr=(tr=void 0===tr?{}:tr).insertAt,vt&&"undefined"!=typeof document&&(mt=document.head||document.getElementsByTagName("head")[0],(e=document.createElement("style")).type="text/css","top"===tr&&mt.firstChild?mt.insertBefore(e,mt.firstChild):mt.appendChild(e),e.styleSheet?e.styleSheet.cssText=vt:e.appendChild(document.createTextNode(vt)));var Gn,Vn=window.THREE||{WebGLRenderer:r.CP7,Scene:r.xsS,PerspectiveCamera:r.cPb,Raycaster:r.iMs,TextureLoader:r.dpR,Vector2:r.FM8,Vector3:r.Pa4,Box3:r.ZzF,Color:r.Ilk,Mesh:r.Kj0,SphereGeometry:r.xo$,MeshBasicMaterial:r.vBJ,BackSide:r._Li,EventDispatcher:r.pBf,MOUSE:r.RsA,Quaternion:r._fP,Spherical:r.$V,Clock:r.SUY},Wn=Et({props:{width:{default:window.innerWidth,onChange:function(t,e,n){isNaN(t)&&(e.width=n)}},height:{default:window.innerHeight,onChange:function(t,e,n){isNaN(t)&&(e.height=n)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},enablePointerInteraction:{default:!0,onChange:function(t,e){e.hoverObj=null,e.toolTipElem&&(e.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(t){var e,n;return t.initialised&&(t.controls.update&&t.controls.update(t.clock.getDelta()),t.postProcessingComposer?t.postProcessingComposer.render():t.renderer.render(t.scene,t.camera),t.extraRenderers.forEach((function(e){return e.render(t.scene,t.camera)})),t.enablePointerInteraction&&(n=null,!t.hoverDuringDrag&&t.isPointerDragging||(n=(e=(e=this.intersectingObjects(t.pointerPos.x,t.pointerPos.y).filter((function(e){return t.hoverFilter(e.object)})).sort((function(e,n){return t.hoverOrderComparator(e.object,n.object)}))).length?e[0]:null)?e.object:null,t.intersectionPoint=e?e.point:null),n!==t.hoverObj)&&(t.onHover(n,t.hoverObj),t.toolTipElem.innerHTML=n&&Mt(t.tooltipContent)(n)||"",t.hoverObj=n),Bn.update()),this},getPointerPos:function(t){return t=t.pointerPos,{x:t.x,y:t.y}},cameraPosition:function(t,e,n,r){var i,o,a=t.camera;return e&&t.initialised?(n=n||{x:0,y:0,z:0},r?(i=Object.assign({},a.position),o=c(),new Bn.Tween(i).to(e,r).easing(Bn.Easing.Quadratic.Out).onUpdate(s).start(),new Bn.Tween(o).to(n,r/3).easing(Bn.Easing.Quadratic.Out).onUpdate(u).start()):(s(e),u(n)),this):Object.assign({},a.position,{lookAt:c()});function s(t){var e=t.x,n=t.y;t=t.z;void 0!==e&&(a.position.x=e),void 0!==n&&(a.position.y=n),void 0!==t&&(a.position.z=t)}function u(e){e=new Vn.Vector3(e.x,e.y,e.z),t.controls.target?t.controls.target=e:a.lookAt(e)}function c(){return Object.assign(new Vn.Vector3(0,0,-1e3).applyQuaternion(a.quaternion).add(a.position))}},zoomToFit:function(t){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length,i=new Array(3<r?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return this.fitToBbox(this.getBbox.apply(this,i),e,n)},fitToBbox:function(t,e){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:10,o=t.camera;return e&&(n=new Vn.Vector3(0,0,0),e=2*Math.max.apply(Math,Fn(Object.entries(e).map((function(t){t=jn(t,2);var e=t[0];t=t[1];return Math.max.apply(Math,Fn(t.map((function(t){return Math.abs(n[e]-t)}))))})))),i=(1-2*i/t.height)*o.fov,e=(t=e/Math.atan(i*Math.PI/180))/o.aspect,0<(i=Math.max(t,e)))&&(t=n.clone().sub(o.position).normalize().multiplyScalar(-i),this.cameraPosition(t,n,r)),this},getBbox:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=new Vn.Box3(new Vn.Vector3(0,0,0),new Vn.Vector3(0,0,0));t=t.objects.filter(e);return t.length?(t.forEach((function(t){return n.expandByObject(t)})),Object.assign.apply(Object,Fn(["x","y","z"].map((function(t){return e={},r=t,t=[n.min[t],n.max[t]],r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e;var e,r}))))):null},getScreenCoords:function(t,e,n,r){return e=new Vn.Vector3(e,n,r),e.project(this.camera()),{x:(e.x+1)*t.width/2,y:-(e.y-1)*t.height/2}},getSceneCoords:function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;e=new Vn.Vector2(e/t.width*2-1,-n/t.height*2+1),n=new Vn.Raycaster;return n.setFromCamera(e,t.camera),Object.assign({},n.ray.at(r,new Vn.Vector3))},intersectingObjects:function(t,e,n){return e=new Vn.Vector2(e/t.width*2-1,-n/t.height*2+1),n=new Vn.Raycaster,n.params.Line.threshold=t.lineHoverPrecision,n.setFromCamera(e,t.camera),n.intersectObjects(t.objects,!0)},renderer:function(t){return t.renderer},scene:function(t){return t.scene},camera:function(t){return t.camera},postProcessingComposer:function(t){return t.postProcessingComposer},controls:function(t){return t.controls},tbControls:function(t){return t.controls}},stateInit:function(){return{scene:new Vn.Scene,camera:new Vn.PerspectiveCamera,clock:new Vn.Clock}},init:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=n.controlType,i=(r=void 0===r?"trackball":r,n.rendererConfig),o=(i=void 0===i?{}:i,n.extraRenderers);o=void 0===o?[]:o,n=n.waitForLoadComplete,n=void 0===n||n;t.innerHTML="",t.appendChild(e.container=document.createElement("div")),e.container.className="scene-container",e.container.style.position="relative",e.container.appendChild(e.navInfo=document.createElement("div")),e.navInfo.className="scene-nav-info",e.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[r]||"",e.navInfo.style.display=e.showNavInfo?null:"none",e.toolTipElem=document.createElement("div"),e.toolTipElem.classList.add("scene-tooltip"),e.container.appendChild(e.toolTipElem),e.pointerPos=new Vn.Vector2,e.pointerPos.x=-2,e.pointerPos.y=-2,["pointermove","pointerdown"].forEach((function(t){return e.container.addEventListener(t,(function(n){var r,i,o;"pointerdown"===t&&(e.isPointerPressed=!0),e.isPointerDragging||"pointermove"!==n.type||!(0<n.pressure||e.isPointerPressed)||"touch"===n.pointerType&&void 0!==n.movementX&&![n.movementX,n.movementY].some((function(t){return 1<Math.abs(t)}))||(e.isPointerDragging=!0),e.enablePointerInteraction&&(r=(r=e.container).getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop,o={top:r.top+o,left:r.left+i},e.pointerPos.x=n.pageX-o.left,e.pointerPos.y=n.pageY-o.top,e.toolTipElem.style.top="".concat(e.pointerPos.y,"px"),e.toolTipElem.style.left="".concat(e.pointerPos.x,"px"),e.toolTipElem.style.transform="translate(-".concat(e.pointerPos.x/e.width*100,"%, ").concat(e.height-e.pointerPos.y<100?"calc(-100% - 8px)":"21px",")"))}),{passive:!0})})),e.container.addEventListener("pointerup",(function(t){e.isPointerPressed=!1,e.isPointerDragging&&(e.isPointerDragging=!1,!e.clickAfterDrag)||requestAnimationFrame((function(){0===t.button&&e.onClick(e.hoverObj||null,t,e.intersectionPoint),2===t.button&&e.onRightClick&&e.onRightClick(e.hoverObj||null,t,e.intersectionPoint)}))}),{passive:!0,capture:!0}),e.container.addEventListener("contextmenu",(function(t){e.onRightClick&&t.preventDefault()})),e.renderer=new Vn.WebGLRenderer(Object.assign({antialias:!0,alpha:!0},i)),e.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),e.container.appendChild(e.renderer.domElement),e.extraRenderers=o,e.extraRenderers.forEach((function(t){t.domElement.style.position="absolute",t.domElement.style.top="0px",t.domElement.style.pointerEvents="none",e.container.appendChild(t.domElement)})),e.postProcessingComposer=new Ye(e.renderer),e.postProcessingComposer.addPass(new Xe(e.scene,e.camera)),e.controls=new{trackball:Pe,orbit:Le,fly:Be}[r](e.camera,e.renderer.domElement),"fly"===r&&(e.controls.movementSpeed=300,e.controls.rollSpeed=Math.PI/6,e.controls.dragToLook=!0),"trackball"!==r&&"orbit"!==r||(e.controls.minDistance=.1,e.controls.maxDistance=e.skyRadius,e.controls.addEventListener("start",(function(){e.controlsEngaged=!0})),e.controls.addEventListener("change",(function(){e.controlsEngaged&&(e.controlsDragging=!0)})),e.controls.addEventListener("end",(function(){e.controlsEngaged=!1,e.controlsDragging=!1}))),[e.renderer,e.postProcessingComposer].concat(Fn(e.extraRenderers)).forEach((function(t){return t.setSize(e.width,e.height)})),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix(),e.camera.position.z=1e3,e.scene.add(e.skysphere=new Vn.Mesh),e.skysphere.visible=!1,e.loadComplete=e.scene.visible=!n,window.scene=e.scene},update:function(t,e){var n;function r(){t.loadComplete=t.scene.visible=!0}t.width&&t.height&&(e.hasOwnProperty("width")||e.hasOwnProperty("height"))&&(t.container.style.width="".concat(t.width,"px"),t.container.style.height="".concat(t.height,"px"),[t.renderer,t.postProcessingComposer].concat(Fn(t.extraRenderers)).forEach((function(e){return e.setSize(t.width,t.height)})),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix()),e.hasOwnProperty("skyRadius")&&t.skyRadius&&(t.controls.hasOwnProperty("maxDistance")&&e.skyRadius&&(t.controls.maxDistance=Math.min(t.controls.maxDistance,t.skyRadius)),t.camera.far=2.5*t.skyRadius,t.camera.updateProjectionMatrix(),t.skysphere.geometry=new Vn.SphereGeometry(t.skyRadius)),e.hasOwnProperty("backgroundColor")&&(void 0===(n=gn(t.backgroundColor).alpha)&&(n=1),t.renderer.setClearColor(new Vn.Color(Sn(1,t.backgroundColor)),n)),e.hasOwnProperty("backgroundImageUrl")&&(t.backgroundImageUrl?(new Vn.TextureLoader).load(t.backgroundImageUrl,(function(e){t.skysphere.material=new Vn.MeshBasicMaterial({map:e,side:Vn.BackSide}),t.skysphere.visible=!0,t.onBackgroundImageLoaded&&setTimeout(t.onBackgroundImageLoaded),t.loadComplete||r()})):(t.skysphere.visible=!1,t.skysphere.material.map=null,t.loadComplete||r())),e.hasOwnProperty("showNavInfo")&&(t.navInfo.style.display=t.showNavInfo?null:"none"),e.hasOwnProperty("objects")&&((e.objects||[]).forEach((function(e){return t.scene.remove(e)})),t.objects.forEach((function(e){return t.scene.add(e)})))}});function Hn(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function Yn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Hn(Object(n),!0).forEach((function(e){qn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xn(t){return function(t){if(Array.isArray(t))return Kn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var n;if(t)return"string"==typeof t?Kn(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kn(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zn(t,e){var n=new e;return{linkProp:function(e){return{default:n[e](),onChange:function(n,r){r[t][e](n)},triggerUpdate:!1}},linkMethod:function(e){return function(n){n=n[t];for(var r=arguments.length,i=new Array(1<r?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=n[e].apply(n,i);return a===n?this:a}}}}Kt=".graph-info-msg {\n  top: 50%;\n  width: 100%;\n  text-align: center;\n  color: lavender;\n  opacity: 0.7;\n  font-size: 22px;\n  position: absolute;\n  font-family: Sans-serif;\n}\n\n.scene-container .clickable {\n  cursor: pointer;\n}\n\n.scene-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.scene-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}",Gn=(Gn=void 0===Gn?{}:Gn).insertAt,Kt&&"undefined"!=typeof document&&(Dn=document.head||document.getElementsByTagName("head")[0],(Ln=document.createElement("style")).type="text/css","top"===Gn&&Dn.firstChild?Dn.insertBefore(Ln,Dn.firstChild):Dn.appendChild(Ln),Ln.styleSheet?Ln.styleSheet.cssText=Kt:Ln.appendChild(document.createTextNode(Kt)));var $n=window.THREE||{AmbientLight:r.Mig,DirectionalLight:r.Ox3,Vector3:r.Pa4},Jn=Zn("forceGraph",Ce),Qn=(Rn=Object.assign.apply(Object,Xn(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map((function(t){return qn({},t,Jn.linkProp(t))})))),n=Object.assign.apply(Object,Xn(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map((function(t){return qn({},t,Jn.linkMethod(t))})))),Zn("renderObjs",Wn)),tr=Object.assign.apply(Object,Xn(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map((function(t){return qn({},t,Qn.linkProp(t))})))),er=(mt=Object.assign.apply(Object,Xn(["cameraPosition","postProcessingComposer"].map((function(t){return qn({},t,Qn.linkMethod(t))}))).concat([{graph2ScreenCoords:Qn.linkMethod("getScreenCoords"),screen2GraphCoords:Qn.linkMethod("getSceneCoords")}])),Et({props:Yn(Yn({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(t,e){return e.renderObjs.lineHoverPrecision(t)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(t,e){e=e.renderObjs.controls(),e&&(e.enabled=t)},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},Rn),tr),methods:Yn(Yn({zoomToFit:function(t,e,n){for(var r=arguments.length,i=new Array(3<r?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return t.renderObjs.fitToBbox((t=t.forceGraph).getGraphBbox.apply(t,i),e,n),this},pauseAnimation:function(t){return null!==t.animationFrameRequestId&&(cancelAnimationFrame(t.animationFrameRequestId),t.animationFrameRequestId=null),this},resumeAnimation:function(t){return null===t.animationFrameRequestId&&this._animationCycle(),this},_animationCycle:function(t){t.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),t.forceGraph.tickFrame(),t.renderObjs.tick(),t.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(t){return t.renderObjs.scene()},camera:function(t){return t.renderObjs.camera()},renderer:function(t){return t.renderObjs.renderer()},controls:function(t){return t.renderObjs.controls()},tbControls:function(t){return t.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},n),mt),stateInit:function(t){var e=t.controlType,n=t.rendererConfig;t=t.extraRenderers;return{forceGraph:new Ce,renderObjs:Wn({controlType:e,rendererConfig:n,extraRenderers:t})}},init:function(t,e){t.innerHTML="",t.appendChild(e.container=document.createElement("div")),e.container.style.position="relative";t=document.createElement("div");var n,r=(e.container.appendChild(t),e.renderObjs(t),e.renderObjs.camera()),i=e.renderObjs.renderer(),o=e.renderObjs.controls();o.enabled=!!e.enableNavigationControls,e.lastSetCameraZ=r.position.z,e.container.appendChild(n=document.createElement("div")),n.className="graph-info-msg",n.textContent="",e.forceGraph.onLoading((function(){n.textContent="Loading..."})).onFinishLoading((function(){n.textContent=""})).onUpdate((function(){e.graphData=e.forceGraph.graphData(),0===r.position.x&&0===r.position.y&&r.position.z===e.lastSetCameraZ&&e.graphData.nodes.length&&(r.lookAt(e.forceGraph.position),e.lastSetCameraZ=r.position.z=170*Math.cbrt(e.graphData.nodes.length))})).onFinishUpdate((function(){var t,n;e._dragControls&&((t=e.graphData.nodes.find((function(t){return t.__initialFixedPos&&!t.__disposeControlsAfterDrag})))?t.__disposeControlsAfterDrag=!0:e._dragControls.dispose(),e._dragControls=void 0),e.enableNodeDrag&&e.enablePointerInteraction&&"d3"===e.forceEngine&&((n=e._dragControls=new h(e.graphData.nodes.map((function(t){return t.__threeObj})).filter((function(t){return t})),r,i.domElement)).addEventListener("dragstart",(function(t){o.enabled=!1,t.object.__initialPos=t.object.position.clone(),t.object.__prevPos=t.object.position.clone();var e=nr(t.object).__data;e.__initialFixedPos||(e.__initialFixedPos={fx:e.fx,fy:e.fy,fz:e.fz}),e.__initialPos||(e.__initialPos={x:e.x,y:e.y,z:e.z}),["x","y","z"].forEach((function(t){return e["f".concat(t)]=e[t]})),i.domElement.classList.add("grabbable")})),n.addEventListener("drag",(function(t){var n,r=nr(t.object),i=(t.object.hasOwnProperty("__graphObjType")||(n=t.object.__initialPos,a=t.object.__prevPos,t=t.object.position,r.position.add(t.clone().sub(a)),a.copy(t),t.copy(n)),r.__data),o=r.position,a={x:o.x-i.x,y:o.y-i.y,z:o.z-i.z};["x","y","z"].forEach((function(t){return i["f".concat(t)]=i[t]=o[t]})),e.forceGraph.d3AlphaTarget(.3).resetCountdown(),i.__dragged=!0,e.onNodeDrag(i,a)})),n.addEventListener("dragend",(function(t){delete t.object.__initialPos,delete t.object.__prevPos;var r=nr(t.object).__data,a=(r.__disposeControlsAfterDrag&&(n.dispose(),delete r.__disposeControlsAfterDrag),r.__initialFixedPos);t=r.__initialPos,t={x:t.x-r.x,y:t.y-r.y,z:t.z-r.z};a&&(["x","y","z"].forEach((function(t){t="f".concat(t),void 0===a[t]&&delete r[t]})),delete r.__initialFixedPos,delete r.__initialPos,r.__dragged)&&(delete r.__dragged,e.onNodeDragEnd(r,t)),e.forceGraph.d3AlphaTarget(0).resetCountdown(),e.enableNavigationControls&&(o.enabled=!0,o.domElement)&&o.domElement.ownerDocument&&o.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"})),i.domElement.classList.remove("grabbable")})))})),e.renderObjs.objects([new $n.AmbientLight(12303291),new $n.DirectionalLight(16777215,.6),e.forceGraph]).hoverOrderComparator((function(t,e){var n;t=nr(t);return t?(e=nr(e))?(n=function(t){return"node"===t.__graphObjType})(e)-n(t):-1:1})).tooltipContent((function(t){return t=nr(t),t&&Mt(e["".concat(t.__graphObjType,"Label")])(t.__data)||""})).hoverDuringDrag(!1).onHover((function(t){var n,r,o,a,s;t=nr(t);t!==e.hoverObj&&(n=e.hoverObj?e.hoverObj.__graphObjType:null,r=e.hoverObj?e.hoverObj.__data:null,o=t?t.__graphObjType:null,a=t?t.__data:null,n&&n!==o&&(s=e["on".concat("node"===n?"Node":"Link","Hover")])&&s(null,r),o&&(s=e["on".concat("node"===o?"Node":"Link","Hover")])&&s(a,n===o?r:null),i.domElement.classList[t&&e["on".concat("node"===o?"Node":"Link","Click")]||!t&&e.onBackgroundClick?"add":"remove"]("clickable"),e.hoverObj=t)})).clickAfterDrag(!1).onClick((function(t,n){var r;t=nr(t);t?(r=e["on".concat("node"===t.__graphObjType?"Node":"Link","Click")])&&r(t.__data,n):e.onBackgroundClick&&e.onBackgroundClick(n)})).onRightClick((function(t,n){var r;t=nr(t);t?(r=e["on".concat("node"===t.__graphObjType?"Node":"Link","RightClick")])&&r(t.__data,n):e.onBackgroundRightClick&&e.onBackgroundRightClick(n)})),this._animationCycle()}}));function nr(t){for(var e=t;e&&!e.hasOwnProperty("__graphObjType");)e=e.parent;return e}},62238:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(t,e){var n=t.nodes,r=(t=t.edges,[]),i={};if(n)return n&&n.forEach((function(t,e){i[t.id]=e,r.push([])})),t&&t.forEach((function(t){var n=t.source;t=t.target,n=i[n],t=i[t];!n&&0!==n||!t&&0!==t||(r[n][t]=1,e)||(r[t][n]=1)})),r;throw new Error("invalid nodes data!")}},10369:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDIAsync",{enumerable:!0,get:function(){return r.GADDIAsync}}),Object.defineProperty(e,"connectedComponentAsync",{enumerable:!0,get:function(){return r.connectedComponentAsync}}),e.default=void 0,Object.defineProperty(e,"detectAllCyclesAsync",{enumerable:!0,get:function(){return r.detectAllCyclesAsync}}),Object.defineProperty(e,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllDirectedCycleAsync}}),Object.defineProperty(e,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllUndirectedCycleAsync}}),Object.defineProperty(e,"detectCycleAsync",{enumerable:!0,get:function(){return r.detectCycleAsync}}),e.detectDirectedCycleAsync=void 0,Object.defineProperty(e,"dijkstraAsync",{enumerable:!0,get:function(){return r.dijkstraAsync}}),Object.defineProperty(e,"findAllPathAsync",{enumerable:!0,get:function(){return r.findAllPathAsync}}),Object.defineProperty(e,"findShortestPathAsync",{enumerable:!0,get:function(){return r.findShortestPathAsync}}),Object.defineProperty(e,"floydWarshallAsync",{enumerable:!0,get:function(){return r.floydWarshallAsync}}),Object.defineProperty(e,"getAdjMatrixAsync",{enumerable:!0,get:function(){return r.getAdjMatrixAsync}}),Object.defineProperty(e,"getDegreeAsync",{enumerable:!0,get:function(){return r.getDegreeAsync}}),Object.defineProperty(e,"getInDegreeAsync",{enumerable:!0,get:function(){return r.getInDegreeAsync}}),Object.defineProperty(e,"getNeighborsAsync",{enumerable:!0,get:function(){return r.getNeighborsAsync}}),Object.defineProperty(e,"getOutDegreeAsync",{enumerable:!0,get:function(){return r.getOutDegreeAsync}}),Object.defineProperty(e,"labelPropagationAsync",{enumerable:!0,get:function(){return r.labelPropagationAsync}}),Object.defineProperty(e,"louvainAsync",{enumerable:!0,get:function(){return r.louvainAsync}}),Object.defineProperty(e,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return r.minimumSpanningTreeAsync}}),Object.defineProperty(e,"pageRankAsync",{enumerable:!0,get:function(){return r.pageRankAsync}});var r=n(30485);n=r.detectCycleAsync,e.detectDirectedCycleAsync=n,n={getAdjMatrixAsync:r.getAdjMatrixAsync,connectedComponentAsync:r.connectedComponentAsync,getDegreeAsync:r.getDegreeAsync,getInDegreeAsync:r.getInDegreeAsync,getOutDegreeAsync:r.getOutDegreeAsync,detectCycleAsync:r.detectCycleAsync,detectDirectedCycleAsync:n,detectAllCyclesAsync:r.detectAllCyclesAsync,detectAllDirectedCycleAsync:r.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:r.detectAllUndirectedCycleAsync,dijkstraAsync:r.dijkstraAsync,findAllPathAsync:r.findAllPathAsync,findShortestPathAsync:r.findShortestPathAsync,floydWarshallAsync:r.floydWarshallAsync,labelPropagationAsync:r.labelPropagationAsync,louvainAsync:r.louvainAsync,minimumSpanningTreeAsync:r.minimumSpanningTreeAsync,pageRankAsync:r.pageRankAsync,getNeighborsAsync:r.getNeighborsAsync,GADDIAsync:r.GADDIAsync};e.default=n},83764:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(93026))&&r.__esModule?r:{default:r},o=n(70643);function a(t){function e(){}function n(t){return t=t.next,!r[t]&&(r[t]=!0)}var r,i=t=void 0===t?{}:t;return r={},i.allowTraversal=t.allowTraversal||n,i.enter=t.enter||e,i.leave=t.leave||e,i}e.default=function(t,e,n,r){void 0===r&&(r=!0);for(var s=a(n),u=new i.default,c=(n=t.edges,void 0===n?[]:n),l=(u.enqueue(e),"");!u.isEmpty();)!function(){var t=u.dequeue();s.enter({current:t,previous:l}),(0,o.getNeighbors)(t,c,r?"target":void 0).forEach((function(e){s.allowTraversal({previous:l,current:t,next:e})&&u.enqueue(e)})),s.leave({current:t,previous:l}),l=t}()}},59527:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(e?o:i)(t)},e.detectStrongConnectComponents=e.detectConnectedComponents=void 0;var r=n(70643),i=function(t){for(var e=t.nodes,n=void 0===e?[]:e,i=(e=t.edges,void 0===e?[]:e),o=[],a={},s=[],u=function t(e){s.push(e),a[e.id]=!0;for(var o=(0,r.getNeighbors)(e.id,i),u=0;u<o.length;++u)!function(e){var r=o[e];a[r]||0<(e=n.filter((function(t){return t.id===r}))).length&&t(e[0])}(u)},c=0;c<n.length;c++){var l=n[c];if(!a[l.id]){u(l);for(var h=[];0<s.length;)h.push(s.pop());o.push(h)}}return o},o=(e.detectConnectedComponents=i,function(t){for(var e=t.nodes,n=void 0===e?[]:e,i=(e=t.edges,void 0===e?[]:e),o=[],a={},s={},u={},c=[],l=0,h=function t(e){s[e.id]=l,u[e.id]=l,l+=1,o.push(e),a[e.id]=!0;for(var h=(0,r.getNeighbors)(e.id,i,"target").filter((function(t){return-1<n.map((function(t){return t.id})).indexOf(t)})),f=0;f<h.length;f++)!function(r){var i=h[r];s[i]||0===s[i]?a[i]&&(u[e.id]=Math.min(u[e.id],s[i])):(0<(r=n.filter((function(t){return t.id===i}))).length&&t(r[0]),u[e.id]=Math.min(u[e.id],u[i]))}(f);if(u[e.id]===s[e.id]){for(var d=[];0<o.length;){var p=o.pop();if(a[p.id]=!1,d.push(p),p===e)break}0<d.length&&c.push(d)}},f=0,d=n;f<d.length;f++){var p=d[f];s[p.id]||0===s[p.id]||h(p)}return c});e.detectStrongConnectComponents=o},92935:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.secondReg=e.dateReg=void 0,e.secondReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,e.dateReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/},82556:function(t,e){"use strict";function n(t){var e={},n=void 0===(n=t.nodes)?[]:n;t=void 0===(t=t.edges)?[]:t;return n.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),t.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e}Object.defineProperty(e,"__esModule",{value:!0}),e.getOutDegree=e.getInDegree=e.default=void 0,e.default=n,e.getInDegree=function(t,e){return n(t)[e]?n(t)[e].inDegree:0},e.getOutDegree=function(t,e){return n(t)[e]?n(t)[e].outDegree:0}},94282:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.detectAllUndirectedCycle=e.detectAllDirectedCycle=e.detectAllCycles=e.default=void 0;var i,o=(i=n(45891))&&i.__esModule?i:{default:i},a=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};if(e=u(e),e&&e.has(t))return e.get(t);var n,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&((a=o?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(i,n,a):i[n]=t[n])}return i.default=t,e&&e.set(t,i),i}(n(59527)),s=n(70643);function u(t){var e,n;return"function"!=typeof WeakMap?null:(e=new WeakMap,n=new WeakMap,(u=function(t){return t?n:e})(t))}function c(t,e,n){void 0===n&&(n=!0);for(var r,i=[],o=0,u=(0,a.default)(t,!1);o<u.length;o++){var c=u[o];if(c.length){c=c[0];for(var l=c.id,h=[c],f=((r={})[l]=c,r),d=((c={})[l]=new Set,c);0<h.length;)for(var p=h.pop(),g=p.id,m=(0,s.getNeighbors)(g,t.edges),v=0;v<m.length;v+=1)!function(r){var o=m[r];r=t.nodes.find((function(t){return t.id===o}));if(o===g)i.push(((a={})[o]=p,a));else if(o in d){if(!d[g].has(r)){for(var a=!0,s=[r,p],u=f[g];d[o].size&&!d[o].has(u)&&(s.push(u),u!==f[u.id]);)u=f[u.id];if(s.push(u),e&&n?(a=!1,-1<s.findIndex((function(t){return-1<e.indexOf(t.id)}))&&(a=!0)):e&&!n&&-1<s.findIndex((function(t){return-1<e.indexOf(t.id)}))&&(a=!1),a){for(var c={},l=1;l<s.length;l+=1)c[s[l-1].id]=s[l];s.length&&(c[s[s.length-1].id]=s[0]),i.push(c)}d[o].add(p)}}else f[o]=p,h.push(r),d[o]=new Set([p])}(v)}}return i}function l(t,e,n){void 0===n&&(n=!0);for(var r=[],i=new Set,o=[],u=[],c={},l={},h=function t(a,s,l){var h=!1;if(!(e&&!1===n&&-1<e.indexOf(a.id))){r.push(a),i.add(a);for(var f=l[a.id],d=0;d<f.length;d+=1)if((y=c[f[d]])===s){for(var p={},g=1;g<r.length;g+=1)p[r[g-1].id]=r[g];r.length&&(p[r[r.length-1].id]=r[0]),u.push(p),h=!0}else i.has(y)||t(y,s,l)&&(h=!0);if(h)for(var m=[a];0<m.length;){var v=m.pop();i.has(v)&&(i.delete(v),o[v.id].forEach((function(t){m.push(t)})),o[v.id].clear())}else for(d=0;d<f.length;d+=1){var y=c[f[d]];o[y.id].has(a)||o[y.id].add(a)}r.pop()}return h},f=t.nodes,d=void 0===f?[]:f,p=0;p<d.length;p+=1){var g=d[p],m=g.id;c[l[m]=p]=g}if(e&&n)for(p=0;p<e.length;p++)!function(t){var n=e[t];l[d[t].id]=l[n],c[l[n]=0]=d.find((function(t){return t.id===n})),c[l[d[t].id]]=d[t]}(p);for(var v=0;v<d.length;){var y=d.filter((function(t){return l[t.id]>=v}));y=(0,a.detectStrongConnectComponents)({nodes:y,edges:t.edges}).filter((function(t){return 1<t.length}));if(0===y.length)break;y=function(r){for(var i,o=1/0,a=0;a<r.length;a+=1)for(var c=r[a],h=0;h<c.length;h++){var f=l[c[h].id];f<o&&(o=f,i=a)}var d=r[i],p=[];for(a=0;a<d.length;a+=1){var g=d[a];p[g.id]=[];for(var m=0,v=(0,s.getNeighbors)(g.id,t.edges,"target").filter((function(t){return-1<d.map((function(t){return t.id})).indexOf(t)}));m<v.length;m++){var y=v[m];y!==g.id||!1===n&&-1<e.indexOf(g.id)?p[g.id].push(l[y]):u.push(((y={})[g.id]=g,y))}}return{component:d,adjList:p,minIdx:o}}(y);var b=y.minIdx,x=y.adjList;y=y.component;if(!(1<y.length))break;if(y.forEach((function(t){o[t.id]=new Set})),y=c[b],e&&n&&-1===e.indexOf(y.id))return u;h(y,y,x),v=b+1}return u}function h(t){for(var e=null,n=t.nodes,r={},i={},a={},s={},u=((void 0===n?[]:n).forEach((function(t){i[t.id]=t})),{enter:function(t){var n=t.current;t=t.previous;if(a[n]){e={};for(var o=n,s=t;s!==n;)e[o]=s,s=r[o=s];e[o]=s}else delete i[a[n]=n],r[n]=t},leave:function(t){t=t.current,delete a[s[t]=t]},allowTraversal:function(t){return t=t.next,!e&&!s[t]}});Object.keys(i).length;){var c=Object.keys(i)[0];(0,o.default)(t,c,u)}return e}e.detectAllUndirectedCycle=c,e.detectAllDirectedCycle=l,e.detectAllCycles=function(t,e,n,r){return void 0===r&&(r=!0),(e?l:c)(t,n,r)},e.default=h},45891:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){!function t(e,n,i,o){o.enter({current:n,previous:i});var a=e.edges;a=void 0===a?[]:a;(0,r.getNeighbors)(n,a,"target").forEach((function(r){o.allowTraversal({previous:i,current:n,next:r})&&t(e,r,n,o)})),o.leave({current:n,previous:i})}(t,e,"",function(t){function e(){}void 0===t&&(t={});var n=t,r=function(){var t={};return function(e){return e=e.next,!t[e]&&(t[e]=!0)}}();return n.allowTraversal=t.allowTraversal||r,n.enter=t.enter||e,n.leave=t.leave||e,n}(n))};var r=n(70643)},78089:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(92578),i=n(14062),o=n(70643);e.default=function(t,e,n,a){for(var s=t.nodes,u=void 0===s?[]:s,c=(s=t.edges,void 0===s?[]:s),l=[],h={},f={},d={},p=(u.forEach((function(t,n){t=t.id,l.push(t),f[t]=1/0,t===e&&(f[t]=0)})),u.length),g=0;g<p;g++)!function(){var t=function(t,e,n){for(var r,i=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=i&&(i=t[a],r=e[o])}return r}(f,u,h),e=t.id;h[e]=!0,f[e]!==1/0&&(n?o.getOutEdgesNodeId:o.getEdgesByNodeId)(e,c).forEach((function(n){var r=n.target,i=n.source;i=r===e?i:r,r=a&&n[a]?n[a]:1;f[i]>f[t.id]+r?(f[i]=f[t.id]+r,d[i]=[t.id]):f[i]===f[t.id]+r&&d[i].push(t.id)}))}();d[e]=[e];var m={};for(v in f)f[v]!==1/0&&function t(e,n,o,a){if(e===n)return[e];if(a[n])return a[n];for(var s=[],u=0,c=o[n];u<c.length;u++){var l=c[u];l=t(e,l,o,a);if(!l)return;for(var h=0,f=l;h<f.length;h++){var d=f[h];(0,i.isArray)(d)?s.push((0,r.__spreadArray)((0,r.__spreadArray)([],d,!0),[n],!1)):s.push([d,n])}}return a[n]=s,a[n]}(e,v,d,m);var v,y={};for(v in m)y[v]=m[v][0];return{length:f,path:y,allPath:m}}},41727:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findShortestPath=e.findAllPath=void 0;var r,i=(r=n(78089))&&r.__esModule?r:{default:r},o=n(70643);e.findShortestPath=function(t,e,n,r,o){return t=(0,i.default)(t,e,r,o),e=t.length,r=t.path,o=t.allPath,{length:e[n],path:r[n],allPath:o[n]}},e.findAllPath=function(t,e,n,r){if(e===n)return[[e]];t=t.edges;var i=void 0===t?[]:t,a=[e],s=((t={})[e]=!0,t),u=[],c=[],l=r?(0,o.getNeighbors)(e,i,"target"):(0,o.getNeighbors)(e,i);for(u.push(l);0<a.length&&0<u.length;){var h,f=u[u.length-1];f.length?((f=f.shift())&&(a.push(f),s[f]=!0,l=r?(0,o.getNeighbors)(f,i,"target"):(0,o.getNeighbors)(f,i),u.push(l.filter((function(t){return!s[t]})))),a[a.length-1]===n&&(f=a.map((function(t){return t})),c.push(f),h=a.pop(),s[h]=!1,u.pop())):(h=a.pop(),s[h]=!1,u.pop())}return c}},75033:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=(n=n(62238))&&n.__esModule?n:{default:n};e.default=function(t,e){for(var n=(0,r.default)(t,e),i=[],o=n.length,a=0;a<o;a+=1){i[a]=[];for(var s=0;s<o;s+=1)a===s?i[a][s]=0:0!==n[a][s]&&n[a][s]?i[a][s]=n[a][s]:i[a][s]=1/0}for(var u=0;u<o;u+=1)for(a=0;a<o;a+=1)for(s=0;s<o;s+=1)i[a][s]>i[a][u]+i[u][s]&&(i[a][s]=i[a][u]+i[u][s]);return i}},21146:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(14062),i=n(68575),o=(a.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},a.prototype.notEqualTo=function(t){return!this.equalTo(t)},a);function a(t,e,n,r,o){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||i.VACANT_NODE_LABEL,edgeLabel:r||i.VACANT_EDGE_LABEL,nodeLabel2:o||i.VACANT_NODE_LABEL}}u.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},u.prototype.notEqualTo=function(t){return!this.equalTo(t)},u.prototype.pushBack=function(t,e,n,r,i){return this.dfsEdgeList.push(new o(t,e,n,r,i)),this.dfsEdgeList},u.prototype.toGraph=function(t,e){void 0===t&&(t=i.VACANT_GRAPH_ID);var n=new i.Graph(t,!0,e=void 0!==e&&e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,r=t.toNode,o=(t=t.nodeEdgeNodeLabel,t.nodeLabel1),a=t.edgeLabel;t=t.nodeLabel2;o!==i.VACANT_NODE_LABEL&&n.addNode(e,o),t!==i.VACANT_NODE_LABEL&&n.addNode(r,t),o!==i.VACANT_NODE_LABEL&&t!==o&&n.addEdge(void 0,e,r,a)})),n},u.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;0<=e;e--){var n=this.dfsEdgeList[e],r=n.fromNode;n=n.toNode;r<n&&(void 0===t||n===t)&&(this.rmpath.push(e),t=r)}return this.rmpath},u.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length};var s=u;function u(){this.rmpath=[],this.dfsEdgeList=[]}l.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},l.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]};var c=l;function l(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}f.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],i=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=i[t.to].label)&&r.push(t)})),r},f.prototype.findBackwardEdge=function(t,e,n,r){if(this.directed||e!==n)for(var i=t.nodeMap,o=i[n.to].edges,a=o.length,s=0;s<a;s++){var u=o[s];if(!r.hasEdge(u)&&u.to===e.from)if(this.directed){if(i[e.from].label<i[n.to].label||i[e.from].label===i[n.to].label&&e.label<=u.label)return u}else if(e.label<u.label||e.label===u.label&&i[e.to].label<=i[n.to].label)return u}return null},f.prototype.findForwardPureEdges=function(t,e,n,r){for(var i=[],o=(e=e.to,t.nodeMap[e].edges),a=o.length,s=0;s<a;s++){var u=o[s],c=t.nodeMap[u.to];n<=c.label&&!r.hasNode(c)&&i.push(u)}return i},f.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var i=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from].edges,u=s.length,c=0;c<u;c++){var l=s[c],h=o[l.to].label;e.to===l.to||h<n||r.hasNode(o[l.to])||(e.label<l.label||e.label===l.label&&a<=h)&&i.push(l)}return i},f.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},f.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){n=t[n];var r=n.nodeLabel1,i=n.edgeLabel;n=n.nodeLabel2;(!e||r<e.nodeLabel1||r===e.nodeLabel1&&i<e.edgeLabel||r===e.nodeLabel1&&i===e.edgeLabel&&n<e.nodeLabel2)&&(e={nodeLabel1:r,edgeLabel:i,nodeLabel2:n})})),e},f.prototype.isMin=function(){var t,e,n,r,a,u,l,h=this,f=this.dfsCode;return this.verbose,1===f.dfsEdgeList.length||(t=this.directed,e=f.toGraph(i.VACANT_GRAPH_ID,t),n=e.nodeMap,r=new s,a={},e.nodes.forEach((function(t){h.findForwardRootEdges(e,t).forEach((function(r){var i=n[r.to],o="".concat(t.label,"-").concat(r.label,"-").concat(i.label);a[o]||(a[o]={projected:[],nodeLabel1:t.label,edgeLabel:r.label,nodeLabel2:i.label}),i={graphId:e.id,edge:r,preNode:null};a[o].projected.push(i)}))})),(l=this.findMinLabel(a))?(r.dfsEdgeList.push(new o(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2)),u=function a(s){for(var u=r.buildRmpath(),l=r.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,d=r.dfsEdgeList[u[0]].toNode,p={},g=!1,m=0,v=t?-1:0,y=u.length-1;v<y&&"break"!==function(t){if(g)return"break";s.forEach((function(n){var i=new c(n);i=h.findBackwardEdge(e,i.edges[u[t]],i.edges[u[0]],i);i&&(p[i.label]||(p[i.label]={projected:[],edgeLabel:i.label}),p[i.label].projected.push({graphId:e.id,edge:p,preNode:n}),m=r.dfsEdgeList[u[t]].fromNode,g=!0)}))}(y);y--);if(g)return x=h.findMinLabel(p),r.dfsEdgeList.push(new o(d,m,i.VACANT_NODE_LABEL,x.edgeLabel,i.VACANT_NODE_LABEL)),b=r.dfsEdgeList.length-1,h.dfsCode.dfsEdgeList[b]===r.dfsEdgeList[b]&&a(p[x.edgeLabel].projected);var b,x,_={},w=(g=!1,0),S=(s.forEach((function(t){var r=new c(t);r=h.findForwardPureEdges(e,r.edges[u[0]],l,r);0<r.length&&(g=!0,w=d,r.forEach((function(r){var i="".concat(r.label,"-").concat(n[r.to].label);_[i]||(_[i]={projected:[],edgeLabel:r.label,nodeLabel2:n[r.to].label}),_[i].projected.push({graphId:e.id,edge:r,preNode:t})})))})),u.length);for(y=0;y<S&&"break"!==function(t){if(g)return"break";var i=u[t];s.forEach((function(t){var o=new c(t);o=h.findForwardRmpathEdges(e,o.edges[i],l,o);0<o.length&&(g=!0,w=r.dfsEdgeList[i].fromNode,o.forEach((function(r){var i="".concat(r.label,"-").concat(n[r.to].label);_[i]||(_[i]={projected:[],edgeLabel:r.label,nodeLabel2:n[r.to].label}),_[i].projected.push({graphId:e.id,edge:r,preNode:t})})))}))}(y);y++);return!g||(b=h.findMinLabel(_),r.dfsEdgeList.push(new o(w,d+1,i.VACANT_NODE_LABEL,b.edgeLabel,b.nodeLabel2)),x=r.dfsEdgeList.length-1,f.dfsEdgeList[x]===r.dfsEdgeList[x]&&a(_["".concat(b.edgeLabel,"-").concat(b.nodeLabel2)].projected))},l="".concat(l.nodeLabel1,"-").concat(l.edgeLabel,"-").concat(l.nodeLabel2),u(a[l].projected)):void 0)},f.prototype.report=function(){var t;this.dfsCode.getNodeNum()<this.minNodeNum||(this.counter++,t=this.dfsCode.toGraph(this.counter,this.directed),this.frequentSubgraphs.push((0,r.clone)(t)))},f.prototype.subGraphMining=function(t){var e,n,r,a,s,u,l=this;this.getSupport(t)<this.minSupport||this.isMin()&&(this.report(),e=this.dfsCode.getNodeNum(),n=this.dfsCode.buildRmpath(),r=this.dfsCode.dfsEdgeList[n[0]].toNode,a=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,s={},u={},t.forEach((function(t){for(var i=l.graphs[t.graphId],o=i.nodeMap,h=new c(t),f=n.length-1;0<=f;f--){var d,p=l.findBackwardEdge(i,h.edges[n[f]],h.edges[n[0]],h);p&&(d="".concat(l.dfsCode.dfsEdgeList[n[f]].fromNode,"-").concat(p.label),u[d]||(u[d]={projected:[],toNodeId:l.dfsCode.dfsEdgeList[n[f]].fromNode,edgeLabel:p.label}),u[d].projected.push({graphId:t.graphId,edge:p,preNode:t}))}if(!(e>=l.maxNodeNum))for(l.findForwardPureEdges(i,h.edges[n[0]],a,h).forEach((function(e){var n="".concat(r,"-").concat(e.label,"-").concat(o[e.to].label);s[n]||(s[n]={projected:[],fromNodeId:r,edgeLabel:e.label,nodeLabel2:o[e.to].label}),s[n].projected.push({graphId:t.graphId,edge:e,preNode:t})})),f=0;f<n.length;f++)!function(e){l.findForwardRmpathEdges(i,h.edges[n[e]],a,h).forEach((function(r){var i="".concat(l.dfsCode.dfsEdgeList[n[e]].fromNode,"-").concat(r.label,"-").concat(o[r.to].label);s[i]||(s[i]={projected:[],fromNodeId:l.dfsCode.dfsEdgeList[n[e]].fromNode,edgeLabel:r.label,nodeLabel2:o[r.to].label}),s[i].projected.push({graphId:t.graphId,edge:r,preNode:t})}))}(f)})),Object.keys(u).forEach((function(t){var e=u[t],n=e.toNodeId;e=e.edgeLabel;l.dfsCode.dfsEdgeList.push(new o(r,n,"-1",e,"-1")),l.subGraphMining(u[t].projected),l.dfsCode.dfsEdgeList.pop()})),Object.keys(s).forEach((function(t){var e=s[t],n=e.fromNodeId,a=e.edgeLabel;e=e.nodeLabel2;l.dfsCode.dfsEdgeList.push(new o(n,r+1,i.VACANT_NODE_LABEL,a,e)),l.subGraphMining(s[t].projected),l.dfsCode.dfsEdgeList.pop()})))},f.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={};return Object.keys(t).forEach((function(n){var r=t[n],s=r.nodeMap;r.nodes.forEach((function(t,r){var u,c=t.label,l="".concat(n,"-").concat(c);a[l]||(u=i[c]||0,i[c]=++u),a[l]={graphKey:n,label:c},t.edges.forEach((function(t){var r,i=c,a=s[t.to].label,u=(!e&&a<i&&(u=a,a=i,i=u),t.label),l=(t="".concat(n,"-").concat(i,"-").concat(u,"-").concat(a),"".concat(i,"-").concat(u,"-").concat(a));o[l]||(r=o[l]||0,o[l]=++r)}))}))})),Object.keys(i).forEach((function(t){var e;i[t]<n||((e={nodes:[],edges:[]}).nodes.push({id:"0",label:t}),r.push(e))})),r},f.prototype.run=function(){var t,e,n=this;this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),this.maxNodeNum<2||(t=this.graphs,this.directed,e={},Object.keys(t).forEach((function(r){var i=t[r],o=i.nodeMap;i.nodes.forEach((function(t){n.findForwardRootEdges(i,t).forEach((function(n){var i=o[n.to],a="".concat(t.label,"-").concat(n.label,"-").concat(i.label);e[a]||(e[a]={projected:[],nodeLabel1:t.label,edgeLabel:n.label,nodeLabel2:i.label}),i={graphId:r,edge:n,preNode:null};e[a].projected.push(i)}))}))})),Object.keys(e).forEach((function(t){t=e[t];var r=t.projected,i=t.nodeLabel1,a=t.edgeLabel;t=t.nodeLabel2;n.dfsCode.dfsEdgeList.push(new o(0,1,i,a,t)),n.subGraphMining(r),n.dfsCode.dfsEdgeList.pop()})))};var h=f;function f(t){var e=t.graphs,n=t.minSupport,r=(n=void 0===n?2:n,t.minNodeNum),i=(r=void 0===r?1:r,t.maxNodeNum),o=(i=void 0===i?4:i,t.top),a=(o=void 0===o?10:o,t.directed);a=void 0!==a&&a,t=t.verbose,t=void 0!==t&&t;this.graphs=e,this.dfsCode=new s,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=o,this.directed=a,this.counter=0,this.maxNodeNum=i,this.minNodeNum=r,this.verbose=t,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}e.default=function(t){var e,n,r,o,a,s,u,c,l=t.graphs,f=t.directed,d=(f=void 0!==f&&f,t.nodeLabelProp),p=(d=void 0===d?"cluster":d,t.edgeLabelProp),g=(p=void 0===p?"cluster":p,l=(e=l,n=f,r=d,o=p,a={},Object.keys(e).forEach((function(t,s){t=e[t];var u=new i.Graph(s,!0,n),c={};t.nodes.forEach((function(t,e){u.addNode(e,t[r]),c[t.id]=e})),t.edges.forEach((function(t,e){var n=c[t.source],r=c[t.target];u.addEdge(-1,n,r,t[o])})),u&&u.getNodeNum()&&(a[u.id]=u)})),a),t.minSupport),m=t.maxNodeNum,v=t.minNodeNum,y=t.verbose;t=t.top,l=new h({graphs:l,minSupport:g,maxNodeNum:m,minNodeNum:v,top:t,verbose:y,directed:f});return l.run(),g=l.frequentSubgraphs,s=d,u=p,c=[],g.forEach((function(t){var e={nodes:[],edges:[]};t.nodes.forEach((function(t){var n;e.nodes.push(((n={id:"".concat(t.id)})[s]=t.label,n))})),t.edges.forEach((function(t){var n;e.edges.push(((n={source:"".concat(t.from),target:"".concat(t.to)})[u]=t.label,n))})),c.push(e)})),c}},68575:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VACANT_NODE_LABEL=e.VACANT_NODE_ID=e.VACANT_GRAPH_ID=e.VACANT_EDGE_LABEL=e.VACANT_EDGE_ID=e.Node=e.Graph=e.Edge=e.AUTO_EDGE_ID=void 0,e.VACANT_EDGE_ID=-1,e.VACANT_NODE_ID=-1,e.VACANT_EDGE_LABEL="-1",e.VACANT_NODE_LABEL="-1",e.VACANT_GRAPH_ID=-1,e.AUTO_EDGE_ID="-1";var n=function(t,e,n,r){void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=t=void 0===t?-1:t,this.from=e,this.to=n,this.label=r},r=(e.Edge=n,i.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},i);function i(t,e){void 0===e&&(e="-1"),this.id=t=void 0===t?-1:t,this.label=e,this.edges=[],this.edgeMap={}}function o(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t=void 0===t?-1:t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}e.Node=r,o.prototype.getNodeNum=function(){return this.nodes.length},o.prototype.addNode=function(t,e){var n;this.nodeMap[t]||(n=new r(t,e),this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t))},o.prototype.addEdge=function(t,e,r,i){var o;!this.edgeIdAutoIncrease&&void 0!==t||(t=this.counter++),this.nodeMap[e]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[t]||(o=new n(t,e,r,i),this.edges.push(o),this.edgeMap[t]=o,this.nodeMap[e].addEdge(o),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(o),this.directed)||(o=new n(t,r,e,i),this.nodeMap[r].addEdge(o),this.edgeLabelMap[i].push(o))},e.Graph=o},82812:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(92578),i=u(n(75033)),o=u(n(21146)),a=u(n(78089)),s=n(70643);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=t.nodes;return e.forEach((function(t,e){i.push(g(o,t,e,n,r))})),i}function l(t,e,n){for(var r=1/0,i=0,o=0;o<e;o++)!function(e){var n=t[e],o=Object.keys(n).sort((function(t,e){return n[t]-n[e]})),a=[],s=(o.forEach((function(t,e){a[e%10]||(a[e%10]={graphs:[],totalCount:0,aveCount:0}),a[e%10].graphs.push(t),a[e%10].totalCount+=n[t]})),0),u=[],c=(a.forEach((function(t){var e=t.totalCount/t.graphs.length,r=(t.aveCount=e,u.push(e),0);e=t.length;t.graphs.forEach((function(e,i){var o=n[e];t.graphs.forEach((function(t,e){i!==e&&(r+=Math.abs(o-n[t]))}))})),s+=r/=e*(e-1)/2})),s/=a.length,0);u.forEach((function(t,e){u.forEach((function(n,r){e!==r&&(c+=Math.abs(t-n))})),c/=u.length*(u.length-1)/2})),o=c-s;r<o&&(r=o,i=e)}(o);return{structure:n[i],structureCountMap:t[i]}}function h(t,e){var n={},r={};return t.forEach((function(t,i){n[t.id]={idx:i,node:t,degree:0,inDegree:0,outDegree:0},i=t[e],r[i]||(r[i]=[]),r[i].push(t)})),{nodeMap:n,nodeLabelMap:r}}function f(t,e,n){var r={},i={};return t.forEach((function(t,o){r["".concat(s.uniqueId)]={idx:o,edge:t},o=t[e],i[o]||(i[o]=[]),i[o].push(t),o=n[t.source],o&&(o.degree++,o.outDegree++),o=n[t.target],o&&(o.degree++,o.inDegree++)})),{edgeMap:r,edgeLabelMap:i}}function d(t,e,n){var r=e.length,i={};return e.forEach((function(e,o){for(var a,s,u=t[o].id,c=n?0:o+1;c<r;c++)o===c||(a=t[c].id,s=e[c],i["".concat(u,"-").concat(a)]=s,n)||(i["".concat(a,"-").concat(u)]=s)})),i}function p(t,e,n,r){var i,o=null==(i=t[e])?void 0:i.degree,a=null==(i=t[e])?void 0:i.inDegree,s=null==(i=t[e])?void 0:i.outDegree;return void 0===t[e]&&(s=a=o=1/0,r[e].forEach((function(t){var e=n[t.id].degree;e<o&&(o=e),e=n[t.id].inDegree,e<a&&(a=e),e=n[t.id].outDegree;e<s&&(s=e)})),t[e]={degree:o,inDegree:a,outDegree:s}),{minPatternNodeLabelDegree:o,minPatternNodeLabelInDegree:a,minPatternNodeLabelOutDegree:s}}var g=function(t,e,n,r,i){var o=[n],a=[],s={};return e.forEach((function(e,u){e<=i&&n!==u&&(o.push(u),a.push(t[u]),u=t[u][r],s[u]?(s[u].count++,s[u].dists.push(e)):s[u]={count:1,dists:[e]})})),Object.keys(s).forEach((function(t){s[t].dists=s[t].dists.sort((function(t,e){return t-e}))})),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},m=function(t,e,n,r){var i=n.nodes;return r=r||{},Object.keys(t).forEach((function(o){if(!r||!r[o]){r[o]={nodes:[],edges:[]};var a=t[o],s=null==(s=e[a.start])?void 0:s.nodeIdxs;a=null==(a=e[a.end])?void 0:a.nodeIdxs;if(s&&a){var u=new Set(a),c=s.filter((function(t){return u.has(t)}));if(c&&c.length){for(var l={},h=c.length,f=0;f<h;f++){var d=i[c[f]];r[o].nodes.push(d),l[d.id]=!0}n.edges.forEach((function(t){l[t.source]&&l[t.target]&&r[o].edges.push(t)}))}}}})),r},v=function(t,e,n,r){var i,o={},a=(t.nodes.forEach((function(t){o[t.id]=t})),0);return null==(i=null==e?void 0:e.edges)||!i.length||(null==(i=null==e?void 0:e.nodes)?void 0:i.length)<2?0:(t.edges.forEach((function(t){var i=o[t.source][n],s=o[t.target][n],u=null==e?void 0:e.nodes[0][n],c=null==e?void 0:e.nodes[1][n],l=null==e?void 0:e.edges[0][r];t[r]===l&&(i===u&&s===c||i===c&&s===u)&&a++})),a)};e.default=function(t,e,n,s,u,y,b){if(void 0===n&&(n=!1),void 0===y&&(y="cluster"),void 0===b&&(b="cluster"),t&&t.nodes){var x=t.nodes.length;if(x){var _=(0,i.default)(t,n),w=(0,i.default)(e,n),S=d(t.nodes,_,n),E=d(e.nodes,w,n),M=h(t.nodes,y),A=M.nodeMap,C=M.nodeLabelMap,T=(M=h(e.nodes,y),M.nodeMap),k=M.nodeLabelMap,O=(f(t.edges,b,A),f(e.edges,b,T).edgeLabelMap),P=[],I=(null!=w&&w.forEach((function(t){P=P.concat(t)})),u=u||Math.max.apply(Math,(0,r.__spreadArray)((0,r.__spreadArray)([],P,!1),[2],!1)),c(t,_,y,s=s||u)),N=c(e,w,y,s);M=Math.min(100,x*(x-1)/2);D=x,L=M,w=I,R=_,B=Math.ceil(L/D),j={},F=0,w.forEach((function(t,e){for(var n=0,r=0,i=t.nodeIdxs,o=t.neighborNum-1;n<B;){for(var a=i[1+Math.floor(Math.random()*o)],s=0;(j["".concat(e,"-").concat(a)]||j["".concat(a,"-").concat(e)])&&(a=Math.floor(Math.random()*D),!(2*D<++s)););if(s<2*D&&(j["".concat(e,"-").concat(a)]={start:e,end:a,distance:R[e][a]},n++,L<=++F))return j;if(2*D<++r)break}n<B&&(B=(B+(B-n))/(D-e-1))}));var D,L,R,B,j,F,z=m(j,I,t),U=(s={graphs:z,nodeLabelProp:y,edgeLabelProp:b,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n},x=(0,o.default)(s).slice(0,10),M=x.length,[]),G=(w=(x.forEach((function(t,e){U[e]={},Object.keys(z).forEach((function(n){var r=z[n];r=v(r,t,y,b);U[e][n]=r}))})),l(U,M,x)),w.structure),V=w.structureCountMap,W=e.nodes[0],H=[],Y=null==(s=e.nodes[0])?void 0:s[y],q=-1/0,X=(e.nodes.forEach((function(t){var e=t[y],n=C[e];(null==n?void 0:n.length)>q&&(q=n.length,H=n,Y=e,W=t)})),{}),K={},Z={},$={},J={},Q={},tt=(Object.keys(k).forEach((function(r,i){J[r]=[],n&&(Q[r]=[]);var o=-1/0,a=k[r],s={},u=(a.forEach((function(t){var e=E["".concat(W.id,"-").concat(t.id)];e&&J[r].push(e),o<e&&(o=e),s["".concat(W.id,"-").concat(t.id)]={start:0,end:T[t.id].idx,distance:e},n&&(e=E["".concat(t.id,"-").concat(W.id)])&&Q[r].push(e)})),J[r]=J[r].sort((function(t,e){return t-e})),n&&(Q[r]=Q[r].sort((function(t,e){return t-e}))),K=m(s,N,e,K),[]);if(Object.keys(s).forEach((function(t){var e;Z[t]||(e=K[t],Z[t]=v(e,G,y,b)),u.push(Z[t])})),u=u.sort((function(t,e){return e-t})),$["".concat(W.id,"-").concat(r)]=u,r!==Y)for(var c=((null==H?void 0:H.length)||0)-1;0<=c;c--)!function(e){var n=H[e],i=I[A[n.id].idx],o=i.nodeLabelCountMap[r],a=k[r].length;if(!o||o.count<a)return H.splice(e,1);for(var s=!1,c=0;c<a;c++)if(o.dists[c]>J[r][c]){s=!0;break}if(s)return H.splice(e,1);var l={},h=(i.neighbors.forEach((function(t){var e=S["".concat(n.id,"-").concat(t.id)];l["".concat(n.id,"-").concat(t.id)]={start:A[n.id].idx,end:A[t.id].idx,distance:e}})),z=m(l,I,t,z),[]),f=(Object.keys(l).forEach((function(t){var e;V[t]||(e=z[t],V[t]=v(e,G,y,b)),h.push(V[t])})),h=h.sort((function(t,e){return e-t})),!1);for(c=0;c<a;c++)if(h[c]<u[c]){f=!0;break}f&&H.splice(e,1)}(c)})),[]),et=(null!=H&&H.forEach((function(r){for(var i,o,a,s,c,l,h,f=A[r.id].idx,d=g(t.nodes,_[f],f,y,u).neighbors,x=!1,w=d.length-1;0<=w;w--){if(d.length+1<e.nodes.length)return void(x=!0);var E=d[w],M=E[y];if(k[M]&&k[M].length)if(J[M]&&J[M].length){var C="".concat(r.id,"-").concat(E.id),O=S[C],P=J[M].length-1;if(J[M][P]<O)d.splice(w,1);else{if(n){var N="".concat(E.id,"-").concat(r.id);N=S[N],P=Q[M].length-1;if(Q[M][P]<N){d.splice(w,1);continue}}var D,L=V[C]||(P=t,N=E,C=A,i=I,o=G,a=y,s=b,c=V,l=z,h=D=void 0,h="".concat((L=r).id,"-").concat(N.id),c&&c[h]?c[h]:((c=l?l[h]:void 0)||((D={})[h]={start:C[L.id].idx,end:C[N.id].idx,distance:O},c=(l=m(D,i,P,l))[h]),v(c,o,a,s)));C="".concat(W.id,"-").concat(M);(L<$[C][$[C].length-1]||(D=(O=p(X,M,T,k)).minPatternNodeLabelDegree,O.minPatternNodeLabelInDegree,O.minPatternNodeLabelOutDegree,A[E.id].degree<D))&&d.splice(w,1)}}else d.splice(w,1);else d.splice(w,1)}x||tt.push({nodes:[r].concat(d)})})),(0,a.default)(e,W.id,!1).length),nt={};n?(Object.keys(et).forEach((function(t){var e=T[t].node[y];nt[e]?nt[e].push(et[t]):nt[e]=[et[t]]})),Object.keys(nt).forEach((function(t){nt[t].sort((function(t,e){return t-e}))}))):nt=J;for(var rt=function(r){for(var i=tt[r],o=i.nodes[0],s={},u={},c=(i.nodes.forEach((function(t,e){u[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0},e=t[y],s[e]?s[e]++:s[e]=1})),[]),l={},h=(t.edges.forEach((function(t){u[t.source]&&u[t.target]&&(c.push(t),l[t[b]]?l[t[b]]++:l[t[b]]=1,u[t.source].degree++,u[t.target].degree++,u[t.source].outDegree++,u[t.target].inDegree++)})),Object.keys(O).length),f=!1,d=0;d<h;d++){var g=Object.keys(O)[d];if(!l[g]||l[g]<O[g].length){f=!0;break}}if(f)return tt.splice(r,1),"continue";if((D=c.length)<e.edges.length)return tt.splice(r,1),"break";var m=!1;for(d=D-1;0<=d&&"break"!==function(t){var e,r,i,o=c[t],a=o[b],s=O[a];return s&&s.length&&(e=u[o.source].node[y],r=u[o.target].node[y],i=!1,s.forEach((function(t){var o=T[t.source].node;t=T[t.target].node;o[y]===e&&t[y]===r&&(i=!0),n||o[y]!==r||t[y]!==e||(i=!0)})),i)?void 0:(l[a]--,s&&l[a]<s.length?(m=!0,"break"):(c.splice(t,1),u[o.source].degree--,u[o.target].degree--,u[o.source].outDegree--,u[o.target].inDegree--,"continue"))}(d);d--);if(m)return tt.splice(r,1),"continue";i.edges=c;var v=(0,a.default)(i,i.nodes[0].id,!1).length;if(Object.keys(v).reverse().forEach((function(t){var e,n,r;if(t!==i.nodes[0].id&&!m)return v[t]===1/0?(n=u[t].node[y],s[n]--,s[n]<k[n].length?void(m=!0):(r=i.nodes.indexOf(u[t].node),i.nodes.splice(r,1),void(u[t]=void 0))):(e=A[t].node[y],void(nt[e]&&nt[e].length&&!(v[t]>nt[e][nt[e].length-1])||(n=u[t].node[y],s[n]--,s[n]<k[n].length?m=!0:(r=i.nodes.indexOf(u[t].node),i.nodes.splice(r,1),u[t]=void 0))))})),m)return tt.splice(r,1),"continue";for(var x=!0,_=0;x&&!m;){if(x=!1,n?u[o.id].degree<T[W.id].degree||u[o.id].inDegree<T[W.id].inDegree||u[o.id].outDegree<T[W.id].outDegree:u[o.id].degree<T[W.id].degree){m=!0;break}if(s[o[y]]<k[o[y]].length){m=!0;break}for(var w=i.nodes.length-1;0<=w;w--){var S=i.nodes[w],E=u[S.id].degree,M=u[S.id].inDegree,C=u[S.id].outDegree,P=S[y],I=(P=p(X,P,T,k),P.minPatternNodeLabelDegree),N=P.minPatternNodeLabelInDegree;P=P.minPatternNodeLabelOutDegree;if(n?E<I||M<N||C<P:E<I){if(s[S[y]]--,s[S[y]]<k[S[y]].length){m=!0;break}i.nodes.splice(w,1),x=!(u[S.id]=void 0)}}if(m||!x&&0!==_)break;for(var D,L=c.length-1;0<=L;L--){var R=c[L];if(!u[R.source]||!u[R.target]){c.splice(L,1);var B=R[b];if(l[B]--,u[R.source]&&(u[R.source].degree--,u[R.source].outDegree--),u[R.target]&&(u[R.target].degree--,u[R.target].inDegree--),O[B]&&l[B]<O[B].length){m=!0;break}x=!0}}_++}return m||i.nodes.length<e.nodes.length||c.length<e.edges.length?(tt.splice(r,1),"continue"):void 0},it=tt.length-1;0<=it;it--)if("break"===rt(it))break;var ot=tt.length,at=function(t){for(var e={},n=(tt[t].edges.forEach((function(t){t="".concat(t.source,"-").concat(t.target,"-").concat(t.label),e[t]?e[t]++:e[t]=1})),ot-1);t<n;n--)!function(t){var n={},r=(tt[t].edges.forEach((function(t){t="".concat(t.source,"-").concat(t.target,"-").concat(t.label),n[t]?n[t]++:n[t]=1})),!0);Object.keys(n).length!==Object.keys(e).length?r=!1:Object.keys(e).forEach((function(t){n[t]!==e[t]&&(r=!1)})),r&&tt.splice(t,1)}(n);ot=tt.length};for(it=0;it<=ot-1;it++)at(it);return tt}}}},5170:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(62238))&&r.__esModule?r:{default:r},o=n(70643);e.default=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e3);for(var a=t.nodes,s=void 0===a?[]:a,u=(a=t.edges,a=void 0===a?[]:a,{}),c={},l=(t=(s.forEach((function(t,e){var n=(0,o.uniqueId)();t.clusterId=n,u[n]={id:n,nodes:[t]},c[t.id]={node:t,idx:e}})),(0,i.default)(t,e)),[]),h={},f=(t.forEach((function(t,e){var n=0,r=s[e].id;h[r]={},t.forEach((function(t,e){t&&(n+=t,e=s[e].id,h[r][e]=t)})),l.push(n)})),0);f<r&&"break"!==function(){var t=!1;if(s.forEach((function(e){var n,r,i={},o=(Object.keys(h[e.id]).forEach((function(t){var n=h[e.id][t];t=c[t].node.clusterId;i[t]||(i[t]=0),i[t]+=n})),-1/0),a=[];Object.keys(i).forEach((function(t){o<i[t]?(o=i[t],a=[t]):o===i[t]&&a.push(t)})),1===a.length&&a[0]===e.clusterId||(0<=(n=a.indexOf(e.clusterId))&&a.splice(n,1),a&&a.length&&(t=!0,r=(n=u[e.clusterId]).nodes.indexOf(e),n.nodes.splice(r,1),n=Math.floor(Math.random()*a.length),(r=u[a[n]]).nodes.push(e),e.clusterId=r.id))})),!t)return"break";f++}(););Object.keys(u).forEach((function(t){var e=u[t];e.nodes&&e.nodes.length||delete u[t]}));var d=[],p={},g=(a.forEach((function(t){var e=t.source,r=t.target,i=(t=t[n]||1,e=c[e].node.clusterId,r=c[r].node.clusterId,"".concat(e,"---").concat(r));p[i]?(p[i].weight+=t,p[i].count++):d.push(p[i]={source:e,target:r,weight:t,count:1})})),[]);return Object.keys(u).forEach((function(t){g.push(u[t])})),{clusters:g,clusterEdges:d}}},35179:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(14062),i=u(n(62238)),o=u(n(29741)),a=n(3665),s=n(26838);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,r){for(var i=e.length,o=2*r,a=0,s=0;s<i;s++)for(var u=t[s].clusterId,c=0;c<i;c++)u===t[c].clusterId&&(a+=(e[s][c]||0)-(n[s]||0)*(n[c]||0)/o);return a*(1/o)}function l(t,e){for(var n=(t=void 0===t?[]:t).length,r=new o.default([]),i=0;i<n;i++)r=r.add(new o.default(e[i]));var a=r.avg(n),s=(a.normalize(),0);for(i=0;i<n;i++)s+=(l=new o.default(e[i])).squareEuclideanDistance(a);var u=[];for(t.forEach((function(){u.push([])})),i=0;i<n;i++)for(var c,l=new o.default(e[i]),h=t[i].clusterInertial=0;h<n;h++)i===h?u[i][h]=0:(c=new o.default(e[h]),u[i][h]=l.squareEuclideanDistance(c),t[i].clusterInertial+=u[i][h]);var f=0,d=2*n*s;for(i=0;i<n;i++){var p=t[i].clusterId;for(h=0;h<n;h++){var g=t[h].clusterId;i!==h&&p===g&&(f+=t[i].clusterInertial*t[h].clusterInertial/Math.pow(d,2)-u[i][h]/d)}}return Number(f.toFixed(4))}e.default=function(t,e,n,o,u,h,f,d,p){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===o&&(o=1e-4),void 0===u&&(u=!1),void 0===h&&(h=void 0),void 0===f&&(f=[]),void 0===d&&(d=["id"]),void 0===p&&(p=1);for(var g,m=t.nodes,v=void 0===m?[]:m,y=(m=t.edges,void 0===m?[]:m),b=[],x=(u&&(v.forEach((function(t,e){t.properties=t.properties||{},t.originIndex=e})),g=[],v.every((function(t){return t.hasOwnProperty("nodeType")}))&&(g=Array.from(new Set(v.map((function(t){return t.nodeType})))),v.forEach((function(t){t.properties.nodeType=g.findIndex((function(e){return e===t.nodeType}))}))),m=(0,a.getAllProperties)(v,h),b=(0,s.oneHot)(m,f,d)),1),_={},w={},S=(v.forEach((function(t,e){var n=String(x++);t.clusterId=n,_[n]={id:n,nodes:[t]},w[t.id]={node:t,idx:e}})),(0,i.default)(t,e)),E=[],M={},A=0,C=(S.forEach((function(t,e){var n=0,r=v[e].id;M[r]={},t.forEach((function(t,e){t&&(n+=t,e=v[e].id,M[r][e]=t,A+=t)})),E.push(n)})),A/=2,1/0),T=1/0,k=0,O=[],P={};;){C=u&&v.every((function(t){return t.hasOwnProperty("properties")}))?c(v,S,E,A)+l(v,b)*p:c(v,S,E,A),0===k&&(T=C,O=v,P=_);var I=0<C&&T<C&&C-T<o;if(T<C&&(O=v.map((function(t){return{node:t,clusterId:t.clusterId}})),P=(0,r.clone)(_),T=C),I||100<k)break;k++,Object.keys(_).forEach((function(t){var e=0;y.forEach((function(r){var i=r.source,o=r.target;i=w[i].node.clusterId,o=w[o].node.clusterId;(i===t&&o!==t||o===t&&i!==t)&&(e+=r[n]||1)})),_[t].sumTot=e})),v.forEach((function(t,e){var r,i,o,a,s=_[t.clusterId],c=0,h=E[e]/(2*A),f=0,d=s.nodes,g=(d.forEach((function(t){t=w[t.id].idx,f+=S[e][t]||0})),f-s.sumTot*h),m=(d=d.filter((function(e){return e.id!==t.id})),d.forEach((function(t,e){b[t.originIndex]})),l(d,b)*p);d=M[t.id];Object.keys(d).forEach((function(n){var i,o,a;n=w[n].node.clusterId;n!==t.clusterId&&(o=(n=_[n]).nodes)&&o.length&&(i=0,o.forEach((function(t){t=w[t.id].idx,i+=S[e][t]||0})),a=i-n.sumTot*h,o=o.concat([t]),o.forEach((function(t,e){b[t.originIndex]})),o=l(o,b)*p,c<(a=u?a+o-(g+m):a-g))&&(c=a,r=n)})),0<c&&(r.nodes.push(t),i=t.clusterId,t.clusterId=r.id,d=s.nodes.indexOf(t),s.nodes.splice(d,1),a=o=0,y.forEach((function(t){var e=t.source,s=t.target;e=w[e].node.clusterId,s=w[s].node.clusterId;(e===r.id&&s!==r.id||s===r.id&&e!==r.id)&&(o+=t[n]||1),(e===i&&s!==i||s===i&&e!==i)&&(a+=t[n]||1)})),r.sumTot=o,s.sumTot=a)}))}var N={},D=0,L=(Object.keys(P).forEach((function(t){var e,n=P[t];n.nodes&&n.nodes.length?(e=String(D+1))!==t&&(n.id=e,n.nodes=n.nodes.map((function(t){return{id:t.id,clusterId:e}})),P[e]=n,N[t]=e,delete P[t],D++):delete P[t]})),O.forEach((function(t){var e=t.node;t=t.clusterId;e&&(e.clusterId=t,e.clusterId)&&N[e.clusterId]&&(e.clusterId=N[e.clusterId])})),[]),R={},B=(y.forEach((function(t){var e,r=t.source,i=t.target;t=t[n]||1,r=w[r].node.clusterId,i=w[i].node.clusterId;r&&i&&(e="".concat(r,"---").concat(i),R[e]?(R[e].weight+=t,R[e].count++):L.push(R[e]={source:r,target:i,weight:t,count:1}))})),[]);return Object.keys(P).forEach((function(t){B.push(P[t])})),{clusters:B,clusterEdges:L}}},89454:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n(38823)),i=a(n(57085)),o=n(70643);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var n=[],r=void 0===(r=t.nodes)?[]:r,a=void 0===(t=t.edges)?[]:t;if(0!==r.length){t=r[0];var s=new Set,u=(s.add(t),new i.default((function(t,n){return e?t.weight-n.weight:0})));for((0,o.getEdgesByNodeId)(t.id,a).forEach((function(t){u.insert(t)}));!u.isEmpty();){var c=u.delMin(),l=c.source,h=c.target;s.has(l)&&s.has(h)||(n.push(c),s.has(l)||(s.add(l),(0,o.getEdgesByNodeId)(l,a).forEach((function(t){u.insert(t)}))),s.has(h))||(s.add(h),(0,o.getEdgesByNodeId)(h,a).forEach((function(t){u.insert(t)})))}}return n}function u(t,e){var n=[],i=void 0===(i=t.nodes)?[]:i;t=void 0===(t=t.edges)?[]:t;if(0!==i.length)for(var o=t.map((function(t){return t})),a=(e&&o.sort((function(t,e){return t.weight-e.weight})),new r.default(i.map((function(t){return t.id}))));0<o.length;){var s=o.shift(),u=s.source,c=s.target;a.connected(u,c)||(n.push(s),a.union(u,c))}return n}e.default=function(t,e,n){return n?{prim:s,kruskal:u}[n](t,e):u(t,e)}},74926:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(82556))&&r.__esModule?r:{default:r},o=n(70643);e.default=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var r=1,a=0,s=1e3,u=t.nodes,c=void 0===u?[]:u,l=(u=t.edges,void 0===u?[]:u),h=c.length,f={},d={},p=0;p<h;++p)f[m=(w=c[p]).id]=1/h,d[m]=1/h;for(var g=(0,i.default)(t);0<s&&e<r;){for(a=0,p=0;p<h;++p){var m=(w=c[p]).id,v=0;if(0===g[w.id].inDegree)f[m]=0;else{for(var y=(0,o.getNeighbors)(m,l,"source"),b=0;b<y.length;++b){var x=y[b],_=g[x].outDegree;0<_&&(v+=d[x]/_)}f[m]=n*v,a+=f[m]}}a=(1-a)/h;var w;for(r=0,p=0;p<h;++p)v=f[m=(w=c[p]).id]+a,r+=Math.abs(v-d[m]),d[m]=v;--s}return d}},57085:function(t,e){"use strict";function n(t,e){return t-e}function r(t){this.compareFn=t=void 0===t?n:t,this.list=[]}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r.prototype.getLeft=function(t){return 2*t+1},r.prototype.getRight=function(t){return 2*t+2},r.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},r.prototype.isEmpty=function(){return this.list.length<=0},r.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},r.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return 0<this.list.length&&(this.list[0]=e,this.moveDown(0)),t},r.prototype.insert=function(t){return null!==t&&(this.list.push(t),t=this.list.length-1,this.moveUp(t),!0)},r.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&0<t&&0<this.compareFn(this.list[e],this.list[t]);){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},r.prototype.moveDown=function(t){var e=t,n=this.getLeft(t),r=this.getRight(t),i=this.list.length;null!==n&&n<i&&0<this.compareFn(this.list[e],this.list[n])?e=n:null!==r&&r<i&&0<this.compareFn(this.list[e],this.list[r])&&(e=r),t!==e&&(n=[this.list[e],this.list[t]],this.list[t]=n[0],this.list[e]=n[1],this.moveDown(e))},e.default=r},88481:function(t,e){"use strict";function n(t,e){return t===e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.LinkedListNode=void 0,i.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)};var r=i;function i(t,e){void 0===e&&(e=null),this.value=t,this.next=e}function o(t){void 0===t&&(t=n),this.head=null,this.tail=null,this.compare=t}e.LinkedListNode=r,o.prototype.prepend=function(t){return t=new r(t,this.head),this.head=t,this.tail||(this.tail=t),this},o.prototype.append=function(t){return t=new r(t),this.head?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),this},o.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},o.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,r=(e=t.callback,void 0===e?void 0:e);if(this.head)for(var i=this.head;i;){if(r&&r(i.value))return i;if(void 0!==n&&this.compare(i.value,n))return i;i=i.next}return null},o.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)this.head=null,this.tail=null;else{for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;this.tail=e}return t},o.prototype.deleteHead=function(){var t;return this.head?(t=this.head,this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t):null},o.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},o.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},o.prototype.reverse=function(){for(var t,e=this.head,n=null;e;)t=e.next,e.next=n,n=e,e=t;this.tail=this.head,this.head=n},o.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},e.default=o},93026:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=(n=n(88481))&&n.__esModule?n:{default:n};function i(){this.linkedList=new r.default}i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(t){this.linkedList.append(t)},i.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},i.prototype.toString=function(t){return this.linkedList.toString(t)},e.default=i},38823:function(t,e){"use strict";function n(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},n.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},n.prototype.connected=function(t,e){return this.find(t)===this.find(e)},e.default=n},17892:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DistanceType=void 0,e.DistanceType=void 0,(e.DistanceType={}).EuclideanDistance="euclideanDistance"},70643:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueId=e.getOutEdgesNodeId=e.getNeighbors=e.getEdgesByNodeId=void 0,e.getNeighbors=function(t,e,n){return e=(e=void 0===e?[]:e).filter((function(e){return e.source===t||e.target===t})),"target"===n?e.filter((function(e){return e.source===t})).map((function(t){return t.target})):"source"===n?e.filter((function(e){return e.target===t})).map((function(t){return t.source})):e.map((function(e){return e.source===t?e.target:e.source}))},e.getOutEdgesNodeId=function(t,e){return e.filter((function(e){return e.source===t}))},e.getEdgesByNodeId=function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))},e.uniqueId=function(t){void 0===t&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)}},26838:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.oneHot=e.getDistance=e.getAllKeyValueMap=e.default=void 0;var r=n(14062),i=n(17892),o=(n=n(29741))&&n.__esModule?n:{default:n};function a(t,e,n){var i=[],o=(i=null!=e&&e.length?e:(t.forEach((function(t){i=i.concat(Object.keys(t))})),(0,r.uniq)(i)),{});return i.forEach((function(e){var i=[];t.forEach((function(t){void 0!==t[e]&&""!==t[e]&&i.push(t[e])})),!i.length||null!=n&&n.includes(e)||(o[e]=(0,r.uniq)(i))})),o}function s(t,e,n){var r=a(t,e,n),i=[];return Object.keys(r).length&&t.forEach((function(t,e){var n,o=[];1===Object.keys(r).length?(n=Object.keys(r)[0],r[n].every((function(t){return!isNaN(Number(t))}))&&(o=[t[n]])):Object.keys(r).forEach((function(e){for(var n=t[e],i=r[e],a=i.findIndex((function(t){return n===t})),s=[],u=0;u<i.length;u++)s.push(u===a?1:0);o=o.concat(s)})),i[e]=o})),i}function u(t,e,n,r){var a=0;return(n=void 0===n?i.DistanceType.EuclideanDistance:n)===i.DistanceType.EuclideanDistance?new o.default(t).euclideanDistance(new o.default(e)):a}e.getAllKeyValueMap=a,e.oneHot=s,e.getDistance=u,n={getAllKeyValueMap:a,oneHot:s,getDistance:u},e.default=n},3665:function(t,e,n){"use strict";function r(t,e){void 0===e&&(e=100);var n={};return(t=void 0===t?[]:t).forEach((function(t){t.properties&&Object.keys(t.properties).forEach((function(e){"id"===e||!"".concat(t.properties[e]).match(a.secondReg)&&!"".concat(t.properties[e]).match(a.dateReg)&&isNaN(Number(t.properties[e]))?n.hasOwnProperty(e)&&delete n[e]:n.hasOwnProperty(e)?n[e]+=1:n[e]=1}))})),(t=Object.keys(n).sort((function(t,e){return n[e]-n[t]}))).length<e?t:t.slice(0,e)}function i(t){for(var e=r(t),n=[],i=0;i<t.length;i++)n[i]=function(t,e){return e.map((function(e){if(t.hasOwnProperty(e)){if(!isNaN(Number(t[e])))return Number(t[e]);if(t[e].match(a.secondReg)||t[e].match(a.dateReg))return Number(Date.parse(new Date(t[e])))/1e3}return 0}))}(t[i].properties,e);return n}function o(t,e){void 0===e&&(e=void 0);var n=[];return t.forEach((function(t){void 0===e&&n.push(t),void 0!==t[e]&&n.push(t[e])})),n}Object.defineProperty(e,"__esModule",{value:!0}),e.getPropertyWeight=e.getAllSortProperties=e.getAllProperties=e.default=void 0;var a=n(92935);e.getAllSortProperties=r,e.getPropertyWeight=i,e.getAllProperties=o,n={getAllSortProperties:r,getPropertyWeight:i,getAllProperties:o};e.default=n},29741:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(14062);function i(t){this.arr=t}i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(t){var e=t.arr;if(null==(t=this.arr)||!t.length)return new i(e);if(null==e||!e.length)return new i(this.arr);if(this.arr.length===e.length){var n,r=[];for(n in this.arr)r[n]=this.arr[n]+e[n];return new i(r)}},i.prototype.subtract=function(t){var e=t.arr;if(null==(t=this.arr)||!t.length)return new i(e);if(null==e||!e.length)return new i(this.arr);if(this.arr.length===e.length){var n,r=[];for(n in this.arr)r[n]=this.arr[n]-e[n];return new i(r)}},i.prototype.avg=function(t){var e=[];if(0!==t)for(var n in this.arr)e[n]=this.arr[n]/t;return new i(e)},i.prototype.negate=function(){var t,e=[];for(t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(null==(e=this.arr)||!e.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,i=0;for(r in this.arr)i+=Math.pow(this.arr[r]-t.arr[r],2);return i}},i.prototype.euclideanDistance=function(t){var e,n=t.arr;if(null==(e=this.arr)||!e.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,i=0;for(r in this.arr)i+=Math.pow(this.arr[r]-t.arr[r],2);return Math.sqrt(i)}},i.prototype.normalize=function(){var t,e=[],n=(0,r.clone)(this.arr),o=(n.sort((function(t,e){return t-e})),n[n.length-1]),a=n[0];for(t in this.arr)e[t]=(this.arr[t]-a)/(o-a);return new i(e)},i.prototype.norm2=function(){var t;if(null==(t=this.arr)||!t.length)return 0;var e,n=0;for(e in this.arr)n+=Math.pow(this.arr[e],2);return Math.sqrt(n)},i.prototype.dot=function(t){var e,n=t.arr;if(null==(e=this.arr)||!e.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,i=0;for(r in this.arr)i+=this.arr[r]*t.arr[r];return i}},i.prototype.equal=function(t){var e,n=t.arr;if((null==(t=this.arr)?void 0:t.length)!==(null==n?void 0:n.length))return!1;for(e in this.arr)if(this.arr[e]!==n[e])return!1;return!0},e.default=i},31656:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDI",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"breadthFirstSearch",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"connectedComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"depthFirstSearch",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"detectCycle",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"dijkstra",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"findAllPath",{enumerable:!0,get:function(){return h.findAllPath}}),Object.defineProperty(e,"findShortestPath",{enumerable:!0,get:function(){return h.findShortestPath}}),Object.defineProperty(e,"floydWarshall",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"getAdjMatrix",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"getDegree",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"getInDegree",{enumerable:!0,get:function(){return s.getInDegree}}),Object.defineProperty(e,"getNeighbors",{enumerable:!0,get:function(){return y.getNeighbors}}),Object.defineProperty(e,"getOutDegree",{enumerable:!0,get:function(){return s.getOutDegree}}),Object.defineProperty(e,"labelPropagation",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"louvain",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"minimumSpanningTree",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"pageRank",{enumerable:!0,get:function(){return m.default}});var i=x(n(62238)),o=x(n(83764)),a=x(n(59527)),s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};if(e=b(e),e&&e.has(t))return e.get(t);var n,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&((a=o?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(i,n,a):i[n]=t[n])}return i.default=t,e&&e.set(t,i),i}(n(82556)),u=x(n(94282)),c=x(n(45891)),l=x(n(78089)),h=n(41727),f=x(n(75033)),d=x(n(5170)),p=x(n(35179)),g=x(n(89454)),m=x(n(74926)),v=x(n(82812)),y=n(70643);function b(t){var e,n;return"function"!=typeof WeakMap?null:(e=new WeakMap,n=new WeakMap,(b=function(t){return t?n:e})(t))}function x(t){return t&&t.__esModule?t:{default:t}}},66044:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MESSAGE=e.ALGORITHM=void 0,e.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"},e.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"}},70585:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(66044),i=(n=n(12067))&&n.__esModule?n:{default:n};e.default=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new Promise((function(n,o){var a=new i.default;a.postMessage({_algorithmType:t,data:e}),a.onmessage=function(t){t=t.data;var e=t.data;t=t._algorithmType;r.MESSAGE.SUCCESS===t?n(e):o(),a.terminate()}}))}}},30485:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pageRankAsync=e.minimumSpanningTreeAsync=e.louvainAsync=e.labelPropagationAsync=e.getOutDegreeAsync=e.getNeighborsAsync=e.getInDegreeAsync=e.getDegreeAsync=e.getAdjMatrixAsync=e.floydWarshallAsync=e.findShortestPathAsync=e.findAllPathAsync=e.dijkstraAsync=e.detectCycleAsync=e.detectAllUndirectedCycleAsync=e.detectAllDirectedCycleAsync=e.detectAllCyclesAsync=e.connectedComponentAsync=e.GADDIAsync=void 0;var r,i=(r=n(70585))&&r.__esModule?r:{default:r},o=n(66044);e.getAdjMatrixAsync=function(t,e){return(0,i.default)(o.ALGORITHM.getAdjMatrix).apply(void 0,[t,e])},e.connectedComponentAsync=function(t,e){return(0,i.default)(o.ALGORITHM.connectedComponent).apply(void 0,[t,e])},e.getDegreeAsync=function(t){return(0,i.default)(o.ALGORITHM.getDegree)(t)},e.getInDegreeAsync=function(t,e){return(0,i.default)(o.ALGORITHM.getInDegree)(t,e)},e.getOutDegreeAsync=function(t,e){return(0,i.default)(o.ALGORITHM.getOutDegree)(t,e)},e.detectCycleAsync=function(t){return(0,i.default)(o.ALGORITHM.detectCycle)(t)},e.detectAllCyclesAsync=function(t){return(0,i.default)(o.ALGORITHM.detectAllCycles)(t)},e.detectAllDirectedCycleAsync=function(t){return(0,i.default)(o.ALGORITHM.detectAllDirectedCycle)(t)},e.detectAllUndirectedCycleAsync=function(t){return(0,i.default)(o.ALGORITHM.detectAllUndirectedCycle)(t)},e.dijkstraAsync=function(t,e,n,r){return(0,i.default)(o.ALGORITHM.dijkstra).apply(void 0,[t,e,n,r])},e.findAllPathAsync=function(t,e,n,r){return(0,i.default)(o.ALGORITHM.findAllPath).apply(void 0,[t,e,n,r])},e.findShortestPathAsync=function(t,e,n,r,a){return(0,i.default)(o.ALGORITHM.findShortestPath).apply(void 0,[t,e,n,r,a])},e.floydWarshallAsync=function(t,e){return(0,i.default)(o.ALGORITHM.floydWarshall).apply(void 0,[t,e])},e.labelPropagationAsync=function(t,e,n,r){return void 0===r&&(r=1e3),(0,i.default)(o.ALGORITHM.labelPropagation)(t,e,n,r)},e.louvainAsync=function(t,e,n,r){return(0,i.default)(o.ALGORITHM.louvain)(t,e,n,r)},e.minimumSpanningTreeAsync=function(t,e,n){return(0,i.default)(o.ALGORITHM.minimumSpanningTree).apply(void 0,[t,e,n])},e.pageRankAsync=function(t,e,n){return(0,i.default)(o.ALGORITHM.pageRank).apply(void 0,[t,e,n])},e.getNeighborsAsync=function(t,e,n){return(0,i.default)(o.ALGORITHM.getNeighbors).apply(void 0,[t,e,n])},e.GADDIAsync=function(t,e,n,r,a,s,u){return void 0===n&&(n=!1),void 0===s&&(s="cluster"),void 0===u&&(u="cluster"),(0,i.default)(o.ALGORITHM.GADDI).apply(void 0,[t,e,n,r,a,s,u])}},12067:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};if(e=a(e),e&&e.has(t))return e.get(t);var n,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var s;"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&((s=o?Object.getOwnPropertyDescriptor(t,n):null)&&(s.get||s.set)?Object.defineProperty(i,n,s):i[n]=t[n])}return i.default=t,e&&e.set(t,i),i}(n(31656)),o=n(66044);function a(t){var e,n;return"function"!=typeof WeakMap?null:(e=new WeakMap,n=new WeakMap,(a=function(t){return t?n:e})(t))}var s="undefined"!=typeof self?self:{};s.onmessage=function(t){t=t.data;var e=t._algorithmType;t=t.data;e&&("function"==typeof i[e]?(e=i[e].apply(i,t),s.postMessage({_algorithmType:o.MESSAGE.SUCCESS,data:e})):s.postMessage({_algorithmType:o.MESSAGE.FAILURE}))},e.default=null},92578:function(t,e,n){"use strict";n.r(e),n.d(e,{__extends:function(){return i},__assign:function(){return o},__rest:function(){return a},__decorate:function(){return s},__param:function(){return u},__metadata:function(){return c},__awaiter:function(){return l},__generator:function(){return h},__createBinding:function(){return f},__exportStar:function(){return d},__values:function(){return p},__read:function(){return g},__spread:function(){return m},__spreadArrays:function(){return v},__spreadArray:function(){return y},__await:function(){return b},__asyncGenerator:function(){return x},__asyncDelegator:function(){return _},__asyncValues:function(){return w},__makeTemplateObject:function(){return S},__importStar:function(){return M},__importDefault:function(){return A},__classPrivateFieldGet:function(){return C},__classPrivateFieldSet:function(){return T},__classPrivateFieldIn:function(){return k}});var r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n=n||Promise)((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var u=[a,s];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,(u=i?[2&u[0],i.value]:u)[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3]))o.label=u[1];else if(6===u[0]&&o.label<i[1])o.label=i[1],i=u;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(u)}}u=e.call(t,o)}catch(s){u=[6,s],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}var f=Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&("get"in i?e.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]};function d(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||f(e,t,n)}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function v(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function x(t,e,n){var r,i,o;if(Symbol.asyncIterator)return r=n.apply(t,e||[]),i=[],o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;throw new TypeError("Symbol.asyncIterator is not defined.");function a(t){r[t]&&(o[t]=function(e){return new Promise((function(n,r){1<i.push([t,e,n,r])||s(t,e)}))})}function s(t,e){try{(n=r[t](e)).value instanceof b?Promise.resolve(n.value.v).then(u,c):l(i[0][2],n)}catch(t){l(i[0][3],t)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),i.shift(),i.length&&s(i[0][0],i[0][1])}}function _(t){var e,n={};return r("next"),r("throw",(function(t){throw t})),r("return"),n[Symbol.iterator]=function(){return this},n;function r(r,i){n[r]=t[r]?function(n){return(e=!e)?{value:b(t[r](n)),done:"return"===r}:i?i(n):n}:i}}function w(t){var e,n;if(Symbol.asyncIterator)return(e=t[Symbol.asyncIterator])?e.call(t):(t=p(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);throw new TypeError("Symbol.asyncIterator is not defined.");function r(e){n[e]=t[e]&&function(n){return new Promise((function(r,i){var o,a;n=t[e](n),o=r,r=i,a=n.done,i=n.value,Promise.resolve(i).then((function(t){o({value:t,done:a})}),r)}))}}}function S(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var E=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function M(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&f(e,t,n);return E(e,t),e}function A(t){return t&&t.__esModule?t:{default:t}}function C(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t===e&&r:e.has(t))return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t);throw new TypeError("Cannot read private member from an object whose class did not declare it")}function T(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t===e&&i:e.has(t))return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n;throw new TypeError("Cannot write private member to an object whose class did not declare it")}function k(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}},20499:function(){},64851:function(){},59518:function(){},26199:function(){},14156:function(){},71468:function(){},48871:function(){},9871:function(){},25612:function(){},92777:function(){},20159:function(){},61622:function(){},9527:function(t,e,n){"use strict";function r(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function s(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}n.r(e),n.d(e,{Camera:function(){return ze},Geometry:function(){return Ue},Kernel:function(){return an},Material:function(){return sn},Renderable:function(){return un},World:function(){return di}}),n(85827),n(28660);e=n(20523);var u=n.n(e);function c(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){c(o,r,i,a,s,"next",t)}function s(t){c(o,r,i,a,s,"throw",t)}a(void 0)}))}}var h=1;function f(t){i(this,f)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){var n;if(t)return"string"==typeof t?d(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(){i(this,m),this.index=void 0}function v(){i(this,v),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0}e=function(){function t(e){i(this,t),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=e}var e;return a(t,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(t){return-1<this.lookup[t]}},{key:"create",value:function(t,e){return this.lookup[t]=this.components.length,e=new this.clazz(e||{}),this.components.push(e),this.entities.push(t),e}},{key:"remove",value:function(t){var e=this.lookup[t];-1<e&&e<this.components.length-1&&(this.components[e]=this.components[this.components.length-1],this.entities[e]=this.entities[this.entities.length-1],this.lookup[this.entities[e]]=e),this.components.pop(),this.entities.pop(),delete this.lookup[t]}},{key:"removeKeepSorted",value:function(t){if(t=this.lookup[t],-1<t){var e=this.entities[t];if(t<this.components.length-1){for(var n=t+1;n<this.components.length;++n)this.components[n-1]=this.components[n];for(var r=t+1;r<this.entities.length;++r)this.entities[r-1]=this.entities[r],this.lookup[this.entities[r-1]]=r-1}this.components.pop(),this.entities.pop(),delete this.lookup[e]}}},{key:"moveItem",value:function(t,e){if(t!==e){for(var n=this.components[t],r=this.entities[t],i=t<e?1:-1,o=t;o!==e;o+=i){var a=o+i;this.components[o]=this.components[a],this.entities[o]=this.entities[a],this.lookup[this.entities[o]]=o}this.components[e]=n,this.entities[e]=r,this.lookup[r]=e}}},{key:"getEntity",value:function(t){return this.entities[t]}},{key:"getComponent",value:function(t){return this.components[t]}},{key:"getComponentByEntity",value:function(t){return t=this.lookup[t],-1<t?this.components[t]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e];r=Number(r);if(this.lookup[r]===t)return r}return-1}},{key:"find",value:function(t){for(var e=0;e<this.getCount();e++){var n=this.getComponent(e);if(t(n,e))return n}return null}},{key:"findIndex",value:function(t){for(var e=0;e<this.getCount();e++)if(t(this.getComponent(e),e))return e;return-1}},{key:"forEach",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e],i=(r=Number(r),this.lookup[r]);t(r,this.getComponent(i))}}},{key:"forEachAsync",value:(e=l(u().mark((function t(e){var n,r,i,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=Object.keys(this.lookup);case 1:if(n<r.length)return i=r[n],i=Number(i),o=this.lookup[i],t.next=7,e(i,this.getComponent(o));t.next=10;break;case 7:n++,t.next=1;break;case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"map",value:function(t){for(var e=[],n=0,r=Object.keys(this.lookup);n<r.length;n++){var i=r[n],o=(i=Number(i),this.lookup[i]);e.push(t(i,this.getComponent(o)))}return e}}]),t}();var y=n(86700),b={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},x=function(){function t(){i(this,t),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return a(t,[{key:"read",value:function(t){return this.reads.find((function(e){return e.index===t.index}))||this.reads.push(t),t}},{key:"sample",value:function(t){return this.read(t),t}},{key:"write",value:function(t,e){var n;return this.writes.find((function(t){return t.index===e.index}))?e:((n=t.getResourceNode(e)).resource.version++,n.resource.imported&&(this.hasSideEffect=!0),n=t.createResourceNode(n.resource),(t.getResourceNode(n).writer=this).writes.push(n),n)}}]),t}(),_=n(86636);function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,_.Z)(t,e)}function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var E=n(5461);function M(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,E.Z)(t)}function A(){i(this,A),this.first=void 0,this.last=void 0}var C=n(44175);function T(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}function k(){i(this,k),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0}var O,P=function(){w(e,A);var t=T(e);function e(){var n;i(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=t.call.apply(t,[this].concat(o))).version=0,n.refs=0,n.name=void 0,n.imported=void 0,n.priority=void 0,n.discardStart=!0,n.discardEnd=!1,n.descriptor=void 0,n.resource=void 0,n}return a(e,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),e}();function I(t,e){var n,r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){var n;if(t)return"string"==typeof t?N(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return n&&(t=n),r=0,{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}K=(0,y.b2)(),we=(0,y.f3)(b.RenderEngine);var D=K((O=s((K=function(){function t(){i(this,t),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],r(this,"engine",O,this)}var e,n;return a(t,[{key:"execute",value:(n=l(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.compile(),t.next=3,this.executePassNodes(e);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach((function(t){t.tearDown&&t.tearDown()})),this.reset()}},{key:"addPass",value:function(t,e,n,r){var i=new v;i.execute=n,r&&(i.tearDown=r),i.name=t,n=new x;return n.name=t,this.passNodes.push(n),this.frameGraphPasses.push(i),e(this,n,i),i}},{key:"getPass",value:function(t){return this.frameGraphPasses.find((function(e){return e.name===t}))}},{key:"compile",value:function(){var t,e=this,n=I(this.passNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.refCount=r.writes.length+(r.hasSideEffect?1:0),r.reads.forEach((function(t){e.resourceNodes[t.index].readerCount++}))}}catch(t){n.e(t)}finally{n.f()}var i,o=[],a=I(this.resourceNodes);try{for(a.s();!(i=a.n()).done;){var s=i.value;0===s.readerCount&&o.push(s)}}catch(t){a.e(t)}finally{a.f()}for(;o.length;){var u=o.pop();u=u&&u.writer;if(u&&0==--u.refCount){var c,l=I(u.reads);try{for(l.s();!(c=l.n()).done;){var h=c.value,f=this.resourceNodes[h.index];0==--f.readerCount&&o.push(f)}}catch(t){l.e(t)}finally{l.f()}}}this.resourceNodes.forEach((function(t){t.resource.refs+=t.readerCount}));var d,p=I(this.passNodes);try{for(p.s();!(d=p.n()).done;){var g=d.value;if(g.refCount){var m,v=I(g.reads);try{for(v.s();!(m=v.n()).done;){var y=m.value,b=this.resourceNodes[y.index].resource;b.first=b.first||g,b.last=g}}catch(t){v.e(t)}finally{v.f()}var x,_=I(g.writes);try{for(_.s();!(x=_.n()).done;){var w=x.value,S=this.resourceNodes[w.index].resource;S.first=S.first||g,S.last=g}}catch(t){_.e(t)}finally{_.f()}}}}catch(t){p.e(t)}finally{p.f()}for(var E=0;E<2;E++){var M,A=I(this.resourceNodes);try{for(A.s();!(M=A.n()).done;){var C,T,k=M.value.resource;k.priority===E&&k.refs&&(C=k.first,T=k.last,C)&&T&&(C.devirtualize.push(k),T.destroy.push(k))}}catch(t){A.e(t)}finally{A.f()}}}},{key:"executePassNodes",value:(e=l(u().mark((function t(e){var n,r,i,o,a,s,c,l,h,f,d;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=I(this.passNodes.entries()),t.prev=1,n.s();case 3:if((i=n.n()).done){t.next=18;break}if(i=g(i.value,2),r=i[0],!(i=i[1]).refCount){t.next=16;break}o=I(i.devirtualize);try{for(o.s();!(a=o.n()).done;)a.value.preExecuteDevirtualize(this.engine)}catch(t){o.e(t)}finally{o.f()}s=I(i.destroy);try{for(s.s();!(c=s.n()).done;)c.value.preExecuteDestroy(this.engine)}catch(t){s.e(t)}finally{s.f()}return t.next=12,this.frameGraphPasses[r].execute(this,this.frameGraphPasses[r],e);case 12:l=I(i.devirtualize);try{for(l.s();!(h=l.n()).done;)h.value.postExecuteDevirtualize(this.engine)}catch(t){l.e(t)}finally{l.f()}f=I(i.destroy);try{for(f.s();!(d=f.n()).done;)d.value.postExecuteDestroy(this.engine)}catch(t){f.e(t)}finally{f.f()}case 16:t.next=3;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),n.e(t.t0);case 23:return t.prev=23,n.f(),t.finish(23);case 26:this.reset();case 27:case"end":return t.stop()}}),t,this,[[1,20,23,26]])}))),function(t){return e.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(t){return this.resourceNodes[t.index]}},{key:"createResourceNode",value:function(t){var e=new k;e.resource=t,e.version=t.version,this.resourceNodes.push(e),t=new m;return t.index=this.resourceNodes.length-1,t}},{key:"createTexture",value:function(t,e,n){var r=new P;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"createRenderTarget",value:function(t,e,n){var r=new P;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"present",value:function(t){this.addPass("Present",(function(e,n){n.read(t),n.hasSideEffect=!0}),l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))))}}]),t}()).prototype,"engine",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=K))||we;function L(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}var R=n(98333),B=n(35600),j=n(77160),F=9007199254740991,z={};z["[object Float32Array]"]=z["[object Float64Array]"]=z["[object Int8Array]"]=z["[object Int16Array]"]=z["[object Int32Array]"]=z["[object Uint8Array]"]=z["[object Uint8ClampedArray]"]=z["[object Uint16Array]"]=z["[object Uint32Array]"]=!0,z["[object Arguments]"]=z["[object Array]"]=z["[object ArrayBuffer]"]=z["[object Boolean]"]=z["[object DataView]"]=z["[object Date]"]=z["[object Error]"]=z["[object Function]"]=z["[object Map]"]=z["[object Number]"]=z["[object Object]"]=z["[object RegExp]"]=z["[object Set]"]=z["[object String]"]=z["[object WeakMap]"]=!1;var U=Object.prototype.toString,G=function(t){return!!(e=t)&&"object"===S(e)&&"number"==typeof(e=t.length)&&-1<e&&e%1==0&&e<=F&&!!z[U.call(t)];var e};function V(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function H(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}var Y,q,X,K=function(){w(e,f);var t=H(e);function e(n){var r;return i(this,e),(r=t.call(this,n)).dirty=!0,r.attributes=[],r.indices=void 0,r.indicesBuffer=void 0,r.vertexCount=0,r.maxInstancedCount=void 0,r.aabb=void 0,r.entity=void 0,Object.assign((0,E.Z)(r),n),r}return a(e,[{key:"setAttribute",value:function(t,e,n,r){var i=this.attributes.find((function(e){return e.name===t}));return i?(i.data=e,i.dirty=!0):this.attributes.push(W(W({dirty:!0,name:t,data:e},n),{},{bufferGetter:r})),this.dirty=!0,this}},{key:"setIndex",value:function(t){return this.indices=new Uint32Array(t.buffer||t),this.dirty=!0,this}},{key:"applyMatrix",value:function(t){var e=this.attributes.find((function(t){return"position"===t.name})),n=this.attributes.find((function(t){return"normal"===t.name}));if(e&&(e.dirty=!0,e.data)&&e.data.length)for(var r=0;r<e.data.length;r+=3){var i=R.fromValues(e.data[r],e.data[r+1],e.data[r+2],1);R.transformMat4(i,i,t),G(e.data)?e.data.set([i[0],i[1],i[2]],r):(e.data[r]=i[0],e.data[r+1]=i[1],e.data[r+2]=i[2])}if(n){var o=B.normalFromMat4(B.create(),t);if(n.data&&n.data.length)for(var a=0;a<n.data.length;a+=3){var s=j.fromValues(n.data[a],n.data[a+1],n.data[a+2]);j.transformMat3(s,s,o),j.normalize(s,s),G(n.data)?n.data.set([s[0],s[1],s[2]],a):(n.data[a]=s[0],n.data[a+1]=s[1],n.data[a+2]=s[2])}}}}]),e}(),Z=((we=Y=Y||{})[we.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",we[we.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",we[we.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",we[we.POINTS=0]="POINTS",we[we.LINES=1]="LINES",we[we.LINE_LOOP=2]="LINE_LOOP",we[we.LINE_STRIP=3]="LINE_STRIP",we[we.TRIANGLES=4]="TRIANGLES",we[we.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",we[we.TRIANGLE_FAN=6]="TRIANGLE_FAN",we[we.ZERO=0]="ZERO",we[we.ONE=1]="ONE",we[we.SRC_COLOR=768]="SRC_COLOR",we[we.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",we[we.SRC_ALPHA=770]="SRC_ALPHA",we[we.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",we[we.DST_ALPHA=772]="DST_ALPHA",we[we.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",we[we.DST_COLOR=774]="DST_COLOR",we[we.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",we[we.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",we[we.FUNC_ADD=32774]="FUNC_ADD",we[we.BLEND_EQUATION=32777]="BLEND_EQUATION",we[we.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",we[we.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",we[we.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",we[we.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",we[we.MAX_EXT=32776]="MAX_EXT",we[we.MIN_EXT=32775]="MIN_EXT",we[we.BLEND_DST_RGB=32968]="BLEND_DST_RGB",we[we.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",we[we.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",we[we.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",we[we.CONSTANT_COLOR=32769]="CONSTANT_COLOR",we[we.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",we[we.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",we[we.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",we[we.BLEND_COLOR=32773]="BLEND_COLOR",we[we.ARRAY_BUFFER=34962]="ARRAY_BUFFER",we[we.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",we[we.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",we[we.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",we[we.STREAM_DRAW=35040]="STREAM_DRAW",we[we.STATIC_DRAW=35044]="STATIC_DRAW",we[we.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",we[we.BUFFER_SIZE=34660]="BUFFER_SIZE",we[we.BUFFER_USAGE=34661]="BUFFER_USAGE",we[we.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",we[we.FRONT=1028]="FRONT",we[we.BACK=1029]="BACK",we[we.FRONT_AND_BACK=1032]="FRONT_AND_BACK",we[we.CULL_FACE=2884]="CULL_FACE",we[we.BLEND=3042]="BLEND",we[we.DITHER=3024]="DITHER",we[we.STENCIL_TEST=2960]="STENCIL_TEST",we[we.DEPTH_TEST=2929]="DEPTH_TEST",we[we.SCISSOR_TEST=3089]="SCISSOR_TEST",we[we.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",we[we.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",we[we.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",we[we.NO_ERROR=0]="NO_ERROR",we[we.INVALID_ENUM=1280]="INVALID_ENUM",we[we.INVALID_VALUE=1281]="INVALID_VALUE",we[we.INVALID_OPERATION=1282]="INVALID_OPERATION",we[we.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",we[we.CW=2304]="CW",we[we.CCW=2305]="CCW",we[we.LINE_WIDTH=2849]="LINE_WIDTH",we[we.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",we[we.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",we[we.CULL_FACE_MODE=2885]="CULL_FACE_MODE",we[we.FRONT_FACE=2886]="FRONT_FACE",we[we.DEPTH_RANGE=2928]="DEPTH_RANGE",we[we.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",we[we.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",we[we.DEPTH_FUNC=2932]="DEPTH_FUNC",we[we.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",we[we.STENCIL_FUNC=2962]="STENCIL_FUNC",we[we.STENCIL_FAIL=2964]="STENCIL_FAIL",we[we.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",we[we.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",we[we.STENCIL_REF=2967]="STENCIL_REF",we[we.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",we[we.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",we[we.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",we[we.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",we[we.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",we[we.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",we[we.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",we[we.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",we[we.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",we[we.VIEWPORT=2978]="VIEWPORT",we[we.SCISSOR_BOX=3088]="SCISSOR_BOX",we[we.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",we[we.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",we[we.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",we[we.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",we[we.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",we[we.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",we[we.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",we[we.RED_BITS=3410]="RED_BITS",we[we.GREEN_BITS=3411]="GREEN_BITS",we[we.BLUE_BITS=3412]="BLUE_BITS",we[we.ALPHA_BITS=3413]="ALPHA_BITS",we[we.DEPTH_BITS=3414]="DEPTH_BITS",we[we.STENCIL_BITS=3415]="STENCIL_BITS",we[we.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",we[we.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",we[we.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",we[we.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",we[we.SAMPLES=32937]="SAMPLES",we[we.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",we[we.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",we[we.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",we[we.DONT_CARE=4352]="DONT_CARE",we[we.FASTEST=4353]="FASTEST",we[we.NICEST=4354]="NICEST",we[we.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",we[we.BYTE=5120]="BYTE",we[we.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",we[we.SHORT=5122]="SHORT",we[we.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",we[we.INT=5124]="INT",we[we.UNSIGNED_INT=5125]="UNSIGNED_INT",we[we.FLOAT=5126]="FLOAT",we[we.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",we[we.ALPHA=6406]="ALPHA",we[we.RGB=6407]="RGB",we[we.RGBA=6408]="RGBA",we[we.LUMINANCE=6409]="LUMINANCE",we[we.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",we[we.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",we[we.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",we[we.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",we[we.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",we[we.VERTEX_SHADER=35633]="VERTEX_SHADER",we[we.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",we[we.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",we[we.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",we[we.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",we[we.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",we[we.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",we[we.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",we[we.SHADER_TYPE=35663]="SHADER_TYPE",we[we.DELETE_STATUS=35712]="DELETE_STATUS",we[we.LINK_STATUS=35714]="LINK_STATUS",we[we.VALIDATE_STATUS=35715]="VALIDATE_STATUS",we[we.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",we[we.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",we[we.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",we[we.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",we[we.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",we[we.NEVER=512]="NEVER",we[we.LESS=513]="LESS",we[we.EQUAL=514]="EQUAL",we[we.LEQUAL=515]="LEQUAL",we[we.GREATER=516]="GREATER",we[we.NOTEQUAL=517]="NOTEQUAL",we[we.GEQUAL=518]="GEQUAL",we[we.ALWAYS=519]="ALWAYS",we[we.KEEP=7680]="KEEP",we[we.REPLACE=7681]="REPLACE",we[we.INCR=7682]="INCR",we[we.DECR=7683]="DECR",we[we.INVERT=5386]="INVERT",we[we.INCR_WRAP=34055]="INCR_WRAP",we[we.DECR_WRAP=34056]="DECR_WRAP",we[we.VENDOR=7936]="VENDOR",we[we.RENDERER=7937]="RENDERER",we[we.VERSION=7938]="VERSION",we[we.NEAREST=9728]="NEAREST",we[we.LINEAR=9729]="LINEAR",we[we.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",we[we.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",we[we.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",we[we.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",we[we.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",we[we.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",we[we.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",we[we.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",we[we.TEXTURE_2D=3553]="TEXTURE_2D",we[we.TEXTURE=5890]="TEXTURE",we[we.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",we[we.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",we[we.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",we[we.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",we[we.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",we[we.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",we[we.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",we[we.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",we[we.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",we[we.TEXTURE0=33984]="TEXTURE0",we[we.TEXTURE1=33985]="TEXTURE1",we[we.TEXTURE2=33986]="TEXTURE2",we[we.TEXTURE3=33987]="TEXTURE3",we[we.TEXTURE4=33988]="TEXTURE4",we[we.TEXTURE5=33989]="TEXTURE5",we[we.TEXTURE6=33990]="TEXTURE6",we[we.TEXTURE7=33991]="TEXTURE7",we[we.TEXTURE8=33992]="TEXTURE8",we[we.TEXTURE9=33993]="TEXTURE9",we[we.TEXTURE10=33994]="TEXTURE10",we[we.TEXTURE11=33995]="TEXTURE11",we[we.TEXTURE12=33996]="TEXTURE12",we[we.TEXTURE13=33997]="TEXTURE13",we[we.TEXTURE14=33998]="TEXTURE14",we[we.TEXTURE15=33999]="TEXTURE15",we[we.TEXTURE16=34e3]="TEXTURE16",we[we.TEXTURE17=34001]="TEXTURE17",we[we.TEXTURE18=34002]="TEXTURE18",we[we.TEXTURE19=34003]="TEXTURE19",we[we.TEXTURE20=34004]="TEXTURE20",we[we.TEXTURE21=34005]="TEXTURE21",we[we.TEXTURE22=34006]="TEXTURE22",we[we.TEXTURE23=34007]="TEXTURE23",we[we.TEXTURE24=34008]="TEXTURE24",we[we.TEXTURE25=34009]="TEXTURE25",we[we.TEXTURE26=34010]="TEXTURE26",we[we.TEXTURE27=34011]="TEXTURE27",we[we.TEXTURE28=34012]="TEXTURE28",we[we.TEXTURE29=34013]="TEXTURE29",we[we.TEXTURE30=34014]="TEXTURE30",we[we.TEXTURE31=34015]="TEXTURE31",we[we.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",we[we.REPEAT=10497]="REPEAT",we[we.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",we[we.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",we[we.FLOAT_VEC2=35664]="FLOAT_VEC2",we[we.FLOAT_VEC3=35665]="FLOAT_VEC3",we[we.FLOAT_VEC4=35666]="FLOAT_VEC4",we[we.INT_VEC2=35667]="INT_VEC2",we[we.INT_VEC3=35668]="INT_VEC3",we[we.INT_VEC4=35669]="INT_VEC4",we[we.BOOL=35670]="BOOL",we[we.BOOL_VEC2=35671]="BOOL_VEC2",we[we.BOOL_VEC3=35672]="BOOL_VEC3",we[we.BOOL_VEC4=35673]="BOOL_VEC4",we[we.FLOAT_MAT2=35674]="FLOAT_MAT2",we[we.FLOAT_MAT3=35675]="FLOAT_MAT3",we[we.FLOAT_MAT4=35676]="FLOAT_MAT4",we[we.SAMPLER_2D=35678]="SAMPLER_2D",we[we.SAMPLER_CUBE=35680]="SAMPLER_CUBE",we[we.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",we[we.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",we[we.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",we[we.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",we[we.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",we[we.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",we[we.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",we[we.COMPILE_STATUS=35713]="COMPILE_STATUS",we[we.LOW_FLOAT=36336]="LOW_FLOAT",we[we.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",we[we.HIGH_FLOAT=36338]="HIGH_FLOAT",we[we.LOW_INT=36339]="LOW_INT",we[we.MEDIUM_INT=36340]="MEDIUM_INT",we[we.HIGH_INT=36341]="HIGH_INT",we[we.FRAMEBUFFER=36160]="FRAMEBUFFER",we[we.RENDERBUFFER=36161]="RENDERBUFFER",we[we.RGBA4=32854]="RGBA4",we[we.RGB5_A1=32855]="RGB5_A1",we[we.RGB565=36194]="RGB565",we[we.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",we[we.STENCIL_INDEX=6401]="STENCIL_INDEX",we[we.STENCIL_INDEX8=36168]="STENCIL_INDEX8",we[we.DEPTH_STENCIL=34041]="DEPTH_STENCIL",we[we.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",we[we.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",we[we.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",we[we.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",we[we.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",we[we.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",we[we.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",we[we.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",we[we.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",we[we.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",we[we.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",we[we.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",we[we.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",we[we.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",we[we.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",we[we.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",we[we.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",we[we.NONE=0]="NONE",we[we.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",we[we.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",we[we.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",we[we.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",we[we.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",we[we.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",we[we.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",we[we.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",we[we.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",we[we.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",we[we.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",we[we.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",we[we.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",we[we.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",we[we.COPY_SRC=1]="COPY_SRC",we[we.COPY_DST=2]="COPY_DST",we[we.SAMPLED=4]="SAMPLED",we[we.STORAGE=8]="STORAGE",we[we.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT",we=(0,y.b2)(),ai=(0,y.f3)(b.GeometryComponentManager),rt=(0,y.f3)(b.RenderEngine),we((q=s((we=function(){function t(){i(this,t),r(this,"geometry",q,this),r(this,"engine",X,this)}var e;return a(t,[{key:"execute",value:(e=l(u().mark((function t(){var e=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.geometry.forEach((function(t,n){n.dirty&&(n.attributes.forEach((function(t){var n;t.dirty&&t.data&&(t.buffer?null!=(n=t.buffer)&&n.subData({data:t.data,offset:0}):t.buffer=e.engine.createBuffer({data:t.data,type:Y.FLOAT}),t.dirty=!1)})),n.indices&&(n.indicesBuffer?n.indicesBuffer.subData({data:n.indices,offset:0}):n.indicesBuffer=e.engine.createElements({data:n.indices,count:n.indices.length,type:Y.UNSIGNED_INT,usage:Y.STATIC_DRAW})),n.dirty=!1)}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach((function(t,e){e.indicesBuffer&&e.indicesBuffer.destroy(),e.attributes.forEach((function(t){t.buffer&&t.buffer.destroy()}))})),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{vertexCount:3}).vertexCount,e=h++;return this.geometry.create(e,{vertexCount:t})}},{key:"createInstancedBufferGeometry",value:function(t){var e=t.maxInstancedCount,n=(t=t.vertexCount,h++);return this.geometry.create(n,{maxInstancedCount:e,vertexCount:t})}}]),t}()).prototype,"geometry",[ai],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=s(we.prototype,"engine",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ai=we))||ai);function $(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Q(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}var tt,et,nt,rt=function(){w(e,f);var t=Q(e);function e(n){var r;return i(this,e),(r=t.call(this,n)).vertexShaderGLSL=void 0,r.fragmentShaderGLSL=void 0,r.defines={},r.dirty=!0,r.uniforms=[],r.cull={enable:!0,face:Y.BACK},r.depth={enable:!0},r.blend=void 0,r.entity=void 0,r.type=void 0,Object.assign((0,E.Z)(r),n),r}return a(e,[{key:"setDefines",value:function(t){return this.defines=J(J({},this.defines),t),this}},{key:"setCull",value:function(t){return this.cull=t,this}},{key:"setDepth",value:function(t){return this.depth=t,this}},{key:"setBlend",value:function(t){return this.blend=t,this}},{key:"setUniform",value:function(t,e){var n,r=this;return"string"!=typeof t?Object.keys(t).forEach((function(e){return r.setUniform(e,t[e])})):((n=this.uniforms.find((function(e){return e.name===t})))?(n.dirty=!0,n.data=e):this.uniforms.push({name:t,dirty:!0,data:e}),this.dirty=!0),this}}]),e}();function it(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}we=(0,y.b2)(),ai=(0,y.f3)(b.MaterialComponentManager),ct=(0,y.f3)(b.RenderEngine),yt=(0,y.f3)(b.ShaderModuleService);var at,st=we((tt=s((we=function(){function t(){i(this,t),r(this,"material",tt,this),r(this,"engine",et,this),r(this,"shaderModule",nt,this)}var e;return a(t,[{key:"execute",value:(e=l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(t){var e,n,r=h++,i=t.vertexShader,o=t.fragmentShader,a=[];return this.engine.supportWebGPU||(e="material-".concat(r),this.shaderModule.registerModule(e,{vs:t.vertexShader,fs:t.fragmentShader}),i=(n=this.shaderModule.getModule(e)).vs,o=n.fs,n.uniforms&&(a=Object.keys(n.uniforms).map((function(t){return{dirty:!0,name:t,data:n.uniforms[t]}})))),this.material.create(r,ot(ot({vertexShaderGLSL:i,fragmentShaderGLSL:o},t),{},{uniforms:a}))}}]),t}()).prototype,"material",[ai],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=s(we.prototype,"engine",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=s(we.prototype,"shaderModule",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ai=we))||ai;function ut(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}at=at||{},at[at.Standard=0]="Standard";var ct=function(){w(e,f);var t=ut(e);function e(n){var r;return i(this,e),(r=t.call(this,n)).strategy=at.Standard,r.visibilityPlaneMask=0,r.visible=!1,Object.assign((0,E.Z)(r),n),r}return e}(),lt=function(){function t(e,n){i(this,t),this.center=void 0,this.halfExtents=void 0,this.min=j.create(),this.max=j.create(),this.update(e,n)}return a(t,[{key:"update",value:function(t,e){this.center=t||j.create(),this.halfExtents=e||j.fromValues(.5,.5,.5),this.min=j.sub(this.min,this.center,this.halfExtents),this.max=j.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,e){j.add(this.center,e,t),j.scale(this.center,this.center,.5),j.sub(this.halfExtents,e,t),j.scale(this.halfExtents,this.halfExtents,.5),j.copy(this.min,t),j.copy(this.max,e)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(t){var e=this.center,n=e[0],r=e[1],i=e[2],o=this.halfExtents,a=o[0],s=o[1],u=o[2],c=n-a,l=(n=n+a,a=r-s,r=r+s,s=i-u,i=i+u,u=t.center,u[0]),h=u[1],f=(u=u[2],t=t.halfExtents,t[0]),d=t[1],p=(t=t[2],l-f);l+=f,f=h-d,h+=d,d=u-t,u+=t;f<a&&(a=f),r<h&&(r=h),d<s&&(s=d),i<u&&(i=u),e[0]=.5*((c=p<c?p:c)+(n=n<l?l:n)),e[1]=.5*(a+r),e[2]=.5*(s+i),o[0]=.5*(n-c),o[1]=.5*(r-a),o[2]=.5*(i-s),this.min[0]=c,this.min[1]=a,this.min[2]=s,this.max[0]=n,this.max[1]=r,this.max[2]=i}},{key:"intersects",value:function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax();t=t.getMin();return n[0]<=r[0]&&e[0]>=t[0]&&n[1]<=r[1]&&e[1]>=t[1]&&n[2]<=r[2]&&e[2]>=t[2]}},{key:"containsPoint",value:function(t){var e=this.getMin(),n=this.getMax();return!(t[0]<e[0]||t[0]>n[0]||t[1]<e[1]||t[1]>n[1]||t[2]<e[2]||t[2]>n[2])}},{key:"getNegativeFarPoint",value:function(t){return 273===t.pnVertexFlag?j.copy(j.create(),this.min):272===t.pnVertexFlag?j.fromValues(this.min[0],this.min[1],this.max[2]):257===t.pnVertexFlag?j.fromValues(this.min[0],this.max[1],this.min[2]):256===t.pnVertexFlag?j.fromValues(this.min[0],this.max[1],this.max[2]):17===t.pnVertexFlag?j.fromValues(this.max[0],this.min[1],this.min[2]):16===t.pnVertexFlag?j.fromValues(this.max[0],this.min[1],this.max[2]):1===t.pnVertexFlag?j.fromValues(this.max[0],this.max[1],this.min[2]):j.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(t){return 273===t.pnVertexFlag?j.copy(j.create(),this.max):272===t.pnVertexFlag?j.fromValues(this.max[0],this.max[1],this.min[2]):257===t.pnVertexFlag?j.fromValues(this.max[0],this.min[1],this.max[2]):256===t.pnVertexFlag?j.fromValues(this.max[0],this.min[1],this.min[2]):17===t.pnVertexFlag?j.fromValues(this.min[0],this.max[1],this.max[2]):16===t.pnVertexFlag?j.fromValues(this.min[0],this.max[1],this.min[2]):1===t.pnVertexFlag?j.fromValues(this.min[0],this.min[1],this.max[2]):j.fromValues(this.min[0],this.min[1],this.min[2])}}]),t}();function ht(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}var ft,dt,pt,gt,mt,vt,yt=function(){w(e,f);var t=ht(e);function e(n){var r;return i(this,e),(r=t.call(this,n)).material=void 0,r.geometry=void 0,r.aabb=new lt,r.aabbDirty=!0,r.model=void 0,r.visible=!0,r.children=[],Object.assign((0,E.Z)(r),n),r}return e}(),bt=function(){function t(e,n){i(this,t),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=e||0,this.normal=n||j.fromValues(0,1,0),this.updatePNVertexFlag()}return a(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(0<=this.normal[0])<<8)+(Number(0<=this.normal[1])<<4)+Number(0<=this.normal[2])}},{key:"distanceToPoint",value:function(t){return j.dot(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/j.len(this.normal);j.scale(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,e,n){var r=this.distanceToPoint(t),i=(r=r/(r-this.distanceToPoint(e)),0<=r&&r<=1);return i&&n&&j.lerp(n,t,e,r),i}}]),t}(),xt=((we=ft=ft||{})[we.OUTSIDE=4294967295]="OUTSIDE",we[we.INSIDE=0]="INSIDE",we[we.INDETERMINATE=2147483647]="INDETERMINATE",function(){function t(e){if(i(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new bt)}return a(t,[{key:"extractFromVPMatrix",value:function(t){t=g(t,16);var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],p=t[13],m=t[14];t=t[15];j.set(this.planes[0].normal,i-e,u-o,f-c),this.planes[0].distance=-(t-d),j.set(this.planes[1].normal,i+e,u+o,f+c),this.planes[1].distance=-(t+d),j.set(this.planes[2].normal,i+n,u+a,f+l),this.planes[2].distance=-(t+p),j.set(this.planes[3].normal,i-n,u-a,f-l),this.planes[3].distance=-(t-p),j.set(this.planes[4].normal,i-r,u-s,f-h),this.planes[4].distance=-(t-m),j.set(this.planes[5].normal,i+r,u+s,f+h),this.planes[5].distance=-(t+m),this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))}}]),t}());function _t(t,e){var n,r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){var n;if(t)return"string"==typeof t?wt(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return n&&(t=n),r=0,{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}ai=(0,y.b2)(),we=(0,y.f3)(b.MeshComponentManager),ie=(0,y.f3)(b.CullableComponentManager),ui=(0,y.f3)(b.GeometryComponentManager),Jr=(0,y.f3)(b.HierarchyComponentManager),cn=(0,y.f3)(b.TransformComponentManager);var St,Et,Mt,At,Ct,Tt,kt,Ot,Pt,It=ai((dt=s((ai=function(){function t(){i(this,t),r(this,"mesh",dt,this),r(this,"cullable",pt,this),r(this,"geometry",gt,this),r(this,"hierarchy",mt,this),r(this,"transform",vt,this),this.planes=void 0}var e;return a(t,[{key:"setFrustumPlanes",value:function(t){this.planes=t}},{key:"execute",value:(e=l(u().mark((function t(e){var n,r,i,o,a,s,c,l,h,f,d,p,g,m,v,y,b,x,_,w,S;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=_t(e);try{for(n.s();!(r=n.n()).done;){i=r.value,o=i.getScene(),a=i.getCamera(),s=_t(o.getEntities());try{for(s.s();!(c=s.n()).done;)l=c.value,(h=this.mesh.getComponentByEntity(l))&&(f=this.hierarchy.getComponentByEntity(l),d=this.cullable.getComponentByEntity(l),p=h.geometry,g=this.transform.getComponentByEntity(l),p&&p.aabb&&g&&h.aabbDirty&&(m=g.worldTransform,v=p.aabb,y=v.center,b=v.halfExtents,x=j.transformMat4(j.create(),y,m),u=m,(E=B.create())[0]=u[0],E[1]=u[1],E[2]=u[2],E[3]=u[4],E[4]=u[5],E[5]=u[6],E[6]=u[8],E[7]=u[9],E[8]=u[10],_=E,w=j.transformMat3(j.create(),b,_),h.aabb.update(x,w),h.aabbDirty=!1),d)&&p&&(S=this.cullable.getComponentByEntity((null==f?void 0:f.parentID)||-1),d.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(h.aabb,(null==S?void 0:S.visibilityPlaneMask)||ft.INDETERMINATE,this.planes||a.getFrustum().planes),d.visible=d.visibilityPlaneMask!==ft.OUTSIDE)}catch(t){s.e(t)}finally{s.f()}}}catch(t){n.e(t)}finally{n.f()}case 2:case"end":return t.stop()}var u,E}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(t,e,n){if(e===ft.OUTSIDE||e===ft.INSIDE)return e;for(var r=ft.INSIDE,i=0,o=n.length;i<o;++i){var a=i<31?1<<i:0;if(!(i<31&&0==(e&a))){var s=n[i],u=s.normal;s=s.distance;if(0<j.dot(u,t.getNegativeFarPoint(n[i]))+s)return ft.OUTSIDE;0<j.dot(u,t.getPositiveFarPoint(n[i]))+s&&(r|=a)}}return r}}]),t}()).prototype,"mesh",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=s(ai.prototype,"cullable",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=s(ai.prototype,"geometry",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=s(ai.prototype,"hierarchy",[Jr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=s(ai.prototype,"transform",[cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=ai))||we,Nt=n(85975);function Dt(t,e){var n,r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){var n;if(t)return"string"==typeof t?Lt(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lt(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return n&&(t=n),r=0,{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function Lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}ie=(0,y.b2)(),ui=(0,y.f3)(b.MeshComponentManager),Jr=(0,y.f3)(b.GeometryComponentManager),cn=(0,y.f3)(b.MaterialComponentManager),ai=(0,y.f3)(b.CullableComponentManager),we=(0,y.f3)(b.TransformComponentManager),Gr=(0,y.f3)(b.HierarchyComponentManager),de=(0,y.f3)(b.Systems),ce=(0,y.t6)(b.FrameGraphSystem),le=(0,y.f3)(b.RenderEngine),Zr=(0,y.f3)(b.ResourcePool);var Rt,Bt,jt,Ft,zt=ie(($r=ie=function(){function t(){var e=this;i(this,t),r(this,"mesh",St,this),r(this,"geometry",Et,this),r(this,"material",Mt,this),r(this,"cullable",At,this),r(this,"transform",Ct,this),r(this,"hierarchy",Tt,this),r(this,"frameGraphSystem",kt,this),r(this,"engine",Ot,this),r(this,"resourcePool",Pt,this),this.modelCache={},this.setup=function(t,e,n){var r=t.createRenderTarget(e,"color buffer",{width:1,height:1,usage:Y.RENDER_ATTACHMENT|Y.SAMPLED|Y.COPY_SRC});n.data={output:e.write(t,r)}},this.execute=function(){var t=l(u().mark((function t(n,r,i){var o,a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=n.getResourceNode(r.data.output),o=e.resourcePool.getOrCreateResource(o.resource),a=Dt(i),t.prev=3,a.s();case 5:if((s=a.n()).done){t.next=11;break}return s=s.value,t.next=9,e.initView(s);case 9:t.next=5;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),a.e(t.t0);case 16:return t.prev=16,a.f(),t.finish(16);case 19:s=e.engine.getCanvas(),o.resize({width:s.width,height:s.height}),e.engine.setScissor({enable:!1}),e.engine.clear({framebuffer:o,color:i[0].getClearColor(),depth:1}),e.engine.useFramebuffer(o,(function(){var t,n=Dt(i);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.renderView(r)}}catch(t){n.e(t)}finally{n.f()}}));case 24:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})));return function(e,n,r){return t.apply(this,arguments)}}()}var e,n;return a(t,[{key:"renderView",value:function(t){var e,n=t.getScene(),r=t.getCamera(),i=r.getViewTransform(),o=Nt.multiply(Nt.create(),r.getPerspective(),i),a=(o=(r.getFrustum().extractFromVPMatrix(o),t.getViewport()),o.x),s=o.y,u=o.width,c=(o=o.height,this.engine.viewport({x:a,y:s,width:u,height:o}),Dt(n.getEntities()));try{for(c.s();!(e=c.n()).done;){var l=e.value;this.renderMesh(l,{camera:r,view:t,viewMatrix:i})}}catch(t){c.e(t)}finally{c.f()}}},{key:"renderMesh",value:function(t,e){var n,r,i,o=e.camera,a=e.view,s=(e=e.viewMatrix,this.mesh.getComponentByEntity(t));s&&s.visible&&(n=s.material,r=s.geometry)&&!r.dirty&&n&&(r=this.transform.getComponentByEntity(t),t=Nt.multiply(Nt.create(),e,r.worldTransform),i=(a=a.getViewport()).width,a=a.height,n.setUniform({projectionMatrix:o.getPerspective(),modelViewMatrix:t,modelMatrix:r.worldTransform,viewMatrix:e,cameraPosition:o.getPosition(),u_viewport:[i,a]}),s.model)&&(s.model.draw({uniforms:n.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{})}),n.uniforms.forEach((function(t){t.dirty=!1})),n.dirty=!1)}},{key:"initMesh",value:(n=l(u().mark((function t(e,n){var r,i,o,a,s,c,l;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.mesh.getComponentByEntity(e)){t.next=3;break}return t.abrupt("return");case 3:if(i=r.material,(o=r.geometry)&&!o.dirty&&i){t.next=7;break}return t.abrupt("return");case 7:if(r.model)t.next=24;else{if(a="m-".concat(i.entity,"-g-").concat(o.entity),this.modelCache[a])return r.model=this.modelCache[a],t.abrupt("return");t.next=12}break;case 12:return i.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),l=this.engine,s=l.createModel,c=l.createAttribute,l={vs:i.vertexShaderGLSL,fs:i.fragmentShaderGLSL,defines:i.defines,attributes:o.attributes.reduce((function(t,e){return e.data&&e.buffer&&(t[e.name]=c({buffer:e.buffer,attributes:e.attributes,arrayStride:e.arrayStride,stepMode:e.stepMode,divisor:"vertex"===e.stepMode?0:1})),t}),{}),uniforms:i.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{}),scissor:{enable:!0,box:function(){return n.getViewport()}}},i.cull&&(l.cull=i.cull),i.depth&&(l.depth=i.depth),i.blend&&(l.blend=i.blend),o.indicesBuffer&&(l.elements=o.indicesBuffer),o.maxInstancedCount&&(l.instances=o.maxInstancedCount,l.count=o.vertexCount||3),t.next=22,s(l);case 22:r.model=t.sent,this.modelCache[a]=r.model;case 24:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"initView",value:(e=l(u().mark((function t(e){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getScene(),n=Dt(n.getEntities()),t.prev=2,n.s();case 4:if((r=n.n()).done){t.next=10;break}return r=r.value,t.next=8,this.initMesh(r,e);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])}))),function(t){return e.apply(this,arguments)})}]),t}(),ie.IDENTIFIER="Render Pass",St=s((ie=$r).prototype,"mesh",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et=s(ie.prototype,"geometry",[Jr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mt=s(ie.prototype,"material",[cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),At=s(ie.prototype,"cullable",[ai],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct=s(ie.prototype,"transform",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=s(ie.prototype,"hierarchy",[Gr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=s(ie.prototype,"frameGraphSystem",[de,ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ot=s(ie.prototype,"engine",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pt=s(ie.prototype,"resourcePool",[Zr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$r=ie))||$r;function Ut(t,e){var n,r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){var n;if(t)return"string"==typeof t?Gt(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gt(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return n&&(t=n),r=0,{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Vt,Wt,Ht,Yt,qt,Xt,Kt=1,Zt=2,$t=(ui=(0,y.b2)(),Jr=(0,y.f3)(b.RenderEngine),cn=(0,y.f3)(b.ResourcePool),ai=(0,y.f3)(b.RenderPassFactory),we=(0,y.f3)(b.MeshComponentManager),ui((de=Gr=function(){function t(){var e=this;i(this,t),r(this,"engine",Rt,this),r(this,"resourcePool",Bt,this),r(this,"renderPassFactory",jt,this),r(this,"mesh",Ft,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(t,e,n){var r=t.createRenderTarget(e,"picking fbo",{width:1,height:1});n.data={output:e.write(t,r)},e.hasSideEffect=!0},this.execute=function(){var t=l(u().mark((function t(n,r,i){var o,a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.views=i,e.alreadyInRendering)return t.abrupt("return");t.next=3;break;case 3:o=Ut(i);try{for(s=function(){var t=a.value,i=t.getViewport(),o=i.width,s=(i=i.height,e.alreadyInRendering=!0,n.getResourceNode(r.data.output));e.pickingFBO=e.resourcePool.getOrCreateResource(s.resource),e.pickingFBO.resize({width:o,height:i}),e.engine.useFramebuffer(e.pickingFBO,(function(){e.engine.clear({framebuffer:e.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n,r=e.renderPassFactory(zt.IDENTIFIER),i=[],o=Ut(t.getScene().getEntities());try{for(o.s();!(n=o.n()).done;){var a=n.value,s=e.mesh.getComponentByEntity(a);s.material.setUniform("u_PickingStage",Kt),i.push(s)}}catch(n){o.e(n)}finally{o.f()}r.renderView(t),i.forEach((function(t){t.material.setUniform("u_PickingStage",Zt)})),e.alreadyInRendering=!1}))},o.s();!(a=o.n()).done;)s()}catch(t){o.e(t)}finally{o.f()}case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),this.pick=function(t,n){var r,i,o=t.x,a=t.y,s=(t=e.engine,t.readPixels),u=(t=t.useFramebuffer,n.getViewport()),c=u.width,l=u.height,h=o*window.devicePixelRatio;u=a*window.devicePixelRatio;if(!(c<h||h<0||l<u||u<0))return t(e.pickingFBO,(function(){var t;0===(r=s({x:Math.round(h),y:Math.round(l-(a+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO}))[0]&&0===r[1]&&0===r[2]||(i=(t=g(t=r,3))[0]+256*t[1]+65536*t[2]-1,e.highlightEnabled&&e.highlightPickedFeature(r,n))})),i}}return a(t,[{key:"enableHighlight",value:function(t){this.highlightEnabled=t}},{key:"setHighlightColor",value:function(t){this.highlightColor=t}},{key:"highlightPickedFeature",value:function(t,e){if(t){var n,r=Ut(e.getScene().getEntities());try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.mesh.getComponentByEntity(i).material;o.setUniform("u_PickingStage",Zt),o.setUniform("u_PickingColor",[t[0],t[1],t[2]]),o.setUniform("u_HighlightColor",this.highlightColor)}}catch(t){r.e(t)}finally{r.f()}}}}]),t}(),Gr.IDENTIFIER="PixelPicking Pass",Rt=s((ce=de).prototype,"engine",[Jr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bt=s(ce.prototype,"resourcePool",[cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt=s(ce.prototype,"renderPassFactory",[ai],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ft=s(ce.prototype,"mesh",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=ce))||le),Jt=(Zr=(0,y.b2)(),ie=(0,y.f3)(b.RenderEngine),$r=(0,y.f3)(b.ResourcePool),Zr((Gr=ui=function t(){var e=this;i(this,t),r(this,"engine",Vt,this),r(this,"resourcePool",Wt,this),this.model=void 0,this.setup=function(t,e,n){var r,i=t.getPass(zt.IDENTIFIER);i&&(r=t.createRenderTarget(e,"render to screen",{width:1,height:1}),n.data={input:e.read(i.data.output),output:e.write(t,r)})},this.execute=function(){var t=l(u().mark((function t(n,r){var i,o,a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.engine,o=i.createModel,a=i.createAttribute,i=i.createBuffer,e.model){t.next=6;break}return t.next=4,o({vs:e.engine.supportWebGPU?"layout(location = 0) in vec2 a_Position;\nlayout(location = 0) out vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}":"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:e.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform sampler u_TextureSampler;\nlayout(set = 0, binding = 1) uniform texture2D u_Texture;\n\nlayout(location = 0) in vec2 v_UV;\nlayout(location = 0) out vec4 outColor;\n\nvoid main() {\n  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);\n}":"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",attributes:{a_Position:a({buffer:i({data:[-4,-4,4,-4,0,4],type:Y.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:o=t.sent,e.model=o;case 6:a=n.getResourceNode(r.data.input),s=e.resourcePool.getOrCreateResource(a.resource),e.engine.useFramebuffer(null,(function(){e.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),e.model.draw({uniforms:{u_Texture:s}})}));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.tearDown=function(){e.model=void 0}},ui.IDENTIFIER="Copy Pass",Vt=s((de=Gr).prototype,"engine",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wt=s(de.prototype,"resourcePool",[$r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jr=de))||Jr),Qt=(cn=(0,y.b2)(),ai=(0,y.f3)(b.Systems),we=(0,y.t6)(b.FrameGraphSystem),ce=(0,y.f3)(b.RenderPassFactory),le=(0,y.f3)(b.ConfigService),Zr=(0,y.f3)(b.ResourcePool),cn((Ht=s((ui=function(){function t(){i(this,t),r(this,"frameGraphSystem",Ht,this),r(this,"renderPassFactory",Yt,this),r(this,"configService",qt,this),r(this,"resourcePool",Xt,this)}var e;return a(t,[{key:"execute",value:(e=l(u().mark((function t(e){var n,r,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=this.renderPassFactory(zt.IDENTIFIER),r=i.setup,i=i.execute,this.frameGraphSystem.addPass(zt.IDENTIFIER,r,i),r=this.renderPassFactory(Jt.IDENTIFIER),i=r.setup,n=r.execute,r=r.tearDown,i=this.frameGraphSystem.addPass(Jt.IDENTIFIER,i,n,r),this.frameGraphSystem.present(i.data.output);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(t,e){return this.renderPassFactory($t.IDENTIFIER).pick(t,e)}}]),t}()).prototype,"frameGraphSystem",[ai,we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yt=s(ui.prototype,"renderPassFactory",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qt=s(ui.prototype,"configService",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xt=s(ui.prototype,"resourcePool",[Zr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gr=ui))||Gr);function te(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}var ee,ne,re,ie=function(){w(e,f);var t=te(e);function e(n){var r;return i(this,e),(r=t.call(this,n)).parentID=void 0,Object.assign((0,E.Z)(r),n),r}return e}(),oe=($r=(0,y.b2)(),de=(0,y.f3)(b.HierarchyComponentManager),Jr=(0,y.f3)(b.TransformComponentManager),cn=(0,y.f3)(b.MeshComponentManager),$r((ee=s((ai=function(){function t(){i(this,t),r(this,"hierarchy",ee,this),r(this,"transform",ne,this),r(this,"mesh",re,this)}var e;return a(t,[{key:"execute",value:(e=l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var t=this;this.transform.forEach((function(e,n){(n.isDirty()||n.isLocalDirty())&&(t.setMeshAABBDirty(t.mesh.getComponentByEntity(e)),n.updateTransform())}))}},{key:"runHierarchyUpdateSystem",value:function(){var t=this;this.hierarchy.forEach((function(e,n){e=t.transform.getComponentByEntity(e),n=t.transform.getComponentByEntity(n.parentID),null!==e&&null!==n&&e.updateTransformWithParent(n)}))}},{key:"attach",value:function(t,e,n){this.hierarchy.contains(t)&&this.detach(t),this.hierarchy.create(t,{parentID:e});var r=this.mesh.getComponentByEntity(e);if(this.setMeshAABBDirty(r),r&&-1===r.children.indexOf(t)&&r.children.push(t),1<this.hierarchy.getCount())for(var i=this.hierarchy.getCount()-1;0<i;--i)for(var o=this.hierarchy.getEntity(i),a=0;a<i;++a)if(this.hierarchy.getComponent(a).parentID===o){this.hierarchy.moveItem(i,a),++i;break}this.hierarchy.getComponentByEntity(t);r=this.transform.getComponentByEntity(e);var s=(null===r&&(r=this.transform.create(e)),this.transform.getComponentByEntity(t));null===s&&(s=this.transform.create(t),r=this.transform.getComponentByEntity(e)),s.parent=r,!n&&r&&(s.matrixTransform(Nt.invert(Nt.create(),r.worldTransform)),s.updateTransform()),r&&s.updateTransformWithParent(r)}},{key:"detach",value:function(t){var e,n=this.hierarchy.getComponentByEntity(t);null!==n&&(null!==(e=this.transform.getComponentByEntity(t))&&(e.parent=null,e.applyTransform()),this.hierarchy.removeKeepSorted(t),(e=this.mesh.getComponentByEntity(n.parentID))&&(n=e.children.indexOf(t),e.children.splice(n,1)),this.setMeshAABBDirty(e))}},{key:"detachChildren",value:function(t){var e=this.mesh.getComponentByEntity(t);e&&(e.children=[]);for(var n,r=0;r<this.hierarchy.getCount();)(null==(n=this.hierarchy.getComponent(r))?void 0:n.parentID)===t?(n=this.hierarchy.getEntity(r),this.detach(n)):++r}},{key:"setMeshAABBDirty",value:function(t){t&&(t.aabbDirty=!0)}}]),t}()).prototype,"hierarchy",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=s(ai.prototype,"transform",[Jr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=s(ai.prototype,"mesh",[cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=ai))||we),ae=n(32945);function se(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}var ue,ce=function(){w(e,f);var t=se(e);function e(n){var r,o,a,s,u,c,l,h,f,d,p,g,m,v,y;return i(this,e),(r=t.call(this,n)).dirtyFlag=void 0,r.localDirtyFlag=void 0,r.parent=null,r.localPosition=j.fromValues(0,0,0),r.localRotation=ae.fromValues(0,0,0,1),r.localScale=j.fromValues(1,1,1),r.localTransform=Nt.create(),r.position=j.fromValues(0,0,0),r.rotation=ae.fromValues(0,0,0,1),r.scaling=j.fromValues(1,1,1),r.worldTransform=Nt.create(),r.matrixTransform=(o=Nt.create(),function(t){Nt.multiply(o,r.getLocalTransform(),t),Nt.getScaling(r.localScale,o),Nt.getTranslation(r.localPosition,o),Nt.getRotation(r.localRotation,o)}),r.rotateRollPitchYaw=(a=ae.create(),s=ae.create(),u=ae.create(),function(t,e,n){r.setDirty(),ae.fromEuler(a,t,0,0),ae.fromEuler(s,0,e,0),ae.fromEuler(u,0,0,n),ae.multiply(r.localRotation,a,r.localRotation),ae.multiply(r.localRotation,r.localRotation,s),ae.multiply(r.localRotation,u,r.localRotation),ae.normalize(r.localRotation,r.localRotation)}),r.lerp=(c=j.create(),l=ae.create(),h=j.create(),f=j.create(),d=ae.create(),p=j.create(),function(t,e,n){r.setDirty(),Nt.getScaling(c,t.worldTransform),Nt.getTranslation(h,t.worldTransform),Nt.getRotation(l,t.worldTransform),Nt.getScaling(f,e.worldTransform),Nt.getTranslation(p,e.worldTransform),Nt.getRotation(d,e.worldTransform),j.lerp(r.localScale,c,f,n),ae.slerp(r.localRotation,l,d,n),j.lerp(r.localPosition,h,p,n)}),r.translate=(g=j.create(),function(t){return j.add(g,r.getPosition(),t),r.setPosition(g),r.setDirty(!0),(0,E.Z)(r)}),r.translateLocal=function(t){return j.transformQuat(t,t,r.localRotation),j.add(r.localPosition,r.localPosition,t),r.setLocalDirty(!0),(0,E.Z)(r)},r.setPosition=(m=Nt.create(),function(t){return r.position=t,r.setLocalDirty(!0),null===r.parent?j.copy(r.localPosition,t):(Nt.copy(m,r.parent.worldTransform),Nt.invert(m,m),j.transformMat4(r.localPosition,t,m)),(0,E.Z)(r)}),r.rotate=(v=ae.create(),function(t){var e,n;return null===r.parent?ae.multiply(r.localRotation,r.localRotation,t):(e=r.getRotation(),n=r.parent.getRotation(),ae.copy(v,n),ae.invert(v,v),ae.multiply(v,v,t),ae.multiply(r.localRotation,t,e)),ae.normalize(r.localRotation,r.localRotation),r.setLocalDirty(),(0,E.Z)(r)}),r.rotateLocal=function(t){return ae.multiply(r.localRotation,r.localRotation,t),ae.normalize(r.localRotation,r.localRotation),r.setLocalDirty(!0),(0,E.Z)(r)},r.setRotation=(y=ae.create(),function(t){return null===r.parent?ae.copy(r.localRotation,t):(ae.copy(y,r.parent.getRotation()),ae.invert(y,y),ae.copy(r.localRotation,y),ae.mul(r.localRotation,r.localRotation,t)),r.setLocalDirty(!0),(0,E.Z)(r)}),r}return a(e,[{key:"setLocalPosition",value:function(t){j.copy(this.localPosition,t),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(t){j.copy(this.localScale,t),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(t){return ae.copy(this.localRotation,t),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){0<arguments.length&&void 0!==arguments[0]&&!arguments[0]?this.dirtyFlag&=~e.DIRTY:this.dirtyFlag|=e.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){0<arguments.length&&void 0!==arguments[0]&&!arguments[0]?this.localDirtyFlag&=~e.DIRTY:(this.localDirtyFlag|=e.DIRTY,this.setDirty(!0))}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&null===this.parent&&(Nt.copy(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(t){Nt.multiply(this.worldTransform,t.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),Nt.getScaling(this.localScale,this.worldTransform),Nt.getTranslation(this.localPosition,this.worldTransform),Nt.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=j.fromValues(0,0,0),this.localRotation=ae.fromValues(0,0,0,1),this.localScale=j.fromValues(1,1,1)}},{key:"scaleLocal",value:function(t){return this.setLocalDirty(),j.multiply(this.localScale,this.localScale,t),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(Nt.fromRotationTranslationScale(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return(this.isLocalDirty()||this.isDirty())&&(this.parent&&this.parent.getWorldTransform(),this.updateTransform()),this.worldTransform}},{key:"getPosition",value:function(){return Nt.getTranslation(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return Nt.getRotation(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return Nt.getScaling(this.scaling,this.worldTransform),this.scaling}}]),e}(),le=(ce.DIRTY=1,n(84879)),he=(Zr=(0,y.b2)(),ui=(0,y.f3)(b.RenderEngine),Zr((ue=s((Gr=function(){function t(){i(this,t),r(this,"engine",ue,this),this.resourcePool={}}return a(t,[{key:"getOrCreateResource",value:function(t){var e,n,r;return this.resourcePool[t.name]||(e=(r=t.descriptor).width,n=r.height,r=r.usage,this.resourcePool[t.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:e,height:n,wrapS:Y.CLAMP_TO_EDGE,wrapT:Y.CLAMP_TO_EDGE,usage:r})})),this.resourcePool[t.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),t}()).prototype,"engine",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$r=Gr))||$r);function fe(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}var de=function(){w(e,f);var t=fe(e);function e(n){var r;return i(this,e),(r=t.call(this,n)).name=void 0,r.name=n.name||"",r}return e}(),pe=(0,y.b2)()(Jr=function(){function t(){i(this,t),this.config=void 0}return a(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),t}())||Jr,ge=(0,y.b2)()(cn=function(){function t(){i(this,t)}return a(t,[{key:"listen",value:function(t){}},{key:"on",value:function(t,e){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),t}())||cn,me=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function ve(t){var e={};return{content:t=t.replace(me,(function(t,n,r){r=r.split(":");var i=r[0].trim(),o="";switch(1<r.length&&(o=r[1].trim()),n){case"bool":o="true"===o;break;case"float":case"int":o=Number(o);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":o=o?o.replace("[","").replace("]","").split(",").reduce((function(t,e){return t.push(Number(e.trim())),t}),[]):new Array(function(t){var e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16}return e}(n)).fill(0)}return e[i]=o,"uniform ".concat(n," ").concat(i,";\n")})),uniforms:e}}function ye(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ye(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xe=/precision\s+(high|low|medium)p\s+float/,_e=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,we=(0,y.b2)()(ai=function(){function t(){i(this,t),this.moduleCache={},this.rawContentCache={}}return a(t,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:"attribute vec3 a_PickingColor;\nvarying vec4 v_PickingResult;\n\nuniform vec3 u_PickingColor : [0, 0, 0];\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_PickingThreshold : 1.0;\nuniform float u_PickingBuffer: 0.0;\n\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  // compares only in highlight stage\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n\nfloat setPickingSize(float x) {\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\n}",fs:"varying vec4 v_PickingResult;\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\n\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color) {\n  bool selected = bool(v_PickingResult.a);\n\n  if (selected) {\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(resultRGB, color.a);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  return filterPickingColor(filterHighlightColor(color));\n}\n"}),this.registerModule("sdf2d",{vs:"",fs:"/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b)\n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}"})}},{key:"registerModule",value:function(t,e){var n,r,i,o;this.rawContentCache[t]||(r=e.vs,o=void 0===(o=e.fs)?"":o,e=e.uniforms,n=(r=ve(void 0===r?"":r)).content,r=r.uniforms,i=(o=ve(o)).content,o=o.uniforms,this.rawContentCache[t]={fs:i,uniforms:be(be(be({},r),o),e),vs:n})}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var e,n,r,i,o,a=this;return this.moduleCache[t]||(o=this.rawContentCache[t].vs||"",r=this.rawContentCache[t].fs||"",e=(o=this.processModule(o,[],"vs")).content,o=o.includeList,n=(r=this.processModule(r,[],"fs")).content,r=r.includeList,i=n,o=o.concat(r).concat(t).filter((function(t,e,n){return n.indexOf(t)===e})).reduce((function(t,e){return be(be({},t),a.rawContentCache[e].uniforms)}),{}),xe.test(n)||(i="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n"+n),this.moduleCache[t]={fs:i.trim(),uniforms:o,vs:e.trim()}),this.moduleCache[t]}},{key:"processModule",value:function(t,e,n){var r=this;return{content:t.replace(_e,(function(t,i){var o;i=i.split(" ")[0].replace(/"/g,"");return-1<e.indexOf(i)?"":(o=r.rawContentCache[i][n],e.push(i),r.processModule(o||"",e,n).content)})),includeList:e}}}]),t}())||ai,Se=new y.W2;function Ee(t){for(var e=new lt,n=j.fromValues(t[0],t[1],t[2]),r=j.fromValues(t[0],t[1],t[2]),i=3;i<t.length;){var o=t[i++],a=t[i++],s=t[i++];o<n[0]&&(n[0]=o),a<n[1]&&(n[1]=a),s<n[2]&&(n[2]=s),o>r[0]&&(r[0]=o),a>r[1]&&(r[1]=a),s>r[2]&&(r[2]=s)}return e.setMinMax(n,r),e}(0,le.Z)(Se,!1),Se.bind(b.ShaderModuleService).to(we).inSingletonScope(),Se.bind(b.NameComponentManager).toConstantValue(new e(de)),Se.bind(b.HierarchyComponentManager).toConstantValue(new e(ie)),Se.bind(b.TransformComponentManager).toConstantValue(new e(ce)),Se.bind(b.MeshComponentManager).toConstantValue(new e(yt)),Se.bind(b.CullableComponentManager).toConstantValue(new e(ct)),Se.bind(b.GeometryComponentManager).toConstantValue(new e(K)),Se.bind(b.MaterialComponentManager).toConstantValue(new e(rt));var Me,Ae,Ce,Te="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);function ke(t){return"number"==typeof t}function Oe(t){return void 0===t?0:360<t||t<-360?t%360:t}function Pe(t,e,n){return ke(t)?j.fromValues(t,e,n):3===t.length?j.clone(t):j.fromValues(t[0],t[1],t[2])}j.create(),j.create(),j.create(),j.create(),j.create(),j.create(),n(59518),n(26199),n(14156),n(71468),n(48871),n(9871),n(25612),n(92777),n(20159),n(61622),n(20499),n(64851),(Zr=Me=Me||{}).Void="Void",Zr.Boolean="Boolean",Zr.Float="Float",Zr.Uint32="Uint32",Zr.Int32="Int32",Zr.Vector="Vector",Zr.Vector2Float="vec2<f32>",Zr.Vector3Float="vec3<f32>",Zr.Vector4Float="vec4<f32>",Zr.Vector2Boolean="vec2<bool>",Zr.Vector3Boolean="vec3<bool>",Zr.Vector4Boolean="vec4<bool>",Zr.Vector2Uint="vec2<u32>",Zr.Vector3Uint="vec3<u32>",Zr.Vector4Uint="vec4<u32>",Zr.Vector2Int="vec2<i32>",Zr.Vector3Int="vec3<i32>",Zr.Vector4Int="vec4<i32>",Zr.Matrix="Matrix",Zr.Matrix3x3Float="mat3x3<f32>",Zr.Matrix4x4Float="mat4x4<i32>",Zr.Struct="Struct",Zr.FloatArray="Float[]",Zr.Vector4FloatArray="vec4<f32>[]",(ui=Ae=Ae||{}).Input="Input",ui.Output="Output",ui.Uniform="Uniform",ui.Workgroup="Workgroup",ui.UniformConstant="UniformConstant",ui.Image="Image",ui.StorageBuffer="StorageBuffer",ui.Private="Private",ui.Function="Function",(Gr=Ce=Ce||{}).GLSL100="GLSL100",Gr.GLSL450="GLSL450",Gr.WGSL="WGSL";var Ie,Ne,De,Le,Re,Be=function(){function t(e,n){i(this,t),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=e,this.matrix=Nt.clone(n.matrix),this.right=j.clone(n.right),this.up=j.clone(n.up),this.forward=j.clone(n.forward),this.position=j.clone(n.position),this.focalPoint=j.clone(n.focalPoint),this.distanceVector=j.clone(n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance}return a(t,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(t){t.matrix=Nt.copy(t.matrix,this.matrix),t.right=j.copy(t.right,this.right),t.up=j.copy(t.up,this.up),t.forward=j.copy(t.forward,this.forward),t.position=j.copy(t.position,this.position),t.focalPoint=j.copy(t.focalPoint,this.focalPoint),t.distanceVector=j.copy(t.distanceVector,this.distanceVector),t.azimuth=this.azimuth,t.elevation=this.elevation,t.roll=this.roll,t.relAzimuth=this.relAzimuth,t.relElevation=this.relElevation,t.relRoll=this.relRoll,t.dollyingStep=this.dollyingStep,t.distance=this.distance}}]),t}(),je=(($r=Ne=Ne||{}).ORBITING="ORBITING",$r.EXPLORING="EXPLORING",$r.TRACKING="TRACKING",(Jr=De=De||{}).DEFAULT="DEFAULT",Jr.ROTATIONAL="ROTATIONAL",Jr.TRANSLATIONAL="TRANSLATIONAL",Jr.CINEMATIC="CINEMATIC",(cn=Le=Le||{}).ORTHOGRAPHIC="ORTHOGRAPHIC",cn.PERSPECTIVE="PERSPECTIVE",Math.PI/180),Fe=180/Math.PI,ze=(ai=(0,y.b2)(),le=(0,y.f3)(b.InteractorService),ai((de=we=function(){function t(){i(this,t),this.matrix=Nt.create(),this.right=j.fromValues(1,0,0),this.up=j.fromValues(0,1,0),this.forward=j.fromValues(0,0,1),this.position=j.fromValues(0,0,1),this.focalPoint=j.fromValues(0,0,0),this.distanceVector=j.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,r(this,"interactor",Ie,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=Nt.create(),this.view=void 0,this.following=void 0,this.type=Ne.EXPLORING,this.trackingMode=De.DEFAULT,this.projectionMode=Le.PERSPECTIVE,this.frustum=new xt,this.landmarks=[],this.landmarkAnimationID=void 0}return a(t,[{key:"clone",value:function(){var e=new t;return e.setType(this.type,void 0),e.interactor=this.interactor,e}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(t,e){return this.type=t,this.type===Ne.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Ne.TRACKING&&void 0!==e&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==Ne.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){this.rotateWorld=t,this._getAngles()}},{key:"getViewTransform",value:function(){return Nt.invert(Nt.create(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setViewOffset",value:function(t,e,n,r,i,o){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.projectionMode===Le.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===Le.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(t,e,n,r){return this.projectionMode=Le.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r,Nt.perspective(this.perspective,this.fov*je,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(t,e,n,r,i,o){this.projectionMode=Le.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=o;e=(this.rright-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.rright+this.left)/2,r=(this.top+this.bottom)/2;var a,s=n-e;n+=e,e=r+t,r-=t;return void 0!==this.view&&this.view.enabled&&(t=(this.rright-this.left)/this.view.fullWidth/this.zoom,a=(this.top-this.bottom)/this.view.fullHeight/this.zoom,n=(s+=t*this.view.offsetX)+t*this.view.width,r=(e-=a*this.view.offsetY)-a*this.view.height),Nt.ortho(this.perspective,s,n,e,r,i,o),this}},{key:"setPosition",value:function(t,e,n){return this._setPosition(t,e,n),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(t,e,n){var r,i=j.fromValues(0,1,0);return this.focalPoint=Pe(t,e,n),this.trackingMode===De.CINEMATIC&&(t=(r=j.subtract(j.create(),this.focalPoint,this.position))[0],e=r[1],n=r[2],r=j.length(r),e=Math.asin(e/r)*Fe,r=90+Math.atan2(n,t)*Fe,n=Nt.create(),Nt.rotateY(n,n,r*je),Nt.rotateX(n,n,e*je),i=j.transformMat4(j.create(),[0,1,0],n)),Nt.invert(this.matrix,Nt.lookAt(Nt.create(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(t){var e,n,r;if(!(this.distance===t||t<0))return this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100,e=j.create(),t=this.distance,n=this.forward,r=this.focalPoint,e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"changeAzimuth",value:function(t){return this.setAzimuth(this.azimuth+t),this}},{key:"changeElevation",value:function(t){return this.setElevation(this.elevation+t),this}},{key:"changeRoll",value:function(t){return this.setRoll(this.roll+t),this}},{key:"setAzimuth",value:function(t){return this.azimuth=Oe(t),this.computeMatrix(),this._getAxes(),this.type===Ne.ORBITING||this.type===Ne.EXPLORING?this._getPosition():this.type===Ne.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=Oe(t),this.computeMatrix(),this._getAxes(),this.type===Ne.ORBITING||this.type===Ne.EXPLORING?this._getPosition():this.type===Ne.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(t){return this.roll=Oe(t),this.computeMatrix(),this._getAxes(),this.type===Ne.ORBITING||this.type===Ne.EXPLORING?this._getPosition():this.type===Ne.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(t,e,n){if(this.type===Ne.EXPLORING){t=Oe(t),e=Oe(e),n=Oe(n);var r=ae.setAxisAngle(ae.create(),[1,0,0],(this.rotateWorld?1:-1)*e*je),i=ae.setAxisAngle(ae.create(),[0,1,0],(this.rotateWorld?1:-1)*t*je),o=ae.setAxisAngle(ae.create(),[0,0,1],n*je);i=ae.multiply(ae.create(),i,r),i=ae.multiply(ae.create(),i,o),r=Nt.fromQuat(Nt.create(),i);Nt.translate(this.matrix,this.matrix,[0,0,-this.distance]),Nt.multiply(this.matrix,this.matrix,r),Nt.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(90<Math.abs(this.elevation+e))return;this.relElevation=Oe(e),this.relAzimuth=Oe(t),this.relRoll=Oe(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Ne.ORBITING||this.type===Ne.EXPLORING?this._getPosition():this.type===Ne.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){return t=Pe(t,e,0),e=j.clone(this.position),j.add(e,e,j.scale(j.create(),this.right,t[0])),j.add(e,e,j.scale(j.create(),this.up,t[1])),this._setPosition(e),this}},{key:"dolly",value:function(t){var e=this.forward,n=j.clone(this.position);this.dollyingStep,t=this.distance+t*this.dollyingStep,t=Math.max(Math.min(t,this.maxDistance),this.minDistance)-this.distance;return n[0]+=t*e[0],n[1]+=t*e[1],n[2]+=t*e[2],this._setPosition(n),this.type===Ne.ORBITING||this.type===Ne.EXPLORING?this._getDistance():this.type===Ne.TRACKING&&j.add(this.focalPoint,n,this.distanceVector),this}},{key:"createLandmark",value:function(t,e){var n=this.clone();n.setPosition(e.position),n.setFocalPoint(e.focalPoint),void 0!==e.roll&&n.setRoll(e.roll),e=new Be(t,n);return this.landmarks.push(e),e}},{key:"setLandmark",value:function(t){return t=new Be(t,this),this.landmarks.push(t),this}},{key:"gotoLandmark",value:function(t){var e,n,r,i,o=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3,s=this.landmarks.find((function(e){return e.name===t}));s&&(0===a?s.retrieve(this):(void 0!==this.landmarkAnimationID&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect(),e=s.getPosition(),n=s.getFocalPoint(),r=s.getRoll(),window.requestAnimationFrame((function t(s){s-=i=void 0===i?s:i;var u=(1-Math.cos(s/a*Math.PI))/2,c=j.create(),l=j.create();j.lerp(c,o.focalPoint,n,u),j.lerp(l,o.position,e,u),u=o.roll*(1-u)+r*u,o.setFocalPoint(c),o.setPosition(l),o.setRoll(u),o.computeMatrix(),.01<j.dist(c,n)+j.dist(l,e)?s<a&&(o.landmarkAnimationID=window.requestAnimationFrame(t)):(o.setFocalPoint(c),o.setPosition(l),o.setRoll(u),o.computeMatrix(),o.interactor.connect())}))))}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var t=ae.setAxisAngle(ae.create(),[0,0,1],this.roll*je),e=(Nt.identity(this.matrix),n=ae.setAxisAngle(ae.create(),[1,0,0],(this.rotateWorld&&this.type!==Ne.TRACKING||this.type===Ne.TRACKING?1:-1)*this.elevation*je),e=ae.setAxisAngle(ae.create(),[0,1,0],(this.rotateWorld&&this.type!==Ne.TRACKING||this.type===Ne.TRACKING?1:-1)*this.azimuth*je),ae.multiply(ae.create(),e,n)),n=(e=ae.multiply(ae.create(),e,t),Nt.fromQuat(Nt.create(),e));this.type===Ne.ORBITING||this.type===Ne.EXPLORING?(Nt.translate(this.matrix,this.matrix,this.focalPoint),Nt.multiply(this.matrix,this.matrix,n),Nt.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Ne.TRACKING&&(Nt.translate(this.matrix,this.matrix,this.position),Nt.multiply(this.matrix,this.matrix,n))}},{key:"_setPosition",value:function(t,e,n){this.position=Pe(t,e,n),t=this.matrix,t[12]=this.position[0],t[13]=this.position[1],t[14]=this.position[2],t[15]=1}},{key:"_getAxes",value:function(){j.copy(this.right,Pe(R.transformMat4(R.create(),[1,0,0,0],this.matrix))),j.copy(this.up,Pe(R.transformMat4(R.create(),[0,1,0,0],this.matrix))),j.copy(this.forward,Pe(R.transformMat4(R.create(),[0,0,1,0],this.matrix))),j.normalize(this.right,this.right),j.normalize(this.up,this.up),j.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=j.length(this.distanceVector);0===r?(this.elevation=0,this.azimuth=0):this.type===Ne.TRACKING||this.rotateWorld?(this.elevation=Math.asin(e/r)*Fe,this.azimuth=Math.atan2(-t,-n)*Fe):(this.elevation=-Math.asin(e/r)*Fe,this.azimuth=-Math.atan2(-t,-n)*Fe)}},{key:"_getPosition",value:function(){j.copy(this.position,Pe(R.transformMat4(R.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){j.transformMat3(this.distanceVector,[0,0,-this.distance],B.fromMat4(B.create(),this.matrix)),j.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=j.subtract(j.create(),this.focalPoint,this.position),this.distance=j.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),t}(),we.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},Ie=s((ie=de).prototype,"interactor",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=ie))||ce),Ue=(yt=(0,y.b2)(),ct=(0,y.f3)(b.GeometryComponentManager),yt((e=K=function(){function t(){i(this,t),this.config=void 0,r(this,"geometry",Re,this),this.entity=void 0,this.component=void 0}return a(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.component=this.geometry.create(t),this.component.entity=t,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),t}(),K.BOX="box",K.SPHERE="sphere",K.PLANE="plane",K.MERGED="merged",Re=s((rt=e).prototype,"geometry",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zr=rt))||Zr),Ge=n(49469);function Ve(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var We={}.toString,He=function(t,e){return We.call(t)==="[object "+e+"]"},Ye=9007199254740991,qe={};qe["[object Float32Array]"]=qe["[object Float64Array]"]=qe["[object Int8Array]"]=qe["[object Int16Array]"]=qe["[object Int32Array]"]=qe["[object Uint8Array]"]=qe["[object Uint8ClampedArray]"]=qe["[object Uint16Array]"]=qe["[object Uint32Array]"]=!0,qe["[object Arguments]"]=qe["[object Array]"]=qe["[object ArrayBuffer]"]=qe["[object Boolean]"]=qe["[object DataView]"]=qe["[object Date]"]=qe["[object Error]"]=qe["[object Function]"]=qe["[object Map]"]=qe["[object Number]"]=qe["[object Object]"]=qe["[object RegExp]"]=qe["[object Set]"]=qe["[object String]"]=qe["[object WeakMap]"]=!1;var Xe,Ke,Ze=Object.prototype.toString,$e=function(t){return!!(e=t)&&"object"===S(e)&&"number"==typeof(e=t.length)&&-1<e&&e%1==0&&e<=Ye&&!!qe[Ze.call(t)];var e};function Je(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function Qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}ui=(0,y.b2)(),Gr=(0,y.f3)(b.RenderEngine),$r=(0,y.f3)(b.ConfigService);var tn,en,nn,rn,on,an=ui((Xe=s((Jr=function(){function t(){i(this,t),r(this,"engine",Xe,this),r(this,"configService",Ke,this),this.entity=h++,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var e,n,o;return a(t,[{key:"init",value:function(){var t=this.configService.get(),e=t.canvas;t=t.engineOptions;this.initPromise=this.engine.init(Qe({canvas:e||Ve(),swapChainFormat:Ge.EV.BGRA8Unorm,antialiasing:!1},t))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,e){var n=this;if("string"==typeof t){var r=ke(e)||$e(e)||(r=e,Array.isArray?Array.isArray(r):He(r,"Array"));if(this.compiledBundle&&this.compiledBundle.context){var i=this.compiledBundle.context.defines.find((function(e){return e.name===t}));if(i)return i.value=e,this;i=this.compiledBundle.context.uniforms.find((function(e){return e.name===t})),i&&(r?(i.data=e,i.isReferer=!1,i.storageClass===Ae.Uniform?this.model&&this.model.updateUniform(t,e):this.model&&this.model.updateBuffer(t,e)):(i.isReferer=!0,i.data=e))}}else Object.keys(t).forEach((function(e){n.setBinding(e,t[e])}));return this}},{key:"execute",value:(o=l(u().mark((function t(){var e,n,r=this,i=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=0<i.length&&void 0!==i[0]?i[0]:1,this.dirty)return this.compiledBundle.context&&(1<e?this.compiledBundle.context.maxIteration=e:this.compiledBundle.context.maxIteration++),t.next=5,this.compile();t.next=6;break;case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter((function(t){return t.isReferer})).forEach((function(t){var e=t.data;t=t.name;r.model.confirmInput(e.model,t)})),n=0;n<e;n++)this.model.run();return this.engine.endFrame(),t.abrupt("return",this);case 12:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"getOutput",value:(n=l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"compile",value:(e=l(u().mark((function t(){var e,n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initPromise;case 2:return e=Qe({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?Ce.WGSL:Ce.GLSL450:Ce.GLSL100,r=this.compiledBundle.shaders[n],e.defines.filter((function(t){return t.runtime})).forEach((function(t){var e="".concat("__DefineValuePlaceholder__").concat(t.name);r=r.replace(e,"".concat(t.value))})),e.shader=r,e.uniforms.forEach((function(t){var n;t.data||t.storageClass===Ae.StorageBuffer&&(n=1,t.type===Me.FloatArray?n=1:t.type===Me.Vector4FloatArray&&(n=4),t.data=new Float32Array(e.output.length*n).fill(0))})),this.compiledBundle.context=e,t.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=t.sent;case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}()).prototype,"engine",[Gr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ke=s(Jr.prototype,"configService",[$r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cn=Jr))||cn,sn=(ai=(0,y.b2)(),we=(0,y.f3)(b.MaterialComponentManager),ai((le=de=function(){function t(){i(this,t),this.config=void 0,r(this,"material",tn,this),this.entity=void 0,this.component=void 0}return a(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t,e){this.entity=t,this.component=this.material.create(t),this.component.entity=t,this.component.type=e,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),t}(),de.BASIC="basic",tn=s((ie=le).prototype,"material",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=ie))||ce),un=(yt=(0,y.b2)(),K=(0,y.f3)(b.MeshComponentManager),e=(0,y.f3)(b.CullableComponentManager),ct=(0,y.f3)(b.TransformComponentManager),rt=(0,y.f3)(b.Systems),Zr=(0,y.t6)(b.SceneGraphSystem),yt((Gr=ui=function(){function t(){i(this,t),this.attributes={},this.config=void 0,r(this,"mesh",en,this),r(this,"cullable",nn,this),r(this,"transform",rn,this),r(this,"sceneGraphSystem",on,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return a(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.cullable.create(t),this.meshComponent=this.mesh.create(t),this.transformComponent=this.transform.create(t),this.onEntityCreated()}},{key:"setMaterial",value:function(t){return this.meshComponent.material=t,this}},{key:"setGeometry",value:function(t){return this.meshComponent.geometry=t,this}},{key:"setAttributes",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&t[n]!==e.attributes[n]&&(e.onAttributeChanged({name:n,data:t[n]}),e.attributes[n]=t[n])}))}},{key:"setVisible",value:function(t){var e=this;return this.meshComponent.visible=t,this.meshComponent.children.forEach((function(n){n=e.mesh.getComponentByEntity(n),n&&(n.visible=t)})),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(t){return this.sceneGraphSystem.attach(this.entity,t.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(t){var e=t.name;t=t.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(e),t)}},{key:"convertAttributeName2UniformName",value:function(t){return t}}]),t}(),ui.POINT="point",ui.LINE="line",ui.GRID="grid",en=s(($r=Gr).prototype,"mesh",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nn=s($r.prototype,"cullable",[e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rn=s($r.prototype,"transform",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),on=s($r.prototype,"sceneGraphSystem",[rt,Zr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jr=$r))||Jr),cn=n(81550),ln=n.n(cn),hn=function(){function t(e,n){i(this,t),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,o=n.offset,a=n.stride,s=n.normalized,u=n.size;n=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:o||0,stride:a||0,normalized:s||!1,divisor:n||0},u&&(this.attribute.size=u)}return a(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),fn=(L(ai={},Y.POINTS,"points"),L(ai,Y.LINES,"lines"),L(ai,Y.LINE_LOOP,"line loop"),L(ai,Y.LINE_STRIP,"line strip"),L(ai,Y.TRIANGLES,"triangles"),L(ai,Y.TRIANGLE_FAN,"triangle fan"),L(ai,Y.TRIANGLE_STRIP,"triangle strip"),ai),dn=(L(de={},Y.STATIC_DRAW,"static"),L(de,Y.DYNAMIC_DRAW,"dynamic"),L(de,Y.STREAM_DRAW,"stream"),de),pn=(L(le={},Y.BYTE,"int8"),L(le,Y.UNSIGNED_INT,"int16"),L(le,Y.INT,"int32"),L(le,Y.UNSIGNED_BYTE,"uint8"),L(le,Y.UNSIGNED_SHORT,"uint16"),L(le,Y.UNSIGNED_INT,"uint32"),L(le,Y.FLOAT,"float"),le),gn=(L(we={},Y.ALPHA,"alpha"),L(we,Y.LUMINANCE,"luminance"),L(we,Y.LUMINANCE_ALPHA,"luminance alpha"),L(we,Y.RGB,"rgb"),L(we,Y.RGBA,"rgba"),L(we,Y.RGBA4,"rgba4"),L(we,Y.RGB5_A1,"rgb5 a1"),L(we,Y.RGB565,"rgb565"),L(we,Y.DEPTH_COMPONENT,"depth"),L(we,Y.DEPTH_STENCIL,"depth stencil"),we),mn=(L(ie={},Y.DONT_CARE,"dont care"),L(ie,Y.NICEST,"nice"),L(ie,Y.FASTEST,"fast"),ie),vn=(L(ce={},Y.NEAREST,"nearest"),L(ce,Y.LINEAR,"linear"),L(ce,Y.LINEAR_MIPMAP_LINEAR,"mipmap"),L(ce,Y.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),L(ce,Y.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),L(ce,Y.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),ce),yn=(L(yt={},Y.REPEAT,"repeat"),L(yt,Y.CLAMP_TO_EDGE,"clamp"),L(yt,Y.MIRRORED_REPEAT,"mirror"),yt),bn=(L(ui={},Y.NONE,"none"),L(ui,Y.BROWSER_DEFAULT_WEBGL,"browser"),ui),xn=(L(Gr={},Y.NEVER,"never"),L(Gr,Y.ALWAYS,"always"),L(Gr,Y.LESS,"less"),L(Gr,Y.LEQUAL,"lequal"),L(Gr,Y.GREATER,"greater"),L(Gr,Y.GEQUAL,"gequal"),L(Gr,Y.EQUAL,"equal"),L(Gr,Y.NOTEQUAL,"notequal"),Gr),_n=(L(K={},Y.FUNC_ADD,"add"),L(K,Y.MIN_EXT,"min"),L(K,Y.MAX_EXT,"max"),L(K,Y.FUNC_SUBTRACT,"subtract"),L(K,Y.FUNC_REVERSE_SUBTRACT,"reverse subtract"),K),wn=(L(e={},Y.ZERO,"zero"),L(e,Y.ONE,"one"),L(e,Y.SRC_COLOR,"src color"),L(e,Y.ONE_MINUS_SRC_COLOR,"one minus src color"),L(e,Y.SRC_ALPHA,"src alpha"),L(e,Y.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),L(e,Y.DST_COLOR,"dst color"),L(e,Y.ONE_MINUS_DST_COLOR,"one minus dst color"),L(e,Y.DST_ALPHA,"dst alpha"),L(e,Y.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),L(e,Y.CONSTANT_COLOR,"constant color"),L(e,Y.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),L(e,Y.CONSTANT_ALPHA,"constant alpha"),L(e,Y.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),L(e,Y.SRC_ALPHA_SATURATE,"src alpha saturate"),e),Sn=(L(ct={},Y.NEVER,"never"),L(ct,Y.ALWAYS,"always"),L(ct,Y.LESS,"less"),L(ct,Y.LEQUAL,"lequal"),L(ct,Y.GREATER,"greater"),L(ct,Y.GEQUAL,"gequal"),L(ct,Y.EQUAL,"equal"),L(ct,Y.NOTEQUAL,"notequal"),ct),En=(L(rt={},Y.ZERO,"zero"),L(rt,Y.KEEP,"keep"),L(rt,Y.REPLACE,"replace"),L(rt,Y.INVERT,"invert"),L(rt,Y.INCR,"increment"),L(rt,Y.DECR,"decrement"),L(rt,Y.INCR_WRAP,"increment wrap"),L(rt,Y.DECR_WRAP,"decrement wrap"),rt),Mn=(L(Zr={},Y.FRONT,"front"),L(Zr,Y.BACK,"back"),Zr),An=function(){function t(e,n){i(this,t),this.buffer=void 0;var r=n.data,o=n.usage;n=n.type;this.buffer=e.buffer({data:r,usage:dn[o||Y.STATIC_DRAW],type:pn[n||Y.UNSIGNED_BYTE]})}return a(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var e=t.data;t=t.offset;this.buffer.subdata(e,t)}}]),t}();function Cn(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Tn=9007199254740991,kn={};kn["[object Float32Array]"]=kn["[object Float64Array]"]=kn["[object Int8Array]"]=kn["[object Int16Array]"]=kn["[object Int32Array]"]=kn["[object Uint8Array]"]=kn["[object Uint8ClampedArray]"]=kn["[object Uint16Array]"]=kn["[object Uint32Array]"]=!0,kn["[object Arguments]"]=kn["[object Array]"]=kn["[object ArrayBuffer]"]=kn["[object Boolean]"]=kn["[object DataView]"]=kn["[object Date]"]=kn["[object Error]"]=kn["[object Function]"]=kn["[object Map]"]=kn["[object Number]"]=kn["[object Object]"]=kn["[object RegExp]"]=kn["[object Set]"]=kn["[object String]"]=kn["[object WeakMap]"]=!1;var On=Object.prototype.toString,Pn=function(t){return!!(e=t)&&"object"===S(e)&&"number"==typeof(e=t.length)&&-1<e&&e%1==0&&e<=Tn&&!!kn[On.call(t)];var e};function In(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function Nn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?In(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Dn=0,Ln=function(){function t(e,n){var r=this,o=(i(this,t),this.reGl=e,this.context=n,this.entity=h++,this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0,{});this.context.uniforms.forEach((function(t){var e,n=t.name,i=t.type,a=t.data,s=t.isReferer,u=t.storageClass;if(u===Ae.StorageBuffer)s?(r.textureCache[n]={data:void 0},o["".concat(n,"Size")]=function(){return a.compiledBundle.context.output.textureSize}):(r.textureCache[n]=r.calcDataTexture(n,i,a),e=(s=r.textureCache[n]).textureWidth,s=s.isOutput,o["".concat(n,"Size")]=[e,e],s&&(r.outputTextureName=n,r.context.needPingpong)&&(r.outputTextureName="".concat(n,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(n,i,a))),o[n]=function(){return r.textureCache[n].texture};else if(u===Ae.Uniform){if(a&&(Array.isArray(a)||Pn(a))&&16<a.length)throw new Error("invalid data type ".concat(i));o[n]=function(){return t.data}}})),e=this.getOuputDataTexture(),n=e.textureWidth,e=e.texelCount,o.u_OutputTextureSize=[n,n],o.u_OutputTexelCount=e,this.context.output.textureSize=[n,n],e={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:o,vert:"attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",primitive:"triangle strip",count:4};this.computeCommand=this.reGl(e)}var e;return a(t,[{key:"run",value:function(){var t=this;1<this.context.maxIteration&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use((function(){t.computeCommand()}))}},{key:"readData",value:(e=l(u().mark((function t(){var e,n,r,i,o,a,s=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.reGl({framebuffer:this.texFBO})((function(){e=s.reGl.read()})),!e){t.next=6;break}if(i=this.getOuputDataTexture(),n=i.originalDataLength,r=i.elementsPerTexel,i=i.typedArrayConstructor,i=void 0===i?Float32Array:i,o=[],4!==r)for(a=0;a<e.length;a+=4)1===r?o.push(e[a]):2===r?o.push(e[a],e[a+1]):o.push(e[a],e[a+1],e[a+2]);else o=e;return t.abrupt("return",new i(o.slice(0,n)));case 6:return t.abrupt("return",new Float32Array);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"confirmInput",value:function(t,e){t=this.entity===t.entity?(this.dynamicPingpong=!0,this):t,this.textureCache[e].id=t.getOuputDataTexture().id,this.textureCache[e].texture=t.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,e){var n=this.context.uniforms.find((function(e){return e.name===t}));n&&(e=(n=this.calcDataTexture(t,n.type,e)).texture,n=n.data,this.textureCache[t].data=n,this.textureCache[t].texture=e)}},{key:"destroy",value:function(){}},{key:"swap",value:function(){this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong&&(t=this.context.output.name,this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture);var t=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=t}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var e=t.data,n=t.textureWidth;return Nn(Nn({},t),{},{id:Dn++,texture:this.reGl.texture({width:n,height:n,data:e,type:"float"})})}},{key:"calcDataTexture",value:function(t,e,n){for(var r=1,i=(e===Me.Vector4FloatArray&&(r=4),[]),o=0;o<n.length;o+=r)1===r?i.push(n[o],0,0,0):2===r?i.push(n[o],n[o+1],0,0):3===r?i.push(n[o],n[o+1],n[o+2],0):4===r&&i.push(n[o],n[o+1],n[o+2],n[o+3]);e=n.length;var a=Math.ceil(e/r),s=Math.ceil(Math.sqrt(a)),u=s*s;a<u&&i.push.apply(i,Cn(new Array(4*(u-a)).fill(0))),u=this.reGl.texture({width:s,height:s,data:i,type:"float"});return{id:Dn++,data:i,originalDataLength:e,typedArrayConstructor:Pn(n)?n.constructor:void 0,textureWidth:s,texture:u,texelCount:a,elementsPerTexel:r,isOutput:t===this.context.output.name}}}]),t}(),Rn=function(){function t(e,n){i(this,t),this.elements=void 0;var r=n.data,o=n.usage,a=n.type;n=n.count;this.elements=e.elements({data:r,usage:dn[o||Y.STATIC_DRAW],type:pn[a||Y.UNSIGNED_BYTE],count:n})}return a(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){t=t.data,this.elements.subdata(t)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),Bn=function(){function t(e,n){i(this,t),this.framebuffer=void 0;var r=n.width,o=n.height,a=n.color,s=n.colors;n.depth,n.stencil,n={width:r,height:o};Array.isArray(s)&&(n.colors=s.map((function(t){return t.get()}))),a&&"boolean"!=typeof a&&(n.color=a.get()),this.framebuffer=e.framebuffer(n)}return a(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width;t=t.height;this.framebuffer.resize(e,t)}}]),t}();function jn(t){var e=S(t);return null!=t&&("object"===e||"function"===e)}function Fn(t){var e={};return Object.keys(t).forEach((function(n){!function t(e,n,r,i){null===n||"number"==typeof n||"boolean"==typeof n||Array.isArray(n)&&"number"==typeof n[0]||Pn(n)||""===n||void 0!==n.resize?r["".concat(i&&i+".").concat(e)]=n:(jn(n)&&Object.keys(n).forEach((function(o){t(o,n[o],r,"".concat(i&&i+".").concat(e))})),Array.isArray(n)&&n.forEach((function(n,o){Object.keys(n).forEach((function(a){t(a,n[a],r,"".concat(i&&i+".").concat(e,"[").concat(o,"]"))}))})))}(n,t[n],e,"")})),e}function zn(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function Un(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zn(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Gn,Vn=function(){function t(e,n){i(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var r=n.vs,o=n.fs,a=n.defines,s=n.attributes,u=n.uniforms,c=n.primitive,l=n.count,h=n.elements,f=n.depth,d=n.blend,p=n.stencil,g=n.cull,m=n.instances,v=n.scissor,y=(n=n.viewport,{}),b=(u&&(this.uniforms=Fn(u),Object.keys(u).forEach((function(t){y[t]=e.prop(t)}))),{});Object.keys(s).forEach((function(t){b[t]=s[t].get()})),u=a&&this.generateDefines(a)||"",a={attributes:b,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(u,"\n").concat(o),uniforms:y,vert:"\n".concat(u,"\n").concat(r),primitive:fn[void 0===c?Y.TRIANGLES:c]};m&&(a.instances=m),l&&(a.count=l),h&&(a.elements=h.get()),v&&(a.scissor=v),n&&(a.viewport=n),this.initDepthDrawParams({depth:f},a),this.initBlendDrawParams({blend:d},a),this.initStencilDrawParams({stencil:p},a),this.initCullDrawParams({cull:g},a),this.drawCommand=e(a)}return a(t,[{key:"addUniforms",value:function(t){this.uniforms=Un(Un({},this.uniforms),Fn(t))}},{key:"draw",value:function(t){var e=Un(Un({},this.uniforms),Fn(t.uniforms||{})),n={};Object.keys(e).forEach((function(t){var r=S(e[t]);"boolean"===r||"number"===r||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?n[t]=e[t]:"string"!==r&&(n[t]=e[t].get())})),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){t=t.depth,t&&(e.depth={enable:void 0===t.enable||!!t.enable,mask:void 0===t.mask||!!t.mask,func:xn[t.func||Y.LESS],range:t.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n,r,i;t=t.blend;t&&(n=t.enable,r=t.func,i=t.equation,t=t.color,e.blend={enable:!!n,func:{srcRGB:wn[r&&r.srcRGB||Y.SRC_ALPHA],srcAlpha:wn[r&&r.srcAlpha||Y.SRC_ALPHA],dstRGB:wn[r&&r.dstRGB||Y.ONE_MINUS_SRC_ALPHA],dstAlpha:wn[r&&r.dstAlpha||Y.ONE_MINUS_SRC_ALPHA]},equation:{rgb:_n[i&&i.rgb||Y.FUNC_ADD],alpha:_n[i&&i.alpha||Y.FUNC_ADD]},color:void 0===t?[0,0,0,0]:t})}},{key:"initStencilDrawParams",value:function(t,e){var n,r,i,o;t=t.stencil;t&&(n=t.enable,r=t.mask,i=void 0===(i=t.func)?{cmp:Y.ALWAYS,ref:0,mask:-1}:i,o=void 0===(o=t.opFront)?{fail:Y.KEEP,zfail:Y.KEEP,zpass:Y.KEEP}:o,t=void 0===(t=t.opBack)?{fail:Y.KEEP,zfail:Y.KEEP,zpass:Y.KEEP}:t,e.stencil={enable:!!n,mask:void 0===r?-1:r,func:Un(Un({},i),{},{cmp:Sn[i.cmp]}),opFront:{fail:En[o.fail],zfail:En[o.zfail],zpass:En[o.zpass]},opBack:{fail:En[t.fail],zfail:En[t.zfail],zpass:En[t.zpass]}})}},{key:"initCullDrawParams",value:function(t,e){var n;t=t.cull;t&&(n=t.enable,t=void 0===(t=t.face)?Y.BACK:t,e.cull={enable:!!n,face:Mn[t]})}},{key:"generateDefines",value:function(t){return Object.keys(t).map((function(e){return"#define ".concat(e," ").concat(Number(t[e]))})).join("\n")}}]),t}(),Wn=function(){function t(e,n){i(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,o=n.type,a=(o=void 0===o?Y.UNSIGNED_BYTE:o,n.width),s=n.height,u=n.flipY,c=(u=void 0!==u&&u,n.format),l=(c=void 0===c?Y.RGBA:c,n.mipmap),h=(l=void 0!==l&&l,n.wrapS),f=(h=void 0===h?Y.CLAMP_TO_EDGE:h,n.wrapT),d=(f=void 0===f?Y.CLAMP_TO_EDGE:f,n.aniso),p=(d=void 0===d?0:d,n.alignment),g=(p=void 0===p?1:p,n.premultiplyAlpha),m=(g=void 0!==g&&g,n.mag),v=(m=void 0===m?Y.NEAREST:m,n.min);v=void 0===v?Y.NEAREST:v,n=n.colorSpace,n=void 0===n?Y.BROWSER_DEFAULT_WEBGL:n,a={width:this.width=a,height:this.height=s,type:pn[o],format:gn[c],wrapS:yn[h],wrapT:yn[f],mag:vn[m],min:vn[v],alignment:p,flipY:u,colorSpace:bn[n],premultiplyAlpha:g,aniso:d};r&&(a.data=r),"number"==typeof l?a.mipmap=mn[l]:"boolean"==typeof l&&(a.mipmap=l),this.texture=e.texture(a)}return a(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width;t=t.height;this.texture.resize(e,t),this.width=e,this.height=t}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),Hn=(0,y.b2)()($r=function(){function t(){var e=this;i(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=l(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.uniforms)return t.next=3,Promise.all(Object.keys(n.uniforms).map(function(){var t=l(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.uniforms[e]&&void 0!==n.uniforms[e].load)return t.next=3,n.uniforms[e].load();t.next=5;break;case 3:r=t.sent,n.uniforms[e]=r;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));t.next=3;break;case 3:return t.abrupt("return",new Vn(e.gl,n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new hn(e.gl,t)},this.createBuffer=function(t){return new An(e.gl,t)},this.createElements=function(t){return new Rn(e.gl,t)},this.createTexture2D=function(t){return new Wn(e.gl,t)},this.createFramebuffer=function(t){return new Bn(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=l(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Ln(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,r=t.depth,i=t.stencil;t=t.framebuffer,t=void 0===t?null:t,n={color:n,depth:r,stencil:i};n.framebuffer=null===t?t:t.get(),e.gl.clear(n)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(Y.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(Y.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,r=t.y,i=t.width;t=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,r,i,t),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer;t={x:t.x,y:t.y,width:t.width,height:t.height};return n&&(t.framebuffer=n.get()),e.gl.read(t)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}var e;return a(t,[{key:"init",value:(e=l(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.inited)return t.abrupt("return");t.next=2;break;case 2:return this.$canvas=e.canvas,t.next=5,new Promise((function(t,n){ln()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,r){!e&&r||n(e),t(r)}})}));case 5:this.gl=t.sent,this.inited=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}())||$r;function Yn(t,e,n,r){var i,o;"undefined"!=typeof window&&(i=document.getElementsByTagName("head")[0],(o=document.createElement("script")).setAttribute("type","text/javascript"),o.setAttribute("src",t),r&&(o.id=r),o.onload=function(){e&&e()},o.onerror=function(e){n&&n("Unable to load script '".concat(t,"'"),e)},i.appendChild(o))}function qn(){return(qn=l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Gn)return t.abrupt("return",Gn);t.next=2;break;case 2:t.next=4;var e="https://preview.babylonjs.com/glslang/glslang.js";return new Promise((function(t,n){Yn(e,(function(){t()}),(function(t,e){n(e)}))}));case 4:return Gn=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),t.abrupt("return",Gn);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Xn=function(){function t(e,n){i(this,t),this.engine=e,this.options=n,this.attribute=void 0,this.buffer=void 0;e=n.buffer;var r=n.offset,o=n.stride,a=n.normalized,s=n.size,u=n.divisor,c=n.arrayStride,l=n.attributes;n=n.stepMode;this.buffer=e,this.attribute={buffer:e.get(),offset:r||0,stride:o||0,normalized:a||!1,divisor:u||0,arrayStride:c||0,attributes:l,stepMode:n||"vertex"},s&&(this.attribute.size=s)}return a(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Kn=function(){function t(e,n){i(this,t),this.engine=e,this.options=n,this.buffer=void 0;e=n.data;var r=n.usage;n.type,this.buffer=this.createBuffer(e instanceof Array?new Float32Array(e):e,r||Ge.FB.Vertex|Ge.FB.CopyDst)}return a(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data;t=t.offset;this.setSubData(this.buffer,t,e instanceof Array?new Float32Array(e):e)}},{key:"createBuffer",value:function(t,e){var n=t.byteLength%4;n={size:t.byteLength+n,usage:e},e=this.engine.device.createBuffer(n);return this.setSubData(e,0,t),e}},{key:"setSubData",value:function(t,e,n){(Te?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(t,e,n)}}]),t}(),Zn=function(){function t(e,n){i(this,t),this.engine=e,this.context=n,this.entity=h++,this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var e,n,r;return a(t,[{key:"init",value:(r=l(u().mark((function t(){var e,n,r,i,o,a,s=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:e=t.sent,e=e.computeStage,n=this.context.uniforms.filter((function(t){return t.storageClass===Ae.StorageBuffer})),r=this.context.uniforms.filter((function(t){return t.storageClass===Ae.Uniform})),i=r.length?1:0,this.bindGroupEntries=[],i&&(o=0,a=[],r.forEach((function(t){if("number"==typeof t.data)s.uniformGPUBufferLayout.push({name:t.name,offset:o}),o+=4,a.push(t.data);else{var e=(null==(e=t.data)?void 0:e.length)||1,n=(3===e&&(e=4,t.data.push(0)),o/4%4);if(0<n){var r=4-n;if(1<e&&e<=r)2===e&&(3==r&&(o+=4,a.push(0)),a.push.apply(a,Cn(t.data)),s.uniformGPUBufferLayout.push({name:t.name,offset:o}));else{for(var i=0;i<r;i++)o+=4,a.push(0);a.push.apply(a,Cn(t.data)),s.uniformGPUBufferLayout.push({name:t.name,offset:o})}}o+=4*e}})),this.uniformBuffer=new Kn(this.engine,{data:a instanceof Array?new Float32Array(a):a,usage:Ge.FB.Uniform|Ge.FB.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),n.forEach((function(t){var e;null===t.data||t.type!==Me.Vector4FloatArray&&t.type!==Me.FloatArray||(t.name===s.context.output.name?(e=new Kn(s.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:Ge.FB.Storage|Ge.FB.CopyDst|Ge.FB.CopySrc}),s.outputBuffer=e,s.context.output={name:t.name,length:isFinite(Number(t.data))?1:t.data.length,typedArrayConstructor:Float32Array,gpuBuffer:e.get()}):t.isReferer?t.data.model&&t.data.model.outputBuffer&&(e=t.data.model.outputBuffer):e=new Kn(s.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:Ge.FB.Storage|Ge.FB.CopyDst|Ge.FB.CopySrc}),s.vertexBuffers[t.name]=e,s.bindGroupEntries.push({binding:i,resource:{name:t.name,refer:e?void 0:t.data,buffer:e?e.get():void 0}}),i++)})),this.computePipeline=this.engine.device.createComputePipeline({computeStage:e}),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"destroy",value:function(){var t=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach((function(e){return t.vertexBuffers[e].destroy()}))}},{key:"readData",value:(n=l(u().mark((function t(){var e,n,r,i,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=this.context.output)&&(o=i.length,e=i.typedArrayConstructor,i=i.gpuBuffer))return o*=e.BYTES_PER_ELEMENT,n=this.engine.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(r=this.engine.device.createCommandEncoder()).copyBufferToBuffer(i,0,n,0,o),(Te?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([r.finish()]),t.next=12,n.mapAsync(Ge.gc.Read);t.next=16;break;case 12:return i=n.getMappedRange(),o=new e(i.slice(0)),n.unmap(),t.abrupt("return",o);case 16:return t.abrupt("return",new Float32Array);case 17:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"run",value:function(){var t;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(t=this.engine.currentComputePass).dispatch.apply(t,Cn(this.context.dispatch)))}},{key:"updateBuffer",value:function(t,e){t=this.vertexBuffers[t],t&&t.subData({data:e,offset:2<arguments.length&&void 0!==arguments[2]?arguments[2]:0})}},{key:"updateUniform",value:function(t,e){var n=this.uniformGPUBufferLayout.find((function(e){return e.name===t}));n&&this.uniformBuffer.subData({data:Number.isFinite(e)?new Float32Array([e]):new Float32Array(e),offset:n.offset})}},{key:"confirmInput",value:function(t,e){e=this.vertexBuffers[e];var n,r=t.outputBuffer;e&&r&&e!==r&&(n=this.engine.device.createCommandEncoder(),t=(t=t.context.output).length*t.typedArrayConstructor.BYTES_PER_ELEMENT,n.copyBufferToBuffer(r.get(),0,e.get(),0,t),(Te?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([n.finish()]))}},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"compileComputePipelineStageDescriptor",value:(e=l(u().mark((function t(e){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,this.engine.options.useWGSL){t.next=6;break}return t.next=5,this.compileShaderToSpirV(e,"compute","#version 450\n");case 5:n=t.sent;case 6:return t.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:Te}),entryPoint:"main"}});case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),$n=function(){function t(e,n){i(this,t),this.engine=e,this.options=n,this.indexCount=void 0,this.buffer=void 0;var r=n.data;n.usage,n.type,n=n.count;this.indexCount=n||0,this.buffer=new Kn(e,{data:r instanceof Array?new Uint16Array(r):r,usage:Ge.FB.Index|Ge.FB.CopyDst})}return a(t,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Jn=function(){function t(e,n){i(this,t),this.engine=e,this.options=n,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0,n.width,n.height;e=n.color;var r=(n.colors,n.depth);n.stencil,e&&(this.colorTexture=e),r&&(this.depthTexture=r)}return a(t,[{key:"get",value:function(){var t;return{color:null==(t=this.colorTexture)?void 0:t.get(),depth:null==(t=this.depthTexture)?void 0:t.get()}}},{key:"destroy",value:function(){var t;null!=(t=this.colorTexture)&&t.destroy(),null!=(t=this.depthTexture)&&t.destroy()}},{key:"resize",value:function(t){var e,n=t.width;t=t.height;n===this.width&&t===this.height||(null!=(e=this.colorTexture)&&e.resize({width:n,height:t}),null!=(e=this.depthTexture)&&e.resize({width:n,height:t})),this.width=n,this.height=t}}]),t}(),Qn=(L(Jr={},Y.POINTS,Ge.YV.PointList),L(Jr,Y.LINES,Ge.YV.LineList),L(Jr,Y.LINE_LOOP,Ge.YV.LineList),L(Jr,Y.LINE_STRIP,Ge.YV.LineStrip),L(Jr,Y.TRIANGLES,Ge.YV.TriangleList),L(Jr,Y.TRIANGLE_FAN,Ge.YV.TriangleList),L(Jr,Y.TRIANGLE_STRIP,Ge.YV.TriangleStrip),Jr),tr=(L(cn={},Y.NEVER,Ge.wb.Never),L(cn,Y.ALWAYS,Ge.wb.Always),L(cn,Y.LESS,Ge.wb.Less),L(cn,Y.LEQUAL,Ge.wb.LessEqual),L(cn,Y.GREATER,Ge.wb.Greater),L(cn,Y.GEQUAL,Ge.wb.GreaterEqual),L(cn,Y.EQUAL,Ge.wb.Equal),L(cn,Y.NOTEQUAL,Ge.wb.NotEqual),cn),er=(L(ai={},Y.FUNC_ADD,Ge.db.Add),L(ai,Y.MIN_EXT,Ge.db.Min),L(ai,Y.MAX_EXT,Ge.db.Max),L(ai,Y.FUNC_SUBTRACT,Ge.db.Subtract),L(ai,Y.FUNC_REVERSE_SUBTRACT,Ge.db.ReverseSubtract),ai),nr=(L(de={},Y.ZERO,Ge.zi.Zero),L(de,Y.ONE,Ge.zi.One),L(de,Y.SRC_COLOR,Ge.zi.SrcColor),L(de,Y.ONE_MINUS_SRC_COLOR,Ge.zi.OneMinusSrcColor),L(de,Y.SRC_ALPHA,Ge.zi.SrcAlpha),L(de,Y.ONE_MINUS_SRC_ALPHA,Ge.zi.OneMinusSrcAlpha),L(de,Y.DST_COLOR,Ge.zi.DstColor),L(de,Y.ONE_MINUS_DST_COLOR,Ge.zi.OneMinusDstColor),L(de,Y.DST_ALPHA,Ge.zi.DstAlpha),L(de,Y.ONE_MINUS_DST_ALPHA,Ge.zi.OneMinusDstAlpha),L(de,Y.CONSTANT_COLOR,Ge.zi.BlendColor),L(de,Y.ONE_MINUS_CONSTANT_COLOR,Ge.zi.OneMinusBlendColor),L(de,Y.SRC_ALPHA_SATURATE,Ge.zi.SrcAlphaSaturated),de),rr=(L(le={},Y.ALPHA,"r8unorm"),L(le,Y.RGBA,"rgba8unorm"),L(le,Y.DEPTH_COMPONENT,"depth32float"),L(le,Y.DEPTH_STENCIL,"depth24plus-stencil8"),le),ir=(L(we={},Y.NEAREST,"nearest"),L(we,Y.LINEAR,"linear"),we),or=(L(ie={},Y.REPEAT,"repeat"),L(ie,Y.CLAMP_TO_EDGE,"clamp-to-edge"),L(ie,Y.MIRRORED_REPEAT,"mirror-repeat"),ie);function ar(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function sr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ar(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ur=function(){function t(e,n){i(this,t),this.engine=e,this.options=n,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var e,n;return a(t,[{key:"init",value:(n=l(u().mark((function t(){var e,n,r,i,o,a,s,c,l,h,f,d,p=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=this.options,h=l.vs,f=l.fs,e=l.attributes,n=l.uniforms,r=l.primitive,l.count,i=l.elements,o=l.depth,a=l.blend,s=l.stencil,c=l.cull,l.instances,t.next=3,this.compilePipelineStageDescriptor(h,f,null);case 3:l=t.sent,h=l.vertexStage,f=l.fragmentStage,n&&this.buildUniformBindGroup(n),i&&(this.indexBuffer=i.get(),this.indexCount=i.indexCount),d={vertexBuffers:Object.keys(e).map((function(t,n){var r=e[t],i=r.get(),o=i.arrayStride,a=i.stepMode;i=i.attributes;return p.attributeCache[t]=r,{arrayStride:o,stepMode:a,attributes:i}}))},d={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:Qn[r||Y.TRIANGLES],rasterizationState:sr(sr({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:(g=(g={cull:c}).cull)&&g.enable?g.face?g.face===Y.FRONT?Ge.Wf.Front:Ge.Wf.Back:void 0:Ge.Wf.None}),depthStencilState:(g=void 0,g=(u={depth:o,stencil:s}).depth,u.stencil,u={compare:Ge.wb.Always,depthFailOp:Ge.xS.Keep,failOp:Ge.xS.Keep,passOp:Ge.xS.Keep},{depthWriteEnabled:g&&g.enable,depthCompare:tr[(null==g?void 0:g.func)||Y.ALWAYS],format:Ge.EV.Depth24PlusStencil8,stencilFront:u,stencilBack:u,stencilReadMask:4294967295,stencilWriteMask:4294967295}),colorStates:(g={blend:a},u=this.engine.options.swapChainFormat,g=g.blend,[{format:u,alphaBlend:{srcFactor:nr[g&&g.func&&g.func.srcAlpha||Y.ONE],dstFactor:nr[g&&g.func&&g.func.dstAlpha||Y.ZERO],operation:er[g&&g.equation&&g.equation.alpha||Y.FUNC_ADD]},colorBlend:{srcFactor:nr[g&&g.func&&g.func.srcRGB||Y.ONE],dstFactor:nr[g&&g.func&&g.func.dstRGB||Y.ZERO],operation:er[g&&g.equation&&g.equation.rgb||Y.FUNC_ADD]},writeMask:Ge.Yw.All}]),layout:this.pipelineLayout,vertexStage:h,fragmentStage:f,vertexState:d},this.renderPipeline=this.engine.device.createRenderPipeline(d);case 11:case"end":return t.stop()}var u,g}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"addUniforms",value:function(t){this.uniforms=sr(sr({},this.uniforms),Fn(t))}},{key:"draw",value:function(t){var e=this,n=this.engine.getCurrentRenderPass(),r=sr(sr({},this.uniforms),Fn(t.uniforms||{})),i=[];Object.keys(r).forEach((function(t){var n,o,a=S(r[t]);"boolean"===a||"number"===a||Array.isArray(r[t])||r[t].BYTES_PER_ELEMENT?null!==(a=null==(a=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))?void 0:a.offset)&&e.uniformBuffer.subData({data:r[t],offset:a}):null!==(a=null==(a=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))?void 0:a.offset)&&(n=(o=(o=r[t].get()).color||o).texture,(o=o.sampler)&&(i.push({binding:a,resource:o}),a++),i.push({binding:a,resource:n.createView()}))})),this.uniformBuffer&&(i[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:i}),this.renderPipeline&&n.setPipeline(this.renderPipeline),n.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&n.setIndexBuffer(this.indexBuffer.get(),Ge.iD.Uint32,0),Object.keys(this.attributeCache).forEach((function(t,r){n.setVertexBuffer(0+r,e.attributeCache[t].get().buffer,0)})),this.indexBuffer?n.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):n.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(e=l(u().mark((function t(e,n,r){var i,o,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i="#version 450\n",o=e,a=n,this.engine.options.useWGSL){t.next=10;break}return t.next=6,this.compileShaderToSpirV(e,"vertex",i);case 6:return o=t.sent,t.next=9,this.compileShaderToSpirV(n,"fragment",i);case 9:a=t.sent;case 10:return t.abrupt("return",this.createPipelineStageDescriptor(o,a));case 11:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"createPipelineStageDescriptor",value:function(t,e){return{vertexStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:Te}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:e,isWHLSL:Te}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:Ge.zX.CCW,cullMode:Ge.Wf.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(t){var e=this,n=0,r=function(t){for(var e=0,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0,a=r;o<a.length;o++)e+=a[o].length;for(var s=new t(e),u=0,c=0,l=r;c<l.length;c++){var h=l[c];s.set(h,u),u+=h.length}return s}.apply(void 0,[Float32Array].concat(Cn(Object.keys(t).map((function(r){return t[r]?(e.uniformGPUBufferLayout.push({name:r,offset:n}),n+=4*(t[r].length||1),t[r]):[]}))))),i=[],o=!1;r.length&&(o=!0,i.push({binding:0,visibility:Ge.$X.Fragment|Ge.$X.Vertex,type:Ge.$l.UniformBuffer})),Object.keys(t).filter((function(e){return null===t[e]})).forEach((function(t,n){e.uniformGPUBufferLayout.push({name:t,offset:2*n+(o?1:0)}),i.push({binding:2*n+(o?1:0),visibility:Ge.$X.Fragment,type:Ge.$l.Sampler},{binding:2*n+(o?1:0)+1,visibility:Ge.$X.Fragment,type:Ge.$l.SampledTexture})})),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:i}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),o&&(this.uniformBuffer=new Kn(this.engine,{data:r instanceof Array?new Float32Array(r):r,usage:Ge.FB.Uniform|Ge.FB.CopyDst}))}}]),t}(),cr=function(){function t(e,n){i(this,t),this.engine=e,this.options=n,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return a(t,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(t){var e=t.width;t=t.height;e===this.width&&t===this.height||(this.destroy(),this.createTexture()),this.width=e,this.height=t}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var t=this.options,e=(t.data,t.type),n=(e=(void 0===e&&Y.UNSIGNED_BYTE,t.width),t.height),r=(t.flipY,t.format),i=(r=void 0===r?Y.RGBA:r,t.mipmap,t.wrapS),o=(i=void 0===i?Y.CLAMP_TO_EDGE:i,t.wrapT),a=(o=void 0===o?Y.CLAMP_TO_EDGE:o,t.aniso),s=(a=void 0===a?0:a,t.alignment,t.premultiplyAlpha,t.mag),u=(s=void 0===s?Y.NEAREST:s,t.min),c=(u=void 0===u?Y.NEAREST:u,t.colorSpace);void 0===c&&Y.BROWSER_DEFAULT_WEBGL,c=t.usage;this.width=e,this.height=n,this.texture=this.engine.device.createTexture({size:[e,n,1],mipLevelCount:1,sampleCount:1,dimension:Ge.kd.E2d,format:rr[r],usage:c||Ge.v2.Sampled|Ge.v2.CopyDst}),(!c||c&Ge.v2.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:or[i],addressModeV:or[o],addressModeW:or[i],magFilter:ir[s],minFilter:ir[u],maxAnisotropy:a}))}}]),t}(),lr=(0,y.b2)()(ce=function(){function t(){var e=this;i(this,t),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(t){t.framebuffer;var n=t.color,r=t.depth;t=t.stencil;e.options.supportCompute&&e.startComputePass(),e.currentRenderTarget?(e.currentRenderPass&&e.endRenderTargetRenderPass(),e.startRenderTargetRenderPass(e.currentRenderTarget,n||null,!!r,!!t)):(e.mainColorAttachments[0].loadValue=n||Ge.Ws.Load,e.mainDepthAttachment.depthLoadValue=r||Ge.Ws.Load,e.mainDepthAttachment.stencilLoadValue=t?e.clearStencilValue:Ge.Ws.Load,e.mainRenderPass&&e.endMainRenderPass(),e.startMainRenderPass())},this.createModel=function(){var t=l(u().mark((function t(n){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new ur(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new Xn(e,t)},this.createBuffer=function(t){return new Kn(e,t)},this.createElements=function(t){return new $n(e,t)},this.createTexture2D=function(t){return new cr(e,t)},this.createFramebuffer=function(t){return new Jn(e,t)},this.useFramebuffer=function(t,n){e.currentRenderTarget&&e.unbindFramebuffer(e.currentRenderTarget),e.currentRenderTarget=t,e.currentRenderTargetViewDescriptor={dimension:Ge.p_.E2d,arrayLayerCount:1,aspect:Ge.H7.All},e.currentRenderPass=null,n()},this.createComputeModel=function(){var t=l(u().mark((function t(n){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Zn(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getCanvas=function(){return e.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(t){var n=t.x,r=t.y,i=t.width;t=t.height;e.currentRenderPass?e.transientViewport.x!==1/0?e.getCurrentRenderPass().setViewport(e.transientViewport.x,e.transientViewport.y,e.transientViewport.width,e.transientViewport.height,0,1):n===e.cachedViewport.x&&r===e.cachedViewport.y&&i===e.cachedViewport.width&&t===e.cachedViewport.height||(e.cachedViewport={x:n,y:r,width:i,height:t},e.getCurrentRenderPass().setViewport(n,r,i,t,0,1)):e.transientViewport={x:n,y:r,width:i,height:t}},this.readPixels=function(t){throw new Error("Method not implemented.")}}var e,n;return a(t,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(n=l(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.canvas=e.canvas,this.options=e,this.useWGSL=!!e.useWGSL,this.mainPassSampleCount=e.antialiasing?this.defaultSampleCount:1,t.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"setScissor",value:function(t){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach((function(t){return t.destroy()})),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),Te?this.device.getQueue().submit(this.commandBuffers.filter((function(t){return t}))):this.device.defaultQueue.submit(this.commandBuffers.filter((function(t){return t})))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(e=l(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(){return qn.apply(this,arguments)}();case 2:return this.glslang=t.sent,t.next=5,null==(e=navigator)||null==(e=e.gpu)?void 0:e.requestAdapter();case 5:return this.adapter=t.sent,t.next=8,this.adapter.requestDevice();case 8:this.device=t.sent;case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(Te?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Ge.v2.OutputAttachment|Ge.v2.CopySrc})}},{key:"initMainAttachments",value:function(){this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing?(t={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Ge.kd.E2d,format:Ge.EV.BGRA8Unorm,usage:Ge.v2.OutputAttachment},this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(t),this.mainColorAttachments=[{attachment:Te?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Ge.EG.Store}]):this.mainColorAttachments=[{attachment:Te?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Ge.EG.Store}];var t={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Ge.kd.E2d,format:Te?"depth32float-stencil8":Ge.EV.Depth24PlusStencil8,usage:Ge.v2.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(t),this.mainDepthAttachment={attachment:Te?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Ge.EG.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Ge.EG.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=Te?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=Te?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(t,e,n){var r,i,o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=null==(a=t.get().color)?void 0:a.texture;a&&(r=a.createView(this.currentRenderTargetViewDescriptor)),t=null==(a=t.get().depth)?void 0:a.texture,t&&(i=t.createView()),a=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:r,loadValue:null!==e?e:Ge.Ws.Load,storeOp:Ge.EG.Store}],depthStencilAttachment:t&&i?{attachment:i,depthLoadValue:n?this.clearDepthValue:Ge.Ws.Load,depthStoreOp:Ge.EG.Store,stencilLoadValue:o?this.clearStencilValue:Ge.Ws.Load,stencilStoreOp:Ge.EG.Store}:void 0});this.currentRenderPass=a,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&null!==this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(t){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),t}())||ce;function hr(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}var fr=(0,y.b2)()(yt=function(){w(e,Ue);var t=hr(e);function e(){return i(this,e),t.apply(this,arguments)}return a(e,[{key:"onEntityCreated",value:function(){function t(t,e,n){for(var r,i=0;i<=e;i++)for(r=0;r<=n;r++){var o=j.create(),a=j.create(),l=j.create(),h=j.create();j.lerp(o,s[u[t][0]],s[u[t][1]],i/e),j.lerp(a,s[u[t][0]],s[u[t][2]],r/n),j.sub(l,a,s[u[t][0]]),j.add(h,o,l),a=i/e,o=r/n,f.push(h[0],h[1],h[2]),d.push(c[t][0],c[t][1],c[t][2]),p.push(a,o),a=.875*(a/=3)+4/64,o=.875*(o/=3)+4/64,a+=t%3/3,o+=Math.floor(t/3)/3,m.push(a,o),i<e&&r<n&&(v.push(y+n+1,y+1,y),v.push(y+n+1,y+n+2,y+1)),y++}}var e=this.config,n=e.widthSegments,r=e.heightSegments,i=e.depthSegments,o=(e=e.halfExtents,n=void 0===n?1:n,r=void 0===r?1:r,i=void 0===i?1:i,e=g(void 0===e?j.fromValues(.5,.5,.5):e,3),e[0]),a=e[1],s=(e=e[2],[j.fromValues(-o,-a,e),j.fromValues(o,-a,e),j.fromValues(o,a,e),j.fromValues(-o,a,e),j.fromValues(o,-a,-e),j.fromValues(-o,-a,-e),j.fromValues(-o,a,-e),j.fromValues(o,a,-e)]),u=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],c=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],l=(o=1,a=2,e=3,4),h=5,f=[],d=[],p=[],m=[],v=[],y=0;t(0,n,r),t(o,n,r),t(a,n,i),t(e,n,i),t(l,i,r),t(h,i,r),o=Ee(f),a=this.getComponent();a.indices=Uint32Array.from(v),a.aabb=o,a.vertexCount=y,a.attributes=[{dirty:!0,name:"position",data:Float32Array.from(f),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(d),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(p),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}())||yt;function dr(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}var pr=(0,y.b2)()(ui=function(){w(e,Ue);var t=dr(e);function e(){return i(this,e),t.apply(this,arguments)}return a(e,[{key:"onEntityCreated",value:function(){var t=this.config.geometries,e=(t=void 0===t?[]:t,this.getComponent()),n=(e.aabb=new lt,[]),r=[],i=0;t.forEach((function(t){var o=t.aabb,a=t.indices,s=t.vertexCount;t=t.attributes;e.aabb.add(o),e.vertexCount+=s,a&&r.push.apply(r,Cn(a.map((function(t){return t+i})))),i+=s,t.forEach((function(t,e){n[e]?t.data&&(ke(t.data)?n[e].push(t.data):$e(t.data)?n[e].data=function(t,e){if(!t&&!e)throw new Error("Please specify valid arguments for parameters a and b.");if(!e||0===e.length)return t;if(!t||0===t.length)return e;if(Object.prototype.toString.call(t)!==Object.prototype.toString.call(e))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var n=new t.constructor(t.length+e.length);return n.set(t),n.set(e,t.length),n}(n[e].data,t.data):n[e].data=n[e].data.concat(t.data)):(n[e]=t,n[e].dirty=!0)}))})),e.attributes=n,e.indices=Uint32Array.from(r),e.dirty=!0}}]),e}())||ui;function gr(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}var mr=(0,y.b2)()(Gr=function(){w(e,Ue);var t=gr(e);function e(){return i(this,e),t.apply(this,arguments)}return a(e,[{key:"onEntityCreated",value:function(){for(var t=this.config,e=t.halfExtents,n=void 0===e?[.5,.5]:e,r=(e=t.widthSegments,void 0===e?5:e),i=(e=t.lengthSegments,void 0===e?5:e),o=[],a=[],s=[],u=[],c=0,l=0;l<=r;l++)for(var h=0;h<=i;h++){var f=-n[0]+2*n[0]*l/r,d=-(-n[1]+2*n[1]*h/i),p=l/r,g=h/i;o.push(f,0,d),a.push(0,1,0),s.push(p,g),l<r&&h<i&&(u.push(c+i+1,c+1,c),u.push(c+i+1,c+i+2,c+1)),c++}t=Ee(o),e=this.getComponent(),e.indices=Uint32Array.from(u),e.aabb=t,e.vertexCount=c,e.attributes=[{dirty:!0,name:"position",data:Float32Array.from(o),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(a),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(s),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}())||Gr;function vr(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}var yr,br,xr=(0,y.b2)()(K=function(){w(e,Ue);var t=vr(e);function e(){return i(this,e),t.apply(this,arguments)}return a(e,[{key:"onEntityCreated",value:function(){for(var t=this.config,e=t.radius,n=void 0===e?.5:e,r=(e=t.latitudeBands,void 0===e?16:e),i=(e=t.longitudeBands,void 0===e?16:e),o=[],a=[],s=[],u=[],c=0;c<=r;c++)for(var l=c*Math.PI/r,h=Math.sin(l),f=Math.cos(l),d=0;d<=i;d++){var p=2*d*Math.PI/i-Math.PI/2,g=Math.sin(p),m=(p=Math.cos(p)*h,f),v=(g=g*h,1-d/i),y=1-c/r;o.push(p*n,m*n,g*n),a.push(p,m,g),s.push(v,y)}for(var b=0;b<r;++b)for(var x=0;x<i;++x){var _=b*(i+1)+x,w=_+i+1;u.push(_+1,w,_),u.push(_+1,w+1,w)}t=Ee(o),e=this.getComponent(),e.indices=Uint32Array.from(u),e.aabb=t,e.vertexCount=o.length/3,e.attributes=[{dirty:!0,name:"position",data:Float32Array.from(o),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(a),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(s),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}())||K;function _r(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}e=(0,y.b2)(),ct=(0,y.f3)(b.RenderEngine),rt=(0,y.f3)(b.ShaderModuleService);var wr,Sr,Er,Mr=e((yr=s((Zr=function(){w(e,sn);var t=_r(e);function e(){var n;i(this,e);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return r(n=t.call.apply(t,[this].concat(a)),"engine",yr,(0,E.Z)(n)),r(n,"shaderModuleService",br,(0,E.Z)(n)),n}return a(e,[{key:"onEntityCreated",value:function(){var t=this.getComponent(),e=this.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform Uniforms {\n  vec4 color;\n  mat4 projectionMatrix;\n  mat4 modelViewMatrix;\n} uniforms;\n\nlayout(location = 0) in vec3 position;\n// layout(location = 1) in vec3 barycentric;\n\nlayout(location = 0) out vec4 fragColor;\n// layout(location = 1) out vec3 v_Barycentric;\n\nvoid main() {\n  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);\n  fragColor = uniforms.color;\n  // v_Barycentric = barycentric;\n}":'attribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform vec4 color;\n\nvarying vec4 fragColor;\n\n#pragma include "uv.vert.declaration"\n\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  fragColor = color;\n\n  #pragma include "uv.vert.main"\n}',n=this.engine.supportWebGPU?"// layout(set = 0, binding = 1) uniform WireframeUniforms {\n//   float lineWidth;\n//   vec4 lineColor;\n// } wireframe;\n\nlayout(location = 0) in vec4 fragColor;\n// layout(location = 1) in vec3 v_Barycentric;\n\nlayout(location = 0) out vec4 outColor;\n\n// wireframe\n// float edgeFactor() {\n//   vec3 d = fwidth(v_Barycentric);\n//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);\n//   return min(min(a3.x, a3.y), a3.z);\n// }\n\nvoid main() {\n  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));\n  outColor = fragColor;\n}":'varying vec4 fragColor;\n\n#pragma include "uv.frag.declaration"\n#pragma include "map.frag.declaration"\n\nvoid main() {\n  vec4 diffuseColor = fragColor;\n\n  #pragma include "map.frag.main"\n\n  gl_FragColor = diffuseColor;\n}',r=(e=(this.shaderModuleService.registerModule("material-basic",{vs:e,fs:n}),this.shaderModuleService.getModule("material-basic")),n=e.vs,e.fs);e=e.uniforms;t.vertexShaderGLSL=n,t.fragmentShaderGLSL=r,t.setUniform(e),this.config.map&&(t.setDefines({USE_UV:1,USE_MAP:1}),t.setUniform({map:this.config.map,uvTransform:B.create()}))}}]),e}()).prototype,"engine",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),br=s(Zr.prototype,"shaderModuleService",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$r=Zr))||$r;function Ar(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}Jr=(0,y.b2)(),cn=(0,y.f3)(b.Systems),ai=(0,y.t6)(b.MaterialSystem),de=(0,y.f3)(b.Systems),le=(0,y.t6)(b.GeometrySystem),we=(0,y.f3)(b.ShaderModuleService);var Cr,Tr,kr,Or=Jr((wr=s((ie=function(){w(e,un);var t=Ar(e);function e(){var n;i(this,e);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return r(n=t.call.apply(t,[this].concat(a)),"materialSystem",wr,(0,E.Z)(n)),r(n,"geometrySystem",Sr,(0,E.Z)(n)),r(n,"shaderModuleService",Er,(0,E.Z)(n)),n}return a(e,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=(t=t.data,this.getMeshComponent());n&&n.material&&("gridColor"===e?(n.material.setUniform("u_GridColor",t),n.material.setUniform("u_GridColor2",t)):"gridSize"===e&&(n.material.setUniform("u_GridSize",t),n.material.setUniform("u_GridSize2",t)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:"attribute vec3 a_Position;\n\nvarying vec3 v_Position;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvoid main() {\n  v_Position = a_Position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);\n}",fs:"// generate grid, borrow from clay.gl viewer\n// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl\n#extension GL_OES_standard_derivatives : enable\n\nvarying vec3 v_Position;\n// varying vec3 v_Normal;\n\nuniform float u_GridSize : 5;\nuniform float u_GridSize2 : .5;\nuniform vec4 u_GridColor : [0, 0, 0, 1];\nuniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];\nuniform bool u_GridEnabled : true;\n\n// uniform vec3 u_LightDirection;\n// uniform vec3 u_LightColor;\n// uniform vec3 u_Camera;\n\nvoid main() {\n  // vec3 n = v_Normal;\n  // vec3 l = normalize(u_LightDirection);\n  // float NdotL = clamp(dot(n, l), 0.001, 1.0);\n\n  gl_FragColor = vec4(1.);\n\n  if (u_GridEnabled) {\n    float wx = v_Position.x;\n    float wz = v_Position.z;\n    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;\n    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;\n\n    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;\n    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;\n\n    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);\n    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);\n    // if (v0 > 0.1) {\n        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);\n    // }\n    // else {\n        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);\n    // }\n  }\n\n  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);\n  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;\n\n  // gl_FragColor.rgb *= diffuseColor;\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs;t=t.uniforms,e=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n}),this.setMaterial(e),n=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(n),e.setCull({enable:!1,face:Y.BACK}).setDepth({enable:!0,func:Y.LESS}),e.setUniform(t),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),n.setIndex([0,3,2,2,1,0]),n.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),e}()).prototype,"materialSystem",[cn,ai],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sr=s(ie.prototype,"geometrySystem",[de,le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Er=s(ie.prototype,"shaderModuleService",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=ie))||ce,Pr=n(32644),Ir=n(40582);function Nr(t,e,n,r,i){Dr(e,r,-i),Dr(e,r,i),t.push(n),t.push(n)}function Dr(t,e,n){t.push([[e[0],e[1]],n])}function Lr(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}yt=(0,y.b2)(),ui=(0,y.f3)(b.Systems),Gr=(0,y.t6)(b.MaterialSystem),K=(0,y.f3)(b.Systems),e=(0,y.t6)(b.GeometrySystem),ct=(0,y.f3)(b.ShaderModuleService);var Rr,Br,jr,Fr=yt((Cr=s((rt=function(){w(e,un);var t=Lr(e);function e(){var n;i(this,e);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return r(n=t.call.apply(t,[this].concat(a)),"materialSystem",Cr,(0,E.Z)(n)),r(n,"geometrySystem",Tr,(0,E.Z)(n)),r(n,"shaderModuleService",kr,(0,E.Z)(n)),n.vertexCount=void 0,n}return a(e,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();if(r&&r.material)switch(e){case"dashArray":r.material.setUniform("u_dash_array",n);break;case"dashOffset":r.material.setUniform("u_dash_offset",n);break;case"dashRatio":r.material.setUniform("u_dash_ratio",n);break;case"thickness":r.material.setUniform("u_thickness",n);break;case"color":var i=new Array(this.vertexCount).fill(void 0).map((function(){return n})).reduce((function(t,e){return[].concat(Cn(t),Cn(e))}),[]);r.geometry.setAttribute("a_color",Float32Array.from(i),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var t=this,e=(this.shaderModuleService.registerModule("line",{vs:"attribute vec2 a_pos;\nattribute vec4 a_color;\nattribute float a_line_miter;\nattribute vec2 a_line_normal;\nattribute float a_counters;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform float u_thickness : 0.02;\nuniform vec2 u_viewport;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_counters;\n\nvoid main() {\n  v_color = a_color;\n  v_counters = a_counters;\n\n  vec3 normal = normalize(vec3(a_line_normal, 0.0));\n\n  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);\n\n  v_normal = vec2(normal * sign(a_line_miter));\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;\n}\n",fs:"uniform float u_dash_array : 0.02;\nuniform float u_dash_offset : 0;\nuniform float u_dash_ratio : 0;\nuniform float u_thickness : 0.02;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_counters;\n\nvoid main() {\n    float blur = 1. - smoothstep(0.98, 1., length(v_normal));\n\n    gl_FragColor = v_color;\n    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));\n}"}),this.shaderModuleService.getModule("line")),n=e.vs,r=e.fs,i=(e=e.uniforms,n=this.materialSystem.createShaderMaterial({vertexShader:n,fragmentShader:r}),r=function(t,e,n){for(var r=[0,0],i=[0,0],o=[0,0],a=[0,0],s=-1,u=!1,c=null,l=(0,Pr.create)(),h=n||0,f=[],d=[],p=[],g=[0,0],m=(e&&(t=t.slice()).push(t[0]),t.length),v=1;v<m;v++){var y,b=h,x=t[v-1],_=t[v],w=v<t.length-1?t[v+1]:null;g.push(v/m,v/m),(0,Ir.o7)(r,_,x),c||(0,Ir.mJ)(c=[0,0],r),u||(u=!0,Nr(d,f,x,c,1)),p.push([b+0,b+1,b+2]),w?((0,Ir.o7)(i,w,_),x=(0,Ir.x7)(o,a,r,i,1),w=(0,Pr.dot)(o,c)<0?-1:1,y=3<x,isFinite(x)?y?(x=3,g.push(v/m),Dr(f,c,-w),d.push(_),Dr(f,a,x*w),d.push(_),p.push(s!==-w?[b,b+2,b+3]:[b+2,b+1,b+3]),p.push([b+2,b+3,b+4]),(0,Ir.mJ)(l,i),(0,Pr.copy)(c,l),Dr(f,c,-w),d.push(_),h+=3):(Nr(d,f,_,a,x),p.push(1===s?[b,b+2,b+3]:[b+2,b+1,b+3]),w=-1,(0,Pr.copy)(c,a),h+=2):((0,Ir.mJ)(c,r),Nr(d,f,_,c,1),p.push(1===s?[b,b+2,b+3]:[b+2,b+1,b+3]),h+=2),s=w):((0,Ir.mJ)(c,r),Nr(d,f,_,c,1),p.push(1===s?[b,b+2,b+3]:[b+2,b+1,b+3]),h+=2)}return{normals:f,attrIndex:p,attrPos:d,attrCounters:g}}(this.config.points,!1),r.normals),o=r.attrIndex,a=r.attrPos,s=(r=r.attrCounters,a.length),u=(this.vertexCount=s,this.geometrySystem.createBufferGeometry({vertexCount:s})),c=(this.setMaterial(n),this.setGeometry(u),n.setCull({enable:!1,face:Y.BACK}).setUniform(e),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness}),[]),l=[];i.forEach((function(t){var e=t[0];t=t[1];c.push([e[0],e[1]]),l.push(t)})),u.setIndex(o.reduce((function(t,e){return[].concat(Cn(t),Cn(e))}),[])),u.setAttribute("a_pos",Float32Array.from(a.reduce((function(t,e){return[].concat(Cn(t),Cn(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),n=new Array(s).fill(void 0).map((function(){return Cn(t.config.color)})).reduce((function(t,e){return[].concat(Cn(t),Cn(e))}),[]);u.setAttribute("a_color",Float32Array.from(n),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),u.setAttribute("a_line_miter",Float32Array.from(l),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),u.setAttribute("a_line_normal",Float32Array.from(c.reduce((function(t,e){return[].concat(Cn(t),Cn(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),u.setAttribute("a_counters",Float32Array.from(r),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),e}()).prototype,"materialSystem",[ui,Gr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tr=s(rt.prototype,"geometrySystem",[K,e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kr=s(rt.prototype,"shaderModuleService",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zr=rt))||Zr;function zr(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function Ur(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=(0,C.Z)(t);return M(this,n?(e=(0,C.Z)(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))}}var Gr,Vr,Wr,Hr,Yr=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],qr=($r=(0,y.b2)(),Jr=(0,y.f3)(b.Systems),cn=(0,y.t6)(b.MaterialSystem),ai=(0,y.f3)(b.Systems),de=(0,y.t6)(b.GeometrySystem),le=(0,y.f3)(b.ShaderModuleService),$r((Rr=s((we=function(){w(e,un);var t=Ur(e);function e(){var n;i(this,e);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return r(n=t.call.apply(t,[this].concat(a)),"materialSystem",Rr,(0,E.Z)(n)),r(n,"geometrySystem",Br,(0,E.Z)(n)),r(n,"shaderModuleService",jr,(0,E.Z)(n)),n}return a(e,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=(t=t.data,this.getMeshComponent());n&&n.material&&("strokeWidth"===e?n.material.setUniform("u_stroke_width",t):"strokeColor"===e?n.material.setUniform("u_stroke_color",t):"strokeOpacity"===e?n.material.setUniform("u_stroke_opacity",t):"opacity"===e?n.material.setUniform("u_opacity",t):"blur"===e&&n.material.setUniform("u_blur",t))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:'attribute vec2 position;\nattribute vec4 color;\nattribute float shape;\nattribute vec2 offset;\nattribute float size;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_stroke_width : 0.01;\nuniform float u_device_pixel_ratio;\nuniform vec2 u_viewport;\n\nvarying vec4 v_color;\nvarying vec4 v_data;\nvarying float v_radius;\n\n#pragma include "picking"\n\nvoid main() {\n  v_color = color;\n  v_radius = size;\n\n  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);\n\n  // construct point coords\n  v_data = vec4(position, antialiasblur, shape);\n\n  gl_Position = projectionMatrix * modelViewMatrix\n    * vec4(position * size + offset, 0.0, 1.0);\n\n  setPickingColor(a_PickingColor);\n}',fs:"uniform float u_blur : 0.05;\nuniform float u_opacity : 0.7;\nuniform float u_stroke_width : 0.01;\nuniform vec4 u_stroke_color : [0, 0, 0, 0];\nuniform float u_stroke_opacity : 1;\n\nvarying vec4 v_color;\nvarying vec4 v_data;\nvarying float v_radius;\n\n#pragma include \"sdf2d\"\n#pragma include \"picking\"\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  float antialiasblur = v_data.z;\n  float antialiased_blur = -max(u_blur, antialiasblur);\n  float r = v_radius / (v_radius + u_stroke_width);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  // if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  // } else if (shape == 1) {\n  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  // } else if (shape == 2) {\n  //   outer_df = sdBox(v_data.xy, vec2(1.));\n  //   inner_df = sdBox(v_data.xy, vec2(r));\n  // } else if (shape == 3) {\n  //   outer_df = sdPentagon(v_data.xy, 0.8);\n  //   inner_df = sdPentagon(v_data.xy, r * 0.8);\n  // } else if (shape == 4) {\n  //   outer_df = sdHexagon(v_data.xy, 0.8);\n  //   inner_df = sdHexagon(v_data.xy, r * 0.8);\n  // } else if (shape == 5) {\n  //   outer_df = sdOctogon(v_data.xy, 1.0);\n  //   inner_df = sdOctogon(v_data.xy, r);\n  // } else if (shape == 6) {\n  //   outer_df = sdHexagram(v_data.xy, 0.52);\n  //   inner_df = sdHexagram(v_data.xy, r * 0.52);\n  // } else if (shape == 7) {\n  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));\n  //   inner_df = sdRhombus(v_data.xy, vec2(r));\n  // } else if (shape == 8) {\n  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  // }\n\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\n\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\n    antialiased_blur,\n    0.0,\n    inner_df\n  );\n  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;\n\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\n  gl_FragColor.a = gl_FragColor.a * opacity_t;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs;t=t.uniforms,e=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Y.SRC_ALPHA,dstRGB:Y.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}}),e.setUniform(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zr(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({u_device_pixel_ratio:window.devicePixelRatio},t)),n=this.buildAttributes(),t=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:n.instancedOffsets.length/2,vertexCount:6});t.setIndex([0,2,1,0,3,2]),t.setAttribute("position",Float32Array.from(n.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),t.setAttribute("offset",Float32Array.from(n.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),t.setAttribute("color",Float32Array.from(n.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),t.setAttribute("size",Float32Array.from(n.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),t.setAttribute("shape",Float32Array.from(n.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),t.setAttribute("a_PickingColor",Float32Array.from(n.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(e),this.setGeometry(t)}},{key:"buildAttribute",value:function(t,e,n){var r;(r=e.instancedPickingColors).push.apply(r,Cn([(r=t.id||n)+1&255,r+1>>8&255,r+1>>8>>8&255])),e.instancedShapes.push(Yr.indexOf(t.shape||"circle")),(n=e.instancedColors).push.apply(n,Cn(t.color||[1,0,0,1])),(r=e.instancedOffsets).push.apply(r,Cn(t.position||[0,0])),(n=e.instancedSizes).push.apply(n,Cn(t.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var t=this,e={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach((function(n,r){t.buildAttribute(n,e,r)})):this.buildAttribute(this.config,e,0),e}}]),e}()).prototype,"materialSystem",[Jr,cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Br=s(we.prototype,"geometrySystem",[ai,de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jr=s(we.prototype,"shaderModuleService",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=we))||ie);function Xr(t,e){var n,r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){var n;if(t)return"string"==typeof t?Kr(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kr(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return n&&(t=n),r=0,{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function Kr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}ce=(0,y.b2)(),n=(0,y.f3)(b.RenderEngine),yt=(0,y.f3)(b.ShaderModuleService),ui=(0,y.f3)(b.ConfigService);var Zr,$r,Jr,Qr,ti,ei=ce((Vr=s((Gr=function(){function t(){i(this,t),this.container=void 0,r(this,"engine",Vr,this),r(this,"shaderModule",Wr,this),r(this,"configService",Hr,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}var e,n;return a(t,[{key:"init",value:(n=l(u().mark((function t(){var e,n,r,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:"#ifdef USE_UV\n  attribute vec2 uv;\n\t#ifdef UVS_VERTEX_ONLY\n    vec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif"}),this.shaderModule.registerModule("uv.vert.main",{vs:"#ifdef USE_UV\n  vUv = (uvTransform * vec3(uv, 1)).xy;\n#endif"}),this.shaderModule.registerModule("uv.frag.declaration",{fs:"#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))\n  varying vec2 vUv;\n#endif"}),this.shaderModule.registerModule("map.frag.declaration",{fs:"#ifdef USE_MAP\n  uniform sampler2D map;\n#endif"}),this.shaderModule.registerModule("map.frag.main",{fs:"#ifdef USE_MAP\n  vec4 texelColor = texture2D(map, vUv);\n  // texelColor = mapTexelToLinear(texelColor);\n  diffuseColor *= texelColor;\n#endif"}),e=this.container.getAll(b.Systems),(r=this.configService.get()).canvas)return t.next=11,this.engine.init({canvas:r.canvas,swapChainFormat:Ge.EV.BGRA8Unorm,antialiasing:!1});t.next=30;break;case 11:n=Xr(e),t.prev=12,n.s();case 14:if((r=n.n()).done)t.next=21;else{if((i=r.value).initialize)return t.next=19,i.initialize();t.next=19}break;case 19:t.next=14;break;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(12),n.e(t.t0);case 26:return t.prev=26,n.f(),t.finish(26);case 29:this.inited=!0;case 30:case"end":return t.stop()}}),t,this,[[12,23,26,29]])}))),function(){return n.apply(this,arguments)})},{key:"render",value:(e=l(u().mark((function t(){var e,n,r,i,o,a=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inited||this.rendering)return t.abrupt("return");t.next=2;break;case 2:for(this.pendings.length&&this.pendings.forEach((function(t){t()})),this.rendering=!0,this.engine.beginFrame(),i=this.container.getAll(b.Systems),e=a.length,n=new Array(e),r=0;r<e;r++)n[r]=a[r];i=Xr(i),t.prev=8,i.s();case 10:if((o=i.n()).done)t.next=17;else{if((o=o.value).execute)return t.next=15,o.execute(n);t.next=15}break;case 15:t.next=10;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(8),i.e(t.t0);case 22:return t.prev=22,i.f(),t.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return t.stop()}}),t,this,[[8,19,22,25]])}))),function(){return e.apply(this,arguments)})},{key:"clear",value:function(t){var e=this;return this.inited?this.engine.clear(t):this.pendings.unshift((function(){e.engine.clear(t),e.pendings.shift()})),this}},{key:"setSize",value:function(t){var e=t.width,n=(t=t.height,this.engine.getCanvas());return this.size={width:e,height:t},n.width=e,n.height=t,this}},{key:"getSize",value:function(){return this.size}}]),t}()).prototype,"engine",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wr=s(Gr.prototype,"shaderModule",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hr=s(Gr.prototype,"configService",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=Gr))||K,ni=(0,y.b2)()(e=function(){function t(){i(this,t),this.entities=[]}return a(t,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(t){return this.addEntity(t.getEntity()),this}},{key:"removeRenderable",value:function(t){return this.removeEntity(t.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(t){return-1===this.entities.indexOf(t)&&this.entities.push(t),this}},{key:"removeEntity",value:function(t){return t=this.entities.indexOf(t),this.entities.splice(t,1),this}}]),t}())||e,ri=(0,y.b2)()(ct=function(){function t(){i(this,t),this.cache={}}return a(t,[{key:"get",value:function(t){return this.cache[t]}},{key:"set",value:function(t,e){this.cache[t]=e}}]),t}())||ct;function ii(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function oi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ii(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ii(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}rt=(0,y.b2)(),Zr=(0,y.f3)(ri),$r=(0,y.f3)(b.RenderEngine);var ai,si,ui,ci,li=rt((Qr=s((Jr=function(){function t(){i(this,t),r(this,"textureCache",Qr,this),r(this,"engine",ti,this),this.config=void 0,this.loaded=!1,this.texture=void 0}var e;return a(t,[{key:"setConfig",value:function(t){this.config=t}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:(e=l(u().mark((function t(){var e=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.config.url)return t.abrupt("return",new Promise((function(t,n){var r,i=e.textureCache.get(e.config.url);i?t(i):((r=new Image).crossOrigin="Anonymous",r.src=e.config.url,r.onload=function(){var n=e.engine.createTexture2D(oi(oi({},e.config),{},{data:r,width:r.width,height:r.height,flipY:!0}));e.textureCache.set(e.config.url,n),e.texture=n,e.loaded=!0,t(n)},r.onerror=function(){n()})})));t.next=4;break;case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),t.abrupt("return",this.texture);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}()).prototype,"textureCache",[Zr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ti=s(Jr.prototype,"engine",[$r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cn=Jr))||cn,hi=(ai=(0,y.b2)(),de=(0,y.f3)(b.Systems),le=(0,y.t6)(b.RendererSystem),ai((si=s((we=function(){function t(){i(this,t),r(this,"rendererSystem",si,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return a(t,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(t){return this.camera=t,this}},{key:"setScene",value:function(t){return this.scene=t,this}},{key:"setViewport",value:function(t){return this.viewport=t,this}},{key:"setClearColor",value:function(t){return this.clearColor=t,this}},{key:"pick",value:function(t){return this.rendererSystem.pick(t,this)}}]),t}()).prototype,"rendererSystem",[de,le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=we))||ie);function fi(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}ce=(0,y.b2)(),n=(0,y.f3)(b.ConfigService);var di=ce((ci=s((yt=function(){function t(){i(this,t),r(this,"configService",ci,this),this.container=void 0}var e;return a(t,[{key:"getEngine",value:(e=l(u().mark((function t(){var e,n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.container.get(b.RenderEngine),r=this.configService.get(),n=r.canvas,r=r.engineOptions,t.next=4,e.init(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fi(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({canvas:n||Ve(),swapChainFormat:Ge.EV.BGRA8Unorm,antialiasing:!1},r));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getTransformComponent",value:function(t){return this.container.get(b.TransformComponentManager).getComponentByEntity(t)}},{key:"getMeshComponent",value:function(t){return this.container.get(b.MeshComponentManager).getComponentByEntity(t)}},{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setContainer",value:function(t){this.container=t}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return h++}},{key:"createScene",value:function(){return this.container.get(ni)}},{key:"createCamera",value:function(){return this.container.get(ze)}},{key:"createView",value:function(){return this.container.get(hi)}},{key:"createRenderable",value:function(t,e){t=t?this.container.getNamed(b.Renderable,t):this.container.get(un);var n=h++;return t.setConfig(e||{}),t.setEntity(n),t}},{key:"createGeometry",value:function(t,e){t=this.container.getNamed(b.Geometry,t);var n=h++;return t.setConfig(e||{}),t.setEntity(n),t.getComponent()}},{key:"createMaterial",value:function(t,e){var n=this.container.getNamed(b.Material,t),r=h++;return n.setConfig(e||{}),n.setEntity(r,t),n.getComponent()}},{key:"createTexture2D",value:function(t){var e=this.container.get(li);return e.setConfig(t),e}},{key:"createBufferGeometry",value:function(t){return this.container.getNamed(b.Systems,b.GeometrySystem).createBufferGeometry(t)}},{key:"createInstancedBufferGeometry",value:function(t){return this.container.getNamed(b.Systems,b.GeometrySystem).createInstancedBufferGeometry(t)}},{key:"createShaderMaterial",value:function(t){return this.container.getNamed(b.Systems,b.MaterialSystem).createShaderMaterial(t)}},{key:"createKernel",value:function(t){var e=this.container.get(an);return"string"==typeof t?e.setBundle(JSON.parse(t)):e.setBundle(t),e.init(),e}},{key:"createRenderer",value:function(){var t=this.container.get(ei);return t.container=this.container,t.init(),t}},{key:"destroy",value:function(){this.container.getAll(b.Systems).forEach((function(t){t.tearDown&&t.tearDown()})),this.container.get(b.RenderEngine).destroy(),this.container.get(b.InteractorService).destroy()}}],[{key:"create",value:function(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=((e=new y.W2).parent=Se,e.bind(b.Systems).to(oe).inSingletonScope().whenTargetNamed(b.SceneGraphSystem),e.bind(b.Systems).to(D).inSingletonScope().whenTargetNamed(b.FrameGraphSystem),e.bind(b.Systems).to(It).inSingletonScope().whenTargetNamed(b.MeshSystem),e.bind(b.Systems).to(Z).inSingletonScope().whenTargetNamed(b.GeometrySystem),e.bind(b.Systems).to(st).inSingletonScope().whenTargetNamed(b.MaterialSystem),e.bind(b.Systems).to(Qt).inSingletonScope().whenTargetNamed(b.RendererSystem),e.bind(b.ResourcePool).to(he).inSingletonScope(),e.bind(b.ConfigService).to(pe).inSingletonScope(),e.bind(b.InteractorService).to(ge).inSingletonScope(),e.bind(b.RenderPass).to(zt).inSingletonScope().whenTargetNamed(zt.IDENTIFIER),e.bind(b.RenderPass).to(Jt).inSingletonScope().whenTargetNamed(Jt.IDENTIFIER),e.bind(b.RenderPass).to($t).inSingletonScope().whenTargetNamed($t.IDENTIFIER),e.bind(b.RenderPassFactory).toFactory((function(t){return function(e){return t.container.getNamed(b.RenderPass,e)}})),navigator.gpu?lr:Hn);e.isBound(b.RenderEngine)||e.bind(b.RenderEngine).to(r).inSingletonScope(),e.bind(ei).toSelf(),e.bind(an).toSelf(),e.bind(un).toSelf(),e.bind(hi).toSelf(),e.bind(ze).toSelf(),e.bind(ni).toSelf(),e.bind(t).toSelf(),e.bind(ri).toSelf(),e.bind(li).toSelf(),e.bind(b.Geometry).to(fr).whenTargetNamed(Ue.BOX),e.bind(b.Geometry).to(xr).whenTargetNamed(Ue.SPHERE),e.bind(b.Geometry).to(mr).whenTargetNamed(Ue.PLANE),e.bind(b.Geometry).to(pr).whenTargetNamed(Ue.MERGED),e.bind(b.Material).to(Mr).whenTargetNamed(sn.BASIC),e.bind(b.Renderable).to(qr).whenTargetNamed(un.POINT),e.bind(b.Renderable).to(Fr).whenTargetNamed(un.LINE),e.bind(b.Renderable).to(Or).whenTargetNamed(un.GRID),r=e.get(t);return r.setContainer(e),r.setConfig(n),r}}]),t}()).prototype,"configService",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ui=yt))||ui},58132:function(t,e,n){"use strict";n.d(e,{ZP:function(){return Vv}});e={};var r=(n.r(e),n.d(e,{GADDI:function(){return ce},Stack:function(){return fe},breadthFirstSearch:function(){return X},connectedComponent:function(){return $},cosineSimilarity:function(){return Tt},default:function(){return pe},depthFirstSearch:function(){return rt},detectAllCycles:function(){return at},detectAllDirectedCycle:function(){return ot},detectAllUndirectedCycle:function(){return it},detectCycle:function(){return st},detectDirectedCycle:function(){return de},dijkstra:function(){return ct},findAllPath:function(){return ht},findShortestPath:function(){return lt},floydWarshall:function(){return ft},getAdjMatrix:function(){return B},getDegree:function(){return Q},getInDegree:function(){return tt},getNeighbors:function(){return W},getOutDegree:function(){return et},iLouvain:function(){return Mt},kCore:function(){return At},kMeans:function(){return Ct},labelPropagation:function(){return dt},louvain:function(){return Et},minimumSpanningTree:function(){return Bt},nodesCosineSimilarity:function(){return kt},pageRank:function(){return jt}}),{}),i=(n.r(r),n.d(r,{Line:function(){return je},applyMatrix:function(){return Se},compare:function(){return ye},distance:function(){return Ae},floydWarshall:function(){return Te},fractionToLine:function(){return He},getAdjMatrix:function(){return ke},getBBoxBoundLine:function(){return Ve},getCircleCenterByPoints:function(){return Me},getCircleIntersectByPoint:function(){return _e},getDegree:function(){return De},getEllipseIntersectByPoint:function(){return we},getLineIntersect:function(){return be},getPointsCenter:function(){return Ye},getRectIntersectByPoint:function(){return xe},intersectBBox:function(){return Re},invertMatrix:function(){return Ee},isPointInPolygon:function(){return Le},isPointsOverlap:function(){return Ke},isPolygonsIntersect:function(){return Be},itemIntersectByLine:function(){return We},lerp:function(){return Je},lerpArray:function(){return Qe},move:function(){return Pe},pointLineDistance:function(){return $e},pointLineSquareDist:function(){return Xe},pointRectSquareDist:function(){return Ze},rotate:function(){return Ne},scale:function(){return Ie},scaleMatrix:function(){return Ce},squareDist:function(){return qe},translate:function(){return Oe}}),{}),o=(n.r(i),n.d(i,{cloneBesidesImg:function(){return Tn},getAnimateCfgWithCallback:function(){return kn},getBBox:function(){return mn},getComboBBox:function(){return An},getLabelPosition:function(){return yn},getLetterWidth:function(){return _n},getLoopCfgs:function(){return vn},getTextSize:function(){return wn},plainCombosToTrees:function(){return En},reconstructTree:function(){return Mn},shouldRefreshEdge:function(){return Cn},traverseTree:function(){return bn},traverseTreeUp:function(){return xn},truncateLabelByLength:function(){return Sn}}),{}),a=(n.r(o),n.d(o,{catmullRomToBezier:function(){return Wn},fillPath:function(){return er},fillPathByDiff:function(){return rr},formatPath:function(){return ar},intersection:function(){return Jn},parsePathArray:function(){return Kn},parsePathString:function(){return Vn},pathToAbsolute:function(){return Hn},pathToCurve:function(){return qn},rectPath:function(){return Zn}}),{}),s=(n.r(a),n.d(a,{easeBack:function(){return Do},easeBackIn:function(){return Io},easeBackInOut:function(){return Do},easeBackOut:function(){return No},easeBounce:function(){return Oo},easeBounceIn:function(){return ko},easeBounceInOut:function(){return Po},easeBounceOut:function(){return Oo},easeCircle:function(){return yo},easeCircleIn:function(){return mo},easeCircleInOut:function(){return yo},easeCircleOut:function(){return vo},easeCubic:function(){return no},easeCubicIn:function(){return to},easeCubicInOut:function(){return no},easeCubicOut:function(){return eo},easeElastic:function(){return Bo},easeElasticIn:function(){return Ro},easeElasticInOut:function(){return jo},easeElasticOut:function(){return Bo},easeExp:function(){return go},easeExpIn:function(){return fo},easeExpInOut:function(){return go},easeExpOut:function(){return po},easeLinear:function(){return Zi},easePoly:function(){return oo},easePolyIn:function(){return ro},easePolyInOut:function(){return oo},easePolyOut:function(){return io},easeQuad:function(){return Qi},easeQuadIn:function(){return $i},easeQuadInOut:function(){return Qi},easeQuadOut:function(){return Ji},easeSin:function(){return lo},easeSinIn:function(){return uo},easeSinInOut:function(){return lo},easeSinOut:function(){return co}}),{}),u=(n.r(s),n.d(s,{calculationItemsBBox:function(){return gs},cloneEvent:function(){return fs},formatPadding:function(){return hs},isNaN:function(){return ps},isViewportChanged:function(){return ds},processParallelEdges:function(){return ms},uniqueId:function(){return ls}}),{}),c=(n.r(u),n.d(u,{getClosedSpline:function(){return cu},getControlPoint:function(){return au},getSpline:function(){return ou},paddedHull:function(){return pu},pathToPoints:function(){return uu},pointsToPolygon:function(){return su},roundedHull:function(){return du}}),{}),l=(n.r(c),n.d(c,{defaultSubjectColors:function(){return Ru}}),{}),h=(n.r(l),n.d(l,{Base:function(){return kc},Circle:function(){return Ic},Ellipse:function(){return Rc},Image:function(){return zc},Line:function(){return Wc},Marker:function(){return Yc},Path:function(){return il},Polygon:function(){return ul},Polyline:function(){return hl},Rect:function(){return pl},Text:function(){return vl}}),{}),f=(n.r(h),n.d(h,{Base:function(){return zl},Circle:function(){return Vl},Dom:function(){return Yl},Ellipse:function(){return Kl},Image:function(){return Jl},Line:function(){return eh},Marker:function(){return ah},Path:function(){return ch},Polygon:function(){return fh},Polyline:function(){return gh},Rect:function(){return yh},Text:function(){return Sh}}),{}),d=(n.r(f),n.d(f,{getColorSetsBySubjectColors:function(){return ff},getColorsWithSubjectColor:function(){return hf},mixColor:function(){return lf}}),{}),p=(n.r(d),n.d(d,{arrayToTextureData:function(){return Tf},attributesToTextureData:function(){return Cf},buildTextureData:function(){return Ef},buildTextureDataWithOneEdgeAttr:function(){return Mf},buildTextureDataWithTwoEdgeAttr:function(){return Af},proccessToFunc:function(){return Sf},radialLayout:function(){return kf}}),{}),g=(n.r(p),n.d(p,{gpuDetector:function(){return Of}}),{}),m=(n.r(g),n.d(g,{assign:function(){return sp},default:function(){return Ep},defaultI18n:function(){return dp},format:function(){return wp},parse:function(){return Sp},setGlobalDateI18n:function(){return gp},setGlobalDateMasks:function(){return _p}}),function(t,e){return(m=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)});function v(t,e){function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var y=function(){return(y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function b(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function x(t,e,n,r){return new(n=n||Promise)((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function _(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var u=[a,s];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,(u=i?[2&u[0],i.value]:u)[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3]))o.label=u[1];else if(6===u[0]&&o.label<i[1])o.label=i[1],i=u;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(u)}}u=e.call(t,o)}catch(s){u=[6,s],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}var w=n(14062),S={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(t){return Object.assign(this,t),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(t){var e=this,n=this.events;this.graph=t,"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!0),(0,w.each)(n,(function(e,n){t.on(n,e)})),document.addEventListener("visibilitychange",(function(){e.keydown=!1}))},unbind:function(t){var e=this.events,n=t.get("canvas").get("draggable");"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!1),(0,w.each)(e,(function(e,n){t.off(n,e)})),t.get("canvas").set("draggable",n)},get:function(t){return this[t]},set:function(t,e){return this[t]=e,this}};function E(){}E.registerBehavior=function(t,e){if(!e)throw new Error("please specify handler for this behavior: ".concat(t));function n(t){var e=this,n=(t=(Object.assign(this,this.getDefaultCfg(),t),this.getEvents()),this.events=null,{});t&&((0,w.each)(t,(function(t,r){n[r]=(0,w.wrapBehavior)(e,t)})),this.events=n)}var r=(0,w.clone)(S);Object.assign(r,e),n.prototype=r,E.types[t]=n},E.hasBehavior=function(t){return!!E.types[t]},E.getBehavior=function(t){return E.types[t]},E.types={};var M=E,A=M,C=function(t,e){return(C=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};function T(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}C(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var k=function(){return(k=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function O(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function P(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function I(){this._events={}}Object.create,Object.create,I.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},I.prototype.once=function(t,e){return this.on(t,e,!0)},I.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];function i(r){for(var i,o,a=r.length,s=0;s<a;s++)r[s]&&(o=(i=r[s]).callback,i.once&&(r.splice(s,1),0===r.length&&delete e._events[t],a--,s--),o.apply(e,n))}var o=this._events[t]||[],a=this._events["*"]||[];i(o),i(a)},I.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},I.prototype.getEvents=function(){return this._events};var N=I,D=n(35600);function L(t,e){for(var n,r,i,o,a,s,u,c,l=t?[].concat(t):[1,0,0,0,1,0,0,0,1],h=0,f=e.length;h<f;h++){var d=e[h];switch(d[0]){case"t":s=a=l,u=[d[1],d[2]],c=[0,0,0,0,0,0,0,0,0],D.fromTranslation(c,u),D.multiply(a,c,s);break;case"s":a=u=l,c=[d[1],d[2]],s=[0,0,0,0,0,0,0,0,0],D.fromScaling(s,c),D.multiply(u,s,a);break;case"r":r=n=l,i=d[1],o=[0,0,0,0,0,0,0,0,0],D.fromRotation(o,i),D.multiply(n,o,r);break;case"m":i=d[1],D.multiply(l,i,l)}}return l}function R(t,e){return t===e}var B=function(t,e){var n=t.nodes,r=(t=t.edges,[]),i={};if(n)return n&&n.forEach((function(t,e){i[t.id]=e,r.push([])})),t&&t.forEach((function(t){var n=t.source;t=t.target,n=i[n],t=i[t];!n&&0!==n||!t&&0!==t||(r[n][t]=1,e)||(r[t][n]=1)})),r;throw new Error("invalid nodes data!")},j=(F.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},F);function F(t,e){void 0===e&&(e=null),this.value=t,this.next=e}function z(t){void 0===t&&(t=R),this.head=null,this.tail=null,this.compare=t}z.prototype.prepend=function(t){return t=new j(t,this.head),this.head=t,this.tail||(this.tail=t),this},z.prototype.append=function(t){return t=new j(t),this.head?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),this},z.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},z.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,r=(e=t.callback,void 0===e?void 0:e);if(this.head)for(var i=this.head;i;){if(r&&r(i.value))return i;if(void 0!==n&&this.compare(i.value,n))return i;i=i.next}return null},z.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)this.head=null,this.tail=null;else{for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;this.tail=e}return t},z.prototype.deleteHead=function(){var t;return this.head?(t=this.head,this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t):null},z.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},z.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},z.prototype.reverse=function(){for(var t,e=this.head,n=null;e;)t=e.next,e.next=n,n=e,e=t;this.tail=this.head,this.head=n},z.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()};var U=z;function G(){this.linkedList=new U}G.prototype.isEmpty=function(){return!this.linkedList.head},G.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},G.prototype.enqueue=function(t){this.linkedList.append(t)},G.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},G.prototype.toString=function(t){return this.linkedList.toString(t)};var V=G,W=function(t,e,n){return e=(e=void 0===e?[]:e).filter((function(e){return e.source===t||e.target===t})),"target"===n?e.filter((function(e){return e.source===t})).map((function(t){return t.target})):"source"===n?e.filter((function(e){return e.target===t})).map((function(t){return t.source})):e.map((function(e){return e.source===t?e.target:e.source}))},H=function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))},Y=function(t){void 0===t&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)};function q(t){function e(){}function n(t){return t=t.next,!r[t]&&(r[t]=!0)}var r,i=t=void 0===t?{}:t;return r={},i.allowTraversal=t.allowTraversal||n,i.enter=t.enter||e,i.leave=t.leave||e,i}var X=function(t,e,n,r){void 0===r&&(r=!0);for(var i=q(n),o=new V,a=(n=t.edges,void 0===n?[]:n),s=(o.enqueue(e),"");!o.isEmpty();)!function(){var t=o.dequeue();i.enter({current:t,previous:s}),W(t,a,r?"target":void 0).forEach((function(e){i.allowTraversal({previous:s,current:t,next:e})&&o.enqueue(e)})),i.leave({current:t,previous:s}),s=t}()},K=function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=(e=t.edges,void 0===e?[]:e),i=[],o={},a=[],s=function t(e){a.push(e),o[e.id]=!0;for(var i=W(e.id,r),s=0;s<i.length;++s)!function(e){var r=i[e];o[r]||0<(e=n.filter((function(t){return t.id===r}))).length&&t(e[0])}(s)},u=0;u<n.length;u++){var c=n[u];if(!o[c.id]){s(c);for(var l=[];0<a.length;)l.push(a.pop());i.push(l)}}return i},Z=function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=(e=t.edges,void 0===e?[]:e),i=[],o={},a={},s={},u=[],c=0,l=function t(e){a[e.id]=c,s[e.id]=c,c+=1,i.push(e),o[e.id]=!0;for(var l=W(e.id,r,"target").filter((function(t){return-1<n.map((function(t){return t.id})).indexOf(t)})),h=0;h<l.length;h++)!function(r){var i=l[r];a[i]||0===a[i]?o[i]&&(s[e.id]=Math.min(s[e.id],a[i])):(0<(r=n.filter((function(t){return t.id===i}))).length&&t(r[0]),s[e.id]=Math.min(s[e.id],s[i]))}(h);if(s[e.id]===a[e.id]){for(var f=[];0<i.length;){var d=i.pop();if(o[d.id]=!1,f.push(d),d===e)break}0<f.length&&u.push(f)}},h=0,f=n;h<f.length;h++){var d=f[h];a[d.id]||0===a[d.id]||l(d)}return u};function $(t,e){return(e?Z:K)(t)}function J(t){var e={},n=void 0===(n=t.nodes)?[]:n;t=void 0===(t=t.edges)?[]:t;return n.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),t.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e}var Q=J,tt=function(t,e){return J(t)[e]?J(t)[e].inDegree:0},et=function(t,e){return J(t)[e]?J(t)[e].outDegree:0};function nt(t){function e(){}function n(t){return t=t.next,!r[t]&&(r[t]=!0)}var r,i=t=void 0===t?{}:t;return r={},i.allowTraversal=t.allowTraversal||n,i.enter=t.enter||e,i.leave=t.leave||e,i}function rt(t,e,n){!function t(e,n,r,i){i.enter({current:n,previous:r});var o=e.edges;W(n,void 0===o?[]:o,"target").forEach((function(o){i.allowTraversal({previous:r,current:n,next:o})&&t(e,o,n,i)})),i.leave({current:n,previous:r})}(t,e,"",nt(n))}var it=function(t,e,n){void 0===n&&(n=!0);for(var r,i=[],o=0,a=$(t,!1);o<a.length;o++){var s=a[o];if(s.length){s=s[0];for(var u=s.id,c=[s],l=((r={})[u]=s,r),h=((s={})[u]=new Set,s);0<c.length;)for(var f=c.pop(),d=f.id,p=W(d,t.edges),g=0;g<p.length;g+=1)!function(r){var o=p[r];r=t.nodes.find((function(t){return t.id===o}));if(o===d)i.push(((a={})[o]=f,a));else if(o in h){if(!h[d].has(r)){for(var a=!0,s=[r,f],u=l[d];h[o].size&&!h[o].has(u)&&(s.push(u),u!==l[u.id]);)u=l[u.id];if(s.push(u),e&&n?(a=!1,-1<s.findIndex((function(t){return-1<e.indexOf(t.id)}))&&(a=!0)):e&&!n&&-1<s.findIndex((function(t){return-1<e.indexOf(t.id)}))&&(a=!1),a){for(var g={},m=1;m<s.length;m+=1)g[s[m-1].id]=s[m];s.length&&(g[s[s.length-1].id]=s[0]),i.push(g)}h[o].add(f)}}else l[o]=f,c.push(r),h[o]=new Set([f])}(g)}}return i},ot=function(t,e,n){void 0===n&&(n=!0);for(var r=[],i=new Set,o=[],a=[],s={},u={},c=function t(u,c,l){var h=!1;if(!(e&&!1===n&&-1<e.indexOf(u.id))){r.push(u),i.add(u);for(var f=l[u.id],d=0;d<f.length;d+=1)if((y=s[f[d]])===c){for(var p={},g=1;g<r.length;g+=1)p[r[g-1].id]=r[g];r.length&&(p[r[r.length-1].id]=r[0]),a.push(p),h=!0}else i.has(y)||t(y,c,l)&&(h=!0);if(h)for(var m=[u];0<m.length;){var v=m.pop();i.has(v)&&(i.delete(v),o[v.id].forEach((function(t){m.push(t)})),o[v.id].clear())}else for(d=0;d<f.length;d+=1){var y=s[f[d]];o[y.id].has(u)||o[y.id].add(u)}r.pop()}return h},l=t.nodes,h=void 0===l?[]:l,f=0;f<h.length;f+=1){var d=h[f],p=d.id;s[u[p]=f]=d}if(e&&n)for(f=0;f<e.length;f++)!function(t){var n=e[t];u[h[t].id]=u[n],s[u[n]=0]=h.find((function(t){return t.id===n})),s[u[h[t].id]]=h[t]}(f);for(var g=0;g<h.length;){var m=h.filter((function(t){return u[t.id]>=g}));m=Z({nodes:m,edges:t.edges}).filter((function(t){return 1<t.length}));if(0===m.length)break;m=function(r){for(var i,o=1/0,s=0;s<r.length;s+=1)for(var c=r[s],l=0;l<c.length;l++){var h=u[c[l].id];h<o&&(o=h,i=s)}var f=r[i],d=[];for(s=0;s<f.length;s+=1){var p=f[s];d[p.id]=[];for(var g=0,m=W(p.id,t.edges,"target").filter((function(t){return-1<f.map((function(t){return t.id})).indexOf(t)}));g<m.length;g++){var v=m[g];v!==p.id||!1===n&&-1<e.indexOf(p.id)?d[p.id].push(u[v]):a.push(((v={})[p.id]=p,v))}}return{component:f,adjList:d,minIdx:o}}(m);var v=m.minIdx,y=m.adjList;m=m.component;if(!(1<m.length))break;if(m.forEach((function(t){o[t.id]=new Set})),m=s[v],e&&n&&-1===e.indexOf(m.id))return a;c(m,m,y),g=v+1}return a},at=function(t,e,n,r){return void 0===r&&(r=!0),(e?ot:it)(t,n,r)},st=function(t){for(var e=null,n=t.nodes,r={},i={},o={},a={},s=((void 0===n?[]:n).forEach((function(t){i[t.id]=t})),{enter:function(t){var n=t.current;t=t.previous;if(o[n]){e={};for(var a=n,s=t;s!==n;)e[a]=s,s=r[a=s];e[a]=s}else delete i[o[n]=n],r[n]=t},leave:function(t){t=t.current,delete o[a[t]=t]},allowTraversal:function(t){return t=t.next,!e&&!a[t]}});Object.keys(i).length;)rt(t,Object.keys(i)[0],s);return e},ut=n(92578),ct=function(t,e,n,r){for(var i=t.nodes,o=void 0===i?[]:i,a=(i=t.edges,void 0===i?[]:i),s=[],u={},c={},l={},h=(o.forEach((function(t,n){t=t.id,s.push(t),c[t]=1/0,t===e&&(c[t]=0)})),o.length),f=0;f<h;f++)!function(){var t,e=function(t,e,n){for(var r,i=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=i&&(i=t[a],r=e[o])}return r}(c,o,u),i=e.id;(u[i]=!0,c[i]!==1/0)&&(n?(t=i,a.filter((function(e){return e.source===t}))):H(i,a)).forEach((function(t){var n=t.target,o=t.source;o=n===i?o:n,n=r&&t[r]?t[r]:1;c[o]>c[e.id]+n?(c[o]=c[e.id]+n,l[o]=[e.id]):c[o]===c[e.id]+n&&l[o].push(e.id)}))}();l[e]=[e];var d={};for(p in c)c[p]!==1/0&&function t(e,n,r,i){if(e===n)return[e];if(i[n])return i[n];for(var o=[],a=0,s=r[n];a<s.length;a++){var u=s[a];u=t(e,u,r,i);if(!u)return;for(var c=0,l=u;c<l.length;c++){var h=l[c];(0,w.isArray)(h)?o.push((0,ut.__spreadArray)((0,ut.__spreadArray)([],h,!0),[n],!1)):o.push([h,n])}}return i[n]=o,i[n]}(e,p,l,d);var p,g={};for(p in d)g[p]=d[p][0];return{length:c,path:g,allPath:d}},lt=function(t,e,n,r,i){return t=ct(t,e,r,i),e=t.length,r=t.path,i=t.allPath,{length:e[n],path:r[n],allPath:i[n]}},ht=function(t,e,n,r){if(e===n)return[[e]];t=t.edges;var i=void 0===t?[]:t,o=[e],a=((t={})[e]=!0,t),s=[],u=[],c=r?W(e,i,"target"):W(e,i);for(s.push(c);0<o.length&&0<s.length;){var l,h=s[s.length-1];h.length?((h=h.shift())&&(o.push(h),a[h]=!0,c=r?W(h,i,"target"):W(h,i),s.push(c.filter((function(t){return!a[t]})))),o[o.length-1]===n&&(h=o.map((function(t){return t})),u.push(h),l=o.pop(),a[l]=!1,s.pop())):(l=o.pop(),a[l]=!1,s.pop())}return u},ft=function(t,e){for(var n=B(t,e),r=[],i=n.length,o=0;o<i;o+=1){r[o]=[];for(var a=0;a<i;a+=1)o===a?r[o][a]=0:0!==n[o][a]&&n[o][a]?r[o][a]=n[o][a]:r[o][a]=1/0}for(var s=0;s<i;s+=1)for(o=0;o<i;o+=1)for(a=0;a<i;a+=1)r[o][a]>r[o][s]+r[s][a]&&(r[o][a]=r[o][s]+r[s][a]);return r},dt=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e3);for(var i=t.nodes,o=void 0===i?[]:i,a=(i=t.edges,i=void 0===i?[]:i,{}),s={},u=(t=(o.forEach((function(t,e){var n=Y();t.clusterId=n,a[n]={id:n,nodes:[t]},s[t.id]={node:t,idx:e}})),B(t,e)),[]),c={},l=(t.forEach((function(t,e){var n=0,r=o[e].id;c[r]={},t.forEach((function(t,e){t&&(n+=t,e=o[e].id,c[r][e]=t)})),u.push(n)})),0);l<r&&"break"!==function(){var t=!1;if(o.forEach((function(e){var n,r,i={},o=(Object.keys(c[e.id]).forEach((function(t){var n=c[e.id][t];t=s[t].node.clusterId;i[t]||(i[t]=0),i[t]+=n})),-1/0),u=[];Object.keys(i).forEach((function(t){o<i[t]?(o=i[t],u=[t]):o===i[t]&&u.push(t)})),1===u.length&&u[0]===e.clusterId||(0<=(n=u.indexOf(e.clusterId))&&u.splice(n,1),u&&u.length&&(t=!0,r=(n=a[e.clusterId]).nodes.indexOf(e),n.nodes.splice(r,1),n=Math.floor(Math.random()*u.length),(r=a[u[n]]).nodes.push(e),e.clusterId=r.id))})),!t)return"break";l++}(););Object.keys(a).forEach((function(t){var e=a[t];e.nodes&&e.nodes.length||delete a[t]}));var h=[],f={},d=(i.forEach((function(t){var e=t.source,r=t.target,i=(t=t[n]||1,e=s[e].node.clusterId,r=s[r].node.clusterId,"".concat(e,"---").concat(r));f[i]?(f[i].weight+=t,f[i].count++):h.push(f[i]={source:e,target:r,weight:t,count:1})})),[]);return Object.keys(a).forEach((function(t){d.push(a[t])})),{clusters:d,clusterEdges:h}};function pt(t){this.arr=t}function gt(t,e){void 0===e&&(e=void 0);var n=[];return t.forEach((function(t){void 0===e&&n.push(t),void 0!==t[e]&&n.push(t[e])})),n}function mt(t,e,n){var r=[],i=(r=null!=e&&e.length?e:(t.forEach((function(t){r=r.concat(Object.keys(t))})),(0,w.uniq)(r)),{});return r.forEach((function(e){var r=[];t.forEach((function(t){void 0!==t[e]&&""!==t[e]&&r.push(t[e])})),!r.length||null!=n&&n.includes(e)||(i[e]=(0,w.uniq)(r))})),i}function vt(t,e,n){var r=mt(t,e,n),i=[];return Object.keys(r).length&&t.forEach((function(t,e){var n,o=[];1===Object.keys(r).length?(n=Object.keys(r)[0],r[n].every((function(t){return!isNaN(Number(t))}))&&(o=[t[n]])):Object.keys(r).forEach((function(e){for(var n=t[e],i=r[e],a=i.findIndex((function(t){return n===t})),s=[],u=0;u<i.length;u++)s.push(u===a?1:0);o=o.concat(s)})),i[e]=o})),i}function yt(t,e,n,r){var i=0;return(n=void 0===n?wt.EuclideanDistance:n)===wt.EuclideanDistance?new St(t).euclideanDistance(new St(e)):i}function bt(t,e,n,r){for(var i=e.length,o=2*r,a=0,s=0;s<i;s++)for(var u=t[s].clusterId,c=0;c<i;c++)u===t[c].clusterId&&(a+=(e[s][c]||0)-(n[s]||0)*(n[c]||0)/o);return a*(1/o)}function xt(t,e){for(var n=(t=void 0===t?[]:t).length,r=new St([]),i=0;i<n;i++)r=r.add(new St(e[i]));var o=r.avg(n),a=(o.normalize(),0);for(i=0;i<n;i++)a+=(c=new St(e[i])).squareEuclideanDistance(o);var s=[];for(t.forEach((function(){s.push([])})),i=0;i<n;i++)for(var u,c=new St(e[i]),l=t[i].clusterInertial=0;l<n;l++)i===l?s[i][l]=0:(u=new St(e[l]),s[i][l]=c.squareEuclideanDistance(u),t[i].clusterInertial+=s[i][l]);var h=0,f=2*n*a;for(i=0;i<n;i++){var d=t[i].clusterId;for(l=0;l<n;l++){var p=t[l].clusterId;i!==l&&d===p&&(h+=t[i].clusterInertial*t[l].clusterInertial/Math.pow(f,2)-s[i][l]/f)}}return Number(h.toFixed(4))}function _t(t,e,n){return t===wt.EuclideanDistance?e[n]:[]}pt.prototype.getArr=function(){return this.arr||[]},pt.prototype.add=function(t){var e=t.arr;if(null==(t=this.arr)||!t.length)return new pt(e);if(null==e||!e.length)return new pt(this.arr);if(this.arr.length===e.length){var n,r=[];for(n in this.arr)r[n]=this.arr[n]+e[n];return new pt(r)}},pt.prototype.subtract=function(t){var e=t.arr;if(null==(t=this.arr)||!t.length)return new pt(e);if(null==e||!e.length)return new pt(this.arr);if(this.arr.length===e.length){var n,r=[];for(n in this.arr)r[n]=this.arr[n]-e[n];return new pt(r)}},pt.prototype.avg=function(t){var e=[];if(0!==t)for(var n in this.arr)e[n]=this.arr[n]/t;return new pt(e)},pt.prototype.negate=function(){var t,e=[];for(t in this.arr)e[t]=-this.arr[t];return new pt(e)},pt.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(null==(e=this.arr)||!e.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,i=0;for(r in this.arr)i+=Math.pow(this.arr[r]-t.arr[r],2);return i}},pt.prototype.euclideanDistance=function(t){var e,n=t.arr;if(null==(e=this.arr)||!e.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,i=0;for(r in this.arr)i+=Math.pow(this.arr[r]-t.arr[r],2);return Math.sqrt(i)}},pt.prototype.normalize=function(){var t,e=[],n=(0,w.clone)(this.arr),r=(n.sort((function(t,e){return t-e})),n[n.length-1]),i=n[0];for(t in this.arr)e[t]=(this.arr[t]-i)/(r-i);return new pt(e)},pt.prototype.norm2=function(){var t;if(null==(t=this.arr)||!t.length)return 0;var e,n=0;for(e in this.arr)n+=Math.pow(this.arr[e],2);return Math.sqrt(n)},pt.prototype.dot=function(t){var e,n=t.arr;if(null==(e=this.arr)||!e.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,i=0;for(r in this.arr)i+=this.arr[r]*t.arr[r];return i}},pt.prototype.equal=function(t){var e,n=t.arr;if((null==(t=this.arr)?void 0:t.length)!==(null==n?void 0:n.length))return!1;for(e in this.arr)if(this.arr[e]!==n[e])return!1;return!0};var wt,St=pt,Et=((wt=wt||{}).EuclideanDistance="euclideanDistance",function(t,e,n,r,i,o,a,s,u){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4),void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===a&&(a=[]),void 0===s&&(s=["id"]),void 0===u&&(u=1);for(var c,l=t.nodes,h=void 0===l?[]:l,f=(l=t.edges,void 0===l?[]:l),d=[],p=(i&&(h.forEach((function(t,e){t.properties=t.properties||{},t.originIndex=e})),c=[],h.every((function(t){return t.hasOwnProperty("nodeType")}))&&(c=Array.from(new Set(h.map((function(t){return t.nodeType})))),h.forEach((function(t){t.properties.nodeType=c.findIndex((function(e){return e===t.nodeType}))}))),l=gt(h,o),d=vt(l,a,s)),1),g={},m={},v=(h.forEach((function(t,e){var n=String(p++);t.clusterId=n,g[n]={id:n,nodes:[t]},m[t.id]={node:t,idx:e}})),B(t,e)),y=[],b={},x=0,_=(v.forEach((function(t,e){var n=0,r=h[e].id;b[r]={},t.forEach((function(t,e){t&&(n+=t,e=h[e].id,b[r][e]=t,x+=t)})),y.push(n)})),x/=2,1/0),S=1/0,E=0,M=[],A={};;){_=i&&h.every((function(t){return t.hasOwnProperty("properties")}))?bt(h,v,y,x)+xt(h,d)*u:bt(h,v,y,x),0===E&&(S=_,M=h,A=g);var C=0<_&&S<_&&_-S<r;if(S<_&&(M=h.map((function(t){return{node:t,clusterId:t.clusterId}})),A=(0,w.clone)(g),S=_),C||100<E)break;E++,Object.keys(g).forEach((function(t){var e=0;f.forEach((function(r){var i=r.source,o=r.target;i=m[i].node.clusterId,o=m[o].node.clusterId;(i===t&&o!==t||o===t&&i!==t)&&(e+=r[n]||1)})),g[t].sumTot=e})),h.forEach((function(t,e){var r,o,a,s,c=g[t.clusterId],l=0,h=y[e]/(2*x),p=0,_=c.nodes,w=(_.forEach((function(t){t=m[t.id].idx,p+=v[e][t]||0})),p-c.sumTot*h),S=(_=_.filter((function(e){return e.id!==t.id})),_.forEach((function(t,e){d[t.originIndex]})),xt(_,d)*u);_=b[t.id];Object.keys(_).forEach((function(n){var o,a,s;n=m[n].node.clusterId;n!==t.clusterId&&(a=(n=g[n]).nodes)&&a.length&&(o=0,a.forEach((function(t){t=m[t.id].idx,o+=v[e][t]||0})),s=o-n.sumTot*h,a=a.concat([t]),a.forEach((function(t,e){d[t.originIndex]})),a=xt(a,d)*u,l<(s=i?s+a-(w+S):s-w))&&(l=s,r=n)})),0<l&&(r.nodes.push(t),o=t.clusterId,t.clusterId=r.id,_=c.nodes.indexOf(t),c.nodes.splice(_,1),s=a=0,f.forEach((function(t){var e=t.source,i=t.target;e=m[e].node.clusterId,i=m[i].node.clusterId;(e===r.id&&i!==r.id||i===r.id&&e!==r.id)&&(a+=t[n]||1),(e===o&&i!==o||i===o&&e!==o)&&(s+=t[n]||1)})),r.sumTot=a,c.sumTot=s)}))}var T={},k=0,O=(Object.keys(A).forEach((function(t){var e,n=A[t];n.nodes&&n.nodes.length?(e=String(k+1))!==t&&(n.id=e,n.nodes=n.nodes.map((function(t){return{id:t.id,clusterId:e}})),A[e]=n,T[t]=e,delete A[t],k++):delete A[t]})),M.forEach((function(t){var e=t.node;t=t.clusterId;e&&(e.clusterId=t,e.clusterId)&&T[e.clusterId]&&(e.clusterId=T[e.clusterId])})),[]),P={},I=(f.forEach((function(t){var e,r=t.source,i=t.target;t=t[n]||1,r=m[r].node.clusterId,i=m[i].node.clusterId;r&&i&&(e="".concat(r,"---").concat(i),P[e]?(P[e].weight+=t,P[e].count++):O.push(P[e]={source:r,target:i,weight:t,count:1}))})),[]);return Object.keys(A).forEach((function(t){I.push(A[t])})),{clusters:I,clusterEdges:O}}),Mt=function(t,e,n,r,i,o,a,s){return Et(t,e=void 0!==e&&e,n=void 0===n?"weight":n,r=void 0===r?1e-4:r,!0,i=void 0===i?void 0:i,o=void 0===o?[]:o,a=void 0===a?["id"]:a,s=void 0===s?1:s)},At=function(t,e){void 0===e&&(e=1);t=(0,w.clone)(t);for(var n,r=t.nodes,i=void 0===r?[]:r,o=(r=t.edges,void 0===r?[]:r);"break"!==function(){var t=Q({nodes:i,edges:o}),r=Object.keys(t),a=(r.sort((function(e,n){return(null==(e=t[e])?void 0:e.degree)-(null==(e=t[n])?void 0:e.degree)})),r[0]);if(!i.length||(null==(n=t[a])?void 0:n.degree)>=e)return"break";r=i.findIndex((function(t){return t.id===a})),i.splice(r,1),o=o.filter((function(t){return!(t.source===a||t.target===a)}))}(););return{nodes:i,edges:o}},Ct=function(t,e,n,r,i,o){void 0===e&&(e=3),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===i&&(i=["id"]),void 0===o&&(o=wt.EuclideanDistance);var a=t.nodes,s=void 0===a?[]:a;a=t.edges,t=void 0===a?[]:a,a={clusters:[{id:"0",nodes:s}],clusterEdges:[]};if(o===wt.EuclideanDistance&&!s.every((function(t){return t.hasOwnProperty(n)})))return a;var u=[];if(o===wt.EuclideanDistance&&(c=gt(s,n),u=vt(c,r,i)),!u.length)return a;for(var c=(0,w.uniq)(u.map((function(t){return t.join("")}))),l=Math.min(e,s.length,c.length),h=0;h<s.length;h++)s[h].originIndex=h;var f=[],d=[],p=[];for(h=0;h<l;h++)if(0===h){var g=Math.floor(Math.random()*s.length);o===wt.EuclideanDistance?f[h]=u[g]:f[h]=[],d.push(g),p[h]=[s[g]],s[g].clusterId=String(h)}else{for(var m=-1/0,v=0,y=0;y<s.length;y++)!function(t){if(!d.includes(t)){for(var e=0,n=0;n<f.length;n++){var r=0;e+=r=o===wt.EuclideanDistance?yt(u[s[t].originIndex],f[n],o):r}var i=e/f.length;m<i&&!f.find((function(e){return(0,w.isEqual)(e,_t(o,u,s[t].originIndex))}))&&(m=i,v=t)}}(y);f[h]=_t(o,u,v),d.push(v),p[h]=[s[v]],s[v].clusterId=String(h)}for(var b=0;;){for(h=0;h<s.length;h++){var x=0,_=1/0;if(0!==b||!d.includes(h)){for(var S=0;S<f.length;S++){var E=0;(E=o===wt.EuclideanDistance?yt(u[h],f[S],o):E)<_&&(_=E,x=S)}if(void 0!==s[h].clusterId)for(var M=p[Number(s[h].clusterId)].length-1;0<=M;M--)p[Number(s[h].clusterId)][M].id===s[h].id&&p[Number(s[h].clusterId)].splice(M,1);s[h].clusterId=String(x),p[x].push(s[h])}}var A=!1;for(h=0;h<p.length;h++){var C=p[h],T=new St([]);for(S=0;S<C.length;S++)T=T.add(new St(u[C[S].originIndex]));var k=T.avg(C.length);k.equal(new St(f[h]))||(A=!0,f[h]=k.getArr())}if(b++,s.every((function(t){return void 0!==t.clusterId}))&&A||1e3<=b)break}var O=[],P={};return t.forEach((function(t){var e=t.source,n=t.target,r=(t=null==(t=s.find((function(t){return t.id===e})))?void 0:t.clusterId,null==(r=s.find((function(t){return t.id===n})))?void 0:r.clusterId),i="".concat(t,"---").concat(r);P[i]?P[i].count++:O.push(P[i]={source:t,target:r,count:1})})),{clusters:p,clusterEdges:O}},Tt=function(t,e){e=new St(e);var n=e.norm2(),r=(t=new St(t),t.norm2());e=e.dot(t),t=n*r;return t?e/t:0},kt=function(t,e,n,r,i){void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===i&&(i=[]);var o=(0,w.clone)((t=void 0===t?[]:t).filter((function(t){return t.id!==e.id}))),a=t.findIndex((function(t){return t.id===e.id})),s=(t=gt(t,n),vt(t,r,i)),u=s[a],c=[];return o.forEach((function(t,n){t.id!==e.id&&(n=s[n],n=Tt(n,u),c.push(n),t.cosineSimilarity=n)})),o.sort((function(t,e){return e.cosineSimilarity-t.cosineSimilarity})),{allCosineSimilarity:c,similarNodes:o}};function Ot(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}function Pt(t,e){return t-e}Ot.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},Ot.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},Ot.prototype.connected=function(t,e){return this.find(t)===this.find(e)};var It=Ot;function Nt(t){this.compareFn=t=void 0===t?Pt:t,this.list=[]}function Dt(t,e){var n=[],r=void 0===(r=t.nodes)?[]:r,i=void 0===(t=t.edges)?[]:t;if(0!==r.length){t=r[0];var o=new Set,a=(o.add(t),new Rt((function(t,n){return e?t.weight-n.weight:0})));for(H(t.id,i).forEach((function(t){a.insert(t)}));!a.isEmpty();){var s=a.delMin(),u=s.source,c=s.target;o.has(u)&&o.has(c)||(n.push(s),o.has(u)||(o.add(u),H(u,i).forEach((function(t){a.insert(t)}))),o.has(c))||(o.add(c),H(c,i).forEach((function(t){a.insert(t)})))}}return n}function Lt(t,e){var n=[],r=void 0===(r=t.nodes)?[]:r;t=void 0===(t=t.edges)?[]:t;if(0!==r.length)for(var i=t.map((function(t){return t})),o=(e&&i.sort((function(t,e){return t.weight-e.weight})),new It(r.map((function(t){return t.id}))));0<i.length;){var a=i.shift(),s=a.source,u=a.target;o.connected(s,u)||(n.push(a),o.union(s,u))}return n}Nt.prototype.getLeft=function(t){return 2*t+1},Nt.prototype.getRight=function(t){return 2*t+2},Nt.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},Nt.prototype.isEmpty=function(){return this.list.length<=0},Nt.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},Nt.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return 0<this.list.length&&(this.list[0]=e,this.moveDown(0)),t},Nt.prototype.insert=function(t){return null!==t&&(this.list.push(t),t=this.list.length-1,this.moveUp(t),!0)},Nt.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&0<t&&0<this.compareFn(this.list[e],this.list[t]);){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},Nt.prototype.moveDown=function(t){var e=t,n=this.getLeft(t),r=this.getRight(t),i=this.list.length;null!==n&&n<i&&0<this.compareFn(this.list[e],this.list[n])?e=n:null!==r&&r<i&&0<this.compareFn(this.list[e],this.list[r])&&(e=r),t!==e&&(n=[this.list[e],this.list[t]],this.list[t]=n[0],this.list[e]=n[1],this.moveDown(e))};var Rt=Nt,Bt=function(t,e,n){return n?{prim:Dt,kruskal:Lt}[n](t,e):Lt(t,e)},jt=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var r=1,i=0,o=1e3,a=t.nodes,s=void 0===a?[]:a,u=(a=t.edges,void 0===a?[]:a),c=s.length,l={},h={},f=0;f<c;++f)l[p=(x=s[f]).id]=1/c,h[p]=1/c;for(var d=Q(t);0<o&&e<r;){for(i=0,f=0;f<c;++f){var p=(x=s[f]).id,g=0;if(0===d[x.id].inDegree)l[p]=0;else{for(var m=W(p,u,"source"),v=0;v<m.length;++v){var y=m[v],b=d[y].outDegree;0<b&&(g+=h[y]/b)}l[p]=n*g,i+=l[p]}}i=(1-i)/c;var x;for(r=0,f=0;f<c;++f)g=l[p=(x=s[f]).id]+i,r+=Math.abs(g-h[p]),h[p]=g;--o}return h},Ft="-1",zt=function(t,e,n,r){void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=t=void 0===t?-1:t,this.from=e,this.to=n,this.label=r},Ut=(Gt.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},Gt);function Gt(t,e){void 0===e&&(e=Ft),this.id=t=void 0===t?-1:t,this.label=e,this.edges=[],this.edgeMap={}}Wt.prototype.getNodeNum=function(){return this.nodes.length},Wt.prototype.addNode=function(t,e){var n;this.nodeMap[t]||(n=new Ut(t,e),this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t))},Wt.prototype.addEdge=function(t,e,n,r){var i;!this.edgeIdAutoIncrease&&void 0!==t||(t=this.counter++),this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t]||(i=new zt(t,e,n,r),this.edges.push(i),this.edgeMap[t]=i,this.nodeMap[e].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),this.directed)||(i=new zt(t,n,e,r),this.nodeMap[n].addEdge(i),this.edgeLabelMap[r].push(i))};var Vt=Wt;function Wt(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t=void 0===t?-1:t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}Yt.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},Yt.prototype.notEqualTo=function(t){return!this.equalTo(t)};var Ht=Yt;function Yt(t,e,n,r,i){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||Ft,edgeLabel:r||"-1",nodeLabel2:i||Ft}}Xt.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},Xt.prototype.notEqualTo=function(t){return!this.equalTo(t)},Xt.prototype.pushBack=function(t,e,n,r,i){return this.dfsEdgeList.push(new Ht(t,e,n,r,i)),this.dfsEdgeList},Xt.prototype.toGraph=function(t,e){var n=new Vt(t=void 0===t?-1:t,!0,e=void 0!==e&&e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,r=t.toNode,i=(t=t.nodeEdgeNodeLabel,t.nodeLabel1),o=t.edgeLabel;t=t.nodeLabel2;i!==Ft&&n.addNode(e,i),t!==Ft&&n.addNode(r,t),i!==Ft&&t!==i&&n.addEdge(void 0,e,r,o)})),n},Xt.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;0<=e;e--){var n=this.dfsEdgeList[e],r=n.fromNode;n=n.toNode;r<n&&(void 0===t||n===t)&&(this.rmpath.push(e),t=r)}return this.rmpath},Xt.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length};var qt=Xt;function Xt(){this.rmpath=[],this.dfsEdgeList=[]}Zt.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},Zt.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]};var Kt=Zt;function Zt(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}Jt.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],i=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=i[t.to].label)&&r.push(t)})),r},Jt.prototype.findBackwardEdge=function(t,e,n,r){if(this.directed||e!==n)for(var i=t.nodeMap,o=i[n.to].edges,a=o.length,s=0;s<a;s++){var u=o[s];if(!r.hasEdge(u)&&u.to===e.from)if(this.directed){if(i[e.from].label<i[n.to].label||i[e.from].label===i[n.to].label&&e.label<=u.label)return u}else if(e.label<u.label||e.label===u.label&&i[e.to].label<=i[n.to].label)return u}return null},Jt.prototype.findForwardPureEdges=function(t,e,n,r){for(var i=[],o=(e=e.to,t.nodeMap[e].edges),a=o.length,s=0;s<a;s++){var u=o[s],c=t.nodeMap[u.to];n<=c.label&&!r.hasNode(c)&&i.push(u)}return i},Jt.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var i=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from].edges,u=s.length,c=0;c<u;c++){var l=s[c],h=o[l.to].label;e.to===l.to||h<n||r.hasNode(o[l.to])||(e.label<l.label||e.label===l.label&&a<=h)&&i.push(l)}return i},Jt.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},Jt.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){n=t[n];var r=n.nodeLabel1,i=n.edgeLabel;n=n.nodeLabel2;(!e||r<e.nodeLabel1||r===e.nodeLabel1&&i<e.edgeLabel||r===e.nodeLabel1&&i===e.edgeLabel&&n<e.nodeLabel2)&&(e={nodeLabel1:r,edgeLabel:i,nodeLabel2:n})})),e},Jt.prototype.isMin=function(){var t,e,n,r,i,o,a,s=this,u=this.dfsCode;return this.verbose,1===u.dfsEdgeList.length||(t=this.directed,e=u.toGraph(-1,t),n=e.nodeMap,r=new qt,i={},e.nodes.forEach((function(t){s.findForwardRootEdges(e,t).forEach((function(r){var o=n[r.to],a="".concat(t.label,"-").concat(r.label,"-").concat(o.label);i[a]||(i[a]={projected:[],nodeLabel1:t.label,edgeLabel:r.label,nodeLabel2:o.label}),o={graphId:e.id,edge:r,preNode:null};i[a].projected.push(o)}))})),(a=this.findMinLabel(i))?(r.dfsEdgeList.push(new Ht(0,1,a.nodeLabel1,a.edgeLabel,a.nodeLabel2)),o=function i(o){for(var a=r.buildRmpath(),c=r.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l=r.dfsEdgeList[a[0]].toNode,h={},f=!1,d=0,p=t?-1:0,g=a.length-1;p<g&&"break"!==function(t){if(f)return"break";o.forEach((function(n){var i=new Kt(n);i=s.findBackwardEdge(e,i.edges[a[t]],i.edges[a[0]],i);i&&(h[i.label]||(h[i.label]={projected:[],edgeLabel:i.label}),h[i.label].projected.push({graphId:e.id,edge:h,preNode:n}),d=r.dfsEdgeList[a[t]].fromNode,f=!0)}))}(g);g--);if(f)return v=s.findMinLabel(h),r.dfsEdgeList.push(new Ht(l,d,Ft,v.edgeLabel,Ft)),m=r.dfsEdgeList.length-1,s.dfsCode.dfsEdgeList[m]===r.dfsEdgeList[m]&&i(h[v.edgeLabel].projected);var m,v,y={},b=(f=!1,0),x=(o.forEach((function(t){var r=new Kt(t);r=s.findForwardPureEdges(e,r.edges[a[0]],c,r);0<r.length&&(f=!0,b=l,r.forEach((function(r){var i="".concat(r.label,"-").concat(n[r.to].label);y[i]||(y[i]={projected:[],edgeLabel:r.label,nodeLabel2:n[r.to].label}),y[i].projected.push({graphId:e.id,edge:r,preNode:t})})))})),a.length);for(g=0;g<x&&"break"!==function(t){if(f)return"break";var i=a[t];o.forEach((function(t){var o=new Kt(t);o=s.findForwardRmpathEdges(e,o.edges[i],c,o);0<o.length&&(f=!0,b=r.dfsEdgeList[i].fromNode,o.forEach((function(r){var i="".concat(r.label,"-").concat(n[r.to].label);y[i]||(y[i]={projected:[],edgeLabel:r.label,nodeLabel2:n[r.to].label}),y[i].projected.push({graphId:e.id,edge:r,preNode:t})})))}))}(g);g++);return!f||(m=s.findMinLabel(y),r.dfsEdgeList.push(new Ht(b,l+1,Ft,m.edgeLabel,m.nodeLabel2)),v=r.dfsEdgeList.length-1,u.dfsEdgeList[v]===r.dfsEdgeList[v]&&i(y["".concat(m.edgeLabel,"-").concat(m.nodeLabel2)].projected))},a="".concat(a.nodeLabel1,"-").concat(a.edgeLabel,"-").concat(a.nodeLabel2),o(i[a].projected)):void 0)},Jt.prototype.report=function(){var t;this.dfsCode.getNodeNum()<this.minNodeNum||(this.counter++,t=this.dfsCode.toGraph(this.counter,this.directed),this.frequentSubgraphs.push((0,w.clone)(t)))},Jt.prototype.subGraphMining=function(t){var e,n,r,i,o,a,s=this;this.getSupport(t)<this.minSupport||this.isMin()&&(this.report(),e=this.dfsCode.getNodeNum(),n=this.dfsCode.buildRmpath(),r=this.dfsCode.dfsEdgeList[n[0]].toNode,i=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,o={},a={},t.forEach((function(t){for(var u=s.graphs[t.graphId],c=u.nodeMap,l=new Kt(t),h=n.length-1;0<=h;h--){var f,d=s.findBackwardEdge(u,l.edges[n[h]],l.edges[n[0]],l);d&&(f="".concat(s.dfsCode.dfsEdgeList[n[h]].fromNode,"-").concat(d.label),a[f]||(a[f]={projected:[],toNodeId:s.dfsCode.dfsEdgeList[n[h]].fromNode,edgeLabel:d.label}),a[f].projected.push({graphId:t.graphId,edge:d,preNode:t}))}if(!(e>=s.maxNodeNum))for(s.findForwardPureEdges(u,l.edges[n[0]],i,l).forEach((function(e){var n="".concat(r,"-").concat(e.label,"-").concat(c[e.to].label);o[n]||(o[n]={projected:[],fromNodeId:r,edgeLabel:e.label,nodeLabel2:c[e.to].label}),o[n].projected.push({graphId:t.graphId,edge:e,preNode:t})})),h=0;h<n.length;h++)!function(e){s.findForwardRmpathEdges(u,l.edges[n[e]],i,l).forEach((function(r){var i="".concat(s.dfsCode.dfsEdgeList[n[e]].fromNode,"-").concat(r.label,"-").concat(c[r.to].label);o[i]||(o[i]={projected:[],fromNodeId:s.dfsCode.dfsEdgeList[n[e]].fromNode,edgeLabel:r.label,nodeLabel2:c[r.to].label}),o[i].projected.push({graphId:t.graphId,edge:r,preNode:t})}))}(h)})),Object.keys(a).forEach((function(t){var e=a[t],n=e.toNodeId;e=e.edgeLabel;s.dfsCode.dfsEdgeList.push(new Ht(r,n,"-1",e,"-1")),s.subGraphMining(a[t].projected),s.dfsCode.dfsEdgeList.pop()})),Object.keys(o).forEach((function(t){var e=o[t],n=e.fromNodeId,i=e.edgeLabel;e=e.nodeLabel2;s.dfsCode.dfsEdgeList.push(new Ht(n,r+1,Ft,i,e)),s.subGraphMining(o[t].projected),s.dfsCode.dfsEdgeList.pop()})))},Jt.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={};return Object.keys(t).forEach((function(n){var r=t[n],s=r.nodeMap;r.nodes.forEach((function(t,r){var u,c=t.label,l="".concat(n,"-").concat(c);a[l]||(u=i[c]||0,i[c]=++u),a[l]={graphKey:n,label:c},t.edges.forEach((function(t){var r,i=c,a=s[t.to].label,u=(!e&&a<i&&(u=a,a=i,i=u),t.label),l=(t="".concat(n,"-").concat(i,"-").concat(u,"-").concat(a),"".concat(i,"-").concat(u,"-").concat(a));o[l]||(r=o[l]||0,o[l]=++r)}))}))})),Object.keys(i).forEach((function(t){var e;i[t]<n||((e={nodes:[],edges:[]}).nodes.push({id:"0",label:t}),r.push(e))})),r},Jt.prototype.run=function(){var t,e,n=this;this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),this.maxNodeNum<2||(t=this.graphs,this.directed,e={},Object.keys(t).forEach((function(r){var i=t[r],o=i.nodeMap;i.nodes.forEach((function(t){n.findForwardRootEdges(i,t).forEach((function(n){var i=o[n.to],a="".concat(t.label,"-").concat(n.label,"-").concat(i.label);e[a]||(e[a]={projected:[],nodeLabel1:t.label,edgeLabel:n.label,nodeLabel2:i.label}),i={graphId:r,edge:n,preNode:null};e[a].projected.push(i)}))}))})),Object.keys(e).forEach((function(t){t=e[t];var r=t.projected,i=t.nodeLabel1,o=t.edgeLabel;t=t.nodeLabel2;n.dfsCode.dfsEdgeList.push(new Ht(0,1,i,o,t)),n.subGraphMining(r),n.dfsCode.dfsEdgeList.pop()})))};var $t=Jt;function Jt(t){var e=t.graphs,n=t.minSupport,r=(n=void 0===n?2:n,t.minNodeNum),i=(r=void 0===r?1:r,t.maxNodeNum),o=(i=void 0===i?4:i,t.top),a=(o=void 0===o?10:o,t.directed);a=void 0!==a&&a,t=t.verbose,t=void 0!==t&&t;this.graphs=e,this.dfsCode=new qt,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=o,this.directed=a,this.counter=0,this.maxNodeNum=i,this.minNodeNum=r,this.verbose=t,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}function Qt(t,e,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=t.nodes;return e.forEach((function(t,e){i.push(ae(o,t,e,n,r))})),i}function te(t,e,n){for(var r=1/0,i=0,o=0;o<e;o++)!function(e){var n=t[e],o=Object.keys(n).sort((function(t,e){return n[t]-n[e]})),a=[],s=(o.forEach((function(t,e){a[e%10]||(a[e%10]={graphs:[],totalCount:0,aveCount:0}),a[e%10].graphs.push(t),a[e%10].totalCount+=n[t]})),0),u=[],c=(a.forEach((function(t){var e=t.totalCount/t.graphs.length,r=(t.aveCount=e,u.push(e),0);e=t.length;t.graphs.forEach((function(e,i){var o=n[e];t.graphs.forEach((function(t,e){i!==e&&(r+=Math.abs(o-n[t]))}))})),s+=r/=e*(e-1)/2})),s/=a.length,0);u.forEach((function(t,e){u.forEach((function(n,r){e!==r&&(c+=Math.abs(t-n))})),c/=u.length*(u.length-1)/2})),o=c-s;r<o&&(r=o,i=e)}(o);return{structure:n[i],structureCountMap:t[i]}}function ee(t,e){var n={},r={};return t.forEach((function(t,i){n[t.id]={idx:i,node:t,degree:0,inDegree:0,outDegree:0},i=t[e],r[i]||(r[i]=[]),r[i].push(t)})),{nodeMap:n,nodeLabelMap:r}}function ne(t,e,n){var r={},i={};return t.forEach((function(t,o){r["".concat(Y)]={idx:o,edge:t},o=t[e],i[o]||(i[o]=[]),i[o].push(t),o=n[t.source],o&&(o.degree++,o.outDegree++),o=n[t.target],o&&(o.degree++,o.inDegree++)})),{edgeMap:r,edgeLabelMap:i}}function re(t,e,n){var r=e.length,i={};return e.forEach((function(e,o){for(var a,s,u=t[o].id,c=n?0:o+1;c<r;c++)o===c||(a=t[c].id,s=e[c],i["".concat(u,"-").concat(a)]=s,n)||(i["".concat(a,"-").concat(u)]=s)})),i}function ie(t,e,n,r){var i,o=null==(i=t[e])?void 0:i.degree,a=null==(i=t[e])?void 0:i.inDegree,s=null==(i=t[e])?void 0:i.outDegree;return void 0===t[e]&&(s=a=o=1/0,r[e].forEach((function(t){var e=n[t.id].degree;e<o&&(o=e),e=n[t.id].inDegree,e<a&&(a=e),e=n[t.id].outDegree;e<s&&(s=e)})),t[e]={degree:o,inDegree:a,outDegree:s}),{minPatternNodeLabelDegree:o,minPatternNodeLabelInDegree:a,minPatternNodeLabelOutDegree:s}}var oe=function(t){var e,n,r,i,o,a,s,u,c=t.graphs,l=t.directed,h=(l=void 0!==l&&l,t.nodeLabelProp),f=(h=void 0===h?"cluster":h,t.edgeLabelProp),d=(f=void 0===f?"cluster":f,c=(e=c,n=l,r=h,i=f,o={},Object.keys(e).forEach((function(t,a){t=e[t];var s=new Vt(a,!0,n),u={};t.nodes.forEach((function(t,e){s.addNode(e,t[r]),u[t.id]=e})),t.edges.forEach((function(t,e){var n=u[t.source],r=u[t.target];s.addEdge(-1,n,r,t[i])})),s&&s.getNodeNum()&&(o[s.id]=s)})),o),t.minSupport),p=t.maxNodeNum,g=t.minNodeNum,m=t.verbose;t=t.top,c=new $t({graphs:c,minSupport:d,maxNodeNum:p,minNodeNum:g,top:t,verbose:m,directed:l});return c.run(),d=c.frequentSubgraphs,a=h,s=f,u=[],d.forEach((function(t){var e={nodes:[],edges:[]};t.nodes.forEach((function(t){var n;e.nodes.push(((n={id:"".concat(t.id)})[a]=t.label,n))})),t.edges.forEach((function(t){var n;e.edges.push(((n={source:"".concat(t.from),target:"".concat(t.to)})[s]=t.label,n))})),u.push(e)})),u},ae=function(t,e,n,r,i){var o=[n],a=[],s={};return e.forEach((function(e,u){e<=i&&n!==u&&(o.push(u),a.push(t[u]),u=t[u][r],s[u]?(s[u].count++,s[u].dists.push(e)):s[u]={count:1,dists:[e]})})),Object.keys(s).forEach((function(t){s[t].dists=s[t].dists.sort((function(t,e){return t-e}))})),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},se=function(t,e,n,r){var i=n.nodes;return r=r||{},Object.keys(t).forEach((function(o){if(!r||!r[o]){r[o]={nodes:[],edges:[]};var a=t[o],s=null==(s=e[a.start])?void 0:s.nodeIdxs;a=null==(a=e[a.end])?void 0:a.nodeIdxs;if(s&&a){var u=new Set(a),c=s.filter((function(t){return u.has(t)}));if(c&&c.length){for(var l={},h=c.length,f=0;f<h;f++){var d=i[c[f]];r[o].nodes.push(d),l[d.id]=!0}n.edges.forEach((function(t){l[t.source]&&l[t.target]&&r[o].edges.push(t)}))}}}})),r},ue=function(t,e,n,r){var i,o={},a=(t.nodes.forEach((function(t){o[t.id]=t})),0);return null==(i=null==e?void 0:e.edges)||!i.length||(null==(i=null==e?void 0:e.nodes)?void 0:i.length)<2?0:(t.edges.forEach((function(t){var i=o[t.source][n],s=o[t.target][n],u=null==e?void 0:e.nodes[0][n],c=null==e?void 0:e.nodes[1][n],l=null==e?void 0:e.edges[0][r];t[r]===l&&(i===u&&s===c||i===c&&s===u)&&a++})),a)},ce=function(t,e,n,r,i,o,a){if(void 0===n&&(n=!1),void 0===o&&(o="cluster"),void 0===a&&(a="cluster"),t&&t.nodes){var s=t.nodes.length;if(s){var u=ft(t,n),c=ft(e,n),l=re(t.nodes,u,n),h=re(e.nodes,c,n),f=ee(t.nodes,o),d=f.nodeMap,p=f.nodeLabelMap,g=(f=ee(e.nodes,o),f.nodeMap),m=f.nodeLabelMap,v=(ne(t.edges,a,d),ne(e.edges,a,g).edgeLabelMap),y=[],b=(null!=c&&c.forEach((function(t){y=y.concat(t)})),i=i||Math.max.apply(Math,(0,ut.__spreadArray)((0,ut.__spreadArray)([],y,!1),[2],!1)),Qt(t,u,o,r=r||i)),x=Qt(e,c,o,r);f=Math.min(100,s*(s-1)/2);_=s,w=f,c=b,S=u,E=Math.ceil(w/_),M={},A=0,c.forEach((function(t,e){for(var n=0,r=0,i=t.nodeIdxs,o=t.neighborNum-1;n<E;){for(var a=i[1+Math.floor(Math.random()*o)],s=0;(M["".concat(e,"-").concat(a)]||M["".concat(a,"-").concat(e)])&&(a=Math.floor(Math.random()*_),!(2*_<++s)););if(s<2*_&&(M["".concat(e,"-").concat(a)]={start:e,end:a,distance:S[e][a]},n++,w<=++A))return M;if(2*_<++r)break}n<E&&(E=(E+(E-n))/(_-e-1))}));var _,w,S,E,M,A,C=se(M,b,t),T=(r=oe({graphs:C,nodeLabelProp:o,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n}).slice(0,10),s=r.length,[]),k=(f=(r.forEach((function(t,e){T[e]={},Object.keys(C).forEach((function(n){var r=C[n];r=ue(r,t,o,a);T[e][n]=r}))})),te(T,s,r)),f.structure),O=f.structureCountMap,P=e.nodes[0],I=[],N=null==(c=e.nodes[0])?void 0:c[o],D=-1/0,L=(e.nodes.forEach((function(t){var e=t[o],n=p[e];(null==n?void 0:n.length)>D&&(D=n.length,I=n,N=e,P=t)})),{}),R={},B={},j={},F={},z={},U=(Object.keys(m).forEach((function(r,i){F[r]=[],n&&(z[r]=[]);var s=-1/0,u=m[r],c={},f=(u.forEach((function(t){var e=h["".concat(P.id,"-").concat(t.id)];e&&F[r].push(e),s<e&&(s=e),c["".concat(P.id,"-").concat(t.id)]={start:0,end:g[t.id].idx,distance:e},n&&(e=h["".concat(t.id,"-").concat(P.id)])&&z[r].push(e)})),F[r]=F[r].sort((function(t,e){return t-e})),n&&(z[r]=z[r].sort((function(t,e){return t-e}))),R=se(c,x,e,R),[]);if(Object.keys(c).forEach((function(t){var e;B[t]||(e=R[t],B[t]=ue(e,k,o,a)),f.push(B[t])})),f=f.sort((function(t,e){return e-t})),j["".concat(P.id,"-").concat(r)]=f,r!==N)for(var p=((null==I?void 0:I.length)||0)-1;0<=p;p--)!function(e){var n=I[e],i=b[d[n.id].idx],s=i.nodeLabelCountMap[r],u=m[r].length;if(!s||s.count<u)return I.splice(e,1);for(var c=!1,h=0;h<u;h++)if(s.dists[h]>F[r][h]){c=!0;break}if(c)return I.splice(e,1);var p={},g=(i.neighbors.forEach((function(t){var e=l["".concat(n.id,"-").concat(t.id)];p["".concat(n.id,"-").concat(t.id)]={start:d[n.id].idx,end:d[t.id].idx,distance:e}})),C=se(p,b,t,C),[]),v=(Object.keys(p).forEach((function(t){var e;O[t]||(e=C[t],O[t]=ue(e,k,o,a)),g.push(O[t])})),g=g.sort((function(t,e){return e-t})),!1);for(h=0;h<u;h++)if(g[h]<f[h]){v=!0;break}v&&I.splice(e,1)}(p)})),[]),G=(null!=I&&I.forEach((function(r){for(var s,c,h,f,p,v,y,x=d[r.id].idx,_=ae(t.nodes,u[x],x,o,i).neighbors,w=!1,S=_.length-1;0<=S;S--){if(_.length+1<e.nodes.length)return void(w=!0);var E=_[S],M=E[o];if(m[M]&&m[M].length)if(F[M]&&F[M].length){var A="".concat(r.id,"-").concat(E.id),T=l[A],I=F[M].length-1;if(F[M][I]<T)_.splice(S,1);else{if(n){var N="".concat(E.id,"-").concat(r.id);N=l[N],I=z[M].length-1;if(z[M][I]<N){_.splice(S,1);continue}}var D,R=O[A]||(I=t,N=E,A=d,s=b,c=k,h=o,f=a,p=O,v=C,y=D=void 0,y="".concat((R=r).id,"-").concat(N.id),p&&p[y]?p[y]:((p=v?v[y]:void 0)||((D={})[y]={start:A[R.id].idx,end:A[N.id].idx,distance:T},p=(v=se(D,s,I,v))[y]),ue(p,c,h,f)));A="".concat(P.id,"-").concat(M);(R<j[A][j[A].length-1]||(D=(T=ie(L,M,g,m)).minPatternNodeLabelDegree,T.minPatternNodeLabelInDegree,T.minPatternNodeLabelOutDegree,d[E.id].degree<D))&&_.splice(S,1)}}else _.splice(S,1);else _.splice(S,1)}w||U.push({nodes:[r].concat(_)})})),ct(e,P.id,!1).length),V={};n?(Object.keys(G).forEach((function(t){var e=g[t].node[o];V[e]?V[e].push(G[t]):V[e]=[G[t]]})),Object.keys(V).forEach((function(t){V[t].sort((function(t,e){return t-e}))}))):V=F;for(var W=function(r){for(var i=U[r],s=i.nodes[0],u={},c={},l=(i.nodes.forEach((function(t,e){c[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0},e=t[o],u[e]?u[e]++:u[e]=1})),[]),h={},f=(t.edges.forEach((function(t){c[t.source]&&c[t.target]&&(l.push(t),h[t[a]]?h[t[a]]++:h[t[a]]=1,c[t.source].degree++,c[t.target].degree++,c[t.source].outDegree++,c[t.target].inDegree++)})),Object.keys(v).length),p=!1,y=0;y<f;y++){var b=Object.keys(v)[y];if(!h[b]||h[b]<v[b].length){p=!0;break}}if(p)return U.splice(r,1),"continue";if((N=l.length)<e.edges.length)return U.splice(r,1),"break";var x=!1;for(y=N-1;0<=y&&"break"!==function(t){var e,r,i,s=l[t],u=s[a],f=v[u];return f&&f.length&&(e=c[s.source].node[o],r=c[s.target].node[o],i=!1,f.forEach((function(t){var a=g[t.source].node;t=g[t.target].node;a[o]===e&&t[o]===r&&(i=!0),n||a[o]!==r||t[o]!==e||(i=!0)})),i)?void 0:(h[u]--,f&&h[u]<f.length?(x=!0,"break"):(l.splice(t,1),c[s.source].degree--,c[s.target].degree--,c[s.source].outDegree--,c[s.target].inDegree--,"continue"))}(y);y--);if(x)return U.splice(r,1),"continue";i.edges=l;var _=ct(i,i.nodes[0].id,!1).length;if(Object.keys(_).reverse().forEach((function(t){var e,n,r;if(t!==i.nodes[0].id&&!x)return _[t]===1/0?(n=c[t].node[o],u[n]--,u[n]<m[n].length?void(x=!0):(r=i.nodes.indexOf(c[t].node),i.nodes.splice(r,1),void(c[t]=void 0))):(e=d[t].node[o],void(V[e]&&V[e].length&&!(_[t]>V[e][V[e].length-1])||(n=c[t].node[o],u[n]--,u[n]<m[n].length?x=!0:(r=i.nodes.indexOf(c[t].node),i.nodes.splice(r,1),c[t]=void 0))))})),x)return U.splice(r,1),"continue";for(var w=!0,S=0;w&&!x;){if(w=!1,n?c[s.id].degree<g[P.id].degree||c[s.id].inDegree<g[P.id].inDegree||c[s.id].outDegree<g[P.id].outDegree:c[s.id].degree<g[P.id].degree){x=!0;break}if(u[s[o]]<m[s[o]].length){x=!0;break}for(var E=i.nodes.length-1;0<=E;E--){var M=i.nodes[E],A=c[M.id].degree,C=c[M.id].inDegree,T=c[M.id].outDegree,k=M[o],O=(k=ie(L,k,g,m),k.minPatternNodeLabelDegree),I=k.minPatternNodeLabelInDegree;k=k.minPatternNodeLabelOutDegree;if(n?A<O||C<I||T<k:A<O){if(u[M[o]]--,u[M[o]]<m[M[o]].length){x=!0;break}i.nodes.splice(E,1),w=!(c[M.id]=void 0)}}if(x||!w&&0!==S)break;for(var N,D=l.length-1;0<=D;D--){var R=l[D];if(!c[R.source]||!c[R.target]){l.splice(D,1);var B=R[a];if(h[B]--,c[R.source]&&(c[R.source].degree--,c[R.source].outDegree--),c[R.target]&&(c[R.target].degree--,c[R.target].inDegree--),v[B]&&h[B]<v[B].length){x=!0;break}w=!0}}S++}return x||i.nodes.length<e.nodes.length||l.length<e.edges.length?(U.splice(r,1),"continue"):void 0},H=U.length-1;0<=H;H--)if("break"===W(H))break;var Y=U.length,q=function(t){for(var e={},n=(U[t].edges.forEach((function(t){t="".concat(t.source,"-").concat(t.target,"-").concat(t.label),e[t]?e[t]++:e[t]=1})),Y-1);t<n;n--)!function(t){var n={},r=(U[t].edges.forEach((function(t){t="".concat(t.source,"-").concat(t.target,"-").concat(t.label),n[t]?n[t]++:n[t]=1})),!0);Object.keys(n).length!==Object.keys(e).length?r=!1:Object.keys(e).forEach((function(t){n[t]!==e[t]&&(r=!1)})),r&&U.splice(t,1)}(n);Y=U.length};for(H=0;H<=Y-1;H++)q(H);return U}}};function le(t){void 0===t&&(t=10),this.linkedList=new U,this.maxStep=t}function he(t,e,n){return e<=t&&t<=n}Object.defineProperty(le.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),le.prototype.isEmpty=function(){return!this.linkedList.head},le.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},le.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},le.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},le.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},le.prototype.toArray=function(){return this.linkedList.toArray().map((function(t){return t.value}))},le.prototype.clear=function(){for(;!this.isEmpty();)this.pop()};var fe=le,de=st,pe={getAdjMatrix:B,breadthFirstSearch:X,connectedComponent:$,getDegree:Q,getInDegree:tt,getOutDegree:et,detectCycle:st,detectDirectedCycle:de,detectAllCycles:at,detectAllDirectedCycle:ot,detectAllUndirectedCycle:it,depthFirstSearch:rt,dijkstra:ct,findAllPath:ht,findShortestPath:lt,floydWarshall:ft,labelPropagation:dt,louvain:Et,iLouvain:Mt,kCore:At,kMeans:Ct,cosineSimilarity:Tt,nodesCosineSimilarity:kt,minimumSpanningTree:Bt,pageRank:jt,getNeighbors:W,Stack:fe,GADDI:ce},ge=n(77160),me=n(31437),ve=L,ye=function(t){return function(e,n){return e[t]-n[t]}},be=function(t,e,n,r){var i=n.x-t.x,o=n.y-t.y,a=e.x-t.x,s=(e=e.y-t.y,r.x-n.x),u=(r=r.y-n.y,n=a*r-e*s,1/n);return 1e-4*(a*a+e*e)*(s*s+r*r)<n*n&&he(n=(i*r-o*s)*u,0,1)&&he((i*e-o*a)*u,0,1)?{x:t.x+n*a,y:t.y+n*e}:null},xe=function(t,e){for(var n=t.x,r=t.y,i=t.width,o=(t=t.height,[]),a={x:n+i/2,y:r+t/2},s=(o.push({x:n,y:r}),o.push({x:n+i,y:r}),o.push({x:n+i,y:r+t}),o.push({x:n,y:r+t}),o.push({x:n,y:r}),null),u=1;u<o.length&&!(s=be(o[u-1],o[u],a,e));u++);return s},_e=function(t,e){var n,r=t.x,i=t.y,o=(t=t.r,e.x-r);e=e.y-i;return o*o+e*e<t*t?null:(n=Math.atan(e/o),{x:r+Math.abs(t*Math.cos(n))*Math.sign(o),y:i+Math.abs(t*Math.sin(n))*Math.sign(e)})},we=function(t,e){var n=t.rx,r=t.ry,i=t.x,o=(t=t.y,e.x-i);e=e.y-t,e=Math.atan2(e/r,o/n);return e<0&&(e+=2*Math.PI),{x:i+n*Math.cos(e),y:t+r*Math.sin(e)}},Se=function(t,e,n){return t=[t.x,t.y,n=void 0===n?1:n],e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]),ge.transformMat3(t,t,e),{x:t[0],y:t[1]}},Ee=function(t,e,n){return void 0===n&&(n=1),e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]),e=(e=D.invert([1,0,0,0,1,0,0,0,1],e))||[1,0,0,0,1,0,0,0,1],t=[t.x,t.y,n],ge.transformMat3(t,t,e),{x:t[0],y:t[1]}},Me=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=t.x-n.x,a=t.y-n.y;e=(t.x*t.x-e.x*e.x-e.y*e.y+t.y*t.y)/2,n=(t.x*t.x-n.x*n.x-n.y*n.y+t.y*t.y)/2,t=i*o-r*a;return{x:-(a*e-i*n)/t,y:-(r*n-o*e)/t}},Ae=function(t,e){var n=t.x-e.x;t=t.y-e.y;return Math.sqrt(n*n+t*t)},Ce=function(t,e){var n=[];return t.forEach((function(t){var r=[];t.forEach((function(t){r.push(t*e)})),n.push(r)})),n},Te=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var i=0;i<n;i+=1)r===i?e[r][i]=0:0!==t[r][i]&&t[r][i]?e[r][i]=t[r][i]:e[r][i]=1/0}for(var o=0;o<n;o+=1)for(r=0;r<n;r+=1)for(i=0;i<n;i+=1)e[r][i]>e[r][o]+e[o][i]&&(e[r][i]=e[r][o]+e[o][i]);return e},ke=function(t,e){var n=t.nodes,r=(t=t.edges,[]),i={};if(n)return n&&n.forEach((function(t,e){i[t.id]=e,r.push([])})),t&&t.forEach((function(t){var n=t.source;t=t.target,n=i[n],t=i[t];r[n][t]=1,e||(r[t][n]=1)})),r;throw new Error("invalid nodes data!")},Oe=function(t,e){t.translate(e.x,e.y)},Pe=function(t,e,n,r){void 0===r&&(r={duration:500});var i,o,a,s,u,c,l=(l=t.getMatrix())||[1,0,0,0,1,0,0,0,1],h=t.getCanvasBBox(),f=e.x-h.minX;e=e.y-h.minY;n?(i=f*l[0],o=e*l[4],c=u=s=a=0,t.animate((function(t){return l=ve(l,[["t",(u=i*t)-a,(c=o*t)-s]]),a=u,s=c,{matrix:l}}),r)):(h=ve(l,[["t",f,e]]),t.setMatrix(h))},Ie=function(t,e){var n=(n=t.getMatrix())||[1,0,0,0,1,0,0,0,1],r=e;(0,w.isArray)(e)||(r=[e,e]),(0,w.isArray)(e)&&1===e.length&&(r=[e[0],e[0]]),n=ve(n,[["s",r[0],r[1]]]),t.setMatrix(n)},Ne=function(t,e){var n=t.getMatrix();n=ve(n=n||[1,0,0,0,1,0,0,0,1],[["r",e]]),t.setMatrix(n)},De=function(t,e,n){for(var r=[],i=0;i<t;i++)r[i]=0;return n.forEach((function(t){t.source&&(r[e[t.source]]+=1),t.target&&(r[e[t.target]]+=1)})),r},Le=function(t,e,n){var r=!1,i=t.length;function o(t){return Math.abs(t)<1e-6?0:t<0?-1:1}if(i<=2)return!1;for(var a,s,u,c=0;c<i;c++){var l=t[c],h=t[(c+1)%i];if(s=h,((u=[e,n])[0]-(a=l)[0])*(s[1]-a[1])==(s[0]-a[0])*(u[1]-a[1])&&Math.min(a[0],s[0])<=u[0]&&u[0]<=Math.max(a[0],s[0])&&Math.min(a[1],s[1])<=u[1]&&u[1]<=Math.max(a[1],s[1]))return!0;0<o(l[1]-n)!=0<o(h[1]-n)&&o(e-(n-l[1])*(l[0]-h[0])/(l[1]-h[1])-l[0])<0&&(r=!r)}return r},Re=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},Be=function(t,e){function n(t){var e=t.map((function(t){return t[0]}));t=t.map((function(t){return t[1]}));return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function r(t){for(var e,n,r=[],i=t.length,o=0;o<i-1;o++){var a=t[o],s=t[o+1];r.push({from:{x:a[0],y:a[1]},to:{x:s[0],y:s[1]}})}return 1<r.length&&(e=t[0],n=t[i-1],r.push({from:{x:n[0],y:n[1]},to:{x:e[0],y:e[1]}})),r}var i,o,a,s,u;return!(t.length<2||e.length<2||(s=n(t),i=n(e),!Re(s,i)))&&((o=!1,w.each)(e,(function(e){if(Le(t,e[0],e[1]))return!(o=!0)})),!!o||((0,w.each)(t,(function(t){if(Le(e,t[0],t[1]))return!(o=!0)})),!!o)||(a=r(t),s=r(e),(u=!1,w.each)(s,(function(t){if(e=t,(n=!1,w.each)(a,(function(t){if(be(t.from,t.to,e.from,e.to))return!(n=!0)})),n)return!(u=!0);var e,n})),u))},je=(Fe.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),r=Math.max(this.y1,this.y2);return{x:t,y:e,minX:t,minY:e,maxX:n,maxY:r,width:n-t,height:r-e}},Fe);function Fe(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}function ze(t,e){if(!1===e(t))return!1;if(t&&t.children)for(var n=t.children.length-1;0<=n;n--)if(!ze(t.children[n],e))return!1;return!0}function Ue(t,e){if(t&&t.children)for(var n=t.children.length-1;0<=n;n--)if(!Ue(t.children[n],e))return;return!1!==e(t)}function Ge(t){var e,n,r,i,o;return!!t&&(r=t.nodes,e=t.edges,i=void 0===(i=t.combos)?[]:i,r||e?!((r||[]).find((function(t){return!(0,w.isString)(t.id)}))||(r=(r||[]).map((function(t){return t.id})),i=null==i?void 0:i.map((function(t){return t.id})),o=P(P([],r,!0),i,!0),(e||[]).find((function(t){return!o.includes(t.source)||!o.includes(t.target)})))):(n=!0,bn(t,(function(t){return!!(0,w.isString)(t.id)||(n=!1)})),n))}var Ve=function(t,e){return{top:[t.minX,t.minY,t.maxX,t.minY],left:[t.minX,t.minY,t.minX,t.maxY],bottom:[t.minX,t.maxY,t.maxX,t.maxY],right:[t.maxX,t.minY,t.maxX,t.maxY]}[e]},We=function(t,e){for(var n=["top","left","bottom","right"],r=t.getBBox(),i=0,o=[],a=0;a<4;a++){var s=Ve(r,n[a]),u=s[0],c=s[1],l=s[2];s=s[3];o[a]=be({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:u,y:c},{x:l,y:s}),o[a]&&(i+=1)}return[o,i]},He=function(t,e){for(var n=["top","left","bottom","right"],r=t.getBBox(),i=Number.POSITIVE_INFINITY,o=0,a=0;a<4;a++){var s=Ve(r,n[a]),u=s[0],c=s[1],l=s[2];s=s[3],u=function(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1);e=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);return e&&(t=n/e,n=r/e,0<=t&&t<=1&&0<=n&&n<=1)?t:Number.POSITIVE_INFINITY}(e,new je(u,c,l,s));0<=(u=Math.abs(u-.5))&&u<=1&&(o+=1,i=u<i?u:i)}return 0===o?-1:i},Ye=function(t){var e=0,n=0;if(0<t.length){for(var r=0,i=t;r<i.length;r++){var o=i[r];e+=o.x,n+=o.y}e/=t.length,n/=t.length}return{x:e,y:n}},qe=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},Xe=function(t,e){var n=e.x1,r=e.y1,i=e.x2-n;e=e.y2-r,n=t.x-n,t=t.y-r,r=n*i+t*e<=0||(r=(n=i-n)*i+(t=e-t)*e)<=0?0:r*r/(i*i+e*e),i=n*n+t*t-r;return i<0?0:i},Ke=function(t,e,n){return void 0===n&&(n=.001),Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(n,2)},Ze=function(t,e){var n=t.x<e.x,r=t.x>e.x+e.width,i=t.y>e.y+e.height,o=t.y<e.y;return n||r||i||o?!i||n||r?!o||n||r?!n||i||o?!r||i||o?(n=Math.min(Math.abs(e.x-t.x),Math.abs(e.x+e.width-t.x)))*n+(r=Math.min(Math.abs(e.y-t.y),Math.abs(e.y+e.height-t.y)))*r:Math.pow(e.x+e.width-t.x,2):Math.pow(e.x-t.x,2):Math.pow(t.y-e.y,2):Math.pow(e.y+e.height-t.y,2):0},$e=function(t,e){var n=t[0],r=t[1],i=t[2],o=(t=t[3],e.x);e=e.y,i=[i-n,t-r];return me.exactEquals(i,[0,0])?NaN:(me.normalize(t=[-i[1],i[0]],t),Math.abs(me.dot([o-n,e-r],t)))},Je=function(t,e,n){return t+(e-t)*n},Qe=function(t,e,n){for(var r=Math.min(t.length,e.length),i=new Array(r),o=0;o<r;o++)i[o]=Je(t[o],e[o],n);return i},tn="rgb(95, 149, 255)",en="rgb(0, 0, 0)",nn="rgb(247, 250, 255)",rn="rgb(239, 244, 255)",on="rgb(253, 253, 253)",an="rgb(250, 250, 250)",sn="rgb(224, 224, 224)",un="rgb(234, 234, 234)",cn={version:"0.7.0",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:tn,fill:rn},size:20,color:tn,linkPoints:{size:8,lineWidth:1,fill:nn,stroke:tn}},nodeStateStyles:{active:{fill:nn,stroke:tn,lineWidth:2,shadowColor:tn,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:tn,lineWidth:4,shadowColor:tn,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:nn,stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:an,stroke:sn,lineWidth:1}},edgeLabel:{style:{fill:en,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:sn,lineAppendWidth:2},color:sn},edgeStateStyles:{active:{stroke:tn,lineWidth:1},selected:{stroke:tn,lineWidth:2,shadowColor:tn,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:tn,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:un,lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:en,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:on,lineWidth:1,stroke:sn,r:5,width:20,height:10},size:[20,5],color:sn,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:tn,lineWidth:1,fill:nn},selected:{stroke:tn,lineWidth:2,fill:on,shadowColor:tn,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:on,"text-shape":{fontWeight:500}},inactive:{stroke:sn,fill:on,lineWidth:1},disable:{stroke:un,fill:an,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:"undefined"!=typeof window&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},ln={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},hn=Math.PI,fn=Math.sin,dn=Math.cos,pn=fn(hn/8),gn=dn(hn/8),mn=function(t,e){t=t.getBBox();var n={x:t.minX,y:t.minY},r=(t={x:t.maxX,y:t.maxY},e=(e&&(e=e.getMatrix(),n=Se(n,e=e||[1,0,0,0,1,0,0,0,1]),t=Se(t,e)),n.x),n=n.y,t.x);t=t.y;return{x:e,y:n,minX:e,minY:n,maxX:r,maxY:t,width:r-e,height:t-n}},vn=function(t){var e=t.sourceNode||t.targetNode,n=(n=e.get("group").getMatrix())||[1,0,0,0,1,0,0,0,1],r=e.getKeyShape().getBBox(),i=(e=t.loopCfg||{},e.dist||2*Math.max(r.width,r.height)),o=e.position||cn.defaultLoopPosition,a=[n[6],n[7]],s=[t.startPoint.x,t.startPoint.y],u=[t.endPoint.x,t.endPoint.y],c=r.height/2,l=r.height/2,h=c*pn,f=c*gn,d=l*pn,p=l*gn;if(s[0]===u[0]&&s[1]===u[1]){switch(o){case"top":s=[a[0]-h,a[1]-f],u=[a[0]+d,a[1]-p];break;case"top-right":c=r.height/2,l=r.width/2,s=[a[0]+(h=c*pn),a[1]-(f=c*gn)],u=[a[0]+(p=l*gn),a[1]-(d=l*pn)];break;case"right":c=r.width/2,l=r.width/2,s=[a[0]+(f=c*gn),a[1]-(h=c*pn)],u=[a[0]+(p=l*gn),a[1]+(d=l*pn)];break;case"bottom-right":c=r.width/2,l=r.height/2,s=[a[0]+(f=c*gn),a[1]+(h=c*pn)],u=[a[0]+(d=l*pn),a[1]+(p=l*gn)];break;case"bottom":c=r.height/2,l=r.height/2,s=[a[0]+(h=c*pn),a[1]+(f=c*gn)],u=[a[0]-(d=l*pn),a[1]+(p=l*gn)];break;case"bottom-left":c=r.height/2,l=r.width/2,s=[a[0]-(h=c*pn),a[1]+(f=c*gn)],u=[a[0]-(p=l*gn),a[1]+(d=l*pn)];break;case"left":c=r.width/2,l=r.width/2,s=[a[0]-(f=c*gn),a[1]+(h=c*pn)],u=[a[0]-(p=l*gn),a[1]-(d=l*pn)];break;case"top-left":c=r.width/2,l=r.height/2,s=[a[0]-(f=c*gn),a[1]-(h=c*pn)],u=[a[0]-(d=l*pn),a[1]-(p=l*gn)];break;default:c=r.width/2,l=r.width/2,s=[a[0]-(h=c*pn),a[1]-(f=c*gn)],u=[a[0]+(d=l*pn),a[1]-(p=l*gn)]}!1===e.clockwise&&(n=[s[0],s[1]],s=[u[0],u[1]],u=[n[0],n[1]])}o=[s[0]-a[0],s[1]-a[1]],n=(c+i)/c;var g=(l+i)/l;!1===e.clockwise&&(n=(l+i)/l,g=(c+i)/c),e=me.scale([0,0],o,n),i=[a[0]+e[0],a[1]+e[1]],o=[u[0]-a[0],u[1]-a[1]],n=me.scale([0,0],o,g),e=[a[0]+n[0],a[1]+n[1]];return t.startPoint={x:s[0],y:s[1]},t.endPoint={x:u[0],y:u[1]},t.controlPoints=[{x:i[0],y:i[1]},{x:e[0],y:e[1]}],t},yn=function(t,e,n,r,i){var o=[],a=null==t?void 0:t.getPoint(e);return a?(e<1e-4?o=t.getStartTangent().reverse():.9999<e?o=t.getEndTangent():(t=null==t?void 0:t.getPoint(e+1e-4),o.push([a.x,a.y]),o.push([t.x,t.y])),e=Math.atan2(o[1][1]-o[0][1],o[1][0]-o[0][0]),e<0&&(e+=2*hn),n&&(a.x+=dn(e)*n,a.y+=fn(e)*n),r&&(t=e-hn/2,.5*hn<e&&e<1.5*hn&&(t-=hn),a.x+=dn(t)*r,a.y+=fn(t)*r),o={x:a.x,y:a.y,angle:e},i?(.5*hn<e&&e<1.5*hn&&(e-=hn),k({rotate:e},o)):o):{x:0,y:0,angle:0}},bn=function(t,e){"function"==typeof e&&ze(t,e)},xn=function(t,e){"function"==typeof e&&Ue(t,e)},_n=function(t,e){return e*(ln[t]||1)},wn=function(t,e){var n=0,r=new RegExp("[一-龥]+");return t.split("").forEach((function(t){r.test(t)?n+=e:n+=_n(t,e)})),[n,e]},Sn=function(t,e){return"number"!=typeof e||e<=0||e>=t.length?t:t.substring(0,e)+"..."},En=function(t,e){var n=[],r={},i={},o=(t.forEach((function(t){i[t.id]=t})),t.forEach((function(t,e){var o,a=(0,w.clone)(t),s=(a.itemType="combo",a.children=void 0,(a.parentId===a.id||a.parentId&&!i[a.parentId])&&delete a.parentId,r[a.id]);if(s)return a.children=s.children,(s=r[a.id]=a).parentId?void((o=r[s.parentId])?o.children?o.children.push(a):o.children=[a]:(o={id:s.parentId,children:[s]},r[s.parentId]=o,r[a.id]=a)):void n.push(s);(0,w.isString)(t.parentId)?(o=r[t.parentId])?o.children?o.children.push(a):o.children=[a]:(s={id:t.parentId,children:[a]},r[s.id]=s):n.push(a),r[a.id]=a})),{}),a=((e||[]).forEach((function(t){o[t.id]=t;var e,n=r[t.comboId];n&&(e={id:t.id,comboId:t.comboId},n.children?n.children.push(e):n.children=[e],e.itemType="node",r[t.id]=e)})),0);return n.forEach((function(t){t.depth=a+10,ze(t,(function(t){var e=r[t.id].itemType,n="node"===e?r[t.comboId]:r[t.parentId];t.depth=n&&"node"===e?a+1:a+10,a<t.depth&&(a=t.depth),n=o[t.id];return n&&(n.depth=t.depth),!0}))})),n},Mn=function(t,e,n){var r,i,o,a,s=t,u={root:{children:t}},c=!1,l="root",h=((t||[]).forEach((function(t){c||(t.id===e?("combo"===(r=t).itemType?r.parentId=n:r.comboId=n,c=!0):bn(t,(function(t){var i;return u[t.id]={children:(null==t?void 0:t.children)||[]},s=null==(i=u[t.parentId||t.comboId||"root"])?void 0:i.children,!(t&&(t.removed||e===t.id)&&s&&(l=t.parentId||t.comboId||"root","combo"===(r=t).itemType?r.parentId=n:r.comboId=n,c=!0))})))})),(s=null==(h=u[l])?void 0:h.children)?s.indexOf(r):-1);return-1<h&&s.splice(h,1),c||(r={id:e,itemType:"node",comboId:n},u[e]={children:void 0}),e&&(i=!1,n?(o=0,(t||[]).forEach((function(t){i||bn(t,(function(t){return n!==t.id||(i=!0,t.children?t.children.push(r):t.children=[r],o=t.depth,"node"===r.itemType?r.depth=o+2:r.depth=o+1,!1)}))}))):n&&i||"node"===r.itemType||t.push(r),a=r.depth,bn(r,(function(t){return"node"===t.itemType?a+=2:a+=1,t.depth=a,!0}))),t},An=function(t,e,n){var r={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return t&&0!==t.length?(t.forEach((function(t){t=e.findById(t.id);t&&t.isVisible()&&(t.set("bboxCanvasCache",void 0),(t=t.getCanvasBBox()).x&&r.minX>t.minX&&(r.minX=t.minX),t.y&&r.minY>t.minY&&(r.minY=t.minY),t.x&&r.maxX<t.maxX&&(r.maxX=t.maxX),t.y)&&r.maxY<t.maxY&&(r.maxY=t.maxY)})),r.x=(r.minX+r.maxX)/2,r.y=(r.minY+r.maxY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,Object.keys(r).forEach((function(t){r[t]!==1/0&&r[t]!==-1/0||(r[t]=void 0)})),r):{minX:n=(t=(null==n?void 0:n.getModel())||{}).x,minY:t=t.y,maxX:n,maxY:t,x:n,y:t,width:void 0,height:void 0}},Cn=function(t){var e=(0,w.isNumber)(t.x)||(0,w.isNumber)(t.y)||t.type||t.anchorPoints||t.size;return t.style?e||(0,w.isNumber)(t.style.r)||(0,w.isNumber)(t.style.width)||(0,w.isNumber)(t.style.height)||(0,w.isNumber)(t.style.rx)||(0,w.isNumber)(t.style.ry):e},Tn=function(t){var e={};return Object.keys(t).forEach((function(n){var r,i=t[n];(0,w.isObject)(i)&&!(0,w.isArray)(i)?(r={},Object.keys(i).forEach((function(t){var e=i[t];"img"===t&&!(0,w.isString)(e)||(r[t]=(0,w.clone)(e))})),e[n]=r):e[n]=(0,w.clone)(i)})),e},kn=function(t){var e,n,r=t.animateCfg,i=t.callback;return r?(n=(0,w.clone)(r),r.callback?(e=r.callback,n.callback=function(){i(),e()}):n.callback=i):n={duration:500,callback:i},n};function On(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}function Pn(t,e,n,r,i){var o,a,s;return null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i?(o=Math.PI/180,a=t+n*Math.cos(-r*o),s=t+n*Math.cos(-i*o),[["M",a,e+n*Math.sin(-r*o)],["A",n,n,0,+(180<i-r),0,s,e+n*Math.sin(-i*o)]]):[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]}function In(t,e,n,r){return[t,e,n,r,n,r]}function Nn(t,e,n,r,i,o){return[1/3*t+2/3*n,1/3*e+2/3*r,1/3*i+2/3*n,1/3*o+2/3*r,i,o]}function Dn(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n}function Ln(t,e,n,r,i,o,a,s,u){for(var c=(u=1<(u=null===u?1:u)?1:u<0?0:u)/2,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,d=0;d<12;d++){var p=c*l[d]+c,g=Dn(p,t,n,i,a);p=Dn(p,e,r,o,s);f+=h[d]*Math.sqrt(g*g+p*p)}return c*f}function Rn(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height}function Bn(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:Zn(t,e,n,r),vb:[t,e,n,r].join(" ")}}function jn(t,e,n,r,i,o,a,s){return(0,w.isArray)(t)||(t=[t,e,n,r,i,o,a,s]),e=function(t,e,n,r,i,o,a,s){for(var u,c,l,h=[],f=[[],[]],d=0;d<2;++d){var p,g=0===d?(c=6*t-12*n+6*i,u=-3*t+9*n-9*i+3*a,3*n-3*t):(c=6*e-12*r+6*o,u=-3*e+9*r-9*o+3*s,3*r-3*e);Math.abs(u)<1e-12?Math.abs(c)<1e-12||0<(l=-g/c)&&l<1&&h.push(l):(g=c*c-4*g*u,p=Math.sqrt(g),g<0||(0<(g=(-c+p)/(2*u))&&g<1&&h.push(g),0<(g=(-c-p)/(2*u))&&g<1&&h.push(g)))}for(var m,v=h.length,y=v;v--;)f[0][v]=(m=1-(l=h[v]))*m*m*t+3*m*m*l*n+3*m*l*l*i+l*l*l*a,f[1][v]=m*m*m*e+3*m*m*l*r+3*m*l*l*o+l*l*l*s;return f[0][y]=t,f[1][y]=e,f[0][y+1]=a,f[1][y+1]=s,f[0].length=f[1].length=y+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}}.apply(null,t),Bn(e.min.x,e.min.y,e.max.x-e.min.x,e.max.y-e.min.y)}function Fn(t,e,n,r,i,o,a,s,u){var c=1-u,l=Math.pow(c,3),h=Math.pow(c,2),f=u*u,d=f*u,p=t+2*u*(n-t)+f*(i-2*n+t),g=e+2*u*(r-e)+f*(o-2*r+e),m=n+2*u*(i-n)+f*(a-2*i+n);return{x:l*t+3*h*u*n+3*c*u*u*i+d*a,y:l*e+3*h*u*r+3*c*u*u*o+d*s,m:{x:p,y:g},n:{x:m,y:f=r+2*u*(o-r)+f*(s-2*o+r)},start:{x:c*t+u*n,y:c*e+u*r},end:{x:c*i+u*a,y:c*o+u*s},alpha:90-180*Math.atan2(p-m,g-f)/Math.PI}}On.prototype.formatModes=function(){var t=this.modes;(0,w.each)(t,(function(t){(0,w.each)(t,(function(e,n){(0,w.isString)(e)&&(t[n]={type:e})}))}))},On.prototype.setBehaviors=function(t){var e,n=this.graph,r=(t=this.modes[t],[]);(0,w.each)(t||[],(function(t){var i=M.getBehavior(t.type||t);i&&(e=new i(t))&&(e.bind(n),r.push(e))})),this.currentBehaves=r},On.mergeBehaviors=function(t,e){return(0,w.each)(e,(function(e){t.indexOf(e)<0&&((0,w.isString)(e)&&(e={type:e}),t.push(e))})),t},On.filterBehaviors=function(t,e){var n=[];return t.forEach((function(t){var r="";r=(0,w.isString)(t)?t:t.type;e.indexOf(r)<0&&n.push(t)})),n},On.prototype.setMode=function(t){var e=this.modes,n=this.graph,r=t;e[r]&&(n.emit("beforemodechange",{mode:t}),(0,w.each)(this.currentBehaves,(function(t){t.delegate&&t.delegate.remove(),t.unbind(n)})),this.setBehaviors(r),n.emit("aftermodechange",{mode:t}),this.mode=t)},On.prototype.getMode=function(){return this.mode},On.prototype.manipulateBehaviors=function(t,e,n){var r=this,i=(0,w.isArray)(t)?t:[t];return(0,w.isArray)(e)?(0,w.each)(e,(function(t){r.modes[t]?r.modes[t]=n?On.mergeBehaviors(r.modes[t]||[],i):On.filterBehaviors(r.modes[t]||[],i):n&&(r.modes[t]=i)})):((t=e)||(t=this.mode),this.modes[t]||n&&(this.modes[t]=i),this.modes[t]=n?On.mergeBehaviors(this.modes[t]||[],i):On.filterBehaviors(this.modes[t]||[],i),this.formatModes(),this.setMode(this.mode)),this},On.prototype.updateBehavior=function(t,e,n){(0,w.isString)(t)&&(t={type:t});var r=[];if(n&&n!==this.mode&&"default"!==n){if(!(r=this.modes[n])||!r.length)return this;for(var i=r.length,o=0;o<i;o++)if((a=r[o]).type===t.type||a===t.type)return a===t.type&&(a={type:a}),Object.assign(a,e),r[o]=a,this}else{if(!(r=this.currentBehaves)||!r.length)return this;var a,s=r.length;for(o=0;o<s;o++)if((a=r[o]).type===t.type)return a.updateCfg(e),this}return this},On.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0};var zn=On,Un=(rn="\t\n\v\f\r   ᠎             　\u2028\u2029",new RegExp("([a-z])["+rn+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+rn+"]*,?["+rn+"]*)+)","ig")),Gn=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+rn+"]*,?["+rn+"]*","ig"),Vn=function(t){var e,n;return t?(0,w.isArray)(t)?t:(e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[],String(t).replace(Un,(function(r,i,o){var a=[],s=i.toLowerCase();if(o.replace(Gn,(function(t,e){e&&a.push(+e)})),"m"===s&&2<a.length&&(n.push([i].concat(a.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===a.length&&n.push([i,a[0]]),"r"===s)n.push([i].concat(a));else for(;e[s]<=a.length&&(n.push([i].concat(a.splice(0,e[s]))),e[s]););return t})),n):null},Wn=function(t,e){for(var n=[],r=0,i=t.length;r<i-2*!e;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?o[3]={x:+t[0],y:+t[1]}:i-2===r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},Hn=function(t){if(!(t=Vn(t))||!t.length)return[["M",0,0]];for(var e,n=[],r=0,i=0,o=0,a=0,s=0,u=("M"===t[0][0]&&(o=r=+t[0][1],a=i=+t[0][2],s++,n[0]=["M",r,i]),3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase()),c=void 0,l=void 0,h=s,f=t.length;h<f;h++){if(n.push(c=[]),(e=(l=t[h])[0])!==e.toUpperCase())switch(c[0]=e.toUpperCase(),c[0]){case"A":c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=+l[6]+r,c[7]=+l[7]+i;break;case"V":c[1]=+l[1]+i;break;case"H":c[1]=+l[1]+r;break;case"R":for(var d,p=2,g=(d=[r,i].concat(l.slice(1))).length;p<g;p++)d[p]=+d[p]+r,d[++p]=+d[p]+i;n.pop(),n=n.concat(Wn(d,u));break;case"O":n.pop(),(d=Pn(r,i,l[1],l[2])).push(d[0]),n=n.concat(d);break;case"U":n.pop(),n=n.concat(Pn(r,i,l[1],l[2],l[3])),c=["U"].concat(n[n.length-1].slice(-2));break;case"M":o=+l[1]+r,a=+l[2]+i;break;default:for(p=1,g=l.length;p<g;p++)c[p]=+l[p]+(p%2?r:i)}else if("R"===e)d=[r,i].concat(l.slice(1)),n.pop(),n=n.concat(Wn(d,u)),c=["R"].concat(l.slice(-2));else if("O"===e)n.pop(),(d=Pn(r,i,l[1],l[2])).push(d[0]),n=n.concat(d);else if("U"===e)n.pop(),n=n.concat(Pn(r,i,l[1],l[2],l[3])),c=["U"].concat(n[n.length-1].slice(-2));else for(var m=0,v=l.length;m<v;m++)c[m]=l[m];if("O"!==(e=e.toUpperCase()))switch(c[0]){case"Z":r=+o,i=+a;break;case"H":r=c[1];break;case"V":i=c[1];break;case"M":o=c[c.length-2],a=c[c.length-1];break;default:r=c[c.length-2],i=c[c.length-1]}}return n},Yn=function(t,e,n,r,i,o,a,s,u,c){function l(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}n===r&&(n+=1);var h=120*Math.PI/180,f=Math.PI/180*(+i||0),d=[],p=(c?(x=c[0],_=c[1],y=c[2],b=c[3]):(t=(g=l(t,e,-f)).x,e=g.y,s=(g=l(s,u,-f)).x,u=g.y,t===s&&e===u&&(s+=1,u+=1),1<(p=(g=(t-s)/2)*g/(n*n)+(m=(e-u)/2)*m/(r*r))&&(n*=p=Math.sqrt(p),r*=p),p=n*n,v=r*r,y=(o=(o===a?-1:1)*Math.sqrt(Math.abs((p*v-p*m*m-v*g*g)/(p*m*m+v*g*g))))*n*m/r+(t+s)/2,b=o*-r*g/n+(e+u)/2,x=Math.asin(((e-b)/r).toFixed(9)),_=Math.asin(((u-b)/r).toFixed(9)),x=t<y?Math.PI-x:x,_=s<y?Math.PI-_:_,x<0&&(x=2*Math.PI+x),_<0&&(_=2*Math.PI+_),a&&_<x&&(x-=2*Math.PI),!a&&x<_&&(_-=2*Math.PI)),_-x),g=(Math.abs(p)>h&&(v=_,m=s,o=u,_=x+h*(a&&x<_?1:-1),s=y+n*Math.cos(_),u=b+r*Math.sin(_),d=Yn(s,u,n,r,i,0,a,m,o,[_,v,y,b])),p=_-x,Math.cos(x)),m=(h=Math.sin(x),i=Math.cos(_),a=Math.sin(_),Math.tan(p/4)),v=(o=4/3*n*m,4/3*r*m),y=[t,e],b=[t+o*h,e-v*g],x=[s+o*a,u-v*i],_=[s,u];if(b[0]=2*y[0]-b[0],b[1]=2*y[1]-b[1],c)return[b,x,_].concat(d);for(var w=[],S=0,E=(d=[b,x,_].concat(d).join().split(",")).length;S<E;S++)w[S]=S%2?l(d[S-1],d[S],f).y:l(d[S],d[S+1],f).x;return w},qn=function(t,e){for(var n=Hn(t),r=e&&Hn(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=[],s=[],u="",c="",l=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(Yn.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":i="C"===n||"S"===n?(r=2*e.x-e.bx,2*e.y-e.by):(r=e.x,e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(Nn(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(Nn(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(In(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(In(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(In(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(In(e.x,e.y,e.X,e.Y))}return t},h=function(t,e){if(7<t[e].length){t[e].shift();for(var i=t[e];i.length;)a[e]="A",r&&(s[e]="A"),t.splice(e++,0,["C"].concat(i.splice(0,6)));t.splice(e,1),d=Math.max(n.length,r&&r.length||0)}},f=function(t,e,i,o,a){t&&e&&"M"===t[a][0]&&"M"!==e[a][0]&&(e.splice(a,0,["M",o.x,o.y]),i.bx=0,i.by=0,i.x=t[a][1],i.y=t[a][2],d=Math.max(n.length,r&&r.length||0))},d=Math.max(n.length,r&&r.length||0),p=0;p<d;p++){"C"!==(u=n[p]?n[p][0]:u)&&(a[p]=u,p)&&(c=a[p-1]),n[p]=l(n[p],i,c),"A"!==a[p]&&"C"===u&&(a[p]="C"),h(n,p),r&&("C"!==(u=r[p]?r[p][0]:u)&&(s[p]=u,p)&&(c=s[p-1]),r[p]=l(r[p],o,c),"A"!==s[p]&&"C"===u&&(s[p]="C"),h(r,p)),f(n,r,i,o,p),f(r,n,o,i,p);var g=n[p],m=r&&r[p],v=g.length,y=r&&m.length;i.x=g[v-2],i.y=g[v-1],i.bx=parseFloat(g[v-4])||i.x,i.by=parseFloat(g[v-3])||i.y,o.bx=r&&(parseFloat(m[y-4])||o.x),o.by=r&&(parseFloat(m[y-3])||o.y),o.x=r&&m[y-2],o.y=r&&m[y-1]}return r?[n,r]:n},Xn=/,?([a-z]),?/gi,Kn=function(t){return t.join(",").replace(Xn,"$1")},Zn=function(t,e,n,r,i){return i?[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]]:((i=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]]).parsePathArray=Kn,i)},$n=function(t,e,n){var r=jn(t),i=jn(e);if(r=Bn(r),i=Bn(i),!(Rn(i,r.x,r.y)||Rn(i,r.x2,r.y)||Rn(i,r.x,r.y2)||Rn(i,r.x2,r.y2)||Rn(r,i.x,i.y)||Rn(r,i.x2,i.y)||Rn(r,i.x,i.y2)||Rn(r,i.x2,i.y2)||(r.x<i.x2&&r.x>i.x||i.x<r.x2&&i.x>r.x)&&(r.y<i.y2&&r.y>i.y||i.y<r.y2&&i.y>r.y)))return n?0:[];for(var o=~~(Ln.apply(0,t)/8),a=~~(Ln.apply(0,e)/8),s=[],u=[],c={},l=n?0:[],h=0;h<1+o;h++){var f=Fn.apply(0,t.concat(h/o));s.push({x:f.x,y:f.y,t:h/o})}for(h=0;h<1+a;h++)f=Fn.apply(0,e.concat(h/a)),u.push({x:f.x,y:f.y,t:h/a});for(h=0;h<o;h++)for(var d=0;d<a;d++){var p=s[h],g=s[h+1],m=u[d],v=u[d+1],y=Math.abs(g.x-p.x)<.001?"y":"x",b=Math.abs(v.x-m.x)<.001?"y":"x",x=function(t,e,n,r,i,o,a,s){if(!(Math.max(t,n)<Math.min(i,a)||Math.min(t,n)>Math.max(i,a)||Math.max(e,r)<Math.min(o,s)||Math.min(e,r)>Math.max(o,s))){var u=(t*r-e*n)*(i-a)-(t-n)*(i*s-o*a),c=(t*r-e*n)*(o-s)-(e-r)*(i*s-o*a),l=(t-n)*(o-s)-(e-r)*(i-a);if(l){u=u/l,c=c/l,l=+u.toFixed(2);var h=+c.toFixed(2);if(!(l<+Math.min(t,n).toFixed(2)||l>+Math.max(t,n).toFixed(2)||l<+Math.min(i,a).toFixed(2)||l>+Math.max(i,a).toFixed(2)||h<+Math.min(e,r).toFixed(2)||h>+Math.max(e,r).toFixed(2)||h<+Math.min(o,s).toFixed(2)||h>+Math.max(o,s).toFixed(2)))return{x:u,y:c}}}}(p.x,p.y,g.x,g.y,m.x,m.y,v.x,v.y);x&&c[x.x.toFixed(4)]!==x.y.toFixed(4)&&(c[x.x.toFixed(4)]=x.y.toFixed(4),y=p.t+Math.abs((x[y]-p[y])/(g[y]-p[y]))*(g.t-p.t),g=m.t+Math.abs((x[b]-m[b])/(v[b]-m[b]))*(v.t-m.t),0<=y)&&y<=1&&0<=g&&g<=1&&(n?l+=1:l.push({x:x.x,y:x.y,t1:y,t2:g}))}return l},Jn=function(t,e){var n=t,r=e,i=void 0;n=qn(n),r=qn(r);for(var o,a,s,u,c,l,h,f,d=i?0:[],p=0,g=n.length;p<g;p++){var m=n[p];if("M"===m[0])o=s=m[1],v=u=m[2];else for(var v="C"===m[0]?(o=(h=[o,v].concat(m.slice(1)))[6],h[7]):(h=[o,v,o,v,s,u,s,u],o=s,u),y=0,b=r.length;y<b;y++){var x=r[y];if("M"===x[0])a=c=x[1],_=l=x[2];else{var _="C"===x[0]?(a=(f=[a,_].concat(x.slice(1)))[6],f[7]):(f=[a,_,a,_,c,l,c,l],a=c,l),w=$n(h,f,i);if(i)d+=w;else{for(var S=0,E=w.length;S<E;S++)w[S].segment1=p,w[S].segment2=y,w[S].bez1=h,w[S].bez2=f;d=d.concat(w)}}}}return d};function Qn(t,e){var n=[],r=[];return t.length&&function t(e,i){if(1===e.length)n.push(e[0]),r.push(e[0]);else{for(var o=[],a=0;a<e.length-1;a++)0===a&&n.push(e[0]),a===e.length-2&&r.push(e[a+1]),o[a]=[(1-i)*e[a][0]+i*e[a+1][0],(1-i)*e[a][1]+i*e[a+1][1]];t(o,i)}}(t,e),{left:n,right:r.reverse()}}function tr(t,e,n){if(1===n)return[[].concat(t)];var r=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])r=r.concat(function(t,e,n){t=[[t[1],t[2]]];for(var r=(n=n||2,[]),i=("A"===e[0]?(t.push(e[6]),t.push(e[7])):"C"===e[0]?(t.push([e[1],e[2]]),t.push([e[3],e[4]]),t.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(t.push([e[1],e[2]]),t.push([e[3],e[4]])):t.push([e[1],e[2]]),t),o=1/n,a=0;a<n-1;a++){var s=Qn(i,o/(1-o*a));r.push(s.left),i=s.right}return r.push(i),r.map((function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),3<=t.length&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e.concat(t[t.length-1])}))}(t,e,n));else{var i=[].concat(t);"M"===i[0]&&(i[0]="L");for(var o=0;o<=n-1;o++)r.push(i)}return r}var er=function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,i=n/r,o=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<r-n;a++)t.push(t[0]);return t}for(a=0;a<r;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var u=o.reduce((function(e,r,i){return i===n?e.concat(t[n]):e.concat(tr(t[i],t[i+1],r))}),[]);return u.unshift(t[0]),"Z"!==e[r]&&"z"!==e[r]||u.push("Z"),u},nr=function(t,e){var n;return t.length===e.length&&(n=!0,(0,w.each)(t,(function(t,r){if(t!==e[r])return n=!1})),n)},rr=function(t,e){var n=function(t,e){var n=t.length,r=e.length,i=0;if(0===n||0===r)return null;for(var o=[],a=0;a<=n;a++)o[a]=[],o[a][0]={min:a};for(var s=0;s<=r;s++)o[0][s]={min:s};var u;for(a=1;a<=n;a++){var c=t[a-1];for(s=1;s<=r;s++){var l=e[s-1],h=(i=nr(c,l)?0:1,l=o[a-1][s].min+1,o[a][s-1].min+1),f=o[a-1][s-1].min+i;o[a][s]=(u=null,h<f&&(f=h,u="add"),(h=l)<f&&(f=h,u="del"),{type:u,min:f})}}return o}(t,e),r=t.length,i=e.length,o=[],a=1,s=1;if(n[r][i].min!==r){for(var u=1;u<=r;u++){for(var c=n[u][u].min,l=(s=u,a);l<=i;l++)n[u][l].min<c&&(c=n[u][l].min,s=l);a=s,n[u][a].type&&o.push({index:u-1,type:n[u][a].type})}for(u=o.length-1;0<=u;u--)a=o[u].index,"add"===o[u].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}var h=i-(r=t.length);if(r<i)for(u=0;u<h;u++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t};function ir(t,e,n){for(var r,i=[].concat(t),o=1/(n+1),a=or(e)[0],s=1;s<=n;s++)o*=s,0===(r=Math.floor(t.length*o))?i.unshift([a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]);return i}function or(t){var e=[];switch(t[0]){case"M":case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var ar=function(t,e){if(!(t.length<=1))for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=or(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(0<r)){t[r]=e[r];break}n=ir(n,t[r-1],1)}t[r]=["Q"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(0<r)){t[r]=e[r];break}n=ir(n,t[r-1],2)}t[r]=["C"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"S":if(n.length<2){if(!(0<r)){t[r]=e[r];break}n=ir(n,t[r-1],1)}t[r]=["S"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;default:t[r]=e[r]}return t};function sr(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}sr.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},sr.prototype.stopPropagation=function(){this.propagationStopped=!0},sr.prototype.toString=function(){return"[Event (type="+this.type+")]"},sr.prototype.save=function(){},sr.prototype.restore=function(){};var ur=sr,cr=function(t,e){return(cr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};function lr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}cr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function hr(t,e){e=t.indexOf(e),-1!==e&&t.splice(e,1)}Object.create,Object.create;var fr,dr="undefined"!=typeof window&&void 0!==window.document;function pr(t,e){if(t.isCanvas())return 1;for(var n=e.getParent(),r=!1;n;){if(n===t){r=!0;break}n=n.getParent()}return r}function gr(t){return t.cfg.visible&&t.cfg.capture}function mr(t){var e=fr.call(this)||this,n=(e.destroyed=!1,e.getDefaultCfg());return e.cfg=(0,w.mix)(n,t),e}lr(mr,fr=N),mr.prototype.getDefaultCfg=function(){return{}},mr.prototype.get=function(t){return this.cfg[t]},mr.prototype.set=function(t,e){this.cfg[t]=e},mr.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0};en=mr;var vr=n(34155),yr=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},br=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},xr=function(t){this.version=t,this.type="node",this.name="node",this.os=vr.platform},_r=function(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"},wr=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Sr=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Er=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Mr=3,Ar=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Cr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Tr(t){return t?Or(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Sr:"undefined"!=typeof navigator?Or(navigator.userAgent):void 0!==vr&&vr.version?new xr(vr.version.slice(1)):null}function kr(t){return""!==t&&Ar.reduce((function(e,n){var r=n[0];n=n[1];return e||!!(e=n.exec(t))&&[r,e]}),!1)}function Or(t){var e,n,r=kr(t);return r?(e=r[0],r=r[1],"searchbot"===e?new wr:((r=r[1]&&r[1].split(".").join("_").split("_").slice(0,3))?r.length<Mr&&(r=yr(yr([],r,!0),function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(Mr-r.length),!0)):r=[],r=r.join("."),n=function(t){for(var e=0,n=Cr.length;e<n;e++){var r=Cr[e],i=r[0];if(r[1].exec(t))return i}return null}(t),(t=Er.exec(t))&&t[1]?new _r(e,r,n,t[1]):new br(e,r,n))):null}function Pr(t,e){var n=[],r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=(t=t[8],e[0]),f=e[1],d=e[2],p=e[3],g=e[4],m=e[5],v=e[6],y=e[7];e=e[8];return n[0]=h*r+f*a+d*c,n[1]=h*i+f*s+d*l,n[2]=h*o+f*u+d*t,n[3]=p*r+g*a+m*c,n[4]=p*i+g*s+m*l,n[5]=p*o+g*u+m*t,n[6]=v*r+y*a+e*c,n[7]=v*i+y*s+e*l,n[8]=v*o+y*u+e*t,n}function Ir(t,e){var n=[],r=e[0];e=e[1];return n[0]=t[0]*r+t[3]*e+t[6],n[1]=t[1]*r+t[4]*e+t[7],n}function Nr(t){var e=[],n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=(t=t[8],t*a-s*c),h=-t*o+s*u,f=c*o-a*u,d=n*l+r*h+i*f;return d?(e[0]=l*(d=1/d),e[1]=(-t*r+i*c)*d,e[2]=(s*r-i*a)*d,e[3]=h*d,e[4]=(t*n-i*u)*d,e[5]=(-s*n+i*o)*d,e[6]=f*d,e[7]=(-c*n+r*u)*d,e[8]=(a*n-r*o)*d,e):null}var Dr,Lr=L,Rr="matrix",Br=["zIndex","capture","visible","type"],jr=["repeat"];function Fr(t){var e=Dr.call(this,t)||this,n=(e.attrs={},e.getDefaultAttrs());return(0,w.mix)(n,t.attrs),e.attrs=n,e.initAttrs(n),e.initAnimate(),e}lr(Fr,Dr=en),Fr.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},Fr.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},Fr.prototype.onCanvasChange=function(t){},Fr.prototype.initAttrs=function(t){},Fr.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},Fr.prototype.isGroup=function(){return!1},Fr.prototype.getParent=function(){return this.get("parent")},Fr.prototype.getCanvas=function(){return this.get("canvas")},Fr.prototype.attr=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e[1];if(!r)return this.attrs;if((0,w.isObject)(r)){for(var o in r)this.setAttr(o,r[o]);return this.afterAttrsChange(r),this}return 2===e.length?(this.setAttr(r,i),this.afterAttrsChange(((t={})[r]=i,t)),this):this.attrs[r]},Fr.prototype.isClipped=function(t,e){var n=this.getClip();return n&&!n.isHit(t,e)},Fr.prototype.setAttr=function(t,e){var n=this.attrs[t];n!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,n))},Fr.prototype.onAttrChange=function(t,e,n){"matrix"===t&&this.set("totalMatrix",null)},Fr.prototype.afterAttrsChange=function(t){var e;this.cfg.isClipShape?(e=this.cfg.applyTo)&&e.onCanvasChange("clip"):this.onCanvasChange("attr")},Fr.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},Fr.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},Fr.prototype.setZIndex=function(t){return this.set("zIndex",t),t=this.getParent(),t&&t.sort(),this},Fr.prototype.toFront=function(){var t,e=this.getParent();e&&(e=e.getChildren(),this.get("el"),t=e.indexOf(this),e.splice(t,1),e.push(this),this.onCanvasChange("zIndex"))},Fr.prototype.toBack=function(){var t,e=this.getParent();e&&(e=e.getChildren(),this.get("el"),t=e.indexOf(this),e.splice(t,1),e.unshift(this),this.onCanvasChange("zIndex"))},Fr.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e&&(hr(e.getChildren(),this),e.get("clearing"))||this.onCanvasChange("remove"),t&&this.destroy()},Fr.prototype.resetMatrix=function(){this.attr(Rr,this.getDefaultMatrix()),this.onCanvasChange("matrix")},Fr.prototype.getMatrix=function(){return this.attr(Rr)},Fr.prototype.setMatrix=function(t){this.attr(Rr,t),this.onCanvasChange("matrix")},Fr.prototype.getTotalMatrix=function(){var t,e,n=this.cfg.totalMatrix;return n||(t=this.attr("matrix"),n=(e=this.cfg.parentMatrix)&&t?Pr(e,t):t||e,this.set("totalMatrix",n)),n},Fr.prototype.applyMatrix=function(t){var e=this.attr("matrix"),n=null;n=t&&e?Pr(t,e):e||t;this.set("totalMatrix",n),this.set("parentMatrix",t)},Fr.prototype.getDefaultMatrix=function(){return null},Fr.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?Ir(e,t):t},Fr.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");return e&&(e=Nr(e),e)?Ir(e,t):t},Fr.prototype.setClip=function(t){var e,n=this.getCanvas(),r=null;return t&&(e=this.getShapeBase()[(0,w.upperFirst)(t.type)])&&(r=new e({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:n})),this.set("clipShape",r),this.onCanvasChange("clip"),r},Fr.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},Fr.prototype.clone=function(){var t=this,e=this.attrs,n={};(0,w.each)(e,(function(t,r){(0,w.isArray)(e[r])?n[r]=function(t){for(var e=[],n=0;n<t.length;n++)(0,w.isArray)(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}(e[r]):n[r]=e[r]}));var r=new this.constructor({attrs:n});return(0,w.each)(Br,(function(e){r.set(e,t.get(e))})),r},Fr.prototype.destroy=function(){this.destroyed||(this.attrs={},Dr.prototype.destroy.call(this))},Fr.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},Fr.prototype.animate=function(){for(var t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,g,m,v,y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];(this.get("timeline")||this.get("canvas"))&&(this.set("animating",!0),(t=this.get("timeline"))||(t=this.get("canvas").get("timeline"),this.set("timeline",t)),e=this.get("animations")||[],t.timer||t.initTimer(),f=y[1],n=void 0===(n=y[2])?"easeLinear":n,r=void 0===(r=y[3])?w.noop:r,i=void 0===(i=y[4])?0:i,(0,w.isFunction)(h=y[0])?(o=h,h={}):(0,w.isObject)(h)&&h.onFrame&&(o=h.onFrame,a=h.repeat),(0,w.isObject)(f)?(f=(u=f).duration,n=u.easing||"easeLinear",i=u.delay||0,a=u.repeat||a||!1,r=u.callback||w.noop,s=u.pauseCallback||w.noop,u=u.resumeCallback||w.noop):((0,w.isNumber)(r)&&(i=r,r=null),n=(0,w.isFunction)(n)?(r=n,"easeLinear"):n||"easeLinear"),c={},l=this.attr(),(0,w.each)(h,(function(t,e){-1!==jr.indexOf(e)||(0,w.isEqual)(l[e],t)||(c[e]=t)})),h={fromAttrs:function(t,e){var n,r={},i=e.attrs;for(n in t)r[n]=i[n];return r}(h=c,this),toAttrs:h,duration:f,easing:n,repeat:a,callback:r,pauseCallback:s,resumeCallback:u,delay:i,startTime:t.getTime(),id:(0,w.uniqueId)(),onFrame:o,pathFormatted:!1},0<e.length?(f=e,(d=h).onFrame||(p=d.startTime,g=d.delay,m=d.duration,v=Object.prototype.hasOwnProperty,(0,w.each)(f,(function(t){p+g<t.startTime+t.delay+t.duration&&m>t.delay&&(0,w.each)(d.toAttrs,(function(e,n){v.call(t.toAttrs,n)&&(delete t.toAttrs[n],delete t.fromAttrs[n])}))}))),e=f):t.addAnimator(this),e.push(h),this.set("animations",e),this.set("_pause",{isPaused:!1}))},Fr.prototype.stopAnimate=function(t){var e=this,n=(void 0===t&&(t=!0),this.get("animations"));(0,w.each)(n,(function(n){t&&(n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},Fr.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),n=t.getTime();return(0,w.each)(e,(function(t){t._paused=!0,t._pauseTime=n,t.pauseCallback&&t.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},Fr.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),n=this.get("_pause").pauseTime;return(0,w.each)(e,(function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},Fr.prototype.emitDelegation=function(t,e){for(var n,r=this,i=e.propagationPath,o=(this.getEvents(),"mouseenter"===t?n=e.fromShape:"mouseleave"===t&&(n=e.toShape),this),a=0;a<i.length&&"break"!==function(t){var a=i[t];t=a.get("name");if(t){if((a.isGroup()||a.isCanvas&&a.isCanvas())&&n&&pr(a,n))return"break";(0,w.isArray)(t)?(0,w.each)(t,(function(t){r.emitDelegateEvent(a,t,e)})):o.emitDelegateEvent(a,t,e)}}(a);a++);},Fr.prototype.emitDelegateEvent=function(t,e,n){var r=this.getEvents();e=e+":"+n.type;(r[e]||r["*"])&&(n.name=e,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(e,n))},Fr.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.getMatrix();n=Lr(n,[["t",t,e]]);return this.setMatrix(n),this},Fr.prototype.move=function(t,e){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(t-n,e-r),this},Fr.prototype.moveTo=function(t,e){return this.move(t,e)},Fr.prototype.scale=function(t,e){var n=this.getMatrix();n=Lr(n,[["s",t,e||t]]);return this.setMatrix(n),this},Fr.prototype.rotate=function(t){var e=this.getMatrix();e=Lr(e,[["r",t]]);return this.setMatrix(e),this},Fr.prototype.rotateAtStart=function(t){var e=this.attr(),n=e.x,r=(e=e.y,this.getMatrix());r=Lr(r,[["t",-n,-e],["r",t],["t",n,e]]);return this.setMatrix(r),this},Fr.prototype.rotateAtPoint=function(t,e,n){var r=this.getMatrix();r=Lr(r,[["t",-t,-e],["r",n],["t",t,e]]);return this.setMatrix(r),this};nn=Fr;var zr,Ur={},Gr="_INDEX";function Vr(){return null!==zr&&zr.apply(this,arguments)||this}lr(Vr,zr=nn),Vr.prototype.isCanvas=function(){return!1},Vr.prototype.getBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&0<t.getChildren().length)}));r=0<a.length?((0,w.each)(a,(function(t){t=t.getBBox(),i.push(t.minX,t.maxX),o.push(t.minY,t.maxY)})),t=(0,w.min)(i),e=(0,w.max)(i),n=(0,w.min)(o),(0,w.max)(o)):n=e=t=0;return{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},Vr.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&0<t.getChildren().length)}));r=0<a.length?((0,w.each)(a,(function(t){t=t.getCanvasBBox(),i.push(t.minX,t.maxX),o.push(t.minY,t.maxY)})),t=(0,w.min)(i),e=(0,w.max)(i),n=(0,w.min)(o),(0,w.max)(o)):n=e=t=0;return{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},Vr.prototype.getDefaultCfg=function(){var t=zr.prototype.getDefaultCfg.call(this);return t.children=[],t},Vr.prototype.onAttrChange=function(t,e,n){zr.prototype.onAttrChange.call(this,t,e,n),"matrix"===t&&(e=this.getTotalMatrix(),this._applyChildrenMarix(e))},Vr.prototype.applyMatrix=function(t){var e=this.getTotalMatrix();zr.prototype.applyMatrix.call(this,t),t=this.getTotalMatrix();t!==e&&this._applyChildrenMarix(t)},Vr.prototype._applyChildrenMarix=function(t){var e=this.getChildren();(0,w.each)(e,(function(e){e.applyMatrix(t)}))},Vr.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];(0,w.isObject)(n)?r=n:r.type=n,n=Ur[r.type];return n||(n=(0,w.upperFirst)(r.type),Ur[r.type]=n),n=new(this.getShapeBase()[n])(r),this.add(n),n},Vr.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];return n=(0,w.isFunction)(n)?new n(r||{parent:this}):(r=n||{},new(this.getGroupBase())(r)),this.add(n),n},Vr.prototype.getCanvas=function(){var t=this.isCanvas()?this:this.get("canvas");return t},Vr.prototype.getShape=function(t,e,n){var r,i;return gr(this)?(r=this.getChildren(),this.isCanvas()?i=this._findShape(r,t,e,n):(t=this.invertFromMatrix(t=[t,e,1]),this.isClipped(t[0],t[1])||(i=this._findShape(r,t[0],t[1],n))),i):null},Vr.prototype._findShape=function(t,e,n,r){for(var i=null,o=t.length-1;0<=o;o--){var a=t[o];if(gr(a)&&(a.isGroup()?i=a.getShape(e,n,r):a.isHit(e,n)&&(i=a)),i)break}return i},Vr.prototype.add=function(t){var e,n,r=this.getCanvas(),i=this.getChildren(),o=this.get("timeline"),a=t.getParent();a&&(e=t,(n=void 0===(n=!1)||n)?e.destroy():(e.set("parent",null),e.set("canvas",null)),hr(a.getChildren(),e)),t.set("parent",this),r&&function t(e,n){e.set("canvas",n),e.isGroup()&&(e=e.get("children")).length&&e.forEach((function(e){t(e,n)}))}(t,r),o&&function t(e,n){e.set("timeline",n),e.isGroup()&&(e=e.get("children")).length&&e.forEach((function(e){t(e,n)}))}(t,o),i.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},Vr.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},Vr.prototype.getChildren=function(){return this.get("children")},Vr.prototype.sort=function(){var t,e=this.getChildren();(0,w.each)(e,(function(t,e){return t[Gr]=e,t})),e.sort((t=function(t,e){return t.get("zIndex")-e.get("zIndex")},function(e,n){var r=t(e,n);return 0===r?e[Gr]-n[Gr]:r})),this.onCanvasChange("sort")},Vr.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;0<=e;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},Vr.prototype.destroy=function(){this.get("destroyed")||(this.clear(),zr.prototype.destroy.call(this))},Vr.prototype.getFirst=function(){return this.getChildByIndex(0)},Vr.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},Vr.prototype.getChildByIndex=function(t){return this.getChildren()[t]},Vr.prototype.getCount=function(){return this.getChildren().length},Vr.prototype.contain=function(t){return-1<this.getChildren().indexOf(t)},Vr.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},Vr.prototype.findAll=function(t){var e=[],n=this.getChildren();return(0,w.each)(n,(function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))})),e},Vr.prototype.find=function(t){var e=null,n=this.getChildren();return(0,w.each)(n,(function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1})),e},Vr.prototype.findById=function(t){return this.find((function(e){return e.get("id")===t}))},Vr.prototype.findByClassName=function(t){return this.find((function(e){return e.get("className")===t}))},Vr.prototype.findAllByName=function(t){return this.findAll((function(e){return e.get("name")===t}))};tn=Vr;var Wr,Hr,Yr=0,qr=0,Xr=0,Kr=1e3,Zr=0,$r=0,Jr=0,Qr="object"==typeof performance&&performance.now?performance:Date,ti="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ei(){return $r||(ti(ni),$r=Qr.now()+Jr)}function ni(){$r=0}function ri(){this._call=this._time=this._next=null}function ii(t,e,n){var r=new ri;return r.restart(t,e,n),r}function oi(){$r=(Zr=Qr.now())+Jr,Yr=qr=0;try{ei(),++Yr;for(var t,e=Wr;e;)0<=(t=$r-e._time)&&e._call.call(null,t),e=e._next;--Yr}finally{for(var n,r,i=Wr,o=1/(Yr=0);i;)i=i._call?(o>i._time&&(o=i._time),(n=i)._next):(r=i._next,i._next=null,n?n._next=r:Wr=r);Hr=n,si(o),$r=0}}function ai(){var t=Qr.now(),e=t-Zr;Kr<e&&(Jr-=e,Zr=t)}function si(t){Yr||(qr=qr&&clearTimeout(qr),24<t-$r?(t<1/0&&(qr=setTimeout(oi,t-Qr.now()-Jr)),Xr=Xr&&clearInterval(Xr)):(Xr||(Zr=Qr.now(),Xr=setInterval(ai,Kr)),Yr=1,ti(oi)))}function ui(t,e,n){(t.prototype=e.prototype=n).constructor=t}function ci(t,e){var n,r=Object.create(t.prototype);for(n in e)r[n]=e[n];return r}function li(){}ri.prototype=ii.prototype={constructor:ri,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ei():+n)+(null==e?0:+e),this._next||Hr===this||(Hr?Hr._next=this:Wr=this,Hr=this),this._call=t,this._time=n,si()},stop:function(){this._call&&(this._call=null,this._time=1/0,si())}};sn="\\s*([+-]?\\d+)\\s*",on="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",un="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*";var hi=/^#([0-9a-f]{3,8})$/,fi=new RegExp("^rgb\\("+[sn,sn,sn]+"\\)$"),di=new RegExp("^rgb\\("+[un,un,un]+"\\)$"),pi=new RegExp("^rgba\\("+[sn,sn,sn,on]+"\\)$"),gi=new RegExp("^rgba\\("+[un,un,un,on]+"\\)$"),mi=new RegExp("^hsl\\("+[on,un,un]+"\\)$"),vi=new RegExp("^hsla\\("+[on,un,un,on]+"\\)$"),yi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function bi(){return this.rgb().formatHex()}function xi(){return this.rgb().formatRgb()}function _i(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=hi.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?wi(e):3===n?new Mi(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Si(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Si(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=fi.exec(t))?new Mi(e[1],e[2],e[3],1):(e=di.exec(t))?new Mi(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=pi.exec(t))?Si(e[1],e[2],e[3],e[4]):(e=gi.exec(t))?Si(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=mi.exec(t))?ki(e[1],e[2]/100,e[3]/100,1):(e=vi.exec(t))?ki(e[1],e[2]/100,e[3]/100,e[4]):yi.hasOwnProperty(t)?wi(yi[t]):"transparent"===t?new Mi(NaN,NaN,NaN,0):null}function wi(t){return new Mi(t>>16&255,t>>8&255,255&t,1)}function Si(t,e,n,r){return new Mi(t=r<=0?e=n=NaN:t,e,n,r)}function Ei(t,e,n,r){return 1===arguments.length?(i=(i=t)instanceof li?i:_i(i))?new Mi((i=i.rgb()).r,i.g,i.b,i.opacity):new Mi:new Mi(t,e,n,null==r?1:r);var i}function Mi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Ai(){return"#"+Ti(this.r)+Ti(this.g)+Ti(this.b)}function Ci(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Ti(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ki(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new Pi(t,e,n,r)}function Oi(t){var e,n,r,i,o,a,s,u;return t instanceof Pi?new Pi(t.h,t.s,t.l,t.opacity):(t=t instanceof li?t:_i(t))?t instanceof Pi?t:(e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=NaN,u=((o=Math.max(e,n,r))+i)/2,(s=o-i)?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=0<u&&u<1?0:a,new Pi(a,s,u,t.opacity)):new Pi}function Pi(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ii(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ni(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function Di(t){return function(){return t}}function Li(t,e){return function(n){return t+n*e}}function Ri(t){return 1==(t=+t)?Bi:function(e,n){return n-e?(r=e,i=n,o=t,r=Math.pow(r,o),i=Math.pow(i,o)-r,o=1/o,function(t){return Math.pow(r+t*i,o)}):Di(isNaN(e)?n:e);var r,i,o}}function Bi(t,e){var n=e-t;return n?Li(t,n):Di(isNaN(t)?e:t)}ui(li,_i,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:bi,formatHex:bi,formatHsl:function(){return Oi(this).formatHsl()},formatRgb:xi,toString:xi}),ui(Mi,Ei,ci(li,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Mi(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Mi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ai,formatHex:Ai,formatRgb:Ci,toString:Ci})),ui(Pi,(function(t,e,n,r){return 1===arguments.length?Oi(t):new Pi(t,e,n,null==r?1:r)}),ci(li,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Pi(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Pi(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l;e=n+(n<.5?n:1-n)*e,n=2*n-e;return new Mi(Ii(240<=t?t-240:120+t,n,e),Ii(t,n,e),Ii(t<120?240+t:t-120,n,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ji=function t(e){var n=Ri(e);function r(t,e){var r=n((t=Ei(t)).r,(e=Ei(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Bi(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Fi(t){return function(e){for(var n,r=e.length,i=new Array(r),o=new Array(r),a=new Array(r),s=0;s<r;++s)n=Ei(e[s]),i[s]=n.r||0,o[s]=n.g||0,a[s]=n.b||0;return i=t(i),o=t(o),a=t(a),n.opacity=1,function(t){return n.r=i(t),n.g=o(t),n.b=a(t),n+""}}}function zi(t,e){e=e||[];var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Ui(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Gi(t,e){for(var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a=0;a<r;++a)i[a]=Ki(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(t){for(a=0;a<r;++a)o[a]=i[a](t);return o}}function Vi(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Wi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Hi(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),e=null!==e&&"object"==typeof e?e:{})n in t?r[n]=Ki(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}Fi((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:1<=n?e-(n=1):Math.floor(n*e),i=t[r],o=t[r+1],a=0<r?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Ni((n-r/e)*e,a,i,o,s)}})),Fi((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Ni((n-r/e)*e,i,o,a,s)}}));var Yi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qi=new RegExp(Yi.source,"g");function Xi(t,e){var n,r,i,o,a,s=Yi.lastIndex=qi.lastIndex=0,u=-1,c=[],l=[];for(t+="",e+="";(n=Yi.exec(t))&&(r=qi.exec(e));)(i=r.index)>s&&(i=e.slice(s,i),c[u]?c[u]+=i:c[++u]=i),(n=n[0])===(r=r[0])?c[u]?c[u]+=r:c[++u]=r:(c[++u]=null,l.push({i:u,x:Wi(n,r)})),s=qi.lastIndex;return s<e.length&&(i=e.slice(s),c[u]?c[u]+=i:c[++u]=i),c.length<2?l[0]?(a=l[0].x,function(t){return a(t)+""}):(o=e,function(){return o}):(e=l.length,function(t){for(var n,r=0;r<e;++r)c[(n=l[r]).i]=n.x(t);return c.join("")})}function Ki(t,e){var n=typeof e;return null==e||"boolean"==n?Di(e):("number"==n?Wi:"string"==n?(n=_i(e))?(e=n,ji):Xi:e instanceof _i?ji:e instanceof Date?Vi:Ui(e)?zi:Array.isArray(e)?Gi:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Hi:Wi)(t,e)}function Zi(t){return+t}function $i(t){return t*t}function Ji(t){return t*(2-t)}function Qi(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function to(t){return t*t*t}function eo(t){return--t*t*t+1}function no(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ro=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),io=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),oo=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),ao=Math.PI,so=ao/2;function uo(t){return 1==+t?1:1-Math.cos(t*so)}function co(t){return Math.sin(t*so)}function lo(t){return(1-Math.cos(ao*t))/2}function ho(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function fo(t){return ho(1-+t)}function po(t){return 1-ho(t)}function go(t){return((t*=2)<=1?ho(1-t):2-ho(t-1))/2}function mo(t){return 1-Math.sqrt(1-t*t)}function vo(t){return Math.sqrt(1- --t*t)}function yo(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var bo=4/11,xo=6/11,_o=8/11,wo=.75,So=9/11,Eo=10/11,Mo=.9375,Ao=21/22,Co=63/64,To=1/bo/bo;function ko(t){return 1-Oo(1-t)}function Oo(t){return(t=+t)<bo?To*t*t:t<_o?To*(t-=xo)*t+wo:t<Eo?To*(t-=So)*t+Mo:To*(t-=Ao)*t+Co}function Po(t){return((t*=2)<=1?1-Oo(1-t):Oo(t-1)+1)/2}var Io=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(1.70158),No=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(1.70158),Do=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),Lo=2*Math.PI,Ro=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Lo);function i(t){return e*ho(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Lo)},i.period=function(n){return t(e,n)},i}(1,.3),Bo=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Lo);function i(t){return 1-e*ho(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Lo)},i.period=function(n){return t(e,n)},i}(1,.3),jo=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Lo);function i(t){return((t=2*t-1)<0?e*ho(-t)*Math.sin((r-t)/n):2-e*ho(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Lo)},i.period=function(n){return t(e,n)},i}(1,.3),Fo={},zo=function(t){return["fill","stroke","fillStyle","strokeStyle"].includes(t)},Uo=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},Go=[1,0,0,0,1,0,0,0,1];function Vo(t,e,n){var r,i,o,a,s={},u=e.fromAttrs,c=e.toAttrs;if(!t.destroyed){for(i in c)if(!(0,w.isEqual)(u[i],c[i]))if("path"===i){var l=c[i],h=u[i];l.length>h.length?(l=Vn(c[i]),h=Vn(u[i]),h=rr(h,l),h=ar(h,l),e.fromAttrs.path=h,e.toAttrs.path=l):e.pathFormatted||(l=Vn(c[i]),h=Vn(u[i]),h=ar(h,l),e.fromAttrs.path=h,e.toAttrs.path=l,e.pathFormatted=!0),s[i]=[];for(var f=0;f<l.length;f++){for(var d=l[f],p=h[f],g=[],m=0;m<d.length;m++)(0,w.isNumber)(d[m])&&p&&(0,w.isNumber)(p[m])?(r=Ki(p[m],d[m]),g.push(r(n))):g.push(d[m]);s[i].push(g)}}else"matrix"===i?(o=u[i]||Go,o=(Ui(a=c[i]||Go)?zi:Gi)(o,a)(n),s[i]=o):zo(i)&&Uo(c[i])?s[i]=c[i]:(0,w.isFunction)(c[i])||(r=Ki(u[i],c[i]),s[i]=r(n));t.attr(s)}}function Wo(t,e,n){var r=e.startTime,i=e.delay;if(!(n<r+i||e._paused)){i=e.duration;var o,s=e.easing;s=Fo[s.toLowerCase()]||a[s];if(n=n-r-e.delay,e.repeat)o=s(o=n%i/i);else{if(!((o=n/i)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;o=s(o)}e.onFrame?(r=e.onFrame(o),t.attr(r)):Vo(t,e,o)}return!1}function Ho(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}Ho.prototype.initTimer=function(){var t,e,n,r=this;this.timer=ii((function(i){if(r.current=i,0<r.animators.length){for(var o=r.animators.length-1;0<=o;o--)if((t=r.animators[o]).destroyed)r.removeAnimator(o);else{if(!t.isAnimatePaused())for(var a=(e=t.get("animations")).length-1;0<=a;a--)n=e[a],Wo(t,n,i)&&(e.splice(a,1),n.callback)&&n.callback();0===e.length&&r.removeAnimator(o)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},Ho.prototype.addAnimator=function(t){this.animators.push(t)},Ho.prototype.removeAnimator=function(t){this.animators.splice(t,1)},Ho.prototype.isAnimating=function(){return!!this.animators.length},Ho.prototype.stop=function(){this.timer&&this.timer.stop()},Ho.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach((function(e){e.stopAnimate(t)})),this.animators=[],this.canvas.draw()},Ho.prototype.getTime=function(){return this.current};var Yo=Ho,qo=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Xo(t,e,n){n.name=e,n.target=t,n.currentTarget=t,(n.delegateTarget=t).emit(e,n)}function Ko(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var n=t.type;e._triggerEvent(n,t)},this._onDocumentMove=function(t){var n;e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)&&(n=e._getPointInfo(t),e.dragging)&&e._emitEvent("drag",t,n,e.draggingShape)},this._onDocumentMouseUp=function(t){var n;e.canvas.get("el")!==t.target&&e.dragging&&(n=e._getPointInfo(t),e.draggingShape&&e._emitEvent("drop",t,n,null),e._emitEvent("dragend",t,n,e.draggingShape),e._afterDrag(e.draggingShape,n,t))},this.canvas=t.canvas}Ko.prototype.init=function(){this._bindEvents()},Ko.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");(0,w.each)(qo,(function(n){e.addEventListener(n,t._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},Ko.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");(0,w.each)(qo,(function(n){e.removeEventListener(n,t._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},Ko.prototype._getEventObj=function(t,e,n,r,i,o){return t=new ur(t,e),t.fromShape=i,t.toShape=o,t.x=n.x,t.y=n.y,t.clientX=n.clientX,t.clientY=n.clientY,t.propagationPath.push(r),t},Ko.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},Ko.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t);e=e.getPointByEvent(t);return{x:e.x,y:e.y,clientX:n.x,clientY:n.y}},Ko.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),r=this._getShape(n,e),i=this["_on"+t],o=!1;i?i.call(this,n,r,e):(i=this.currentShape,"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,n,null,null,r),r&&this._emitEvent(t,e,n,r,null,r),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(o=!0,i&&this._emitEvent(t,e,n,i,i,null),this._emitEvent(t,e,n,null,i,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,r,null,null)),o||(this.currentShape=r),r&&!r.get("destroyed")&&((i=this.canvas).get("el").style.cursor=r.attr("cursor")||i.get("cursor"))},Ko.prototype._onmousedown=function(t,e,n){0===n.button&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},Ko.prototype._emitMouseoverEvents=function(t,e,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",t,e,n,n,r),this._emitEvent("mouseleave",t,e,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r)&&(this._emitEvent("mouseover",t,e,r,n,r),this._emitEvent("mouseenter",t,e,r,n,r))},Ko.prototype._emitDragoverEvents=function(t,e,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,r),this._emitEvent("dragenter",t,e,r,n,r)),i||this._emitEvent("dragover",t,e,r)):n&&this._emitEvent("dragleave",t,e,n,n,r),i&&this._emitEvent("dragover",t,e,r)},Ko.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(e,n);r!==t&&this._emitMouseoverEvents(n,e,t,r),this.currentShape=r},Ko.prototype._onmouseup=function(t,e,n){var r;0===n.button&&(r=this.draggingShape,this.dragging?(r&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,r),this._afterDrag(r,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null))},Ko.prototype._ondragover=function(t,e,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,t,r,e,!0)},Ko.prototype._onmousemove=function(t,e,n){var r,i,o,a,s=this.canvas,u=this.currentShape,c=this.draggingShape;this.dragging?(c&&this._emitDragoverEvents(n,t,u,e,!1),this._emitEvent("drag",n,t,c)):(a=this.mousedownPoint)&&(r=this.mousedownShape,i=n.timeStamp-this.mousedownTimeStamp,o=a.clientX-t.clientX,a=a.clientY-t.clientY,120<i||40<o*o+a*a)?r&&r.get("draggable")?((c=this.mousedownShape).set("capture",!1),this.draggingShape=c,this.dragging=!0,this._emitEvent("dragstart",n,t,c),this.mousedownShape=null,this.mousedownPoint=null):!r&&s.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,u,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,u,e),this._emitEvent("mousemove",n,t,e))},Ko.prototype._emitEvent=function(t,e,n,r,i,o){var a,s,u,c,l,h=this._getEventObj(t,e,n,r,i,o);if(r){Xo(h.shape=r,t,h);for(var f=r.getParent();f;)f.emitDelegation(t,h),h.propagationStopped||(a=f,s=t,l=c=void 0,(u=h).bubbles&&(c=void 0,l=!1,"mouseenter"===s?(c=u.fromShape,l=!0):"mouseleave"===s&&(l=!0,c=u.toShape),a.isCanvas()&&l||(c&&pr(a,c)?u.bubbles=!1:(u.name=s,u.currentTarget=a,(u.delegateTarget=a).emit(s,u))))),h.propagationPath.push(f),f=f.getParent()}else Xo(this.canvas,t,h)},Ko.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null};var Zo,$o=Ko,Jo=(an=Tr(),an&&"firefox"===an.name);function Qo(t){return t=Zo.call(this,t)||this,t.initContainer(),t.initDom(),t.initEvents(),t.initTimeline(),t}lr(Qo,Zo=tn),Qo.prototype.getDefaultCfg=function(){var t=Zo.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},Qo.prototype.initContainer=function(){var t=this.get("container");(0,w.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},Qo.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},Qo.prototype.initEvents=function(){var t=new $o({canvas:this});t.init(),this.set("eventController",t)},Qo.prototype.initTimeline=function(){var t=new Yo(this);this.set("timeline",t)},Qo.prototype.setDOMSize=function(t,e){var n=this.get("el");dr&&(n.style.width=t+"px",n.style.height=e+"px")},Qo.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},Qo.prototype.getRenderer=function(){return this.get("renderer")},Qo.prototype.getCursor=function(){return this.get("cursor")},Qo.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");dr&&e&&(e.style.cursor=t)},Qo.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(Jo&&!(0,w.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,w.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}t=this.getClientByEvent(t);var e=t.x;t=t.y;return this.getPointByClient(e,t)},Qo.prototype.getClientByEvent=function(t){var e=t;return{x:(e=t.touches?("touchend"===t.type?t.changedTouches:t.touches)[0]:e).clientX,y:e.clientY}},Qo.prototype.getPointByClient=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t-n.left,y:e-n.top}},Qo.prototype.getClientByPoint=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t+n.left,y:e+n.top}},Qo.prototype.draw=function(){},Qo.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},Qo.prototype.clearEvents=function(){this.get("eventController").destroy()},Qo.prototype.isCanvas=function(){return!0},Qo.prototype.getParent=function(){return null},Qo.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),Zo.prototype.destroy.call(this))};var ta;rn=Qo;function ea(){return null!==ta&&ta.apply(this,arguments)||this}lr(ea,ta=tn),ea.prototype.isGroup=function(){return!0},ea.prototype.isEntityGroup=function(){return!1},ea.prototype.clone=function(){for(var t=ta.prototype.clone.call(this),e=this.getChildren(),n=0;n<e.length;n++){var r=e[n];t.add(r.clone())}return t};var na;en=ea;function ra(t){return na.call(this,t)||this}lr(ra,na=nn),ra.prototype._isInBBox=function(t,e){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=e&&n.maxY>=e},ra.prototype.afterAttrsChange=function(t){na.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},ra.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},ra.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},ra.prototype.applyMatrix=function(t){na.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},ra.prototype.calculateCanvasBBox=function(){var t,e,n,r=this.getBBox(),i=this.getTotalMatrix(),o=r.minX,a=r.minY,s=r.maxX,u=r.maxY;i&&(e=Ir(i,[r.minX,r.minY]),t=Ir(i,[r.maxX,r.minY]),n=Ir(i,[r.minX,r.maxY]),i=Ir(i,[r.maxX,r.maxY]),o=Math.min(e[0],t[0],n[0],i[0]),s=Math.max(e[0],t[0],n[0],i[0]),a=Math.min(e[1],t[1],n[1],i[1]),u=Math.max(e[1],t[1],n[1],i[1])),r=this.attrs;return r.shadowColor&&(e=s+(t=void 0===(e=r.shadowBlur)?0:e)+(i=void 0===(n=r.shadowOffsetX)?0:n),n=a-t+(r=void 0===(n=r.shadowOffsetY)?0:n),r=u+t+r,o=Math.min(o,o-t+i),s=Math.max(s,e),a=Math.min(a,n),u=Math.max(u,r)),{x:o,y:a,minX:o,minY:a,maxX:s,maxY:u,width:s-o,height:u-a}},ra.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},ra.prototype.isClipShape=function(){return this.get("isClipShape")},ra.prototype.isInShape=function(t,e){return!1},ra.prototype.isOnlyHitBox=function(){return!1},ra.prototype.isHit=function(t,e){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=(e=(t=this.invertFromMatrix([t,e,1]))[0],t=t[1],this._isInBBox(e,t));if(this.isOnlyHitBox())return i;if(i&&!this.isClipped(e,t)){if(this.isInShape(e,t))return!0;if(n&&n.isHit(e,t))return!0;if(r&&r.isHit(e,t))return!0}return!1};sn=ra;var ia=new Map;function oa(t,e){ia.set(t,e)}function aa(t){return ia.get(t)}function sa(t){return t=t.attr(),{x:t.x,y:t.y,width:t.width,height:t.height}}function ua(t){t=t.attr();var e=t.x,n=t.y;t=t.r;return{x:e-t,y:n-t,width:2*t,height:2*t}}function ca(t){return Math.min.apply(null,t)}function la(t){return Math.max.apply(null,t)}function ha(t,e,n,r){return t-=n,n=e-r,Math.sqrt(t*t+n*n)}function fa(t,e){return Math.abs(t-e)<.001}function da(t,e){var n=ca(t),r=ca(e);return{x:n,y:r,width:la(t)-n,height:la(e)-r}}function pa(t){return(t+2*Math.PI)%(2*Math.PI)}var ga={box:function(t,e,n,r){return da([t,n],[e,r])},length:ha,pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,o){var a=(n-t)*(i-t)+(r-e)*(o-e);return a<0?ha(t,e,i,o):(n-t)*(n-t)+(r-e)*(r-e)<a?ha(n,r,i,o):this.pointToLine(t,e,n,r,i,o)},pointToLine:function(t,e,n,r,i,o){return n=[n-t,r-e],me.exactEquals(n,[0,0])?Math.sqrt((i-t)*(i-t)+(o-e)*(o-e)):(me.normalize(r=[-n[1],n[0]],r),Math.abs(me.dot([i-t,o-e],r)))},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}};function ma(t,e,n,r,i,o){for(var a,s=1/0,u=[n,r],c=20,l=1/(c=o&&200<o?o/10:c),h=l/10,f=0;f<=c;f++){var d=f*l,p=[i.apply(null,t.concat([d])),i.apply(null,e.concat([d]))];(v=ha(u[0],u[1],p[0],p[1]))<s&&(a=d,s=v)}if(0===a)return{x:t[0],y:e[0]};if(1===a)return{x:t[(n=t.length)-1],y:e[n-1]};for(s=1/0,f=0;f<32&&!(h<1e-4);f++){var g=a-h,m=a+h,v=(p=[i.apply(null,t.concat([g])),i.apply(null,e.concat([g]))],ha(u[0],u[1],p[0],p[1]));0<=g&&v<s?(a=g,s=v):(g=[i.apply(null,t.concat([m])),i.apply(null,e.concat([m]))],g=ha(u[0],u[1],g[0],g[1]),m<=1&&g<s?(a=m,s=g):h*=.5)}return{x:i.apply(null,t.concat([a])),y:i.apply(null,e.concat([a]))}}function va(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function ya(t,e,n){return n=t+n-2*e,fa(n,0)?[.5]:(t=(t-e)/n)<=1&&0<=t?[t]:[]}function ba(t,e,n,r){return 2*(1-r)*(e-t)+2*r*(n-e)}function xa(t,e,n,r,i,o,a){var s=va(t,n,i,a),u=va(e,r,o,a),c=ga.pointAt(t,e,n,r,a);n=ga.pointAt(n,r,i,o,a);return[[t,e,c.x,c.y,s,u],[s,u,n.x,n.y,i,o]]}function _a(t,e,n,r,i,o,a){return 0===a?(ha(t,e,n,r)+ha(n,r,i,o)+ha(t,e,i,o))/2:(e=(t=xa(t,e,n,r,i,o,.5))[0],n=t[1],e.push(a-1),n.push(a-1),_a.apply(null,e)+_a.apply(null,n))}var wa={box:function(t,e,n,r,i,o){var a=ya(t,n,i)[0],s=ya(e,r,o)[0],u=[t,i],c=[e,o];return void 0!==a&&u.push(va(t,n,i,a)),void 0!==s&&c.push(va(e,r,o,s)),da(u,c)},length:function(t,e,n,r,i,o){return _a(t,e,n,r,i,o,3)},nearestPoint:function(t,e,n,r,i,o,a,s){return ma([t,n,i],[e,r,o],a,s,va)},pointDistance:function(t,e,n,r,i,o,a,s){return t=this.nearestPoint(t,e,n,r,i,o,a,s),ha(t.x,t.y,a,s)},interpolationAt:va,pointAt:function(t,e,n,r,i,o,a){return{x:va(t,n,i,a),y:va(e,r,o,a)}},divide:xa,tangentAngle:function(t,e,n,r,i,o,a){return t=ba(t,n,i,a),n=ba(e,r,o,a),pa(Math.atan2(n,t))}};function Sa(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function Ea(t,e,n,r,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(n-e)+i*i*(r-n))}function Ma(t,e,n,r){var i,o;r=-3*t+9*e-9*n+3*r,n=6*t-12*e+6*n,e=3*e-3*t,t=[];return fa(r,0)?fa(n,0)||0<=(i=-e/n)&&i<=1&&t.push(i):fa(e=n*n-4*r*e,0)?t.push(-n/(2*r)):0<e&&(o=(-n-(e=Math.sqrt(e)))/(2*r),0<=(i=(-n+e)/(2*r))&&i<=1&&t.push(i),0<=o)&&o<=1&&t.push(o),t}function Aa(t,e,n,r,i,o,a,s,u){var c=Sa(t,n,i,a,u),l=Sa(e,r,o,s,u),h=ga.pointAt(t,e,n,r,u);n=ga.pointAt(n,r,i,o,u),r=ga.pointAt(i,o,a,s,u),i=ga.pointAt(h.x,h.y,n.x,n.y,u),o=ga.pointAt(n.x,n.y,r.x,r.y,u);return[[t,e,h.x,h.y,i.x,i.y,c,l],[c,l,o.x,o.y,r.x,r.y,a,s]]}function Ca(t,e,n,r,i,o,a,s,u){if(0===u){for(var c=[t,n,i,a],l=[e,r,o,s],h=0,f=c.length,d=0;d<f;d++)h+=ha(c[d],l[d],c[(d+1)%f],l[(d+1)%f]);return h/2}return t=Aa(t,e,n,r,i,o,a,s,.5),e=t[0],n=t[1],e.push(u-1),n.push(u-1),Ca.apply(null,e)+Ca.apply(null,n)}var Ta={extrema:Ma,box:function(t,e,n,r,i,o,a,s){for(var u=[t,a],c=[e,s],l=Ma(t,n,i,a),h=Ma(e,r,o,s),f=0;f<l.length;f++)u.push(Sa(t,n,i,a,l[f]));for(f=0;f<h.length;f++)c.push(Sa(e,r,o,s,h[f]));return da(u,c)},length:function(t,e,n,r,i,o,a,s){return Ca(t,e,n,r,i,o,a,s,3)},nearestPoint:function(t,e,n,r,i,o,a,s,u,c,l){return ma([t,n,i,a],[e,r,o,s],u,c,Sa,l)},pointDistance:function(t,e,n,r,i,o,a,s,u,c,l){return t=this.nearestPoint(t,e,n,r,i,o,a,s,u,c,l),ha(t.x,t.y,u,c)},interpolationAt:Sa,pointAt:function(t,e,n,r,i,o,a,s,u){return{x:Sa(t,n,i,a,u),y:Sa(e,r,o,s,u)}},divide:Aa,tangentAngle:function(t,e,n,r,i,o,a,s,u){return t=Ea(t,n,i,a,u),n=Ea(e,r,o,s,u),pa(Math.atan2(n,t))}};function ka(t,e){return t=Math.abs(t),0<e?t:-1*t}var Oa=function(t,e,n,r,i,o){var a=n,s=r;if(0===a||0===s)return{x:t,y:e};n=i-t,r=o-e;for(var u=Math.abs(n),c=Math.abs(r),l=a*a,h=s*s,f=Math.PI/4,d=0;d<4;d++){var p=a*Math.cos(f),g=s*Math.sin(f),m=(l-h)*Math.pow(Math.cos(f),3)/a,v=(h-l)*Math.pow(Math.sin(f),3)/s,y=p-m,b=g-v,x=(m=u-m,v=c-v,Math.hypot(b,y)),_=Math.hypot(v,m);f+=x*Math.asin((y*v-b*m)/(x*_))/Math.sqrt(l+h-p*p-g*g),f=Math.min(Math.PI/2,Math.max(0,f))}return{x:t+ka(p,n),y:e+ka(g,r)}};function Pa(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function Ia(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}function Na(t,e,n){return{x:t*Math.cos(n),y:e*Math.sin(n)}}function Da(t,e,n){var r=Math.cos(n);n=Math.sin(n);return[t*r-e*n,t*n+e*r]}var La={box:function(t,e,n,r,i,o,a){for(var s=Math.atan(-r/n*Math.tan(i)),u=1/0,c=-1/0,l=[o,a],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var f=s+h;o<a?o<f&&f<a&&l.push(f):a<f&&f<o&&l.push(f)}for(h=0;h<l.length;h++){var d=Pa(t,0,n,r,i,l[h]);d<u&&(u=d),c<d&&(c=d)}var p=Math.atan(r/(n*Math.tan(i))),g=1/0,m=-1/0,v=[o,a];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var y=p+h;o<a?o<y&&y<a&&v.push(y):a<y&&y<o&&v.push(y)}for(h=0;h<v.length;h++){var b=Ia(0,e,n,r,i,v[h]);b<g&&(g=b),m<b&&(m=b)}return{x:u,y:g,width:c-u,height:m-g}},length:function(t,e,n,r,i,o,a){},nearestPoint:function(t,e,n,r,i,o,a,s,u){s=Da(s-t,u-e,-i),u=s[0],s=s[1],u=Oa(0,0,n,r,u,s);var c=(s=u.x,c=u.y,(Math.atan2(c*n,s*r)+2*Math.PI)%(2*Math.PI));c<o?u=Na(n,r,o):a<c&&(u=Na(n,r,a)),s=Da(u.x,u.y,i);return{x:s[0]+t,y:s[1]+e}},pointDistance:function(t,e,n,r,i,o,a,s,u){return t=this.nearestPoint(t,e,n,r,s,u),ha(t.x,t.y,s,u)},pointAt:function(t,e,n,r,i,o,a,s){return a=(a-o)*s+o,{x:Pa(t,0,n,r,i,a),y:Ia(0,e,n,r,i,a)}},tangentAngle:function(t,e,n,r,i,o,a,s){var u;a=(a-o)*s+o,s=r,o=i,u=a,s=-1*n*Math.cos(o)*Math.sin(u)-s*Math.sin(o)*Math.cos(u),o=r,u=i,r=a,i=-1*n*Math.sin(u)*Math.sin(r)+o*Math.cos(u)*Math.cos(r);return pa(Math.atan2(i,s))}};function Ra(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=ha(r[0],r[1],i[0],i[1])}return e}var Ba=Ra;function ja(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function Fa(t,e){var n=t.get("startArrowShape");t=t.get("endArrowShape");return n&&(e=ja(e,n.getCanvasBBox())),t?ja(e,t.getCanvasBBox()):e}var za=null;function Ua(){var t;return za||((t=document.createElement("canvas")).width=1,t.height=1,za=t.getContext("2d")),za}function Ga(t,e,n){var r=1;return 1<(r=(0,w.isString)(t)?t.split("\n").length:r)?(t=e)*r+(n?n-t:.14*t)*(r-1):e}function Va(t){var e=t.fontSize,n=t.fontFamily,r=t.fontWeight;return[t.fontStyle,t.fontVariant,r,e+"px",n].join(" ").trim()}var Wa=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,Ha=/[^\s\,]+/gi,Ya=function(t){var e=t||[];return(0,w.isArray)(e)?e:(0,w.isString)(e)?(e=e.match(Wa),(0,w.each)(e,(function(t,n){var r;1<(t=t.match(Ha))[0].length&&(r=t[0].charAt(0),t.splice(1,0,t[0].substr(1)),t[0]=r),(0,w.each)(t,(function(e,n){isNaN(e)||(t[n]=+e)})),e[n]=t})),e):void 0},qa=function(t,e,n){void 0===n&&(n=[[0,0],[1,1]]);e=!!(e=void 0!==e&&e);for(var r=[],i=0,o=t.length;i<o;i+=2)r.push([t[i],t[i+1]]);var a,s,u,c=function(t,e,n,r){var i,o=[],a=!!r;if(a){l=r[0],h=r[1];for(var s=0,u=t.length;s<u;s+=1)var c=t[s],l=me.min([0,0],l,c),h=me.max([0,0],h,c)}s=0;for(var f=t.length;s<f;s+=1){var d,p,g,m,v,y,b,x;c=t[s];0!==s||n?s!==f-1||n?(d=t[[s?s-1:f-1,s-1][n?0:1]],p=t[n?(s+1)%f:s+1],y=me.sub(y=[0,0],p,d),y=me.scale(y,y,e),0!==(v=(g=me.distance(c,d))+(m=me.distance(c,p)))&&(g/=v,m/=v),v=me.scale([0,0],y,-g),y=me.scale([0,0],y,m),b=me.add([0,0],c,v),x=me.add([0,0],c,y),x=me.min([0,0],x,me.max([0,0],p,c)),x=me.max([0,0],x,me.min([0,0],p,c)),v=me.sub([0,0],x,c),v=me.scale([0,0],v,-g/m),b=me.add([0,0],c,v),b=me.min([0,0],b,me.max([0,0],d,c)),b=me.max([0,0],b,me.min([0,0],d,c)),y=me.sub([0,0],c,b),y=me.scale([0,0],y,m/g),x=me.add([0,0],c,y),a&&(b=me.max([0,0],b,l),b=me.min([0,0],b,h),x=me.max([0,0],x,l),x=me.min([0,0],x,h)),o.push(i),o.push(b),i=x):(b=c,o.push(i),o.push(b)):i=c}return n&&o.push(o.shift()),o}(r,.4,e,n),l=r.length,h=[];for(i=0;i<l-1;i+=1)a=c[2*i],s=c[2*i+1],h.push(["C",a[0],a[1],s[0],s[1],(u=r[i+1])[0],u[1]]);return e&&(a=c[l],s=c[l+1],h.push(["C",a[0],a[1],s[0],s[1],(u=r[0])[0],u[1]])),h},Xa=(un="\t\n\v\f\r   ᠎             　\u2028\u2029",new RegExp("([a-z])["+un+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+un+"]*,?["+un+"]*)+)","ig")),Ka=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+un+"]*,?["+un+"]*","ig");function Za(t){var e,n;return t?(0,w.isArray)(t)?t:(e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[],String(t).replace(Xa,(function(t,r,i){var o=[],a=r.toLowerCase();if(i.replace(Ka,(function(t,e){e&&o.push(+e)})),"m"===a&&2<o.length&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;e[a]<=o.length&&(n.push([r].concat(o.splice(0,e[a]))),e[a]););return""})),n):null}var $a=/[a-z]/;function Ja(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function Qa(t){var e=Za(t);if(!e||!e.length)return[["M",0,0]];for(var n=!1,r=0;r<e.length;r++){var i=e[r][0];if($a.test(i)||0<=["V","H","T","S"].indexOf(i)){n=!0;break}}if(!n)return e;var o=[],a=0,s=0,u=0,c=0,l=(t=0,e[0]);"M"!==l[0]&&"m"!==l[0]||(u=a=+l[1],c=s=+l[2],t++,o[0]=["M",a,s]);r=t;for(var h=e.length;r<h;r++){var f=e[r],d=o[r-1],p=[],g=(i=f[0]).toUpperCase();if(i!==g)switch(p[0]=g){case"A":p[1]=f[1],p[2]=f[2],p[3]=f[3],p[4]=f[4],p[5]=f[5],p[6]=+f[6]+a,p[7]=+f[7]+s;break;case"V":p[1]=+f[1]+s;break;case"H":p[1]=+f[1]+a;break;case"M":u=+f[1]+a,c=+f[2]+s,p[1]=u,p[2]=c;break;default:for(var m=1,v=f.length;m<v;m++)p[m]=+f[m]+(m%2?a:s)}else p=e[r];switch(g){case"Z":a=+u,s=+c;break;case"H":p=["L",a=p[1],s];break;case"V":p=["L",a,s=p[1]];break;case"T":a=p[1],s=p[2];var y=Ja([d[1],d[2]],[d[3],d[4]]);p=["Q",y[0],y[1],a,s];break;case"S":a=p[p.length-2],s=p[p.length-1];y=d.length;var b=Ja([d[y-4],d[y-3]],[d[y-2],d[y-1]]);p=["C",b[0],b[1],p[1],p[2],a,s];break;case"M":u=p[p.length-2],c=p[p.length-1];break;default:a=p[p.length-2],s=p[p.length-1]}o.push(p)}return o}function ts(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function es(t,e){return ts(t)*ts(e)?(t[0]*e[0]+t[1]*e[1])/(ts(t)*ts(e)):1}function ns(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(es(t,e))}function rs(t,e){return t[0]===e[0]&&t[1]===e[1]}function is(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function os(t){for(var e,n,r,i,o,a,s,u,c,l,h,f,d,p,g=[],m=null,v=null,y=null,b=0,x=(t=Ya(t)).length,_=0;_<x;_++){var S=t[_],E=(v=t[_+1],S[0]),M={command:E,prePoint:m,params:S,startTangent:null,endTangent:null};switch(E){case"M":y=[S[1],S[2]],b=_;break;case"A":e=m,f=d=h=p=c=u=A=d=A=f=h=l=c=u=s=a=o=i=r=void 0,r=(n=S)[1],i=n[2],o=(0,w.mod)((0,w.toRadian)(n[3]),2*Math.PI),a=n[4],s=n[5],u=e[0],c=e[1],l=n[6],n=n[7],h=Math.cos(o)*(u-l)/2+Math.sin(o)*(c-n)/2,f=-1*Math.sin(o)*(u-l)/2+Math.cos(o)*(c-n)/2,1<(A=h*h/(r*r)+f*f/(i*i))&&(r*=Math.sqrt(A),i*=Math.sqrt(A)),A=(A=r*r*(f*f)+i*i*(h*h))?Math.sqrt((r*r*(i*i)-A)/A):1,a===s&&(A*=-1),isNaN(A)&&(A=0),d=i?A*r*f/i:0,A=r?A*-i*h/r:0,u=(u+l)/2+Math.cos(o)*d-Math.sin(o)*A,c=(c+n)/2+Math.sin(o)*d+Math.cos(o)*A,p=[(h-d)/r,(f-A)/i],h=[(-1*h-d)/r,(-1*f-A)/i],d=ns([1,0],p),f=ns(p,h),es(p,h)<=-1&&(f=Math.PI),1<=es(p,h)&&(f=0),0===s&&0<f&&(f-=2*Math.PI),1===s&&f<0&&(f+=2*Math.PI);var A={cx:u,cy:c,rx:rs(e,[l,n])?0:r,ry:rs(e,[l,n])?0:i,startAngle:d,endAngle:d+f,xRotation:o,arcFlag:a,sweepFlag:s};M.arcParams=A}"Z"===E?(m=y,v=t[b+1]):(F=S.length,m=[S[F-2],S[F-1]]),v&&"Z"===v[0]&&(v=t[b],g[b])&&(g[b].prePoint=m),M.currentPoint=m,g[b]&&rs(m,g[b].currentPoint)&&(g[b].prePoint=M.prePoint);var C,T,k,O,P,I,N,D,L,R,B,j,F=v?[v[v.length-2],v[v.length-1]]:null,z=(M.nextPoint=F,M.prePoint);["L","H","V"].includes(E)?(M.startTangent=[z[0]-m[0],z[1]-m[1]],M.endTangent=[m[0]-z[0],m[1]-z[1]]):"Q"===E?(C=[S[1],S[2]],M.startTangent=[z[0]-C[0],z[1]-C[1]],M.endTangent=[m[0]-C[0],m[1]-C[1]]):"T"===E?(C=is((T=g[_-1]).currentPoint,z),"Q"===T.command?(M.command="Q",M.startTangent=[z[0]-C[0],z[1]-C[1]],M.endTangent=[m[0]-C[0],m[1]-C[1]]):(M.command="TL",M.startTangent=[z[0]-m[0],z[1]-m[1]],M.endTangent=[m[0]-z[0],m[1]-z[1]])):"C"===E?(k=[S[1],S[2]],O=[S[3],S[4]],M.startTangent=[z[0]-k[0],z[1]-k[1]],M.endTangent=[m[0]-O[0],m[1]-O[1]],0===M.startTangent[0]&&0===M.startTangent[1]&&(M.startTangent=[k[0]-O[0],k[1]-O[1]]),0===M.endTangent[0]&&0===M.endTangent[1]&&(M.endTangent=[O[0]-k[0],O[1]-k[1]])):"S"===E?(k=is((T=g[_-1]).currentPoint,z),O=[S[1],S[2]],"C"===T.command?(M.command="C",M.startTangent=[z[0]-k[0],z[1]-k[1]]):(M.command="SQ",M.startTangent=[z[0]-O[0],z[1]-O[1]]),M.endTangent=[m[0]-O[0],m[1]-O[1]]):"A"===E&&(E=.001,P=void 0===(P=(R=M.arcParams||{}).cx)?0:P,I=void 0===(I=R.cy)?0:I,B=R.rx,N=void 0===(N=R.ry)?0:N,D=R.sweepFlag,L=void 0===(L=R.startAngle)?0:L,R=void 0===(R=R.endAngle)?0:R,0===(void 0===D?0:D)&&(E*=-1),B=(D=void 0===B?0:B)*Math.cos(L-E)+P,j=N*Math.sin(L-E)+I,M.startTangent=[B-y[0],j-y[1]],B=D*Math.cos(L+R+E)+P,j=N*Math.sin(L+R-E)+I,M.endTangent=[z[0]-B,z[1]-j]),g.push(M)}return g}function as(t,e){var n=t.prePoint,r=t.currentPoint,i=(t=t.nextPoint,Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2)),o=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2);n=Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2),n=Math.acos((i+o-n)/(2*Math.sqrt(i)*Math.sqrt(o)));return!n||0===Math.sin(n)||(0,w.isNumberEqual)(n,0)?{xExtra:0,yExtra:0}:(i=Math.abs(Math.atan2(t[1]-r[1],t[0]-r[0])),o=Math.abs(Math.atan2(t[0]-r[0],t[1]-r[1])),i=i>Math.PI/2?Math.PI-i:i,o=o>Math.PI/2?Math.PI-o:o,{xExtra:Math.cos(n/2-i)*(e/2*(1/Math.sin(n/2)))-e/2||0,yExtra:Math.cos(o-n/2)*(e/2*(1/Math.sin(n/2)))-e/2||0})}Math.PI,oa("rect",sa),oa("image",sa),oa("circle",ua),oa("marker",ua),oa("polyline",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}var a=da(n,r),s=a.x,u=a.y;return{x:(t=Fa(t,{minX:s,minY:u,maxX:s+a.width,maxY:u+a.height})).minX,y:t.minY,width:t.maxX-t.minX,height:t.maxY-t.minY}})),oa("polygon",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}return da(n,r)})),oa("text",(function(t){var e,n,r,i=(t=t.attr()).x,o=t.y,a=t.text,s=t.fontSize,u=t.lineHeight,c=(c=t.font)||Va(t);return r=a,e=Ua(),(n=0,w.isNil)(r)||""===r||(e.save(),e.font=c,(0,w.isString)(r)&&r.includes("\n")?(c=r.split("\n"),(0,w.each)(c,(function(t){t=e.measureText(t).width,n<t&&(n=t)}))):n=e.measureText(r).width,e.restore()),(c=n)?(r=t.textAlign,t=t.textBaseline,s={x:i,y:o-(a=Ga(a,s,u))},r&&("end"===r||"right"===r?s.x-=c:"center"===r&&(s.x-=c/2)),t&&("top"===t?s.y+=a:"middle"===t&&(s.y+=a/2)),{x:s.x,y:s.y,width:c,height:a}):{x:i,y:o,width:0,height:0}})),oa("path",(function(t){var e=(n=t.attr()).path,n=n.stroke?n.lineWidth:0,r=(n=(e=function(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=(h=t[o]).currentPoint,s=h.params,u=h.prePoint,c=void 0;switch(h.command){case"Q":c=wa.box(u[0],u[1],s[1],s[2],s[3],s[4]);break;case"C":c=Ta.box(u[0],u[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var l=h.arcParams;c=La.box(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:n.push(a[0]),r.push(a[1])}c&&(h.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&("L"===h.command||"M"===h.command)&&h.prePoint&&h.nextPoint&&i.push(h)}n=n.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0})),r=r.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}));var h,f=(0,w.min)(n),d=(0,w.min)(r),p=(0,w.max)(n),g=(0,w.max)(r);if(0!==i.length)for(o=0;o<i.length;o++)(a=(h=i[o]).currentPoint)[0]===f?f-=as(h,e).xExtra:a[0]===p&&(p+=as(h,e).xExtra),a[1]===d?d-=as(h,e).yExtra:a[1]===g&&(g+=as(h,e).yExtra);return{x:f,y:d,width:p-f,height:g-d}}(t.get("segments")||os(e),n)).x,e.y);return{x:(t=Fa(t,{minX:n,minY:r,maxX:n+e.width,maxY:r+e.height})).minX,y:t.minY,width:t.maxX-t.minX,height:t.maxY-t.minY}})),oa("line",(function(t){var e=(i=t.attr()).x1,n=i.y1,r=i.x2,i=i.y2;return{x:(t=Fa(t,{minX:Math.min(e,r),maxX:Math.max(e,r),minY:Math.min(n,i),maxY:Math.max(n,i)})).minX,y:t.minY,width:t.maxX-t.minX,height:t.maxY-t.minY}})),oa("ellipse",(function(t){var e=(t=t.attr()).x,n=t.y,r=t.rx;t=t.ry;return{x:e-r,y:n-t,width:2*r,height:2*t}})),T(cs,ss=ur);var ss,us=cs;function cs(t,e){return t=ss.call(this,t,e)||this,t.item=e.item,t.canvasX=e.canvasX,t.canvasY=e.canvasY,t.wheelDelta=e.wheelDelta,t.detail=e.detail,t}var ls=function(t){return"".concat(t,"-").concat(Math.random()).concat(Date.now())},hs=function(t){if((0,w.isArray)(t))switch(t.length){case 4:return t;case 3:return t.push(t[1]),t;case 2:return t.concat(t);case 1:return[t[0],t[0],t[0],t[0]];default:return[0,0,0,0]}var e;return(0,w.isNumber)(t)?[t,t,t,t]:(0,w.isString)(t)?[e=parseInt(t,10),e,e,e]:[0,0,0,0]},fs=function(t){var e=new us(t.type,t);return e.clientX=t.clientX,e.clientY=t.clientY,e.x=t.x,e.y=t.y,e.target=t.target,e.currentTarget=t.currentTarget,e.bubbles=!0,e.item=t.item,e},ds=function(t){if(t)for(var e=[1,0,0,0,1,0,0,0,1],n=0;n<9;n++)if(t[n]!==e[n])return!0;return!1},ps=function(t){return Number.isNaN(Number(t))},gs=function(t){for(var e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++){var a=t[o].getBBox(),s=a.minX,u=a.minY,c=a.maxX;a=a.maxY;s<e&&(e=s),u<r&&(r=u),n<c&&(n=c),i<a&&(i=a)}return{x:Math.floor(e),y:Math.floor(r),width:Math.ceil(n)-Math.floor(e),height:Math.ceil(i)-Math.floor(r),minX:e,minY:r,maxX:n,maxY:i}},ms=function(t,e,n,r,i){void 0===n&&(n="quadratic"),void 0===r&&(r=void 0),void 0===i&&(i=void 0);for(var o,a=t.length,s=2*(e=void 0===e?15:e),u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],c={},l=[],h={},f=0;f<a;f++){var d=t[f],p=d.source,g=d.target,m="".concat(p,"-").concat(g);if(!l[f]){c[m]||(c[m]=[]),l[f]=!0,c[m].push(d);for(var v,y,b,x=0;x<a;x++)f===x||(y=(v=t[x]).source,b=v.target,l[x])||(p===b&&g===y?(c[m].push(v),l[x]=!0,h["".concat(y,"|").concat(b,"|").concat(c[m].length-1)]=!0):p===y&&g===b&&(c[m].push(v),l[x]=!0))}}for(o in c)for(var _=c[o],w=_.length,S=0;S<w;S++){var E,M=_[S];M.source===M.target?(i&&(M.type=i),M.loopCfg={position:u[S%8],dist:20*Math.floor(S/8)+50}):1===w&&r&&M.source!==M.target?M.type=r:(M.type=n,E=(S%2==0?1:-1)*(h["".concat(M.source,"|").concat(M.target,"|").concat(S)]?-1:1),M.curveOffset=w%2==1?E*Math.ceil(S/2)*s:E*(Math.floor(S/2)*s+e))}return t},vs=n(31278);function ys(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}ys.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,n=this.graph.get("width");e=e.get("height");return{x:(n-t[1]-t[3])/2+t[3],y:(e-t[0]-t[2])/2+t[0]}},ys.prototype.fitCenter=function(t,e){var n,r,i=this.graph,o=i.get("group");o.resetMatrix(),o=o.getCanvasBBox();0!==o.width&&0!==o.height&&(n=this.getViewCenter(),r=o.x+o.width/2,o=o.y+o.height/2,i.translate(n.x-r,n.y-o,t,e))},ys.prototype.animatedFitView=function(t,e,n,r,i,o,a,s){var u,c,l=this.graph,h=(n=n||{duration:500,easing:"easeCubic"},r.x+i.x-o.x-r.minX);o=r.y+i.y-o.y-r.minY;ps(h)||ps(o)||(u=(0,vs.vs)([1,0,0,0,1,0,0,0,1],[["t",h,o]]),s?(r=l.get("minZoom"),h=l.get("maxZoom"),o=a,r&&a<r?o=r:h&&h<a&&(o=h),c=(0,vs.vs)(u,[["t",-i.x,-i.y],["s",o,o],["t",i.x,i.y]]),s=kn({animateCfg:n,callback:function(){t.setMatrix(c),l.emit("viewportchange",{action:"translate",matrix:u}),l.emit("viewportchange",{action:"zoom",matrix:c})}}),t.stopAnimate(),t.setMatrix(e),t.animate((function(t){return{matrix:Qe(e,c,t)}}),s)):(r=kn({animateCfg:n,callback:function(){l.emit("viewportchange",{action:"translate",matrix:u})}}),t.animate((function(t){return{matrix:Qe(e,u,t)}}),r)))},ys.prototype.fitView=function(t,e){var n,r,i=this.graph,o=this.getFormatPadding(),a=i.get("width"),s=i.get("height"),u=i.get("group"),c=u.getMatrix()||[1,0,0,0,1,0,0,0,1],l=(u.resetMatrix(),u.getCanvasBBox());0!==l.width&&0!==l.height&&(n=this.getViewCenter(),r={x:l.x+l.width/2,y:l.y+l.height/2},a=(a-o[1]-o[3])/l.width,o=(s=(s-o[0]-o[2])/l.height)<a?s:a,t?this.animatedFitView(u,c,e,l,n,r,o,!0):(s=n.x-r.x,a=n.y-r.y,ps(s)||ps(a)||(i.translate(s,a),i.zoom(o,n))))},ys.prototype.fitViewByRules=function(t,e,n){var r,i,o=t.onlyOutOfViewPort,a=(o=void 0!==o&&o,t.direction),s=(a=void 0===a?"both":a,t=t.ratioRule,t=void 0===t?"min":t,this.graph),u=this.getFormatPadding(),c=s.get("width"),l=s.get("height"),h=s.get("group"),f=h.getMatrix()||[1,0,0,0,1,0,0,0,1],d=(h.resetMatrix(),h.getCanvasBBox());0!==d.width&&0!==d.height&&(r=this.getViewCenter(),i={x:d.x+d.width/2,y:d.y+d.height/2},c=(c-u[1]-u[3])/d.width,l=(l-u[0]-u[2])/d.height,u="x"===a?c:"y"===a?l:"max"===t?Math.max(c,l):Math.min(c,l),o&&(u=u<1?u:1),e?this.animatedFitView(h,f,n,d,r,i,u,!0):((a=s.getZoom()*u)<(t=s.get("minZoom"))&&(a=t),s.translate(r.x-i.x,r.y-i.y),s.zoomTo(a,r)))},ys.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return hs(t)},ys.prototype.focusPoint=function(t,e,n){var r,i,o,a,s,u,c=this,l=this.getViewCenter(),h=(l=this.getPointByCanvas(l.x,l.y),(h=this.graph.get("group").getMatrix())||[1,0,0,0,1,0,0,0,1]);e?(r=(l.x-t.x)*h[0],i=(l.y-t.y)*h[4],u=s=a=o=0,this.graph.get("canvas").animate((function(t){s=r*t,u=i*t,c.graph.translate(s-o,u-a),o=s,a=u}),k({},n))):this.graph.translate((l.x-t.x)*h[0],(l.y-t.y)*h[4])},ys.prototype.getPointByCanvas=function(t,e){var n=this.graph.get("group").getMatrix();return Ee({x:t,y:e},n=n||[1,0,0,0,1,0,0,0,1])},ys.prototype.getPointByClient=function(t,e){return t=this.graph.get("canvas").getPointByClient(t,e),this.getPointByCanvas(t.x,t.y)},ys.prototype.getClientByPoint=function(t,e){var n=this.graph.get("canvas");t=this.getCanvasByPoint(t,e),e=n.getClientByPoint(t.x,t.y);return{x:e.x,y:e.y}},ys.prototype.getCanvasByPoint=function(t,e){var n=this.graph.get("group").getMatrix();return Se({x:t,y:e},n=n||[1,0,0,0,1,0,0,0,1])},ys.prototype.focus=function(t,e,n){var r,i,o,a;(t=(0,w.isString)(t)?this.graph.findById(t):t)&&(a=o=0,t.getType&&"edge"===t.getType()?(i=t.getSource().get("group").getMatrix(),r=t.getTarget().get("group").getMatrix(),i&&r?(o=(i[6]+r[6])/2,a=(i[7]+r[7])/2):(i||r)&&(o=(i||r)[6],a=(i||r)[7])):(o=(i=(i=t.get("group").getMatrix())||[1,0,0,0,1,0,0,0,1])[6],a=i[7]),this.focusPoint({x:o,y:a},e,n))},ys.prototype.focusItems=function(t,e,n,r){if(t.length){for(var i,o=this.graph,a=this.getFormatPadding(),s=o.get("width"),u=o.get("height"),c=o.get("group"),l=c.getMatrix()||[1,0,0,0,1,0,0,0,1],h=(c.resetMatrix(),{x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0}),f=0,d=t;f<d.length;f++){var p=d[f].getBBox();p.minX<h.minX&&(h.minX=p.minX),p.minY<h.minY&&(h.minY=p.minY),p.maxX>h.maxX&&(h.maxX=p.maxX),p.maxY>h.maxY&&(h.maxY=p.maxY)}h.x=h.minX,h.y=h.minY,h.width=h.maxX-h.minX,h.height=h.maxY-h.minY,0!==h.width&&0!==h.height&&(t=this.getViewCenter(),i={x:h.x+h.width/2,y:h.y+h.height/2},s=(s-a[1]-a[3])/h.width,a=(u=(u-a[0]-a[2])/h.height)<s?u:s,n?this.animatedFitView(c,l,r,h,t,i,a,e):(o.translate(t.x-i.x,t.y-i.y),e&&o.zoom(a,t)))}},ys.prototype.changeSize=function(t,e){var n=this.graph;if(!(0,w.isNumber)(t)||!(0,w.isNumber)(e))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:t,height:e}),n.get("canvas").changeSize(t,e),n.get("plugins").forEach((function(t){t.get("gridContainer")&&t.positionInit()}))},ys.prototype.destroy=function(){this.graph=null,this.destroyed=!1};var bs=ys;function xs(t){return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _s(t){if("string"!=typeof t)return t;function e(e){if("string"!=typeof e)return e;try{return JSON.parse(e.trim())}catch(t){return e.trim()}}var n=e(t);if("string"!=typeof n)return n;for(var r=function(t){return t[t.length-1]},i=t.trim(),o=[],a=[],s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.some((function(t){return r(a)===t}))},u=null,c=0,l="";c<i.length;){var h=i[c],f=s('"',"'");if(f||h.trim()){var d="\\"===i[c-1],p=s("}"),g=s("]"),m=s(","),v=r(o);if(f)r(a)!==h||d?l+=h:(a.pop(),f=e(l),v.push(f),u=f,l="");else if(g&&","===h)l&&(v.push(e(l)),l="");else if(p&&":"===h)a.push(","),l&&(v.push(l),l="");else if(m&&","===h)l&&(v.push(e(l)),l=""),a.pop();else if("}"===h&&(p||m)){l&&(v.push(e(l)),l=""),m&&a.pop();for(var y={},b=1;b<v.length;b+=2)y[v[b-1]]=v[b];o.pop(),o.length&&r(o).push(y),a.pop(),u=y}else"]"===h&&g?(l&&(v.push(e(l)),l=""),o.pop(),o.length&&r(o).push(v),a.pop(),u=v):"{"===h?(o.push([]),a.push("}")):"["===h?(o.push([]),a.push("]")):'"'===h?a.push('"'):"'"===h?a.push("'"):l+=h}c+=1}return u||l}var ws=function(t){return t.split("-").reduce((function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)}))};function Ss(t,e){var n=k({x:0,y:0,width:0,height:0},e=void 0===e?{x:0,y:0}:e);if(null!=(r=t.children)&&r.length){var r=t.attrs,i=void 0===r?{}:r,o=(r=i.marginTop,k({},e));r&&(o.y+=r);for(var a=0;a<t.children.length;a++){t.children[a].attrs.key="".concat(i.key||"root"," -").concat(a," ");var s,u=Ss(t.children[a],o);u.bbox&&(s=u.bbox,"inline"===u.attrs.next?o.x+=u.bbox.width:o.y+=u.bbox.height,s.width+s.x>n.width&&(n.width=s.width+s.x),s.height+s.y>n.height)&&(n.height=s.height+s.y)}}return t.bbox=function(t,e,n){var r,i,o=t.attrs,a=void 0===o?{}:o,s={x:e.x||0,y:e.y||0,width:n.width||0,height:n.height||0};switch(t.type){case"maker":case"circle":a.r&&(i=2*a.r,r=2*a.r);break;case"text":a.text&&(i=wn(a.text,a.fontSize||12)[0],s.y+=r=16,s.height=r,s.width=i,t.attrs=k({fontSize:12,fill:"#000"},a));break;default:a.width&&(i=a.width),a.height&&(r=a.height)}return 0<=r&&(s.height=r),0<=i&&(s.width=i),a.marginTop&&(s.y+=a.marginTop),a.marginLeft&&(s.x+=a.marginLeft),s}(t,e,n),t.attrs=k(k({},t.attrs),t.bbox),t}function Es(t){function e(e){var n,r="function"==typeof t?t(e):t,i=(r=(n=r,function(t){for(var e,r=n.length,i=[],o=0,a="";o<r;)"{"===n[o]&&"{"===n[o+1]?(i.push(a),a="",o+=2):"}"===n[o]&&"}"===n[o+1]?(i.length&&(e=i.pop(),a=(0,w.get)(t,a,e.endsWith("=")?'"{'.concat(a,'}"'):a),i.push(e+a)),o+=2,a=""):(a+=n[o],o+=1);return i.push(a),i.map((function(t,e){return i[e-1]&&i[e-1].endsWith("=")?'"{'.concat(t,'}"'):t})).join("")}(e)),document.createElement("div"));return i.innerHTML=r,r=Ss(function t(e,n){var r={},i=e.getAttributeNames&&e.getAttributeNames()||[],o=e.children&&Array.from(e.children).map((function(e){return t(e,n)})),a={},s=e.tagName?e.tagName.toLowerCase():"group";return"text"===s&&(r.text=e.innerText),"img"===(a.type=s)&&(a.type="image"),Array.from(i).forEach((function(t){var n,i=ws(t);t=e.getAttribute(t);try{"style"===i||"attrs"===i?(n=_s(t),r=k(k({},r),n)):a[i]=_s(t)}catch(n){if("style"===i)throw n;a[i]=t}})),a.attrs=r,n&&n.style&&a.name&&"object"===xs(n.style[a.name])&&(a.attrs=k(k({},a.attrs),n.style[a.name])),n&&n.style&&a.keyshape&&(a.attrs=k(k({},a.attrs),n.style)),o.length&&(a.children=o),a}(i.children[0],e)),i.remove(),r}var n={};return{draw:function(t,r){var i=e(t),o=r;return function t(e){var n=e.attrs,i=(n=void 0===n?{}:n,e.bbox),a=e.type,s=e.children,u=O(e,["attrs","bbox","type","children"]);"group"!==e.type&&(n=r.addShape(e.type,k({attrs:n,origin:{bbox:i,type:a,children:s}},u)),e.keyshape)&&(o=n),e.children&&e.children.forEach(t)}(i),n[t.id]=[i],o},update:function(t,r){n[t.id]||(n[t.id]=[]);var i=r.getContainer(),o=i.get("children"),a=e(t),s=function t(e,n){var r=(e||{}).type,i=((null==n?void 0:n.attrs)||{}).key;if(i&&e&&(e.attrs.key=i),!e&&n)return{action:"delete",val:n,type:r,key:i};if(e&&!n)return{action:"add",val:e,type:r};if(!e&&!n)return{action:"same",type:r};var o=[];if(0<(null==(l=e.children)?void 0:l.length)||0<(null==(l=n.children)?void 0:l.length))for(var a=Math.max(null==(l=e.children)?void 0:l.length,null==(l=n.children)?void 0:l.length),s=n.children||[],u=e.children||[],c=0;c<a;c+=1)o.push(t(u[c],s[c]));var l=Object.keys(n.attrs),h=Object.keys(e.attrs);return n.type!==e.type?{action:"restructure",nowTarget:e,formerTarget:n,key:i,children:o}:l.filter((function(t){return"children"!==t})).some((function(t){return e.attrs[t]!==n.attrs[t]||!h.includes(t)}))?{action:"change",val:e,children:o,type:r,key:i}:{action:"same",children:o,type:r,key:i}}(a,n[t.id].pop()),u=function t(e){var n;"group"!==e.type&&i.addShape(e.type,{attrs:e.attrs}),null!=(n=e.children)&&n.length&&e.children.map(t)},c=function t(e){var n=o.find((function(t){return t.attrs.key===e.attrs.key}));n&&i.removeChild(n),null!=(n=e.children)&&n.length&&e.children.map(t)};(function t(e){var n=e.key;if("group"!==e.type){var i,a=o.find((function(t){return t.attrs.key===n}));switch(e.action){case"change":a&&(i=e.val.keyshape?r.getOriginStyle():{},a.attr(k(k({},i),e.val.attrs)));break;case"add":u(e.val);break;case"delete":c(e.val);break;case"restructure":c(e.formerTarget),u(e.nowTarget)}}e.children&&e.children.forEach(t)})(s),n[t.id].push(a)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Ms={};function As(t){return Ms[t]||(Ms[t]=(0,w.upperFirst)(t)),Ms[t]}var Cs={defaultShapeType:"defaultType",className:null,getShape:function(t){return this[t]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(t,e,n){t=this.getShape(t);var r=(n.shapeMap={},t.draw(e,n));return t.afterDraw&&t.afterDraw(e,n,r),r},baseUpdate:function(t,e,n,r){var i;t=this.getShape(t);t.update&&(t.mergeStyle=null==(i=t.getOptions)?void 0:i.call(t,e,r),null!=(i=t.update))&&i.call(t,e,n,r),t.afterUpdate&&t.afterUpdate(e,n)},setState:function(t,e,n,r){this.getShape(t).setState(e,n,r)},shouldUpdate:function(t){return!!this.getShape(t).update},getControlPoints:function(t,e){return this.getShape(t).getControlPoints(e)},getAnchorPoints:function(t,e){return this.getShape(t).getAnchorPoints(e)}},Ts={options:{},draw:function(t,e){return this.drawShape(t,e)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.options.anchorPoints;return t.anchorPoints||e}};ks.registerFactory=function(t,e){return t=As(t),e=k(k({},Cs),e),(ks[t]=e).className=t,e},ks.getFactory=function(t){return ks[As(t)]},ks.registerNode=function(t,e,n){var r,i=ks.Node;return(n="string"==typeof e||"function"==typeof e?(r=Es(e),k(k({},i.getShape("single-node")),r)):e.jsx?(r=Es(e.jsx),k(k(k({},i.getShape("single-node")),r),e)):(i.getShape(n),r=n?i.getShape(n):Ts,k(k({},r),e))).type=t,n.itemType="node",i[t]=n},ks.registerEdge=function(t,e,n){var r=ks.Edge;n=n?r.getShape(n):Ts,n=k(k({},n),e);return n.type=t,n.itemType="edge",r[t]=n},ks.registerCombo=function(t,e,n){var r=ks.Combo;n=n?r.getShape(n):Ts,n=k(k({},n),e);return n.type=t,n.itemType="combo",r[t]=n},on=ks;function ks(){}var Os=on,Ps=(on.registerFactory("node",{defaultShapeType:"circle"}),on.registerFactory("edge",{defaultShapeType:"line"}),on.registerFactory("combo",{defaultShapeType:"circle"}),"bboxCache"),Is="bboxCanvasCache";function Ns(t){this._cfg={},this.destroyed=!1,this._cfg=Object.assign({id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]},this.getDefaultCfg(),t);var e=this.get("model"),n=e.id,r=this.get("type");void 0===n?n=ls(r):"string"!=typeof n&&(n=String(n)),this.get("model").id=n,this.set("id",n),t=t.group,t&&(t.set("item",this),t.set("id",n)),this.init(),this.draw(),t=e.shape||e.type||("edge"===r?"line":"circle"),n=this.get("shapeFactory");n&&n[t]&&(r=n[t].options)&&r.stateStyles&&(n=this.get("styles")||e.stateStyles,n=(0,w.deepMix)({},r.stateStyles,n),this.set("styles",n))}Ns.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group");t=mn(t,e);return t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY,t.centerX=(t.minX+t.maxX)/2,t.centerY=(t.minY+t.maxY)/2,t},Ns.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group");t=mn(t,e);return t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY,t.centerX=(t.minX+t.maxX)/2,t.centerY=(t.minY+t.maxY)/2,t},Ns.prototype.drawInner=function(){var t=this.get("shapeFactory"),e=this.get("group"),n=this.get("model"),r=(e.clear(),n.visible);void 0===r||r||this.changeVisibility(r),t&&(this.updatePosition(n),n=(r=this.getShapeCfg(n)).type,(r=t.draw(n,r,e))&&(this.set("keyShape",r),r.set("isKeyShape",!0),r.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",n),this.restoreStates(t,n))},Ns.prototype.setOriginStyle=function(){var t=this.get("group"),e=t.get("children"),n=this.getKeyShape(),r=this,i=n.get("name");if(this.get("originStyle")){for(var o=this.get("originStyle"),a=(i&&!o[i]&&(o[i]={}),this.getCurrentStatesStyle()),s=0;s<e.length;s++)!function(t){t=e[t];var n,s,u,c=t.get("name"),l=t.attr();c&&c!==i?(n=a[c],o[c]||(o[c]={}),n?Object.keys(l).forEach((function(t){var e=l[t];e!==n[t]&&(o[c][t]=e)})):o[c]="image"!==t.get("type")?(0,w.clone)(l):r.getShapeStyleByName(c)):(s=t.attr(),u={},Object.keys(a).forEach((function(t){var e=a[t];t!==i&&(0,w.isPlainObject)(e)||(u[t]=e)})),Object.keys(s).forEach((function(t){var e=s[t];u[t]!==e&&(i?o[i][t]=e:o[t]=e)})))}(s);delete o.path,delete o.matrix,delete o.x,delete o.y,o[i]&&(delete o[i].x,delete o[i].y,delete o[i].matrix,delete o[i].path),r.set("originStyle",o)}else{var u={};for(s=0;s<e.length;s++){var c,l,h=e[s],f=h.get("type"),d=h.get("name");d&&d!==i?(u[d]="image"!==f?(0,w.clone)(h.attr()):r.getShapeStyleByName(d),"text"===f&&u[d]&&(delete u[d].x,delete u[d].y,delete u[d].matrix)):(delete(c=r.getShapeStyleByName()).path,delete c.matrix,i?d?u[i]=c:(l=ls("shape"),h.set("name",l),t.shapeMap[l]=h,u[l]="image"!==f?(0,w.clone)(h.attr()):r.getShapeStyleByName(d)):Object.assign(u,c))}r.set("originStyle",u)}},Ns.prototype.restoreStates=function(t,e){var n=this,r=n.get("states");(0,w.each)(r,(function(r){t.setState(e,r,!0,n)}))},Ns.prototype.init=function(){var t=Os.getFactory(this.get("type"));this.set("shapeFactory",t)},Ns.prototype.get=function(t){return this._cfg[t]},Ns.prototype.set=function(t,e){(0,w.isPlainObject)(t)?this._cfg=k(k({},this._cfg),t):this._cfg[t]=e},Ns.prototype.getDefaultCfg=function(){return{}},Ns.prototype.clearCache=function(){this.set(Ps,null),this.set(Is,null)},Ns.prototype.beforeDraw=function(){},Ns.prototype.afterDraw=function(){},Ns.prototype.afterUpdate=function(){},Ns.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},Ns.prototype.getShapeStyleByName=function(t){var e,n=this.get("group");n=t?n.shapeMap[t]:this.getKeyShape();return n?(e={},(0,w.each)(n.attr(),(function(t,n){"img"===n&&!(0,w.isString)(t)||(e[n]=t)})),e):{}},Ns.prototype.getShapeCfg=function(t,e){var n,r=this.get("styles");return r?((n=t).style=k(k({},r),t.style),n):t},Ns.prototype.getStateStyle=function(t){var e=this.get("styles");return e&&e[t]},Ns.prototype.getOriginStyle=function(){return this.get("originStyle")},Ns.prototype.getCurrentStatesStyle=function(){var t=this,e={},n=t.getStates();return n&&n.length?((0,w.each)(t.getStates(),(function(n){e=Object.assign(e,t.getStateStyle(n))})),e):this.get("originStyle")},Ns.prototype.setState=function(t,e){var n=this.get("states"),r=this.get("shapeFactory"),i=t,o=t,a=((0,w.isString)(e)&&(i="".concat(t,":").concat(e),o="".concat(t,":")),n);if((0,w.isBoolean)(e)){var s=n.indexOf(o);if(e){if(-1<s)return;n.push(i)}else-1<s&&n.splice(s,1)}else(0,w.isString)(e)&&(0<(s=n.filter((function(t){return t.includes(o)}))).length&&this.clearStates(s),(a=a.filter((function(t){return!t.includes(o)}))).push(i),this.set("states",a));r&&(n=this.get("model").type,r.setState(n,t,e,this))},Ns.prototype.clearStates=function(t){var e=this,n=e.getStates(),r=e.get("shapeFactory"),i=e.get("model").type;t=t||n,(0,w.isString)(t)&&(t=[t]),n=n.filter((function(e){return-1===t.indexOf(e)}));e.set("states",n),t.forEach((function(t){r.setState(i,t,!1,e)}))},Ns.prototype.getContainer=function(){return this.get("group")},Ns.prototype.getKeyShape=function(){return this.get("keyShape")},Ns.prototype.getModel=function(){return this.get("model")},Ns.prototype.getType=function(){return this.get("type")},Ns.prototype.getID=function(){return this.get("id")},Ns.prototype.isItem=function(){return!0},Ns.prototype.getStates=function(){return this.get("states")},Ns.prototype.hasState=function(t){return 0<=this.getStates().indexOf(t)},Ns.prototype.refresh=function(t){var e=this.get("model");this.updatePosition(e),this.updateShape(t),this.afterUpdate(),this.clearCache()},Ns.prototype.getUpdateType=function(t){},Ns.prototype.update=function(t,e){void 0===e&&(e=void 0);var n,r,i,o,a=this.get("model");"move"===e?this.updatePosition(t):(a.visible!==(n=t.visible)&&void 0!==n&&this.changeVisibility(n),n=a.x,r=a.y,t.x=isNaN(+t.x)?a.x:+t.x,t.y=isNaN(+t.y)?a.y:+t.y,i=this.get("styles"),t.stateStyles&&(o=t.stateStyles,(0,w.mix)(i,o),delete t.stateStyles),Object.assign(a,t),n===t.x&&r===t.y||this.updatePosition(t),this.updateShape(e)),this.afterUpdate(),this.clearCache()},Ns.prototype.updateShape=function(t){var e=this.get("shapeFactory"),n=this.get("model"),r=n.type;e.shouldUpdate(r)&&r===this.get("currentShape")?(n=this.getShapeCfg(n,t),e.baseUpdate(r,n,this,t),"move"!==t&&this.setOriginStyle()):this.draw(),this.restoreStates(e,r)},Ns.prototype.updatePosition=function(t){var e=this.get("model"),n=isNaN(+t.x)?+e.x:+t.x,r=(t=isNaN(+t.y)?+e.y:+t.y,this.get("group"));return!isNaN(n)&&!isNaN(t)&&(e.x=n,e.y=t,e=r.getMatrix(),!(e&&e[6]===n&&e[7]===t||(r.resetMatrix(),Oe(r,{x:n,y:t}),this.clearCache(),0)))},Ns.prototype.getBBox=function(){var t=this.get(Ps);return t||(t=this.calculateBBox(),this.set(Ps,t)),t},Ns.prototype.getCanvasBBox=function(){var t=this.get(Is);return t||(t=this.calculateCanvasBBox(),this.set(Is,t)),t},Ns.prototype.toFront=function(){this.get("group").toFront()},Ns.prototype.toBack=function(){this.get("group").toBack()},Ns.prototype.show=function(){this.changeVisibility(!0)},Ns.prototype.hide=function(){this.changeVisibility(!1)},Ns.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},Ns.prototype.isVisible=function(){return this.get("visible")},Ns.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},Ns.prototype.destroy=function(){var t,e;this.destroyed||(t=this.get("animate"),e=this.get("group"),t&&e.stopAnimate(),e.shapeMap={},this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0)};an=Ns;var Ds,Ls={source:"start",target:"end"},Rs="Node",Bs="Point";function js(){return null!==Ds&&Ds.apply(this,arguments)||this}T(js,Ds=an),js.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},js.prototype.setEnd=function(t,e){var n=Ls[t]+Bs,r=(t=t+Rs,this.get(t));r&&!r.destroyed&&r.removeEdge(this),(0,w.isPlainObject)(e)?(this.set(n,e),this.set(t,null)):e&&(e.addEdge(this),this.set(t,e),this.set(n,null))},js.prototype.getLinkPoint=function(t,e,n){var r,i=t+Rs,o=this.get(Ls[t]+Bs);return o||(i=this.get(i),r=t+"Anchor",n=this.getPrePoint(t,n),e=e[r],o=(o=(0,w.isNil)(e)?o:i.getLinkPointByAnchor(e))||i.getLinkPoint(n),(0,w.isNil)(o.index))||this.set("".concat(t,"AnchorIndex"),o.index),o},js.prototype.getPrePoint=function(t,e){return e&&e.length?e["source"===t?0:e.length-1]:this.getEndPoint("source"===t?"target":"source")},js.prototype.getEndPoint=function(t){var e=Ls[t]+Bs;t=this.get(t+Rs);return t?t.get("model"):this.get(e)},js.prototype.getControlPointsByCenter=function(t){var e=this.getEndPoint("source"),n=this.getEndPoint("target"),r=this.get("shapeFactory");t=t.type;return r.getControlPoints(t,{startPoint:e,endPoint:n})},js.prototype.getEndCenter=function(t){var e=Ls[t]+Bs;t=this.get(t+Rs);return t?{x:(t=t.getBBox()).centerX,y:t.centerY}:this.get(e)},js.prototype.init=function(){Ds.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},js.prototype.getShapeCfg=function(t,e){var n=this.get("linkCenter");e=null!=e&&e.includes("move")?t:Ds.prototype.getShapeCfg.call(this,t);return n?(e.startPoint=this.getEndCenter("source"),e.endPoint=this.getEndCenter("target")):(n=e.controlPoints||this.getControlPointsByCenter(e),e.startPoint=this.getLinkPoint("source",t,n),e.endPoint=this.getLinkPoint("target",t,n)),e.sourceNode=this.get("sourceNode"),e.targetNode=this.get("targetNode"),e},js.prototype.getModel=function(){var t=this.get("model"),e=this.get("source".concat(Rs)),n=this.get("target".concat(Rs));return e?delete t["source".concat(Rs)]:t.source=this.get("start".concat(Bs)),n?delete t["target".concat(Rs)]:t.target=this.get("end".concat(Bs)),(0,w.isString)(t.source)||(0,w.isPlainObject)(t.source)||(t.source=t.source.getID()),(0,w.isString)(t.target)||(0,w.isPlainObject)(t.target)||(t.target=t.target.getID()),t},js.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},js.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},js.prototype.getSource=function(){return this.get("source")},js.prototype.getTarget=function(){return this.get("target")},js.prototype.updatePosition=function(){return!1},js.prototype.update=function(t,e){void 0===e&&(e=void 0);var n=this.get("model"),r=n.visible,i=t.visible;r!==i&&void 0!==i&&this.changeVisibility(i),r=this.get("styles");t.stateStyles&&(i=t.stateStyles,(0,w.mix)(r,i),delete t.stateStyles),Object.assign(n,t),this.updateShape(e),this.afterUpdate(),this.clearCache()},js.prototype.destroy=function(){var t=this.get("source".concat(Rs)),e=this.get("target".concat(Rs));t&&!t.destroyed&&t.removeEdge(this),e&&!e.destroyed&&e.removeEdge(this),Ds.prototype.destroy.call(this)};var Fs,zs=js,Us="anchorPointsCache";function Gs(){return null!==Fs&&Fs.apply(this,arguments)||this}T(Gs,Fs=an),Gs.prototype.getNearestPoint=function(t,e){for(var n=0,r=t[0],i=Ae(t[0],e),o=0;o<t.length;o++){var a=t[o],s=Ae(a,e);s<i&&(r=a,i=s,n=o)}return r.anchorIndex=n,r},Gs.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},Gs.prototype.getEdges=function(){return this.get("edges")},Gs.prototype.getInEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("target")===t}))},Gs.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("source")===t}))},Gs.prototype.getNeighbors=function(t){var e=this,n=this.get("edges");return"target"===t?n.filter((function(t){return t.getSource()===e})).map((function(t){return t.getTarget()})):"source"===t?n.filter((function(t){return t.getTarget()===e})).map((function(t){return t.getSource()})):n.map((function(t){return t.getSource()===e?t.getTarget():t.getSource()}))},Gs.prototype.getLinkPointByAnchor=function(t){return this.getAnchorPoints()[t]},Gs.prototype.getLinkPoint=function(t){var e,n,r=this.get("keyShape").get("type"),i=this.get("type"),o=this.getBBox(),a="combo"===i?(e=o.centerX||(o.maxX+o.minX)/2,o.centerY||(o.maxY+o.minY)/2):(e=o.centerX,o.centerY);i=this.getAnchorPoints();switch(r){case"circle":n=_e({x:e,y:a,r:o.width/2},t);break;case"ellipse":n=we({x:e,y:a,rx:o.width/2,ry:o.height/2},t);break;default:n=xe(o,t)}return r=n,(r=i.length?this.getNearestPoint(i,r=r||t):r)||{x:e,y:a}},Gs.prototype.getAnchorPoints=function(){var t,e,n,r,i=this.get(Us);return i||(i=[],r=this.get("shapeFactory"),t=this.getBBox(),n=this.get("model"),e=this.getShapeCfg(n),n=n.type,r=r.getAnchorPoints(n,e)||[],(0,w.each)(r,(function(e,n){e={x:t.minX+e[0]*t.width,y:t.minY+e[1]*t.height,anchorIndex:n},i.push(e)})),this.set(Us,i)),i},Gs.prototype.addEdge=function(t){this.get("edges").push(t)},Gs.prototype.lock=function(){this.set("locked",!0)},Gs.prototype.unlock=function(){this.set("locked",!1)},Gs.prototype.hasLocked=function(){return this.get("locked")},Gs.prototype.removeEdge=function(t){var e=this.getEdges();t=e.indexOf(t);-1<t&&e.splice(t,1)},Gs.prototype.clearCache=function(){this.set("bboxCache",null),this.set(Us,null)},Gs.prototype.getUpdateType=function(t){var e,n,r;if(t)return e=!(0,w.isNil)(t.x),n=!(0,w.isNil)(t.y),1===(r=Object.keys(t)).length&&(e||n)||2===r.length&&e&&n?"move":(0,w.isNumber)(t.x)||(0,w.isNumber)(t.y)||t.type||t.anchorPoints||t.size||null!=t&&t.style&&(null!=(e=null==t?void 0:t.style)&&e.r||null!=(n=null==t?void 0:t.style)&&n.width||null!=(e=null==t?void 0:t.style)&&e.height||null!=(n=null==t?void 0:t.style)&&n.rx||null!=(e=null==t?void 0:t.style)&&e.ry)?"bbox|label":r.includes("label")||r.includes("labelCfg")?"style|label":"style"};var Vs,Ws=Gs,Hs="bboxCanvasCache",Ys="sizeCache",qs="anchorPointsCache";function Xs(){return null!==Vs&&Vs.apply(this,arguments)||this}T(Xs,Vs=Ws),Xs.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},Xs.prototype.getShapeCfg=function(t){var e,n=this.get("styles"),r=this.get("bbox");return n&&r?(e=t,r={r:Math.hypot(r.height,r.width)/2||cn.defaultCombo.size[0]/2,width:r.width||cn.defaultCombo.size[0],height:r.height||cn.defaultCombo.size[1]},e.style=k(k(k({},n),t.style),r),n=t.padding||cn.defaultCombo.padding,(0,w.isNumber)(n)?(r.r+=n,r.width+=2*n,r.height+=2*n):(r.r+=n[0],r.width+=n[1]+n[3]||2*n[1],r.height+=n[0]+n[2]||2*n[0]),this.set(Ys,r),e):t},Xs.prototype.calculateCanvasBBox=function(){var t,e,n,r,i;if(!this.destroyed)return t=this.get("keyShape"),e=this.get("group"),(e=mn(t,e)).centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,n=this.get(Ys),r=(i=this.get("bboxCache")||{}).x,i=i.x,n?(n.width=Math.max(n.width,e.width),n.height=Math.max(n.height,e.height),"circle"===t.get("type")?(e.width=2*n.r,e.height=2*n.r):(e.width=n.width,e.height=n.height),e.minX=e.centerX-e.width/2,e.minY=e.centerY-e.height/2,e.maxX=e.centerX+e.width/2,e.maxY=e.centerY+e.height/2):(e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2),e.x=e.minX,e.y=e.minY,e.x===r&&e.y===i||this.set(qs,null),e},Xs.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},Xs.prototype.getNodes=function(){return this.get("nodes")},Xs.prototype.getCombos=function(){return this.get("combos")},Xs.prototype.addChild=function(t){switch(t.getType()){case"node":this.addNode(t);break;case"combo":this.addCombo(t);break;default:return!1}return!0},Xs.prototype.addCombo=function(t){return this.get("combos").push(t),!0},Xs.prototype.addNode=function(t){return this.get("nodes").push(t),!0},Xs.prototype.removeChild=function(t){switch(t.getType()){case"node":this.removeNode(t);break;case"combo":this.removeCombo(t);break;default:return!1}return!0},Xs.prototype.removeCombo=function(t){var e;if(t)return-1<(t=(e=this.getCombos()).indexOf(t))&&(e.splice(t,1),!0)},Xs.prototype.removeNode=function(t){var e;if(t)return-1<(t=(e=this.getNodes()).indexOf(t))&&(e.splice(t,1),!0)},Xs.prototype.getUpdateType=function(t){},Xs.prototype.getBBox=function(){return this.set(Hs,null),this.calculateCanvasBBox()},Xs.prototype.clearCache=function(){this.set("bboxCache",null),this.set(Hs,null),this.set(qs,null)},Xs.prototype.destroy=function(){var t,e;this.destroyed||(t=this.get("animate"),e=this.get("group"),t&&e.stopAnimate(),e.shapeMap={},this.clearCache(),this.set(Ys,null),this.set("bbox",null),e.remove(),this._cfg=null,this.destroyed=!0)};var Ks=Xs,Zs="node",$s="edge",Js="combo",Qs="stateStyles";function tu(t){var e=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,w.throttle)((function(t){var n,r=e.graph;r&&!r.get("destroyed")&&(n=e.edgeToBeUpdateMap)&&null!=(r=Object.keys(n))&&r.length&&(Object.keys(n).forEach((function(t){var e,r,i=n[t].edge;i&&!i.destroyed&&(e=i.getSource(),r=i.getTarget(),e)&&!e.destroyed&&r&&!r.destroyed&&i.refresh(n[t].updateType)})),e.edgeToBeUpdateMap={})}),16,{trailing:!0,leading:!0}),this.graph=t,this.destroyed=!1}tu.prototype.addItem=function(t,e){var n,r,i,o,a=this.graph,s="vedge"===t?$s:t,u=a.get("".concat(s,"Group"))||a.get("group"),c=(0,w.upperFirst)(s),l=null,h=a.get(s+(0,w.upperFirst)(Qs))||{},f=a.get("default"+c);e[Qs]&&(h=e[Qs]),f&&(0,w.each)(f,(function(t,n){(0,w.isObject)(t)&&!(0,w.isArray)(t)?e[n]=(0,w.deepMix)({},t,e[n]):(0,w.isArray)(t)?e[n]=e[n]||(0,w.clone)(f[n]):e[n]=e[n]||f[n]})),c=a.get(s+"Mapper");if(c&&((n=c(e))[Qs]&&(h=n[Qs],delete n[Qs]),(0,w.each)(n,(function(t,r){(0,w.isObject)(t)&&!(0,w.isArray)(t)?e[r]=(0,w.deepMix)({},e[r],t):e[r]=n[r]||e[r]}))),a.emit("beforeadditem",{type:t,model:e}),t===$s||"vedge"===t){s=void 0,c=void 0,s=e.source,c=e.target;if(s&&(0,w.isString)(s)&&(s=a.findById(s)),c&&(0,w.isString)(c)&&(c=a.findById(c)),!s||!c)return;s.getType&&"combo"===s.getType()&&(e.isComboEdge=!0),c.getType&&"combo"===c.getType()&&(e.isComboEdge=!0),l=new zs({model:e,source:s,target:c,styles:h,linkCenter:a.get("linkCenter"),group:u.addGroup()})}else t===Zs?l=new Ws({model:e,styles:h,group:u.addGroup()}):t===Js&&(s=e.children,c=An(s,a),r=i=void 0,isNaN(c.x)?isNaN(e.x)&&(i=100*Math.random()):i=c.x,isNaN(c.y)?isNaN(e.y)&&(r=100*Math.random()):r=c.y,isNaN(e.x)||isNaN(e.y)?(e.x=i,e.y=r):(i=e.x-i,r=e.y-r,this.updateComboSucceeds(e.id,i,r,s)),(i=u.addGroup()).setZIndex(e.depth),o=(l=new Ks({model:e,styles:h,animate:!1,bbox:e.collapsed?An([],a):c,group:i})).getModel(),(s||[]).forEach((function(t){var e=a.findById(t.id);l.addChild(e),t.depth=o.depth+2})));if(l)return a.get("".concat(t,"s")).push(l),a.get("itemMap")[l.get("id")]=l,a.emit("afteradditem",{item:l,model:e}),l},tu.prototype.updateItem=function(t,e){var n,r,i,o,a,s,u,c,l,h=this,f=this.graph;(t=(0,w.isString)(t)?f.findById(t):t)&&!t.destroyed&&(n="",t.getType&&(n=t.getType()),a=f.get(n+"Mapper"),c=(r=t.getModel()).x,l=r.y,i=t.getUpdateType(e),a?(a=a((0,w.deepMix)({},r,e)),o=(0,w.deepMix)({},r,a,e),a[Qs]&&(t.set("styles",o[Qs]),delete o[Qs]),(0,w.each)(o,(function(t,n){e[n]=t}))):(0,w.each)(e,(function(t,n){r[n]&&(0,w.isObject)(t)&&!(0,w.isArray)(t)&&(e[n]=k(k({},r[n]),e[n]))})),f.emit("beforeupdateitem",{item:t,cfg:e}),n===$s?(e.source&&(a=e.source,(0,w.isString)(a)&&(a=f.findById(a)),t.setSource(a)),e.target&&(o=e.target,(0,w.isString)(o)&&(o=f.findById(o)),t.setTarget(o)),t.update(e)):n===Zs?(t.update(e,i),a=t.getEdges(),u=(null==i?void 0:i.includes("bbox"))||"move"===i,"move"===i?(0,w.each)(a,(function(t){h.edgeToBeUpdateMap[t.getID()]={edge:t,updateType:i},h.throttleRefresh()})):u&&(0,w.each)(a,(function(t){t.refresh(i)}))):n===Js&&(t.update(e,i),isNaN(e.x)&&isNaN(e.y)||(o=e.x-c||0,a=e.y-l||0,this.updateComboSucceeds(r.id,o,a)),s=t.getEdges(),u=(null==i?void 0:i.includes("bbox"))||"move"===i)&&n===Js&&(c=t.get("shapeFactory"),l=r.type||"circle",(void 0===r.animate||void 0===e.animate?null==(a=null==(o=c[l])?void 0:o.options)?void 0:a.animate:r.animate||e.animate)?setTimeout((function(){var e;t&&!t.destroyed&&(e=t.getKeyShape())&&!e.destroyed&&(0,w.each)(s,(function(t){t&&!t.destroyed&&t.refresh()}))}),201):(0,w.each)(s,(function(t){t.refresh()}))),f.emit("afterupdateitem",{item:t,cfg:e}))},tu.prototype.updateCombo=function(t,e,n){var r,i,o,a=this,s=this.graph;(t=(0,w.isString)(t)?s.findById(t):t)&&!t.destroyed&&(r=t.getModel(),s=(e=An(e,s,t)).x,i=e.y,t.set("bbox",e),e=s,o=i,o=n?(e=isNaN(r.x)?s:r.x,isNaN(r.y)?i:r.y):(e=isNaN(s)?r.x:s,isNaN(i)?r.y:i),t.update({x:e,y:o}),n=t.get("shapeFactory"),s=r.type||"circle",(void 0===r.animate?null==(e=null==(i=n[s])?void 0:i.options)?void 0:e.animate:r.animate)?setTimeout((function(){var e;t&&!t.destroyed&&(e=t.getKeyShape())&&!e.destroyed&&(t.getShapeCfg(r),a.updateComboEdges(t))}),201):this.updateComboEdges(t))},tu.prototype.updateComboEdges=function(t){for(var e=t.getEdges()||[],n=0;n<e.length;n++){var r=e[n];r&&!r.destroyed&&r.refresh()}},tu.prototype.collapseCombo=function(t,e){void 0===e&&(e=!0);var n=this.graph;t=(t=(0,w.isString)(t)?n.findById(t):t).getChildren();t.nodes.forEach((function(t){n.hideItem(t,e)})),t.combos.forEach((function(t){n.hideItem(t,e)}))},tu.prototype.updateComboSucceeds=function(t,e,n,r){var i,o=this,a=(void 0===r&&(r=[]),this.graph);(e||n)&&(null!=(i=r)&&i.length||null!=(r=a.get("comboTrees"))&&r.forEach((function(e){bn(e,(function(e){return e.id!==t||(i=e.children,!1)}))})),null!=i)&&i.forEach((function(t){var r=a.findById(t.id);r&&(r=r.getModel(),o.updateItem(t.id,{x:(r.x||0)+e,y:(r.y||0)+n}))}))},tu.prototype.expandCombo=function(t,e){void 0===e&&(e=!0);var n=this.graph;t=(t=(0,w.isString)(t)?n.findById(t):t).getChildren();t.nodes.forEach((function(t){n.showItem(t,e)})),t.combos.forEach((function(t){t.getModel().collapsed?t.show():n.showItem(t,e)}))},tu.prototype.removeItem=function(t){var e=this,n=this.graph;if((t=(0,w.isString)(t)?n.findById(t):t)&&!t.destroyed){var r=(0,w.clone)(t.getModel()),i=(n.emit("beforeremoveitem",{item:r}),""),o=(t.getType&&(i=t.getType()),n.get("".concat(i,"s"))),a=o.indexOf(t),s=(o=(-1<a&&o.splice(a,1),i===$s&&-1<(a=(o=n.get("v".concat(i,"s"))).indexOf(t))&&o.splice(a,1),t.get("id")),a=(delete n.get("itemMap")[o],n.get("comboTrees")),t.get("id"));if(i===Zs){var u,c;o=t.getModel().comboId;a&&o&&(c=!1,(u=a).forEach((function(t){c||bn(t,(function(t){var e;return t.id===s&&u?(e=u.indexOf(t),u.splice(e,1),!(c=!0)):(u=t.children,!0)}))})));for(var l=(d=t.getEdges()).length-1;0<=l;l--)n.removeItem(d[l],!1);o&&n.updateCombo(o)}else if(i===Js){o=t.getModel().parentId;var h,f=!1;(a||[]).forEach((function(t){f||bn(t,(function(t){return t.id!==s||(h=t,!(f=!0))}))})),h.removed=!0,h&&h.children&&h.children.forEach((function(t){e.removeItem(t.id)}));var d;for(l=(d=t.getEdges()).length;0<=l;l--)n.removeItem(d[l],!1);o&&n.updateCombo(o)}t.destroy(),n.emit("afterremoveitem",{item:r,type:i})}},tu.prototype.setItemState=function(t,e,n){var r=this.graph,i=e;(0,w.isString)(n)&&(i="".concat(e,":").concat(n)),t.hasState(i)===n&&n||(0,w.isString)(n)&&t.hasState(i)||(r.emit("beforeitemstatechange",{item:t,state:i,enabled:n}),t.setState(e,n),r.autoPaint(),r.emit("afteritemstatechange",{item:t,state:i,enabled:n}))},tu.prototype.priorityState=function(t,e){var n=this.graph,r=t;(0,w.isString)(t)&&(r=n.findById(t)),this.setItemState(r,e,!1),this.setItemState(r,e,!0)},tu.prototype.clearItemStates=function(t,e){var n=this.graph;(0,w.isString)(t)&&(t=n.findById(t)),n.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),n.emit("afteritemstatesclear",{item:t,states:e})},tu.prototype.refreshItem=function(t){var e=this.graph;(0,w.isString)(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},tu.prototype.addCombos=function(t,e){var n=this,r=this.graph;(t||[]).forEach((function(t){xn(t,(function(t){var r;return e.forEach((function(e){e.id===t.id&&(e.children=t.children,e.depth=t.depth,r=e)})),r&&n.addItem("combo",r),!0}))})),t=r.get("comboGroup");t&&t.sort()},tu.prototype.changeItemVisibility=function(t,e){var n,r,i,o,a,s=this,u=this.graph;if(t=(0,w.isString)(t)?u.findById(t):t)return u.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&t.getType()===Zs?(a=t.getEdges(),(0,w.each)(a,(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&s.changeItemVisibility(t,e)}))):t.getType&&t.getType()===Js&&(n=u.get("comboTrees"),r=t.get("id"),o=!(i=[]),(n||[]).forEach((function(t){o||t.children&&0!==t.children.length&&bn(t,(function(t){return t.id!==r||(i=t.children,!(o=!0))}))})),!i||e&&t.getModel().collapsed||i.forEach((function(t){t=u.findById(t.id),s.changeItemVisibility(t,e)})),a=t.getEdges(),(0,w.each)(a,(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&s.changeItemVisibility(t,e)}))),u.emit("afteritemvisibilitychange",{item:t,visible:e}),t},tu.prototype.destroy=function(){this.graph=null,this.destroyed=!0};var eu=tu,nu=null;function ru(t){this.graph=t,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}ru.checkCache=function(t,e,n){n[e]&&0<=(t=n[e].indexOf(t))&&n[e].splice(t,1)},ru.cacheState=function(t,e,n){n[e]||(n[e]=[]),n[e].push(t)},ru.prototype.updateState=function(t,e,n){var r,i,o=this,a=ru.checkCache,s=ru.cacheState;t.destroyed||(r=(i=this.cachedStates).enabled,i=i.disabled,n?(a(t,e,i),s(t,e,r)):(a(t,e,r),s(t,e,i)),nu&&clearTimeout(nu),nu=setTimeout((function(){nu=null,o.updateGraphStates()}),16))},ru.prototype.updateStates=function(t,e,n){var r=this;(0,w.isString)(e)?this.updateState(t,e,n):e.forEach((function(e){r.updateState(t,e,n)}))},ru.prototype.updateGraphStates=function(){var t=this.graph.get("states"),e=this.cachedStates;(0,w.each)(e.disabled,(function(e,n){t[n]&&(t[n]=t[n].filter((function(t){return e.indexOf(t)<0&&!e.destroyed})))})),(0,w.each)(e.enabled,(function(e,n){var r;t[n]?(r={},t[n].forEach((function(t){t.destroyed||(r[t.get("id")]=!0)})),e.forEach((function(e){var i;e.destroyed||(i=e.get("id"),r[i])||(r[i]=!0,t[n].push(e))}))):t[n]=e})),this.graph.emit("graphstatechange",{states:t}),this.cachedStates={enabled:{},disabled:{}}},ru.prototype.destroy=function(){this.graph=null,this.cachedStates=null,nu&&clearTimeout(nu),nu=null,this.destroyed=!0};var iu=ru,ou=function(t){var e=[];if(t.length<2)throw new Error("point length must largn than 2, now it's ".concat(t.length));for(var n=0,r=t;n<r.length;n++){var i=r[n],o=i.x;i=i.y;e.push(o),e.push(i)}var a=qa(e);return a.unshift(["M",t[0].x,t[0].y]),a},au=function(t,e,n,r){void 0===r&&(r=0);n={x:(1-(n=void 0===n?0:n))*t.x+n*e.x,y:(1-n)*t.y+n*e.y};var i=[0,0];me.normalize(i,[e.x-t.x,e.y-t.y]),e=[-(i=i&&(i[0]||i[1])?i:[0,0])[1]*r,i[0]*r];return n.x+=e[0],n.y+=e[1],n},su=function(t,e){var n=t.length;if(!n)return"";for(var r="",i=0;i<n;i++)r+=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):(t=0===(t=e[n])?"0":t)||""})):t}(0===i?"M{x} {y}":"L{x} {y}",t[i]);return e&&(r+="Z"),r},uu=function(t){var e=[];return t.forEach((function(t){if("A"!==t[0])for(var n=1;n<t.length;n+=2)e.push([t[n],t[n+1]]);else{var r=t.length;e.push([t[r-2],t[r-1]])}})),e},cu=function(t){if(t.length<2)throw new Error("point length must largn than 2, now it's ".concat(t.length));for(var e=t[0],n=t[1],r=t[t.length-1],i=t[t.length-2],o=(t.unshift(r),t.unshift(i),t.push(e),t.push(n),[]),a=1;a<t.length-2;a+=1){var s=t[a-1].x,u=t[a-1].y,c=t[a].x,l=t[a].y,h=t[a+1].x,f=t[a+1].y,d=a!==t.length-2?t[a+2].x:h,p=a!==t.length-2?t[a+2].y:f;o.push(["C",c+(h-s)/6,l+(f-u)/6,h-(d-c)/6,f-(p-l)/6,h,f])}return o.unshift(["M",r.x,r.y]),o},lu=function(t,e){return me.scale([0,0],me.normalize([0,0],t),e)},hu=function(t,e){if(e=[t[1]-e[1],e[0]-t[0]],t=Math.sqrt(e[0]*e[0]+e[1]*e[1]),0===t)throw new Error("p0 should not be equal to p1");return[e[0]/t,e[1]/t]},fu=function(t,e){return[e[0]-t[0],e[1]-t[1]]};function du(t,e){var n,r,i,o,a;if(!t||t.length<1)return"";if(1===t.length)return r=[(n=t)[0][0],t[0][1]-e],n=[t[0][0],t[0][1]+e],"M ".concat(r," A ").concat(e,",").concat(e,",0,0,0,").concat(n," A ").concat(e,",").concat(e,",0,0,0,").concat(r);if(2===t.length)return n=t,r=me.scale([0,0],hu(n[0],n[1]),e),i=me.scale([0,0],r,-1),o=me.add([0,0],n[0],r),r=me.add([0,0],n[1],r),a=me.add([0,0],n[1],i),n=me.add([0,0],n[0],i),"M ".concat(o," L ").concat(r," A ").concat([e,e,"0,0,0",a].join(",")," L ").concat(n," A ").concat([e,e,"0,0,0",o].join(","));for(var s=new Array(t.length),u=0;u<s.length;++u){var c=0===u?t[t.length-1]:t[u-1],l=t[u],h=me.scale([0,0],hu(c,l),e);s[u]=[me.add([0,0],c,h),me.add([0,0],l,h)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return(s=s.map((function(t,e){var n="";return 0===e&&(n="M ".concat(s[s.length-1][1]," ")),n+"".concat(f+t[0]," L ").concat(t[1])}))).join(" ")}function pu(t,e){var n,r,i,o,a,s=t.length;if(!t||s<1)return"";if(1===s)return r=[(n=t)[0][0],t[0][1]-e],n=[t[0][0],t[0][1]+e],"M ".concat(r," A ").concat([e,e,"0,0,0",n].join(",")," A ").concat([e,e,"0,0,0",r].join(","));if(2===s)return r=fu((n=t)[0],n[1]),i=lu(r,e),o=me.add([0,0],n[0],me.scale([0,0],i,-1)),n=me.add([0,0],n[1],i),i=1.2*e,r=lu(me.normalize([0,0],r),i),i=me.scale([0,0],r,-1),a=me.add([0,0],o,i),i=me.add([0,0],n,i),r=me.add([0,0],o,r),"M ".concat(o," C ").concat([a,i,n].join(",")," S ").concat([r,o].join(",")," Z");for(var u=t.map((function(e,n){return n=t[(n+1)%s],{p:e,v:me.normalize([0,0],fu(e,n))}})),c=0;c<u.length;++c){var l=me.normalize([0,0],me.add([0,0],u[0<c?c-1:s-1].v,me.scale([0,0],u[c].v,-1)));u[c].p=me.add([0,0],u[c].p,me.scale([0,0],l,e))}return u.map((function(t){return t=t.p,{x:t[0],y:t[1]}}))}function gu(t,e,n){return(t.y-n.y)*(e.x-n.x)-(t.x-n.x)*(e.y-n.y)}function mu(t){var e=t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}}));if(e.sort((function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x})),1===e.length)return e;for(var n=[],r=0;r<e.length;r++){for(;2<=n.length&&gu(n[n.length-2],n[n.length-1],e[r])<=0;)n.pop();n.push(e[r])}var i=[];for(r=e.length-1;0<=r;r--){for(;2<=i.length&&gu(i[i.length-2],i[i.length-1],e[r])<=0;)i.pop();i.push(e[r])}return i.pop(),n.pop(),n.concat(i)}var vu={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function yu(t,e,n){function r(t,n){return e.cells[t+n*e.width]}function i(t,e){var i=0;return r(t-1,e-1)>=n&&(i+=1),r(t,e-1)>n&&(i+=2),r(t-1,e)>n&&(i+=4),r(t,e)>n&&(i+=8),i}var o=!1;this.march=function(){for(var a=0;a<e.width&&!o;a+=1)for(var s=0;s<e.height&&!o;s+=1)r(a,s)>n&&15!==i(a,s)&&(o=function(n,r){for(var o,a,s=n,u=r,c=0;c<e.width*e.height;c++){if(o=s,a=u,-1<t.findIndex((function(t){return t.x===s&&t.y===u}))){if(t[0].x===s&&t[0].y===u)return!0}else t.push({x:s,y:u});var l=i(s,u);switch(l){case-1:return!0;case 0:case 3:case 2:case 7:s++;break;case 12:case 14:case 4:s--;break;case 6:0===o&&(-1===a?--s:s+=1);break;case 1:case 13:case 5:u--;break;case 9:1===o&&(0===a?--u:u+=1);break;case 10:case 8:case 11:u++;break;default:return!0}}}(a,s));return o}}var bu=function(t,e,n){var r=null,i=Number.POSITIVE_INFINITY;return e.forEach((function(e){var o={x:t.getModel().x,y:t.getModel().y},a={x:e.getModel().x,y:e.getModel().y},s=qe(o,a),u=new je(o.x,o.y,a.x,a.y);o=n.reduce((function(t,e){return 0<He(e,u)?t+1:t}),0);s*Math.pow(o+1,2)<i&&(r=e,i=s*Math.pow(o+1,2))})),r},xu=function(t,e){var n=Number.POSITIVE_INFINITY,r=null;return t.forEach((function(t){var i=He(t,e);0<=i&&i<n&&(r=t,n=i)})),r},_u=function(t,e,n,r){for(var i=[],o=[],a=(o.push(t),!0),s=0,u=function(t,e){var n=!1;return e.forEach((function(e){n||(Ke(t,{x:e.x1,y:e.y1})||Ke(t,{x:e.x2,y:e.y2}))&&(n=!0)})),n},c=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n].getBBox();i=[[i.x,i.y],[i.x+i.width,i.y],[i.x,i.y+i.height],[i.x+i.width,i.y+i.height]];if(Le(i,t.x,t.y))return!0}return!1};a&&s<n;)for(a=!1;!a&&o.length;)!function(){var t,n,l=o.pop(),h=xu(e,l);h&&(n=We(h,l),t=n[0],2===n[1])&&((n=function(n){for(var s=r,f=Su(h,s,t,n),d=u(f,o)||u(f,i),p=c(f,e);!d&&p&&1<=s;)f=Su(h,s/=1.5,t,n),d=u(f,o)||u(f,i),p=c(f,e);!f||d||n&&p||(o.push(new je(l.x1,l.y1,f.x,f.y)),o.push(new je(f.x,f.y,l.x2,l.y2)),a=!0)})(!0),a||n(!1)),a||i.push(l),s+=1}();for(;o.length;)i.push(o.pop());return i};function wu(t,e,n){for(var r=Object.assign(vu,n),i=Ye(t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}}))),o=(t=t.sort((function(t,e){return qe({x:t.getModel().x,y:t.getModel().y},i)-qe({x:e.getModel().x,y:e.getModel().y},i)})),[]),a=[],s=(t.forEach((function(t){(function(t,e,n,r,i){if(null===(n=bu(t,n,e)))return[];t=new je(t.getModel().x,t.getModel().y,n.getModel().x,n.getModel().y);for(var o=_u(t,e,r,i),a=[];0<o.length;){var s=o.pop();if(0===o.length){a.push(s);break}var u=o.pop(),c=new je(s.x1,s.y1,u.x2,u.y2);xu(e,c)?(a.push(s),o.push(u)):o.push(c)}return a})(t,e,o,r.maxRoutingIterations,r.morphBuffer).forEach((function(t){a.push(t)})),o.push(t)})),function(t,e,n){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];t.forEach((function(t){i.push(t.getBBox())})),e.forEach((function(t){i.push(t.getBBox())}));for(var o=0,a=i;o<a.length;o++){var s=a[o];r.minX=(s.minX<r.minX?s:r).minX-n,r.minY=(s.minY<r.minY?s:r).minY-n,r.maxX=(s.maxX>r.maxX?s:r).maxX+n,r.maxY=(s.maxY>r.maxY?s:r).maxY+n}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}(t,a,r.nodeR0)),u=function(t,e,n){return t=Math.ceil(t/n),e=Math.ceil(e/n),{cells:new Float32Array(Math.max(0,t*e)).fill(0),width:t,height:e}}(s.width,s.height,r.pixelGroupSize),c=[],l=[],h=0;h<r.maxMarchingIterations;h++)if(function(t,e,n,r,i,o){function a(t,e){return t=Math.floor((t-e)/o.pixelGroupSize),t<0?0:t}function s(t,e){return t*o.pixelGroupSize+e}function u(t,e){return[Math.min(a(t.minX,e+r.minX),i.width),Math.min(a(t.minY,e+r.minY),i.height),Math.min(a(t.maxX,-e+r.minX),i.width),Math.min(a(t.maxY,-e+r.minY),i.height)]}function c(t,e){for(var n=t.getBBox(),a=(t=u(n,o.nodeR1))[0],c=t[1],l=t[2],h=t[3],f=c;f<h;f+=1)for(var d,p,g=a;g<l;g+=1)e<0&&i[g+f*i.width]<=0||(d=s(g,r.minX),p=s(f,r.minY),(d=Ze({x:d,y:p},{x:n.minX,y:n.minY,width:n.width,height:n.height}))<Math.pow(o.nodeR1,2)&&(p=Math.sqrt(d)-o.nodeR1,i.cells[g+f*i.width]+=e*p*p))}var l=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),h=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1);o.nodeInfluenceFactor&&t.forEach((function(t){c(t,o.nodeInfluenceFactor/l)})),o.edgeInfluenceFactor&&n.forEach((function(t){for(var e=t,n=o.edgeInfluenceFactor/h,a=(t=e.getBBox(),(t=u(t,o.edgeR1))[0]),c=t[1],l=t[2],f=t[3],d=c;d<f;d+=1)for(var p,g,m=a;m<l;m+=1)n<0&&i.cells[m+d*i.width]<=0||(p=s(m,r.minX),g=s(d,r.minY),(p=Xe({x:p,y:g},e))<Math.pow(o.edgeR1,2)&&(g=Math.sqrt(p)-o.edgeR1,i.cells[m+d*i.width]+=n*g*g))})),o.negativeNodeInfluenceFactor&&e.forEach((function(t){c(t,o.negativeNodeInfluenceFactor/l)}))}(t,e,a,s,u,r),l=[],new yu(c=[],u,r.threshold).march()){var f=c.map((function(t){return{x:Math.round(t.x*r.pixelGroupSize+s.minX),y:Math.round(t.y*r.pixelGroupSize+s.minY)}}));if(f){var d=f.length;if(1<r.skip)for(d=Math.floor(f.length/r.skip);d<3&&1<r.skip;)--r.skip,d=Math.floor(f.length/r.skip);for(var p=0,g=0;g<d;g+=1,p+=r.skip)l.push({x:f[p].x,y:f[p].y})}if(l&&function(){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=l.map((function(t){return[t.x,t.y]}));if(!Le(i,r.getBBox().centerX,r.getBBox().centerY))return!1}return!0}())return l;if(r.threshold*=.9,h<=.5*r.maxMarchingIterations)r.memberInfluenceFactor*=1.2,r.edgeInfluenceFactor*=1.2;else{if(!(0!==r.nonMemberInfluenceFactor&&0<e.length))break;r.nonMemberInfluenceFactor*=.8}}return l}function Su(t,e,n,r){var i=t.getBBox(),o=(t=n[0],n[1]),a=n[2],s=(n=n[3],{x:i.minX-e,y:i.minY-e}),u={x:i.maxX+e,y:i.minY-e},c={x:i.minX-e,y:i.maxY+e},l=(e={x:i.maxX+e,y:i.maxY+e},i.height*i.width);function h(t,e){return i.width*(.5*(t.y-i.minY+(e.y-i.minY)))}if(o)return t?r?s:e:a?r?c:u:h(o,n)<.5*l?o.y>n.y?r?s:e:r?u:c:o.y<n.y?r?c:u:r?e:s;if(n){if(t)return r?u:c;if(a)return r?e:s}return h(t,a)<.5*l?t.x>a.x?r?s:e:r?c:u:t.x<a.x?r?u:c:r?e:s}function Eu(t,e){this.cfg=(0,w.deepMix)(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map((function(e){return(0,w.isString)(e)?t.findById(e):e})),this.nonMembers=this.cfg.nonMembers.map((function(e){return(0,w.isString)(e)?t.findById(e):e})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}Eu.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},Eu.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=0<this.cfg.padding?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},Eu.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(this.type="round-convex")},Eu.prototype.calcPath=function(t,e){var n,r,i;switch(this.type){case"round-convex":r=Za(i=du((n=mu(t)).map((function(t){return[t.x,t.y]})),this.padding));break;case"smooth-convex":2===(n=mu(t)).length?r=Za(i=du(n.map((function(t){return[t.x,t.y]})),this.padding)):2<n.length&&(i=pu(n.map((function(t){return[t.x,t.y]})),this.padding),r=cu(i));break;case"bubble":r=2<=(n=wu(t,e,this.cfg.bubbleCfg)).length&&cu(n)}return r},Eu.prototype.render=function(){this.group.addShape("path",{attrs:k({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},Eu.prototype.addMember=function(t){if(t)return(0,w.isString)(t)&&(t=this.graph.findById(t)),this.members.push(t),-1<(t=this.nonMembers.indexOf(t))&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0},Eu.prototype.addNonMember=function(t){if(t)return(0,w.isString)(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t),-1<(t=this.members.indexOf(t))&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0},Eu.prototype.removeMember=function(t){if(t)return(0,w.isString)(t)&&(t=this.graph.findById(t)),-1<(t=this.members.indexOf(t))&&(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0)},Eu.prototype.removeNonMember=function(t){if(t)return(0,w.isString)(t)&&(t=this.graph.findById(t)),-1<(t=this.nonMembers.indexOf(t))&&(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0)},Eu.prototype.updateData=function(t,e){var n=this;this.group.findById(this.id).remove(),t&&(this.members=t.map((function(t){return(0,w.isString)(t)?n.graph.findById(t):t}))),e&&(this.nonMembers=e.map((function(t){return(0,w.isString)(t)?n.graph.findById(t):t}))),this.path=this.calcPath(this.members,this.nonMembers),this.render()},Eu.prototype.updateStyle=function(t){this.group.findById(this.id).attr(k({},t))},Eu.prototype.updateCfg=function(t){var e=this;this.cfg=(0,w.deepMix)(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map((function(t){return(0,w.isString)(t)?e.graph.findById(t):t}))),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map((function(t){return(0,w.isString)(t)?e.graph.findById(t):t}))),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},Eu.prototype.contain=function(t){var e=this,n=(t=(0,w.isString)(t)?this.graph.findById(t):t,t.getKeyShape());return n=(n="path"===t.get("type")?uu(n.attr("path")):[[(t=n.getCanvasBBox()).minX,t.minY],[t.maxX,t.minY],[t.maxX,t.maxY],[t.minX,t.maxY]]).map((function(t){return t=e.graph.getPointByCanvas(t[0],t[1]),[t.x,t.y]})),Be(n,uu(this.path))},Eu.prototype.destroy=function(){this.group.remove(),this.cfg=null};var Mu,Au=Eu,Cu=L;function Tu(t){var e=Mu.call(this)||this;return e.sortCombos=(0,w.debounce)((function(){var t,n,r=e.get("comboSorted");!e||e.destroyed||r||(e.set("comboSorted",!0),t=[],n={},(e.get("comboTrees")||[]).forEach((function(e){bn(e,(function(e){return t[e.depth]?t[e.depth].push(e.id):t[e.depth]=[e.id],n[e.id]=e.depth,!0}))})),(e.getEdges().concat(e.get("vedges"))||[]).forEach((function(e){e=e.getModel();var r=n[e.source]||0,i=n[e.target]||0;r=Math.max(r,i);t[r]?t[r].push(e.id):t[r]=[e.id]})),t.forEach((function(t){if(t&&t.length)for(var n=t.length-1;0<=n;n--){var r=e.findById(t[n]);r&&r.toFront()}})))}),500,!1),e.cfg=(0,w.deepMix)(e.getDefaultCfg(),t),e.init(),e.animating=!1,e.destroyed=!1,e.cfg.enabledStack&&(e.undoStack=new fe(e.cfg.maxStep),e.redoStack=new fe(e.cfg.maxStep)),e}function ku(t){return(ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}T(Tu,Mu=N),Tu.prototype.init=function(){this.initCanvas();var t=new bs(this),e=new zn(this),n=new eu(this),r=new iu(this);this.set({viewController:t,modeController:e,itemController:n,stateController:r}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},Tu.prototype.initGroups=function(){var t,e,n,r,i=this.get("canvas");i&&(t=(i.get("el")||{}).id,t=i.addGroup({id:"".concat(i=void 0===t?"g6":t,"-root"),className:cn.rootContainerClassName}),this.get("groupByTypes")&&(e=t.addGroup({id:"".concat(i,"-edge"),className:cn.edgeContainerClassName}),r=t.addGroup({id:"".concat(i,"-node"),className:cn.nodeContainerClassName}),(n=t.addGroup({id:"".concat(i,"-combo"),className:cn.comboContainerClassName})).toBack(),this.set({nodeGroup:r,edgeGroup:e,comboGroup:n})),r=t.addGroup({id:"".concat(i,"-delegate"),className:cn.delegateContainerClassName}),this.set({delegateGroup:r}),this.set("group",t))},Tu.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},Tu.prototype.set=function(t,e){return(0,w.isPlainObject)(t)?this.cfg=k(k({},this.cfg),t):this.cfg[t]=e,"enabledStack"!==t||!e||this.undoStack||this.redoStack||(this.undoStack=new fe(this.cfg.maxStep),this.redoStack=new fe(this.cfg.maxStep)),this},Tu.prototype.get=function(t){var e;return null==(e=this.cfg)?void 0:e[t]},Tu.prototype.getGroup=function(){return this.get("group")},Tu.prototype.getContainer=function(){return this.get("container")},Tu.prototype.getMinZoom=function(){return this.get("minZoom")},Tu.prototype.setMinZoom=function(t){return this.set("minZoom",t)},Tu.prototype.getMaxZoom=function(){return this.get("maxZoom")},Tu.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},Tu.prototype.getWidth=function(){return this.get("width")},Tu.prototype.getHeight=function(){return this.get("height")},Tu.prototype.clearItemStates=function(t,e){(0,w.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");e=e||t.get("states"),n.clearItemStates(t,e),this.get("stateController").updateStates(t,e,!1)},Tu.prototype.node=function(t){"function"==typeof t&&this.set("nodeMapper",t)},Tu.prototype.edge=function(t){"function"==typeof t&&this.set("edgeMapper",t)},Tu.prototype.combo=function(t){"function"==typeof t&&this.set("comboMapper",t)},Tu.prototype.findById=function(t){return this.get("itemMap")[t]},Tu.prototype.find=function(t,e){var n;t=this.get("".concat(t,"s"));return(0,w.each)(t,(function(t,r){if(e(t,r))return n=t})),n},Tu.prototype.findAll=function(t,e){var n=[];return(0,w.each)(this.get("".concat(t,"s")),(function(t,r){e(t,r)&&n.push(t)})),n},Tu.prototype.findAllByState=function(t,e,n){return n?this.findAll(t,(function(t){return t.hasState(e)&&n(t)})):this.findAll(t,(function(t){return t.hasState(e)}))},Tu.prototype.translate=function(t,e,n,r){var i=this,o=this.get("group"),a=(a=(0,w.clone)(o.getMatrix()))||[1,0,0,0,1,0,0,0,1];n?(r=kn({animateCfg:r,callback:function(){return i.emit("viewportchange",{action:"translate",matrix:o.getMatrix()})}}),Pe(o,{x:o.getCanvasBBox().x+t,y:o.getCanvasBBox().y+e},n,r||{duration:500,easing:"easeCubic"})):(a=Cu(a,[["t",t,e]]),o.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:a}),this.autoPaint())},Tu.prototype.moveTo=function(t,e,n,r){var i=this.get("group");Pe(i,{x:t,y:e},n,r||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:i.getMatrix()})},Tu.prototype.fitView=function(t,e,n,r){t&&this.set("fitViewPadding",t),t=this.get("viewController"),e?t.fitViewByRules(e,n,r):t.fitView(n,r),this.autoPaint()},Tu.prototype.fitCenter=function(t,e){this.get("viewController").fitCenter(t,e),this.autoPaint()},Tu.prototype.addBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!0),this},Tu.prototype.removeBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!1),this},Tu.prototype.updateBehavior=function(t,e,n){return this.get("modeController").updateBehavior(t,e,n),this},Tu.prototype.zoom=function(t,e,n,r){var i,o,a,s=this,u=this.get("group"),c=(0,w.clone)(u.getMatrix())||[1,0,0,0,1,0,0,0,1],l=this.get("minZoom"),h=this.get("maxZoom"),f=this.getZoom()||1,d=f*t,p=!1;return l&&d<l?(t=l/f,p=!0):h&&h<d&&(t=h/f,p=!0),c=Cu(c,e?[["t",-e.x,-e.y],["s",t,t],["t",e.x,e.y]]:[["s",t,t]]),n?(i=(0,w.clone)(u.getMatrix()),o=(i=i||[1,0,0,0,1,0,0,0,1])[0],a=o*t,l=kn({animateCfg:r,callback:function(){return s.emit("viewportchange",{action:"zoom",matrix:u.getMatrix()})}}),u.animate((function(t){return{matrix:i=1===t?c:(t=Je(o,a,t)/i[0],Cu(i,e?[["t",-e.x,-e.y],["s",t,t],["t",e.x,e.y]]:[["s",t,t]]))}}),l)):(u.setMatrix(c),this.emit("viewportchange",{action:"zoom",matrix:c}),this.autoPaint()),!p},Tu.prototype.zoomTo=function(t,e,n,r){return t/=this.getZoom(),this.zoom(t,e,n,r)},Tu.prototype.focusItem=function(t,e,n){var r=this.get("viewController"),i=!1;e?i=!0:void 0===e&&(i=this.get("animate")),e={};n?e=n:void 0===n&&(e=this.get("animateCfg")),r.focus(t,i,e),this.autoPaint()},Tu.prototype.focusItems=function(t,e,n,r){this.get("viewController").focusItems(t,e,n,r)},Tu.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},Tu.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},Tu.prototype.getPointByClient=function(t,e){return this.get("viewController").getPointByClient(t,e)},Tu.prototype.getClientByPoint=function(t,e){return this.get("viewController").getClientByPoint(t,e)},Tu.prototype.getPointByCanvas=function(t,e){return this.get("viewController").getPointByCanvas(t,e)},Tu.prototype.getCanvasByPoint=function(t,e){return this.get("viewController").getCanvasByPoint(t,e)},Tu.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},Tu.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},Tu.prototype.showItem=function(t,e){if(void 0===e&&(e=!0),t=this.get("itemController").changeItemVisibility(t,!0),e&&this.get("enabledStack")){var n=t.getID(),r={},i={};switch(t.getType()){case"node":r.nodes=[{id:n,visible:!1}],i.nodes=[{id:n,visible:!0}];break;case"edge":r.nodes=[{id:n,visible:!1}],i.edges=[{id:n,visible:!0}];break;case"combo":r.nodes=[{id:n,visible:!1}],i.combos=[{id:n,visible:!0}]}this.pushStack("visible",{before:r,after:i})}},Tu.prototype.hideItem=function(t,e){if(void 0===e&&(e=!0),t=this.get("itemController").changeItemVisibility(t,!1),e&&this.get("enabledStack")){var n=t.getID(),r={},i={};switch(t.getType()){case"node":i.nodes=[{id:n,visible:!(r.nodes=[{id:n,visible:!0}])}];break;case"edge":i.edges=[{id:n,visible:!(r.nodes=[{id:n,visible:!0}])}];break;case"combo":i.combos=[{id:n,visible:!(r.nodes=[{id:n,visible:!0}])}]}this.pushStack("visible",{before:r,after:i})}},Tu.prototype.refreshItem=function(t){this.get("itemController").refreshItem(t)},Tu.prototype.setAutoPaint=function(t){this.set("autoPaint",t),this.get("canvas").set("autoDraw",t)},Tu.prototype.remove=function(t,e){this.removeItem(t,e=void 0===e||e)},Tu.prototype.removeItem=function(t,e){void 0===e&&(e=!0);var n=t;if(((n=(0,w.isString)(t)?this.findById(t):n)||!(0,w.isString)(t))&&n){if(t="",n.getType&&(t=n.getType()),e&&this.get("enabledStack")){var r=k(k({},n.getModel()),{itemType:t}),i={};switch(t){case"node":i.nodes=[r],i.edges=[];for(var o=n.getEdges(),a=o.length-1;0<=a;a--)i.edges.push(k(k({},o[a].getModel()),{itemType:"edge"}));break;case"edge":i.edges=[r];break;case"combo":i.combos=[r]}this.pushStack("delete",{before:i,after:{}})}"node"===t&&n.getModel().comboId&&this.updateComboTree(n,void 0,!1),this.get("itemController").removeItem(n),"combo"===t&&(e=Mn(this.get("comboTrees")),this.set("comboTrees",e))}},Tu.prototype.innerAddItem=function(t,e,n){var r,i,o,a,s,u,c,l,h,f=this;return!!function(t,e){if("node"===t||"combo"===t){if(e.id&&!(0,w.isString)(e.id))return!1}else if(!("edge"!==t||e.source&&e.target))return!1;return!0}(t,e)&&(e.id&&this.findById(e.id)?void 0:(i=this.get("comboTrees")||[],"combo"===t?(o=this.get("itemMap"),a=!1,i.forEach((function(i){a||xn(i,(function(i){e.parentId===i.id&&(a=!0,s=k({id:e.id,depth:i.depth+2},e),i.children?i.children.push(s):i.children=[s],e.depth=s.depth,r=n.addItem(t,e));var s=o[i.id];return a&&s&&s.getType&&"combo"===s.getType()&&n.updateCombo(s,i.children),!0}))})),a||(s=k({id:e.id,depth:0},e),e.depth=s.depth,i.push(s),r=n.addItem(t,e)),this.set("comboTrees",i),e.collapsed&&setTimeout((function(){r&&!r.destroyed&&(f.collapseCombo(r,!1),f.updateCombo(r))}),0)):"node"===t&&(0,w.isString)(e.comboId)&&i?((h=this.findById(e.comboId))&&h.getType&&h.getType(),r=n.addItem(t,e),u=this.get("itemMap"),l=c=!1,i.forEach((function(t){l||c||xn(t,(function(t){var r;return t.id===e.id?!(l=!0):(e.comboId!==t.id||l||(c=!0,(r=(0,w.clone)(e)).itemType="node",t.children?t.children.push(r):t.children=[r],r.depth=t.depth+1),c&&u[t.id].getType&&"combo"===u[t.id].getType()&&n.updateCombo(u[t.id],t.children),!0)}))}))):r=n.addItem(t,e),("node"===t&&e.comboId||"combo"===t&&e.parentId)&&(h=this.findById(e.comboId||e.parentId))&&h.getType&&"combo"===h.getType()&&h.addChild(r),r))},Tu.prototype.addItem=function(t,e,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0);var i=this.get("comboSorted");this.set("comboSorted",i&&!r),i=this.get("itemController"),r=this.innerAddItem(t,e,i);if(!1!==r&&!0!==r&&(e=this.get("combos"),e&&0<e.length&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack"))){var o=k(k({},r.getModel()),{itemType:t}),a={};switch(t){case"node":a.nodes=[o];break;case"edge":a.edges=[o];break;case"combo":a.combos=[o]}this.pushStack("add",{before:{},after:a})}return r},Tu.prototype.addItems=function(t,e,n){void 0===t&&(t=[]),void 0===e&&(e=!0),void 0===n&&(n=!0);for(var r=this.get("comboSorted"),i=(this.set("comboSorted",r&&!n),this.get("itemController")),o=[],a=0;a<t.length;a++)"edge"!==(s=t[a]).type&&"vedge"!==s.type?o.push(this.innerAddItem(s.type,s.model,i)):o.push(void 0);var s;for(a=0;a<t.length;a++)"edge"!==(s=t[a]).type&&"vedge"!==s.type||(o[a]=this.innerAddItem(s.type,s.model,i));if(n&&(r=this.get("combos"))&&0<r.length&&this.sortCombos(),this.autoPaint(),e&&this.get("enabledStack")){var u={nodes:[],edges:[],combos:[]};for(a=0;a<t.length;a++){var c=t[a].type,l=o[a];if(l&&!0!==l){var h=k(k({},l.getModel()),{itemType:c});switch(c){case"node":u.nodes.push(h);break;case"edge":u.edges.push(h);break;case"combo":u.combos.push(h)}}}this.pushStack("addItems",{before:{},after:u})}return o},Tu.prototype.add=function(t,e,n,r){return this.addItem(t,e,n=void 0===n||n,r=void 0===r||r)},Tu.prototype.updateItem=function(t,e,n){var r=this,i=(void 0===n&&(n=!0),this.get("itemController")),o=(0,w.isString)(t)?this.findById(t):t,a=(0,w.clone)(o.getModel()),s=(t="",o.getType&&(t=o.getType()),P([],o.getStates(),!0));if("combo"===t&&(0,w.each)(s,(function(t){return r.setItemState(o,t,!1)})),i.updateItem(o,e),"combo"===t&&(0,w.each)(s,(function(t){return r.setItemState(o,t,!0)})),n&&this.get("enabledStack")){var u={nodes:[],edges:[],combos:[]},c={nodes:[],edges:[],combos:[]},l=k({id:a.id},e);switch(t){case"node":u.nodes.push(a),c.nodes.push(l);break;case"edge":u.edges.push(a),c.edges.push(l);break;case"combo":u.combos.push(a),c.combos.push(l)}"node"===t&&u.nodes.push(a),this.pushStack("update",{before:u,after:c})}},Tu.prototype.update=function(t,e,n){this.updateItem(t,e,n=void 0===n||n)},Tu.prototype.setItemState=function(t,e,n){(0,w.isString)(t)&&(t=this.findById(t)),this.get("itemController").setItemState(t,e,n);var r=this.get("stateController");(0,w.isString)(n)?r.updateState(t,"".concat(e,":").concat(n),!0):r.updateState(t,e,n)},Tu.prototype.priorityState=function(t,e){this.get("itemController").priorityState(t,e)},Tu.prototype.data=function(t){Ge(t),this.set("data",t)},Tu.prototype.render=function(){var t=this,e=(this.set("comboSorted",!1),this.get("data"));if(this.get("enabledStack")&&this.clearStack(),!e)throw new Error("data must be defined first");var n=e.nodes,r=(n=void 0===n?[]:n,e.edges),i=(r=void 0===r?[]:r,e.combos),o=(i=void 0===i?[]:i,this.clear(!0),this.emit("beforerender"),t.addItems(n.map((function(t){return{type:"node",model:t}})),!1,!1),0!==(null==i?void 0:i.length)&&(n=En(i,n),this.set("comboTrees",n),t.addCombos(i)),t.addItems(r.map((function(t){return{type:"edge",model:t}})),!1,!1),t.get("animate"));(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1),n=t.get("layoutController");if(n){if(n.layout(a),this.destroyed)return}else a();function a(){(t.get("comboTrees")||[]).forEach((function(e){xn(e,(function(e){var n=t.findById(e.id);return"combo"===n.getType()&&e.collapsed&&(t.collapseCombo(e.id,!1),t.updateCombo(n)),!0}))})),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",o),setTimeout((function(){var e;null!=(e=t.getCombos())&&e.forEach((function(t){t.set("animate",!0)}))}),0)}this.get("groupByTypes")||(i&&0!==i.length?this.sortCombos():e.nodes&&e.edges&&e.nodes.length<e.edges.length?this.getNodes().forEach((function(t){t.toFront()})):this.getEdges().forEach((function(t){t.toBack()}))),this.get("enabledStack")&&this.pushStack("render")},Tu.prototype.read=function(t){this.data(t),this.render()},Tu.prototype.diffItems=function(t,e,n){var r,i=this,o=this.get("itemMap");(0,w.each)(n,(function(n){var a;(r=o[n.id])?(i.get("animate")&&"node"===t&&(a=(a=r.getContainer().getMatrix())||[1,0,0,0,1,0,0,0,1],r.set("originAttrs",{x:a[6],y:a[7]})),i.updateItem(r,n,!1)):r=i.addItem(t,n,!1),r&&e["".concat(t,"s")].push(r)}))},Tu.prototype.changeData=function(t,e){var n=this,r=(void 0===e&&(e=!0),this);t=t||r.get("data");if(Ge(t)){e&&this.get("enabledStack")&&this.pushStack("changedata",{before:r.save(),after:t}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map((function(t){return r.clearItemStates(t)})),this.getEdges().map((function(t){return r.clearItemStates(t)}));for(var i=this.get("canvas"),o=i.get("localRefresh"),a=(i.set("localRefresh",!1),r.get("data")||(r.data(t),r.render()),this.get("itemMap")),s={nodes:[],edges:[]},u=(e=t.combos,e?(l=En(e,t.nodes),this.set("comboTrees",l)):this.set("comboTrees",[]),this.diffItems("node",s,t.nodes),(0,w.each)(a,(function(t,e){a[e].getModel().depth=0,t.getType&&"edge"===t.getType()||(t.getType&&"combo"===t.getType()?(delete a[e],t.destroy()):s.nodes.indexOf(t)<0&&(delete a[e],r.remove(t,!1)))})),this.getCombos()),c=u.length-1;0<=c;c--)u[c].destroyed&&u.splice(c,1);e&&(r.addCombos(e),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",s,t.edges),(0,w.each)(a,(function(t,e){(!t.getType||"node"!==t.getType()&&"combo"!==t.getType())&&s.edges.indexOf(t)<0&&(delete a[e],r.remove(t,!1))})),(this.get("comboTrees")||[]).forEach((function(t){xn(t,(function(t){return"combo"===n.findById(t.id).getType()&&t.collapsed&&n.collapseCombo(t.id,!1),!0}))})),this.set({nodes:s.nodes,edges:s.edges});var l=this.get("layoutController");l&&(l.changeData((function(){setTimeout((function(){var t;null!=(t=r.getCombos())&&t.forEach((function(t){t.set("animate",!0)}))}),0)})),r.get("animate")&&!l.getLayoutType()?(r.positionsAnimate(),null!=(e=r.getCombos())&&e.forEach((function(t){return t.set("animate",!0)}))):r.autoPaint()),setTimeout((function(){i.set("localRefresh",o)}),16)}return this},Tu.prototype.addCombos=function(t){var e=this.get("comboTrees");this.get("itemController").addCombos(e,t)},Tu.prototype.createCombo=function(t,e){var n,r=this,i=(this.set("comboSorted",!1),"");if(t){if((0,w.isString)(t))n={id:i=t};else{if(!(i=t.id))return;n=t}var o=e.map((function(t){t=r.findById(t);var e=t.getModel(),n="";t.getType&&(n=t.getType()),t={id:t.getID(),itemType:n};return"combo"===n?(t.parentId=i,e.parentId=i):"node"===n&&(t.comboId=i,e.comboId=i),t}));t=(n.children=o,this.addItem("combo",n,!1),this.set("comboSorted",!1),this.get("comboTrees"));(t||[]).forEach((function(t){xn(t,(function(t){return t.id!==i||(t.itemType="combo",t.children=o,!1)}))})),t&&this.sortCombos()}},Tu.prototype.uncombo=function(t){var e,n,r,i,o,a,s,u,c=this,l=t;!(l=(0,w.isString)(t)?this.findById(t):l)||l.getType&&"combo"!==l.getType()||(e=l.getModel().parentId,n=(n=this.get("comboTrees"))||[],r=this.get("itemMap"),i=l.get("id"),a=[],s=this.get("combos"),u=this.findById(e),n.forEach((function(t){o||xn(t,(function(t){var n;return t.id===i&&(o=t,l.getEdges().map((function(t){return t.getID()})).forEach((function(t){c.removeItem(t,!1)})),n=s.indexOf(l),s.splice(n,1),delete r[i],l.destroy(),c.emit("afterremoveitem",{item:l,type:"combo"})),!e||!o||t.id!==e||(u.removeCombo(l),-1!==(n=(a=t.children).indexOf(o))&&a.splice(n,1),null!=(t=o.children)&&t.forEach((function(t){var n=c.findById(t.id),r=n.getModel();n.getType&&"combo"===n.getType()?(t.parentId=e,delete t.comboId,r.parentId=e,delete r.comboId):n.getType&&"node"===n.getType()&&(t.comboId=e,r.comboId=e),u.addChild(n),a.push(t)})),!1)}))})),!e&&o&&(t=n.indexOf(o),n.splice(t,1),null!=(t=o.children))&&t.forEach((function(t){t.parentId=void 0;var e=c.findById(t.id).getModel();delete e.parentId,delete e.comboId,"node"!==t.itemType&&n.push(t)})))},Tu.prototype.updateCombos=function(t){var e=this,n=(void 0===t&&(t=!1),this.get("comboTrees")),r=this.get("itemController"),i=this.get("itemMap");(n||[]).forEach((function(n){xn(n,(function(n){var o,a;return n&&"combo"===(null==(a=null==(o=i[n.id])?void 0:o.getType)?void 0:a.call(o))&&(a=P([],o.getStates(),!0),(0,w.each)(a,(function(t){return e.setItemState(o,t,!1)})),r.updateCombo(o,n.children,t),(0,w.each)(a,(function(t){return e.setItemState(o,t,!0)}))),!0}))})),this.sortCombos()},Tu.prototype.updateCombo=function(t){var e,n,r,i=this,o=t;!(o=(0,w.isString)(t)?this.findById(t):o)||o.getType&&"combo"!==o.getType()||(e=o.get("id"),t=this.get("comboTrees"),n=this.get("itemController"),r=this.get("itemMap"),(t||[]).forEach((function(t){xn(t,(function(t){var o,a;return t&&(o=r[t.id],e===t.id)&&o&&o.getType&&"combo"===o.getType()&&(a=P([],o.getStates(),!0),(0,w.each)(a,(function(t){o.getStateStyle(t)&&i.setItemState(o,t,!1)})),n.updateCombo(o,t.children),(0,w.each)(a,(function(t){o.getStateStyle(t)&&i.setItemState(o,t,!0)})),e=e&&t.parentId),!0}))})))},Tu.prototype.updateComboTree=function(t,e,n){void 0===n&&(n=!0),this.set("comboSorted",!1);t=(r=(0,w.isString)(t)?this.findById(t):t).getModel();var r,i,o=t.comboId||t.parentId,a="";if(r.getType&&(a=r.getType()),e&&"combo"===a){var s,u=this.get("comboTrees"),c=!0;if((u||[]).forEach((function(t){s||bn(t,(function(t){if(!s)return t.id===r.getID()&&(s=t),!0}))})),bn(s,(function(t){return t.id!==e||(c=!1)})),!c)return}n&&this.get("enabledStack")&&(u={},n={},"combo"===a?(u.combos=[{id:t.id,parentId:t.parentId}],n.combos=[{id:t.id,parentId:e}]):"node"===a&&(u.nodes=[{id:t.id,parentId:t.comboId}],n.nodes=[{id:t.id,parentId:e}]),this.pushStack("updateComboTree",{before:u,after:n})),(t.parentId||t.comboId)&&(u=this.findById(t.parentId||t.comboId))&&u.removeChild(r),"combo"===a?t.parentId=e:"node"===a&&(t.comboId=e),e&&(i=this.findById(e))&&i.addChild(r),o&&(i=this.findById(o))&&i.removeChild(r),n=Mn(this.get("comboTrees"),t.id,e),this.set("comboTrees",n),this.updateCombos()},Tu.prototype.save=function(){var t=[],e=[],n=[];return(0,w.each)(this.get("nodes"),(function(e){t.push(e.getModel())})),(0,w.each)(this.get("edges"),(function(t){e.push(t.getModel())})),(0,w.each)(this.get("combos"),(function(t){n.push(t.getModel())})),{nodes:t,edges:e,combos:n}},Tu.prototype.changeSize=function(t,e){return this.get("viewController").changeSize(t,e),this},Tu.prototype.refresh=function(){var t,e,n;this.emit("beforegraphrefresh"),this.get("animate")?this.positionsAnimate():(t=this.get("nodes"),e=this.get("edges"),n=this.get("edges"),(0,w.each)(t,(function(t){t.refresh()})),(0,w.each)(e,(function(t){t.refresh()})),(0,w.each)(n,(function(t){t.refresh()}))),this.emit("aftergraphrefresh"),this.autoPaint()},Tu.prototype.getNodes=function(){return this.get("nodes")},Tu.prototype.getEdges=function(){return this.get("edges")},Tu.prototype.getCombos=function(){return this.get("combos")},Tu.prototype.getComboChildren=function(t){if((t=(0,w.isString)(t)?this.findById(t):t)&&(!t.getType||"combo"===t.getType()))return t.getChildren()},Tu.prototype.positionsAnimate=function(t){var e=this,n=(e.emit("beforeanimate"),e.get("animateCfg")),r=n.onFrame,i=t?e.getNodes().concat(e.getCombos()):e.getNodes(),o=i.map((function(t){return t=t.getModel(),{id:t.id,x:t.x,y:t.y}})),a=(e.stopAnimate(),e.get("canvas"));e.animating=!0,a.animate((function(n){(0,w.each)(o,(function(t){var i,o,a,s=e.findById(t.id);s&&!s.destroyed&&(i=s.get("originAttrs"),o=s.get("model"),a=s.getContainer().getMatrix(),null==i&&(a&&(i={x:a[6],y:a[7]}),s.set("originAttrs",i||0)),r?(a=r(s,n,t,i||{x:0,y:0}),s.set("model",Object.assign(o,a))):i?(o.x=i.x+(t.x-i.x)*n,o.y=i.y+(t.y-i.y)*n):(o.x=t.x,o.y=t.y))})),e.refreshPositions(t)}),{duration:n.duration,easing:n.easing,callback:function(){(0,w.each)(i,(function(t){t.set("originAttrs",null)})),n.callback&&n.callback(),e.emit("afteranimate"),e.animating=!1}})},Tu.prototype.refreshPositions=function(t){function e(t){(0,w.each)(t,(function(t){n=t.getModel();var e=t.get("originAttrs");e&&n.x===e.x&&n.y===e.y||(e=t.updatePosition({x:n.x,y:n.y}),s[n.id]=e,n.comboId&&(s[n.comboId]=s[n.comboId]||e))}))}this.emit("beforegraphrefreshposition");var n,r=this.get("nodes"),i=this.get("edges"),o=this.get("vedges"),a=this.get("combos"),s={};e(r),a&&0!==a.length&&(t&&e(a),this.updateCombos()),(0,w.each)(i,(function(t){var e=t.getSource().getModel(),n=t.getTarget();!(0,w.isPlainObject)(n)&&(n=n.getModel(),s[e.id]||s[n.id]||t.getModel().isComboEdge)&&t.refresh()})),(0,w.each)(o,(function(t){t.refresh()})),this.emit("aftergraphrefreshposition"),this.autoPaint()},Tu.prototype.stopAnimate=function(){this.isAnimating()&&this.get("canvas").stopAnimate()},Tu.prototype.isAnimating=function(){return this.animating},Tu.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},Tu.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},Tu.prototype.setMode=function(t){return this.get("modeController").setMode(t),this},Tu.prototype.clear=function(t){var e;return void 0===t&&(t=!1),null!=(e=this.get("canvas"))&&e.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},Tu.prototype.updateLayout=function(t,e,n,r){var i,o=this,a=(void 0===t&&(t={}),void 0===r&&(r=!0),this.get("layoutController")),s=(n=((0,w.isString)(t)&&(t={type:t}),e&&(i=(i=n)||("begin"===e?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),i=this.getPointByCanvas(i.x,i.y),(n=["force","gForce","fruchterman","force2"]).includes(t.type)||!t.type&&n.includes(null==a?void 0:a.layoutType)?t.center=[i.x,i.y]:this.once("afterlayout",(function(t){var n=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1],r=(n=(i.x=i.x*n[0]+n[6],i.y=i.y*n[0]+n[7],o.getGroup().getCanvasBBox()),n.minX),a=n.maxX,s=n.minY;a={x:(r+a)/2,y:(s+n.maxY)/2};"begin"===e&&(a.x=r,a.y=s),o.translate(i.x-a.x,i.y-a.y)}))),k({},this.get("layout"))),{});Object.assign(s,n,t),t.pipes&&!t.type?delete s.type:!t.pipes&&s.type&&delete s.pipes,this.set("layout",s),a&&(a.isLayoutTypeSame(s)&&s.gpuEnabled===n.gpuEnabled?a.updateLayoutCfg(s):a.changeLayout(s),r)&&this.get("enabledStack")&&this.pushStack("layout",{before:n,after:s})},Tu.prototype.destroyLayout=function(){var t=this.get("layoutController");null!=t&&t.destroyLayout()},Tu.prototype.layout=function(){var t=this.get("layoutController"),e=this.get("layout");e&&t&&(!e.workerEnabled&&null!=(e=t.layoutMethods)&&e.length?t.relayout(!0):t.layout())},Tu.prototype.collapseCombo=function(t,e){var n,r,i,o,a,s=this;void 0===e&&(e=!0),this.destroyed||(t=(0,w.isString)(t)?this.findById(t):t)&&(this.emit("beforecollapseexpandcombo",{action:"expand",item:t}),n=t.getModel(),this.get("itemController").collapseCombo(t,e),n.collapsed=!0,e=this.getEdges().concat(this.get("vedges")),r=[],i=this.get("comboTrees"),o=!1,(i||[]).forEach((function(t){o||bn(t,(function(t){return!(o&&t.depth<=n.depth||((o=n.id===t.id||o)&&(t=s.findById(t.id))&&t.getType&&"combo"===t.getType()&&(r=(r=r.concat(t.getNodes())).concat(t.getCombos())),0))}))})),a={},e.forEach((function(t){var e=t.getModel(),i=e.isVEdge;e=e.size,e=void 0===e?1:e;if(!t.isVisible()||i){var o,u=t.getSource(),c=t.getTarget(),l=null;if(u.getModel().id===n.id||r.includes(u)&&!r.includes(c)?(l=c,o=!1):(c.getModel().id===n.id||!r.includes(u)&&r.includes(c))&&(l=u,o=!0),l)if(i)s.removeItem(t,!1);else{for(var h=l.getModel();!l.isVisible();){var f=h.parentId,d=h.comboId;f=f||d;if(!(l=s.findById(f))||!f)return;h=l.getModel()}c=h.id,u=o?{source:c,target:n.id,size:e,isVEdge:!0}:{source:n.id,target:c,size:e,isVEdge:!0},i="".concat(u.source,"-").concat(u.target),a[i]?a[i].size+=e:a[i]=u}}})),this.addItems(Object.values(a).map((function(t){return{type:"vedge",model:t}})),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t}))},Tu.prototype.expandCombo=function(t,e){var n,r,i,o,a,s=this;void 0===e&&(e=!0),!(t=(0,w.isString)(t)?this.findById(t):t)||t.getType&&"combo"!==t.getType()||(this.emit("beforecollapseexpandcombo",{action:"expand",item:t}),n=t.getModel(),this.get("itemController").expandCombo(t,e),n.collapsed=!1,e=this.getEdges().concat(this.get("vedges")),r=[],i=this.get("comboTrees"),o=!1,(i||[]).forEach((function(t){o||bn(t,(function(t){return!(o&&t.depth<=n.depth||((o=n.id===t.id||o)&&(t=s.findById(t.id))&&t.getType&&"combo"===t.getType()&&(r=(r=r.concat(t.getNodes())).concat(t.getCombos())),0))}))})),a={},e.forEach((function(t){if(!t.isVisible()||t.getModel().isVEdge){var e,i=t.getSource(),o=t.getTarget(),u=i.get("id"),c=o.get("id"),l=null;if(u===n.id||r.includes(i)&&!r.includes(o)?(l=o,e=!1):c===n.id||!r.includes(i)&&r.includes(o)?(l=i,e=!0):r.includes(i)&&r.includes(o)&&i.isVisible()&&o.isVisible()&&t.show(),l)if(u=t.getModel(),c=u.isVEdge,u=u.size,u=void 0===u?1:u,c)s.removeItem(t,!1);else{for(var h=l.getModel();!l.isVisible();){var f=h.parentId,d=h.comboId;f=f||d;if(!(l=s.findById(f))||!f)return;h=l.getModel()}c=h.id;for(var p=(g=e?o:i).getModel();!g.isVisible();){var g,m=p.parentId,v=p.comboId;m=m||v;if(!(g=s.findById(m))||!m)return;if(p.comboId===n.id||p.parentId===n.id)break;p=g.getModel()}t=p.id,c&&(i="".concat((o=e?{source:c,target:t,isVEdge:!0,size:u}:{source:t,target:c,isVEdge:!0,size:u}).source,"-").concat(o.target),a[i]?a[i].size+=u:a[i]=o)}}})),this.addItems(Object.values(a).map((function(t){return{type:"vedge",model:t}})),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t}))},Tu.prototype.collapseExpandCombo=function(t,e){if(void 0===e&&(e=!0),(t=(0,w.isString)(t)?this.findById(t):t)&&(!t.getType||"combo"===t.getType())){for(var n=t.getModel(),r=this.findById(n.parentId);r;){var i=r.getModel();if(i.collapsed)return void(r=void 0);r=this.findById(i.parentId)}n.collapsed?this.expandCombo(t,e):this.collapseCombo(t,e),this.updateCombo(t)}},Tu.prototype.getNeighbors=function(t,e){var n=t;return(n=(0,w.isString)(t)?this.findById(t):n).getNeighbors(e)},Tu.prototype.getNodeDegree=function(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=!1);var r=t,i=(t=((0,w.isString)(t)&&(r=this.findById(t)),this.get("degrees")),t&&!n||(t=Q(this.save()),this.set("degrees",t)),t[r.getID()]),o=0;if(!i)return 0;switch(e){case"in":o=i.inDegree;break;case"out":o=i.outDegree;break;case"all":o=i;break;default:o=i.degree}return o},Tu.prototype.getUndoStack=function(){return this.undoStack},Tu.prototype.getRedoStack=function(){return this.redoStack},Tu.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},Tu.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},Tu.prototype.pushStack=function(t,e,n){void 0===t&&(t="update"),void 0===n&&(n="undo"),this.get("enabledStack")&&(e=e?(0,w.clone)(e):{before:{},after:(0,w.clone)(this.save())},("redo"===n?this.redoStack:this.undoStack).push({action:t,data:e}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},Tu.prototype.getAdjMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix");return n&&t||(n=B(this.save(),e),this.set("adjMatrix",n)),n},Tu.prototype.getShortestPathMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix"),r=this.get("shortestPathMatrix");return n&&t||(n=B(this.save(),e),this.set("adjMatrix",n)),r&&t||(r=ft(this.save(),e),this.set("shortestPathMatrix",r)),r},Tu.prototype.on=function(t,e,n){return Mu.prototype.on.call(this,t,e,n)},Tu.prototype.destroy=function(){var t;this.clear(),this.clearStack(),null!=(t=this.get("itemController"))&&t.destroy(),null!=(t=this.get("modeController"))&&t.destroy(),null!=(t=this.get("viewController"))&&t.destroy(),null!=(t=this.get("stateController"))&&t.destroy(),null!=(t=this.get("canvas"))&&t.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},Tu.prototype.createHull=function(t){var e,n;if(t.members&&!(t.members.length<1))return e=this.get("hullGroup"),(n=this.get("hullMap"))||this.set("hullMap",n={}),e&&!e.get("destroyed")||((e=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",e)),n[t.id]||(e=e.addGroup({id:"".concat(t.id,"-container")}),n[(n=new Au(this,k(k({},t),{group:e}))).id]=n)},Tu.prototype.getHulls=function(){return this.get("hullMap")},Tu.prototype.getHullById=function(t){return this.get("hullMap")[t]},Tu.prototype.removeHull=function(t){var e;t=(0,w.isString)(t)?this.getHullById(t):t;null!=(e=this.get("hullMap"))&&delete e[t.id],t.destroy()},Tu.prototype.removeHulls=function(){var t=this.getHulls();t&&Object.keys(t).length&&(Object.keys(t).forEach((function(e){t[e].destroy()})),this.set("hullMap",{}))},tn=Tu;var Ou=L,Pu="-label",Iu=["startArrow","endArrow"],Nu=(nn={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},{edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:nn,combo:nn}),Du="-label-bg",Lu=(un={options:{labelCfg:{style:{fontFamily:cn.windowFontFamily}},descriptionCfg:{style:{fontFamily:cn.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(t){return{}},getOptions:function(t,e){return"move"===e||null!=e&&e.includes("bbox")?{}:(0,w.deepMix)({},this.options,this.getCustomConfig(t)||{},t)},draw:function(t,e){e.shapeMap={},this.mergeStyle=this.getOptions(t);var n=this.drawShape(t,e);return n.set("className",this.itemType+"-shape"),e.shapeMap[this.itemType+"-shape"]=n,t.label&&((t=this.drawLabel(t,e)).set("className",this.itemType+Pu),e.shapeMap[this.itemType+Pu]=t),n},afterDraw:function(t,e,n){},drawShape:function(t,e){return null},drawLabel:function(t,e){var n,r=(this.mergeStyle||this.getOptions(t)||{}).labelCfg,i=this.getLabelStyle(t,r||{},e),o=i.rotate;delete i.rotate,r=e.addShape("text",{attrs:i,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(e.shapeMap["text-shape"]=r,!isNaN(o)&&""!==o){var a=r.getBBox(),s=[1,0,0,0,1,0,0,0,1];if(i.rotateCenter)switch(i.rotateCenter){case"center":s=Ou(s,[["t",-a.width/2,-a.height/2],["r",o],["t",a.width/2,a.height/2]]);break;case"lefttop":s=Ou(s,[["t",-i.x,-i.y],["r",o],["t",i.x,i.y]]);break;case"leftcenter":s=Ou(s,[["t",-i.x,-i.y-a.height/2],["r",o],["t",i.x,i.y+a.height/2]]);break;default:s=Ou(s,[["t",-a.width/2,-a.height/2],["r",o],["t",a.width/2,a.height/2]])}else s=Ou(s,[["t",-i.x,-i.y-a.height/2],["r",o],["t",i.x,i.y+a.height/2]]);r.setMatrix(s)}return i.background&&(t=this.drawLabelBg(t,e,r),n=this.itemType+Du,t.set("classname",n),e.shapeMap[n]=t,r.toFront()),r},drawLabelBg:function(t,e,n){var r=this.options.labelCfg;r=(0,w.mix)({},r,t.labelCfg),t=this.getLabelBgStyleByPosition(n,r),n=e.addShape("rect",{name:"text-bg-shape",attrs:t,labelRelated:!0});return e.shapeMap["text-bg-shape"]=n},getLabelStyleByPosition:function(t,e,n){return{text:t.label}},getLabelBgStyleByPosition:function(t,e){return{}},getLabelStyle:function(t,e,n){return t=this.getLabelStyleByPosition(t,e,n),n="".concat(this.itemType,"Label"),n=cn[n]?cn[n].style:null,k(k(k({},n),t),e.style)},getShapeStyle:function(t){return t.style},update:function(t,e,n){this.updateShapeStyle(t,e,n),this.updateLabel(t,e,n)},updateShapeStyle:function(t,e,n){var r,i,o=e.getContainer(),a=e.getKeyShape(),s=(0,w.mix)({},a.attr(),t.style);for(i in s)!function(t){var e,n=s[t];(0,w.isPlainObject)(n)?null!=(e=(null==(r=o.shapeMap)?void 0:r[t])||o.find((function(e){return e.get("name")===t})))&&e.attr(n):a.attr(((e={})[t]=n,e))}(i)},updateLabel:function(t,e,n){var r,i,o,a,s,u,c;!t.label&&""!==t.label||(e=e.getContainer(),r=void 0===(r=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg)?{}:r,i=this.itemType+Pu,o=e.shapeMap[i]||e.find((function(t){return t.get("className")===i})),a=this.itemType+Du,s=e.shapeMap[a]||e.find((function(t){return t.get("className")===a})),o?(n&&"bbox|label"!==n&&("edge"!==this.itemType||"style"===n)||(r=(0,w.deepMix)(r,t.labelCfg)),n=this.getLabelStyleByPosition(t,r,e),u=null==(u=t.labelCfg)?void 0:u.style,u=(n=k(k({},n),u)).rotate,delete n.rotate,isNaN(u)||""===u?1!==(null==(c=o.getMatrix())?void 0:c[4])&&o.resetMatrix():(c=Ou(c=[1,0,0,0,1,0,0,0,1],[["t",-n.x,-n.y],["r",u],["t",n.x,n.y]]),n.matrix=c),o.attr(n),s?n.background?(u=this.getLabelBgStyleByPosition(o,r),s.attr(u)):e.removeChild(s):n.background&&((s=this.drawLabelBg(t,e,o)).set("classname",a),e.shapeMap[a]=s,o.toFront())):((c=this.drawLabel(t,e)).set("className",i),e.shapeMap[i]=c))},afterUpdate:function(t,e){},setState:function(t,e,n){var r,i,o=n.get("keyShape");if(o&&!o.destroyed){var a=n.getType(),s=(t=(0,w.isBoolean)(e)?t:"".concat(t,":").concat(e),this.getStateStyle(t,n));t=n.getStateStyle(t);if(t||s){var u=(0,w.mix)({},t||s),c=n.getContainer(),l={x:1,y:1,cx:1,cy:1,matrix:1};if("combo"===a&&(l.r=1,l.width=1,l.height=1),e)for(f in u)!function(t){var e,n=u[t];(0,w.isPlainObject)(n)&&!Iu.includes(t)?null!=(e=(null==(i=c.shapeMap)?void 0:i[t])||c.find((function(e){return e.get("name")===t})))&&e.attr(n):o.attr(((e={})[t]=n,e))}(f);else{var h,f,d,p=Tn(n.getCurrentStatesStyle()),g=(t=n.getModel(),(0,w.mix)({},t.style,Tn(n.getOriginStyle()))),m=o.get("name"),v=o.attr(),y={},b=(Object.keys(v).forEach((function(t){var e;"img"!==t&&((e=v[t])&&"object"===ku(e)?y[t]=(0,w.clone)(e):y[t]=e)})),{});for(h in u)!function(t){var e,n,r=u[t];(0,w.isPlainObject)(r)&&!Iu.includes(t)?(e=c.shapeMap[t]||c.find((function(e){return e.get("name")===t})))&&(n=Tn(e.attr()),(0,w.each)(r,(function(r,i){var s;t===m&&y[i]&&!l[i]?(delete y[i],s=g[t][i]||Nu[a][i],o.attr(i,s)):!n[i]&&0!==n[i]||(delete n[i],s=g[t][i]||Nu[a][i],e.attr(i,s))})),b[t]=n):y[t]&&!l[t]&&(delete y[t],r=g[t]||(g[m]?g[m][t]:void 0)||Nu[a][t],o.attr(t,r))}(h);for(f in m?b[m]=y:(0,w.mix)(b,y),p)l[f]||(d=p[f],(0,w.isPlainObject)(d)&&!Iu.includes(f))||(m?((0,w.mix)(g[m],((r={})[f]=d,r)),delete g[f]):(0,w.mix)(g,((r={})[f]=d,r)),delete p[f]);var x,_={},S=((0,w.deepMix)(_,g,b,p),!1);for(x in _)!function(t){var e,n=_[t];(0,w.isPlainObject)(n)&&!Iu.includes(t)?(e=c.shapeMap[t]||c.find((function(e){return e.get("name")===t})))&&("text"!==e.get("type")&&!e.get("labelRelated")||(delete n.x,delete n.y,delete n.matrix),t===m&&("combo"===a&&(delete n.r,delete n.width,delete n.height),S=!0),e.attr(n)):S||(e=n||Nu[a][t],"combo"===a&&m||o.attr(((n={})[t]=e,n)))}(x)}}}},getStateStyle:function(t,e){var n=e.getModel(),r=(e=e.getType(),this.getOptions(n)),i=r.stateStyles;r=r.style,r=void 0===r?{}:r,n=n.stateStyles?n.stateStyles[t]:i&&i[t];return"combo"===e?(0,w.clone)(n):(0,w.mix)({},r,n)},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){return(null==t?void 0:t.anchorPoints)||(null==(t=this.getCustomConfig(t))?void 0:t.anchorPoints)||(null==(t=this.options)?void 0:t.anchorPoints)}},on={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:cn.nodeLabel.offset,getSize:function(t){var e=(null==(e=this.mergeStyle)?void 0:e.size)||t.size||this.getOptions({}).size||cn.defaultNode.size;return(0,w.isArray)(e)&&1===e.length&&(e=[e[0],e[0]]),(0,w.isArray)(e)?e:[e,e]},getLabelStyleByPosition:function(t,e){var n=e.maxLength,r=t.label;n&&(r=Sn(r,n)),n=e.position||this.labelPosition;if("center"===n)return{x:0,y:0,text:r,textBaseline:"middle",textAlign:"center"};var i,o=e.offset,a=((0,w.isNil)(o)&&(o=this.offset),this.getSize(t));switch(n){case"top":i={x:0,y:-a[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":i={x:0,y:a[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":i={x:-a[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:i={x:a[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"}}return i.text=r,i},getLabelBgStyleByPosition:function(t,e){var n,r,i;return t&&(e=null==(e=e.style)?void 0:e.background)?(t=t.getBBox(),n=hs(e.padding),r=t.width+n[1]+n[3],i=t.height+n[0]+n[2],k(k({x:t.minX-n[3],y:t.minY-n[0]},e),{width:r,height:i})):{}},drawShape:function(t,e){var n=this.shapeType;t=this.getShapeStyle(t),n=e.addShape(n,{attrs:t,draggable:!0,name:"node-shape"});return e.shapeMap["node-shape"]=n},updateLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=e.shapeMap["link-point-left"]||e.find((function(t){return"link-point-left"===t.get("className")})),i=e.shapeMap["link-point-right"]||e.find((function(t){return"link-point-right"===t.get("className")})),o=e.shapeMap["link-point-top"]||e.find((function(t){return"link-point-top"===t.get("className")})),a=e.shapeMap["link-point-bottom"]||e.find((function(t){return"link-point-bottom"===t.get("className")})),s=(n=(r&&(s=r.attr()),i&&!s&&(s=i.attr()),o&&!s&&(s=o.attr()),a&&!s&&(s=a.attr()),(0,w.mix)({},s=s||n,t.linkPoints)),n.fill),u=n.stroke,c=n.lineWidth,l=(l=n.size/2)||n.r,h=(n=t.linkPoints||{left:void 0,right:void 0,top:void 0,bottom:void 0},n.left),f=n.right,d=n.top,p=(n=n.bottom,t=this.getSize(t),t[0]);t=t[1],l={r:l,fill:s,stroke:u,lineWidth:c};r?h||void 0===h?r.attr(k(k({},l),{x:-p/2,y:0})):(r.remove(),delete e.shapeMap["link-point-left"]):h&&(e.shapeMap[s="link-point-left"]=e.addShape("circle",{attrs:k(k({},l),{x:-p/2,y:0}),className:s,name:s,isAnchorPoint:!0})),i?(f||void 0===f||(i.remove(),delete e.shapeMap["link-point-right"]),i.attr(k(k({},l),{x:p/2,y:0}))):f&&(e.shapeMap[u="link-point-right"]=e.addShape("circle",{attrs:k(k({},l),{x:p/2,y:0}),className:u,name:u,isAnchorPoint:!0})),o?(d||void 0===d||(o.remove(),delete e.shapeMap["link-point-top"]),o.attr(k(k({},l),{x:0,y:-t/2}))):d&&(e.shapeMap[c="link-point-top"]=e.addShape("circle",{attrs:k(k({},l),{x:0,y:-t/2}),className:c,name:c,isAnchorPoint:!0})),a?n||void 0===n?a.attr(k(k({},l),{x:0,y:t/2})):(a.remove(),delete e.shapeMap["link-point-bottom"]):n&&(e.shapeMap[r="link-point-bottom"]=e.addShape("circle",{attrs:k(k({},l),{x:0,y:t/2}),className:r,name:r,isAnchorPoint:!0}))},updateShape:function(t,e,n,r,i){e.get("keyShape").attr(k({},n)),this.updateLabel(t,e,i),r&&this.updateIcon(t,e)},updateIcon:function(t,e){var n,r,i,o=this,a=(e=e.getContainer(),(this.mergeStyle||this.getOptions(t)).icon),s=(t=t.icon||{show:void 0,text:void 0},t.show),u=(t=t.text,e.shapeMap["".concat(this.type,"-icon")]||e.find((function(t){return t.get("name")==="".concat(o.type,"-icon")})));u?s||void 0===s?(r=void 0===(r=(n=(0,w.mix)({},u.attr(),a)).width)?20:r,i=void 0===(i=n.height)?20:i,"iconfont"!==n.fontFamily&&!n.hasOwnProperty("text")||(i=r=0),u.attr(k(k({},n),{x:-r/2,y:-i/2}))):(u.remove(),delete e.shapeMap["".concat(this.type,"-icon")]):s&&(n="".concat(this.type,"-icon"),t?e.shapeMap[n]=e.addShape("text",{attrs:k({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:n,name:n}):(r=a.width,i=a.height,e.shapeMap[n]=e.addShape("image",{attrs:k(k({},a),{x:-r/2,y:-i/2}),className:n,name:n})),u=e.shapeMap["node-label"]||e.find((function(t){return"node-label"===t.get("name")})))&&u.toFront()}},an=k(k({},un),on),Os.registerNode("single-node",an),"edge-shape"),Ru=(N={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:cn.defaultEdge.size,style:{x:0,y:0,stroke:cn.defaultEdge.style.stroke,lineAppendWidth:cn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:cn.edgeLabel.style.fill,fontSize:cn.edgeLabel.style.fontSize,fontFamily:cn.windowFontFamily}},stateStyles:k({},cn.edgeStateStyles)},getPath:function(t){var e=[];return(0,w.each)(t,(function(t,n){e.push(0===n?["M",t.x,t.y]:["L",t.x,t.y])})),e},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},r=(e=(0,w.mix)({},e,n,t.style),n=t.size||cn.defaultEdge.size,(t=this.getPathPoints(t)).startPoint),i=t.endPoint;t=this.getControlPoints(t),r=[r],(r=t?r.concat(t):r).push(i),t=this.getPath(r);return(0,w.mix)({},cn.defaultEdge.style,{stroke:cn.defaultEdge.color,lineWidth:n,path:t},e)},updateShapeStyle:function(t,e,n){var r=e.getContainer(),i=(null==(i=e.getKeyShape)?void 0:i.call(e))||r.shapeMap["edge-shape"],o=(e=t.size,r=(t=this.getPathPoints(t)).startPoint,t.endPoint),a=this.getControlPoints(t),s=(r=[r],o=((r=a?r.concat(a):r).push(o),i.attr()),t.style||{}),u=(void 0===s.stroke&&(s.stroke=t.color),t.sourceNode),c=t.targetNode,l={radius:s.radius};a||(l={source:u,target:c,offset:s.offset,radius:s.radius}),a=this.getPath(r,l),u={};"move"===n?u={path:a}:(o.endArrow&&!1===s.endArrow&&(t.style.endArrow={path:""}),o.startArrow&&!1===s.startArrow&&(t.style.startArrow={path:""}),void 0===(u=k({},t.style)).lineWidth&&(u.lineWdith=((0,w.isNumber)(e)?e:null==e?void 0:e[0])||o.lineWidth),void 0===u.path&&(u.path=a),void 0===u.stroke&&(u.stroke=o.stroke||t.color)),i&&i.attr(u)},getLabelStyleByPosition:function(t,e,n){var r=e.position||this.labelPosition,i={},o=(n=null==n?void 0:n.shapeMap[Lu],"start"===r?0:"end"===r?1:.5),a=e.refX||this.refX,s=e.refY||this.refY;return t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y?(i.x=t.startPoint.x+a,i.y=t.startPoint.y+s,i.text=t.label):(e=(0,w.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate,n=yn(n,o,a,s,e),i.x=n.x,i.y=n.y,i.rotate=n.rotate,i.textAlign=this._getTextAlign(r,n.angle),i.text=t.label),i},getLabelBgStyleByPosition:function(t,e){var n,r,i,o,a;return t&&(n=t.getBBox(),a=e.style&&e.style.background)?(r=a.padding,i=n.width+r[1]+r[3],o=n.height+r[0]+r[2],a=k(k({},a),{width:i,height:o,x:n.minX-r[3],y:n.minY-r[0],matrix:[1,0,0,0,1,0,0,0,1]}),((0,w.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate)&&(a.matrix=t.attr("matrix")||[1,0,0,0,1,0,0,0,1]),a):{}},_getTextAlign:function(t,e){var n,r="center";return e?(e%=2*Math.PI,"center"!==t?0<=e&&e<=Math.PI/2||e>=1.5*Math.PI&&e<2*Math.PI?t:("start"===(n=e=t)?n="end":"end"===e&&(n="start"),n):r):t},getControlPoints:function(t){return t.controlPoints},getPathPoints:function(t){return t},drawShape:function(t,e){return t=this.getShapeStyle(t),t=e.addShape("path",{className:Lu,name:Lu,attrs:t}),e.shapeMap[Lu]=t},drawLabel:function(t,e){var n=this.options.labelCfg,r=(n=(0,w.deepMix)({},n,t.labelCfg),n=this.getLabelStyle(t,n,e),n.rotate),i=(delete n.rotate,e.addShape("text",{attrs:n,name:"text-shape",labelRelated:!0}));return e.shapeMap["text-shape"]=i,isNaN(r)||""===r||i.rotateAtStart(r),n.background&&(t=this.drawLabelBg(t,e,i,n,r),n=this.itemType+Du,t.set("classname",n),e.shapeMap[n]=t,i.toFront()),i},drawLabelBg:function(t,e,n,r,i){var o=this.options.labelCfg;o=(0,w.deepMix)({},o,t.labelCfg),t=this.getLabelBgStyleByPosition(n,o),n=e.addShape("rect",{name:"text-bg-shape",attrs:t,labelRelated:!0});return e.shapeMap["text-bg-shape"]=n}},nn=k(k({},un),N),on=(Os.registerEdge("single-edge",nn),Os.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Os.registerEdge("spline",{getPath:function(t){return ou(t)}},"single-edge"),Os.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint,r=(e.x+n.x)/2,i=(e.y+n.y)/2;if(void 0!==t.controlPoints){if(a=t.controlPoints[0],s=Me(e,a,n),e.x<=n.x&&e.y>n.y?this.clockwise=s.x>a.x?0:1:e.x<=n.x&&e.y<n.y?this.clockwise=s.x>a.x?1:0:e.x>n.x&&e.y<=n.y?this.clockwise=s.y<a.y?0:1:this.clockwise=s.y<a.y?1:0,(a.x-e.x)/(a.y-e.y)==(n.x-e.x)/(n.y-e.y))return[]}else{void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),(0,w.isArray)(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),t.curveOffset<0?this.clockwise=0:this.clockwise=1;var o={x:n.x-e.x,y:n.y-e.y},a=(o=Math.atan2(o.y,o.x),{x:t.curveOffset*Math.cos(-Math.PI/2+o)+r,y:t.curveOffset*Math.sin(-Math.PI/2+o)+i}),s=Me(e,a,n)}return r=Ae(e,s),[{x:r,y:r}]},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),2===t.length?e.push(["L",t[1].x,t[1].y]):e.push(["A",t[1].x,t[1].y,0,0,this.clockwise,t[2].x,t[2].y]),e}},"single-edge"),Os.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(t){var e,n,r=t.controlPoints;return r&&r.length||(e=t.startPoint,n=t.endPoint,void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),(0,w.isArray)(this.curveOffset)&&(t.curveOffset=t.curveOffset[0]),(0,w.isArray)(this.curvePosition)&&(t.curvePosition=t.curveOffset[0]),r=[au(e,n,t.curvePosition,t.curveOffset)]),r},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["Q",t[1].x,t[1].y,t[2].x,t[2].y]),e}},"single-edge"),Os.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(t){var e,n,r=t.controlPoints;return void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),(0,w.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,w.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),r&&r.length&&!(r.length<2)||(e=t.startPoint,n=t.endPoint,r=[au(e,n,t.curvePosition[0],t.curveOffset[0]),au(e,n,t.curvePosition[1],t.curveOffset[1])]),r},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]),e}},"single-edge"),Os.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint,r=(void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),(0,w.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,w.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),(0,w.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),n.y-e.y),i=[0,0];return t.curveOffset?i=t.curveOffset:Math.abs(r)<Math.abs(t.minCurveOffset[0])&&(i=t.minCurveOffset),[{x:e.x,y:e.y+r*this.curvePosition[0]+i[0]},{x:n.x,y:n.y-r*this.curvePosition[1]+i[1]}]}},"cubic"),Os.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint,r=(void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),(0,w.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,w.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),(0,w.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),n.x-e.x),i=[0,0];return t.curveOffset?i=t.curveOffset:Math.abs(r)<Math.abs(t.minCurveOffset[0])&&(i=t.minCurveOffset),[{x:e.x+r*this.curvePosition[0]+i[0],y:e.y},{x:n.x-r*this.curvePosition[1]+i[1],y:n.y}]}},"cubic"),Os.registerEdge("loop",{getPathPoints:function(t){return vn(t)},getControlPoints:function(t){return t.controlPoints},afterDraw:function(t){t.controlPoints=void 0},afterUpdate:function(t){t.controlPoints=void 0}},"cubic"),{itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:cn.comboLabel.refX,refY:cn.comboLabel.refY,options:{style:{stroke:cn.defaultCombo.style.stroke,fill:cn.defaultCombo.style.fill,lineWidth:cn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:cn.comboLabel.style.fill,fontSize:cn.comboLabel.style.fontSize,fontFamily:cn.windowFontFamily}},stateStyles:k({},cn.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(t){return t=(0,w.clone)(t.size||this.options.size||cn.defaultCombo.size),(0,w.isArray)(t)&&1===t.length&&(t=[t[0],t[0]]),(0,w.isArray)(t)?t:[t,t]},getLabelStyleByPosition:function(t,e){var n,r=e.position||this.labelPosition,i=t.style,o=t.padding||this.options.padding,a=((0,w.isArray)(o)&&(o=o[0]),e.refX),s=e.refY,u=(e=((0,w.isNil)(a)&&(a=this.refX),(0,w.isNil)(s)&&(s=this.refY),this.getSize(t)),(Math.max(i.r,e[0]/2)||e[0]/2)+o);switch(r){case"top":n={x:0,y:-u-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":n={x:0,y:u+s,textBaseline:"bottom",textAlign:"center"};break;case"left":n={x:-u+a,y:0,textAlign:"left"};break;case"center":n={x:0,y:0,text:t.label,textAlign:"center"};break;default:n={x:u+a,y:0,textAlign:"right"}}return n.text=t.label,n},drawShape:function(t,e){var n=this.shapeType;t=this.getShapeStyle(t);return e.addShape(n,{attrs:t,draggable:!0,name:"combo-shape"})},updateCollapsedIcon:function(t,e,n){var r=t.collapsed,i=(t=t.collapsedSubstituteIcon,t=Object.assign({},this.options.collapsedSubstituteIcon,void 0===t?{}:t),t.show),o=t.img,a=t.width,s=(t=t.height,e=e.getContainer(),e.find((function(t){return"combo-collapsed-substitute-icon"===t.get("name")}))),u=s&&!s.destroyed;r&&i?u?s.show():(r={width:a||2*n.r||n.width,height:t||2*n.r||n.height},e.addShape("image",{attrs:k({img:o,x:-r.width/2,y:-r.height/2},r),name:"combo-collapsed-substitute-icon",draggable:!0})):u&&s.hide()},updateShape:function(t,e,n){var r=this,i=e.get("keyShape");e.get("animate")&&(void 0===t.animate?this.options:t).animate&&i.animate?(t.collapsed||this.updateCollapsedIcon(t,e,n),i.animate(n,{duration:200,easing:"easeLinear",callback:function(){t.collapsed&&r.updateCollapsedIcon(t,e,n)}})):(i.attr(k({},n)),this.updateCollapsedIcon(t,e,n)),this.updateLabel(t,e)}}),an=k(k({},un),on),N=(Os.registerCombo("single-combo",an),Os.registerCombo("circle",{options:{size:[cn.defaultCombo.size[0],cn.defaultCombo.size[0]],padding:cn.defaultCombo.padding[0],animate:!0,style:{stroke:cn.defaultCombo.style.stroke,fill:cn.defaultCombo.style.fill,lineWidth:cn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:cn.comboLabel.style.fill,fontSize:cn.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:k({},cn.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(t,e){return t=this.getShapeStyle(t),delete t.height,delete t.width,e.addShape("circle",{attrs:t,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding,r=((0,w.isArray)(n)&&(n=n[0]),{stroke:t.color});e=(0,w.mix)({},e,r,t.style),r=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize,r=r?(0,w.isNumber)(r)?r:r[0]:(r=this.getSize(t),!(0,w.isNumber)(e.r)||isNaN(e.r)?r[0]/2||cn.defaultCombo.style.r:Math.max(e.r,r[0]/2)||r[0]/2),e.r=r+n,n=k({x:0,y:0},e);return t.style?t.style.r=r:t.style={r:r},n},update:function(t,e){var n=this.getSize(t),r=t.padding||this.options.padding,i=((0,w.isArray)(r)&&(r=r[0]),(0,w.clone)(t.style)),o=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;o=o?(0,w.isNumber)(o)?o:o[0]:Math.max(i.r,n[0]/2)||n[0]/2,i.r=o+r,n=e.get("sizeCache"),n&&(n.r=i.r),r={stroke:t.color},n=e.get("keyShape"),n=(0,w.mix)({},n.attr(),r,i);t.style?t.style.r=o:t.style={r:o},this.updateShape(t,e,n,!0)}},"single-combo"),Os.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:cn.defaultCombo.style.stroke,fill:cn.defaultCombo.style.fill,lineWidth:cn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:cn.comboLabel.style.fill,fontSize:cn.comboLabel.style.fontSize,fontFamily:cn.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:k({},cn.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(t,e){return t=this.getShapeStyle(t),e.addShape("rect",{attrs:t,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(t,e){var n,r=e.position||this.labelPosition,i=t.style,o=t.padding||this.options.padding,a=((0,w.isNumber)(o)&&(o=[o,o,o,o]),e.refX),s=e.refY,u=((0,w.isNil)(a)&&(a=this.refX),(0,w.isNil)(s)&&(s=this.refY),i.width/2+o[3]),c=i.height/2+o[0];switch(r){case"top":n={x:0-u+a,y:0-c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":n={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":n={x:0-u+s,y:0,textAlign:"left"};break;case"center":n={x:0,y:0,text:t.label,textAlign:"center"};break;default:n={x:u+a,y:0,textAlign:"right"}}return n.text=t.label,n},getShapeStyle:function(t){var e,n=this.options.style,r=t.padding||this.options.padding,i=((0,w.isNumber)(r)&&(r=[r,r,r,r]),{stroke:t.color}),o=(n=(0,w.mix)({},n,i,t.style),i=this.getSize(t),t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize),a=(o=o?(0,w.isNumber)(o)?e=o:(e=o[0],o[1]):(e=!(0,w.isNumber)(n.width)||isNaN(n.width)?i[0]||cn.defaultCombo.style.width:Math.max(n.width,i[0])||i[0],!(0,w.isNumber)(n.height)||isNaN(n.height)?i[1]||cn.defaultCombo.style.height:Math.max(n.height,i[1])||i[1]),i=-e/2-r[3],-o/2-r[0]);n.width=e+r[1]+r[3],n.height=o+r[0]+r[2],r=k({x:i,y:a},n);return t.style?(t.style.width=e,t.style.height=o):t.style={width:e,height:o},r},update:function(t,e){var n,r=this.getSize(t),i=t.padding||this.options.padding,o=((0,w.isNumber)(i)&&(i=[i,i,i,i]),(0,w.clone)(t.style)),a=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;a=a?(0,w.isNumber)(a)?n=a:(n=a[0],a[1]):(n=Math.max(o.width,r[0])||r[0],Math.max(o.height,r[1])||r[1]),o.width=n+i[1]+i[3],o.height=a+i[0]+i[2],r=e.get("sizeCache"),r&&(r.width=o.width,r.height=o.height),o.x=-n/2-i[3],o.y=-a/2-i[0],r={stroke:t.color},i=e.get("keyShape"),i=(0,w.mix)({},i.attr(),r,o);t.style?(t.style.width=n,t.style.height=a):t.style={width:n,height:a},this.updateShape(t,e,i,!1)}},"single-combo"),Os.registerNode("simple-circle",{options:{size:cn.defaultNode.size,style:{x:0,y:0,stroke:cn.defaultNode.style.stroke,fill:cn.defaultNode.style.fill,lineWidth:cn.defaultNode.style.lineWidth},labelCfg:{style:{fill:cn.nodeLabel.style.fill,fontSize:cn.nodeLabel.style.fontSize,fontFamily:cn.windowFontFamily}},stateStyles:k({},cn.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(t,e){t=this.getShapeStyle(t);var n="".concat(this.type,"-keyShape");t=e.addShape("circle",{attrs:t,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return e.shapeMap[n]=t},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color};e=(0,w.deepMix)({},e,n),n=this.getSize(t)[0]/2;return k({x:0,y:0,r:n},e)},update:function(t,e,n){var r=this.getSize(t),i=(r={stroke:t.color,r:r[0]/2},e.get("keyShape"));i=(0,w.deepMix)({},i.attr(),r,t.style);this.updateShape(t,e,i,!0,n)}},"single-node"),Os.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:cn.defaultNode.style.stroke,fill:cn.defaultNode.style.fill,lineWidth:cn.defaultNode.style.lineWidth},labelCfg:{style:{fill:cn.nodeLabel.style.fill,fontSize:cn.nodeLabel.style.fontSize,fontFamily:cn.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:k({},cn.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(t,e){return t=this.getShapeStyle(t),e.addShape("rect",{attrs:t,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0})},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color};e=(0,w.mix)({},e,n),n=this.getSize(t),t=e.width||n[0],n=e.height||n[1];return k({x:-t/2,y:-n/2,width:t,height:n},e)},update:function(t,e,n){e.getContainer();var r=(this.mergeStyle||this.getOptions(t)).style,i=this.getSize(t),o=e.get("keyShape");t.size||(i[0]=o.attr("width")||r.width,i[1]=o.attr("height")||r.height),i={stroke:t.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},r=(0,w.mix)({},r,o.attr(),i),r=(0,w.mix)(r,t.style);this.updateShape(t,e,r,!1,n)}},"single-node"),Os.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:cn.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t);delete r.fill,e=e.addShape(n,{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(t,e),e},drawClip:function(t,e){var n,r,i,o,a,s;t=(this.mergeStyle||this.getOptions(t)).clipCfg;t.show&&(n=t.type,a=t.x,s=t.y,r=t.style,"circle"===n?(i=t.r,e.setClip({type:"circle",attrs:k({r:i,x:a,y:s},r)})):"rect"===n?(i=t.width,o=t.height,e.setClip({type:"rect",attrs:k({x:a-i/2,y:s-o/2,width:i,height:o},r)})):"ellipse"===n?(i=t.rx,o=t.ry,e.setClip({type:"ellipse",attrs:k({x:a,y:s,rx:i,ry:o},r)})):"polygon"===n?(a=t.points,e.setClip({type:"polygon",attrs:k({points:a},r)})):"path"===n&&(s=t.path,e.setClip({type:"path",attrs:k({path:s},r)})))},getShapeStyle:function(t){var e=this.mergeStyle||this.getOptions(t),n=e.style,r=(e=e.img,t=this.getSize(t),t[0]),i=t[1];return n&&(r=n.width||t[0],i=n.height||t[1]),k({x:-r/2,y:-i/2,width:r,height:i,img:e},n)},updateShapeStyle:function(t,e){var n=e.getContainer(),r="".concat(this.itemType,"-shape");n=n.shapeMap[r]||n.find((function(t){return t.get("className")===r}))||e.getKeyShape(),e=this.getShapeStyle(t);n&&!n.destroyed&&n.attr(e)}},"single-node"),{triangle:function(t,e,n){return void 0===t&&(t=10),void 0===e&&(e=15),n=2*(n=void 0===n?0:n),"M ".concat(n,",0 L ").concat(n+e,",-").concat(t/2," L ").concat(n+e,",").concat(t/2," Z")},vee:function(t,e,n){return void 0===t&&(t=15),void 0===e&&(e=20),n=2*(n=void 0===n?0:n),"M ".concat(n,",0 L ").concat(n+e,",-").concat(t/2,"\n        L ").concat(n+2*e/3,",0 L ").concat(n+e,",").concat(t/2," Z")},circle:function(t,e){return void 0===t&&(t=5),"M ".concat(2*(e=void 0===e?0:e),", 0\n            a ").concat(t,",").concat(t," 0 1,0 ").concat(2*t,",0\n            a ").concat(t,",").concat(t," 0 1,0 ").concat(2*-t,",0")},rect:function(t,e,n){return void 0===t&&(t=10),void 0===e&&(e=10),n=2*(n=void 0===n?0:n),"M ".concat(n,",").concat(-t/2," \n        L ").concat(n+e,",").concat(-t/2," \n        L ").concat(n+e,",").concat(t/2," \n        L ").concat(n,",").concat(t/2," Z")},diamond:function(t,e,n){return void 0===t&&(t=15),void 0===e&&(e=15),n=2*(n=void 0===n?0:n),"M ".concat(n,",0 \n        L ").concat(n+e/2,",").concat(-t/2," \n        L ").concat(n+e,",0 \n        L ").concat(n+e/2,",").concat(t/2," Z")},triangleRect:function(t,e,n,r,i,o){return void 0===t&&(t=15),void 0===n&&(n=15),void 0===r&&(r=3),o=2*(o=void 0===o?0:o),i=o+(e=void 0===e?15:e)+(i=void 0===i?5:i),"M ".concat(o,",0 L ").concat(o+e,",-").concat(t/2," L ").concat(o+e,",").concat(t/2," Z\n            M ").concat(i,", -").concat(n/2,"\n            L ").concat(i+r," -").concat(n/2,"\n            L ").concat(i+r," ").concat(n/2,"\n            L ").concat(i," ").concat(n/2,"\n            Z")}}),nn={collapse:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t+n-4,e]]},expand:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t-n+2*n-4,e],["M",t-n+n,e-n+4],["L",t,e+n-4]]},upTriangle:function(t,e,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",t-r,e+i],["L",t+r,e+i],["L",t,e-n],["Z"]]},downTriangle:function(t,e,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",t-r,e-i],["L",t+r,e-i],["L",t,e+n],["Z"]]}},un=Os,["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"]),Bu=(on=L,k(k(k(k(k(k({},s),i),u),r),c),{transform:on,mat3:D}));function ju(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}function Fu(t){this.graph=t,this.destroyed=!1,this.initEvents()}ju.prototype.initLayout=function(){},ju.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},ju.prototype.getLayoutCfgType=function(t){var e=t.type;return e||(e=t.pipes,Array.isArray(e)?e.map((function(t){return(null==t?void 0:t.type)||""})):null)},ju.prototype.isLayoutTypeSame=function(t){var e=this.getLayoutCfgType(t),n=Array.isArray(this.layoutType),r=Array.isArray(e);return n&&r?this.layoutType.every((function(t,n){return t===e[n]})):!Array.isArray(e)&&!Array.isArray(this.layoutType)&&(null==t?void 0:t.type)===this.layoutType},ju.prototype.refreshLayout=function(){var t=this.graph,e=this.layoutType;t&&(t.get("animate")?t.positionsAnimate("comboCombined"===e):t.refreshPositions("comboCombined"===e))},ju.prototype.changeLayout=function(t){var e=t.disableTriggerLayout;t=O(t,["disableTriggerLayout"]);this.layoutCfg=t,this.layoutType=t.type||this.layoutType,e||this.layout()},ju.prototype.changeData=function(t){this.layout(t)},ju.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods,e=[];return null!=t&&t.forEach((function(t){var n=null==(n=t.getType)?void 0:n.call(t);n&&e.push(n),t.destroy()})),this.layoutMethods=[],e},ju.prototype.destroyLayout=function(){var t=this.graph;this.destoryLayoutMethods(),t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},ju.prototype.setDataFromGraph=function(){for(var t=[],e=[],n=[],r=[],i=[],o=[],a=[],s=this.graph.getNodes(),u=this.graph.getEdges(),c=this.graph.getCombos(),l=s.length,h=0;h<l;h++){var f=s[h];f&&!f.destroyed&&(m=f.getModel(),(f.isVisible()?t:e).push(m))}var d=u.length;for(h=0;h<d;h++){var p=u[h];p&&!p.destroyed&&(m=p.getModel(),(p.isVisible()?m.isComboEdge?i:n:r).push(m))}var g=c.length;for(h=0;h<g;h++){var m,v=c[h];v.destroyed||(m=v.getModel(),(v.isVisible()?o:a).push(m))}return{nodes:t,hiddenNodes:e,edges:n,hiddenEdges:r,combos:o,hiddenCombos:a,comboEdges:i}},ju.prototype.relayout=function(t){var e=this,n=this.graph,r=this.layoutMethods,i=this.layoutCfg;if(t){if(this.data=this.setDataFromGraph(),t=this.data.nodes,!t)return!1;this.initPositions(i.center,t)}n.emit("beforelayout");var o=Promise.resolve();null!=r&&r.forEach((function(t,n){var a=i[n]||i;o=o.then((function(){var o,s=e.execLayoutMethod(t,a);return n===r.length-1&&null!=(o=i.onAllLayoutEnd)&&o.call(i),s}))}))},ju.prototype.filterLayoutData=function(t,e){var n,r,i=t.nodes,o=t.edges,a=O(t,["nodes","edges"]);return i?(r=(0,w.isFunction)(null==e?void 0:e.nodesFilter)?e.nodesFilter:function(){return!0},i=i.filter(r),r=(0,w.isFunction)(null==e?void 0:e.edgesFilter)?e.edgesFilter:(n=i.reduce((function(t,e){return t[e.id]=!0,t}),{}),function(t){return n[t.source]&&n[t.target]}),k({nodes:i,edges:o.filter(r)},a)):t},ju.prototype.getLayoutBBox=function(t){var e=this.graph;e=(0,w.groupBy)(e.getNodes(),(function(t){return t.getModel().layoutOrder})),e=Object.values(e).map((function(t){return t=gs(t),t.size=[t.width,t.height],t}));return{groupNodes:Object.values((0,w.groupBy)(t,"layoutOrder")),layoutNodes:e}},ju.prototype.layoutAnimate=function(){},ju.prototype.moveToZero=function(){var t=this.graph.get("data").nodes;if(void 0!==t[0].x&&null!==t[0].x&&!ps(t[0].x)){for(var e=[0,0],n=t.length,r=0;r<n;r++){var i=t[r];e[0]+=i.x,e[1]+=i.y}for(e[0]/=t.length,e[1]/=t.length,r=0;r<n;r++)(i=t[r]).x-=e[0],i.y-=e[1]}},ju.prototype.initPositions=function(t,e){var n=this.graph;if(!e)return!1;var r=e?e.length:0;if(r){if(null==(i=this.initWithPreset)?void 0:i.call(this))return!1;for(var i=.85*n.get("width"),o=(n=.85*n.get("height"),Math.ceil(Math.sqrt(r)*(i/n))),a=i/(o-1),s=n/(Math.ceil(r/o)-1),u=(isFinite(a)&&a||(a=0),isFinite(s)&&a||(s=0),t[0]-i/2),c=t[1]-n/2,l=!0,h=0;h<r;h++){var f=e[h];ps(+f.x)&&(l=!1,f.x=h%o*a+u),ps(+f.y)&&(l=!1,f.y=Math.floor(h/o)*s+c)}return l}},ju.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0};an=ju,s=un.registerNode,i=un.registerEdge,u=un.registerCombo;var zu=A.registerBehavior,Uu=cn,Gu=(r=(un.registerNode,un.registerEdge,un.registerCombo,A.registerBehavior,n(10369)),function(t,e){return(Gu=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)});function Vu(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Gu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Wu=function(){return(Wu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Hu(t,e,n,r){return t-=n,n=e-r,Math.sqrt(t*t+n*n)}function Yu(t,e,n,r,i,o){return t<=i&&i<=t+n&&e<=o&&o<=e+r}function qu(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function Xu(t,e){return t[0]===e[0]&&t[1]===e[1]}Object.create,Object.create;var Ku=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Zu=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,$u=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Ju=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Qu(t,e){t=t.match(Ju),(0,w.each)(t,(function(t){t=t.split(":"),e.addColorStop(t[0],t[1])}))}function tc(t,e,n){var r,i,o,a,s,u,c,l,h=e.getBBox();if(isNaN(h.x)||isNaN(h.y)||isNaN(h.width)||isNaN(h.height))return n;if((0,w.isString)(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return h=t,o=e,a=n,a=Ku.exec(a),u=parseFloat(a[1])%360*(Math.PI/180),a=a[2],o=o.getBBox(),o=0<=u&&u<.5*Math.PI?(s={x:o.minX,y:o.minY},{x:o.maxX,y:o.maxY}):.5*Math.PI<=u&&u<Math.PI?(s={x:o.maxX,y:o.minY},{x:o.minX,y:o.maxY}):Math.PI<=u&&u<1.5*Math.PI?(s={x:o.maxX,y:o.maxY},{x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},{x:o.maxX,y:o.minY}),c=(u=Math.tan(u))*u,l=(o.x-s.x+u*(o.y-s.y))/(1+c)+s.x,u=u*(o.x-s.x+u*(o.y-s.y))/(1+c)+s.y,o=h.createLinearGradient(s.x,s.y,l,u),Qu(a,o),o;if("r"===n[0])return c=t,h=e,s=n,s=Zu.exec(s),l=parseFloat(s[1]),u=parseFloat(s[2]),a=parseFloat(s[3]),s=s[4],0===a?(r=s.match(Ju))[r.length-1].split(":")[1]:(h=(r=h.getBBox()).maxX-r.minX,o=r.maxY-r.minY,i=Math.sqrt(h*h+o*o)/2,Qu(s,s=c.createRadialGradient(r.minX+h*l,r.minY+o*u,0,r.minX+h/2,r.minY+o/2,a*i)),s);if("p"===n[0]){var f=t,d=e,p=n;if(d.get("patternSource")&&d.get("patternSource")===p)return d.get("pattern");var g,m,v=(h=$u.exec(p))[1];h=h[2];function y(){g=f.createPattern(m,v),d.set("pattern",g),d.set("patternSource",p)}switch(v){case"a":v="repeat";break;case"x":v="repeat-x";break;case"y":v="repeat-y";break;default:v="no-repeat"}return m=new Image,h.match(/^data:/i)||(m.crossOrigin="Anonymous"),m.src=h,m.complete?y():(m.onload=y,m.src=m.src),g}}return n}return n instanceof CanvasPattern?n:void 0}function ec(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function nc(t,e){return ec(t)*ec(e)?(t[0]*e[0]+t[1]*e[1])/(ec(t)*ec(e)):1}function rc(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(nc(t,e))}function ic(t,e){var n=e[1],r=e[2],i=(0,w.mod)((0,w.toRadian)(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],u=t[1],c=e[6],l=(e=e[7],Math.cos(i)*(s-c)/2+Math.sin(i)*(u-e)/2),h=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(u-e)/2,f=l*l/(n*n)+h*h/(r*r),d=(f=(1<f&&(n*=Math.sqrt(f),r*=Math.sqrt(f)),n*n*(h*h)+r*r*(l*l)),f=f?Math.sqrt((n*n*(r*r)-f)/f):1,o===a&&(f*=-1),isNaN(f)&&(f=0),r?f*n*h/r:0),p=(f=n?f*-r*l/n:0,s=(s+c)/2+Math.cos(i)*d-Math.sin(i)*f,u=(u+e)/2+Math.sin(i)*d+Math.cos(i)*f,[(l-d)/n,(h-f)/r]);l=[(-1*l-d)/n,(-1*h-f)/r],d=rc([1,0],p),h=rc(p,l);return nc(p,l)<=-1&&(h=Math.PI),1<=nc(p,l)&&(h=0),0===a&&0<h&&(h-=2*Math.PI),1===a&&h<0&&(h+=2*Math.PI),{cx:s,cy:u,rx:Xu(t,[c,e])?0:n,ry:Xu(t,[c,e])?0:r,startAngle:d,endAngle:d+h,xRotation:i,arcFlag:o,sweepFlag:a}}var oc=Math.sin,ac=Math.cos,sc=Math.atan2,uc=Math.PI;function cc(t,e,n,r,i,o,a){var s=e.stroke;e=e.lineWidth,r=sc(r-o,n-i),n=new il({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*ac(uc/6)+","+10*oc(uc/6)+" L0,0 L"+10*ac(uc/6)+",-"+10*oc(uc/6),stroke:s,lineWidth:e}});n.translate(i,o),n.rotateAtPoint(i,o,r),t.set(a?"startArrowShape":"endArrowShape",n)}function lc(t,e,n,r,i,o,a){var s=e.startArrow,u=e.endArrow,c=e.stroke,l=(e=e.lineWidth,s=a?s:u,u=s.d,s.fill),h=s.stroke,f=s.lineWidth;s=function(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}(s,["d","fill","stroke","lineWidth"]),r=sc(r-o,n-i),u&&(i-=ac(r)*u,o-=oc(r)*u),n=new il({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:Wu(Wu({},s),{stroke:h||c,lineWidth:f||e,fill:l})});n.translate(i,o),n.rotateAtPoint(i,o,r),t.set(a?"startArrowShape":"endArrowShape",n)}function hc(t,e,n,r,i){return r=sc(r-e,n-t),{dx:ac(r)*i,dy:oc(r)*i}}function fc(t,e,n,r,i,o){"object"==typeof e.startArrow?lc(t,e,n,r,i,o,!0):e.startArrow?cc(t,e,n,r,i,o,!0):t.set("startArrowShape",null)}function dc(t,e,n,r,i,o){"object"==typeof e.endArrow?lc(t,e,n,r,i,o,!1):e.endArrow?cc(t,e,n,r,i,o,!1):t.set("startArrowShape",null)}var pc,gc={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function mc(t,e){var n,r=e.attr();for(n in r){var i=r[n],o=gc[n]||n;"matrix"===o&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===o&&t.setLineDash?(0,w.isArray)(i)&&t.setLineDash(i):("strokeStyle"===o||"fillStyle"===o?i=tc(t,e,i):"globalAlpha"===o&&(i*=t.globalAlpha),t[o]=i)}}function vc(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];i.cfg.visible?i.draw(t,n):i.skipDraw()}}function yc(t,e,n){var r=t.get("refreshElements");(0,w.each)(r,(function(e){if(e!==t)for(var n=e.cfg.parent;n&&n!==t&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),(r[0]===t?bc:function t(e,n){for(var r=0;r<e.length;r++){var i,o=e[r];o.cfg.visible&&(o.cfg.hasChanged?(o.cfg.refresh=!0,o.isGroup()&&bc(o.cfg.children,n)):o.cfg.refresh?o.isGroup()&&t(o.cfg.children,n):(i=xc(o,n),(o.cfg.refresh=i)&&o.isGroup()&&t(o.cfg.children,n)))}})(e,n)}function bc(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.cfg.refresh=!0,r.isGroup()&&bc(r.get("children"),e)}}function xc(t,e){var n=t.cfg.cacheCanvasBBox;return t.cfg.isInView&&n&&qu(n,e)}function _c(t,e,n,r){var i=n.path,o=n.startArrow,a=n.endArrow;if(i){var s=[0,0],u=[0,0],c={dx:0,dy:0};e.beginPath();for(var l=0;l<i.length;l++){var h,f=i[l],d=f[0],p=(0===l&&o&&o.d?c=hc((h=t.getStartTangent())[0][0],h[0][1],h[1][0],h[1][1],o.d):l===i.length-2&&"Z"===i[l+1][0]&&a&&a.d?"Z"===i[l+1][0]&&(c=hc((h=t.getEndTangent())[0][0],h[0][1],h[1][0],h[1][1],a.d)):l===i.length-1&&a&&a.d&&"Z"!==i[0]&&(c=hc((h=t.getEndTangent())[0][0],h[0][1],h[1][0],h[1][1],a.d)),c.dx),g=c.dy;switch(d){case"M":e.moveTo(f[1]-p,f[2]-g),u=[f[1],f[2]];break;case"L":e.lineTo(f[1]-p,f[2]-g);break;case"Q":e.quadraticCurveTo(f[1],f[2],f[3]-p,f[4]-g);break;case"C":e.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-p,f[6]-g);break;case"A":var m,v,y=void 0,b=(r?(y=r[l])||(y=ic(s,f),r[l]=y):y=ic(s,f),y.cx),x=y.cy,_=y.rx,w=y.ry,S=y.startAngle,E=y.endAngle,M=y.xRotation;y=y.sweepFlag;e.ellipse?e.ellipse(b,x,_,w,M,S,E,1-y):(m=w<_?_:w,v=w<_?1:_/w,w=w<_?w/_:1,e.translate(b,x),e.rotate(M),e.scale(v,w),e.arc(0,0,m,S,E,1-y),e.scale(1/v,1/w),e.rotate(-M),e.translate(-b,-x));break;case"Z":e.closePath()}s="Z"===d?u:[f[(d=f.length)-2],f[d-1]]}}}function wc(t,e){var n=t.get("canvas");n&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged"))||(n.refreshElement(t,e,n),n.get("autoDraw")&&n.draw()))}function Sc(t){var e,n,r,i,o,a;return t.destroyed?e=t._cacheCanvasBBox:(r=(n=t.get("cacheCanvasBBox"))&&!(!n.width||!n.height),i=(t=t.getCanvasBBox())&&!(!t.width||!t.height),r&&i?(a=t,e=(o=n)&&a?{minX:Math.min(o.minX,a.minX),minY:Math.min(o.minY,a.minY),maxX:Math.max(o.maxX,a.maxX),maxY:Math.max(o.maxY,a.maxY)}:o||a):r?e=n:i&&(e=t)),e}function Ec(){return null!==pc&&pc.apply(this,arguments)||this}Vu(Ec,pc=en),Ec.prototype.onCanvasChange=function(t){wc(this,t)},Ec.prototype.getShapeBase=function(){return l},Ec.prototype.getGroupBase=function(){return Ec},Ec.prototype._applyClip=function(t,e){e&&(t.save(),mc(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},Ec.prototype.cacheCanvasBBox=function(){var t,e,n,r,i=this.cfg.children,o=[],a=[];(0,w.each)(i,(function(t){var e=t.cfg.cacheCanvasBBox;e&&t.cfg.isInView&&(o.push(e.minX,e.maxX),a.push(e.minY,e.maxY))})),i=null;o.length?(r=(0,w.min)(o),n=(0,w.max)(o),i={minX:r,minY:t=(0,w.min)(a),x:r,y:t,maxX:n,maxY:e=(0,w.max)(a),width:n-r,height:e-t},(n=this.cfg.canvas)&&(r=n.getViewRange(),this.set("isInView",qu(i,r)))):this.set("isInView",!1),this.set("cacheCanvasBBox",i)},Ec.prototype.draw=function(t,e){var n=this.cfg.children,r=!e||this.cfg.refresh;n.length&&r&&(t.save(),mc(t,this),this._applyClip(t,this.getClip()),vc(t,n,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},Ec.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)};var Mc,Ac=Ec;function Cc(){return null!==Mc&&Mc.apply(this,arguments)||this}Vu(Cc,Mc=sn),Cc.prototype.getDefaultAttrs=function(){var t=Mc.prototype.getDefaultAttrs.call(this);return Wu(Wu({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},Cc.prototype.getShapeBase=function(){return l},Cc.prototype.getGroupBase=function(){return Ac},Cc.prototype.onCanvasChange=function(t){wc(this,t)},Cc.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),n=(t=aa(t)(this),e/2),r=t.x-n,i=t.y-n,o=t.x+t.width+n;n=t.y+t.height+n;return{x:r,minX:r,y:i,minY:i,width:t.width+e,height:t.height+e,maxX:o,maxY:n}},Cc.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},Cc.prototype.isStroke=function(){return!!this.attrs.stroke},Cc.prototype._applyClip=function(t,e){e&&(t.save(),mc(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},Cc.prototype.draw=function(t,e){var n=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!qu(e,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),mc(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},Cc.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},Cc.prototype.cacheCanvasBBox=function(){var t,e=this.getCanvasViewBox();e&&(e=qu(t=this.getCanvasBBox(),e),this.set("isInView",e),e?this.set("cacheCanvasBBox",t):this.set("cacheCanvasBBox",null))},Cc.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},Cc.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},Cc.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},Cc.prototype.fill=function(t){t.fill()},Cc.prototype.stroke=function(t){t.stroke()},Cc.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity;e=e.fillOpacity;this.isFill()&&((0,w.isNil)(e)||1===e?this.fill(t):(t.globalAlpha=e,this.fill(t),t.globalAlpha=r)),this.isStroke()&&0<n&&((0,w.isNil)(i)||1===i||(t.globalAlpha=i),this.stroke(t)),this.afterDrawPath(t)},Cc.prototype.createPath=function(t){},Cc.prototype.afterDrawPath=function(t){},Cc.prototype.isInShape=function(t,e){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,r,i)},Cc.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!1},Cc.prototype.getHitLineWidth=function(){var t;return this.isStroke()?(t=this.attrs).lineWidth+t.lineAppendWidth:0};var Tc,kc=Cc;function Oc(){return null!==Tc&&Tc.apply(this,arguments)||this}Vu(Oc,Tc=kc),Oc.prototype.getDefaultAttrs=function(){var t=Tc.prototype.getDefaultAttrs.call(this);return Wu(Wu({},t),{x:0,y:0,r:0})},Oc.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,s=o.y;o=o.r,i/=2,a=Hu(a,s,t,e);return r&&n?a<=o+i:r?a<=o:!!n&&o-i<=a&&a<=o+i},Oc.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y;e=e.r;t.beginPath(),t.arc(n,r,e,0,2*Math.PI,!1),t.closePath()};var Pc,Ic=Oc;function Nc(t,e,n,r){return t/(n*n)+e/(r*r)}function Dc(){return null!==Pc&&Pc.apply(this,arguments)||this}Vu(Dc,Pc=kc),Dc.prototype.getDefaultAttrs=function(){var t=Pc.prototype.getDefaultAttrs.call(this);return Wu(Wu({},t),{x:0,y:0,rx:0,ry:0})},Dc.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=(i=i/2,o.x),s=o.y,u=o.rx;o=o.ry,t=(t-a)*(t-a),a=(e-s)*(e-s);return r&&n?Nc(t,a,u+i,o+i)<=1:r?Nc(t,a,u,o)<=1:!!n&&1<=Nc(t,a,u-i,o-i)&&Nc(t,a,u+i,o+i)<=1},Dc.prototype.createPath=function(t){var e,n,r=this.attr(),i=r.x,o=r.y,a=r.rx;r=r.ry;t.beginPath(),t.ellipse?t.ellipse(i,o,a,r,0,0,2*Math.PI,!1):(e=r<a?a:r,n=r<a?1:a/r,r=r<a?r/a:1,t.save(),t.translate(i,o),t.scale(n,r),t.arc(0,0,e,0,2*Math.PI),t.restore(),t.closePath())};var Lc,Rc=Dc;function Bc(t){return t instanceof HTMLElement&&(0,w.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}function jc(){return null!==Lc&&Lc.apply(this,arguments)||this}Vu(jc,Lc=kc),jc.prototype.getDefaultAttrs=function(){var t=Lc.prototype.getDefaultAttrs.call(this);return Wu(Wu({},t),{x:0,y:0,width:0,height:0})},jc.prototype.initAttrs=function(t){this._setImage(t.img)},jc.prototype.isStroke=function(){return!1},jc.prototype.isOnlyHitBox=function(){return!0},jc.prototype._afterLoading=function(){var t;!0===this.get("toDraw")&&((t=this.get("canvas"))?t.draw():this.createPath(this.get("context")))},jc.prototype._setImage=function(t){var e,n=this,r=this.attrs;(0,w.isString)(t)?((e=new Image).onload=function(){if(n.destroyed)return!1;n.attr("img",e),n.set("loading",!1),n._afterLoading();var t=n.get("callback");t&&t.call(n)},e.crossOrigin="Anonymous",e.src=t,this.set("loading",!0)):t instanceof Image?(r.width||(r.width=t.width),r.height||(r.height=t.height)):Bc(t)&&(r.width||(r.width=Number(t.getAttribute("width"))),r.height||(r.height,Number(t.getAttribute("height"))))},jc.prototype.onAttrChange=function(t,e,n){Lc.prototype.onAttrChange.call(this,t,e,n),"img"===t&&this._setImage(e)},jc.prototype.createPath=function(t){var e,n,r,i,o,a,s,u,c;this.get("loading")?(this.set("toDraw",!0),this.set("context",t)):(e=(c=this.attr()).x,n=c.y,r=c.width,i=c.height,o=c.sx,a=c.sy,s=c.swidth,u=c.sheight,((c=c.img)instanceof Image||Bc(c))&&((0,w.isNil)(o)||(0,w.isNil)(a)||(0,w.isNil)(s)||(0,w.isNil)(u)?t.drawImage(c,e,n,r,i):t.drawImage(c,o,a,s,u,e,n,r,i)))};var Fc,zc=jc;function Uc(t,e,n,r,i,o,a){var s=Math.min(t,n),u=Math.max(t,n),c=Math.min(e,r),l=Math.max(e,r),h=i/2;return s-h<=o&&o<=u+h&&c-h<=a&&a<=l+h&&ga.pointToLine(t,e,n,r,o,a)<=i/2}function Gc(){return null!==Fc&&Fc.apply(this,arguments)||this}Vu(Gc,Fc=kc),Gc.prototype.getDefaultAttrs=function(){var t=Fc.prototype.getDefaultAttrs.call(this);return Wu(Wu({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},Gc.prototype.initAttrs=function(t){this.setArrow()},Gc.prototype.onAttrChange=function(t,e,n){Fc.prototype.onAttrChange.call(this,t,e,n),this.setArrow()},Gc.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=t.startArrow,a=t.endArrow;o&&fc(this,t,r,i,e,n),a&&dc(this,t,e,n,r,i)},Gc.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!(!n||!i)&&Uc((n=this.attr()).x1,n.y1,n.x2,n.y2,i,t,e)},Gc.prototype.createPath=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.startArrow,s=e.endArrow,u={dx:0,dy:0},c={dx:0,dy:0};a&&a.d&&(u=hc(n,r,i,o,e.startArrow.d)),s&&s.d&&(c=hc(n,r,i,o,e.endArrow.d)),t.beginPath(),t.moveTo(n+u.dx,r+u.dy),t.lineTo(i-c.dx,o-c.dy)},Gc.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},Gc.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2;t=t.y2;return ga.length(e,n,r,t)},Gc.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2;e=e.y2;return ga.pointAt(n,r,i,e,t)};var Vc,Wc=Gc;c={circle:function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},"triangle-down":function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}};function Hc(){return null!==Vc&&Vc.apply(this,arguments)||this}Vu(Hc,Vc=kc),Hc.prototype.initAttrs=function(t){this._resetParamsCache()},Hc.prototype._resetParamsCache=function(){this.set("paramsCache",{})},Hc.prototype.onAttrChange=function(t,e,n){Vc.prototype.onAttrChange.call(this,t,e,n),-1!==["symbol","x","y","r","radius"].indexOf(t)&&this._resetParamsCache()},Hc.prototype.isOnlyHitBox=function(){return!0},Hc.prototype._getR=function(t){return(0,w.isNil)(t.r)?t.radius:t.r},Hc.prototype._getPath=function(){var t,e,n=this.attr(),r=n.x,i=n.y,o=n.symbol||"circle";n=this._getR(n);if((0,w.isFunction)(o))e=Qa(e=(t=o)(r,i,n));else{if(!(t=Hc.Symbols[o]))return null;e=t(r,i,n)}return e},Hc.prototype.createPath=function(t){var e=this._getPath(),n=this.get("paramsCache");_c(this,t,{path:e},n)},Hc.Symbols=c;var Yc=Hc;function qc(t,e,n){var r=Ua();return t.createPath(r),r.isPointInPath(e,n)}var Xc=1e-6;function Kc(t){return Math.abs(t)<Xc?0:t<0?-1:1}function Zc(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o,a,s,u=0;u<i;u++){var c=t[u],l=t[(u+1)%i];if(a=l,((s=[e,n])[0]-(o=c)[0])*(a[1]-o[1])==(a[0]-o[0])*(s[1]-o[1])&&Math.min(o[0],a[0])<=s[0]&&s[0]<=Math.max(o[0],a[0])&&Math.min(o[1],a[1])<=s[1]&&s[1]<=Math.max(o[1],a[1]))return!0;0<Kc(c[1]-n)!=0<Kc(l[1]-n)&&Kc(e-(n-c[1])*(c[0]-l[0])/(c[1]-l[1])-c[0])<0&&(r=!r)}return r}function $c(t,e,n,r,i,o,a,s){var u=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI);return!(u<r||i<u)&&Hu((r={x:t+n*Math.cos(u),y:e+n*Math.sin(u)}).x,r.y,a,s)<=o/2}var Jc,Qc=L,tl=Wu({hasArc:function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e},extractPolygons:function(t){for(var e=t.length,n=[],r=[],i=[],o=0;o<e;o++){var a=t[o],s=a[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([a[1],a[2]])}return 0<i.length&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(t,e,n,r,i){for(var o=!1,a=e/2,s=0;s<t.length;s++){var u=t[s],c=u.currentPoint,l=u.params,h=u.prePoint,f=u.box;if(!f||Yu(f.x-a,f.y-a,f.width+e,f.height+e,n,r)){switch(u.command){case"L":case"Z":o=Uc(h[0],h[1],c[0],c[1],e,n,r);break;case"Q":o=wa.pointDistance(h[0],h[1],l[1],l[2],l[3],l[4],n,r)<=e/2;break;case"C":o=Ta.pointDistance(h[0],h[1],l[1],l[2],l[3],l[4],l[5],l[6],n,r,i)<=e/2;break;case"A":var d=u.arcParams,p=d.cx,g=d.cy,m=d.rx,v=d.ry,y=d.startAngle,b=d.endAngle,x=(d=d.xRotation,[n,r,1]),_=v<m?m:v;p=Qc(null,[["t",-p,-g],["r",-d],["s",1/(v<m?1:m/v),1/(v<m?v/m:1)]]);ge.transformMat3(x,x,p),o=$c(0,0,_,y,b,e,x[0],x[1])}if(o)break}}return o}},o);function el(t,e,n){for(var r=!1,i=0;i<t.length&&!(r=Zc(t[i],e,n));i++);return r}function nl(){return null!==Jc&&Jc.apply(this,arguments)||this}Vu(nl,Jc=kc),nl.prototype.getDefaultAttrs=function(){var t=Jc.prototype.getDefaultAttrs.call(this);return Wu(Wu({},t),{startArrow:!1,endArrow:!1})},nl.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},nl.prototype.onAttrChange=function(t,e,n){Jc.prototype.onAttrChange.call(this,t,e,n),"path"===t&&this._setPathArr(e),this.setArrow()},nl.prototype._setPathArr=function(t){this.attrs.path=Qa(t),t=tl.hasArc(t),this.set("hasArc",t),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},nl.prototype.getSegments=function(){var t=this.get("segements");return t||(t=os(this.attr("path")),this.set("segments",t)),t},nl.prototype.setArrow=function(){var t,e=this.attr(),n=e.startArrow,r=e.endArrow;n&&(t=this.getStartTangent(),fc(this,e,t[0][0],t[0][1],t[1][0],t[1][1])),r&&(t=this.getEndTangent(),dc(this,e,t[0][0],t[0][1],t[1][0],t[1][1]))},nl.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.getSegments(),a=this.get("hasArc"),s=!1;return n&&(n=this.getTotalLength(),s=tl.isPointInStroke(o,i,t,e,n)),!s&&r?a?qc(this,t,e):(o=this.attr("path"),el((i=tl.extractPolygons(o)).polygons,t,e)||el(i.polylines,t,e)):s},nl.prototype.createPath=function(t){var e=this.attr(),n=this.get("paramsCache");_c(this,t,e,n)},nl.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},nl.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,w.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},nl.prototype.getPoint=function(t){var e,n,r=this.get("tCache"),i=(r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache")),this.get("curve"));if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;(0,w.each)(r,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)}));var o;r=i[n];return(0,w.isNil)(r)||(0,w.isNil)(n)?null:(o=r.length,i=i[n+1],Ta.pointAt(r[o-2],r[o-1],i[1],i[2],i[3],i[4],i[5],i[6],e))},nl.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",tl.pathToCurve(t))},nl.prototype._setTcache=function(){var t,e,n,r,i=0,o=0,a=[],s=this.get("curve");s&&((0,w.each)(s,(function(t,e){n=s[e+1],r=t.length,n&&(i+=Ta.length(t[r-2],t[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0===i?this.set("tCache",[]):((0,w.each)(s,(function(u,c){n=s[c+1],r=u.length,n&&((t=[])[0]=o/i,e=Ta.length(u[r-2],u[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=e||0,t[1]=o/i,a.push(t))})),this.set("tCache",a)))},nl.prototype.getStartTangent=function(){var t,e,n,r=this.getSegments();return 1<r.length&&(t=r[0].currentPoint,e=r[1].currentPoint,n=[],(r=r[1].startTangent)?n.push([t[0]-r[0],t[1]-r[1]]):n.push([e[0],e[1]]),n.push([t[0],t[1]])),n},nl.prototype.getEndTangent=function(){var t,e,n,r=this.getSegments(),i=r.length;return 1<i&&(t=r[i-2].currentPoint,e=r[i-1].currentPoint,n=[],(r=r[i-1].endTangent)?n.push([e[0]-r[0],e[1]-r[1]]):n.push([t[0],t[1]]),n.push([e[0],e[1]])),n};var rl,il=nl;function ol(t,e,n,r,i){var o=t.length;if(!(o<2)){for(var a=0;a<o-1;a++)if(Uc(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,r))return!0;if(i){i=t[0];var s=t[o-1];if(Uc(i[0],i[1],s[0],s[1],e,n,r))return!0}}return!1}function al(){return null!==rl&&rl.apply(this,arguments)||this}Vu(al,rl=kc),al.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr().points,a=!1;return!(a=n?ol(o,i,t,e,!0):a)&&r?Zc(o,t,e):a},al.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var n=0;n<e.length;n++){var r=e[n];0===n?t.moveTo(r[0],r[1]):t.lineTo(r[0],r[1])}t.closePath()}};var sl,ul=al;function cl(){return null!==sl&&sl.apply(this,arguments)||this}Vu(cl,sl=kc),cl.prototype.getDefaultAttrs=function(){var t=sl.prototype.getDefaultAttrs.call(this);return Wu(Wu({},t),{startArrow:!1,endArrow:!1})},cl.prototype.initAttrs=function(t){this.setArrow()},cl.prototype.onAttrChange=function(t,e,n){sl.prototype.onAttrChange.call(this,t,e,n),this.setArrow(),-1!==["points"].indexOf(t)&&this._resetCache()},cl.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},cl.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,r=e.startArrow,i=(e=e.endArrow,n.length),o=n[0][0],a=n[0][1],s=n[i-1][0],u=n[i-1][1];r&&fc(this,t,n[1][0],n[1][1],o,a),e&&dc(this,t,n[i-2][0],n[i-2][1],s,u)},cl.prototype.isFill=function(){return!1},cl.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!(!n||!i)&&ol(this.attr().points,i,t,e,!1)},cl.prototype.isStroke=function(){return!0},cl.prototype.createPath=function(t){var e=this.attr(),n=e.points,r=e.startArrow,i=(e=e.endArrow,n.length);if(!(n.length<2)){var o,a=n[0][0],s=n[0][1],u=n[i-1][0],c=n[i-1][1];r&&r.d&&(a+=(o=hc(a,s,n[1][0],n[1][1],r.d)).dx,s+=o.dy),e&&e.d&&(u-=(o=hc(n[i-2][0],n[i-2][1],u,c,e.d)).dx,c-=o.dy),t.beginPath(),t.moveTo(a,s);for(var l=0;l<i-1;l++){var h=n[l];t.lineTo(h[0],h[1])}t.lineTo(u,c)}},cl.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},cl.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,w.isNil)(e)?(this.set("totalLength",Ba(t)),this.get("totalLength")):e},cl.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,w.each)(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),ga.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},cl.prototype._setTcache=function(){var t,e,n,r,i,o=this.attr().points;!o||0===o.length||(t=this.getTotalLength())<=0||(n=[],(e=0,w.each)(o,(function(a,s){o[s+1]&&((r=[])[0]=e/t,i=ga.length(a[0],a[1],o[s+1][0],o[s+1][1]),e+=i,r[1]=e/t,n.push(r))})),this.set("tCache",n))},cl.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},cl.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n};var ll,hl=cl;function fl(){return null!==ll&&ll.apply(this,arguments)||this}Vu(fl,ll=kc),fl.prototype.getDefaultAttrs=function(){var t=ll.prototype.getDefaultAttrs.call(this);return Wu(Wu({},t),{x:0,y:0,width:0,height:0,radius:0})},fl.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o,a,s,u,c,l,h,f,d=this.attr(),p=d.x,g=d.y,m=d.width,v=d.height;d=d.radius;return d?(f=!1,n&&(c=v,f=Uc((a=p)+d,l=g,a+(o=m)-d,l,s=i,u=t,h=e)||Uc(a+o,l+d,a+o,l+c-d,s,u,h)||Uc(a+o-d,l+c,a+d,l+c,s,u,h)||Uc(a,l+c-d,a,l+d,s,u,h)||$c(a+o-d,l+d,d,1.5*Math.PI,2*Math.PI,s,u,h)||$c(a+o-d,l+c-d,d,0,.5*Math.PI,s,u,h)||$c(a+d,l+c-d,d,.5*Math.PI,Math.PI,s,u,h)||$c(a+d,l+d,d,Math.PI,1.5*Math.PI,s,u,h)),!f&&r?qc(this,t,e):f):(o=i/2,r&&n?Yu(p-o,g-o,m+o,v+o,t,e):r?Yu(p,g,m,v,t,e):n?(c=v,Yu((a=p)-(d=(l=i)/2),(s=g)-d,u=m,l,h=t,f=e)||Yu(a+u-d,s-d,l,c,h,f)||Yu(a+d,s+c-d,u,l,h,f)||Yu(a-d,s+d,l,c,h,f)):void 0)},fl.prototype.createPath=function(t){var e,n,r,i,o=this.attr(),a=o.x,s=o.y,u=o.width,c=o.height;o=o.radius;t.beginPath(),0===o?t.rect(a,s,u,c):((i=r=n=e=0,w.isArray)(o)?1===o.length?e=n=r=i=o[0]:2===o.length?(e=r=o[0],n=i=o[1]):3===o.length?(e=o[0],n=i=o[1],r=o[2]):(e=o[0],n=o[1],r=o[2],i=o[3]):e=n=r=i=o,e=(o=[e,n,r,i])[1],n=o[2],r=o[3],t.moveTo(a+(i=o[0]),s),t.lineTo(a+u-e,s),0!==e&&t.arc(a+u-e,s+e,e,-Math.PI/2,0),t.lineTo(a+u,s+c-n),0!==n&&t.arc(a+u-n,s+c-n,n,0,Math.PI/2),t.lineTo(a+r,s+c),0!==r&&t.arc(a+r,s+c-r,r,Math.PI/2,Math.PI),t.lineTo(a,s+i),0!==i&&t.arc(a+i,s+i,i,Math.PI,1.5*Math.PI),t.closePath())};var dl,pl=fl;function gl(){return null!==dl&&dl.apply(this,arguments)||this}Vu(gl,dl=kc),gl.prototype.getDefaultAttrs=function(){var t=dl.prototype.getDefaultAttrs.call(this);return Wu(Wu({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},gl.prototype.isOnlyHitBox=function(){return!0},gl.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},gl.prototype._assembleFont=function(){var t=this.attrs;t.font=Va(t)},gl.prototype._setText=function(t){var e=null;(0,w.isString)(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},gl.prototype.onAttrChange=function(t,e,n){dl.prototype.onAttrChange.call(this,t,e,n),t.startsWith("font")&&this._assembleFont(),"text"===t&&this._setText(e)},gl.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight;t=+t.fontSize;return e?e-t:.14*t},gl.prototype._drawTextArr=function(t,e,n){var r,i=this.attrs,o=i.textBaseline,a=i.x,s=i.y,u=+i.fontSize,c=this._getSpaceingY(),l=Ga(i.text,i.fontSize,i.lineHeight);(0,w.each)(e,(function(e,i){r=s+i*(c+u)-l+u,"middle"===o&&(r+=l-u-(l-u)/2),"top"===o&&(r+=l-u),(0,w.isNil)(e)||(n?t.fillText(e,a,r):t.strokeText(e,a,r))}))},gl.prototype._drawText=function(t,e){var n=this.attr(),r=n.x,i=n.y,o=this.get("textArr");o?this._drawTextArr(t,o,e):(o=n.text,(0,w.isNil)(o)||(e?t.fillText(o,r,i):t.strokeText(o,r,i)))},gl.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity;e=e.fillOpacity;this.isStroke()&&0<n&&((0,w.isNil)(i)||1===i||(t.globalAlpha=r),this.stroke(t)),this.isFill()&&((0,w.isNil)(e)||1===e?this.fill(t):(t.globalAlpha=e,this.fill(t),t.globalAlpha=r)),this.afterDrawPath(t)},gl.prototype.fill=function(t){this._drawText(t,!0)},gl.prototype.stroke=function(t){this._drawText(t,!1)};var ml,vl=gl;function yl(t,e,n){var r;t=t.getTotalMatrix();return t?(r=[e,n,1],[(t=t?Ir(Nr(t),r):r)[0],t[1]]):[e,n]}function bl(t,e,n){if(t.isCanvas&&t.isCanvas())return 1;if(gr(t)&&!1!==t.cfg.isInView){if(t.cfg.clipShape){var r=yl(t,e,n),i=r[0];r=r[1];if(t.isClipped(i,r))return}return i=t.cfg.cacheCanvasBBox||t.getCanvasBBox(),e>=i.minX&&e<=i.maxX&&n>=i.minY&&n<=i.maxY?1:void 0}}function xl(){return null!==ml&&ml.apply(this,arguments)||this}Vu(xl,ml=rn),xl.prototype.getDefaultCfg=function(){var t=ml.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},xl.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},xl.prototype.getShapeBase=function(){return l},xl.prototype.getGroupBase=function(){return Ac},xl.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return 1<=t?Math.ceil(t):1},xl.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},xl.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},xl.prototype.setDOMSize=function(t,e){ml.prototype.setDOMSize.call(this,t,e);var n=this.get("context"),r=this.get("el"),i=this.getPixelRatio();r.width=i*t,r.height=i*e,1<i&&n.scale(i,i)},xl.prototype.clear=function(){ml.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),e=this.get("el");t.clearRect(0,0,e.width,e.height)},xl.prototype.getShape=function(t,e){return t=this.get("quickHit")?function t(e,n,r){if(!bl(e,n,r))return null;for(var i=null,o=e.getChildren(),a=o.length-1;0<=a;a--){var s,u,c,l=o[a];if(l.isGroup()?i=t(l,n,r):bl(l,n,r)&&(u=(c=yl(s=l,n,r))[0],c=c[1],s.isInShape(u,c))&&(i=l),i)break}return i}(this,t,e):ml.prototype.getShape.call(this,t,e,null),t},xl.prototype._getRefreshRegion=function(){var t,e,n,r,i,o=this.get("refreshElements"),a=this.getViewRange();return o.length&&o[0]===this?t=a:(t=o.length?(e=[],n=[],r=[],i=[],(0,w.each)(o,(function(t){t=Sc(t),t&&(e.push(t.minX),n.push(t.minY),r.push(t.maxX),i.push(t.maxY))})),{minX:(0,w.min)(e),minY:(0,w.min)(n),maxX:(0,w.max)(r),maxY:(0,w.max)(i)}):null)&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1,this.get("clipView"))&&(o=a,t=(a=t)&&o&&qu(a,o)?{minX:Math.max(a.minX,o.minX),minY:Math.max(a.minY,o.minY),maxX:Math.min(a.maxX,o.maxX),maxY:Math.min(a.maxY,o.maxY)}:null),t},xl.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},xl.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,w.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},xl.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},xl.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),n=this.getChildren();t.clearRect(0,0,e.width,e.height),mc(t,this),vc(t,n),this.set("refreshElements",[])},xl.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(t.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.save(),t.beginPath(),t.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.clip(),mc(t,this),yc(this,n,r),vc(t,n,r),t.restore()):e.length&&function t(e){for(var n=0;n<e.length;n++){var r=e[n];r.cfg.hasChanged=!1,r.isGroup()&&!r.destroyed&&t(r.cfg.children)}}(e),(0,w.each)(e,(function(t){t.get("hasChanged")&&t.set("hasChanged",!1)})),this.set("refreshElements",[])},xl.prototype._startDraw=function(){var t,e=this;this.get("drawFrame")||(t=(0,w.requestAnimationFrame)((function(){e.get("localRefresh")?e._drawRegion():e._drawAll(),e.set("drawFrame",null)})),this.set("drawFrame",t))},xl.prototype.skipDraw=function(){},xl.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)};var _l=xl,wl=function(t,e){return(wl=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};function Sl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}wl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var El=function(){return(El=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create,Object.create;var Ml,Al={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Cl={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function Tl(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function kl(t){var e=Al[t.type],n=t.getParent();if(!e)throw new Error("the type "+t.type+" is not supported by svg");e=Tl(e),t.get("id")&&(e.id=t.get("id")),t.set("el",e),t.set("attrs",{}),n&&((t=n.get("el"))||(t=n.createDom(),n.set("el",t)),t.appendChild(e))}function Ol(t,e){t=t.get("el"),e=(0,w.toArray)(t.children).sort(e);var n=document.createDocumentFragment();e.forEach((function(t){n.appendChild(t)})),t.appendChild(n)}function Pl(t){var e=t.attr().matrix;if(e){t=t.cfg.el;for(var n=[],r=0;r<9;r+=3)n.push(e[r]+","+e[r+1]);-1===(n=n.join(",")).indexOf("NaN")&&t.setAttribute("transform","matrix("+n+")")}}function Il(t,e){var n=t.getClip();t=t.get("el");n?t.hasAttribute("clip-path")||(kl(n),n.createPath(e),e=e.addClip(n),t.setAttribute("clip-path","url(#"+e+")")):t.removeAttribute("clip-path")}function Nl(t,e){e.forEach((function(e){e.draw(t)}))}function Dl(t,e){var n,r,i,o,a,s,u,c,l=t.get("canvas");l&&l.get("autoDraw")&&(n=l.get("context"),a=(a=t.getParent())?a.getChildren():[l],l=t.get("el"),"remove"===e?t.get("isClipShape")?(i=(o=l&&l.parentNode)&&o.parentNode,o&&i&&i.removeChild(o)):l&&l.parentNode&&l.parentNode.removeChild(l):"show"===e?l.setAttribute("visibility","visible"):"hide"===e?l.setAttribute("visibility","hidden"):"zIndex"===e?(i=l,o=a.indexOf(t),a=i.parentNode,s=Array.from(a.childNodes).filter((function(t){return 1===t.nodeType&&"defs"!==t.nodeName.toLowerCase()})),u=s[o],c=s.indexOf(i),u?o<c?a.insertBefore(i,u):c<o&&((u=s[o+1])?a.insertBefore(i,u):a.appendChild(i)):a.appendChild(i)):"sort"===e?(r=t.get("children"))&&r.length&&Ol(t,(function(t,e){return r.indexOf(t)-r.indexOf(e)?1:0})):"clear"===e?l&&(l.innerHTML=""):"matrix"===e?Pl(t):"clip"===e?Il(t,n):"attr"!==e&&"add"===e&&t.draw(n))}function Ll(){return null!==Ml&&Ml.apply(this,arguments)||this}Sl(Ll,Ml=en),Ll.prototype.isEntityGroup=function(){return!0},Ll.prototype.createDom=function(){var t,e=Tl("g"),n=(this.set("el",e),this.getParent());return n&&((t=n.get("el"))||(t=n.createDom(),n.set("el",t)),t.appendChild(e)),e},Ll.prototype.afterAttrsChange=function(t){Ml.prototype.afterAttrsChange.call(this,t);var e=this.get("canvas");e&&e.get("autoDraw")&&(e=e.get("context"),this.createPath(e,t))},Ll.prototype.onCanvasChange=function(t){Dl(this,t)},Ll.prototype.getShapeBase=function(){return h},Ll.prototype.getGroupBase=function(){return Ll},Ll.prototype.draw=function(t){var e=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Il(this,t),this.createPath(t),e.length&&Nl(t,e))},Ll.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,w.each)(e||n,(function(t,e){Cl[e]&&r.setAttribute(Cl[e],t)})),Pl(this)};var Rl,Bl=Ll;function jl(){var t=null!==Rl&&Rl.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}Sl(jl,Rl=sn),jl.prototype.getDefaultAttrs=function(){var t=Rl.prototype.getDefaultAttrs.call(this);return El(El({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},jl.prototype.afterAttrsChange=function(t){Rl.prototype.afterAttrsChange.call(this,t);var e=this.get("canvas");e&&e.get("autoDraw")&&(e=e.get("context"),this.draw(e,t))},jl.prototype.getShapeBase=function(){return h},jl.prototype.getGroupBase=function(){return Bl},jl.prototype.onCanvasChange=function(t){Dl(this,t)},jl.prototype.calculateBBox=function(){var t,e,n,r,i,o,a=this.get("el"),s=null;return a?s=a.getBBox():(a=aa(this.get("type")))&&(s=a(this)),s?(a=s.x,t=s.y,e=s.width,s=s.height,{x:i=a-(r=(n=this.getHitLineWidth())/2),y:o=t-r,minX:i,minY:o,maxX:a+e+r,maxY:t+s+r,width:e+n,height:s+n}):{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},jl.prototype.isFill=function(){var t=this.attr(),e=t.fill;t=t.fillStyle;return(e||t||this.isClipShape())&&this.canFill},jl.prototype.isStroke=function(){var t=this.attr(),e=t.stroke;t=t.strokeStyle;return(e||t)&&this.canStroke},jl.prototype.draw=function(t,e){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||kl(this),Il(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},jl.prototype.createPath=function(t,e){},jl.prototype.strokeAndFill=function(t,e){var n=e||this.attr(),r=n.fill,i=n.fillStyle,o=n.stroke,a=n.strokeStyle,s=n.fillOpacity,u=n.strokeOpacity,c=n.lineWidth,l=this.get("el");this.canFill&&(e?"fill"in n?this._setColor(t,"fill",r):"fillStyle"in n&&this._setColor(t,"fill",i):this._setColor(t,"fill",r||i),s)&&l.setAttribute(Cl.fillOpacity,s),this.canStroke&&0<c&&(e?"stroke"in n?this._setColor(t,"stroke",o):"strokeStyle"in n&&this._setColor(t,"stroke",a):this._setColor(t,"stroke",o||a),u&&l.setAttribute(Cl.strokeOpacity,u),c)&&l.setAttribute(Cl.lineWidth,c)},jl.prototype._setColor=function(t,e,n){var r,i=this.get("el");n?(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)?(r=(r=t.find("gradient",n))||t.addGradient(n),i.setAttribute(Cl[e],"url(#"+r+")")):/^[p,P]{1}[\s]*\(/.test(n)?(r=(r=t.find("pattern",n))||t.addPattern(n),i.setAttribute(Cl[e],"url(#"+r+")")):i.setAttribute(Cl[e],n)):i.setAttribute(Cl[e],"none")},jl.prototype.shadow=function(t,e){var n=this.attr(),r=(e=e||n,n=e.shadowOffsetX,e.shadowOffsetY),i=e.shadowBlur;e=e.shadowColor;(n||r||i||e)&&(n=t,i=(r=this).cfg.el,(r={dx:(r=r.attr()).shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor}).dx||r.dy||r.blur||r.color?(e=(e=n.find("filter",r))||n.addShadow(r),i.setAttribute("filter","url(#"+e+")")):i.removeAttribute("filter"))},jl.prototype.transform=function(t){var e=this.attr();(t||e).matrix&&Pl(this)},jl.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},jl.prototype.isPointInPath=function(t,e){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect();t+=r.left,e+=r.top,r=document.elementFromPoint(t,e);return!(!r||!r.isEqualNode(n))},jl.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth;t=t.lineAppendWidth;return this.isStroke()?e+t:0};var Fl,zl=jl;function Ul(){var t=null!==Fl&&Fl.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}Sl(Ul,Fl=zl),Ul.prototype.getDefaultAttrs=function(){var t=Fl.prototype.getDefaultAttrs.call(this);return El(El({},t),{x:0,y:0,r:0})},Ul.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,w.each)(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):Cl[e]&&r.setAttribute(Cl[e],t)}))};var Gl,Vl=Ul;function Wl(){var t=null!==Gl&&Gl.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}Sl(Wl,Gl=zl),Wl.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");if((0,w.each)(e||n,(function(t,e){Cl[e]&&r.setAttribute(Cl[e],t)})),"function"==typeof n.html)if(e=n.html.call(this,n),e instanceof Element||e instanceof HTMLDocument){for(var i=r.childNodes,o=i.length-1;0<=o;o--)r.removeChild(i[o]);r.appendChild(e)}else r.innerHTML=e;else r.innerHTML=n.html};var Hl,Yl=Wl;function ql(){var t=null!==Hl&&Hl.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}Sl(ql,Hl=zl),ql.prototype.getDefaultAttrs=function(){var t=Hl.prototype.getDefaultAttrs.call(this);return El(El({},t),{x:0,y:0,rx:0,ry:0})},ql.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,w.each)(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):Cl[e]&&r.setAttribute(Cl[e],t)}))};var Xl,Kl=ql;function Zl(){var t=null!==Xl&&Xl.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}Sl(Zl,Xl=zl),Zl.prototype.getDefaultAttrs=function(){var t=Xl.prototype.getDefaultAttrs.call(this);return El(El({},t),{x:0,y:0,width:0,height:0})},Zl.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");(0,w.each)(e||r,(function(t,e){"img"===e?n._setImage(r.img):Cl[e]&&i.setAttribute(Cl[e],t)}))},Zl.prototype.setAttr=function(t,e){this.attrs[t]=e,"img"===t&&this._setImage(e)},Zl.prototype._setImage=function(t){var e,n=this.attr(),r=this.get("el");(0,w.isString)(t)?r.setAttribute("href",t):t instanceof window.Image?(n.width||(r.setAttribute("width",t.width),this.attr("width",t.width)),n.height||(r.setAttribute("height",t.height),this.attr("height",t.height)),r.setAttribute("href",t.src)):t instanceof HTMLElement&&(0,w.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()?r.setAttribute("href",t.toDataURL()):t instanceof ImageData&&((e=document.createElement("canvas")).setAttribute("width",""+t.width),e.setAttribute("height",""+t.height),e.getContext("2d").putImageData(t,0,0),n.width||(r.setAttribute("width",""+t.width),this.attr("width",t.width)),n.height||(r.setAttribute("height",""+t.height),this.attr("height",t.height)),r.setAttribute("href",e.toDataURL()))};var $l,Jl=Zl;function Ql(){var t=null!==$l&&$l.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}Sl(Ql,$l=zl),Ql.prototype.getDefaultAttrs=function(){var t=$l.prototype.getDefaultAttrs.call(this);return El(El({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},Ql.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,w.each)(e||n,(function(e,i){var o;"startArrow"===i||"endArrow"===i?e?(o=(0,w.isObject)(e)?t.addArrow(n,Cl[i]):t.getDefaultArrow(n,Cl[i]),r.setAttribute(Cl[i],"url(#"+o+")")):r.removeAttribute(Cl[i]):Cl[i]&&r.setAttribute(Cl[i],e)}))},Ql.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2;t=t.y2;return ga.length(e,n,r,t)},Ql.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2;e=e.y2;return ga.pointAt(n,r,i,e,t)};var th,eh=Ql,nh={circle:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["z"]]},triangleDown:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},rh={get:function(t){return nh[t]},register:function(t,e){nh[t]=e},remove:function(t){delete nh[t]},getAll:function(){return nh}};function ih(){var t=null!==th&&th.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}Sl(ih,th=zl),ih.prototype.createPath=function(t){this.get("el").setAttribute("d",this._assembleMarker())},ih.prototype._assembleMarker=function(){var t=this._getPath();return(0,w.isArray)(t)?t.map((function(t){return t.join(" ")})).join(""):t},ih.prototype._getPath=function(){var t=this.attr(),e=t.x,n=t.y,r=t.r||t.radius;t=t.symbol||"circle",t=(0,w.isFunction)(t)?t:rh.get(t);return t?t(e,n,r):null},ih.symbolsFactory=rh;var oh,ah=ih;function sh(){var t=null!==oh&&oh.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}Sl(sh,oh=zl),sh.prototype.getDefaultAttrs=function(){var t=oh.prototype.getDefaultAttrs.call(this);return El(El({},t),{startArrow:!1,endArrow:!1})},sh.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");(0,w.each)(e||r,(function(e,o){var a;"path"===o&&(0,w.isArray)(e)?i.setAttribute("d",n._formatPath(e)):"startArrow"===o||"endArrow"===o?e?(a=(0,w.isObject)(e)?t.addArrow(r,Cl[o]):t.getDefaultArrow(r,Cl[o]),i.setAttribute(Cl[o],"url(#"+a+")")):i.removeAttribute(Cl[o]):Cl[o]&&i.setAttribute(Cl[o],e)}))},sh.prototype._formatPath=function(t){return t=t.map((function(t){return t.join(" ")})).join(""),~t.indexOf("NaN")?"":t},sh.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},sh.prototype.getPoint=function(t){var e=this.get("el"),n=this.getTotalLength();return 0!==n&&(e=e?e.getPointAtLength(t*n):null)?{x:e.x,y:e.y}:null};var uh,ch=sh;function lh(){var t=null!==uh&&uh.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}Sl(lh,uh=zl),lh.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,w.each)(e||n,(function(t,e){"points"===e&&(0,w.isArray)(t)&&2<=t.length?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):Cl[e]&&r.setAttribute(Cl[e],t)}))};var hh,fh=lh;function dh(){var t=null!==hh&&hh.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}Sl(dh,hh=zl),dh.prototype.getDefaultAttrs=function(){var t=hh.prototype.getDefaultAttrs.call(this);return El(El({},t),{startArrow:!1,endArrow:!1})},dh.prototype.onAttrChange=function(t,e,n){hh.prototype.onAttrChange.call(this,t,e,n),-1!==["points"].indexOf(t)&&this._resetCache()},dh.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},dh.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,w.each)(e||n,(function(t,e){"points"===e&&(0,w.isArray)(t)&&2<=t.length?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):Cl[e]&&r.setAttribute(Cl[e],t)}))},dh.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,w.isNil)(e)?(this.set("totalLength",Ba(t)),this.get("totalLength")):e},dh.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,w.each)(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),ga.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},dh.prototype._setTcache=function(){var t,e,n,r,i,o=this.attr().points;!o||0===o.length||(t=this.getTotalLength())<=0||(n=[],(e=0,w.each)(o,(function(a,s){o[s+1]&&((r=[])[0]=e/t,i=ga.length(a[0],a[1],o[s+1][0],o[s+1][1]),e+=i,r[1]=e/t,n.push(r))})),this.set("tCache",n))},dh.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},dh.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n};var ph,gh=dh;function mh(){var t=null!==ph&&ph.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}Sl(mh,ph=zl),mh.prototype.getDefaultAttrs=function(){var t=ph.prototype.getDefaultAttrs.call(this);return El(El({},t),{x:0,y:0,width:0,height:0,radius:0})},mh.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el"),o=!1,a=["x","y","width","height","radius"];(0,w.each)(e||r,(function(t,e){-1===a.indexOf(e)||o?-1===a.indexOf(e)&&Cl[e]&&i.setAttribute(Cl[e],t):(i.setAttribute("d",n._assembleRect(r)),o=!0)}))},mh.prototype._assembleRect=function(t){var e,n,r,i,o,a=t.x,s=t.y,u=t.width,c=t.height;t=t.radius;return t?(e=t,(o=i=r=n=0,w.isArray)(e)?1===e.length?n=r=i=o=e[0]:2===e.length?(n=i=e[0],r=o=e[1]):3===e.length?(n=e[0],r=o=e[1],i=e[2]):(n=e[0],r=e[1],i=e[2],o=e[3]):n=r=i=o=e,e={r1:n,r2:r,r3:i,r4:o},(0,w.isArray)(t)?1===t.length?e.r1=e.r2=e.r3=e.r4=t[0]:2===t.length?(e.r1=e.r3=t[0],e.r2=e.r4=t[1]):3===t.length?(e.r1=t[0],e.r2=e.r4=t[1],e.r3=t[2]):(e.r1=t[0],e.r2=t[1],e.r3=t[2],e.r4=t[3]):e.r1=e.r2=e.r3=e.r4=t,[["M "+(a+e.r1)+","+s],["l "+(u-e.r1-e.r2)+",0"],["a "+e.r2+","+e.r2+",0,0,1,"+e.r2+","+e.r2],["l 0,"+(c-e.r2-e.r3)],["a "+e.r3+","+e.r3+",0,0,1,"+-e.r3+","+e.r3],["l "+(e.r3+e.r4-u)+",0"],["a "+e.r4+","+e.r4+",0,0,1,"+-e.r4+","+-e.r4],["l 0,"+(e.r4+e.r1-c)],["a "+e.r1+","+e.r1+",0,0,1,"+e.r1+","+-e.r1],["z"]].join(" ")):"M "+a+","+s+" l "+u+",0 l 0,"+c+" l"+-u+" 0 z"};var vh,yh=mh,bh={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},xh={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},_h={left:"left",start:"left",center:"middle",right:"end",end:"end"};function wh(){var t=null!==vh&&vh.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}Sl(wh,vh=zl),wh.prototype.getDefaultAttrs=function(){var t=vh.prototype.getDefaultAttrs.call(this);return El(El({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},wh.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");this._setFont(),(0,w.each)(e||r,(function(t,e){"text"===e?n._setText(""+t):"matrix"===e&&t?Pl(n):Cl[e]&&i.setAttribute(Cl[e],t)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},wh.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),n=e.textBaseline,r=(e=e.textAlign,Tr());r&&"firefox"===r.name?t.setAttribute("dominant-baseline",xh[n]||"alphabetic"):t.setAttribute("alignment-baseline",bh[n]||"baseline"),t.setAttribute("text-anchor",_h[e]||"left")},wh.prototype._setText=function(t){var e,n,r=this.get("el"),i=this.attr(),o=i.x,a=(i=i.textBaseline,void 0===i?"bottom":i);t?~t.indexOf("\n")?(i=t.split("\n"),e=i.length-1,(n="",w.each)(i,(function(t,r){0===r?"alphabetic"===a?n+='<tspan x="'+o+'" dy="'+-e+'em">'+t+"</tspan>":"top"===a?n+='<tspan x="'+o+'" dy="0.9em">'+t+"</tspan>":"middle"===a?n+='<tspan x="'+o+'" dy="'+-(e-1)/2+'em">'+t+"</tspan>":"bottom"===a?n+='<tspan x="'+o+'" dy="-'+(.3+e)+'em">'+t+"</tspan>":"hanging"===a&&(n+='<tspan x="'+o+'" dy="'+(-(e-1)-.3)+'em">'+t+"</tspan>"):n+='<tspan x="'+o+'" dy="1em">'+t+"</tspan>"})),r.innerHTML=n):r.innerHTML=t:r.innerHTML=""};var Sh=wh,Eh=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Mh=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Ah=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Ch(t){var e;t=t.match(Ah);return t?(e="",t.sort((function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])})),(0,w.each)(t,(function(t){t=t.split(":"),e+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'})),e):""}function Th(t){this.cfg={};var e,n,r,i,o,a,s,u=null,c=(0,w.uniqueId)("gradient_");return"l"===t.toLowerCase()[0]?(u=Tl("linearGradient"),e=t,n=u,e=Eh.exec(e),i=(0,w.mod)((0,w.toRadian)(parseFloat(e[1])),2*Math.PI),e=e[2],o=0<=i&&i<.5*Math.PI?(r={x:0,y:0},{x:1,y:1}):.5*Math.PI<=i&&i<Math.PI?(r={x:1,y:0},{x:0,y:1}):Math.PI<=i&&i<1.5*Math.PI?(r={x:1,y:1},{x:0,y:0}):(r={x:0,y:1},{x:1,y:0}),a=(i=Math.tan(i))*i,s=(o.x-r.x+i*(o.y-r.y))/(1+a)+r.x,i=i*(o.x-r.x+i*(o.y-r.y))/(1+a)+r.y,n.setAttribute("x1",r.x),n.setAttribute("y1",r.y),n.setAttribute("x2",s),n.setAttribute("y2",i),n.innerHTML=Ch(e)):(u=Tl("radialGradient"),o=t,a=u,o=Mh.exec(o),r=parseFloat(o[1]),s=parseFloat(o[2]),i=parseFloat(o[3]),o=o[4],a.setAttribute("cx",r),a.setAttribute("cy",s),a.setAttribute("r",i),a.innerHTML=Ch(o)),u.setAttribute("id",c),this.el=u,this.id=c,this.cfg=t,this}Th.prototype.match=function(t,e){return this.cfg===e};var kh=Th,Oh={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},Ph={x:"-40%",y:"-40%",width:"200%",height:"200%"};function Ih(t){this.type="filter",this.cfg={};var e=Tl(this.type="filter");return(0,w.each)(Ph,(function(t,n){e.setAttribute(n,t)})),this.el=e,this.id=(0,w.uniqueId)("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}Ih.prototype.match=function(t,e){var n,r;return this.type===t&&(n=!0,r=this.cfg,(0,w.each)(Object.keys(r),(function(t){if(r[t]!==e[t])return n=!1})),n)},Ih.prototype.update=function(t,e){var n=this.cfg;return n[Oh[t]]=e,this._parseShadow(n,this.el),this},Ih.prototype._parseShadow=function(t,e){t='<feDropShadow\n      dx="'+(t.dx||0)+'"\n      dy="'+(t.dy||0)+'"\n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color||"#000")+'"\n      flood-opacity="'+(t.opacity||1)+'"\n      />',e.innerHTML=t};var Nh=Ih;function Dh(t,e){this.cfg={};var n=Tl("marker"),r=(0,w.uniqueId)("marker_"),i=(n.setAttribute("id",r),Tl("path"));i.setAttribute("stroke",t.stroke||"none"),i.setAttribute("fill",t.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r,n=t["marker-start"===e?"startArrow":"endArrow"];return this.stroke=t.stroke||"#000",!0===n?this._setDefaultPath(e,i):(this.cfg=n,this._setMarker(t.lineWidth,i)),this}Dh.prototype.match=function(){return!1},Dh.prototype._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},Dh.prototype._setMarker=function(t,e){var n=this.el,r=this.cfg.path,i=this.cfg.d;(0,w.isArray)(r)&&(r=r.map((function(t){return t.join(" ")})).join("")),e.setAttribute("d",r),n.appendChild(e),i&&n.setAttribute("refX",""+i/t)},Dh.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)};var Lh=Dh;function Rh(t){this.type="clip",this.cfg={};var e=Tl("clipPath"),n=(this.el=e,this.id=(0,w.uniqueId)("clip_"),e.id=this.id,t.cfg.el);return e.appendChild(n),this.cfg=t,this}Rh.prototype.match=function(){return!1},Rh.prototype.remove=function(){var t=this.el;t.parentNode.removeChild(t)};var Bh=Rh,jh=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i;function Fh(t){this.cfg={};var e=Tl("pattern"),n=(e.setAttribute("patternUnits","userSpaceOnUse"),Tl("image")),r=(e.appendChild(n),(0,w.uniqueId)("pattern_"));e.id=r,this.el=e,this.id=r,this.cfg=t;r=jh.exec(t)[2];var i=(n.setAttribute("href",r),new Image);function o(){e.setAttribute("width",""+i.width),e.setAttribute("height",""+i.height)}return r.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=r,i.complete?o():(i.onload=o,i.src=i.src),this}Fh.prototype.match=function(t,e){return this.cfg===e};var zh=Fh;function Uh(t){var e=Tl("defs"),n=(0,w.uniqueId)("defs_");e.id=n,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}Uh.prototype.find=function(t,e){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(t,e)){r=n[i].id;break}return r},Uh.prototype.findById=function(t){for(var e=this.children,n=null,r=0;r<e.length;r++)if(e[r].id===t){n=e[r];break}return n},Uh.prototype.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},Uh.prototype.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;return(this.defaultArrow[n]||(t=new Lh(t,e),this.defaultArrow[n]=t,this.el.appendChild(t.el),this.add(t),t)).id},Uh.prototype.addGradient=function(t){return t=new kh(t),this.el.appendChild(t.el),this.add(t),t.id},Uh.prototype.addArrow=function(t,e){return t=new Lh(t,e),this.el.appendChild(t.el),this.add(t),t.id},Uh.prototype.addShadow=function(t){return t=new Nh(t),this.el.appendChild(t.el),this.add(t),t.id},Uh.prototype.addPattern=function(t){return t=new zh(t),this.el.appendChild(t.el),this.add(t),t.id},Uh.prototype.addClip=function(t){return t=new Bh(t),this.el.appendChild(t.el),this.add(t),t.id};var Gh,Vh=Uh;function Wh(t){return Gh.call(this,El(El({},t),{autoDraw:!0,renderer:"svg"}))||this}Sl(Wh,Gh=rn),Wh.prototype.getShapeBase=function(){return h},Wh.prototype.getGroupBase=function(){return Bl},Wh.prototype.getShape=function(t,e,n){var r=n.target||n.srcElement;if(!Al[r.tagName]){for(var i=r.parentNode;i&&!Al[i.tagName];)i=i.parentNode;r=i}return this.find((function(t){return t.get("el")===r}))},Wh.prototype.createDom=function(){var t=Tl("svg"),e=new Vh(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},Wh.prototype.onCanvasChange=function(t){var e,n,r=this.get("context"),i=this.get("el");"sort"===t?(e=this.get("children"))&&e.length&&Ol(this,(function(t,n){return e.indexOf(t)-e.indexOf(n)?1:0})):"clear"===t?i&&(i.innerHTML="",(n=r.el).innerHTML="",i.appendChild(n)):"matrix"===t?Pl(this):"clip"===t?Il(this,r):"changeSize"===t&&(i.setAttribute("width",""+this.get("width")),i.setAttribute("height",""+this.get("height")))},Wh.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();Il(this,t),e.length&&Nl(t,e)};var Hh=Wh,Yh=(on=n(6767),n.n(on)),qh=(A=n(17621),n.n(A)),Xh=2,Kh=.16,Zh=.05,$h=.05,Jh=.15,Qh=5,tf=4,ef=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function nf(t,e,n){return n=60<=Math.round(t.h)&&Math.round(t.h)<=240?n?Math.round(t.h)-Xh*e:Math.round(t.h)+Xh*e:n?Math.round(t.h)+Xh*e:Math.round(t.h)-Xh*e,n<0?n+=360:360<=n&&(n-=360),n}function rf(t,e,n){return 0===t.h&&0===t.s?t.s:(1<(t=n?t.s-Kh*e:e===tf?t.s+Kh:t.s+Zh*e)&&(t=1),(t=n&&e===Qh&&.1<t?.1:t)<.06&&(t=.06),Number(t.toFixed(2)))}function of(t,e,n){return n=n?t.v+$h*e:t.v-Jh*e,1<n&&(n=1),Number(n.toFixed(2))}function af(t,e){for(var n=1<arguments.length&&void 0!==e?e:{},r=[],i=qh()(t),o=Qh;0<o;--o){var a=i.toHsv();a=qh()({h:nf(a,o,!0),s:rf(a,o,!0),v:of(a,o,!0)}).toHexString();r.push(a)}r.push(i.toHexString());for(var s=1;s<=tf;s+=1){var u=i.toHsv();u=qh()({h:nf(u,s),s:rf(u,s),v:of(u,s)}).toHexString();r.push(u)}return"dark"===n.theme?ef.map((function(t){var e=t.index;t=t.opacity;return qh().mix(n.backgroundColor||"#141414",r[e],100*t).toHexString()})):r}var sf={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},uf={},cf={},lf=(Object.keys(sf).forEach((function(t){uf[t]=af(sf[t]),uf[t].primary=uf[t][5],cf[t]=af(sf[t],{theme:"dark",backgroundColor:"#141414"}),cf[t].primary=cf[t][5]})),function(t,e,n){return t=Yh()(t),e=Yh()(e),Yh()([(1-n)*t.red()+n*e.red(),(1-n)*t.green()+n*e.green(),(1-n)*t.blue()+n*e.blue()]).rgb()}),hf=function(t,e,n,r){var i,o,a,s,u,c,l,h,f,d,p,g;return void 0===e&&(e="#fff"),void 0===r&&(r="rgb(150, 150, 150)"),"default"===(n=void 0===n?"default":n)?(void 0===(r="rgb(150, 150, 150)")&&(r="rgb(150, 150, 150)"),l=lf(n=void 0===(n=e)?"#fff":n,h=t,.05).rgb().toString(),o=lf(n,h,.1).rgb().toString(),u=lf(n,h,.2).rgb().toString(),i=lf(n,h,.4).rgb().toString(),d=lf(n,r,.02).rgb().toString(),g=lf(n,r,.05).rgb().toString(),c=lf(n,r,.1).rgb().toString(),p=lf(n,r,.2).rgb().toString(),r=lf(n,r,.3).rgb().toString(),a=af(h,{theme:"default",backgroundColor:n}),s=Yh()(h).hex().toLowerCase(),s=a.indexOf(s),{mainStroke:f=h,mainFill:o,activeStroke:h,activeFill:l,inactiveStroke:i,inactiveFill:l,selectedStroke:h,selectedFill:n,highlightStroke:f=-1!==s?a[s+1]:f,highlightFill:u,disableStroke:r,disableFill:g,edgeMainStroke:r,edgeActiveStroke:h,edgeInactiveStroke:p,edgeSelectedStroke:h,edgeHighlightStroke:h,edgeDisableStroke:c,comboMainStroke:r,comboMainFill:d,comboActiveStroke:h,comboActiveFill:l,comboInactiveStroke:r,comboInactiveFill:d,comboSelectedStroke:h,comboSelectedFill:d,comboHighlightStroke:f,comboHighlightFill:d,comboDisableStroke:p,comboDisableFill:g}):(void 0===(o="#777")&&(o="#777"),a=lf(i=void 0===(i=e)?"#fff":i,n=t,.2).rgb().toString(),s=lf(i,n,.3).rgb().toString(),u=lf(i,n,.6).rgb().toString(),c=lf(i,n,.8).rgb().toString(),l=lf(i,o,.2).rgb().toString(),r=lf(i,o,.25).rgb().toString(),h=lf(i,o,.3).rgb().toString(),f=lf(i,o,.4).rgb().toString(),d=lf(i,o,.5).rgb().toString(),i=af(n,{theme:"dark",backgroundColor:i}),p=Yh()(n).hex().toLowerCase(),p=i.indexOf(p),{mainStroke:c,mainFill:a,activeStroke:g=n,activeFill:s,inactiveStroke:c,inactiveFill:a,selectedStroke:n,selectedFill:a,highlightStroke:n,highlightFill:u,disableStroke:d,disableFill:r,edgeMainStroke:o,edgeActiveStroke:n,edgeInactiveStroke:o,edgeSelectedStroke:n,edgeHighlightStroke:n,edgeDisableStroke:h,comboMainStroke:f,comboMainFill:r,comboActiveStroke:n,comboActiveFill:l,comboInactiveStroke:f,comboInactiveFill:r,comboSelectedStroke:n,comboSelectedFill:l,comboHighlightStroke:g=-1!==p?i[p+1]:g,comboHighlightFill:r,comboDisableStroke:f,comboDisableFill:l})},ff=function(t,e,n,r){void 0===e&&(e="#fff"),void 0===n&&(n="default"),void 0===r&&(r="rgb(150, 150, 150)");var i=[];return t.forEach((function(t){i.push(hf(t,e,n,r))})),i},df=(c="rgb(0, 0, 0)",o=hf("rgb(95, 149, 255)","rgb(255, 255, 255)"),{version:"0.7.0",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:o.mainStroke,fill:o.mainFill},size:20,color:o.mainStroke,linkPoints:{size:8,lineWidth:1,fill:o.activeFill,stroke:o.activeStroke}},nodeStateStyles:{active:{fill:o.activeFill,stroke:o.activeStroke,lineWidth:2,shadowColor:o.mainStroke,shadowBlur:10},selected:{fill:o.selectedFill,stroke:o.selectedStroke,lineWidth:4,shadowColor:o.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:o.highlightFill,stroke:o.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:o.inactiveFill,stroke:o.inactiveStroke,lineWidth:1},disable:{fill:o.disableFill,stroke:o.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:c,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:o.edgeMainStroke,lineAppendWidth:2},color:o.edgeMainStroke},edgeStateStyles:{active:{stroke:o.edgeActiveStroke,lineWidth:1},selected:{stroke:o.edgeSelectedStroke,lineWidth:2,shadowColor:o.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:o.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:o.edgeInactiveStroke,lineWidth:1},disable:{stroke:o.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:c,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:o.comboMainFill,lineWidth:1,stroke:o.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:o.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:o.comboActiveStroke,lineWidth:1,fill:o.comboActiveFill},selected:{stroke:o.comboSelectedStroke,lineWidth:2,fill:o.comboSelectedFill,shadowColor:o.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:o.comboHighlightStroke,lineWidth:2,fill:o.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:o.comboInactiveStroke,fill:o.comboInactiveFill,lineWidth:1},disable:{stroke:o.comboDisableStroke,fill:o.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"});function pf(t,e,n){if(t)return"function"==typeof t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):"function"==typeof t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0}var gf,mf=Bu.cloneEvent,vf=Bu.isViewportChanged;function yf(t){var e=gf.call(this,t)||this;return e.extendEvents=[],e.dragging=!1,e.preItem=null,e.graph=t,e.destroyed=!1,e.initEvents(),e}v(yf,gf=Fu),yf.prototype.initEvents=function(){var t=this.graph,e=this.extendEvents,n=(e=void 0===e?[]:e,t=t.get("canvas"),t.get("el")),r=(0,w.wrapBehavior)(this,"onCanvasEvents"),i=(0,w.wrapBehavior)(this,"onExtendEvents"),o=(0,w.wrapBehavior)(this,"onWheelEvent");t.off("*").on("*",r),this.canvasHandler=r,e.push(pf(n,"DOMMouseScroll",o)),e.push(pf(n,"mousewheel",o)),"undefined"!=typeof window&&(e.push(pf(window,"keydown",i)),e.push(pf(window,"keyup",i)),e.push(pf(window,"focus",i)))},yf.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},yf.prototype.onCanvasEvents=function(t){var e=this.graph,n=e.get("canvas"),r=t.target,i=t.type,o=(t.canvasX=t.x,t.canvasY=t.y,{x:t.canvasX,y:t.canvasY}),a=e.get("group").getMatrix();vf(a=a||[1,0,0,0,1,0,0,0,1])&&(o=e.getPointByClient(t.clientX,t.clientY)),t.x=o.x,t.y=o.y,t.currentTarget=e,r===n?("mousemove"!==i&&"mouseleave"!==i||this.handleMouseMove(t,"canvas"),t.target=n,t.item=null,e.emit(i,t),e.emit("canvas:".concat(i),t)):(a=yf.getItemRoot(r))?(o=a.get("item")).destroyed||(n=o.getType(),t.target=r,t.item=o,t.canvasX===t.x&&t.canvasY===t.y&&(a=e.getCanvasByPoint(t.x,t.y),t.canvasX=a.x,t.canvasY=a.y),e.emit(i,t),t.name&&!t.name.includes(":")?e.emit("".concat(n,":").concat(i),t):e.emit(t.name,t),"dragstart"===i&&(this.dragging=!0),"dragend"===i&&(this.dragging=!1),"mousemove"===i&&this.handleMouseMove(t,n)):e.emit(i,t)},yf.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},yf.prototype.onWheelEvent=function(t){(0,w.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},yf.prototype.handleMouseMove=function(t,e){var n=this.graph,r=this.preItem;n=n.get("canvas"),n=t.target===n?null:t.item;t=mf(t),r&&r!==n&&!r.destroyed&&(t.item=r,this.emitCustomEvent(r.getType(),"mouseleave",t),this.dragging)&&this.emitCustomEvent(r.getType(),"dragleave",t),n&&r!==n&&(t.item=n,this.emitCustomEvent(e,"mouseenter",t),this.dragging)&&this.emitCustomEvent(e,"dragenter",t),this.preItem=n},yf.prototype.emitCustomEvent=function(t,e,n){n.type=e,this.graph.emit("".concat(t,":").concat(e),n)},yf.prototype.destroy=function(){var t=this.graph,e=this.canvasHandler,n=this.extendEvents;t.get("canvas").off("*",e),(0,w.each)(n,(function(t){t.remove()})),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0};var bf=yf,xf=n(83360),_f=(en=n(81746),n.n(en)),wf=Bu.traverseTree,Sf=function(t,e){var n=t?(0,w.isNumber)(t)?function(e){return t}:t:function(t){return e||1};return n},Ef=function(t,e){var n=[],r=[],i={},o=0;for(o=0;o<t.length;o++){var a=t[o];i[a.id]=o,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(o=0;o<e.length;o++){var s=e[o];r[i[s.source]].push(i[s.target]),r[i[s.target]].push(i[s.source])}var u=0;for(o=0;o<t.length;o++){var c=r[o],l=c.length;n[4*o+2]=n.length,n[4*o+3]=c.length;u=Math.max(u,c.length);for(var h=0;h<l;++h){var f=c[h];n.push(+f)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:u}},Mf=function(t,e,n){var r=[],i=[],o={},a=0;for(a=0;a<t.length;a++){var s=t[a];o[s.id]=a,r.push(s.x),r.push(s.y),r.push(0),r.push(0),i.push([])}for(a=0;a<e.length;a++){var u=e[a];i[o[u.source]].push(o[u.target]),i[o[u.source]].push(n(u)),i[o[u.target]].push(o[u.source]),i[o[u.target]].push(n(u))}var c=0;for(a=0;a<t.length;a++){var l=i[a],h=l.length;r[4*a+2]=r.length,r[4*a+3]=h/2;c=Math.max(c,h/2);for(var f=0;f<h;++f){var d=l[f];r.push(+d)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:c}},Af=function(t,e,n,r){var i=[],o=[],a={},s=0;for(s=0;s<t.length;s++){var u=t[s];a[u.id]=s,i.push(u.x),i.push(u.y),i.push(0),i.push(0),o.push([])}for(s=0;s<e.length;s++){var c=e[s];o[a[c.source]].push(a[c.target]),o[a[c.source]].push(n(c)),o[a[c.source]].push(r(c)),o[a[c.source]].push(0),o[a[c.target]].push(a[c.source]),o[a[c.target]].push(n(c)),o[a[c.target]].push(r(c)),o[a[c.target]].push(0)}var l=0;for(s=0;s<t.length;s++){var h=o[s],f=h.length;i[4*s+2]=i.length+1048576*f/4,i[4*s+3]=0;l=Math.max(l,f/4);for(var d=0;d<f;++d){var p=h[d];i.push(+p)}}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:l}},Cf=function(t,e){var n=[],r=t.length,i={};return e.forEach((function(e){t.forEach((function(t,o){if(void 0===i[e[t]]&&(i[e[t]]=Object.keys(i).length),n.push(i[e[t]]),o===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}},Tf=function(t){for(var e=[],n=t.length,r=t[0].length,i=0;i<r;i++)!function(r){t.forEach((function(t,i){if(e.push(t[r]),i===n-1)for(;e.length%4!=0;)e.push(0)}))}(i);return new Float32Array(e)},kf=function(t,e){var n={x:1/0,y:1/0},r={x:-1/0,y:-1/0},i="x",o="y",a=(e&&0<=["V","TB","BT"].indexOf(e)&&(o="x",i="y"),0),s=(wf(t,(function(t){return a++,t.x>r.x&&(r.x=t.x),t.x<n.x&&(n.x=t.x),t.y>r.y&&(r.y=t.y),t.y<n.y&&(n.y=t.y),!0})),2*Math.PI/a),u=r[o]-n[o];return 0!=u&&wf(t,(function(e){var r=(e[o]-n[o])/u*(2*Math.PI-s)+s,a=Math.abs("x"===i?e.x-t.x:e.y-t.y);return e.x=a*Math.cos(r),e.y=a*Math.sin(r),!0})),t},Of=function t(){return"undefined"==typeof window||"undefined"==typeof document?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=(window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.']:['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.']).join("\n")),t},addGetWebGLMessage:function(e){var n=void 0!==(e=e||{}).parent?e.parent:document.body,r=(e=void 0!==e.id?e.id:"oldie",t().getWebGLErrorMessage());r.id=e,n.appendChild(r)}}},Pf=(sn=y(y(y(y({},Bu),f),d),p),sn.radialLayout);function If(t){this.type=t.type,this.radial=t.radial,this.config=t}function Nf(t){return new Df((function(){var t={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(e){var n;(n=(n=e).data.type)!==t.RUN&&n!==t.GPURUN||function(e){var n=this;switch(e.data.type){case t.RUN:var r,i=e.data,o=i.nodes,a=i.edges,s=(i=i.layoutCfg,(i=void 0===i?{}:i).type);(u=layout.getLayoutByName(s))?(i.onLayoutEnd=function(){n.postMessage({type:t.END,nodes:o}),null!=r&&r.destroy()},(r=new u(i)).init({nodes:o,edges:a}),r.execute()):this.postMessage({type:t.ERROR,message:"layout ".concat(s," not found")});break;case t.GPURUN:var u,c=e.data,l=c.nodes,h=(a=c.edges,c.layoutCfg);i=void 0===h?{}:h,h=c.canvas,s=i.type;(u=layout.getLayoutByName(s))?"gpu"!==s.split("-")[1]?this.postMessage({type:t.ERROR,message:"layout ".concat(s," does not support GPU")}):((c=new u(i)).init({nodes:l,edges:a}),c.executeWithWorker(h,this)):this.postMessage({type:t.ERROR,message:"layout ".concat(s," not found")})}}(e)}}),t=void 0===t?"https://unpkg.com/@antv/layout@latest/dist/layout.min.js":t)}If.prototype.init=function(t){var e=this;this.data=t,this.radial?this.layoutMethod=function(t){return t=_f()[e.type](t,e.config),Pf(t),t}:this.layoutMethod=function(t){return _f()[e.type](t,e.config)}},If.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},If.prototype.layout=function(t){return this.init(t),this.execute()};rn=If;var Df=((0,xf.registerLayout)("grid",xf.GridLayout),(0,xf.registerLayout)("random",xf.RandomLayout),(0,xf.registerLayout)("force",xf.ForceLayout),(0,xf.registerLayout)("circular",xf.CircularLayout),(0,xf.registerLayout)("dagre",xf.DagreLayout),(0,xf.registerLayout)("dagreCompound",xf.DagreCompoundLayout),(0,xf.registerLayout)("radial",xf.RadialLayout),(0,xf.registerLayout)("concentric",xf.ConcentricLayout),(0,xf.registerLayout)("mds",xf.MDSLayout),(0,xf.registerLayout)("fruchterman",xf.FruchtermanLayout),(0,xf.registerLayout)("fruchterman-gpu",xf.FruchtermanGPULayout),(0,xf.registerLayout)("gForce",xf.GForceLayout),(0,xf.registerLayout)("force2",xf.Force2Layout),(0,xf.registerLayout)("gForce-gpu",xf.GForceGPULayout),(0,xf.registerLayout)("comboForce",xf.ComboForceLayout),(0,xf.registerLayout)("comboCombined",xf.ComboCombinedLayout),(0,xf.registerLayout)("forceAtlas2",xf.ForceAtlas2Layout),function(t,e){return t=t.toString(),e=new Blob(["importScripts('".concat(e,"');(").concat(t,")()")],{type:"text/javascript"}),new Worker(URL.createObjectURL(e))}),Lf="LAYOUT_RUN",Rf="LAYOUT_END",Bf="LAYOUT_TICK",jf="GPU_LAYOUT_RUN",Ff="GPU_LAYOUT_END";function zf(t){return(zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uf(t){return setTimeout(t,16)}function Gf(t){return clearTimeout(t)}var Vf,Wf=function(t){return("undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||Uf)(t)},Hf=function(t){return("undefined"!=typeof window&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||Gf)(t)},Yf=["fruchterman","gForce"],qf=["force","grid","circular"];function Xf(t){var e=Vf.call(this,t)||this;return e.graph=t,e.layoutCfg=t.get("layout")||{},e.layoutType=e.getLayoutType(),e.worker=null,e.workerData={},e.initLayout(),e}v(Xf,Vf=an),Xf.prototype.initLayout=function(){},Xf.prototype.getWorker=function(){return this.worker||("undefined"==typeof Worker?this.worker=null:this.worker=Nf(this.layoutCfg.workerScriptURL)),this.worker},Xf.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(Hf(t.requestId),t.requestId=null),t.requestId2)&&(Hf(t.requestId2),t.requestId2=null)},Xf.prototype.execLayoutMethod=function(t,e){var n=this;return new Promise((function(r,i){return x(n,void 0,void 0,(function(){var n,o,a,s,u,c,l,h;return _(this,(function(f){switch(f.label){case 0:if(!(n=this.graph)||n.get("destroyed"))return[2];o=t.type,t.onLayoutEnd=function(){n.emit("aftersublayout",{type:o}),r()},o&&this.isGPU&&this.hasGPUVersion(o)&&(o="".concat(o,"-gpu")),"force"===o||"g6force"===o||"gForce"===o||"force2"===o?(a=t.onTick,s=t.animate,l=function(){a&&a(),s&&n.refreshPositions()},t.tick=l):"comboForce"!==o&&"comboCombined"!==o||(t.comboTrees=n.get("comboTrees"));try{u=new xf.Layouts[o](t),this.layoutMethods[e]&&this.layoutMethods[e].destroy(),this.layoutMethods[e]=u}catch(f){i()}return u.enableTick&&(c=t.onTick,l=function(){c&&c(),n.refreshPositions()},u.tick=l),h=this.filterLayoutData(this.data,t),p=e,null!=(g=null==(d=h)?void 0:d.nodes)&&g.length&&d.nodes.forEach((function(t){t.layoutOrder=p})),u.init(h),n.emit("beforesublayout",{type:o}),[4,u.execute()];case 1:return f.sent(),u.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}var d,p,g}))}))}))},Xf.prototype.updateLayoutMethod=function(t,e){var n=this;return new Promise((function(r,i){return x(n,void 0,void 0,(function(){var n,i,o;return _(this,(function(a){switch(a.label){case 0:return n=this.graph,i=null==e?void 0:e.type,e.onLayoutEnd=function(){n.emit("aftersublayout",{type:i}),r()},o=this.filterLayoutData(this.data,e),t.init(o),t.updateCfg(e),n.emit("beforesublayout",{type:i}),[4,t.execute()];case 1:return a.sent(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),[2]}}))}))}))},Xf.prototype.layout=function(t){var e=this,n=this.graph,r=(this.data=this.setDataFromGraph(),this.data),i=r.nodes;r=r.hiddenNodes;if(i){var o=n.get("width"),a=n.get("height"),s={},u=(o=(Object.assign(s,{width:o,height:a,center:[o/2,a/2]},this.layoutCfg),(this.layoutCfg=s).type),a=this.destoryLayoutMethods(),a=(n.emit("beforelayout"),null!=a&&a.length&&o&&1===(null==a?void 0:a.length)&&a[0]===o?this.tweakInit():this.initPositions(s.center,i),this.initPositions(s.center,r),o&&"gpu"===o.split("-")[1]&&(o=o.split("-")[0],s.gpuEnabled=!0),!1),s.gpuEnabled&&(a=!0,Of().webgl||(a=!1)),this.isGPU=a,s.onLayoutEnd),c=(r=s.layoutEndFormatted,s.adjust);if(r||(s.layoutEndFormatted=!0,s.onAllLayoutEnd=function(){return x(e,void 0,void 0,(function(){return _(this,(function(t){switch(t.label){case 0:return u&&u(i),this.refreshLayout(),c&&s.pipes?[4,this.adjustPipesBox(this.data,c)]:[3,2];case 1:t.sent(),this.refreshLayout(),t.label=2;case 2:return n.emit("afterlayout"),[2]}}))}))}),this.stopWorker(),s.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var l=Promise.resolve();o=!1;s.type?(o=!0,l=l.then((function(){return x(e,void 0,void 0,(function(){return _(this,(function(t){switch(t.label){case 0:return[4,this.execLayoutMethod(s,0)];case 1:return[2,t.sent()]}}))}))}))):s.pipes&&(o=!0,s.pipes.forEach((function(t,n){l=l.then((function(){return x(e,void 0,void 0,(function(){return _(this,(function(e){switch(e.label){case 0:return[4,this.execLayoutMethod(t,n)];case 1:return[2,e.sent()]}}))}))}))}))),o?l.then((function(){s.onAllLayoutEnd&&s.onAllLayoutEnd(),t&&t()})).catch((function(t){})):(n.refreshPositions(),null!=t&&t())}return!1},Xf.prototype.tweakInit=function(){var t,e,n,r=this.data,i=this.graph,o=r.nodes;r=r.edges;null!=o&&o.length&&(t={},o.forEach((function(e){var n=e.x,r=e.y;isNaN(n)||isNaN(r)||(t[e.id]={x:n,y:r},e.mass=e.mass||2)})),r.forEach((function(e){var n=e.source,r=(e=e.target,t[n]),i=t[e];!r&&i?t[n]={x:i.x+80*(Math.random()-.5),y:i.y+80*(Math.random()-.5)}:!i&&r&&(t[e]={x:r.x+80*(Math.random()-.5),y:r.y+80*(Math.random()-.5)})})),e=i.get("width"),n=i.get("height"),o.forEach((function(r){var i=t[r.id]||{x:e/2+20*(Math.random()-.5),y:n/2+20*(Math.random()-.5)};r.x=i.x,r.y=i.y})))},Xf.prototype.initWithPreset=function(){var t=this.layoutCfg,e=this.data,n=t.preset;return!(null==n||!n.type||!xf.Layouts[null==n?void 0:n.type]||(new xf.Layouts[null==n?void 0:n.type](n).layout(e),delete t.preset,0))},Xf.prototype.layoutWithWorker=function(t,e){var n=this,r=this.layoutCfg,i=this.graph,o=this.getWorker(),a=this.workerData;if(!o)return!1;a.requestId=null,a.requestId2=null,a.currentTick=null,a.currentTickData=null,i.emit("beforelayout");var s=Promise.resolve();a=!1;if(r.type)a=!0,s=s.then((function(){return n.runWebworker(o,t,r)}));else if(r.pipes){a=!0;for(var u=0,c=r.pipes;u<c.length;u++)!function(e){s=s.then((function(){return n.runWebworker(o,t,e)}))}(c[u])}return a&&s.then((function(){r.onAllLayoutEnd&&r.onAllLayoutEnd(),null!=e&&e()})).catch((function(t){})),!0},Xf.prototype.runWebworker=function(t,e,n){var r=this,i=this.isGPU,o=this.filterLayoutData(e,n),a=(e=o.nodes,o.edges),s=document.createElement("canvas"),u=(i=i&&"undefined"!=typeof window&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in s,function(t,e){var n={};return t&&"object"===zf(t)?(Object.keys(t).forEach((function(r){t.hasOwnProperty(r)&&e(t[r])&&(n[r]=t[r])})),n):t}(n,(function(t){return"function"!=typeof t})));return i?(i=s.transferControlToOffscreen(),u.type="".concat(u.type,"-gpu"),t.postMessage({type:jf,nodes:e,edges:a,layoutCfg:u,canvas:i},[i])):t.postMessage({type:Lf,nodes:e,edges:a,layoutCfg:u}),new Promise((function(e,i){t.onmessage=function(t){r.handleWorkerMessage(e,i,t,o,n)}}))},Xf.prototype.handleWorkerMessage=function(t,e,n,r,i){function o(){i.onTick&&i.onTick()}var a=this.graph,s=this.workerData,u=n.data;n=u.type;switch(n){case Bf:s.currentTick=u.currentTick,s.currentTickData=u,s.requestId||(s.requestId=Wf((function(){Qf(r,u),a.refreshPositions(),o(),u.currentTick===u.totalTicks?t():s.currentTick===u.totalTicks&&(s.requestId2=Wf((function(){Qf(r,s.currentTickData),a.refreshPositions(),s.requestId2=null,o(),t()}))),s.requestId=null})));break;case Rf:null==s.currentTick&&(Qf(r,u),t());break;case Ff:if(null==s.currentTick){for(var c=u,l=r.nodes,h=c.vertexEdgeData,f=l.length,d=0;d<f;d++){var p=l[d],g=h[4*d],m=h[4*d+1];p.x=g,p.y=m}t()}break;default:e()}},Xf.prototype.updateLayoutCfg=function(t){var e,n=this,r=this.graph,i=this.layoutMethods,o=t.disableTriggerLayout,a=(t=b(t,["disableTriggerLayout"]),(0,w.mix)({},this.layoutCfg,t));this.layoutCfg=a,o||(null!=i&&i.length?(this.data=this.setDataFromGraph(),this.stopWorker(),t.workerEnabled&&this.layoutWithWorker(this.data,null)||(r.emit("beforelayout"),e=Promise.resolve(),o=!1,1===(null==i?void 0:i.length)?(o=!0,e=e.then((function(){return x(n,void 0,void 0,(function(){return _(this,(function(t){switch(t.label){case 0:return[4,this.updateLayoutMethod(i[0],a)];case 1:return[2,t.sent()]}}))}))}))):null!=i&&i.length&&(o=!0,i.forEach((function(t,r){var i=a.pipes[r];e=e.then((function(){return x(n,void 0,void 0,(function(){return _(this,(function(e){switch(e.label){case 0:return[4,this.updateLayoutMethod(t,i)];case 1:return[2,e.sent()]}}))}))}))}))),o&&e.then((function(){a.onAllLayoutEnd&&a.onAllLayoutEnd()})).catch((function(t){})))):this.layout())},Xf.prototype.adjustPipesBox=function(t,e){var n=this;return new Promise((function(r){var i=t.nodes,o=(null!=i&&i.length||r(),qf.includes(e)||r(),{center:n.layoutCfg.center,nodeSize:function(t){return Math.max(t.height,t.width)},preventOverlap:!0,onLayoutEnd:function(){}}),a=(i=n.getLayoutBBox(i),i.groupNodes),s=i.layoutNodes,u=(0,w.clone)(s);o.onLayoutEnd=function(){null!=s&&s.forEach((function(t,e){var n,r=t.x-(null==(n=u[e])?void 0:n.x),i=t.y-(null==(n=u[e])?void 0:n.y);null!=(t=a[e])&&t.forEach((function(t){t.x+=r,t.y+=i}))})),r()},new xf.Layouts[e](o).layout({nodes:s})}))},Xf.prototype.hasGPUVersion=function(t){return Yf.includes(t)},Xf.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null};var Kf,Zf,$f,Jf=Xf;function Qf(t,e){for(var n=t.nodes,r=e.nodes,i=n.length,o=0;o<i;o++){var a=n[o];a.x=r[o].x,a.y=r[o].y}}function td(t){Kf||(Kf=document.createElement("table"),$f=document.createElement("tr"),Zf=/^\s*<(\w+|!)[^>]*>/,$f={tr:document.createElement("tbody"),tbody:Kf,thead:Kf,tfoot:Kf,td:$f,th:$f,"*":document.createElement("div")});var e=Zf.test(t)&&RegExp.$1;e&&e in $f||(e="*"),e=$f[e],t="string"==typeof t?t.replace(/(^\s*)|(\s*$)/g,""):t,e.innerHTML=""+t,t=e.childNodes[0];return t&&e.contains(t)&&e.removeChild(t),t}var ed,nd=L;function rd(t){t=ed.call(this,t)||this;var e=t.get("defaultNode");return e||t.set("defaultNode",{type:"circle"}),e.type||(e.type="circle",t.set("defaultNode",e)),t.destroyed=!1,t}v(rd,ed=tn),rd.prototype.initLayoutController=function(){var t=new Jf(this);this.set({layoutController:t})},rd.prototype.initEventController=function(){var t=new bf(this);this.set({eventController:t})},rd.prototype.initCanvas=function(){var t=this.get("container");if("string"==typeof t&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var e=t.clientWidth,n=t.clientHeight,r=this.get("width")||e,i=this.get("height")||n;this.get("width")||this.get("height")||(this.set("width",e),this.set("height",n)),t="svg"===this.get("renderer")?new Hh({container:t,width:r,height:i}):(e={container:t,width:r,height:i},(n=this.get("pixelRatio"))&&(e.pixelRatio=n),new _l(e)),this.set("canvas",t)},rd.prototype.initPlugins=function(){var t=this;(0,w.each)(t.get("plugins"),(function(e){!e.destroyed&&e.initPlugin&&e.initPlugin(t)}))},rd.prototype.downloadImageWatermark=function(t,e,n,r){return x(this,void 0,void 0,(function(){var i,o;return _(this,(function(a){switch(a.label){case 0:return i=t.style.backgroundImage,i=i.slice(5,i.length-2),(o=new Image).src=i,[4,new Promise((function(t){o.onload=function(){var i=e.createPattern(o,"repeat");e.rect(0,0,n,r),e.fillStyle=i,e.fill(),t("")}}))];case 1:return a.sent(),[2]}}))}))},rd.prototype.asyncToDataUrl=function(t,e,n,r,i,o){var a=this,s=document.querySelector(".g6-graph-watermarker"),u=this.get("canvas"),c=u.getRenderer(),l=o||u.get("el"),h="";t=t||"image/png",setTimeout((function(){return x(a,void 0,void 0,(function(){var o,a,u,f,d,p,g;return _(this,(function(m){switch(m.label){case 0:return"svg"!==c?[3,1]:(o=l.cloneNode(!0),g=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(g=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",g)).replaceChild(o,g.documentElement),o=(new XMLSerializer).serializeToString(g),h="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(o)),[3,4]);case 1:return a=void 0,u=l.getContext("2d"),f=r||this.get("width"),d=i||this.get("height"),p=void 0,s?[4,this.downloadImageWatermark(s,u,f,d)]:[3,3];case 2:m.sent(),m.label=3;case 3:if(e){g="undefined"!=typeof window?window.devicePixelRatio:1;try{a=u.getImageData(0,0,f*g,d*g),p=u.globalCompositeOperation,u.globalCompositeOperation="destination-over",u.fillStyle=e,u.fillRect(0,0,f,d)}catch(m){}}h=l.toDataURL(t),e&&(u.clearRect(0,0,f,d),u.putImageData(a,0,0),u.globalCompositeOperation=p),m.label=4;case 4:return n&&n(h),[2]}}))}))}),16)},rd.prototype.toDataURL=function(t,e){var n=this.get("canvas"),r=n.getRenderer(),i=(n=n.get("el"),t=t||"image/png","");if("svg"===r){r=n.cloneNode(!0);var o=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd");o=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",o),r=(o.replaceChild(r,o.documentElement),(new XMLSerializer).serializeToString(o)),i="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(r))}else{o=void 0,r=n.getContext("2d");var a=Math.max(this.get("width"),500),s=Math.max(this.get("height"),500),u=void 0;if(e){var c="undefined"!=typeof window&&window.devicePixelRatio||1;try{o=r.getImageData(0,0,a*c,s*c),u=r.globalCompositeOperation,r.globalCompositeOperation="destination-over",r.fillStyle=e,r.fillRect(0,0,a,s)}catch(t){}}i=n.toDataURL(t),e&&(r.clearRect(0,0,a,s),r.putImageData(o,0,0),r.globalCompositeOperation=u)}return i},rd.prototype.toFullDataURL=function(t,e,n){var r=this.get("group").getCanvasBBox(),i=r.height,o=r.width,a=this.get("renderer"),s=td('<div id="virtual-image"></div>'),u=n?n.backgroundColor:void 0,c=(n=n?n.padding:void 0,n?(0,w.isNumber)(n)&&(n=[n,n,n,n]):n=[0,0,0,0],i+n[0]+n[2]),l=o+n[1]+n[3],h=(s={container:s,height:c,width:l,quickHit:!0},s=new("svg"===a?Hh:_l)(s),this.get("group").clone()),f=(f=(0,w.clone)(h.getMatrix()))||[1,0,0,0,1,0,0,0,1],d=(r.maxX+r.minX)/2,p=(r=(r.maxY+r.minY)/2,f=nd(f,[["t",-d,-r],["t",o/2+n[3],i/2+n[0]]]),h.resetMatrix(),h.setMatrix(f),s.add(h),s.get("el")),g="";e=e||"image/png",setTimeout((function(){if("svg"===a){var n=p.cloneNode(!0),r=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd");r=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",r),n=(r.replaceChild(n,r.documentElement),(new XMLSerializer).serializeToString(r));g="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(n))}else{r=void 0,n=p.getContext("2d");var i=void 0;if(u){var o="undefined"!=typeof window?window.devicePixelRatio:1;try{r=n.getImageData(0,0,l*o,c*o),i=n.globalCompositeOperation,n.globalCompositeOperation="destination-over",n.fillStyle=u,n.fillRect(0,0,l,c)}catch(n){}}g=p.toDataURL(e),u&&(n.clearRect(0,0,l,c),n.putImageData(r,0,0),n.globalCompositeOperation=i)}t&&t(g)}),16)},rd.prototype.downloadFullImage=function(t,e,n){var r=this,i=this.get("group").getCanvasBBox(),o=i.height,a=i.width,s=this.get("renderer"),u=td('<div id="virtual-image"></div>'),c=document.querySelector(".g6-graph-watermarker"),l=n?n.backgroundColor:void 0,h=(n=n?n.padding:void 0,n?(0,w.isNumber)(n)&&(n=[n,n,n,n]):n=[0,0,0,0],o+n[0]+n[2]),f=a+n[1]+n[3],d=(c=(c&&(d=(c=this.get("graphWaterMarker").cfg||{}).width,c=c.height,h=Math.ceil(h/c)*c,f=Math.ceil(f/d)*d),{container:u,height:h,width:f}),new("svg"===s?Hh:_l)(c)),p=(u=this.get("group").clone(),c=(c=(0,w.clone)(u.getMatrix()))||[1,0,0,0,1,0,0,0,1],(i.maxX+i.minX)/2);i=(i.maxY+i.minY)/2,c=nd(c,[["t",-p,-i],["t",a/2+n[3],o/2+n[0]]]),u.resetMatrix(),u.setMatrix(c),d.add(u),p=d.get("el");e=e||"image/png",this.asyncToDataUrl(e,l,(function(n){var i=document.createElement("a"),o=(t||"graph")+("svg"===s?".svg":".".concat(e.split("/")[1]));r.dataURLToImage(n,s,i,o),n=document.createEvent("MouseEvents");n.initEvent("click",!1,!1),i.dispatchEvent(n)}),f,h,p)},rd.prototype.downloadImage=function(t,e,n){var r=this;this.stopAnimate();var i=this.get("canvas").getRenderer(),o=(e=e||"image/png",(t||"graph")+("svg"===i?".svg":e.split("/")[1])),a=document.createElement("a");this.asyncToDataUrl(e,n,(function(t){r.dataURLToImage(t,i,a,o),t=document.createEvent("MouseEvents"),t.initEvent("click",!1,!1),a.dispatchEvent(t)}))},rd.prototype.dataURLToImage=function(t,e,n,r){if(t&&"data:"!==t&&"undefined"!=typeof window)if(window.Blob&&window.URL&&"svg"!==e){e=t.split(",");for(var i,o="",a=(e&&0<e.length&&(i=e[0].match(/:(.*?);/))&&2<=i.length&&(o=i[1]),atob(e[1])),s=a.length,u=new Uint8Array(s);s--;)u[s]=a.charCodeAt(s);var c=new Blob([u],{type:o});window.navigator.msSaveBlob?window.navigator.msSaveBlob(c,r):n.addEventListener("click",(function(){n.download=r,n.href=window.URL.createObjectURL(c)}))}else n.addEventListener("click",(function(){n.download=r,n.href=t}))},rd.prototype.addPlugin=function(t){t.destroyed||(this.get("plugins").push(t),t.initPlugin(this))},rd.prototype.removePlugin=function(t){var e=this.get("plugins"),n=e.indexOf(t);0<=n&&(t.destroyPlugin(),e.splice(n,1))},rd.prototype.setImageWaterMarker=function(t,e){void 0===t&&(t=df.waterMarkerImage);var n=this.get("container"),r=((n=(0,w.isString)(n)?document.getElementById(n):n).style.position||(n.style.position="relative"),this.get("graphWaterMarker")),i=(e=(0,w.deepMix)({},df.imageWaterMarkerConfig,e),e.width),o=e.height,a=e.compatible,s=e.image,u=(r||(e={container:n,width:i,height:o,capture:!1},(i=this.get("pixelRatio"))&&(e.pixelRatio=i),r=new _l(e),this.set("graphWaterMarker",r)),r.get("el").style.display="none",r.get("context")),c=s.rotate,l=s.x,h=s.y,f=(u.rotate(-c*Math.PI/180),new Image);f.crossOrigin="anonymous",f.src=t,f.onload=function(){var t;u.drawImage(f,l,h,s.width,s.height),u.rotate(c*Math.PI/180),a?n.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;"):((t=document.querySelector(".g6-graph-watermarker"))||((t=document.createElement("div")).className="g6-graph-watermarker"),t.className="g6-graph-watermarker",r.destroyed||(t.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(t)))}},rd.prototype.setTextWaterMarker=function(t,e){var n=this.get("container"),r=((n=(0,w.isString)(n)?document.getElementById(n):n).style.position||(n.style.position="relative"),this.get("graphWaterMarker")),i=(e=(0,w.deepMix)({},df.textWaterMarkerConfig,e),e.width),o=e.height,a=e.compatible,s=(e=e.text,r||(i={container:n,width:i,height:o,capture:!1},(o=this.get("pixelRatio"))&&(i.pixelRatio=o),r=new _l(i),this.set("graphWaterMarker",r)),r.get("el").style.display="none",r.get("context")),u=(o=e.rotate,i=e.fill,e.fontFamily),c=e.fontSize,l=e.baseline,h=e.x,f=e.y,d=e.lineHeight;s.rotate(-o*Math.PI/180),s.font="".concat(c,"px ").concat(u),s.fillStyle=i,s.textBaseline=l;for(var p=t.length-1;0<=p;p--)s.fillText(t[p],h,f+p*d);s.rotate(o*Math.PI/180),a?n.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;"):((e=document.querySelector(".g6-graph-watermarker"))||((e=document.createElement("div")).className="g6-graph-watermarker"),e.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(e))},rd.prototype.destroy=function(){(0,w.each)(this.get("plugins"),(function(t){t.destroyPlugin()}));var t,e=this.get("tooltips");if(e)for(var n=0;n<e.length;n++){var r,i=e[n];i&&(r=i.parentElement)&&r.removeChild(i)}null!=(t=this.get("eventController"))&&t.destroy(),null!=(t=this.get("layoutController"))&&t.destroy(),null!=(t=this.get("graphWaterMarker"))&&t.destroy(),null!=(t=document.querySelector(".g6-graph-watermarker"))&&t.remove(),ed.prototype.destroy.call(this)};on=rd;var id,od=sn.radialLayout,ad=sn.traverseTree;function sd(t){return t=id.call(this,t)||this,t.layoutAnimating=!1,t.set("removeList",[]),t.set("layoutMethod",t.getLayout()),t}function ud(t,e){if(t)for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n])}function cd(t){this._cfgs=(0,w.deepMix)(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}v(sd,id=on),sd.prototype.getLayout=function(){var t=this.get("layout");return t?"function"==typeof t?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="TB"),t.radial?function(e){return e=_f()[t.type](e,t),od(e),e}:function(e){return _f()[t.type](e,t)}):null},sd.indexOfChild=function(t,e){var n=-1;return(0,w.each)(t,(function(t,r){if(e===t.id)return n=r,!1})),n},sd.prototype.getDefaultCfg=function(){var t=id.prototype.getDefaultCfg.call(this);return t.animate=!0,t},sd.prototype.innerAddChild=function(t,e,n){var r=this,i=t.data,o=(i&&(i.x=t.x,i.y=t.y,i.depth=t.depth),r.addItem("node",i,!1));return e&&(o.set("parent",e),n&&((i=e.get("originAttrs"))?o.set("originAttrs",i):(i=e.getModel(),o.set("originAttrs",{x:i.x,y:i.y}))),(i=e.get("children"))?i.push(o):e.set("children",[o]),r.addItem("edge",{source:e.get("id"),target:o.get("id"),id:"".concat(e.get("id"),":").concat(o.get("id"))},!1)),(0,w.each)(t.children||[],(function(t){r.innerAddChild(t,o,n)})),r.emit("afteraddchild",{item:o,parent:e}),o},sd.prototype.innerUpdateChild=function(t,e,n){var r=this,i=r.findById(t.id);if(i){(0,w.each)(t.children||[],(function(t){r.innerUpdateChild(t,i,n)}));var o,a,s=i.get("children");if(s&&0<s.length)for(var u=s.length-1;0<=u;u--){var c=s[u].getModel();-1===sd.indexOfChild(t.children||[],c.id)&&(r.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(u,1))}i.get("originAttrs")&&(o=i.get("originAttrs").x,a=i.get("originAttrs").y);var l=i.getModel();n&&i.set("originAttrs",{x:l.x,y:l.y}),i.set("model",t.data),o===t.x&&a===t.y||i.updatePosition({x:t.x,y:t.y})}else r.innerAddChild(t,e,n)},sd.prototype.innerRemoveChild=function(t,e,n){var r,i=this;t=i.findById(t);t&&((0,w.each)(t.get("children"),(function(t){i.innerRemoveChild(t.getModel().id,e,n)})),n?(r=t.getModel(),t.set("to",e),t.set("originAttrs",{x:r.x,y:r.y}),i.get("removeList").push(t)):i.removeItem(t,!1))},sd.prototype.changeData=function(t){var e=this;this.getNodes().map((function(t){return e.clearItemStates(t)})),this.getEdges().map((function(t){return e.clearItemStates(t)})),t?(e.data(t),e.render()):e.layout(this.get("fitView"))},sd.prototype.changeLayout=function(t){this.updateLayout(t)},sd.prototype.updateLayout=function(t){t&&(this.set("layout",t),this.set("layoutMethod",this.getLayout()),this.layout())},sd.prototype.refreshLayout=function(t){this.layout(t)},sd.prototype.layout=function(t){var e=this,n=e.get("data"),r=e.get("layoutMethod"),i=(r=r?r(n,e.get("layout")):n,e.get("animate"));e.emit("beforerefreshlayout",{data:n,layoutData:r}),e.emit("beforelayout"),e.innerUpdateChild(r,void 0,i),t&&e.get("viewController").fitView(),i?e.layoutAnimate(r):(e.refresh(),e.paint()),e.emit("afterrefreshlayout",{data:n,layoutData:r}),e.emit("afterlayout")},sd.prototype.addChild=function(t,e){this.emit("beforeaddchild",{model:t,parent:e}),(0,w.isString)(e)||(e=e.get("id")),e=this.findDataById(e),e&&(e.children||(e.children=[]),e.children.push(t),this.changeData())},sd.prototype.updateChildren=function(t,e){e&&this.findById(e)&&(this.findDataById(e).children=t,this.changeData())},sd.prototype.updateChild=function(t,e){var n;e&&this.findById(e)?(e=this.findDataById(e),n=this.findById(t.id),e.children||(e.children=[]),n?(n=sd.indexOfChild(e.children,t.id),e.children[n]=t):e.children.push(t),this.changeData()):this.changeData(t)},sd.prototype.removeChild=function(t){var e;t=this.findById(t);t&&((e=t.get("parent"))&&!e.destroyed&&(e=(e=this.findDataById(e.get("id")))&&e.children||[],t=t.getModel(),t=sd.indexOfChild(e,t.id),e.splice(t,1)),this.changeData())},sd.prototype.findDataById=function(t,e){var n,r=this;return e=e||r.get("data"),t===e.id?e:((n=null,w.each)(e.children||[],(function(e){return e.id===t?(n=e,!1):!(n=r.findDataById(t,e))&&void 0})),n)},sd.prototype.layoutAnimate=function(t,e){var n=this,r=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach((function(t){var e=t.get("model");e.sourceAnchor||(e.sourceAnchor=t.get("sourceAnchorIndex"))})),this.get("canvas").animate((function(r){ad(t,(function(i){var o,a,s,u=n.findById(i.id);return u&&(o=u.get("originAttrs"),a=u.get("model"),o||(o={x:a.x,y:a.y},u.set("originAttrs",o)),e?(s=e(u,r,o,t),u.set("model",Object.assign(a,s))):(a.x=o.x+(i.x-o.x)*r,a.y=o.y+(i.y-o.y)*r)),!0})),(0,w.each)(n.get("removeList"),(function(t){var e=t.getModel(),n=t.get("originAttrs");t=t.get("to");e.x=n.x+(t.x-n.x)*r,e.y=n.y+(t.y-n.y)*r})),n.refreshPositions()}),{duration:r.duration,easing:r.ease,callback:function(){(0,w.each)(n.getNodes(),(function(t){t.set("originAttrs",null)})),(0,w.each)(n.get("removeList"),(function(t){n.removeItem(t)})),n.set("removeList",[]),r.callback&&r.callback(),n.emit("afteranimate",{data:t})},delay:r.delay})},sd.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},sd.prototype.isLayoutAnimating=function(){return this.layoutAnimating},sd.prototype.render=function(){var t=this.get("data");if(!t||!(0,w.isObject)(t)||!Object.keys(t).length)throw new Error("data must be defined first");this.clear(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},sd.prototype.save=function(){return this.get("data")},A=sd,cd.prototype.getDefaultCfgs=function(){return{}},cd.prototype.initPlugin=function(t){var e=this,n=(e.set("graph",t),e.getEvents()),r={};(0,w.each)(n,(function(n,i){n=(0,w.wrapBehavior)(e,n),r[i]=n,t.on(i,n)})),this._events=r,this.init()},cd.prototype.getEvents=function(){return{}},cd.prototype.get=function(t){var e;return null==(e=this._cfgs)?void 0:e[t]},cd.prototype.set=function(t,e){this._cfgs[t]=e},cd.prototype.destroy=function(){},cd.prototype.destroyPlugin=function(){this.destroy();var t=this.get("graph"),e=this._events;(0,w.each)(e,(function(e,n){t.off(n,e)})),this._events=null,this._cfgs=null,this.destroyed=!0},c=cd,ld=function(t,e){return(ld=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};var ld,hd,fd="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",dd=gd;o=hd=c;if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function pd(){this.constructor=dd}function gd(t){return hd.call(this,t)||this}ld(dd,o),dd.prototype=null===o?Object.create(o):(pd.prototype=o.prototype,new pd),gd.prototype.getDefaultCfgs=function(){return{img:fd,follow:!0}},gd.prototype.init=function(){var t=this.get("graph"),e=t.get("container"),n=(t=t.get("canvas").get("el"),this.get("img")||fd),r=(n.includes("url(")||(n='url("'.concat(n,'")')),td("<div class='g6-grid-container' style=\"position:absolute;overflow:hidden;z-index: -1;\"></div>"));n=td("<div\n        class='g6-grid'\n        style='position:absolute;\n        background-image: ".concat(n,";\n        user-select: none\n        '></div>"));this.set("container",r),this.set("gridContainer",n),this.positionInit(),r.appendChild(n),e.insertBefore(r,t)},gd.prototype.positionInit=function(){var t=this.get("graph"),e=t.get("minZoom"),n=t.get("width");t=t.get("height"),ud(this.get("container"),{width:"".concat(n,"px"),height:"".concat(t,"px")}),n=80*n/e,t=80*t/e;ud(this.get("gridContainer"),{width:"".concat(n,"px"),height:"".concat(t,"px"),left:"-".concat(n/2,"px"),top:"-".concat(t/2,"px")})},gd.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},gd.prototype.updateGrid=function(t){var e=this.get("gridContainer"),n=(t=(t=t.matrix)||[1,0,0,0,1,0,0,0,1],this.get("follow"));ud(e,{transform:"matrix(".concat(t[0],", ").concat(t[1],", ").concat(t[3],", ").concat(t[4],", ").concat(n?t[6]:"0",", ").concat(n?t[7]:"0",")")})},gd.prototype.getContainer=function(){return this.get("container")},gd.prototype.destroy=function(){var t=this.get("graph").get("container"),e=this.get("container");t.removeChild(e)};var md,vd;en=gd,f=n(38186),d=n.n(f),md=function(t,e){return(md=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},p=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}md(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};function yd(t){return vd.call(this,t)||this}"undefined"!=typeof document&&d()("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n"),p(yd,vd=c),yd.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(t){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>菜单项1</li>\n            <li>菜单项2</li>\n          </ul>\n        "},shouldBegin:function(t){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},yd.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},yd.prototype.init=function(){var t=this.get("className");t=td("<div class=".concat(t||"g6-component-contextmenu","></div>"));ud(t,{top:"0px",position:"absolute",visibility:"hidden"});var e=(e=this.get("container"))||this.get("graph").get("container");(e=(0,w.isString)(e)?document.getElementById(e):e).appendChild(t),this.set("menu",t)},yd.prototype.onMenuShow=function(t){var e,n,r,i,o,a,s,u,c,l,h,f,d=this,p=(t.preventDefault(),this.get("itemTypes"));if(t.item){if(t.item&&t.item.getType&&-1===p.indexOf(t.item.getType()))return void d.onMenuHide()}else if(-1===p.indexOf("canvas"))return void d.onMenuHide();this.get("shouldBegin")(t)&&(p=this.get("menu"),f=this.get("getContent"),e=this.get("graph"),f=f(t,e),(0,w.isString)(f)?p.innerHTML=f:p.innerHTML=f.outerHTML,this.removeMenuEventListener(),(n=this.get("handleMenuClick"))&&(this.set("handleMenuClickWrapper",f=function(r){n(r.target,t.item,e)}),p.addEventListener("click",f)),f=e.get("width"),r=e.get("height"),i=p.getBoundingClientRect(),o=this.get("offsetX")||0,a=this.get("offsetY")||0,s=e.getContainer().offsetTop,u=e.getContainer().offsetLeft,c=t.canvasX+u+o,l=t.canvasY+s+a,c+i.width>f&&(c=t.canvasX-i.width-o+u),l+i.height>r&&(l=t.canvasY-i.height-a+s),ud(p,{top:"".concat(l,"px"),left:"".concat(c,"px"),visibility:"visible"}),h="click"===this.get("trigger"),f=function(t){h?h=!1:d.onMenuHide()},document.body.addEventListener("click",f),this.set("handler",f))},yd.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");t&&(this.get("menu").removeEventListener("click",t),this.set("handleMenuClickWrapper",null)),e&&document.body.removeEventListener("click",e)},yd.prototype.onMenuHide=function(){var t=this.get("menu");t&&ud(t,{visibility:"hidden"}),this.removeMenuEventListener()},yd.prototype.destroy=function(){var t,e=this.get("menu");this.removeMenuEventListener(),e&&(t=(t=this.get("container"))||this.get("graph").get("container"),(t=(0,w.isString)(t)?document.getElementById(t):t).removeChild(e))};an=yd,bd=function(t,e){return(bd=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},tn=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}bd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var bd,xd,_d=function(){return(_d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},wd=Math.max,Sd=L;function Ed(t){var e=xd.call(this,t)||this;return e.handleUpdateCanvas=(0,w.debounce)((function(t){var n=e;n.destroyed||n.updateCanvas()}),100,!1),e}tn(Ed,xd=c),Ed.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},Ed.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},Ed.prototype.disableRefresh=function(){this.set("refresh",!1)},Ed.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},Ed.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},Ed.prototype.initViewport=function(){var t,e,n,r,i,o,a,s,u,c,l,h,f=this,d=this._cfgs,p=d.size,g=d.graph;this.destroyed||(t=this.get("canvas").get("container"),e=td("\n      <div\n        class=".concat(d.viewportClassName,"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff;\n          cursor:move'\n        draggable=true\n      </div>")),n=-1<navigator.userAgent.toLowerCase().indexOf("firefox"),o=!1,h=l=c=u=s=a=i=r=0,e.addEventListener("dragstart",(function(t){var n,m;if(t.dataTransfer){var v=new Image;v.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null!=(m=(n=t.dataTransfer).setDragImage)&&m.call(n,v,0,0);try{t.dataTransfer.setData("text/html","view-port-minimap")}catch(n){t.dataTransfer.setData("text","view-port-minimap")}}d.refresh=!1,t.target!==e||(m=e.style,a=parseInt(m.left,10),s=parseInt(m.top,10),u=parseInt(m.width,10),c=parseInt(m.height,10),u>p[0])||c>p[1]||(h=g.getZoom(),l=f.get("ratio"),o=!0,r=t.clientX,i=t.clientY)}),!1),e.addEventListener(n?"dragover":"drag",(function(t){var n,f;!o||(0,w.isNil)(t.clientX)||(0,w.isNil)(t.clientY)||(n=r-t.clientX,f=i-t.clientY,(a-n<0||a-n+u>=p[0])&&(n=0),(s-f<0||s-f+c>=p[1])&&(f=0),a-=n,s-=f,ud(e,{left:"".concat(a,"px"),top:"".concat(s,"px")}),g.translate(n*h/l,f*h/l),r=t.clientX,i=t.clientY)}),!1),e.addEventListener("dragend",(function(){o=!1,d.refresh=!0}),!1),this.set("viewport",e),t.appendChild(e))},Ed.prototype.updateViewport=function(){var t,e,n,r,i,o,a,s,u;this.destroyed||(t=this.get("ratio"),this.get("dx"),this.get("dy"),o=this.get("totaldx"),u=this.get("totaldy"),i=this.get("graph"),e=this.get("size"),n=i.get("width"),r=i.get("height"),a=i.getPointByCanvas(0,0),i=i.getPointByCanvas(n,r),(n=this.get("viewport"))||this.initViewport(),r=(i.x-a.x)*t,i=(i.y-a.y)*t,s=(o=a.x*t+o)+r,u=(a=a.y*t+u)+i,o<0&&(r+=o,o=0),s>e[0]&&(r-=s-e[0]),a<0&&(i+=a,a=0),u>e[1]&&(i-=u-e[1]),this.set("ratio",t),ud(n,{left:"".concat(o,"px"),top:"".concat(a,"px"),width:"".concat(r,"px"),height:"".concat(i,"px")}))},Ed.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,e=this.get("canvas"),n=t.get("group");n.destroyed||((n=n.clone()).resetMatrix(),e.clear(),e.add(n),"svg"===t.get("renderer")&&this.updateVisible(n))},Ed.prototype.updateVisible=function(t){var e,n=this;t.isGroup()||t.get("visible")?(e=t.get("children"))&&e.length&&e.forEach((function(t){t.get("visible")||t.hide(),n.updateVisible(t)})):t.hide()},Ed.prototype.updateKeyShapes=function(){var t,e=this,n=this._cfgs.graph,r=this.get("canvas"),i=r.get("children")[0]||r.addGroup(),o=((0,w.each)(n.getEdges(),(function(t){e.updateOneEdgeKeyShape(t,i)})),(0,w.each)(n.getNodes(),(function(t){e.updateOneNodeKeyShape(t,i)})),n.getCombos());o&&o.length&&(t=i.find((function(t){return"comboGroup"===t.get("name")}))||i.addGroup({name:"comboGroup"}),setTimeout((function(){e.destroyed||((0,w.each)(o,(function(n){e.updateOneComboKeyShape(n,t)})),null!=t&&t.sort(),null!=t&&t.toBack(),e.updateCanvas())}),250)),this.clearDestroyedShapes()},Ed.prototype.updateOneComboKeyShape=function(t,e){var n,r,i,o,a,s;this.destroyed||(r=(n=this.get("itemMap")||{})[t.get("id")],i=t.getBBox(),s=(o=t.get("keyShape").clone()).attr(),a={x:i.centerX,y:i.centerY},r?a=Object.assign(s,a):e.add(r=o),"rect"!==(s=r.get("type"))&&"image"!==s||(a.x=i.minX,a.y=i.minY),r.attr(a),t.isVisible()?r.show():r.hide(),r.exist=!0,e=t.getModel().depth,isNaN(e)||r.set("zIndex",e),n[t.get("id")]=r,this.set("itemMap",n))},Ed.prototype.updateOneNodeKeyShape=function(t,e){var n=this.get("itemMap")||{},r=n[t.get("id")],i=t.getBBox(),o=t.get("keyShape").clone(),a=o.attr(),s={x:i.centerX,y:i.centerY};r?s=Object.assign(a,s):e.add(r=o),a=r.get("type"),"rect"!==a&&"image"!==a||(s.x=i.minX,s.y=i.minY),r.attr(s),t.isVisible()?r.show():r.hide(),r.exist=!0,e=t.getModel().depth;isNaN(e)||r.set("zIndex",e),n[t.get("id")]=r,this.set("itemMap",n)},Ed.prototype.updateDelegateShapes=function(){var t,e=this,n=this._cfgs.graph,r=this.get("canvas"),i=r.get("children")[0]||r.addGroup(),o=((0,w.each)(n.getEdges(),(function(t){e.updateOneEdgeKeyShape(t,i)})),(0,w.each)(n.getNodes(),(function(t){e.updateOneNodeDelegateShape(t,i)})),n.getCombos());o&&o.length&&(t=i.find((function(t){return"comboGroup"===t.get("name")}))||i.addGroup({name:"comboGroup"}),setTimeout((function(){e.destroyed||((0,w.each)(o,(function(n){e.updateOneComboKeyShape(n,t)})),null!=t&&t.sort(),null!=t&&t.toBack(),e.updateCanvas())}),250)),this.clearDestroyedShapes()},Ed.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(e&&0!==e.length)for(var n=e.length-1;0<=n;n--){var r=t[e[n]],i=r.exist;r.exist=!1,i||(r.remove(),delete t[e[n]])}},Ed.prototype.updateOneEdgeKeyShape=function(t,e){var n,r=this.get("itemMap")||{},i=r[t.get("id")];i?(n=t.get("keyShape").attr("path"),i.attr("path",n)):(i=t.get("keyShape").clone(),e.add(i)),t.isVisible()?i.show():i.hide(),i.exist=!0,r[t.get("id")]=i,this.set("itemMap",r)},Ed.prototype.updateOneNodeDelegateShape=function(t,e){var n,r=this.get("delegateStyle"),i=this.get("itemMap")||{},o=i[t.get("id")],a=t.getBBox();o?(n={x:a.minX,y:a.minY,width:a.width,height:a.height},o.attr(n)):o=e.addShape("rect",{attrs:_d({x:a.minX,y:a.minY,width:a.width,height:a.height},r),name:"minimap-node-shape"}),t.isVisible()?o.show():o.hide(),o.exist=!0,i[t.get("id")]=o,this.set("itemMap",i)},Ed.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},Ed.prototype.initContainer=function(){var t=this.get("graph"),e=this.get("size"),n=this.get("className"),r=this.get("container");n=td("<div class='".concat(n,"' style='width: ").concat(e[0],"px; height: ").concat(e[1],"px; overflow: hidden'></div>")),((r=(0,w.isString)(r)?document.getElementById(r):r)||t.get("container")).appendChild(n),this.set("container",n),r=td('<div class="g6-minimap-container" style="position: relative;"></div>');n.appendChild(r),r.addEventListener("dragenter",(function(t){t.preventDefault()})),r.addEventListener("dragover",(function(t){t.preventDefault()})),n=new("svg"===t.get("renderer")?Hh:_l)({container:r,width:e[0],height:e[1]}),this.set("canvas",n),this.updateCanvas()},Ed.prototype.updateCanvas=function(){if(!this.destroyed&&this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("size"),n=this.get("canvas"),r=this.get("type"),i=this.get("padding");if(!n.destroyed){switch(r){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var o,a,s,u,c;r=n.get("children")[0];r&&(r.resetMatrix(),n=r.getCanvasBBox(),o=t.get("canvas").getCanvasBBox(),t=t.getZoom()||1,u=o.width/t,o=o.height/t,Number.isFinite(n.width)&&(u=wd(n.width,u),o=wd(n.height,o)),u+=2*i,o+=2*i,t=Math.min(e[0]/u,e[1]/o),c=[1,0,0,0,1,0,0,0,1],s=a=0,Number.isFinite(n.minX)&&(a=-n.minX),Number.isFinite(n.minY)&&(s=-n.minY),n=(e[0]-(u-2*i)*t)/2,u=(e[1]-(o-2*i)*t)/2,c=Sd(c,[["t",a,s],["s",t,t],["t",n,u]]),r.setMatrix(c),this.set("ratio",t),this.set("totaldx",n+a*t),this.set("totaldy",u+s*t),this.set("dx",n),this.set("dy",u),this.updateViewport())}}}},Ed.prototype.getCanvas=function(){return this.get("canvas")},Ed.prototype.getViewport=function(){return this.get("viewport")},Ed.prototype.getContainer=function(){return this.get("container")},Ed.prototype.destroy=function(){null!=(t=this.get("canvas"))&&t.destroy();var t=this.get("container");null!=t&&t.parentNode&&t.parentNode.removeChild(t)};var Md,Ad;o=Ed;function Cd(t,e,n){var r=t.x-e.x;t=t.y-e.y;return!n||Math.abs(r)>n||Math.abs(t)>n?Math.sqrt(r*r+t*t):n}function Td(t,e){var n=(e.source.y-e.target.y)/(e.source.x-e.target.x);t=(n*n*e.source.x+n*(t.y-e.source.y)+t.x)/(n*n+1);return{x:t,y:n*(t-e.source.x)+e.source.y}}Md=function(t,e){return(Md=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};var kd=Pd;n=Ad=c;if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function Od(){this.constructor=kd}function Pd(t){return Ad.call(this,t)||this}Md(kd,n),kd.prototype=null===n?Object.create(n):(Od.prototype=n.prototype,new Od),Pd.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},Pd.prototype.init=function(){var t=this.get("graph"),e=this.get("onTick");this.set("tick",(function(){e&&e(),t.refreshPositions()}))},Pd.prototype.bundling=function(t){var e=this;if(e.set("data",t),!e.isTicking()){var n=t.edges||[],r=(t=t.nodes||[],{}),i=!1;if(t.forEach((function(t){null===t.x||null===!t.y||void 0===t.x?i=!0:t.y,r[t.id]=t})),i)throw new Error("please layout the graph or assign x and y for nodes first");e.set("nodeIdMap",r);for(var o=e.get("divisions"),a=e.get("divRate"),s=e.divideEdges(o),u=(t=(e.set("edgePoints",s),e.getEdgeBundles()),e.set("edgeBundles",t),e.get("cycles")),c=e.get("iterations"),l=e.get("iterRate"),h=e.get("lambda"),f=0;f<u;f++){for(var d=0;d<c;d++)!function(){var t=[];n.forEach((function(n,i){if(n.source!==n.target){var a=r[n.source];n=r[n.target];t[i]=e.getEdgeForces({source:a,target:n},i,o,h);for(var u=0;u<o+1;u++)s[i][u].x+=t[i][u].x,s[i][u].y+=t[i][u].y}}))}();h/=2,o*=a,c*=l,s=e.divideEdges(o),e.set("edgePoints",s)}n.forEach((function(t,e){t.source!==t.target&&(t.type="polyline",t.controlPoints=s[e].slice(1,s[e].length-1))})),e.get("graph").refresh()}},Pd.prototype.updateBundling=function(t){var e,n=this,r=t.data;r&&n.set("data",r),n.get("ticking")&&n.set("ticking",!1),Object.keys(t).forEach((function(e){n.set(e,t[e])})),t.onTick&&(e=this.get("graph"),n.set("tick",(function(){t.onTick(),e.refresh()}))),n.bundling(r)},Pd.prototype.divideEdges=function(t){var e=this,n=e.get("data").edges,r=e.get("nodeIdMap"),i=e.get("edgePoints");return i&&void 0!==i||(i=[]),n.forEach((function(n,o){i[o]&&void 0!==i[o]||(i[o]=[]);var a,s,u,c=r[n.source];n=r[n.target];1===t?(i[o].push({x:c.x,y:c.y}),i[o].push({x:.5*(c.x+n.x),y:.5*(c.y+n.y)}),i[o].push({x:n.x,y:n.y})):(a=(i[o]&&i[o]!==[]?e.getEdgeLength(i[o]):Cd({x:c.x,y:c.y},{x:n.x,y:n.y}))/(t+1),s=a,u=[{x:c.x,y:c.y}],i[o].forEach((function(t,e){if(0!==e){for(var n=Cd(t,i[o][e-1]);s<n;){var r=s/n,c={x:i[o][e-1].x,y:i[o][e-1].y};c.x+=r*(t.x-i[o][e-1].x),c.y+=r*(t.y-i[o][e-1].y),u.push(c),n-=s,s=a}s-=n}})),u.push({x:n.x,y:n.y}),i[o]=u)})),i},Pd.prototype.getEdgeLength=function(t){var e=0;return t.forEach((function(n,r){0!==r&&(e+=Cd(n,t[r-1]))})),e},Pd.prototype.getEdgeBundles=function(){var t=this,e=t.get("data").edges||[],n=t.get("bundleThreshold"),r=t.get("nodeIdMap"),i=(i=t.get("edgeBundles"))||[];return e.forEach((function(t,e){i[e]&&void 0!==i[e]||(i[e]=[])})),e.forEach((function(o,a){var s=r[o.source],u=r[o.target];e.forEach((function(e,o){var c;o<=a||(c=r[e.source],e=r[e.target],c=t.getBundleScore({source:s,target:u},{source:c,target:e}),n<=c&&(i[a].push(o),i[o].push(a)))}))})),i},Pd.prototype.getBundleScore=function(t,e){return t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=Cd({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=Cd({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),this.getAngleScore(t,e)*this.getScaleScore(t,e)*this.getPositionScore(t,e)*this.getVisibilityScore(t,e)},Pd.prototype.getAngleScore=function(t,e){var n,r;return n={x:t.vx,y:t.vy},r={x:e.vx,y:e.vy},(n.x*r.x+n.y*r.y)/(t.length*e.length)},Pd.prototype.getScaleScore=function(t,e){var n=(t.length+e.length)/2;return 2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n)},Pd.prototype.getPositionScore=function(t,e){var n=(t.length+e.length)/2;return n/(n+Cd({x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},{x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2}))},Pd.prototype.getVisibilityScore=function(t,e){var n=this.getEdgeVisibility(t,e);e=this.getEdgeVisibility(e,t);return n<e?n:e},Pd.prototype.getEdgeVisibility=function(t,e){var n=Td(e.source,t),r=(e=Td(e.target,t),{x:(n.x+e.x)/2,y:(n.y+e.y)/2});t={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Cd(r,t)/Cd(n,e))},Pd.prototype.getEdgeForces=function(t,e,n,r){for(var i=this.get("edgePoints"),o=this.get("K")/(Cd(t.source,t.target)*(n+1)),a=[{x:0,y:0}],s=1;s<n;s++){var u={x:0,y:0},c=this.getSpringForce({pre:i[e][s-1],cur:i[e][s],next:i[e][s+1]},o),l=this.getElectrostaticForce(s,e);u.x=r*(c.x+l.x),u.y=r*(c.y+l.y),a.push(u)}return a.push({x:0,y:0}),a},Pd.prototype.getSpringForce=function(t,e){var n=t.pre.x+t.next.x-2*t.cur.x;t=t.pre.y+t.next.y-2*t.cur.y;return{x:n*=e,y:t*=e}},Pd.prototype.getElectrostaticForce=function(t,e){var n=this.get("eps"),r=this.get("edgeBundles"),i=this.get("edgePoints"),o=(r=r[e],{x:0,y:0});return r.forEach((function(r){var a={x:i[r][t].x-i[e][t].x,y:i[r][t].y-i[e][t].y};(Math.abs(a.x)>n||Math.abs(a.y)>n)&&(r=1/Cd(i[r][t],i[e][t]),o.x+=a.x*r,o.y+=a.y*r)})),o},Pd.prototype.isTicking=function(){return this.get("ticking")},Pd.prototype.getSimulation=function(){return this.get("forceSimulation")},Pd.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),Ad.prototype.destroy.call(this)},f=Pd,Id=function(t,e){return(Id=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};var Id,Nd,Dd=function(){return(Dd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Ld={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"};function Rd(t){return Nd.call(this,t)||this}var Bd=Rd;p=Nd=c;if("function"!=typeof p&&null!==p)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function jd(){this.constructor=Bd}Id(Bd,p),Bd.prototype=null===p?Object.create(p):(jd.prototype=p.prototype,new jd),Rd.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,w.clone)(Ld),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},Rd.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"}}return t},Rd.prototype.init=function(){var t=this.get("r"),e=(this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{}),this.set("r2",t*t),this.get("d"));this.set("molecularParam",(e+1)*t)},Rd.prototype.createDelegate=function(t){var e=this,n=this,r=n.get("delegate");r&&!r.destroyed||(n.magnify(t),(r=n.get("delegate")).on("dragstart",(function(t){n.set("delegateCenterDiff",{x:r.attr("x")-t.x,y:r.attr("y")-t.y})})),r.on("drag",(function(t){n.magnify(t)})),"wheel"===this.get("scaleDBy")&&r.on("mousewheel",(function(t){e.scaleDByWheel(t)})),"wheel"===this.get("scaleRBy")&&r.on("mousewheel",(function(t){n.scaleRByWheel(t)})))},Rd.prototype.scaleRByWheel=function(t){var e,n,r,i,o,a,s=this;t&&t.originalEvent&&(t.preventDefault&&t.preventDefault(),e=s.get("graph"),n=((n=s.get("delegate"))?{x:n.attr("x"),y:n.attr("y")}:void 0)||e.getPointByClient(t.clientX,t.clientY),r=t.originalEvent.wheelDelta<0?.95:1/.95,a=s.get("maxR"),i=s.get("minR"),((o=s.get("r"))>(a||e.get("height"))&&1<r||o<(i||.05*e.get("height"))&&r<1)&&(r=1),s.set("r",o*=r),s.set("r2",o*o),a=s.get("d"),s.set("molecularParam",(a+1)*o),s.set("delegateCenterDiff",void 0),s.magnify(t,n))},Rd.prototype.scaleRByDrag=function(t){var e,n,r,i,o,a,s=this;t&&(r=s.get("dragPrePos"),n=(e=s.get("graph")).getPointByClient(t.clientX,t.clientY),r=t.x-r.x<0?.95:1/.95,a=s.get("maxR"),i=s.get("minR"),((o=s.get("r"))>(a||e.get("height"))&&1<r||o<(i||.05*e.get("height"))&&r<1)&&(r=1),s.set("r",o*=r),s.set("r2",o*o),a=s.get("d"),s.set("molecularParam",(a+1)*o),s.magnify(t,n),s.set("dragPrePos",{x:t.x,y:t.y}))},Rd.prototype.scaleDByWheel=function(t){var e,n,r;(t||t.originalEvent)&&(t.preventDefault&&t.preventDefault(),r=t.originalEvent.wheelDelta<(r=0)?-.1:.1,r=this.get("d")+r,e=this.get("maxD"),n=this.get("minD"),r<e)&&n<r&&(this.set("d",r),e=this.get("r"),this.set("molecularParam",(r+1)*e),r=(n=this.get("delegate"))?{x:n.attr("x"),y:n.attr("y")}:void 0,this.set("delegateCenterDiff",void 0),this.magnify(t,r))},Rd.prototype.scaleDByDrag=function(t){var e=this.get("dragPrePos"),n=(e=0<t.x-e.x?.1:-.1,e=this.get("d")+e,this.get("maxD")),r=this.get("minD");e<n&&r<e&&(this.set("d",e),n=this.get("r"),this.set("molecularParam",(e+1)*n),this.magnify(t)),this.set("dragPrePos",{x:t.x,y:t.y})},Rd.prototype.magnify=function(t,e){var n=this,r=(n.restoreCache(),n.get("graph")),i=n.get("cachedMagnifiedModels"),o=n.get("cachedOriginPositions"),a=n.get("showLabel"),s=n.get("r"),u=n.get("r2"),c=n.get("d"),l=n.get("molecularParam"),h=r.getNodes(),f=h.length,d=e?{x:e.x,y:e.y}:{x:t.x,y:t.y};!n.get("dragging")||"mousemove"!==n.get("trigger")&&"click"!==n.get("trigger")||(d=n.get("cacheCenter")),e=n.get("delegateCenterDiff");e&&(d.x+=e.x,d.y+=e.y),n.updateDelegate(d,s);for(var p=0;p<f;p++){var g=h[p].getModel(),m=g.x,v=g.y;if(!isNaN(m)&&!isNaN(v)){var y=(m-d.x)*(m-d.x)+(v-d.y)*(v-d.y);if(!isNaN(y)&&y<u&&0!=y){y=Math.sqrt(y);var b=l*y/(c*y+s),x=(m-d.x)/y,_=(v-d.y)/y;if(g.x=x*b+d.x,g.y=_*b+d.y,o[g.id]||(o[g.id]={x:m,y:v,texts:[]}),i.push(g),a&&2*y<s)for(var w=h[p].getContainer().getChildren(),S=w.length,E=0;E<S;E++){var M=w[E];"text"===M.get("type")&&(o[g.id].texts.push({visible:M.get("visible"),shape:M}),M.set("visible",!0))}}}}r.refreshPositions()},Rd.prototype.restoreCache=function(){for(var t=this.get("cachedMagnifiedModels"),e=this.get("cachedOriginPositions"),n=t.length,r=0;r<n;r++)for(var i=t[r],o=e[i.id],a=(i.x=o.x,i.y=o.y,o.texts.length),s=0;s<a;s++){var u=o.texts[s];u.shape.set("visible",u.visible)}this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{})},Rd.prototype.updateParams=function(t){var e,n=this,r=t.r,i=t.d,o=t.trigger,a=t.minD,s=t.maxD,u=t.minR,c=t.maxR,l=t.scaleDBy,h=t.scaleRBy;isNaN(t.r)||(n.set("r",r),n.set("r2",r*r)),isNaN(i)||n.set("d",i),isNaN(s)||n.set("maxD",s),isNaN(a)||n.set("minD",a),isNaN(c)||n.set("maxR",c),isNaN(u)||n.set("minR",u),t=n.get("d"),r=n.get("r");n.set("molecularParam",(t+1)*r),"mousemove"!==o&&"click"!==o&&"drag"!==o||n.set("trigger",o),("drag"===l||"wheel"===l||"unset"===l)&&(n.set("scaleDBy",l),n.get("delegate").remove(),n.get("delegate").destroy(),e=n.get("dPercentText"))&&(e.remove(),e.destroy()),("drag"===h||"wheel"===h||"unset"===h)&&(n.set("scaleRBy",h),n.get("delegate").remove(),n.get("delegate").destroy(),e=n.get("dPercentText"))&&(e.remove(),e.destroy())},Rd.prototype.updateDelegate=function(t,e){var n,r,i=this,o=this,a=o.get("graph"),s=o.get("delegate");!s||s.destroyed?(n=a.get("group"),r=o.get("delegateStyle")||Ld,s=n.addShape("circle",{attrs:Dd({r:e/1.5,x:t.x,y:t.y},r),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?s.on("mousewheel",(function(t){o.scaleRByWheel(t)})):"drag"===this.get("scaleRBy")&&(s.on("dragstart",(function(t){o.set("dragging",!0),o.set("cacheCenter",{x:t.x,y:t.y}),o.set("dragPrePos",{x:t.x,y:t.y})})),s.on("drag",(function(t){o.scaleRByDrag(t)})),s.on("dragend",(function(t){o.set("dragging",!1)}))),"wheel"===this.get("scaleDBy")?s.on("mousewheel",(function(t){i.scaleDByWheel(t)})):"drag"===this.get("scaleDBy")&&(s.on("dragstart",(function(t){o.set("dragging",!0),o.set("cacheCenter",{x:t.x,y:t.y}),o.set("dragPrePos",{x:t.x,y:t.y})})),s.on("drag",(function(t){i.scaleDByDrag(t)})),s.on("dragend",(function(t){o.set("dragging",!1)}))))):s.attr({x:t.x,y:t.y,r:e/1.5}),o.get("showDPercent")&&(n=Math.round((o.get("d")-o.get("minD"))/(o.get("maxD")-o.get("minD"))*100),r=o.get("dPercentText"),e=t.y+e/1.5+16,!r||r.destroyed?(r=a.get("group").addShape("text",{attrs:{text:"".concat(n,"%"),x:t.x,y:e,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),o.set("dPercentText",r)):r.attr({text:"".concat(n,"%"),x:t.x,y:e})),o.set("delegate",s)},Rd.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions(),t=this.get("delegate"),t&&!t.destroyed&&(t.remove(),t.destroy()),t=this.get("dPercentText");t&&!t.destroyed&&(t.remove(),t.destroy())},Rd.prototype.destroy=function(){this.clear()};var Fd,zd;tn=Rd,Fd=function(t,e){return(Fd=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},n=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Fd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};function Ud(t){return zd.call(this,t)||this}"undefined"!=typeof document&&d()("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n"),n(Ud,zd=c),Ud.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(t){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},Ud.prototype.init=function(){var t=this,e=this.get("graph"),n=this.get("getContent")(e),r=n;(0,w.isString)(n)&&(r=td(n)),n=this.get("className");r.setAttribute("class",n||"g6-component-toolbar");n=(n=this.get("container"))||this.get("graph").get("container");var i=((n=(0,w.isString)(n)?document.getElementById(n):n).appendChild(r),this.set("toolBar",r),this.get("handleClick"));r.addEventListener("click",(function(n){n=function(t){if(!t)return[];if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;){if(e.push(n),"HTML"===n.tagName)return e.push(document,window),e;n=n.parentElement}return e}(n).filter((function(t){return"LI"===t.nodeName}));0!==n.length&&(n=n[0].getAttribute("code"))&&(i?i(n,e):t.handleDefaultOperator(n))})),n=this.get("position");n&&ud(r,{top:"".concat(n.y,"px"),left:"".concat(n.x,"px")}),this.bindUndoRedo()},Ud.prototype.bindUndoRedo=function(){var t=this.get("graph"),e=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),r=document.querySelector('.g6-component-toolbar li[code="redo"]'),i=document.querySelector('.g6-component-toolbar li[code="redo"] svg');e&&n&&r&&i&&t.on("stackchange",(function(t){var o=t.undoStack;t=t.redoStack,o=o.length,t=t.length;1===o?(e.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(e.removeAttribute("style"),n.removeAttribute("style")),0===t?(r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),i.removeAttribute("style"))}))},Ud.prototype.undo=function(){var t=this.get("graph"),e=t.getUndoStack();if(e&&1!==e.length&&(e=e.pop(),e)){var n=e.action,r=(t.pushStack(n,(0,w.clone)(e.data),"redo"),e.data.before);if(r="add"===n?e.data.after:r)switch(n){case"visible":Object.keys(r).forEach((function(e){e=r[e],e&&e.forEach((function(e){var n=t.findById(e.id);e.visible?t.showItem(n,!1):t.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(r).forEach((function(e){e=r[e],e&&e.forEach((function(e){var n=t.findById(e.id);delete e.id,t.updateItem(n,e,!1),"combo"===n.getType()&&t.updateCombo(n)}))}));break;case"changedata":t.changeData(r,!1);break;case"delete":Object.keys(r).forEach((function(e){e=r[e],e&&e.forEach((function(e){var n=e.itemType;delete e.itemType,t.addItem(n,e,!1)}))}));break;case"add":Object.keys(r).forEach((function(e){e=r[e],e&&e.forEach((function(e){t.removeItem(e.id,!1)}))}));break;case"updateComboTree":Object.keys(r).forEach((function(e){e=r[e],e&&e.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}));break;case"layout":t.updateLayout(r,void 0,void 0,!1)}}},Ud.prototype.redo=function(){var t=this.get("graph"),e=t.getRedoStack();if(e&&0!==e.length&&(e=e.pop(),e)){var n=e.action,r=e.data.after;if(t.pushStack(n,(0,w.clone)(e.data)),r="delete"===n?e.data.before:r)switch(n){case"visible":Object.keys(r).forEach((function(e){e=r[e],e&&e.forEach((function(e){var n=t.findById(e.id);e.visible?t.showItem(n,!1):t.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(r).forEach((function(e){e=r[e],e&&e.forEach((function(e){var n=t.findById(e.id);delete e.id,t.updateItem(n,e,!1),"combo"===n.getType()&&t.updateCombo(n)}))}));break;case"changedata":t.changeData(r,!1);break;case"delete":r.edges&&r.edges.forEach((function(e){t.removeItem(e.id,!1)})),r.nodes&&r.nodes.forEach((function(e){t.removeItem(e.id,!1)})),r.combos&&r.combos.forEach((function(e){t.removeItem(e.id,!1)}));break;case"add":Object.keys(r).forEach((function(e){e=r[e],e&&e.forEach((function(e){var n=e.itemType;delete e.itemType,t.addItem(n,e,!1)}))}));break;case"updateComboTree":Object.keys(r).forEach((function(e){e=r[e],e&&e.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}));break;case"layout":t.updateLayout(r,void 0,void 0,!1)}}},Ud.prototype.zoomOut=function(){var t=this.get("graph"),e=t.getZoom(),n=1/(1-.05*this.get("zoomSensitivity"));(this.get("maxZoom")||t.get("maxZoom"))<n*e||t.zoomTo(e*n)},Ud.prototype.zoomIn=function(){var t=this.get("graph"),e=t.getZoom(),n=1-.05*this.get("zoomSensitivity");n*e<(this.get("minZoom")||t.get("minZoom"))||t.zoomTo(e*n)},Ud.prototype.realZoom=function(){this.get("graph").zoomTo(1)},Ud.prototype.autoZoom=function(){this.get("graph").fitView([20,20])},Ud.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom()}},Ud.prototype.destroy=function(){var t=this.get("toolBar"),e=(t&&(e=(e=this.get("container"))||this.get("graph").get("container"),(e=(0,w.isString)(e)?document.getElementById(e):e).removeChild(t)),this.get("handleClick"));e&&t.removeEventListener("click",e)};var Gd,Vd;p=Ud,Gd=function(t,e){return(Gd=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},n=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Gd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};function Wd(t){return Vd.call(this,t)||this}"undefined"!=typeof document&&d()("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n"),n(Wd,Vd=c),Wd.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(t){return"\n          <h4 class='tooltip-type'>类型：".concat(t.item.getType(),"</h4>\n          <span class='tooltip-id'>ID：").concat(t.item.getID(),"</span>\n        ")},shouldBegin:function(t){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},Wd.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},Wd.prototype.init=function(){var t=this,e=t.get("className")||"g6-component-tooltip",n=td("<div class='".concat(e,"'></div>"));e=(e=t.get("container"))||t.get("graph").get("container");(0,w.isString)(e)&&(e=document.getElementById(e)),ud(n,{position:"absolute",visibility:"hidden",display:"none"}),e.appendChild(n),"click"!==t.get("trigger")&&(n.addEventListener("mouseenter",(function(t){ud(n,{visibility:"visible",display:"unset"})})),n.addEventListener("mouseleave",(function(e){t.hideTooltip()}))),t.set("tooltip",n)},Wd.prototype.onClick=function(t){var e,n=this.get("itemTypes");t.item&&t.item.getType&&-1===n.indexOf(t.item.getType())||(n=t.item,e=this.get("graph"),this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),e.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),e.emit("tooltipchange",{item:t.item,action:"show"})))},Wd.prototype.onMouseEnter=function(t){var e,n=this.get("itemTypes");t.item&&t.item.getType&&-1===n.indexOf(t.item.getType())||(n=t.item,e=this.get("graph"),this.currentTarget=n,this.showTooltip(t),e.emit("tooltipchange",{item:t.item,action:"show"}))},Wd.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&-1===e.indexOf(t.item.getType())||this.currentTarget&&t.item===this.currentTarget&&this.showTooltip(t)},Wd.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},Wd.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},Wd.prototype.showTooltip=function(t){var e,n;t.item&&(e=this.get("itemTypes"),t.item.getType&&-1===e.indexOf(t.item.getType())||(e=this.get("tooltip"),n=this.get("getContent")(t),(0,w.isString)(n)?e.innerHTML=n:(this.clearContainer(),e.appendChild(n)),this.updatePosition(t)))},Wd.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&ud(t,{visibility:"hidden",display:"none"})},Wd.prototype.updatePosition=function(t){var e,n,r,i,o,a,s=this.get("shouldBegin"),u=this.get("tooltip");s(t)?(e=(s=this.get("graph")).get("width"),n=s.get("height"),r=this.get("offsetX")||0,i=this.get("offsetY")||0,a=s.getPointByClient(t.clientX,t.clientY),o=this.get("fixToNode"),(t=t.item).getType&&"node"===t.getType()&&o&&(0,w.isArray)(o)&&2<=o.length&&(a={x:(t=t.getBBox()).minX+t.width*o[0],y:t.minY+t.height*o[1]}),o=(t=s.getCanvasByPoint(a.x,a.y)).x,a=t.y,s={x:o+(t=s.getContainer()).offsetLeft+r,y:a+t.offsetTop+i},ud(u,{visibility:"visible",display:"unset"}),o+(t=u.getBoundingClientRect()).width+r>e&&(s.x-=t.width+r),a+t.height+i>n&&(s.y-=t.height+i),ud(u,{left:"".concat(s.x,"px"),top:"".concat(s.y,"px")})):ud(u,{visibility:"hidden",display:"none"})},Wd.prototype.hide=function(){this.onMouseLeave()},Wd.prototype.destroy=function(){var t,e=this.get("tooltip");e&&(t=(t=this.get("container"))||this.get("graph").get("container"),(t=(0,w.isString)(t)?document.getElementById(t):t).removeChild(e))};d=Wd;var Hd={};function Yd(t,e){Hd[t]=e}function qd(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}qd.prototype.translate=function(t){return t},qd.prototype.change=function(t){(0,w.assign)(this.__cfg__,t),this.init()},qd.prototype.clone=function(){return this.constructor(this.__cfg__)},qd.prototype.getTicks=function(){var t=this;return(0,w.map)(this.ticks,(function(e,n){return(0,w.isObject)(e)?e:{text:t.getText(e,n),tickValue:e,value:t.scale(e)}}))},qd.prototype.getText=function(t,e){var n=this.formatter;n=n?n(t,e):t;return(0,w.isNil)(n)||!(0,w.isFunction)(n.toString)?"":n.toString()},qd.prototype.getConfig=function(t){return this.__cfg__[t]},qd.prototype.init=function(){(0,w.assign)(this,this.__cfg__),this.setDomain(),(0,w.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},qd.prototype.initCfg=function(){},qd.prototype.setDomain=function(){},qd.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if((0,w.isString)(t)){var n=Hd[t];if(!n)throw new Error("There is no method to to calculate ticks!");e=n(this)}else(0,w.isFunction)(t)&&(e=t(this));return e},qd.prototype.rangeMin=function(){return this.range[0]},qd.prototype.rangeMax=function(){return this.range[1]},qd.prototype.calcPercent=function(t,e,n){return(0,w.isNumber)(t)?(t-e)/(n-e):NaN},qd.prototype.calcValue=function(t,e,n){return e+t*(n-e)};n=qd;var Xd=function(t,e){return(Xd=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};function Kd(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Xd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Zd,$d=function(){return($d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Jd(){var t=null!==Zd&&Zd.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}Object.create,Object.create,Kd(Jd,Zd=n),Jd.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},Jd.prototype.translate=function(t){this.buildIndexMap();var e=this.translateIndexMap.get(t);return void 0===e?(0,w.isNumber)(t)?t:NaN:e},Jd.prototype.scale=function(t){return t=this.translate(t),t=this.calcPercent(t,this.min,this.max),this.calcValue(t,this.rangeMin(),this.rangeMax())},Jd.prototype.invert=function(t){var e=this.max-this.min;t=this.calcPercent(t,this.rangeMin(),this.rangeMax()),e=Math.round(e*t)+this.min;return e<this.min||e>this.max?NaN:this.values[e]},Jd.prototype.getText=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=t;return(0,w.isNumber)(t)&&!this.values.includes(t)&&(r=this.values[r]),Zd.prototype.getText.apply(this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}([r],e))},Jd.prototype.initCfg=function(){this.tickMethod="cat"},Jd.prototype.setDomain=function(){var t;(0,w.isNil)(this.getConfig("min"))&&(this.min=0),(0,w.isNil)(this.getConfig("max"))&&(t=this.values.length,this.max=1<t?t-1:t),this.translateIndexMap&&(this.translateIndexMap=void 0)};var Qd=Jd,tp=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,ep="\\d\\d?",np="\\d\\d",rp="[^\\s]+",ip=/\[([^]*?)\]/gm;function op(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}function ap(t){return function(e,n){return n=n[t].map((function(t){return t.toLowerCase()})).indexOf(e.toLowerCase()),-1<n?n:null}}function sp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o,a=i[r];for(o in a)t[o]=a[o]}return t}function up(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t}function cp(t){return+t-1}var lp=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],hp=["January","February","March","April","May","June","July","August","September","October","November","December"],fp=op(hp,3),dp={dayNamesShort:op(lp,3),dayNames:lp,monthNamesShort:fp,monthNames:hp,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][3<t%10?0:(t-t%10!=10?1:0)*t%10]}},pp=sp({},dp),gp=function(t){return pp=sp(pp,t)},mp=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},vp={D:function(t){return String(t.getDate())},DD:function(t){return up(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return up(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return up(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return up(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return up(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return up(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return up(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return up(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return up(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return up(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return up(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return(t.getHours()<12?e.amPm[0]:e.amPm[1]).toUpperCase()},ZZ:function(t){return t=t.getTimezoneOffset(),(0<t?"-":"+")+up(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(t){return t=t.getTimezoneOffset(),(0<t?"-":"+")+up(Math.floor(Math.abs(t)/60),2)+":"+up(Math.abs(t)%60,2)}},yp=(lp=[null,ep],fp=[null,rp],hp=["isPm",rp,function(t,e){return t=t.toLowerCase(),t===e.amPm[0]?0:t===e.amPm[1]?1:null}],["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e;t=(t+"").match(/([+-]|\d\d)/gi);return t?(e=60*+t[1]+parseInt(t[2],10),"+"===t[0]?e:-e):0}]),bp={D:["day",ep],DD:["day",np],Do:["day",ep+rp,function(t){return parseInt(t,10)}],M:["month",ep,cp],MM:["month",np,cp],YY:["year",np,function(t){var e=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(68<+t?e-1:e)+t)}],h:["hour",ep,void 0,"isPm"],hh:["hour",np,void 0,"isPm"],H:["hour",ep],HH:["hour",np],m:["minute",ep],mm:["minute",np],s:["second",ep],ss:["second",np],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(t){return 100*+t}],SS:["millisecond",np,function(t){return 10*+t}],SSS:["millisecond","\\d{3}"],d:lp,dd:lp,ddd:fp,dddd:fp,MMM:["month",rp,ap("monthNamesShort")],MMMM:["month",rp,ap("monthNames")],a:hp,A:hp,ZZ:yp,Z:yp},xp={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},_p=function(t){return sp(xp,t)},wp=function(t,e,n){if(void 0===e&&(e=xp.default),void 0===n&&(n={}),"number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");e=xp[e]||e;var r=[],i=(e=e.replace(ip,(function(t,e){return r.push(e),"@@@"})),sp(sp({},pp),n));return(e=e.replace(tp,(function(e){return vp[e](t,i)}))).replace(/@@@/g,(function(){return r.shift()}))};function Sp(t,e,n){if(void 0===n&&(n={}),"string"!=typeof e)throw new Error("Invalid format in fecha parse");if(e=xp[e]||e,1e3<t.length)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],a=(e=e.replace(ip,(function(t,e){return o.push(mp(e)),"@@@"})),{}),s={},u=(e=mp(e).replace(tp,(function(t){t=bp[t];var e=t[0],n=t[1],r=t[3];if(a[e])throw new Error("Invalid format. "+e+" specified twice in format");return a[e]=!0,r&&(s[r]=!0),i.push(t),"("+n+")"})),Object.keys(s).forEach((function(t){if(!a[t])throw new Error("Invalid format. "+t+" is required in specified format")})),e=e.replace(/@@@/g,(function(){return o.shift()})),t.match(new RegExp(e,"i")));if(!u)return null;for(var c=sp(sp({},pp),n),l=1;l<u.length;l++){var h=i[l-1],f=h[0];h=h[2],h=h?h(u[l],c):+u[l];if(null==h)return null;r[f]=h}if(1===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:0===r.isPm&&12==+r.hour&&(r.hour=0),null==r.timezoneOffset){for(var d=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond),p=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],g=(l=0,p.length);l<g;l++)if(a[p[l][0]]&&r[p[l][0]]!==d[p[l][1]]())return null}else if(d=new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond)),11<r.month||r.month<0||31<r.day||r.day<1||23<r.hour||r.hour<0||59<r.minute||r.minute<0||59<r.second||r.second<0)return null;return d}var Ep={format:wp,parse:Sp,defaultI18n:dp,setGlobalDateI18n:gp,setGlobalDateMasks:_p};function Mp(t,e){return(g.format||Ep.format)(t,e)}function Ap(t){return(0,w.isString)(t)&&(t=(0<t.indexOf("T")?new Date(t):new Date(t.replace(/-/gi,"/"))).getTime()),(0,w.isDate)(t)?t.getTime():t}var Cp,Tp=36e5,kp=24*Tp,Op=31*kp,Pp=365*kp,Ip=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",Tp],["HH",6*Tp],["HH",12*Tp],["YYYY-MM-DD",kp],["YYYY-MM-DD",4*kp],["YYYY-WW",7*kp],["YYYY-MM",Op],["YYYY-MM",4*Op],["YYYY-MM",6*Op],["YYYY",380*kp]];function Np(t,e,n){r=function(t){return t[1]};var r;e=function(t,e,n,i){for(var o=(0,w.isNil)(n)?0:n,a=(0,w.isNil)(i)?t.length:i;o<a;){var s=o+a>>>1;r(t[s])>e?a=s:o=1+s}return o}(Ip,(e-t)/n)-1,t=Ip[e];return e<0?t=Ip[0]:e>=Ip.length&&(t=(0,w.last)(Ip)),t}function Dp(){var t=null!==Cp&&Cp.apply(this,arguments)||this;return t.type="timeCat",t}Kd(Dp,Cp=Qd),Dp.prototype.translate=function(t){t=Ap(t);var e=this.values.indexOf(t);return-1===e?(0,w.isNumber)(t)&&t<this.values.length?t:NaN:e},Dp.prototype.getText=function(t,e){var n,r=this.translate(t);return-1<r?(r=this.values[r],(n=this.formatter)?n(r,e):Mp(r,this.mask)):t},Dp.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},Dp.prototype.setDomain=function(){var t=this.values;(0,w.each)(t,(function(e,n){t[n]=Ap(e)})),t.sort((function(t,e){return t-e})),Cp.prototype.setDomain.call(this)};var Lp;ep=Dp;function Rp(){var t=null!==Lp&&Lp.apply(this,arguments)||this;return t.isContinuous=!0,t}Kd(Rp,Lp=n),Rp.prototype.scale=function(t){var e,n;return(0,w.isNil)(t)?NaN:(e=this.rangeMin(),n=this.rangeMax(),this.max===this.min?e:e+this.getScalePercent(t)*(n-e))},Rp.prototype.init=function(){Lp.prototype.init.call(this);var t=this.ticks,e=(0,w.head)(t);t=(0,w.last)(t);e<this.min&&(this.min=e),t>this.max&&(this.max=t),(0,w.isNil)(this.minLimit)||(this.min=e),(0,w.isNil)(this.maxLimit)||(this.max=t)},Rp.prototype.setDomain=function(){var t=(0,w.getRange)(this.values),e=t.min;t=t.max;(0,w.isNil)(this.min)&&(this.min=e),(0,w.isNil)(this.max)&&(this.max=t),this.min>this.max&&(this.min=e,this.max=t)},Rp.prototype.calculateTicks=function(){var t=this,e=Lp.prototype.calculateTicks.call(this);return this.nice?e:(0,w.filter)(e,(function(e){return e>=t.min&&e<=t.max}))},Rp.prototype.getScalePercent=function(t){var e=this.max,n=this.min;return(t-n)/(e-n)},Rp.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())};var Bp;np=Rp;function jp(){var t=null!==Bp&&Bp.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}Kd(jp,Bp=np),jp.prototype.invert=function(t){return t=this.getInvertPercent(t),this.min+t*(this.max-this.min)},jp.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1};var Fp,zp=jp;function Up(t,e){var n=Math.E;n=0<=e?Math.pow(n,Math.log(e)/t):-1*Math.pow(n,Math.log(-e)/t);return n}function Gp(t,e){return 1===t?1:Math.log(e)/Math.log(t)}function Vp(t,e,n){var r=n=(0,w.isNil)(n)?Math.max.apply(null,t):n;return(0,w.each)(t,(function(t){0<t&&t<r&&(r=t)})),r=1<(r=r===n?n/e:r)?1:r}function Wp(){var t=null!==Fp&&Fp.apply(this,arguments)||this;return t.type="log",t}Kd(Wp,Fp=np),Wp.prototype.invert=function(t){var e=this.base,n=Gp(e,this.max),r=this.rangeMin(),i=this.rangeMax()-r,o=this.positiveMin;if(o){if(0===t)return 0;var a,s=1/(n-(a=Gp(e,o/e)))*i;if(t<s)return t/s*o}else a=Gp(e,this.min);return Math.pow(e,(t-r)/i*(n-a)+a)},Wp.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},Wp.prototype.setDomain=function(){Fp.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===t&&(this.positiveMin=Vp(this.values,this.base,this.max))},Wp.prototype.getScalePercent=function(t){var e,n,r=this.max,i=this.min;return r===i||t<=0?0:(e=this.base,(n=this.positiveMin)&&(i=+n/e),t<n?t/n/(Gp(e,r)-Gp(e,i)):(Gp(e,t)-Gp(e,i))/(Gp(e,r)-Gp(e,i)))};var Hp;lp=Wp;function Yp(){var t=null!==Hp&&Hp.apply(this,arguments)||this;return t.type="pow",t}Kd(Yp,Hp=np),Yp.prototype.invert=function(t){t=this.getInvertPercent(t);var e=this.exponent,n=Up(e,this.max),r=Up(e,this.min);t=t*(n-r)+r,n=0<=t?1:-1;return Math.pow(t,e)*n},Yp.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},Yp.prototype.getScalePercent=function(t){var e,n=this.max,r=this.min;return n===r?0:(Up(e=this.exponent,t)-Up(e,r))/(Up(e,n)-Up(e,r))};var qp;fp=Yp;function Xp(){var t=null!==qp&&qp.apply(this,arguments)||this;return t.type="time",t}Kd(Xp,qp=zp),Xp.prototype.getText=function(t,e){t=this.translate(t);var n=this.formatter;return n?n(t,e):Mp(t,this.mask)},Xp.prototype.scale=function(t){return((0,w.isString)(t)||(0,w.isDate)(t))&&(t=this.translate(t)),qp.prototype.scale.call(this,t)},Xp.prototype.translate=Ap,Xp.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},Xp.prototype.setDomain=function(){var t,e,n,r,i=this.values,o=this.getConfig("min"),a=this.getConfig("max");(0,w.isNil)(o)&&(0,w.isNumber)(o)||(this.min=this.translate(this.min)),(0,w.isNil)(a)&&(0,w.isNumber)(a)||(this.max=this.translate(this.max)),i&&i.length&&(t=[],n=e=1/0,(r=0,w.each)(i,(function(i){var o=Ap(i);if(isNaN(o))throw new TypeError("Invalid Time: "+i+" in time scale!");o<e?(n=e,e=o):o<n&&(n=o),r<o&&(r=o),t.push(o)})),1<i.length&&(this.minTickInterval=n-e),(0,w.isNil)(o)&&(this.min=e),(0,w.isNil)(a))&&(this.max=r)};var Kp;rp=Xp;function Zp(){var t=null!==Kp&&Kp.apply(this,arguments)||this;return t.type="quantize",t}Kd(Zp,Kp=np),Zp.prototype.invert=function(t){var e,n=this.ticks,r=n.length,i=(t=this.getInvertPercent(t),Math.floor(t*(r-1)));return r-1<=i?(0,w.last)(n):i<0?(0,w.head)(n):(e=n[i])+(t-(t=i/(r-1)))/((i+1)/(r-1)-t)*(n[i+1]-e)},Zp.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},Zp.prototype.calculateTicks=function(){var t=Kp.prototype.calculateTicks.call(this);return this.nice||((0,w.last)(t)!==this.max&&t.push(this.max),(0,w.head)(t)!==this.min&&t.unshift(this.min)),t},Zp.prototype.getScalePercent=function(t){var e,n=this.ticks;return t<(0,w.head)(n)?0:t>(0,w.last)(n)?1:((e=0,w.each)(n,(function(n,r){if(!(n<=t))return!1;e=r})),e/(n.length-1))};var $p;hp=Zp;function Jp(){var t=null!==$p&&$p.apply(this,arguments)||this;return t.type="quantile",t}Kd(Jp,$p=hp),Jp.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0};yp=Jp;var Qp,tg={};function eg(t,e){if(tg[t])throw new Error("type '"+t+"' existed.");tg[t]=e}function ng(){var t=null!==Qp&&Qp.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}function rg(t){var e,n=t.values,r=t.tickInterval,i=t.tickCount,o=t.showLast;if((0,w.isNumber)(r))return e=(0,w.filter)(n,(function(t,e){return e%r==0})),a=(0,w.last)(n),o&&(0,w.last)(e)!==a&&e.push(a),e;var a=n.length,s=t.min,u=t.max;if((0,w.isNil)(s)&&(s=0),(0,w.isNil)(u)&&(u=n.length-1),!(0,w.isNumber)(i)||a<=i)return n.slice(s,u+1);if(i<=0||u<=0)return[];for(var c=1===i?a:Math.floor(a/(i-1)),l=[],h=s,f=0;f<i&&!(u<=h);f++)h=Math.min(s+f*c,u),l.push(f===i-1&&o?n[u]:n[h]);return l}Kd(ng,Qp=n),ng.prototype.calculateTicks=function(){return this.values},ng.prototype.scale=function(t){return this.values[0]!==t&&(0,w.isNumber)(t)?t:this.range[0]},ng.prototype.invert=function(t){var e=this.range;return t<e[0]||t>e[1]?NaN:this.values[0]},np=ng;var ig=Math.sqrt(50),og=Math.sqrt(10),ag=Math.sqrt(2),sg=(ug.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},ug.prototype.nice=function(t){void 0===t&&(t=5);var e,n=this._domain.slice(),r=0,i=this._domain.length-1,o=this._domain[r],a=this._domain[i];return a<o&&(o=(e=[a,o])[0],a=e[1],r=(e=[i,r])[0],i=e[1]),0<(e=cg(o,a,t))?e=cg(o=Math.floor(o/e)*e,a=Math.ceil(a/e)*e,t):e<0&&(e=cg(o=Math.ceil(o*e)/e,a=Math.floor(a*e)/e,t)),0<e?(n[r]=Math.floor(o/e)*e,n[i]=Math.ceil(a/e)*e,this.domain(n)):e<0&&(n[r]=Math.ceil(o*e)/e,n[i]=Math.floor(a*e)/e,this.domain(n)),this},ug.prototype.ticks=function(t){var e,n,r,i,o=this._domain[0],a=this._domain[this._domain.length-1],s=(t=(t=void 0===t?5:t)||5,-1);if(t=+t,(o=+o)==(a=+a)&&0<t)return[o];if((e=a<o)&&(n=o,o=a,a=n),0===(i=cg(o,a,t))||!isFinite(i))return[];if(0<i)for(o=Math.ceil(o/i),a=Math.floor(a/i),r=new Array(n=Math.ceil(a-o+1));++s<n;)r[s]=(o+s)*i;else for(o=Math.floor(o*i),a=Math.ceil(a*i),r=new Array(n=Math.ceil(o-a+1));++s<n;)r[s]=(o-s)/i;return e&&r.reverse(),r},ug);function ug(){this._domain=[0,1]}function cg(t,e,n){return e=(e-t)/Math.max(0,n),t=Math.floor(Math.log(e)/Math.LN10),n=e/Math.pow(10,t),0<=t?(ig<=n?10:og<=n?5:ag<=n?2:1)*Math.pow(10,t):-Math.pow(10,-t)/(ig<=n?10:og<=n?5:ag<=n?2:1)}function lg(t,e,n){return n="ceil"===n?Math.ceil(t/e):"floor"===n?Math.floor(t/e):Math.round(t/e),n*e}function hg(t,e,n){t=lg(t,n,"floor");for(var r=lg(e,n,"ceil"),i=(t=(0,w.fixedBase)(t,n),r=(0,w.fixedBase)(r,n),[]),o=Math.max((r-t)/(Math.pow(2,12)-1),n),a=t;a<=r;a+=o){var s=(0,w.fixedBase)(a,o);i.push(s)}return{min:t,max:r,ticks:i}}function fg(t,e,n){var r=t.minLimit,i=t.maxLimit,o=t.min,a=t.max,s=(t=t.tickCount,void 0===t?5:t),u=(0,w.isNil)(r)?(0,w.isNil)(e)?o:e:r;t=(0,w.isNil)(i)?(0,w.isNil)(n)?a:n:i;if(t<u&&(t=(o=[u,t])[0],u=o[1]),s<=2)return[u,t];for(var c=(t-u)/(s-1),l=[],h=0;h<s;h++)l.push(u+c*h);return l}function dg(t){return Math.abs(t)<1e-15?t:parseFloat(t.toFixed(15))}var pg=[1,5,2,2.5,4,3],gg=100*Number.EPSILON;function mg(t,e,n,r,i,o){void 0===r&&(r=!0),void 0===i&&(i=pg),void 0===o&&(o=[.25,.2,.5,.05]);var a,s=(n=void 0===n?5:n)<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||"number"!=typeof t||"number"!=typeof e||!s)return{min:0,max:0,ticks:[]};if(e-t<1e-15||1===s)return{min:t,max:e,ticks:[t]};if(1e148<e-t)return a=(e-t)/(P=n||5),{min:t,max:e,ticks:Array(P).fill(null).map((function(e,n){return dg(t+a*n)}))};for(var u,c,l,h,f,d,p,g,m,v={score:-2,lmin:0,lmax:0,lstep:0},y=1;y<1/0;){for(var b=0;b<i.length;b+=1){var x=i[b],_=(d=x,p=i,g=y,m=(m=void 0,w.size)(p),1-(0,w.indexOf)(p,d)/(m-1)-g+1);if(o[0]*_+o[1]+o[2]+o[3]<v.score){y=1/0;break}for(var S=2;S<1/0;){var E=(f=s)<=(M=S)?2-(M-1)/(f-1):1;if(o[0]*_+o[1]+o[2]*E+o[3]<v.score)break;for(var M=(e-t)/(S+1)/y/x,A=Math.ceil(Math.log10(M));A<1/0;){var C=y*x*Math.pow(10,A),T=(O=e,(O-=t)<(T=C*(S-1))?1-Math.pow((T-O)/2,2)/Math.pow(.1*O,2):1);if(o[0]*_+o[1]*T+o[2]*E+o[3]<v.score)break;var k=Math.floor(e/C)*y-(S-1)*y,O=Math.ceil(t/C)*y;if(k<=O)for(var P=O-k,I=0;I<=P;I+=1){var N=(k+I)*(C/y),D=N+C*(S-1),L=C,R=(u=x,R=i,F=y,c=N,l=D,h=L,j=(B=j=void 0,w.size)(R),R=(0,w.indexOf)(R,u),u=0,1-R/(j-1)-F+(u=((B=(c%h+h)%h)<gg||h-B<gg)&&c<=0&&0<=l?1:u)),B=(j=N,F=void 0,F=e-(h=t),1-.5*(Math.pow(e-D,2)+Math.pow(h-j,2))/Math.pow(.1*F,2)),j=(c=t,l=((l=S)-1)/(D-(u=N)),h=((h=s)-1)/(Math.max(D,e)-Math.min(c,u)),2-Math.max(l/h,h/l)),F=o[0]*R+o[1]*B+o[2]*j+ +o[3];v.score<F&&(!r||N<=t&&e<=D)&&(v.lmin=N,v.lmax=D,v.lstep=L,v.score=F)}A+=1}S+=1}}y+=1}n=dg(v.lmax);var z=dg(v.lmin),U=dg(v.lstep),G=Math.floor((n=(n-z)/U,Math.round(1e12*n)/1e12))+1,V=new Array(G);for(V[0]=dg(z),b=1;b<G;b++)V[b]=dg(V[b-1]+U);return{min:Math.min(t,(0,w.head)(V)),max:Math.max(e,(0,w.last)(V)),ticks:V}}function vg(t,e,n){if(t===e)return{max:e,min:t,ticks:[t]};if(n=(n=void 0===n?5:n)<0?0:Math.round(n),0===n)return{max:e,min:t,ticks:[]};n=(e-t)/n;for(var r=Math.pow(10,Math.floor(Math.log10(n))),i=r,o=(n=(2*r-n<1.5*(n-i)&&5*r-n<2.75*(n-(i=2*r))&&10*r-n<1.5*(n-(i=5*r))&&(i=10*r),Math.ceil(e/i)),r=Math.floor(t/i),n=Math.max(n*i,e),Math.min(r*i,t)),a=Math.floor((n-o)/i)+1,s=new Array(a),u=0;u<a;u++)s[u]=dg(o+u*i);return{min:o,max:n,ticks:s}}function yg(t){return new Date(t).getFullYear()}function bg(t){return new Date(t).getMonth()}Yd("cat",rg),Yd("time-cat",(function(t){return rg($d({showLast:!0},t))})),Yd("wilkinson-extended",(function(t){var e=t.min,n=t.max,r=t.tickCount,i=t.nice,o=t.tickInterval,a=t.minLimit,s=t.maxLimit;r=mg(e,n,r,i).ticks;return(0,w.isNil)(a)&&(0,w.isNil)(s)?o?hg(e,n,o).ticks:r:fg(t,(0,w.head)(r),(0,w.last)(r))})),Yd("r-pretty",(function(t){var e=t.min,n=t.max,r=t.tickCount,i=t.tickInterval,o=t.minLimit,a=t.maxLimit;r=vg(e,n,r).ticks;return(0,w.isNil)(o)&&(0,w.isNil)(a)?i?hg(e,n,i).ticks:r:fg(t,(0,w.head)(r),(0,w.last)(r))})),Yd("time",(function(t){for(var e=t.min,n=t.max,r=t.minTickInterval,i=t.tickInterval,o=(t=t.tickCount,i?t=Math.ceil((n-e)/i):(1<(t=(n-e)/(i=Np(e,n,t)[1])/t)&&(i*=Math.ceil(t)),r&&i<r&&(i=r)),i=Math.max(Math.floor((n-e)/(Math.pow(2,12)-1)),i),[]),a=e;a<n+i;a+=i)o.push(a);return o})),Yd("time-pretty",(function(t){var e,n=t.min,r=t.max,i=t.minTickInterval,o=t.tickCount,a=(t=t.tickInterval,[]),s=(t||(t=(r-n)/o,i&&t<i&&(t=i)),t=Math.max(Math.floor((r-n)/(Math.pow(2,12)-1)),t),yg(n));if(Pp<t)for(var u=yg(r),c=Math.ceil(t/Pp),l=s;l<=u+c;l+=c)a.push(new Date(l,0,1).getTime());else if(Op<t){var h=Math.ceil(t/Op),f=bg(n),d=(o=r,e=yg(i=n),M=yg(o),i=bg(i),12*(M-e)+(bg(o)-i)%12);for(l=0;l<=d+h;l+=h)a.push(new Date(s,l+f,1).getTime())}else if(kp<t){var p=(b=new Date(n)).getFullYear(),g=b.getMonth(),m=b.getDate(),v=Math.ceil(t/kp),y=Math.ceil((r-n)/kp);for(l=0;l<y+v;l+=v)a.push(new Date(p,g,m+l).getTime())}else if(Tp<t){p=(b=new Date(n)).getFullYear(),g=b.getMonth(),v=b.getDate();var b,x=b.getHours(),_=Math.ceil(t/Tp),w=Math.ceil((r-n)/Tp);for(l=0;l<=w+_;l+=_)a.push(new Date(p,g,v,x+l).getTime())}else if(6e4<t){var S=Math.ceil((r-n)/6e4),E=Math.ceil(t/6e4);for(l=0;l<=S+E;l+=E)a.push(n+6e4*l)}else{var M=t,A=(t<1e3&&(M=1e3),1e3*Math.floor(n/1e3)),C=Math.ceil((r-n)/1e3),T=Math.ceil(M/1e3);for(l=0;l<C+T;l+=T)a.push(A+1e3*l)}return a})),Yd("log",(function(t){for(var e=t.base,n=t.tickCount,r=t.min,i=t.max,o=(t=t.values,Gp(e,i)),a=(t=o-(i=0<r?Math.floor(Gp(e,r)):(t=Vp(t,e,i),Math.floor(Gp(e,t)))),Math.ceil(t/n)),s=[],u=i;u<o+a;u+=a)s.push(Math.pow(e,u));return r<=0&&s.unshift(0),s})),Yd("pow",(function(t){var e=t.exponent,n=t.tickCount,r=Math.ceil(Up(e,t.max));return vg(Math.floor(Up(e,t.min)),r,n).ticks.map((function(t){var n=0<=t?1:-1;return Math.pow(t,e)*n}))})),Yd("quantile",(function(t){var e=t.tickCount;if(!(t=t.values)||!t.length)return[];for(var n,r,i,o=t.slice().sort((function(t,e){return t-e})),a=[],s=0;s<e;s++)a.push((r=s/(e-1),i=void 0,i=(n=o).length*r,1===r?n[n.length-1]:0===r?n[0]:i%1!=0?n[Math.ceil(i)-1]:n.length%2==0?(n[i-1]+n[i])/2:n[i]));return a})),Yd("d3-linear",(function(t){var e,n,r,i,o=t.min,a=t.max,s=t.tickInterval,u=t.minLimit,c=t.maxLimit,l=(l=(e=t).min,n=e.max,r=e.nice,e=e.tickCount,(i=new sg).domain([l,n]),r&&i.nice(e),i.ticks(e));return(0,w.isNil)(u)&&(0,w.isNil)(c)?s?hg(o,a,s).ticks:l:fg(t,(0,w.head)(l),(0,w.last)(l))})),eg("cat",Qd),eg("category",Qd),eg("identity",np),eg("linear",zp),eg("log",lp),eg("pow",fp),eg("time",rp),eg("timeCat",ep),eg("quantize",hp),eg("quantile",yp);var xg=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function _g(t){return(0,w.map)(t,(function(t,e){return[0===e?"M":"L",t[0],t[1]]}))}function wg(t,e,n,r){void 0===r&&(r=!0);var i,o,a,s=new zp({values:t}),u=new Qd({values:(0,w.map)(t,(function(t,e){return e}))});t=(0,w.map)(t,(function(t,r){return[u.scale(r)*e,n-s.scale(t)*n]}));return r?(r=t).length<=2?_g(r):(i=[],(0,w.each)(r,(function(t){(0,w.isEqual)(t,i.slice(i.length-2))||i.push(t[0],t[1])})),o=qa(i,!1),a=(r=(0,w.head)(r))[0],r=r[1],o.unshift(["M",a,r]),o):_g(t)}function Sg(t,e,n,r){void 0===r&&(r=5);for(var i=new zp({values:t}),o=new Qd({values:(0,w.map)(t,(function(t,e){return e}))}),a=(0,w.map)(t,(function(t,r){return[o.scale(r)*e,n-i.scale(t)*n]})),s=[],u=0;u<a.length;u++){var c=a[u];c=function(t){var e,n,r=t.x,i=t.y,o=t.y0;t=t.size;return o=(0,w.isArray)(i)?(e=i[0],i[1]):(e=o,i),i=(0,w.isArray)(r)?(n=r[0],r[1]):(n=r-t/2,r+t/2),r=[{x:n,y:e},{x:n,y:o}],r.push({x:i,y:o},{x:i,y:e}),r}({x:c[0],y:c[1],y0:n,size:r});s.push.apply(s,c)}var l=s,h=(t=void 0,void 0===t&&(t=!0),[]),f=l[0];h.push(["M",f.x,f.y]);for(var d=1,p=l.length;d<p;d++)h.push(["L",l[d].x,l[d].y]);return t&&(h.push(["L",f.x,f.y]),h.push(["z"])),h}function Eg(t,e,n,r){var i;t=xg([],t,!0),r=new zp({values:r}),i=Math.max(0,r.min),r=n-r.scale(i)*n;return t.push(["L",e,r]),t.push(["L",0,r]),t.push(["Z"]),t}var Mg=function(){return(Mg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Ag={stroke:"#C5C5C5",strokeOpacity:.85},Cg={fill:"#CACED4",opacity:.85};function Tg(t){var e=t.x,n=(e=void 0===e?0:e,t.y),r=(n=void 0===n?0:n,t.width),i=(r=void 0===r?200:r,t.height),o=(i=void 0===i?26:i,t.smooth),a=(o=void 0===o||o,t.isArea),s=(a=void 0!==a&&a,t.data),u=(s=void 0===s?[]:s,t.lineStyle),c=t.areaStyle,l=t.group;t=t.interval,t=void 0===t?null:t;this.group=l,this.x=e,this.y=n,this.width=r,this.height=i,this.data=s,this.smooth=o,this.isArea=a,this.lineStyle=Object.assign({},Ag,u),this.areaStyle=Object.assign({},Cg,c),this.intervalConfig=t,this.renderLine()}Tg.prototype.renderLine=function(){var t=this,e=t.x,n=t.y,r=t.width,i=t.height,o=(t.barWidth,t.data),a=t.smooth,s=t.isArea,u=t.lineStyle,c=(t=t.areaStyle,this.group.addGroup({name:"trend-group"}));o&&(a=wg(o,r,i,a),c.addShape("path",{attrs:Mg({path:a},u),name:"trend-line"}),s)&&(u=Eg(a,r,i,o),c.addShape("path",{attrs:Mg({path:u},t),name:"trend-area"})),this.intervalConfig&&c.addShape("path",{attrs:Mg({path:Sg(this.intervalConfig.data,r,i,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),c.move(e,n)},Tg.prototype.destory=function(){this.group.destroy()};var kg=Tg,Og=function(){return(Og=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Pg={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Ig={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"};function Ng(t){var e=t.group,n=t.name,r=t.type,i=t.x,o=(i=void 0===i?0:i,t.y),a=(o=void 0===o?0:o,t.width),s=(a=void 0===a?2:a,t.height);s=void 0===s?24:s,t=t.style,t=void 0===t?{}:t;this.group=e,this.name=n,this.handleType=r,this.x=i,this.y=o,this.width=a,this.height=s,"trend"===r?this.style=Og(Og({},Pg),t):"simple"===r&&(this.style=Og(Og({},Ig),t)),this.renderHandle()}Ng.prototype.setX=function(t){this.setXY(t,void 0)},Ng.prototype.setY=function(t){this.setXY(void 0,t)},Ng.prototype.setXY=function(t,e){(0,w.isNumber)(t)&&(this.x=t),(0,w.isNumber)(e)&&(this.y=e),this.updateXY()},Ng.prototype.renderHandle=function(){var t=this.width,e=this.height,n=this.style,r=this.name,i=n.fill,o=n.stroke,a=n.radius,s=n.opacity;n=n.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:e,fill:i,stroke:o,radius:a,opacity:s,cursor:n},name:"".concat(r,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:i,stroke:o,radius:a,opacity:s,cursor:n,lineAppendWidth:12},name:"".concat(r,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e,r:2*t,fill:i,stroke:o,radius:a,opacity:s,cursor:n},name:"".concat(r,"-handler")})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:i,stroke:o,radius:a,opacity:s,cursor:n,lineWidth:2},name:"".concat(r,"-handler")})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},Ng.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),(function(){var e=t.style.highLightFill;t.topCircle.attr("fill",e)})),this.handleGroup.on("".concat(e,"-handler:mouseleave"),(function(){var e=t.style.fill;t.topCircle.attr("fill",e)}))},Ng.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),(function(){var e=t.style.highLightFill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)})),this.handleGroup.on("".concat(e,"-handler:mouseleave"),(function(){var e=t.style.fill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)}))},Ng.prototype.show=function(){this.handleGroup.show()},Ng.prototype.hide=function(){this.handleGroup.hide()},Ng.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])};var Dg=Ng,Lg="timebarstartplay",Rg="timebarendplay",Bg="valuechange",jg="timebarConfigChanged",Fg="playPauseBtn",zg="nextStepBtn",Ug="preStepBtn",Gg=function(){return(Gg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Vg(t){this.config=(0,w.deepMix)({},t),this.init()}Vg.prototype.update=function(t){this.config=(0,w.deepMix)({},this.config,t),this.updateElement(),this.renderMarker()},Vg.prototype.init=function(){this.initElement(),this.renderMarker()},Vg.prototype.initElement=function(){var t=this.config,e=t.group,n=(t=t.style,t.scale),r=(n=void 0===n?1:n,t.offsetX),i=t.offsetY,o=(r=this.config.x+(void 0===r?0:r),i=this.config.y+(void 0===i?0:i),e.addGroup({name:Fg}));this.startMarkerGroup=o.addGroup({name:Fg}),this.circle=e.addShape("circle",{attrs:Gg({x:r,y:i,r:this.config.r*n},t),name:Fg}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(r,i,n),fill:t.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=o.addGroup({name:Fg}),e=.25*this.config.r*n,o=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:r-.375*this.config.r*n,y:i-o/2,width:e,height:o,fill:t.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:r+1/8*this.config.r*n,y:i-o/2,width:e,height:o,fill:t.stroke||"#aaa",lineWidth:0}})},Vg.prototype.updateElement=function(){var t=this.config.style,e=t.scale,n=(e=void 0===e?1:e,t.offsetX),r=(t=t.offsetY,n=this.config.x+(void 0===n?0:n),t=this.config.y+(void 0===t?0:t),this.circle.attr("x",n),this.circle.attr("y",t),this.circle.attr("r",this.config.r*e),this.startMarker.attr("path",this.getStartMarkerPath(n,t,e)),.25*this.config.r*e),i=.5*this.config.r*Math.sqrt(3)*e;this.pauseLeftMarker.attr("x",n-.375*this.config.r*e),this.pauseLeftMarker.attr("y",t-i/2),this.pauseLeftMarker.attr("width",r),this.pauseLeftMarker.attr("height",i),this.pauseRightMarker.attr("x",n+1/8*this.config.r*e),this.pauseRightMarker.attr("y",t-i/2),this.pauseRightMarker.attr("width",r),this.pauseRightMarker.attr("height",i)},Vg.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},Vg.prototype.getStartMarkerPath=function(t,e,n){return n=.5*this.config.r*Math.sqrt(3)*n,[["M",t-n/Math.sqrt(3)/2,e-n/2],["L",t+n/Math.sqrt(3),e],["L",t-n/Math.sqrt(3)/2,e+n/2]]};var Wg=Vg,Hg=function(){return(Hg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Yg=L,qg={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Xg={fill:"#fff"},Kg={fill:"green"},Zg={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},$g={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},Jg={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:Zg,timeTypeControllerStyle:$g};function Qg(t){this.controllerCfg=(0,w.deepMix)({},Jg,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}Qg.prototype.init=function(){this.renderPlayButton()},Qg.prototype.getNextMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t+n,e],["L",t,e+n],["Z",t,e-n],["M",t,e],["L",t-n,e-n],["L",t-n,e+n],["Z"]]},Qg.prototype.getPreMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t-n,e],["L",t,e+n],["L",t,e-n],["M",t,e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]},Qg.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,n=t.height,r=t.x,i=t.y,o=t.hideTimeTypeController,a=t.fill,s=(a=void 0===a?"#aaa":a,t.stroke),u=(s=void 0===s?"green":s,t.containerStyle),c=(u=void 0===u?{}:u,Hg(Hg({},qg),t.playBtnStyle||{})),l=Hg(Hg({},Xg),t.preBtnStyle||{}),h=(t=Hg(Hg({},Kg),t.nextBtnStyle||{}),n/2-5);i+=10,r=this.controllerGroup.addShape("rect",{attrs:Hg({x:r,y:i,width:e,height:n,stroke:s,fill:a},u),name:"container-rect"}),this.playButton?this.playButton.update({x:e/2,y:i,r:h}):this.playButton=new Wg({group:this.controllerGroup,x:e/2,y:i+h+5,r:h,isPlay:this.isPlay,style:c}),n=l.offsetX||0,s=l.offsetY||0,a=(l.scale||1)*h,this.controllerGroup.addShape("path",{attrs:Hg({path:this.getPreMarkerPath(e/2-5*h+n,i+h+5+s,.5*a)},l),name:Ug}),u=t.offsetX||0,c=t.offsetY||0,n=(t.scale||1)*h,this.controllerGroup.addShape("path",{attrs:Hg({path:this.getNextMarkerPath(e/2+5*h+u,i+h+5+c,.5*n)},t),name:zg}),r.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent(),s=this.controllerCfg.scale,a=void 0===s?1:s,l=this.controllerGroup.getCanvasBBox(),e=(l.maxX+l.minX)/2,u=(l.maxY+l.minY)/2,i=Yg([1,0,0,0,1,0,0,0,1],[["t",-e,-u],["s",a,a],["t",e,u]]);this.controllerGroup.setMatrix(i)},Qg.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,n=t.width,r=t.hideTimeTypeController,i=(t=Hg(Hg({},Zg),this.controllerCfg.speedControllerStyle||{}),t.scroller),o=void 0===i?{}:i,a=(i=t.text,i=void 0===i?{}:i,t.pointer),s=(a=void 0===a?{}:a,t.scale),u=(s=void 0===s?1:s,t.offsetX),c=(u=void 0===u?0:u,t=t.offsetY,t=void 0===t?0:t,this.controllerGroup.addGroup({name:"speed-group"})),l=(this.speedGroup=c,[]),h=5;this.speedAxisY=[19,22,26,32,39];for(var f=0;f<5;f++){var d=e+this.speedAxisY[f],p=n-(r?50:110);c.addShape("line",{attrs:Hg({x1:p,x2:15+p,y1:d,y2:d},o),speed:h,name:"speed-rect"}),this.speedAxisY[f]=d,l.push(h),h-=1}this.speedText=c.addShape("text",{attrs:Hg({x:n-(r?50:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},i),name:"speed-text"}),this.speedPoint=c.addShape("path",{attrs:Hg({path:this.getPointerPath(n-(r?50:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},a),name:"speed-pointer"});i=this.speedGroup.getCanvasBBox(),a=(i.maxX+i.minX)/2,i=(i.maxY+i.minY)/2;var g=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];g=Yg(g,[["t",-a,-i],["s",s,s],["t",a+u*s,i+t*s]]);this.speedGroup.setMatrix(g)},Qg.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},Qg.prototype.renderToggleTime=function(){var t=this.controllerCfg.width,e=Hg(Hg({},$g),this.controllerCfg.timeTypeControllerStyle||{}),n=e.scale,r=(n=void 0===n?1:n,e.offsetX),i=(r=void 0===r?0:r,e.offsetY),o=(i=void 0===i?0:i,e.box),a=(o=void 0===o?{}:o,e.check);a=void 0===a?{}:a,e=e.text,e=void 0===e?{}:e,this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:Hg({x:t-50,y:this.speedAxisY[0]+3.5},o),isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:Hg({path:[["M",t-50+3,this.speedAxisY[1]+6],["L",t-50+7,this.speedAxisY[1]+10],["L",t-50+12,this.speedAxisY[1]+4]]},a),capture:!1,name:"check-icon"}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:Hg({text:(null==(o=this.controllerCfg)?void 0:o.timePointControllerText)||"单一时间",x:t-50+15,y:this.speedAxisY[0]+4,fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},e),name:"checked-text"}),a=this.toggleGroup.getCanvasBBox(),o=(a.maxX+a.minX)/2,t=(a.maxY+a.minY)/2,e=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1],e=Yg(e,[["t",-o,-t],["s",n,n],["t",o+r*n,t+i*n]]);this.toggleGroup.setMatrix(e)},Qg.prototype.bindEvent=function(){var t=this;this.speedGroup.on("speed-rect:click",(function(e){e=e.target.attr("y1");var n=t.speedPoint.attr("matrix"),r=t.speedAxisY.indexOf(n[7]||0);e=t.speedAxisY.indexOf(e),r=t.speedAxisY[e]-t.speedAxisY[r],n=Yg(n,[["t",0,r]]);t.speedPoint.setMatrix(n),t.currentSpeed=t.speedAxisY.length-e,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit(jg,{speed:t.currentSpeed,type:t.currentType})})),this.speedGroup.on("mousewheel",(function(e){e.preventDefault();var n,r=(o=t.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1])[7],i=t.speedAxisY.indexOf(r),o=(e=(-1===i&&(n=1/0,t.speedAxisY.forEach((function(t,e){t=Math.abs(t-r),t<n&&(n=t,i=e)}))),i=0<e.originalEvent.deltaY?Math.max(0,i-1):Math.min(t.speedAxisY.length-1,i+1),t.speedAxisY[i]-r),Yg(o,[["t",0,e]]));t.speedPoint.setMatrix(o),t.currentSpeed=t.speedAxisY.length-i,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit(jg,{speed:t.currentSpeed,type:t.currentType})})),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",(function(e){var n,r=e.target.get("isChecked");r?(t.checkedIcon.hide(),t.checkedText.attr("text",(null==(n=t.controllerCfg)?void 0:n.timePointControllerText)||"单一时间"),t.currentType="range"):(t.checkedIcon.show(),t.checkedText.attr("text",(null==(n=t.controllerCfg)?void 0:n.timeRangeControllerText)||"时间范围"),t.currentType="single"),e.target.set("isChecked",!r),t.group.emit(jg,{type:t.currentType,speed:t.currentSpeed})}))},Qg.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()};var tm=Qg,em=function(){return(em=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},nm=L,rm={fill:"#416180",opacity:.05},im={fill:"#416180",opacity:.15,radius:5},om={fill:"#5B8FF9",opacity:.3,cursor:"grab"},am={width:2,height:24},sm={textBaseline:"middle",fill:"#000",opacity:.45},um={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},cm={lineWidth:1,stroke:"#ccc"};function lm(t){var e=this,n=(this.prevX=0,this.onMouseDown=function(t){return function(n){e.currentHandler=t,n=n.originalEvent,n.stopPropagation(),n.preventDefault(),e.prevX=(0,w.get)(n,"touches.0.pageX",n.pageX),n=e.canvas.get("container"),n.addEventListener("mousemove",e.onMouseMove),n.addEventListener("mouseup",e.onMouseUp),n.addEventListener("mouseleave",e.onMouseUp),n.addEventListener("touchmove",e.onMouseMove),n.addEventListener("touchend",e.onMouseUp),n.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(t){t.stopPropagation(),t.preventDefault();t=(0,w.get)(t,"touches.0.pageX",t.pageX);var n=t-e.prevX;n=e.adjustOffsetRange(n/e.width);e.updateStartEnd(n),e.updateUI(),e.prevX=t},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var t=e.canvas.get("container");t&&(t.removeEventListener("mousemove",e.onMouseMove),t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mouseleave",e.onMouseUp),t.removeEventListener("touchmove",e.onMouseMove),t.removeEventListener("touchend",e.onMouseUp),t.removeEventListener("touchcancel",e.onMouseUp))},t.x),r=(n=void 0===n?0:n,t.y),i=(r=void 0===r?0:r,t.width),o=(i=void 0===i?100:i,t.height),a=t.padding,s=(a=void 0===a?10:a,t.trendCfg),u=t.controllerCfg,c=(u=void 0===u?{speed:1}:u,t.backgroundStyle),l=(c=void 0===c?{}:c,t.foregroundStyle),h=(l=void 0===l?{}:l,t.handlerStyle),f=(h=void 0===h?{}:h,t.textStyle),d=(f=void 0===f?{}:f,t.start),p=(d=void 0===d?0:d,t.end),g=(p=void 0===p?1:p,t.minText),m=(g=void 0===g?"":g,t.maxText),v=(m=void 0===m?"":m,t.group),y=t.graph,b=t.canvas,x=t.tick;x=void 0===x?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(t){return t},ticks:[]}:x,t=t.type;this.graph=y,this.canvas=b,this.group=v,this.timeBarType=t,this.x=n,this.y=r,this.width=i,this.height=o,this.padding=a,this.ticks=x.ticks,this.trendCfg=s,this.controllerCfg=u,this.currentSpeed=u.speed||1,this.tickLabelFormatter=x.tickLabelFormatter,"trend"===t?this.backgroundStyle=em(em({},rm),c):"simple"===t&&(this.backgroundStyle=em(em({},im),c)),this.foregroundStyle=em(em({},om),l),this.handlerStyle=em(em({},am),h),this.textStyle=em(em({},sm),f),this.tickLabelStyle=em(em({},um),x.tickLabelStyle),this.tickLineStyle=em(em({},cm),x.tickLineStyle),this.currentMode="range",this.start=d,this.end=p,this.minText=g,this.maxText=m,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}lm.prototype.update=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.minText,a=t.maxText,s=t.start;t=t.end;this.start=Math.min(1,Math.max(s,0)),this.end=Math.min(1,Math.max(t,0)),(0,w.assign)(this,{x:e,y:n,width:r,height:i,minText:o,maxText:a}),this.updateUI()},lm.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},lm.prototype.renderSlider=function(){var t=this,e=this.width,n=this.height,r=this.timeBarType,i=("trend"===r&&(0,w.size)((0,w.get)(this.trendCfg,"data"))&&(i=new kg(em(em({x:this.x,y:this.y,width:e,height:n},this.trendCfg),{group:this.group})),this.trendComponent=i),this.group.addGroup({name:"slider-group"})),o=(i.addShape("rect",{attrs:em({x:0,y:0,width:e,height:n},this.backgroundStyle),name:"background"}),this.group.addGroup()),a=(o=("trend"===r?(this.minTextShape=o.addShape("text",{attrs:em({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=o.addShape("text",{attrs:em({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=o.addShape("text",{attrs:em({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=o.addShape("text",{attrs:em({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:em({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",(function(t){t.target.attr("cursor","grabbing")})),this.foregroundShape.on("mouseup",(function(e){e.target.attr("cursor",t.foregroundStyle.cursor||"grab")})),(0,w.get)(this.handlerStyle,"width",2)),(0,w.get)(this.handlerStyle,"height",24)),s=this.group.addGroup({name:"minHandlerShape"}),u=(s=(this.minHandlerShape=new Dg({name:"minHandlerShape",group:s,type:r,x:this.x,y:this.y,width:o,height:a,style:this.handlerStyle}),this.group.addGroup({name:"maxHandlerShape"})),this.maxHandlerShape=new Dg({name:"maxHandlerShape",group:s,type:r,x:this.x,y:this.y,width:o,height:a,style:this.handlerStyle}),this.ticks),c=e/(u.length-1),l=(this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach((function(t){t.destroy()})),-1/0),h=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=u.map((function(e,r){t.tickPosList.push(t.x+r*c),t.tickLabelFormatter?(o=t.tickLabelFormatter(e),(0,w.isString)(o)||(o=o&&e.date)):o=e.date;e=t.x+r*c;var i=t.y+n+5,o=t.group.addShape("text",{attrs:em({x:e,y:i,text:o,fontFamily:t.fontFamily||"Arial, sans-serif"},t.tickLabelStyle),name:"tick-label"});(0,w.isNumber)(h)&&r!==u.length-1&&(e=nm([1,0,0,0,1,0,0,0,1],[["t",-e,-i],["r",h],["t",e-5,i+2]]),o.attr({textAlign:"left",matrix:e})),0===r?o.attr({textAlign:"left"}):r!==u.length-1&&o.attr({textAlign:"right"}),i=t.group.addShape("line",{attrs:em({x1:t.x+r*c,y1:t.y+n+2,x2:t.x+r*c,y2:t.y+n+6},t.tickLineStyle),name:"tick-line"}),i.toBack(),e=o.getBBox();return e.minX>l?(o.show(),i.show(),l=e.minX+e.width+10):(o.hide(),i.hide()),o})),this.controllerBtnGroup=new tm(em({group:this.group,x:this.x,y:this.y+n+25,width:e,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),i.move(this.x,this.y),this.bindEvents()},lm.prototype.bindEvents=function(){var t=this,e=this.group.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape))),e=this.group.find((function(t){return"maxHandlerShape"===t.get("name")}));e&&(e.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),e.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Fg,":click"),(function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()})),this.group.on("".concat(zg,":click"),(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()})),this.group.on("".concat(Ug,":click"),(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()})),this.group.on(jg,(function(e){var n=e.type;e=e.speed;t.currentSpeed=e,"single"===(t.currentMode=n)?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):"range"===n&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())}))},lm.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},lm.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:var e=0-this.start,n=1-this.start;return Math.min(n,Math.max(e,t));case this.maxHandlerShape:return e=0-this.end,n=1-this.end,Math.min(n,Math.max(e,t));case this.foregroundShape:return e=0-this.start,n=1-this.end,Math.min(n,Math.max(e,t));default:return 0}},lm.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(this.currentHandler)switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date}else this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):null==e?void 0:e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):null==n?void 0:n.date},lm.prototype.updateUI=function(){var t=this,e=(this.start<0&&(this.start=0),1<this.end&&(this.end=1),this.x+this.start*this.width),n=this.x+this.end*this.width,r=(this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",n-e),(0,w.get)(this.handlerStyle,"width",2)),i=(this.setText(this.minText,this.maxText),this.dodgeText([e,n])),o=i[0];i=i[1];this.minHandlerShape.setX(e-r/2),(0,w.each)(o,(function(e,n){return t.minTextShape.attr(n,e)})),this.maxHandlerShape.setX(n-r/2),(0,w.each)(i,(function(e,n){return t.maxTextShape.attr(n,e)})),"range"===this.currentMode?this.graph.emit(Bg,{value:[this.start,this.end].sort()}):"single"===this.currentMode&&this.graph.emit(Bg,{value:[this.end,this.end]})},lm.prototype.dodgeText=function(t){var e=(0,w.get)(this.handlerStyle,"width",2),n=this.minTextShape,r=this.maxTextShape,i=t[0],o=(t=t[1],!1),a=(t<i&&(i=(a=[t,i])[0],t=a[1],n=(a=[r,n])[0],r=a[1],o=!0),n.getBBox()),s=r.getBBox(),u=null,c=null;return"trend"===this.timeBarType?(u=i-a.width<this.x+2?{x:i+e/2+2,textAlign:"left"}:{x:i-e/2-2,textAlign:"right"},c=t+s.width>this.x+this.width?{x:t-e/2-2,textAlign:"right"}:{x:t+e/2+2,textAlign:"left"}):"simple"===this.timeBarType&&(u=n.attr("x")>a.width?{x:i,textAlign:"center"}:{x:i,textAlign:"left"},c=r.attr("x")>this.width-s.width?{x:t,textAlign:"right"}:{x:t,textAlign:"center"}),o?[c,u]:[u,c]},lm.prototype.startPlay=function(){var t=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var e=t.ticks,n=t.width,r=t.currentSpeed;n/=e.length,e=t.adjustOffsetRange(n/(1e3*(10-r)/60)/t.width);t.updateStartEnd(e),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())})):void 0},lm.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Lg,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t)&&this.graph.emit(Rg,null)},lm.prototype.destory=function(){this.graph.off(Bg,(function(){}));var t=this.group,e=t.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy()),e=t.find((function(t){return"maxHandlerShape"===t.get("name")}));e&&(e.off("maxHandlerShape-handler:mousedown"),e.off("maxHandlerShape-handler:touchstart"),e.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off("".concat(Fg,":click")),t.off("".concat(zg,":click")),t.off("".concat(Ug,":click")),t.off(jg),t.destroy(),this.trendComponent&&this.trendComponent.destory()};var hm=lm;function fm(t){var e=t.x,n=(e=void 0===e?0:e,t.y),r=(n=void 0===n?0:n,t.container),i=t.text,o=t.padding,a=(o=void 0===o?[4,4,4,4]:o,t.className),s=(a=void 0===a?"g6-component-timebar-tooltip":a,t.backgroundColor),u=(s=void 0===s?"#000":s,t.textColor),c=(u=void 0===u?"#fff":u,t.opacity);c=void 0===c?.8:c,t=t.fontSize,t=void 0===t?12:t;this.container=r,this.className=a,this.backgroundColor=s,this.textColor=u,this.x=e,this.y=n,this.text=i,this.padding=o,this.opacity=c,this.fontSize=t,this.render()}fm.prototype.render=function(){var t=this,e=t.className,n=(t.x,t.y,t.backgroundColor),r=t.textColor,i=t.text,o=t.padding,a=t.opacity,s=t.fontSize,u=t.container;e=td("<div class='".concat(e,"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: ").concat(a,'"></div>')),(u=(0,w.isString)(u)?document.getElementById(u):u).appendChild(e),t.parentHeight=u.offsetHeight,t.parentWidth=u.offsetWidth,ud(e,{visibility:"hidden",top:0,left:0}),a=td("\n      <div style='position: absolute; white-space:nowrap; background-color: ".concat(n,"; font-size: ").concat(s,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(r,"; padding: ").concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px'></div>")),a.innerHTML=i,e.appendChild(a),t.backgroundDOM=a,u=td("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(n,"'></div>"));e.appendChild(u),t.arrowDOM=u,t.container=e},fm.prototype.show=function(t){var e=this,n=t.text,r=t.x,i=(t=(t.y,t.clientX,t.clientY,e.backgroundDOM.innerHTML=n,e.backgroundDOM.offsetWidth),n=e.backgroundDOM.offsetHeight,e.arrowDOM.offsetWidth),o=e.arrowDOM.offsetHeight;ud(e.container,{top:"".concat(-n-o,"px"),left:"".concat(r,"px"),visibility:"visible"}),ud(e.backgroundDOM,{marginLeft:"".concat(-t/2,"px")}),ud(e.arrowDOM,{marginLeft:"".concat(-i/2,"px"),top:"".concat(n,"px")}),o=r-t/2,i=r+t/2;o<0?ud(e.backgroundDOM,{marginLeft:"".concat(-t/2-o,"px")}):i>e.parentWidth&&ud(e.backgroundDOM,{marginLeft:"".concat(-t/2-i+e.parentWidth+12,"px")})},fm.prototype.hide=function(){ud(this.container,{top:0,left:0,visibility:"hidden"})};var dm=fm,pm=function(){return(pm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},gm=L,mm={fill:"#5B8FF9"},vm={fill:"#e6e8e9"};function ym(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,n=t.canvas,r=t.group,i=t.width,o=t.height,a=t.padding,s=t.data,u=t.start,c=t.end,l=t.x,h=(l=void 0===l?0:l,t.y),f=(h=void 0===h?0:h,t.tickLabelFormatter),d=t.selectedTickStyle,p=(d=void 0===d?mm:d,t.unselectedTickStyle),g=(p=void 0===p?vm:p,t.tooltipBackgroundColor),m=t.tooltipFomatter;t=t.tickLabelStyle;this.graph=e,this.group=r,this.sliceGroup=r.addGroup({name:"slice-group"}),this.canvas=n,this.width=i,this.height=o,this.padding=a,this.data=s,this.start=u,this.end=c,this.tickLabelFormatter=f,this.tickLabelStyle=t||{},this.selectedTickStyle=d,this.unselectedTickStyle=p,this.x=l,this.y=h,this.tooltipBackgroundColor=g,this.tooltipFomatter=m,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}ym.prototype.renderSlices=function(){var t=this,e=this,n=e.width,r=e.height,i=e.padding,o=e.data,a=e.start,s=e.end,u=e.tickLabelFormatter,c=e.selectedTickStyle,l=e.unselectedTickStyle,h=e.tickLabelStyle,f=r-(3*i+4+10)-2*i,d=o.length,p=(n-2*i-2*(d-1))/d,g=(this.tickWidth=p,this.sliceGroup),m=[],v=[],y=Math.round(d*a),b=Math.round(d*s),x=(this.startTickRectId=y,this.endTickRectId=b,h.rotate);delete h.rotate,o.forEach((function(e,r){var o,a=g.addShape("rect",{attrs:pm({x:i+r*(2+p),y:i,width:p,height:f},y<=r&&r<=b?c:l),draggable:!0,name:"tick-rect-".concat(r)}),s=g.addShape("rect",{attrs:{x:i+r*p+2*(2*r-1)/2,y:i,width:0===r||r===d-1?1+p:2+p,height:f,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(r)}),_=(s.toFront(),a.getBBox()),S=(_.minX+_.maxX)/2;m.push({rect:a,pickRect:s,value:e.date,x:S,y:_.minY}),u?(o=u(e),(0,w.isString)(o)||(o=o&&e.date)):r%Math.round(d/10)==0&&(o=e.date),o&&(v.push(o),a=_.maxY+2*i,g.addShape("line",{attrs:{stroke:"#BFBFBF",x1:S,y1:a,x2:S,y2:a+4},name:"tick-line"}),(e=(r=g.addShape("text",{attrs:pm({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:S,y:s=a+4+i,textAlign:"center",text:o,textBaseline:"top",fontSize:10,fontFamily:t.fontFamily||"Arial, sans-serif"},h),capture:!1,name:"tick-label"})).getBBox()).maxX>n?r.attr("textAlign","right"):e.minX<0&&r.attr("textAlign","left"),(0,w.isNumber)(x)&&10!==v.length&&(_=gm([1,0,0,0,1,0,0,0,1],[["t",-S,-s],["r",x],["t",S-5,s+2]]),r.attr({textAlign:"left",matrix:_})),1===v.length?r.attr({textAlign:"left"}):10===v.length&&r.attr({textAlign:"right"}))})),this.tickRects=m,e=this.group;this.currentSpeed=1,this.controllerBtnGroup=new tm({group:e,x:this.x,y:this.y+r+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},ym.prototype.initEvent=function(){var t=this,e=this.sliceGroup,n=(e=(e.on("click",(function(e){var n,r,i;e=e.target;"rect"===e.get("type")&&e.get("name")&&(e=parseInt(e.get("name").split("-")[2],10),isNaN(e)||(n=t.tickRects,r=t.unselectedTickStyle,n.forEach((function(t){t.rect.attr(r)})),i=t.selectedTickStyle,n[e].rect.attr(i),t.startTickRectId=e,i=(t.endTickRectId=e)/n.length,t.graph.emit(Bg,{value:[i,i]})))})),e.on("dragstart",(function(e){var n=t.tickRects,r=t.unselectedTickStyle,i=(e=(n.forEach((function(t){t.rect.attr(r)})),e.target),e=parseInt(e.get("name").split("-")[2],10),t.selectedTickStyle);n[e].rect.attr(i),i=(t.startTickRectId=e)/n.length,t.graph.emit(Bg,{value:[i,i]}),t.dragging=!0})),e.on("dragover",(function(e){if(t.dragging&&"rect"===e.target.get("type")){for(var n=parseInt(e.target.get("name").split("-")[2],10),r=t.startTickRectId,i=t.tickRects,o=t.selectedTickStyle,a=t.unselectedTickStyle,s=0;s<i.length;s++)i[s].rect.attr(r<=s&&s<=n?o:a);e=i.length;var u=(t.endTickRectId=n,r/e);t.graph.emit(Bg,{value:[u,n/e]})}})),e.on("drop",(function(e){var n,r,i;t.dragging&&(t.dragging=!1,"rect"!==e.target.get("type")||(n=t.startTickRectId,(e=parseInt(e.target.get("name").split("-")[2],10))<n)||(i=t.selectedTickStyle,(r=t.tickRects)[e].rect.attr(i),t.endTickRectId=e,i=r.length,t.graph.emit(Bg,{value:[n/i,e/i]})))})),this.tooltipBackgroundColor),this.tooltipFomatter),r=this.canvas,i=new dm({container:r.get("container"),backgroundColor:e}),o=this.tickRects;o.forEach((function(t){t=t.pickRect,t.on("mouseenter",(function(t){var e;t=t.target;"rect"===t.get("type")&&(t=parseInt(t.get("name").split("-")[2],10),e=r.getClientByPoint(o[t].x,o[t].y),i.show({x:o[t].x,y:o[t].y,clientX:e.x,clientY:e.y,text:n?n(o[t].value):o[t].value}))})),t.on("mouseleave",(function(t){i.hide()}))})),e=this.group;e.on("".concat(Fg,":click"),(function(){t.isPlay=!t.isPlay,t.changePlayStatus()})),e.on("".concat(zg,":click"),(function(){t.updateStartEnd(1)})),e.on("".concat(Ug,":click"),(function(){t.updateStartEnd(-1)})),e.on(jg,(function(e){e.type,e=e.speed,t.currentSpeed=e}))},ym.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Lg,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t)&&this.graph.emit(Rg,null)},ym.prototype.startPlay=function(){var t=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var e=t.currentSpeed;t.frameCount%(60/e)==0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())})):void 0},ym.prototype.updateStartEnd=function(t){var e=this,n=this.tickRects,r=n.length,i=this.unselectedTickStyle,o=this.selectedTickStyle,a=e.endTickRectId;if(0<t?e.endTickRectId++:(n[e.endTickRectId].rect.attr(i),e.endTickRectId--),a!==e.startTickRectId)e.endTickRectId<e.startTickRectId&&(e.startTickRectId=e.endTickRectId);else{for(var s=e.startTickRectId;s<=e.endTickRectId-1;s++)n[s].rect.attr(i);e.startTickRectId=e.endTickRectId}n[e.endTickRectId]&&(n[e.endTickRectId].rect.attr(o),t=e.startTickRectId/r,a=e.endTickRectId/r,this.graph.emit(Bg,{value:[t,a]}))},ym.prototype.destory=function(){this.graph.off(Bg,(function(){}));var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach((function(t){t=t.pickRect,t.off("mouseenter"),t.off("mouseleave")})),this.tickRects.length=0,t.off("".concat(Fg,":click")),t.off("".concat(zg,":click")),t.off("".concat(Ug,":click")),t.off(jg),this.sliceGroup.destroy()};var bm=ym;xm=function(t,e){return(xm=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};var xm,_m,wm=function(){return(wm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Sm=function(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function Em(t){return _m.call(this,t)||this}var Mm=Em;n=_m=c;if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function Am(){this.constructor=Mm}xm(Mm,n),Mm.prototype=null===n?Object.create(n):(Am.prototype=n.prototype,new Am),Em.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{}}},Em.prototype.initContainer=function(){var t,e=this.get("graph"),n=this._cfgs,r=n.width,i=(n=n.height,this.get("className")||"g6-component-timebar"),o=this.get("container"),a=this.get("graph").get("container");o?t=o=(0,w.isString)(o)?document.getElementById(o):o:ud(t=td("<div class='".concat(i,"'></div>")),{position:"relative"}),a.appendChild(t),this.set("timeBarContainer",t),o=new("SVG"===e.get("renderer")?Hh:_l)({container:t,width:r,height:n}),this.get("containerCSS")&&ud(t,this.get("containerCSS")),this.set("canvas",o)},Em.prototype.init=function(){this.initContainer();var t=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",t),this.renderTrend(),this.initEvent(),t="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",t)},Em.prototype.renderTrend=function(){function t(){var e=n.get("timebar");e.draggingHandler=!1,e.isPlay&&(e.isPlay=!1,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()),document.removeEventListener("mouseup",t)}var e,n=this,r=this._cfgs,i=r.width,o=r.x,a=r.y,s=r.padding,u=r.type,c=r.trend,l=r.slider,h=r.controllerCfg,f=r.textStyle,d=r.tick,p=r.backgroundStyle,g=(r=r.foregroundStyle,c.data),m=(c=Sm(c,["data"]),i-2*s),v="trend"===u?26:4,y=this.get("graph"),b=this.get("timeBarGroup"),x=this.get("canvas"),_=null;"trend"===u||"simple"===u?(e=this.get("getValue"),_=new hm(wm(wm({graph:y,canvas:x,group:b,type:u,x:o+s,y:"trend"===u?a+s:a+s+15,width:m,height:v,padding:s,backgroundStyle:p,foregroundStyle:r,trendCfg:wm(wm({},c),{data:g.map((function(t){return(null==e?void 0:e(t))||t.value}))})},l),{tick:{ticks:g,tickLabelFormatter:d.tickLabelFormatter,tickLabelStyle:d.tickLabelStyle,tickLineStyle:d.tickLineStyle},handlerStyle:wm(wm({},l.handlerStyle),{height:l.height||v}),controllerCfg:h,textStyle:f}))):"tick"===u&&(_=new bm(wm({graph:y,canvas:x,group:b,x:o+s,y:a+s,width:i,height:42,padding:2},d))),x.on("mousedown",(function(e){"maxHandlerShape-handler"!==e.target.get("name")&&"minHandlerShape-handler"!==e.target.get("name")&&e.target!==_.foregroundShape||document.addEventListener("mouseup",t)})),this.set("timebar",_)},Em.prototype.filterData=function(t){t=t.value;var e,n,r,i,o,a,s,u,c,l,h=null,f=this._cfgs.type;"trend"===f||"simple"===f?h=this._cfgs.trend.data:"tick"===f&&(h=this._cfgs.tick.data),h&&0!==h.length&&(i=this.get("rangeChange"),e=this.get("graph"),r=Math.round(h.length*t[0]),n=(n=Math.round(h.length*t[1]))>=h.length?h.length-1:n,r=r>=h.length?h.length-1:r,c=(t=null==(t=this._cfgs.tick)?void 0:t.tickLabelFormatter)?t(h[r]):h[r].date,t=t?t(h[n]):h[n].date,"tick"!==f&&this.get("timebar").setText(c,t),i?i(e,c,t):((!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=e.get("data")),f=this.get("filterItemTypes"),i=this.get("changeData"),o=this.get("getDate"),a=this.get("shouldIgnore"),s=h[r].date,u=h[n].date,i||void 0===i?(c=this.cacheGraphData.nodes,t=this.cacheGraphData.edges,f.includes("node")&&(l=(c=c.filter((function(t){var e=+((null==o?void 0:o(t))||t.date);return s<=e&&e<=u||(null==a?void 0:a("node",t,{min:s,max:u}))}))).map((function(t){return t.id})),t=t&&t.filter((function(t){return l.includes(t.source)&&l.includes(t.target)||(null==a?void 0:a("edge",t,{min:s,max:u}))}))),(this.get("filterEdge")||f.includes("edge"))&&(t=t.filter((function(t){var e=+((null==o?void 0:o(t))||t.date);return s<=e&&e<=u||(null==a?void 0:a("edge",t,{min:s,max:u}))}))),e.changeData({nodes:c,edges:t})):(f.includes("node")&&e.getNodes().forEach((function(t){var n=t.getModel();null!=a&&a("node",n,{min:s,max:u})||((n=+((null==o?void 0:o(n))||n.date))<s||u<n?e.hideItem(t):e.showItem(t))})),(this.get("filterEdge")||f.includes("edge"))&&e.getEdges().forEach((function(t){var i=t.getModel();null!=a&&a("edge",i,{min:h[r].date,max:h[n].date})||((i=+((null==o?void 0:o(i))||i.date))<h[r].date||i>h[n].date?e.hideItem(t):e.showItem(t))})))))},Em.prototype.initEvent=function(){var t=this,e=0,n=0,r=this._cfgs.type;r&&"trend"!==r&&"simple"!==r?"tick"===r&&(e=this._cfgs.tick.start,n=this._cfgs.tick.end):(e=this._cfgs.slider.start,n=this._cfgs.slider.end),r=this.get("graph");r.on("afterrender",(function(r){t.filterData({value:[e,n]})})),r.on(Bg,(0,w.throttle)((function(e){t.filterData(e)}),200,{trailing:!0,leading:!0}))},Em.prototype.destroy=function(){var t,e=this.get("timebar");e&&e.destory&&e.destory(),_m.prototype.destroy.call(this),e=this.get("timeBarContainer");e&&(t=(t=this.get("container"))||this.get("graph").get("container"),(t=(0,w.isString)(t)?document.getElementById(t):t).removeChild(e))};np=Em,Cm=function(t,e){return(Cm=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},lp=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Cm(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var Cm,Tm,km=Bu.applyMatrix;function Om(t){return Tm.call(this,t)||this}lp(Om,Tm=c),Om.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},Om.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},Om.prototype.disableRefresh=function(){this.set("refresh",!1)},Om.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},Om.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},Om.prototype.initViewport=function(){var t,e,n,r,i,o,a,s,u,c,l,h=this,f=this._cfgs,d=f.graph;this.destroyed||(t=this.get("container"),(0,w.isString)(t)&&(t=document.getElementById(t)),e=td("<div class=".concat(f.viewportClassName,"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff;\n        cursor:move'\n      </div>")),i=!1,l=c=u=s=a=o=r=n=0,t.addEventListener("mousedown",(function(t){var o,a;f.refresh=!1,t.target!==e||(o=e.style,s=parseInt(o.width,10),u=parseInt(o.height,10),o=h.get("width"),a=h.get("height"),o<s)||a<u||(l=d.getZoom(),c=h.get("ratio"),i=!0,n=t.clientX,r=t.clientY)}),!1),t.addEventListener("mousemove",(function(t){var f,p,g,m;!i||(0,w.isNil)(t.clientX)||(0,w.isNil)(t.clientY)||(f=h.get("width"),p=h.get("height"),g=e.style,o=parseInt(g.left,10),a=parseInt(g.top,10),s=parseInt(g.width,10),u=parseInt(g.height,10),g=n-t.clientX,m=r-t.clientY,o-g<0?g=o:f<=o-g+s&&(g=0),a-m<0?m=a:p<=a-m+u&&(m=0),a-=m,ud(e,{left:"".concat(o-=g,"px"),top:"".concat(a,"px")}),d.translate(g*l/c,m*l/c),n=t.clientX,r=t.clientY)}),!1),t.addEventListener("mouseleave",(function(){i=!1,f.refresh=!0}),!1),t.addEventListener("mouseup",(function(){i=!1,f.refresh=!0}),!1),this.set("viewport",e),t.appendChild(e))},Om.prototype.updateViewport=function(){var t,e,n,r,i,o,a,s,u,c,l;this.destroyed||(t=this.get("ratio"),e=this.get("width"),n=this.get("height"),c=(u=(o=this.get("graph")).get("width"))/o.get("height"),a=[((s=(r=o.getGroup()).getCanvasBBox()).minX+s.maxX)/2,(s.minY+s.maxY)/2],i=[s.maxX-s.minX,s.maxY-s.minY],l={centerX:a[0],centerY:a[1],width:0,height:0,minX:0,minY:0},s[0]/s[1]>c?(l.width=i[0],l.height=l.width/c):(l.height=i[1],l.width=l.height*c),l.minX=a[0]-l.width/2,l.minY=a[1]-l.height/2,s=(s=r.getMatrix())||[1,0,0,0,1,0,0,0,1],i=D.invert([1,0,0,0,1,0,0,0,1],s),c=km({x:l.minX,y:l.minY},i),a=o.getCanvasByPoint(c.x,c.y),(r=this.get("viewport"))||this.initViewport(),c=(s=e*-a.x/l.width)+(o=(i=u/l.width)*e),l=(u=n*-a.y/l.height)+(a=i*n),s<0&&(o+=s,s=0),e<c&&(o-=c-e),u<0&&(a+=u,u=0),n<l&&(a-=l-n),this.set("ratio",t),ud(r,{left:"".concat(s,"px"),top:"".concat(u,"px"),width:"".concat(o,"px"),height:"".concat(a,"px")}))},Om.prototype.init=function(){this.initContainer()},Om.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=e.get("width"),r=(n=e.get("height")/n,t.get("className")),i=t.get("container"),o=t.get("width"),a=t.get("height");(o=o||a?o:200)?t.set("height",a=n*o):t.set("width",o=1/n*a),n=td("<div class='".concat(r,"' style='width: ").concat(o,"px; height: ").concat(a,"px; overflow: hidden; position: relative;'></div>")),((i=(0,w.isString)(i)?document.getElementById(i):i)||e.get("container")).appendChild(n),t.set("container",n),r=td('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>'),n.appendChild(r),o=td('<span style="display: table-cell; vertical-align: middle; "></span>'),r.appendChild(o),t.set("containerDOM",r),t.set("containerSpan",o),a=td('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",a),t.updateImgSize(),o.appendChild(a),t.updateCanvas()},Om.prototype.updateImgSize=function(){var t=this.get("imgDOM"),e=this.get("width"),n=this.get("height");t.onload=function(){(s=t).naturalWidth?(i=s.naturalWidth,o=s.naturalHeight):((a=new Image).src=s.src,a.onload=function(){r&&r(a.width,a.height)});var r,i,o,a,s=[i,o];s[1]<s[0]?t.width=e:t.height=n}},Om.prototype.updateCanvas=function(){var t,e;!this.get("refresh")||(e=this.get("graph")).get("destroyed")||(this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport()),t=this.get("width"),e=e.get("canvas").getCanvasBBox().width,this.set("ratio",t/e),this.updateViewport())},Om.prototype.getViewport=function(){return this.get("viewport")},Om.prototype.getContainer=function(){return this.get("container")},Om.prototype.updateGraphImg=function(t){this.get("imgDOM").remove(),this.set("graphImg",t);var e=td('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));this.set("imgDOM",e),e.src=t,this.updateImgSize(),this.get("containerSpan").appendChild(e),this.updateCanvas()},Om.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)};fp=Om,Pm=function(t,e){return(Pm=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},rp=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Pm(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var Pm,Im,Nm=function(){return(Nm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Dm=Bu.distance,Lm={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"};function Rm(t){return Im.call(this,t)||this}rp(Rm,Im=c),Rm.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,w.clone)(Lm),showLabel:"edge",scaleRBy:"wheel"}},Rm.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"}}return t},Rm.prototype.init=function(){var t=this.get("showLabel"),e="edge"===t||"both"===t;this.set("showNodeLabel","node"===t||"both"===t),this.set("showEdgeLabel",e),this.get("shouldShow")||this.set("shouldShow",(function(){return!0}))},Rm.prototype.createDelegate=function(t){var e=this,n=e.get("delegate");n&&!n.destroyed||(e.filter(t),(n=e.get("delegate")).on("dragstart",(function(t){})),n.on("drag",(function(t){e.filter(t)})),"wheel"===this.get("scaleRBy")&&n.on("mousewheel",(function(t){e.scaleRByWheel(t)})))},Rm.prototype.scaleRByWheel=function(t){var e,n,r,i,o;t&&t.originalEvent&&(t.preventDefault&&t.preventDefault(),e=this.get("graph"),((n=this.get("delegate"))?{x:n.attr("x"),y:n.attr("y")}:void 0)||e.getPointByClient(t.clientX,t.clientY),n=t.originalEvent.wheelDelta<0?.95:1/.95,r=this.get("maxR"),i=this.get("minR"),((o=this.get("r"))>(r||e.get("height"))&&1<n||o<(i||.05*e.get("height"))&&n<1)&&(n=1),this.set("r",o*=n),this.filter(t))},Rm.prototype.filter=function(t){var e=this.get("graph"),n=e.getNodes(),r={},i=this.get("r"),o=this.get("type"),a={x:t.x,y:t.y},s=(this.updateDelegate(a,i),this.get("shouldShow")),u=this.get("vShapes"),c=(t=(u&&u.forEach((function(t){t.remove(),t.destroy()})),u=[],n.forEach((function(t){var e=t.getModel(),n=e.x,o=e.y;Dm({x:n,y:o},a)<i&&(r[e.id]=t)})),e.getEdges()),[]),l=(t.forEach((function(t){var e=t.getModel(),n=e.source,i=e.target;s(e)&&("only-source"===o||"one"===o?r[n]&&!r[i]&&c.push(t):"only-target"===o||"one"===o?r[i]&&!r[n]&&c.push(t):"both"===o&&r[n]&&r[i]&&c.push(t))})),this.get("showNodeLabel")),h=this.get("showEdgelabel"),f=e.get("group");c.forEach((function(t){t.get("group").get("children").forEach((function(t){var e=t.get("type");t=f.addShape(e,{attrs:t.attr()});u.push(t),l&&"text"===e&&t.set("visible",!0)}))})),Object.keys(r).forEach((function(t){if(t=r[t].get("group").clone(),f.add(t),u.push(t),h)for(var e=t.get("children"),n=0;n<e.length;n++){var i=e[n];"text"===i.get("type")&&i.set("visible",!0)}})),this.set("vShapes",u)},Rm.prototype.updateParams=function(t){var e=this,n=t.r,r=t.trigger,i=t.minR,o=t.maxR,a=t.scaleRBy,s=t.showLabel,u=t.shouldShow;isNaN(t.r)||e.set("r",n),isNaN(o)||e.set("maxR",o),isNaN(i)||e.set("minR",i),"mousemove"!==r&&"click"!==r||e.set("trigger",r),("wheel"===a||"unset"===a)&&(e.set("scaleRBy",a),e.get("delegate").remove(),e.get("delegate").destroy(),t=e.get("dPercentText"))&&(t.remove(),t.destroy()),"node"!==s&&"both"!==s||e.set("showNodeLabel",!0),"edge"!==s&&"both"!==s||e.set("showEdgeLabel",!0),u&&e.set("shouldShow",u)},Rm.prototype.updateDelegate=function(t,e){var n,r=this,i=r.get("graph"),o=r.get("delegate");!o||o.destroyed?(i=i.get("group"),n=r.get("delegateStyle")||Lm,o=i.addShape("circle",{attrs:Nm({r:e,x:t.x,y:t.y},n),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&o.on("mousewheel",(function(t){r.scaleRByWheel(t)}))):o.attr({x:t.x,y:t.y,r:e}),r.set("delegate",o)},Rm.prototype.clear=function(){var t=this.get("vShapes");t&&t.forEach((function(t){t.remove(),t.destroy()})),this.set("vShapes",t=[]),t=this.get("delegate");t&&!t.destroyed&&(t.remove(),t.destroy())},Rm.prototype.destroy=function(){this.clear()};ep=Rm,Bm=function(t,e){return(Bm=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},hp=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Bm(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var Bm,jm,Fm=Bu.pointLineDistance,zm={stroke:"#FA8C16",lineWidth:1};function Um(t){return jm.call(this,t)||this}hp(Um,jm=c),Um.prototype.getDefaultCfgs=function(){return{line:zm,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},Um.prototype.init=function(){},Um.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},Um.prototype.onDragStart=function(){this.initBoxLine()},Um.prototype.onDrag=function(t){t=t.item;var e=(t.get("delegateShape")||t).getBBox(),n=(t=t.getModel(),t.x-e.x);t=t.y-e.y;this.show({x:e.minX+n,y:e.minY+t},{width:e.width,height:e.height})},Um.prototype.onDragEnd=function(){this.destory()},Um.prototype.initBoxLine=function(){var t=this._cfgs,e=t.horizontalLines,n=t.verticalLines,r=t.itemAlignType;this.get("graph").getNodes().forEach((function(t){var i=t.getBBox(),o=t.get("id");!0===r||"horizontal"===r?(e["".concat(o,"tltr")]=[i.minX,i.minY,i.maxX,i.minY,t],e["".concat(o,"lcrc")]=[i.minX,i.centerY,i.maxX,i.centerY,t],e["".concat(o,"blbr")]=[i.minX,i.maxY,i.maxX,i.maxY,t]):"center"===r&&(e["".concat(o,"lcrc")]=[i.minX,i.centerY,i.maxX,i.centerY,t]),!0===r||"vertical"===r?(n["".concat(o,"tlbl")]=[i.minX,i.minY,i.minX,i.maxY,t],n["".concat(o,"tcbc")]=[i.centerX,i.minY,i.centerX,i.maxY,t],n["".concat(o,"trbr")]=[i.maxX,i.minY,i.maxX,i.maxY,t]):"center"===r&&(n["".concat(o,"tcbc")]=[i.centerX,i.minY,i.centerX,i.maxY,t])}))},Um.prototype.show=function(t,e){var n=(0,w.mix)({},t);return this.itemAlign(t,e,n),t},Um.prototype.itemAlign=function(t,e,n){var r=this,i=this._cfgs,o=i.horizontalLines,a=i.verticalLines,s=(i=i.tolerance,{x:n.x+e.width/2,y:n.y}),u={x:n.x+e.width/2,y:n.y+e.height/2},c={x:n.x+e.width/2,y:n.y+e.height},l={x:n.x,y:n.y+e.height/2},h={x:n.x+e.width,y:n.y+e.height/2},f=[],d=[],p=null;if(this.clearAlignLine(),(0,w.each)(o,(function(t){t[4].isVisible&&(f.push(r.getLineDisObject(t,s)),f.push(r.getLineDisObject(t,u)),f.push(r.getLineDisObject(t,c)))})),(0,w.each)(a,(function(t){t[4].isVisible&&(d.push(r.getLineDisObject(t,l)),d.push(r.getLineDisObject(t,u)),d.push(r.getLineDisObject(t,h)))})),f.sort((function(t,e){return t.dis-e.dis})),d.sort((function(t,e){return t.dis-e.dis})),0!==f.length&&f[0].dis<i){t.y=f[0].line[1]-f[0].point.y+n.y;p={type:"item",horizontals:[f[0]]};for(var g=1;g<3;g++)f[0].dis===f[g].dis&&p.horizontals.push(f[g])}if(0!==d.length&&d[0].dis<i)for(t.x=d[0].line[0]-d[0].point.x+n.x,p?p.verticals=[d[0]]:p={type:"item",verticals:[d[0]]},g=1;g<3;g++)d[0].dis===d[g].dis&&p.verticals.push(d[g]);p&&(p.bbox=e,this.addAlignLine(p))},Um.prototype.addAlignLine=function(t){var e=t.bbox,n=t.type,r=t.horizontals,i=(t=t.verticals,this._cfgs),o=i.line,a=i.alignLines,s=this.get("graph").get("group");"item"===n&&(r&&(0,w.each)(r,(function(t){var n=t.line,r=(t=t.point,(n[0]+n[2])/2),i=(r=t.x<r?(i=t.x-e.width/2,Math.max(n[0],n[2])):(i=t.x+e.width/2,Math.min(n[0],n[2])),t=(0,w.mix)({x1:i,y1:n[1],x2:r,y2:n[1]},o),s.addShape("line",{attrs:t,capture:!1}));a.push(i)})),t)&&(0,w.each)(t,(function(t){var n=t.line,r=(t=t.point,(n[1]+n[3])/2),i=(r=t.y<r?(i=t.y-e.height/2,Math.max(n[1],n[3])):(i=t.y+e.height/2,Math.min(n[1],n[3])),t=(0,w.mix)({x1:n[0],y1:i,x2:n[0],y2:r},o),s.addShape("line",{attrs:t,capture:!1}));a.push(i)}))},Um.prototype.getLineDisObject=function(t,e){return{line:t,point:e,dis:Fm(t,e)}},Um.prototype.getContainer=function(){return this.get("container")},Um.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,w.each)(t,(function(t){t.remove()})),t.length=0},Um.prototype.destory=function(){var t=this._cfgs,e=t.horizontalLines,n=t.verticalLines;this.get("graph").getNodes().forEach((function(t){t=t.get("id"),delete e["".concat(t,"tltr")],delete e["".concat(t,"lcrc")],delete e["".concat(t,"blbr")],delete n["".concat(t,"tlbl")],delete n["".concat(t,"tcbc")],delete n["".concat(t,"trbr")]})),this.clearAlignLine()},yp=Um,Gm=function(t,e){return(Gm=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};var Gm,Vm,Wm=function(){return(Wm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Hm=["click","mouseenter"];function Ym(t){return Vm.call(this,t)||this}var qm=Ym;n=Vm=c;if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function Xm(){this.constructor=qm}function Km(t,e,n,r,i){return gv(t,e)+gv(t,n)+(o=t,a=0,[e,n,r,i].forEach((function(t){t&&(o.x===t.x&&(a+=-2),o.y===t.y)&&(a+=-2)})),a);var o,a}function Zm(t,e,n,r,i){void 0===i&&(i=0),t.unshift(e[r]),n[r]&&n[r]!==r&&i<=100&&Zm(t,e,n,n[r],i+1)}function $m(t,e,n,r){var i=n.x-t.x,o=n.y-t.y,a=r.x-t.x,s=(t=r.y-t.y,n.x-e.x),u=(n=n.y-e.y,r.x-e.x);r=r.y-e.y;return(i*t-o*a)*(s*r-n*u)<=0&&(i*n-o*s)*(a*r-t*u)<=0}function Jm(t,e){var n=[],r=t[0];return n.push("M".concat(r.x," ").concat(r.y)),t.forEach((function(r,i){var o,a,s,u,c=t[i+1];i=t[i+2];c&&i?(s=c,u=i,(a=r).x===s.x&&s.x===u.x||a.y===s.y&&s.y===u.y?n.push("L".concat(c.x," ").concat(c.y)):(a=i,s=e,r=gv(u=r,i=c),o=gv(a,i),u=(r=[{x:i.x-(s=o<(s=r<s?r:s)?o:s)/r*(i.x-u.x),y:i.y-s/r*(i.y-u.y)},{x:i.x-s/o*(i.x-a.x),y:i.y-s/o*(i.y-a.y)}])[1],n.push("L".concat((s=r[0]).x," ").concat(s.y)),n.push("Q".concat(c.x," ").concat(c.y," ").concat(u.x," ").concat(u.y)),n.push("L".concat(u.x," ").concat(u.y)))):c&&n.push("L".concat(c.x," ").concat(c.y))})),n.join("")}function Qm(t,e,n,r,i){n&&n.getType()?"combo"===n.getType()?((o=n.getKeyShape().getCanvasBBox()||ov(t)).centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2):o=n.getBBox():o=ov(t),r&&r.getType()?"combo"===r.getType()?(n=r.getKeyShape().getBBox())?((a={x:a=(c=r.getModel()).x,y:c=c.y,width:n.width,height:n.height,minX:n.minX+a,maxX:n.maxX+a,minY:n.minY+c,maxY:n.maxY+c}).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2):a=ov(e):a=r&&r.getBBox():a=ov(e);var o,a,s=cv(o,i),u=cv(a,i),c=(n=lv(s,t,e),lv(u,e,t)),l=(r=av([n,c]),i=hv(s,r),hv(u,r)),h=(h=[]).concat(fv(i)).concat(fv(l)),f={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return[r,i,l].forEach((function(t){h=h.concat(pv(t,f).filter((function(t){return dv(t,s)&&dv(t,u)})))})),[{x:n.x,y:c.y},{x:c.x,y:n.y}].forEach((function(t){dv(t,s)&&dv(t,u)&&h.push(t)})),h.unshift(n),h.push(c),h=sv(h),(r=vv(h,n,c,o,a,t,e)).unshift(t),r.push(e),uv(r)}function tv(t,e,n){for(var r=1/0,i=0,o=e.length;i<o;i++){var a=n(t,e[i]);a<r&&(r=a)}return r}function ev(t,e,n,r,i){var o=[];if(!n)return[t];var a=i.directions,s=i.offset,u=n.getBBox(),c=(n=e.x>u.minX&&e.x<u.maxX&&e.y>u.minY&&e.y<u.maxY,cv(u,s));for(p in c)c[p]=bv(c[p],i.gridSize);if(n){for(var l=0,h=a;l<h.length;l++)for(var f=h[l],d=[[{x:c.minX,y:c.minY},{x:c.maxX,y:c.minY}],[{x:c.minX,y:c.minY},{x:c.minX,y:c.maxY}],[{x:c.maxX,y:c.minY},{x:c.maxX,y:c.maxY}],[{x:c.minX,y:c.maxY},{x:c.maxX,y:c.maxY}]],p=0;p<4;p++){var g=d[p];g=Bu.getLineIntersect(t,{x:t.x+f.stepX*c.width,y:t.y+f.stepY*c.height},g[0],g[1]);g&&!mv(t,g,u)&&(g.id="".concat(g.x,"|||").concat(g.y),o.push(g))}return o}return(e=lv(c,t,r)).id="".concat(e.x,"|||").concat(e.y),[e]}function nv(t,e,n,r,i){if(isNaN(t.x)||isNaN(e.x))return[];for(var o,a,s,u=(0,w.deepMix)(yv,i),c=(u.obstacles=u.obstacles||[],u.gridSize),l=(i=u.obstacles.concat([n,r]),o=c,a=u.offset,s={},i.forEach((function(t){if(t)for(var e=cv(t.getBBox(),a),n=bv(e.minX,o);n<=bv(e.maxX,o);n+=1)for(var r=bv(e.minY,o);r<=bv(e.maxY,o);r+=1)s["".concat(n,"|||").concat(r)]=!0})),s),h={x:bv(t.x,c),y:bv(t.y,c)},f={x:bv(e.x,c),y:bv(e.y,c)},d=(t.id="".concat(h.x,"|||").concat(h.y),e.id="".concat(f.x,"|||").concat(f.y),ev(h,t,n,f,u)),p=ev(f,e,r,h,u),g=(d.forEach((function(t){delete l[t.id]})),p.forEach((function(t){delete l[t.id]})),{}),m={},v={},y={},b={},x=0;x<d.length;x++){var _=d[x];y[(g[_.id]=_).id]=0,b[_.id]=tv(_,p,u.distFunc)}for(var S,E,M,A,C=u.maximumLoops,T=u.penalties;0<Object.keys(g).length&&0<C&&(S=void 0,E=1/0,Object.keys(g).forEach((function(t){t=g[t].id,b[t]<=E&&(E=b[t],S=g[t])})),S);){if(-1<p.findIndex((function(t){return t.x===S.x&&t.y===S.y}))){var k=S,O=v,P=h,I=e,N=t,D=f,L=c,R=[I],B=k.id,j=k.x,F=k.y;for(wv(k={x:j,y:F,id:B},D,O,P)&&R.unshift({x:D.x===I.x?I.x:k.x*L,y:D.y===I.y?I.y:k.y*L});O[B]&&O[B].id!==B;){var z={x:j,y:F,id:B},U=O[B].id,G=O[B].x,V=O[B].y,W={x:G,y:V,id:U};wv(W,z,O,P)&&R.unshift({x:W.x===z.x?R[0].x:W.x*L,y:W.y===z.y?R[0].y:W.y*L}),B=U,j=G,F=V}return D=j,I=F,R[0].x=(D===P.x?N:R[0]).x,R[0].y=(I===P.y?N:R[0]).y,R.unshift(N),R}for(delete g[S.id],m[S.id]=!0,x=0;x<u.directions.length;x++)M=u.directions[x],m[(M={x:S.x+M.stepX,y:S.y+M.stepY,id:"".concat(Math.round(S.x)+M.stepX,"|||").concat(Math.round(S.y)+M.stepY)}).id]||(A=wv(S,M,v,h))>u.maxAllowedDirectionChange||l[M.id]||(g[M.id]||(g[M.id]=M),A=u.distFunc(S,M)+(isNaN(T[A])?c:T[A]),A=y[S.id]+A,y[M.id]&&y[M.id]<=A)||(v[M.id]=S,b[M.id]=(y[M.id]=A)+tv(M,p,u.distFunc));--C}return u.fallbackRoute(t,e,n,r,u)}function rv(t,e){if(!1!==e(t)&&t){if(t=t.get("combos"),0===t.length)return!1;(0,w.each)(t,(function(t){rv(t,e)}))}}Gm(qm,n),qm.prototype=null===n?Object.create(n):(Xm.prototype=n.prototype,new Xm),Ym.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},Ym.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{};t.multiple&&"mouseenter"===t.trigger&&this.set("multiple",!1),t=this.get("align");t||((e=this.get("position").split("-")).includes("left")&&(t="left"),t=e.includes("right")?"right":"center",this.set("align",t));var e=this.get("graph").get("container");t=td("<div class='g6-legend-container' style=\"position: absolute;\"></div>"),e.appendChild(t),this.set("container",t),e=this.render();ud(t,this.getContainerPos(e)),this.bindEvents()},Ym.prototype.getContainerPos=function(t){void 0===t&&(t=[0,0]);var e=this.get("graph"),n=this.get("offsetX"),r=this.get("offsetY"),i=this.get("margin"),o=this.get("position").split("-"),a={top:0,right:1,bottom:2,left:3},s={left:(e.getWidth()-t[0])/2+0,top:(e.getHeight()-t[1])/2+0};return o.forEach((function(n){var r=i[a[n]],o=n;switch(n){case"top":case"left":r+=0;break;case"bottom":r=e.getHeight()-t[1]-r+0,o="top";break;default:r=e.getWidth()-t[0]-r+0,o="left"}s[o]=r})),s.top+=r+e.getContainer().offsetTop,s.left+=n+e.getContainer().offsetLeft,Object.keys(s).forEach((function(t){s[t]="".concat(s[t],"px")})),s},Ym.prototype.bindEvents=function(){var t,e=this,n=e.get("filter");n&&n.enable&&(n=n.trigger||"click",Hm.includes(n)||(n="click"),t=e.get("legendCanvas"),"mouseenter"===n?(t.on("node-container:mouseenter",(function(t){return e.filterData(t)})),t.on("node-container:mouseleave",(function(t){e.clearFilter(),e.clearActiveLegend()}))):(t.on("node-container:click",(function(t){return e.filterData(t)})),t.on("click",(function(t){t.target&&t.target.isCanvas&&t.target.isCanvas()&&(e.clearFilter(),e.clearActiveLegend())}))))},Ym.prototype.changeData=function(t){this.set("data",t),t=this.render(),ud(this.get("container"),this.getContainerPos(t))},Ym.prototype.activateLegend=function(t){var e=this.get("filter"),n=(t=((null==e?void 0:e.multiple)||this.clearActiveLegend(),t.get("parent")),t=(t.get("active")?(t.set("active",!1),this.findLegendItemsByState("active").length&&t.set("inactive",!0)):(t.set("inactive",!1),t.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach((function(t){t.set("inactive",!0)})):this.clearActiveLegend(),(null==e?void 0:e.legendStateStyles)||{}),(null===t?void 0:t.inactive)||{opacity:.5,"text-shape":{opacity:.5}}),r=n["text-shape"]||{},i=(this.findLegendItemsByState("inactive").forEach((function(t){t=t.get("children");var e=t[0];t=t[1];e.attr(Wm(Wm({},e.get("oriAttrs")),n)),t.attr(Wm(Wm({},t.get("oriAttrs")),r))})),(null===t?void 0:t.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}}),o=i["text-shape"]||{};this.findLegendItemsByState("active").forEach((function(t){t=t.get("children");var e=t[0];t=t[1];e.attr(Wm(Wm({},e.get("oriAttrs")),i)),t.attr(Wm(Wm({},t.get("oriAttrs")),o))}))},Ym.prototype.findLegendItemsByState=function(t,e,n){void 0===e&&(e="all"),void 0===n&&(n=!0);var r=this.get("legendCanvas").find((function(t){return"root"===t.get("name")})),i=r.find((function(t){return"node-group"===t.get("name")}));r=r.find((function(t){return"edge-group"===t.get("name")}));return"node"===e?i.get("children").filter((function(e){return!!e.get(t)===n})):"edge"===e?r.get("children").filter((function(e){return!!e.get(t)===n})):i.get("children").filter((function(e){return!!e.get(t)===n})).concat(r.get("children").filter((function(e){return!!e.get(t)===n})))},Ym.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas").find((function(t){return"root"===t.get("name")}));[t.find((function(t){return"node-group"===t.get("name")})),t.find((function(t){return"edge-group"===t.get("name")}))].forEach((function(t){t.get("children").forEach((function(t){t.set("active",!1),t.set("inactive",!1);t=t.get("children");var e=t[0];t=t[1];e.attr(e.get("oriAttrs")),t.attr(t.get("oriAttrs"))}))}))},Ym.prototype.filterData=function(t){var e,n,r,i,o,a,s,u=this.get("filter"),c=null==u?void 0:u.filterFunctions;u&&c&&(i=this.get("legendCanvas"),e=this.get("graph"),n=u.graphActiveState||"active",r=u.graphInactiveState||"inactive",u=u.multiple,this.clearFilter(),u||this.clearActiveLegend(),this.activateLegend(t.target),t=(u=i.find((function(t){return"root"===t.get("name")}))).find((function(t){return"node-group"===t.get("name")})),i=u.find((function(t){return"edge-group"===t.get("name")})),o=t.get("children").filter((function(t){return t.get("active")})),a=i.get("children").filter((function(t){return t.get("active")})),s=0,(u=["getNodes","getEdges"]).forEach((function(t){e[t]().forEach((function(i){var u=!1;("getNodes"===t?o:a).forEach((function(t){t=c[t.get("id")],u=u||t(i.getModel())})),u?(e.setItemState(i,r,!1),e.setItemState(i,n,!0),s++):(e.setItemState(i,n,!1),e.setItemState(i,r,!0))}))})),s||u.forEach((function(t){e[t]().forEach((function(t){e.clearItemStates(t,[r])}))})))},Ym.prototype.clearFilter=function(){var t,e,n=this.get("graph"),r=this.get("filter");r&&(t=r.graphActiveState||"active",e=r.graphInactiveState||"inactive",n.getNodes().forEach((function(r){n.clearItemStates(r,[t,e])})),n.getEdges().forEach((function(r){n.clearItemStates(r,[t,e])})))},Ym.prototype.render=function(){var t=this,e=(this.processData(),this.get("legendCanvas")),n=(e?e.clear():e=new _l({container:this.get("container"),width:200,height:200}),e.addGroup({name:"root"})),r=n.addGroup({name:"node-group"}),i=n.addGroup({name:"edge-group"}),o=(this.set("legendCanvas",e),this.get("itemsData")),a=[r,i],s=(["nodes","edges"].forEach((function(e,n){o[e].forEach((function(r){var i,o=a[n].addGroup({id:r.id,name:"node-container"}),s=r.type,u=t.getShapeSize(r),c=u.width,l=u.height,h=u.r;u=t.getStyle(e.substr(0,4),r);switch(r.type){case"circle":i={r:h,x:0,y:0};break;case"rect":i={width:c,height:l,x:-c/2,y:-l/2};break;case"ellipse":i={r1:c,r2:l,x:0,y:0};break;case"line":i={x1:-c/2,y1:0,x2:c/2,y2:0},s="line";break;case"quadratic":i={path:[["M",-c/2,0],["Q",0,c/2,c/2,0]]},s="path";break;case"cubic":i={path:[["M",-c/2,0],["C",-c/6,c/2,c/6,-c/2,c/2,0]]},s="path";break;default:i={r:h,x:0,y:0}}var f;u=o.addShape(s,{attrs:Wm(Wm({},i),u),name:"".concat(r.type,"-node-keyShape"),oriAttrs:Wm({opacity:1},u)});r.label&&(u=u.getBBox(),f=(null==(f=r.labelCfg)?void 0:f.style)||{},f=Wm({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},f),o.addShape("text",{attrs:Wm({x:u.maxX+4,y:0,text:r.label},f),className:"legend-label",name:"".concat(r.type,"-node-text"),oriAttrs:f}))}))})),this.get("padding")),u=n.find((function(t){return"title-container"===t.get("name")})),c={height:0,maxY:0,width:0},l=(this.get("title")&&(u=u||n.addGroup({name:"title-container"}),p={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:s[0]},d=this.get("titleConfig")||{},p=Object.assign(p,d.style||{}),p=u.addShape("text",{attrs:Wm({text:this.get("title")},p)}),c=u.getCanvasBBox(),u.setMatrix([1,0,0,0,1,0,d.offsetX,d.offsetY,1])),this.layoutItems(),n.getCanvasBBox(),r.getCanvasBBox()),h=[1,0,0,0,1,0,l.minX<0?Math.abs(l.minX)+s[3]:s[3],c.maxY<l.minY?Math.abs(c.maxY-l.minY)+s[0]:c.maxY+s[0],1],f=(r.setMatrix(h),[(f=n.getCanvasBBox()).minX+f.width+s[1],f.minY+f.height+s[2]]),d=(c=(p?(d=Wm({position:"center",offsetX:0,offsetY:0},this.get("titleConfig")),c=u.getCanvasBBox(),g=u.getMatrix()||[1,0,0,0,1,0,0,0,1],"center"===d.position?g[6]=f[0]/2+d.offsetX:"right"===d.position?(g[6]=f[0]-s[3]+d.offsetX,p.attr({textAlign:"right"})):(g[6]=s[3]+d.offsetX,p.attr({textAlign:"left"})),u.setMatrix(g),c=u.getCanvasBBox(),d=l.minX<0?Math.abs(l.minX)+s[3]:s[3],p=l.minY<c.maxY?Math.abs(c.maxY-l.minY)+s[0]:c.maxY+s[0],r.setMatrix(h=[1,0,0,0,1,0,d,p,1]),g=[1,0,0,0,1,0,d,p,1],"vertical"===this.get("layout")?g[6]+=l.maxX+this.get("horiSep"):g[7]+=l.maxY+this.get("vertiSep"),i.setMatrix(g)):(l=r.getCanvasBBox(),u=[1,0,0,0,1,0,0,0,1],"vertical"===this.get("layout")?u[6]+=h[6]+l.maxX+this.get("horiSep"):u[7]+=h[7]+l.maxY+this.get("vertiSep"),i.setMatrix(u)),n.getCanvasBBox(),l=r.getCanvasBBox(),h=r.getMatrix()||[1,0,0,0,1,0,0,0,1],i.getMatrix()||[1,0,0,0,1,0,0,0,1]),i.getCanvasBBox()),p=(f=[Math.max(l.width+h[6],d.width+c[6])+s[1],Math.max(l.height+h[7],d.height+c[7])+s[2]],e.changeSize(f[0],f[1]),this.get("containerStyle")),g=n.getMatrix()||[1,0,0,0,1,0,0,0,1];u=Bu.invertMatrix({x:0,y:0},g);return n.addShape("rect",{attrs:Wm({x:u.x+(p.lineWidth||1),y:u.y+(p.lineWidth||1),width:f[0]-2*(p.lineWidth||1),height:f[1]-2*(p.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},p),name:"legend-back-rect",capture:!1}).toBack(),f},Ym.prototype.layoutItems=function(){var t,e=this.get("legendCanvas"),n=this.get("horiSep"),r=this.get("vertiSep"),i=this.get("layout"),o=this.get("align"),a=[0,0],s=(e=e.find((function(t){return"root"===t.get("name")})),e.find((function(t){return"node-group"===t.get("name")}))),u=(e=e.find((function(t){return"edge-group"===t.get("name")})),{min:0,max:-1/0}),c=-1/0,l=(s.get("children").forEach((function(t,e){0===e&&(u.min=a[0]);e=t.get("children")[0];var o=t.getCanvasBBox(),s=(e=e.getBBox(),e.width),l=(e=e.height,0),h=0,f=0;l="vertical"===i?(h=a[1],a[0]=(f=a[0]+s/2)+o.height+r,o.maxX+h+s/2):(f=a[1],a[0]=(h=a[0]+s/2)+o.width+n,o.maxY+f+e/2);u.max<a[0]&&(u.max=a[0]),c<l&&(c=l),t.setMatrix([1,0,0,0,1,0,h,f,1])})),u.max-u.min),h={min:0,max:-1/0},f=s.getCanvasBBox();a[0]=0,a[1]="vertical"===i?f.maxX+n:f.maxY+r,e.get("children").forEach((function(t,e){0===e&&(h.min=a[0]);e=t.get("children")[0];var o=t.getCanvasBBox(),s=(e=e.getBBox(),e.width),u=(e=e.height,0),c=0;"vertical"===i?(u=a[1],a[0]=(c=a[0])+o.height+r,t.setMatrix([1,0,0,0,1,0,0,c+e/2,1])):(c=a[1],a[0]=(u=a[0])+o.width+n,t.setMatrix([1,0,0,0,1,0,u+s/2,0,1])),h.max<a[0]&&(h.max=a[0])})),o&&""!==o&&"left"!==o&&(f=l-(h.max-h.min),t="center"===o?Math.abs(f)/2:Math.abs(f),(f<0?s:e).get("children").forEach((function(e){var n=e.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===i?n[7]+=t:n[6]+=t,e.setMatrix(n)})))},Ym.prototype.processData=function(){var t=this.get("data"),e={nodes:[],edges:[]};t.nodes&&(t.nodes.sort((function(t,e){return t.order-e.order})),t.nodes.forEach((function(t){var n=t.size||[(null==(n=t.style)?void 0:n.width)||(null==(n=t.style)?void 0:n.r)||8,(null==(n=t.style)?void 0:n.height)||(null==(n=t.style)?void 0:n.r)||8],r=(null==(r=t.labelCfg)?void 0:r.style)||{};e.nodes.push({id:t.id||(0,w.uniqueId)(),type:t.type||"circle",style:Wm({},t.style),order:t.order,label:t.label,itemType:"node",size:n,labelCfg:{position:"right",style:Wm({fontFamily:"Arial"},r)}})}))),t.edges&&(t.edges.sort((function(t,e){return t.order-e.order})),t.edges.forEach((function(t){var n=t.type||"line",r=("cubic-horizontal"===t.type&&(n="cubic"),(null==(r=t.labelCfg)?void 0:r.style)||{}),i=t.size||[(null==(i=t.style)?void 0:i.width)||8,1];e.edges.push({id:t.id||(0,w.uniqueId)(),type:n,size:i,style:Wm({lineWidth:(0,w.isArray)(i)?i[1]:1},t.style),order:t.order,label:t.label,itemType:"edge",labelCfg:{position:"right",style:Wm({fontFamily:"Arial"},r)}})}))),this.set("itemsData",e)},Ym.prototype.getContainer=function(){return this.get("container")},Ym.prototype.formatArray=function(t){var e=this.get(t);if((0,w.isNumber)(e))this.set(t,[e,e,e,e]);else if((0,w.isArray)(e))switch(e.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[e[0],e[0],e[0],e[0]]);break;case 2:this.set(t,[e[0],e[1],e[0],e[1]]);break;case 3:this.set(t,[e[0],e[1],e[2],e[1]])}return this.get(t)},Ym.prototype.getShapeSize=function(t){var e,n,r;return t.size&&((0,w.isArray)(t.size)?(e=t.size[0],n=t.size[1]||t.size[0],r=t.size[0]/2):(0,w.isNumber)(t.size)&&(e=t.size,n=t.size,r=t.size/2)),r=(r=t.style&&(t.style.width&&(e=t.style.width),t.style.height&&(n=t.style.height),t.style.r)?t.style.r:r)||5,{width:e=e||r,height:n=n||r,r:r}},Ym.prototype.getStyle=function(t,e){return Wm(Wm({},"node"===t?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),e.style||{})},Ym.prototype.destroy=function(){var t=this.get("graph").get("container"),e=this.get("container");t.removeChild(e)};lp={PluginBase:c,Menu:an,Grid:en,Minimap:o,Bundling:f,ToolBar:p,Tooltip:d,Fisheye:tn,TimeBar:np,ImageMinimap:fp,EdgeFilterLens:ep,SnapLine:yp,Legend:Ym};var iv=(s("circle",{options:{size:Uu.defaultNode.size,style:{x:0,y:0,stroke:Uu.defaultNode.style.stroke,fill:Uu.defaultNode.style.fill,lineWidth:Uu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Uu.nodeLabel.style.fill,fontSize:Uu.nodeLabel.style.fontSize,fontFamily:Uu.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Uu.defaultNode.linkPoints.size,lineWidth:Uu.defaultNode.linkPoints.lineWidth,fill:Uu.defaultNode.linkPoints.fill,stroke:Uu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:y({},Uu.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=(n=void 0===n?{}:n,this.getShapeStyle(t)),i=(n=(0,w.deepMix)({},n,t.icon),"".concat(this.type,"-keyShape")),o=(r=e.addShape("circle",{attrs:r,className:i,name:i,draggable:!0}),i=(e.shapeMap[i]=r,n.width),n.height),a=n.show,s=n.text;return a&&(a="".concat(this.type,"-icon"),e.shapeMap[a]=s?e.addShape("text",{attrs:y({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:a,name:a,draggable:!0}):e.addShape("image",{attrs:y({x:-i/2,y:-o/2},n),className:a,name:a,draggable:!0})),this.drawLinkPoints(t,e),r},drawLinkPoints:function(t,e){var n,r,i,o,a,s,u=(this.mergeStyle||this.getOptions(t)).linkPoints;u&&(n=(u=u||{}).top,s=u.left,a=u.right,r=u.bottom,i=u.size,o=u.r,u=b(u,["top","left","right","bottom","size","r"]),t=this.getSize(t)[0]/2,s&&(e.shapeMap[s="link-point-left"]=e.addShape("circle",{attrs:y(y({},u),{x:-t,y:0,r:i/2||o||5}),className:s,name:s,isAnchorPoint:!0})),a&&(e.shapeMap[s="link-point-right"]=e.addShape("circle",{attrs:y(y({},u),{x:t,y:0,r:i/2||o||5}),className:s,name:s,isAnchorPoint:!0})),n&&(e.shapeMap[a="link-point-top"]=e.addShape("circle",{attrs:y(y({},u),{x:0,y:-t,r:i/2||o||5}),className:a,name:a,isAnchorPoint:!0})),r)&&(e.shapeMap[s="link-point-bottom"]=e.addShape("circle",{attrs:y(y({},u),{x:0,y:t,r:i/2||o||5}),className:s,name:s,isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color};e=(0,w.deepMix)({},e,n),n=this.getSize(t)[0]/2;return y({x:0,y:0,r:n},e)},update:function(t,e,n){var r=e.getContainer(),i=this.getSize(t),o=y({},t.style);void 0===t.style.stroke&&t.color&&(o.stroke=t.color),void 0!==t.style.r||isNaN(i[0])||(o.r=i[0]/2),this.updateShape(t,e,o,!0,n),this.updateLinkPoints(t,r)}},"single-node"),s("rect",{options:{size:[100,30],style:{radius:0,stroke:Uu.defaultNode.style.stroke,fill:Uu.defaultNode.style.fill,lineWidth:Uu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Uu.nodeLabel.style.fill,fontSize:Uu.nodeLabel.style.fontSize,fontFamily:Uu.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Uu.defaultNode.linkPoints.size,lineWidth:Uu.defaultNode.linkPoints.lineWidth,fill:Uu.defaultNode.linkPoints.fill,stroke:Uu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:y({},Uu.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);n=e.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return e.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(t,e),n},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=(n=void 0===n?{}:n,n.top),i=n.left,o=n.right,a=n.bottom,s=n.size,u=n.r,c=(n=b(n,["top","left","right","bottom","size","r"]),t=this.getSize(t),t[0]);t=t[1];i&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:y(y({},n),{x:-c/2,y:0,r:s/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),o&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:y(y({},n),{x:c/2,y:0,r:s/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),r&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:y(y({},n),{x:0,y:-t/2,r:s/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:y(y({},n),{x:0,y:t/2,r:s/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color};e=(0,w.mix)({},e,n),n=this.getSize(t),t=e.width||n[0],n=e.height||n[1];return y({x:-t/2,y:-n/2,width:t,height:n},e)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getSize(t),a=e.get("keyShape");t.size||(o[0]=a.attr("width")||i.width,o[1]=a.attr("height")||i.height),o={stroke:t.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},i=(0,w.mix)({},i,a.attr(),o),i=(0,w.mix)(i,t.style);this.updateShape(t,e,i,!1,n),this.updateLinkPoints(t,r)}},"single-node"),s("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Uu.defaultNode.style.stroke,fill:Uu.defaultNode.style.fill,lineWidth:Uu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Uu.nodeLabel.style.fill,fontSize:Uu.nodeLabel.style.fontSize,fontFamily:Uu.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Uu.defaultNode.linkPoints.size,lineWidth:Uu.defaultNode.linkPoints.lineWidth,fill:Uu.defaultNode.linkPoints.fill,stroke:Uu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:y({},Uu.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=(n=void 0===n?{}:n,this.getShapeStyle(t)),i=(r=e.addShape("ellipse",{attrs:r,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),e.shapeMap["ellipse-keyShape"]=r,n.width),o=n.height,a=n.show,s=n.text;return a&&(e.shapeMap["".concat(this.type,"-icon")]=s?e.addShape("text",{attrs:y({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:y({x:-i/2,y:-o/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),r},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=(n=void 0===n?{}:n,n.top),i=n.left,o=n.right,a=n.bottom,s=n.size,u=n.r,c=(n=b(n,["top","left","right","bottom","size","r"]),t=this.getSize(t),t[0]/2);t=t[1]/2;i&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:y(y({},n),{x:-c,y:0,r:s/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),o&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:y(y({},n),{x:c,y:0,r:s/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),r&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:y(y({},n),{x:0,y:-t,r:s/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:y(y({},n),{x:0,y:t,r:s/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color};e=(0,w.mix)({},e,n),n=this.getSize(t),t=n[0]/2,n=n[1]/2;return y({x:0,y:0,rx:t,ry:n},e)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getSize(t),a=(o={stroke:t.color,rx:o[0]/2,ry:o[1]/2},e.get("keyShape"));i=(0,w.mix)({},i,a.attr(),o),i=(0,w.mix)(i,t.style);this.updateShape(t,e,i,!0,n),this.updateLinkPoints(t,r)}},"single-node"),s("diamond",{options:{size:[80,80],style:{stroke:Uu.defaultNode.style.stroke,fill:Uu.defaultNode.style.fill,lineWidth:Uu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Uu.nodeLabel.style.fill,fontSize:Uu.nodeLabel.style.fontSize,fontFamily:Uu.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Uu.defaultNode.linkPoints.size,lineWidth:Uu.defaultNode.linkPoints.lineWidth,fill:Uu.defaultNode.linkPoints.fill,stroke:Uu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:y({},Uu.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=(n=void 0===n?{}:n,this.getShapeStyle(t)),i=(r=e.addShape("path",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}),e.shapeMap["".concat(this.type,"-keyShape")]=r,n.width),o=n.height,a=n.show,s=n.text;return a&&(e.shapeMap["".concat(this.type,"-icon")]=s?e.addShape("text",{attrs:y({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:y({x:-i/2,y:-o/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),r},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=(n=void 0===n?{}:n,n.top),i=n.left,o=n.right,a=n.bottom,s=n.size,u=n.r,c=(n=b(n,["top","left","right","bottom","size","r"]),t=this.getSize(t),t[0]);t=t[1];i&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:y(y({},n),{x:-c/2,y:0,r:s/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),o&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:y(y({},n),{x:c/2,y:0,r:s/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),r&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:y(y({},n),{x:0,y:-t/2,r:s/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:y(y({},n),{x:0,y:t/2,r:s/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(t){t=this.getSize(t);var e=t[0];t=t[1];return[["M",0,-t/2],["L",e/2,0],["L",0,t/2],["L",-e/2,0],["Z"]]},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color};e=(0,w.mix)({},e,n),n=this.getPath(t);return y({path:n},e)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getPath(t),a=(o={stroke:t.color,path:o},e.get("keyShape"));i=(0,w.mix)({},i,a.attr(),o),i=(0,w.mix)(i,t.style);this.updateShape(t,e,i,!0,n),this.updateLinkPoints(t,r)}},"single-node"),s("triangle",{options:{size:40,direction:"up",style:{stroke:Uu.defaultNode.style.stroke,fill:Uu.defaultNode.style.fill,lineWidth:Uu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Uu.nodeLabel.style.fill,fontSize:Uu.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Uu.defaultNode.linkPoints.size,lineWidth:Uu.defaultNode.linkPoints.lineWidth,fill:Uu.defaultNode.linkPoints.fill,stroke:Uu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:y({},Uu.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(t,e){var n=this.mergeStyle||this.getOptions(t),r=n.icon,i=(r=void 0===r?{}:r,n=n.direction,this.getShapeStyle(t)),o=(n=t.direction||n,i=e.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}),e.shapeMap["".concat(this.type,"-keyShape")]=i,r.width),a=r.height,s=r.show,u=r.offset,c=r.text;return s&&(c?e.shapeMap["".concat(this.type,"-icon")]=e.addShape("text",{attrs:y({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):(s=-o/2,c=-a/2,"up"!==n&&"down"!==n||(c+=u),"left"!==n&&"right"!==n||(s+=u),e.shapeMap["".concat(this.type,"-icon")]=e.addShape("image",{attrs:y({x:s,y:c},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}))),this.drawLinkPoints(t,e),i},drawLinkPoints:function(t,e){var n,r,i=this.mergeStyle||this.getOptions(t),o=i.linkPoints,a=(o=void 0===o?{}:o,i=i.direction,i=t.direction||i,o.top),s=o.left,u=o.right,c=o.bottom,l=o.size,h=o.r;o=b(o,["top","left","right","bottom","size","r"]),t=this.getSize(t)[0];s&&(s=null,n=t*Math.sin(1/3*Math.PI),r=t*Math.sin(1/3*Math.PI),"up"===i?s=[-r,n]:"down"===i?s=[-r,-n]:"left"===i&&(s=[-r,r-n]),s)&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:y(y({},o),{x:s[0],y:s[1],r:l/2||h||5}),className:"link-point-left",name:"link-point-left"})),u&&(s=null,n=t*Math.sin(1/3*Math.PI),r=t*Math.sin(1/3*Math.PI),"up"===i?s=[r,n]:"down"===i?s=[r,-n]:"right"===i&&(s=[r,r-n]),s)&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:y(y({},o),{x:s[0],y:s[1],r:l/2||h||5}),className:"link-point-right",name:"link-point-right"})),a&&(u=null,n=t*Math.sin(1/3*Math.PI),r=t*Math.sin(1/3*Math.PI),"up"===i?u=[r-n,-n]:"left"===i?u=[r,-n]:"right"===i&&(u=[-r,-n]),u)&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:y(y({},o),{x:u[0],y:u[1],r:l/2||h||5}),className:"link-point-top",name:"link-point-top"})),c&&(s=null,n=t*Math.sin(1/3*Math.PI),r=t*Math.sin(1/3*Math.PI),"down"===i?s=[-r+n,n]:"left"===i?s=[r,n]:"right"===i&&(s=[-r,n]),s)&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:y(y({},o),{x:s[0],y:s[1],r:l/2||h||5}),className:"link-point-bottom",name:"link-point-bottom"}))},getPath:function(t){var e=(this.mergeStyle||this.getOptions(t)).direction,n=(e=t.direction||e,t=this.getSize(t)[0],t*Math.sin(1/3*Math.PI)),r=(t=t*Math.sin(1/3*Math.PI),[["M",-t,n],["L",0,-n],["L",t,n],["Z"]]);return"down"===e?r=[["M",-t,-n],["L",t,-n],["L",0,n],["Z"]]:"left"===e?r=[["M",-t,t-n],["L",t,-t],["L",t,t],["Z"]]:"right"===e&&(r=[["M",t,t-n],["L",-t,t],["L",-t,-t],["Z"]]),r},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color};e=(0,w.mix)({},e,n),n=this.getPath(t);return y({path:n},e)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getPath(t),a=(o={stroke:t.color,path:o},e.get("keyShape"));i=(0,w.mix)({},i,a.attr(),o),i=(0,w.mix)(i,t.style);this.updateShape(t,e,i,!0,n),this.updateLinkPoints(t,r)},updateLinkPoints:function(t,e){var n=this.getOptions({}),r=n.linkPoints,i=(n=n.direction,n=t.direction||n,e.shapeMap["link-point-left"]||e.find((function(t){return"link-point-left"===t.get("className")}))),o=e.shapeMap["link-point-right"]||e.find((function(t){return"link-point-right"===t.get("className")})),a=e.shapeMap["link-point-top"]||e.find((function(t){return"link-point-top"===t.get("className")})),s=e.shapeMap["link-point-bottom"]||e.find((function(t){return"link-point-bottom"===t.get("className")})),u=i||o||a||s,c=(u=(u&&(r=u.attr()),(0,w.mix)({},r,t.linkPoints)),r=u.fill,u.stroke),l=u.lineWidth,h=(h=u.size/2)||u.r,f=(u=t.linkPoints||{left:void 0,right:void 0,top:void 0,bottom:void 0},u.left),d=u.right,p=u.top;u=u.bottom,t=this.getSize(t)[0],h={r:h,fill:r,stroke:c,lineWidth:l},r=null,c=t*Math.sin(1/3*Math.PI),l=t*Math.sin(1/3*Math.PI),"up"===n?r=[-l,c]:"down"===n?r=[-l,-c]:"left"===n&&(r=[-l,l-c]),r&&(i?f||void 0===f?i.attr(y(y({},h),{x:r[0],y:r[1]})):(i.remove(),delete e.shapeMap["link-point-left"]):f&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:y(y({},h),{x:r[0],y:r[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}))),t=null,"up"===n?t=[l,c]:"down"===n?t=[l,-c]:"right"===n&&(t=[l,l-c]),t&&(o?d||void 0===d?o.attr(y(y({},h),{x:t[0],y:t[1]})):(o.remove(),delete e.shapeMap["link-point-right"]):d&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:y(y({},h),{x:t[0],y:t[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}))),i=null,"up"===n?i=[l-c,-c]:"left"===n?i=[l,-c]:"right"===n&&(i=[-l,-c]),i&&(a?p||void 0===p?a.attr(y(y({},h),{x:i[0],y:i[1]})):(a.remove(),delete e.shapeMap["link-point-top"]):p&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:y(y({},h),{x:i[0],y:i[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}))),f=null;"down"===n?f=[c-l,c]:"left"===n?f=[l,c]:"right"===n&&(f=[-l,c]),f&&(s?u||void 0===u?s.attr(y(y({},h),{x:f[0],y:f[1]})):(s.remove(),delete e.shapeMap["link-point-bottom"]):u&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:y(y({},h),{x:f[0],y:f[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),s("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Uu.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:Uu.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:Uu.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).preRect,r=(n=void 0===n?{}:n,this.getShapeStyle(t)),i=this.getSize(t),o=i[0],a=(i=i[1],r=e.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}),e.shapeMap["".concat(this.type,"-keyShape")]=r,n.show);n=b(n,["show"]);return a&&(e.shapeMap["pre-rect"]=e.addShape("rect",{attrs:y({x:-o/2,y:-i/2,height:i},n),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(t,e),this.drawStateIcon(t,e),this.drawLinkPoints(t,e),r},drawLogoIcon:function(t,e){var n,r,i,o,a,s,u=(this.mergeStyle||this.getOptions(t)).logoIcon;u=void 0===u?{}:u,t=this.getSize(t)[0];u.show&&(n=u.width,r=u.height,i=u.x,o=u.y,a=u.offset,s=u.text,u=b(u,["width","height","x","y","offset","text"]),e.shapeMap["rect-logo-icon"]=s?e.addShape("text",{attrs:y({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},u),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):e.addShape("image",{attrs:y(y({},u),{x:i||-t/2+n+a,y:o||-r/2,width:n,height:r}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}))},drawStateIcon:function(t,e){var n,r,i,o,a,s,u=(this.mergeStyle||this.getOptions(t)).stateIcon;u=void 0===u?{}:u,t=this.getSize(t)[0];u.show&&(n=u.width,r=u.height,i=u.x,o=u.y,a=u.offset,s=u.text,u=b(u,["width","height","x","y","offset","text"]),e.shapeMap["rect-state-icon"]=s?e.addShape("text",{attrs:y({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},u),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):e.addShape("image",{attrs:y(y({},u),{x:i||t/2-n+a,y:o||-r/2,width:n,height:r}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}))},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=(n=void 0===n?{}:n,n.top),i=n.left,o=n.right,a=n.bottom,s=n.size,u=n.r,c=(n=b(n,["top","left","right","bottom","size","r"]),t=this.getSize(t),t[0]);t=t[1];i&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:y(y({},n),{x:-c/2,y:0,r:s/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),o&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:y(y({},n),{x:c/2,y:0,r:s/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),r&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:y(y({},n),{x:0,y:-t/2,r:s/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:y(y({},n),{x:0,y:t/2,r:s/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(t,e){var n=this.getOptions(t),r=n.labelCfg,i=(r=void 0===r?{}:r,n.logoIcon),o=(i=void 0===i?{}:i,n=n.descriptionCfg,n=void 0===n?{}:n,this.getSize(t)[0]),a=null,s=i.show,u=(i=i.width,-o/2+r.offset);s&&(u=-o/2+i+r.offset),s=r.style,o=n.style,i=n.paddingTop;return(0,w.isString)(t.description)?(a=e.addShape("text",{attrs:y(y({},s),{x:u,y:-5,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e.shapeMap["text-shape"]=a,e.shapeMap["rect-description"]=e.addShape("text",{attrs:y(y({},o),{x:u,y:17+(i||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(a=e.addShape("text",{attrs:y(y({},s),{x:u,y:7,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e.shapeMap["text-shape"]=a),a},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color};e=(0,w.mix)({},e,n),n=this.getSize(t),t=e.width||n[0],n=e.height||n[1];return y({x:-t/2,y:-n/2,width:t,height:n},e)},update:function(t,e){var n,r,i,o,a,s=this.mergeStyle||this.getOptions(t),u=s.style,c=(u=void 0===u?{}:u,s.labelCfg),l=(c=void 0===c?{}:c,s=s.descriptionCfg,s=void 0===s?{}:s,this.getSize(t)),h=l[0],f=(l=l[1],u=(e.get("keyShape").attr(y(y({},u),{x:-h/2,y:-l/2,width:h,height:l})),e.getContainer()),e=u.shapeMap["rect-logo-icon"]||u.find((function(t){return"rect-logo-icon"===t.get("className")})),e?e.attr():{}),d=(f=(0,w.mix)({},f,t.logoIcon),f.width),p=(void 0===d&&(d=this.options.logoIcon.width),t.logoIcon?t.logoIcon.show:void 0),g=c.offset,m=(d=-h/2+d+g,g=(p||void 0===p||(d=-h/2+g),u.shapeMap["node-label"]||u.find((function(t){return"node-label"===t.get("className")}))),u.shapeMap["rect-description"]||u.find((function(t){return"rect-description"===t.get("className")})));t.label&&(g?(r=t.labelCfg?t.labelCfg.style:{},n=(0,w.mix)({},g.attr(),r),t.label&&(n.text=t.label),n.x=d,(0,w.isString)(t.description)&&(n.y=-5),m&&(m.resetMatrix(),m.attr({x:d})),g.resetMatrix(),g.attr(n)):u.shapeMap["node-label"]=u.addShape("text",{attrs:y(y({},c.style),{x:d,y:t.description?-5:7,text:t.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0})),(0,w.isString)(t.description)&&(g=s.paddingTop,m?(r=t.descriptionCfg?t.descriptionCfg.style:{},n=(0,w.mix)({},m.attr(),r),(0,w.isString)(t.description)&&(n.text=t.description),n.x=d,m.resetMatrix(),m.attr(y(y({},n),{y:17+(g||0)}))):u.shapeMap["rect-description"]=u.addShape("text",{attrs:y(y({},s.style),{x:d,y:17+(g||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})),c=u.shapeMap["pre-rect"]||u.find((function(t){return"pre-rect"===t.get("className")})),c&&!c.destroyed&&(r=(0,w.mix)({},c.attr(),t.preRect),c.attr(y(y({},r),{x:-h/2,y:-l/2,height:l}))),e&&!e.destroyed?p||void 0===p?(m=f.width,i=f.height,o=f.x,a=f.y,n=f.offset,s=b(f,["width","height","x","y","offset"]),e.attr(y(y({},s),{x:o||-h/2+m+n,y:a||-i/2,width:m,height:i}))):(e.remove(),delete u.shapeMap["pre-rect"]):p&&this.drawLogoIcon(t,u),d=u.shapeMap["rect-state-icon"]||u.find((function(t){return"rect-state-icon"===t.get("className")})),g=d?d.attr():{},c=(0,w.mix)({},g,t.stateIcon);d?(c.show||void 0===c.show||(d.remove(),delete u.shapeMap["rect-state-icon"]),r=c.width,i=c.height,o=c.x,a=c.y,l=c.offset,f=b(c,["width","height","x","y","offset"]),d.attr(y(y({},f),{x:o||h/2-r+l,y:a||-i/2,width:r,height:i}))):c.show&&this.drawStateIcon(t,u),this.updateLinkPoints(t,u)}},"single-node"),s("star",{options:{size:60,style:{stroke:Uu.defaultNode.style.stroke,fill:Uu.defaultNode.style.fill,lineWidth:Uu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Uu.nodeLabel.style.fill,fontSize:Uu.nodeLabel.style.fontSize,fontFamily:Uu.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Uu.defaultNode.linkPoints.size,lineWidth:Uu.defaultNode.linkPoints.lineWidth,fill:Uu.defaultNode.linkPoints.fill,stroke:Uu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:y({},Uu.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=(n=void 0===n?{}:n,this.getShapeStyle(t)),i=(r=e.addShape("path",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}),e.shapeMap["".concat(this.type,"-keyShape")]=r,n.width),o=n.height,a=n.show,s=n.text;return a&&(e.shapeMap["".concat(this.type,"-icon")]=s?e.addShape("text",{attrs:y({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:y({x:-i/2,y:-o/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),r},drawLinkPoints:function(t,e){var n,r,i=(this.mergeStyle||this.getOptions(t)).linkPoints,o=(i=void 0===i?{}:i,i.top),a=i.left,s=i.right,u=i.leftBottom,c=i.rightBottom,l=i.size,h=i.r;i=b(i,["top","left","right","leftBottom","rightBottom","size","r"]),t=this.getSize(t)[0];s&&(n=Math.cos(.1*Math.PI)*t,r=Math.sin(.1*Math.PI)*t,e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:y(y({},i),{x:n,y:-r,r:l/2||h||5}),className:"link-point-right",name:"link-point-right"})),o&&(n=Math.cos(.5*Math.PI)*t,r=Math.sin(.5*Math.PI)*t,e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:y(y({},i),{x:n,y:-r,r:l/2||h||5}),className:"link-point-top",name:"link-point-top"})),a&&(n=Math.cos(.9*Math.PI)*t,r=Math.sin(.9*Math.PI)*t,e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:y(y({},i),{x:n,y:-r,r:l/2||h||5}),className:"link-point-left",name:"link-point-left"})),u&&(n=Math.cos(1.3*Math.PI)*t,r=Math.sin(1.3*Math.PI)*t,e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:y(y({},i),{x:n,y:-r,r:l/2||h||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})),c&&(n=Math.cos(1.7*Math.PI)*t,r=Math.sin(1.7*Math.PI)*t,e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:y(y({},i),{x:n,y:-r,r:l/2||h||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"}))},getPath:function(t){for(var e=this.getSize(t)[0],n=t.innerR||3*e/8,r=[],i=0;i<5;i++){var o=Math.cos((18+72*i)/180*Math.PI)*e,a=Math.sin((18+72*i)/180*Math.PI)*e,s=Math.cos((54+72*i)/180*Math.PI)*n,u=Math.sin((54+72*i)/180*Math.PI)*n;r.push(0===i?["M",o,-a]:["L",o,-a]),r.push(["L",s,-u])}return r.push(["Z"]),r},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color};e=(0,w.mix)({},e,n),n=this.getPath(t);return y({path:n},e)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getPath(t),a=(o={stroke:t.color,path:o},e.get("keyShape"));i=(0,w.mix)({},i,a.attr(),o),i=(0,w.mix)(i,t.style);this.updateShape(t,e,i,!0,n),this.updateLinkPoints(t,r)},updateLinkPoints:function(t,e){var n=this.getOptions({}).linkPoints,r=e.shapeMap["link-point-left"]||e.find((function(t){return"link-point-left"===t.get("className")})),i=e.shapeMap["link-point-right"]||e.find((function(t){return"link-point-right"===t.get("className")})),o=e.shapeMap["link-point-top"]||e.find((function(t){return"link-point-top"===t.get("className")})),a=e.shapeMap["link-point-left-bottom"]||e.find((function(t){return"link-point-left-bottom"===t.get("className")})),s=e.shapeMap["link-point-left-bottom"]||e.find((function(t){return"link-point-right-bottom"===t.get("className")})),u=r||i||o||a||s,c=(u=(u&&(n=u.attr()),(0,w.mix)({},n,t.linkPoints)),n=u.fill,u.stroke),l=u.lineWidth,h=(h=u.size/2)||u.r,f=(u=t.linkPoints||{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},u.left),d=u.right,p=u.top,g=u.leftBottom;u=u.rightBottom,t=this.getSize(t)[0],h={r:h,fill:n,stroke:c,lineWidth:l},n=Math.cos(.1*Math.PI)*t,c=Math.sin(.1*Math.PI)*t;i?d||void 0===d?i.attr(y(y({},h),{x:n,y:-c})):(i.remove(),delete e.shapeMap["link-point-right"]):d&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:y(y({},h),{x:n,y:-c}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),n=Math.cos(.5*Math.PI)*t,c=Math.sin(.5*Math.PI)*t,o?p||void 0===p?o.attr(y(y({},h),{x:n,y:-c})):(o.remove(),delete e.shapeMap["link-point-top"]):p&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:y(y({},h),{x:n,y:-c}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),n=Math.cos(.9*Math.PI)*t,c=Math.sin(.9*Math.PI)*t,r?f||void 0===f?r.attr(y(y({},h),{x:n,y:-c})):(r.remove(),delete e.shapeMap["link-point-left"]):f&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:y(y({},h),{x:n,y:-c}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),n=Math.cos(1.3*Math.PI)*t,c=Math.sin(1.3*Math.PI)*t,a?g||void 0===g?a.attr(y(y({},h),{x:n,y:-c})):(a.remove(),delete e.shapeMap["link-point-left-bottom"]):g&&(e.shapeMap["link-point-left-bottom"]=e.addShape("circle",{attrs:y(y({},h),{x:n,y:-c}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),n=Math.cos(1.7*Math.PI)*t,c=Math.sin(1.7*Math.PI)*t,s?u||void 0===u?s.attr(y(y({},h),{x:n,y:-c})):(s.remove(),delete e.shapeMap["link-point-right-bottom"]):u&&(e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:y(y({},h),{x:n,y:-c}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node"),Bu.defaultSubjectColors),ov=(s("donut",{options:{size:Uu.defaultNode.size,style:{x:0,y:0,stroke:Uu.defaultNode.style.stroke,fill:Uu.defaultNode.style.fill,lineWidth:Uu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Uu.nodeLabel.style.fill,fontSize:Uu.nodeLabel.style.fontSize,fontFamily:Uu.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Uu.defaultNode.linkPoints.size,lineWidth:Uu.defaultNode.linkPoints.lineWidth,fill:Uu.defaultNode.linkPoints.fill,stroke:Uu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:y({},Uu.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=(n=void 0===n?{}:n,this.getShapeStyle(t)),i=(n=(0,w.deepMix)({},n,t.icon),r=e.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")}),e.shapeMap["".concat(this.type,"-keyShape")]=r,n.width),o=n.height,a=n.show,s=n.text,u=(a=(a&&(e.shapeMap["".concat(this.type,"-icon")]=s?e.addShape("text",{attrs:y({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:y({x:-i/2,y:-o/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),r.attr("r")),s=.6*a,(a+s)/2),c=(i=t.donutAttrs,void 0===i?{}:i),l=(o=t.donutColorMap,void 0===o?{}:o);n=Object.keys(c).length;if(c&&1<n){var h=[],f=0;if(Object.keys(c).forEach((function(t){var e=c[t]||0;(0,w.isNumber)(e)&&(h.push({key:t,value:e,color:l[t]}),f+=e)})),f){var d=a-s;if(1===n)return void(e.shapeMap["fan-shape-0"]=e.addShape("circle",{attrs:{r:u,x:0,y:0,stroke:h[0].color||iv[0],lineWidth:d},name:"fan-shape-0",draggable:!0}));var p=[u,0],g=0;h.forEach((function(t,n){var r=t.value/f;r<.001||(1===(r=.999<r?1:r)?e.shapeMap["fan-shape-".concat(n)]=e.addShape("circle",{attrs:{r:u,x:0,y:0,stroke:t.color||iv[n%iv.length],lineWidth:d},name:"fan-shape-".concat(n),draggable:!0}):(t.percent=r,t.angle=r*Math.PI*2,t.beginAgnle=g,g+=t.angle,t.endAngle=g,t.arcBegin=p,t.arcEnd=[u*Math.cos(t.endAngle),-u*Math.sin(t.endAngle)],r=t.angle>Math.PI?1:0,r=[["M",t.arcBegin[0],t.arcBegin[1]],["A",u,u,0,r,0,t.arcEnd[0],t.arcEnd[1]],["L",t.arcEnd[0],t.arcEnd[1]]],e.shapeMap["fan-shape-".concat(n)]=e.addShape("path",{attrs:{path:r,lineWidth:d,stroke:t.color||iv[n%iv.length]},name:"fan-shape-".concat(n),draggable:!0}),p=t.arcEnd))}))}}return this.drawLinkPoints(t,e),r},update:void 0},"circle"),function(t){var e=t.x;t=t.y;return{x:e,y:t,centerX:e,centerY:t,minX:e,minY:t,maxX:e,maxY:t,height:0,width:0}}),av=function(t){var e=[],n=[],r=(t=((t=void 0===t?[]:t).forEach((function(t){e.push(t.x),n.push(t.y)})),Math.min.apply(Math,e)),Math.max.apply(Math,e)),i=Math.min.apply(Math,n),o=Math.max.apply(Math,n);return{centerX:(t+r)/2,centerY:(i+o)/2,maxX:r,maxY:o,minX:t,minY:i,height:o-i,width:r-t}},sv=function(t){for(var e=[],n=t.length-1;0<=n;n--){var r=t[n];r.id="".concat(r.x,"|||").concat(r.y),r.id,e.push(r)}return e},uv=function(t){return sv(t)},cv=function(t,e){return t.width||t.height?{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}:t},lv=function(t,e,n){r=e,i=t,o=Math.abs(r.x-i.centerX),r=Math.abs(r.y-i.centerY);var r,i,o=0===o&&0===r?0:o/i.width>r/i.height;return 0===o?(r=t.centerX,i=t.centerY,n.y<e.y?i=t.minY:n.x>e.x?r=t.maxX:n.x<e.x?r=t.minX:n.x===e.x&&(i=t.maxY),{x:r,y:i}):o?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},hv=function(t,e){var n=Math.min(t.minX,e.minX),r=Math.min(t.minY,e.minY),i=Math.max(t.maxX,e.maxX);t=Math.max(t.maxY,e.maxY);return{centerX:(n+i)/2,centerY:(r+t)/2,minX:n,minY:r,maxX:i,maxY:t,height:t-r,width:i-n}},fv=function(t){return[{x:t.minX,y:t.minY},{x:t.maxX,y:t.minY},{x:t.maxX,y:t.maxY},{x:t.minX,y:t.maxY}]},dv=function(t,e){var n=t.x;t=t.y;return n<e.minX||n>e.maxX||t<e.minY||t>e.maxY},pv=function(t,e){return n=t,((r=e.x)<n.minX||r>n.maxX?[]:[{x:r,y:n.minY},{x:r,y:n.maxY}]).concat((r=t,(n=e.y)<r.minY||n>r.maxY?[]:[{x:r.minX,y:n},{x:r.maxX,y:n}]));var n,r},gv=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},mv=function(t,e,n){var r,i,o;return!(!n.width&&!n.height)&&(r=(n=fv(n))[0],i=n[1],o=n[2],n=n[3],$m(t,e,r,i)||$m(t,e,r,n)||$m(t,e,i,o)||$m(t,e,o,n))},vv=function(t,e,n,r,i,o,a){var s=[],u=[e],c={},l={},h={},f=(l[e.id]=0,h[e.id]=Km(e,n,e),{});for(t.forEach((function(t){f[t.id]=t}));u.length;){var d=void 0,p=1/0;if(u.forEach((function(t){h[t.id]<=p&&(p=h[t.id],d=t)})),d===n)return Zm(g=[],f,c,n.id),g;var g=u,m=d;-1<(m=g.indexOf(m))&&g.splice(m,1),s.push(d),function(t,e,n,r){var i=[];return t.forEach((function(t){t===e||t.x!==e.x&&t.y!==e.y||mv(t,e,n)||mv(t,e,r)||i.push(t)})),sv(i)}(t,d,r,i).forEach((function(t){var r;-1!==s.indexOf(t)||(-1===u.indexOf(t)&&u.push(t),r=h[d.id]+gv(d,t),l[t.id]&&r>=l[t.id])||(c[t.id]=d.id,l[t.id]=r,h[t.id]=l[t.id]+Km(t,n,e,o,a))}))}return[e,n]},yv={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},fallbackRoute:function(t,e,n,r,i){return uv(Qm(t,e,n,r,i.offset))}},bv=(Math.PI,function(t,e){return e=Math.round(Math.abs(t/e)),e<0?0:(t<0?-1:1)*e}),xv=function(t,e){var n=e.x-t.x;e=e.y-t.y;return n||e?Math.atan2(e,n):0},_v=function(t,e){return t=Math.abs(t-e),t>Math.PI?2*Math.PI-t:t},wv=function(t,e,n,r){return e=xv(t,e),n=n[t.id]?xv({x:n[t.id].x,y:n[t.id].y},t):xv(r,t),_v(n,e)},Sv=(i("polyline",{options:{color:Uu.defaultEdge.color,size:Uu.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Uu.defaultEdge.style.stroke,lineAppendWidth:Uu.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Uu.edgeLabel.style.fill,fontSize:Uu.edgeLabel.style.fontSize,fontFamily:Uu.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:y({},Uu.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(t,e){return t=this.getShapeStyle(t),0===t.radius&&delete t.radius,t=e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:t}),e.shapeMap["edge-shape"]=t},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},r=(e=(0,w.mix)({},e,n,t.style),n=(t=this.getPathPoints(t),this.radius=e.radius,this.offset=e.offset,t.startPoint),t.endPoint),i=this.getControlPoints(t),o=[n],a=(i=((o=i?o.concat(i):o).push(r),t.sourceNode),t.targetNode),s=e.radius,u=this.options.routeCfg;u=(0,w.mix)({},u,t.routeCfg),u.offset=e.offset,o=this.getPath(o,i,a,s,u);return((0,w.isArray)(o)&&o.length<=1||(0,w.isString)(o)&&-1===o.indexOf("L"))&&(o="M0 0, L0 0"),(isNaN(n.x)||isNaN(n.y)||isNaN(r.x)||isNaN(r.y))&&(o="M0 0, L0 0"),(0,w.mix)({},Uu.defaultEdge.style,e,{lineWidth:t.size,path:o})},updateShapeStyle:function(t,e){var n,r,i,o,a,s,u,c,l,h,f=e.getContainer();e.isVisible()&&(n={stroke:t.color},f=f.shapeMap["edge-shape"]||f.find((function(t){return"edge-shape"===t.get("className")}))||e.getKeyShape(),e=t.size,r=(t=this.getPathPoints(t)).startPoint,i=t.endPoint,l=[r],(l=(o=this.getControlPoints(t))?l.concat(o):l).push(i),o=f.attr(),a=(0,w.mix)({},n,o,t.style),h=t.sourceNode,s=t.targetNode,u=a.radius,c=this.options.routeCfg,(c=(0,w.mix)({},c,t.routeCfg)).offset=a.offset,l=this.getPath(l,h,s,u,c),((0,w.isArray)(l)&&l.length<=1||(0,w.isString)(l)&&-1===l.indexOf("L"))&&(l="M0 0, L0 0"),(isNaN(r.x)||isNaN(r.y)||isNaN(i.x)||isNaN(i.y))&&(l="M0 0, L0 0"),o.endArrow&&!1===a.endArrow&&(t.style.endArrow={path:""}),o.startArrow&&!1===a.startArrow&&(t.style.startArrow={path:""}),h=(0,w.mix)(n,f.attr(),{lineWidth:e,path:l},t.style),f)&&f.attr(h)},getPath:function(t,e,n,r,i){var o,a=i.offset,s=i.simple;return!a||2<t.length?r?Jm(t,r):(o=[],(0,w.each)(t,(function(t,e){o.push(0===e?["M",t.x,t.y]:["L",t.x,t.y])})),o):(s=s?Qm(t[t.length-1],t[0],n,e,a):nv(t[0],t[t.length-1],e,n,i))&&s.length?r?Jm(s,r):Bu.pointsToPolygon(s):"M0 0, L0 0"}},"single-edge"),sn.cloneEvent),Ev=sn.isNaN,Mv=Math.abs,Av=["shift","ctrl","alt","control"],Cv=(rp={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(t){var e,n,r,i,o=this.origin,a=+t.clientX;t=+t.clientY;Ev(a)||Ev(t)||(e=a-o.x,o=t-o.y,"x"===this.get("direction")?o=0:"y"===this.get("direction")&&(e=0),this.origin={x:a,y:t},a=this.graph.get("width"),t=this.graph.get("height"),n=this.graph.get("canvas").getCanvasBBox(),r=this.scalableRange,i=this.scalableRange,r<1&&-1<r&&(r*=a,i*=t),(n.minX<=a+r&&n.minX+e>a+r||0<=n.maxX+r&&n.maxX+r+e<0)&&(e=0),(n.minY<=t+i&&n.minY+o>t+i||0<=n.maxY+i&&n.maxY+i+o<0)&&(o=0),this.graph.translate(e,o))},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0];e=e[1];n&&e||(t.preventDefault(),this.onMouseDown(t))},onMouseDown:function(t){var e=t.originalEvent;if((!e||"touchstart"===t.name||0===e.button)&&("touchstart"===t.name||"undefined"==typeof window||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin.call(this,t)&&!this.keydown&&(e=t.target,e=e&&e.isCanvas&&e.isCanvas(),(this.allowDragOnItem||e)&&(this.origin={x:t.clientX,y:t.clientY},this.dragging=!1,this.enableOptimize))){e=this.graph;for(var n=e.getEdges(),r=0,i=n.length;r<i;r++){var o=n[r].get("group").get("children");o&&o.forEach((function(t){t.set("ori-visibility",t.get("ori-visibility")||t.get("visible")),t.hide()}))}for(var a=e.getNodes(),s=0,u=a.length;s<u;s++)for(var c=0,l=a[s].getContainer().get("children");c<l.length;c++){var h=l[c];h.get("isKeyShape")||(h.set("ori-visibility",h.get("ori-visibility")||h.get("visible")),h.hide())}}},onTouchMove:function(t){var e=t.originalEvent.touches,n=e[0];e=e[1];n&&e?this.onMouseUp(t):(t.preventDefault(),this.onMouseMove(t))},onMouseMove:function(t){var e=this.graph;if(!this.keydown){var n=t.target;n=n&&n.isCanvas&&n.isCanvas();if((this.allowDragOnItem||n)&&(t=Sv(t),this.origin)){if(this.dragging)t.type="drag",e.emit("canvas:drag",t);else{if(Mv(this.origin.x-t.clientX)+Mv(this.origin.y-t.clientY)<10)return;this.shouldBegin.call(this,t)&&(t.type="dragstart",e.emit("canvas:dragstart",t),this.originPosition={x:t.clientX,y:t.clientY},this.dragging=!0)}this.shouldUpdate.call(this,t)&&this.updateViewport(t)}}},onMouseUp:function(t){var e=this.graph;if(!this.keydown){var n=e.getZoom(),r=e.get("modeController");r=null==(r=null==(r=null==r?void 0:r.modes[r.mode])?void 0:r.filter((function(t){return"zoom-canvas"===t.type})))?void 0:r[0],r=r?r.optimizeZoom||.1:0;if(this.enableOptimize){for(var i=e.getEdges(),o=0,a=i.length;o<a;o++){var s=i[o].get("group").get("children");s&&s.forEach((function(t){var e=t.get("ori-visibility");t.set("ori-visibility",void 0),e&&t.show()}))}if(r<n)for(var u=e.getNodes(),c=0,l=u.length;c<l;c++)for(var h=0,f=u[c].getContainer().get("children");h<f.length;h++){var d,p=f[h];p.get("isKeyShape")||(d=p.get("ori-visibility"),p.set("ori-visibility",void 0),d&&p.show())}}this.dragging?(t=Sv(t),this.shouldEnd.call(this,t)&&this.updateViewport(t),t.type="dragend",t.dx=t.clientX-this.originPosition.x,t.dy=t.clientY-this.originPosition.y,e.emit("canvas:dragend",t),this.endDrag()):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(t){t=t.key,t&&(-1<Av.indexOf(t.toLowerCase())?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},hp={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd"}},validationCombo:function(t){return!(!this.origin||!t||t.destroyed)&&"combo"===t.getType()},onTouchStart:function(t){if(t.item){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return;t.preventDefault()}catch(t){}this.onDragStart(t)}},onTouchMove:function(t){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return void this.onDragEnd(t);t.preventDefault()}catch(t){}this.onDrag(t)},onDragStart:function(t){var e=this;if(this.currentShouldEnd=!0,this.shouldBegin.call(this,t)){var n=t.item;if(n&&!n.destroyed&&!n.hasLocked()){n.getContainer().set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n);var r=t.target;if(r&&r.get("isAnchorPoint"))return;r=this.graph,r=(this.targets=[],this.targetCombo=null,r.findAllByState("node",this.selectedState));var i=n.get("id"),o=(0!==r.filter((function(t){return t=t.get("id"),i===t})).length&&1<r.length?r.forEach((function(t){t.hasLocked()||e.targets.push(t)})):this.targets.push(n),[]);this.targets.forEach((function(t){t=t.getModel();var e=t.x,n=t.y;t=t.id;o.push({x:e,y:n,id:t})})),this.set("beforeDragNodes",o),this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(t){t.getEdges().forEach((function(t){t.isVisible()&&(e.hidenEdge[t.getID()]=!0,t.hide())}))})),this.origin={x:t.x,y:t.y},this.point={},this.originPoint={}}}},onDrag:function(t){var e=this;this.origin&&this.shouldUpdate.call(this,t)&&(this.get("enableDelegate")?this.updateDelegate(t):this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge")}):this.targets.map((function(n){e.update(n,t)})))},onDragEnd:function(t){var e,n,r=this;this.origin&&(null!=(e=this.cachedCaptureItems)&&e.forEach((function(t){t.getContainer().set("capture",!0)})),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(t){t.getEdges().forEach((function(t){r.hidenEdge[t.getID()]&&t.show(),t.refresh()}))})),this.hidenEdge={},(e=this.graph).get("enabledStack")&&this.enableStack&&(n={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}},this.get("beforeDragNodes").forEach((function(t){n.before.nodes.push(t)})),this.targets.forEach((function(t){t=t.getModel();var e=t.x,r=t.y;t=t.id;n.after.nodes.push({x:e,y:r,id:t})})),e.pushStack("update",(0,w.clone)(n))),e.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null)},onDropCombo:function(t){var e,n,r=t.item;this.currentShouldEnd=this.shouldEnd.call(this,t,r),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&this.validationCombo(r)&&(e=this.graph,this.comboActiveState&&e.setItemState(r,this.comboActiveState,!1),this.targetCombo=r,this.onlyChangeComboSize?e.updateCombos():(n=r.getModel(),this.targets.map((function(t){t.getModel().comboId!==n.id&&e.updateComboTree(t,n.id)})),e.updateCombo(r)),e.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo}))},onDropCanvas:function(t){var e=this.graph;this.currentShouldEnd=this.shouldEnd.call(this,t,void 0),this.updatePositions(t,!this.currentShouldEnd),this.targets&&0!==this.targets.length&&this.currentShouldEnd&&(this.onlyChangeComboSize?e.updateCombos():this.targets.map((function(t){t.getModel().comboId&&e.updateComboTree(t)})))},onDropNode:function(t){var e,n,r,i;this.targets&&0!==this.targets.length&&(e=t.item,n=this.graph,i=(r=e.getModel().comboId)?n.findById(r):void 0,this.currentShouldEnd=this.shouldEnd.call(this,t,i),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd)&&(this.onlyChangeComboSize?n.updateCombos():r?(i=n.findById(r),this.comboActiveState&&n.setItemState(i,this.comboActiveState,!1),this.targets.map((function(t){var e=t.getModel();r!==e.comboId&&n.updateComboTree(t,r)})),n.updateCombo(i)):this.targets.map((function(t){t.getModel().comboId&&n.updateComboTree(t)})),n.emit("dragnodeend",{items:this.targets,targetItem:e}))},onDragEnter:function(t){var e;t=t.item;this.validationCombo(t)&&(e=this.graph,this.comboActiveState)&&e.setItemState(t,this.comboActiveState,!0)},onDragLeave:function(t){var e;t=t.item;this.validationCombo(t)&&(e=this.graph,this.comboActiveState)&&e.setItemState(t,this.comboActiveState,!1)},updatePositions:function(t,e){var n=this;this.targets&&0!==this.targets.length&&(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),updateFunc:this.update}):e||this.targets.map((function(e){return n.update(e,t)})):this.targets.map((function(r){return n.update(r,t,e)})))},update:function(t,e,n){var r=this.origin,i=t.get("model"),o=t.get("id");this.point[o]||(this.point[o]={x:i.x||0,y:i.y||0}),i=e.x-r.x+this.point[o].x,o=e.y-r.y+this.point[o].y,n&&(i+=r.x-e.x,o+=r.y-e.y),n={x:i,y:o};this.get("updateEdge")?this.graph.updateItem(t,n,!1):t.updatePosition(n)},debounceUpdate:(0,w.debounce)((function(t){var e=t.targets,n=t.graph,r=t.point,i=t.origin,o=t.evt,a=t.updateEdge;t.updateFunc,e.map((function(t){var e=t.get("model"),s=t.get("id");r[s]||(r[s]={x:e.x||0,y:e.y||0}),e={x:o.x-i.x+r[s].x,y:o.y-i.y+r[s].y},a?n.updateItem(t,e,!1):t.updatePosition(e)}))}),50,!0),updateDelegate:function(t){var e,n,r,i,o,a,s=this.graph;this.delegateRect?(e=t.x-this.origin.x+this.originPoint.minX,n=t.y-this.origin.y+this.originPoint.minY,this.delegateRect.attr({x:e,y:n})):(e=s.get("group"),n=(0,w.deepMix)({},df.delegateStyle,this.delegateStyle),t=(s=this.calculationGroupPosition(t)).x,r=s.y,i=s.width,o=s.height,a=s.minX,s=s.minY,this.originPoint={x:t,y:r,width:i,height:o,minX:a,minY:s},this.delegateRect=e.addShape("rect",{attrs:y({width:i,height:o,x:t,y:r},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1))},calculationGroupPosition:function(t){for(var e=this.targets,n=(0===e.length&&e.push(t.item),1/0),r=-1/0,i=1/0,o=-1/0,a=0;a<e.length;a++){var s=e[a].getBBox(),u=s.minX,c=s.minY,l=s.maxX;s=s.maxY;u<n&&(n=u),c<i&&(i=c),r<l&&(r=l),o<s&&(o=s)}return{x:Math.floor(n),y:Math.floor(i),width:Math.ceil(r)-Math.floor(n),height:Math.ceil(o)-Math.floor(i),minX:n,minY:i}}},n={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(t){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return;t.preventDefault()}catch(t){}this.setAllItemStates(t)},clearOnTouchStart:function(t){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return;t.preventDefault()}catch(t){}this.clearActiveState(t)},setAllItemStates:function(t){var e=t.item,n=this.graph;if(this.item=e,this.shouldUpdate(t.item,{event:t,action:"activate"})){for(var r=this.activeState,i=this.inactiveState,o=n.getNodes(),a=n.getCombos(),s=n.getEdges(),u=n.get("vedges"),c=o.length,l=a.length,h=s.length,f=u.length,d=0;d<c;d++){var p=o[d],g=p.hasState("selected");this.resetSelected&&g&&n.setItemState(p,"selected",!1),n.setItemState(p,r,!1),i&&n.setItemState(p,i,!0)}for(d=0;d<l;d++){var m=a[d];g=m.hasState("selected");this.resetSelected&&g&&n.setItemState(m,"selected",!1),n.setItemState(m,r,!1),i&&n.setItemState(m,i,!0)}for(d=0;d<h;d++){var v=s[d];n.setItemState(v,r,!1),i&&n.setItemState(v,i,!0)}for(d=0;d<f;d++){var y=u[d];n.setItemState(y,r,!1),i&&n.setItemState(y,i,!0)}i&&n.setItemState(e,i,!1),n.setItemState(e,r,!0);var b=e.getEdges(),x=b.length;for(d=0;d<x;d++){var _=void 0;_=(v=b[d]).getSource()===e?v.getTarget():v.getSource();i&&n.setItemState(_,i,!1),n.setItemState(_,r,!0),n.setItemState(v,i,!1),n.setItemState(v,r,!0),v.toFront()}n.emit("afteractivaterelations",{item:t.item,action:"activate"})}},clearActiveState:function(t){var e=this.get("graph");if(this.shouldUpdate(t.item,{event:t,action:"deactivate"})){for(var n=this.activeState,r=this.inactiveState,i=e.get("autoPaint"),o=(e.setAutoPaint(!1),e.getNodes()||[]),a=e.getCombos()||[],s=e.getEdges()||[],u=e.get("vedges")||[],c=o.length,l=a.length,h=s.length,f=u.length,d=0;d<c;d++){var p=o[d];e.clearItemStates(p,[n,r])}for(d=0;d<l;d++){var g=a[d];e.clearItemStates(g,[n,r])}for(d=0;d<h;d++){var m=s[d];e.clearItemStates(m,[n,r,"deactivate"])}for(d=0;d<f;d++){var v=u[d];e.clearItemStates(v,[n,r,"deactivate"])}e.paint(),e.setAutoPaint(i),e.emit("afteractivaterelations",{item:t.item||this.get("item"),action:"deactivate"})}}},Math.min),Tv=Math.max,kv=Math.abs,Ov=["drag","shift","ctrl","alt","control"],Pv=(c={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return-1<Ov.indexOf(this.trigger.toLowerCase())||(this.trigger="shift"),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(t){var e=t.item,n=this.brush;e||"drag"!==this.trigger&&!this.keydown||(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),n=n||this.createBrush(),this.originPoint={x:t.canvasX,y:t.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(t){!this.dragging||"drag"!==this.trigger&&!this.keydown||this.updateBrush(t)},onMouseUp:function(t){this.graph,!this.brush&&!this.dragging||"drag"!==this.trigger&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(t),this.dragging=!1)},clearStates:function(){var t=this.graph,e=this.selectedState,n=t.findAllByState("node",e),r=t.findAllByState("edge",e);n.forEach((function(n){return t.setItemState(n,e,!1)})),r.forEach((function(n){return t.setItemState(n,e,!1)})),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(t){var e=this,n=this.graph,r=this.originPoint,i=this.shouldUpdate,o=this.selectedState,a=(t={x:t.x,y:t.y},r=n.getPointByCanvas(r.x,r.y),Cv(t.x,r.x)),s=Tv(t.x,r.x),u=Cv(t.y,r.y),c=Tv(t.y,r.y),l=[],h=[],f=(n.getNodes().forEach((function(t){var e;t.isVisible()&&(e=t.getBBox()).centerX>=a&&e.centerX<=s&&e.centerY>=u&&e.centerY<=c&&i(t,"select")&&(l.push(t),e=t.getModel(),h.push(e.id),n.setItemState(t,o,!0))})),[]);this.includeEdges&&l.forEach((function(t){t.getOutEdges().forEach((function(t){var r,o;t.isVisible()&&(r=(o=t.getModel()).source,o=o.target,h.includes(r))&&h.includes(o)&&i(t,"select")&&(f.push(t),n.setItemState(t,e.selectedState,!0))}))})),this.selectedEdges=f,this.selectedNodes=l,this.onSelect&&this.onSelect(l,f),n.emit("nodeselectchange",{selectedItems:{nodes:l,edges:f},select:!0})},createBrush:function(){var t=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t},updateBrush:function(t){var e=this.originPoint;this.brush.attr({width:kv(t.canvasX-e.x),height:kv(t.canvasY-e.y),x:Cv(t.canvasX,e.x),y:Cv(t.canvasY,e.y)})},onKeyDown:function(t){var e;t=t.key;t&&(e=this.trigger.toLowerCase(),t=t.toLowerCase(),this.keydown=t===e||"control"===t&&"ctrl"===e||"ctrl"===t&&"control"===e)},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},["shift","ctrl","alt","control"]),Iv=(an={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){return-1<Pv.indexOf(this.trigger.toLowerCase())||(this.trigger="shift"),this.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(t){var e,n,r,i,o,a,s,u,c=this,l=t.item;l&&!l.destroyed&&(e=l.getType(),n=c.graph,o=c.keydown,r=c.multiple,i=c.shouldUpdate,c.shouldBegin.call(c,t))&&(o&&r||(o=n.findAllByState("node",c.selectedState).concat(n.findAllByState("edge",c.selectedState)).concat(n.findAllByState("combo",c.selectedState)),(0,w.each)(o,(function(t){t!==l&&n.setItemState(t,c.selectedState,!1)}))),function(){switch(e){case"node":return c.selectNode;case"edge":return c.selectEdge;case"combo":return c.selectCombo;default:return!1}}()?l.hasState(c.selectedState)?(i.call(c,t)&&n.setItemState(l,c.selectedState,!1),a=n.findAllByState("node",c.selectedState),s=n.findAllByState("edge",c.selectedState),u=n.findAllByState("combo",c.selectedState),n.emit("nodeselectchange",{target:l,selectedItems:{nodes:a,edges:s,combos:u},select:!1})):(i.call(c,t)&&n.setItemState(l,c.selectedState,!0),a=n.findAllByState("node",c.selectedState),s=n.findAllByState("edge",c.selectedState),u=n.findAllByState("combo",c.selectedState),n.emit("nodeselectchange",{target:l,selectedItems:{nodes:a,edges:s,combos:u},select:!0})):(a=n.findAllByState("node",c.selectedState),s=n.findAllByState("edge",c.selectedState),u=n.findAllByState("combo",c.selectedState),n.emit("nodeselectchange",{selectedItems:{nodes:a,edges:s,combos:u},select:!1})))},onCanvasClick:function(t){var e=this,n=this.graph;this.shouldBegin.call(this,t)&&(t=n.findAllByState("node",this.selectedState),(0,w.each)(t,(function(t){n.setItemState(t,e.selectedState,!1)})),t=n.findAllByState("edge",this.selectedState),(0,w.each)(t,(function(t){n.setItemState(t,e.selectedState,!1)})),t=n.findAllByState("combo",this.selectedState),(0,w.each)(t,(function(t){n.setItemState(t,e.selectedState,!1)})),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1}))},onKeyDown:function(t){t=t.key,t&&(t.toLowerCase()===this.trigger.toLowerCase()||"control"===t.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},L),Nv=(en={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var t=this.fixSelectedItems;return t.fixState||(t.fixState="selected"),t.fixAll&&(t.fixLineWidth=!0,t.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0];e=e[1];t.preventDefault(),!e||this.shouldBegin&&!this.shouldBegin.call(this,t)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,e&&(this.endPoint={pageX:e.pageX,pageY:e.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1)},onTouchMove:function(t){var e,n,r,i;this.moveable&&(t.preventDefault(),n=(e=t.originalEvent.touches)[0],e=e[1])&&(this.endPoint||(this.endPoint={pageX:e.pageX,pageY:e.pageY}),n=(r=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)})({x:n.pageX,y:n.pageY},{x:e.pageX,y:e.pageY})/r({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),e=this.originScale*n,this.currentScale=e,r=this.get("minZoom")||this.graph.get("minZoom"),(this.get("maxZoom")||this.graph.get("maxZoom"))<e||e<r||(n=this.get("animate"),r=this.get("animateCfg"),i=this.graph.get("canvas").getPointByClient(t.clientX,t.clientY),this.graph.zoomTo(e,{x:i.x,y:i.y},n,r),this.graph.emit("wheelzoom",t)))},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(t){var e=this,n=this.graph,r=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin.call(this,t))&&this.shouldUpdate.call(this,t)){t.preventDefault();var i=n.get("canvas").getPointByClient(t.clientX,t.clientY),o=this.get("sensitivity"),a=n.getZoom(),s=a,u=(s=a*(t.wheelDelta<0?1-.05*o:1/(1-.05*o)),o=this.get("minZoom")||n.get("minZoom"),this.get("maxZoom")||n.get("maxZoom"));if(u<s?s=u:s<o&&(s=o),this.get("enableOptimize")){var c=this.get("optimizeZoom"),l=(u=this.get("optimized"),n.getNodes()),h=n.getEdges(),f=l.length,d=h.length;if(!u){for(var p=0;p<f;p++)if(!(E=l[p]).destroyed)for(var g=(H=E.get("group").get("children")).length,m=0;m<g;m++)(N=H[m]).destoryed||N.get("isKeyShape")||(N.set("ori-visibility",N.get("ori-visibility")||N.get("visible")),N.hide());for(var v=0;v<d;v++)for(g=(H=(W=h[v]).get("group").get("children")).length,m=0;m<g;m++)(N=H[m]).set("ori-visibility",N.get("ori-visibility")||N.get("visible")),N.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout")),o=setTimeout((function(){var t=n.getZoom();if(e.get("optimized")){e.set("optimized",!1);for(var r=0;r<f;r++){var i=l[r],o=(p=i.get("group").get("children")).length;if(t<c){var a=(m=i.getKeyShape()).get("ori-visibility");m.set("ori-visibility",void 0),a&&m.show()}else for(var s=0;s<o;s++)a=(v=p[s]).get("ori-visibility"),v.set("ori-visibility",void 0),!v.get("visible")&&a&&v.show()}for(var u=0;u<d;u++){var p,g=h[u];o=(p=g.get("group").get("children")).length;if(t<c){var m;a=(m=g.getKeyShape()).get("ori-visibility");m.set("ori-visibility",void 0),a&&m.show()}else{var v;for(s=0;s<o;s++)(v=p[s]).get("visible")||(a=v.get("ori-visibility"),v.set("ori-visibility",void 0),a&&v.show())}}}}),100),this.set("timeout",o)}if(a<=1&&(r.fixAll||r.fixLineWidth||r.fixLabel)){for(var y=n.findAllByState("node",r.fixState),b=n.findAllByState("edge",r.fixState),x=a/s,_=y.length,S=0;S<_;S++){var E,M,A,C,T=(E=y[S]).getContainer(),k=E.getModel(),O=E.getOriginStyle(),P=E.getStateStyle(r.fixState),I=E.get("shapeFactory").getShape(k.type).getStateStyle(r.fixState,E)[r.fixState];if(r.fixAll)s<=1&&(M=(M=(0,w.clone)(T.getMatrix()))||[1,0,0,0,1,0,0,0,1],A=(C=E.getModel()).x,C=C.y,M=Iv(M,[["t",-A,-C],["s",x,x],["t",A,C]]),T.setMatrix(M));else for(g=(H=T.get("children")).length,m=0;m<g;m++){var N=H[m],D=void 0,L=void 0;if(r.fixLabel&&"text"===N.get("type")){D=N.attr("fontSize")||12;var R=P[N.get("name")],B=I[N.get("name")],j=R?R.fontSize:12,F=B?B.fontSize:12,z=j||F||12;if(s<=1&&N.attr("fontSize",z/s),L)break}if(r.fixLineWidth&&N.get("isKeyShape")){L=N.attr("lineWidth")||0;var U=P.lineWidth||I.lineWidth||O.lineWidth||0;if(s<=1&&N.attr("lineWidth",U/s),D)break}}}for(var G=b.length,V=0;V<G;V++){var W,H=(T=(W=b[V]).getContainer()).get("children");for(k=W.getModel(),P=W.getStateStyle(r.fixState),I=W.get("shapeFactory").getShape(k.type).getStateStyle(r.fixState,W)[r.fixState],g=H.length,m=0;m<g;m++){if(N=H[m],D=void 0,L=void 0,(r.fixLabel||r.fixAll)&&"text"===N.get("type")&&(D=N.attr("fontSize")||12,R=P[N.get("name")],B=I[N.get("name")],j=R?R.fontSize:12,F=B?B.fontSize:12,z=j||F||12,s<=1&&N.attr("fontSize",z/s),L))break;if((r.fixLineWidth||r.fixAll)&&N.get("isKeyShape")&&(L=N.attr("lineWidth")||0,U=P.lineWidth||I.lineWidth||1,s<=1&&N.attr("lineWidth",U/s),D))break}}}u=this.get("animate"),o=this.get("animateCfg"),n.zoomTo(s,{x:i.x,y:i.y},u,o),n.emit("wheelzoom",t)}}},o={onMouseEnter:function(t){var e=t.item;this.currentTarget=e,this.showTooltip(t),this.graph.emit("tooltipchange",{item:t.item,action:"show"})},onMouseMove:function(t){this.shouldUpdate(t)?this.currentTarget&&t.item===this.currentTarget&&this.updatePosition(t):this.hideTooltip()},onMouseLeave:function(t){this.shouldEnd(t)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(t){var e,n=this.container;t.item&&!t.item.destroyed&&(n||(n=this.createTooltip(this.graph.get("canvas")),this.container=n),e=this.formatText(t.item.get("model"),t),n.innerHTML=e,ud(this.container,{visibility:"visible"}),this.updatePosition(t))},hideTooltip:function(){ud(this.container,{visibility:"hidden"})},updatePosition:function(t){var e=this.get("shouldBegin"),n=this.width,r=this.height,i=this.container,o=this.graph;e(t)?(e=o.getPointByClient(t.clientX,t.clientY),o=(t=o.getCanvasByPoint(e.x,e.y)).x,e=t.y,t=i.getBoundingClientRect(),n/2<o?o-=t.width:o+=this.offset,r/2<e?e-=t.height:e+=this.offset,n="".concat(o,"px"),r="".concat(e,"px"),ud(this.container,{left:n,top:r,visibility:"visible"})):ud(i,{visibility:"hidden"})},createTooltip:function(t){var e=t.get("el"),n=(e.style.position="relative",td('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>')));return e.parentNode.appendChild(n),ud(n,{position:"absolute",visibility:"visible"}),this.width=t.get("width"),this.height=t.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},f=y({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},o),p=y({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},o),["click","dblclick"]),Dv=sn.calculationItemsBBox,Lv=["click","dblclick"],Rv=sn.isPolygonsIntersect,Bv=sn.pathToPoints,jv=["drag","shift","ctrl","alt","control"],Fv=["click","drag"],zv=["shift","ctrl","control","alt","meta",void 0],Uv=["shift","ctrl","alt","control"],Gv=["shift","ctrl","alt","control","meta"],Vv=(d=((0,w.each)({"drag-canvas":rp,"zoom-canvas":en,"drag-node":hp,"activate-relations":n,"brush-select":c,"click-select":an,"lasso-select":{getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return-1<jv.indexOf(this.trigger.toLowerCase())||(this.trigger="shift"),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(t){var e=this.lasso;t.item||"drag"!==this.trigger&&!this.keydown||(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates("dragstart"),e=e||this.createLasso(),this.dragging=!0,this.originPoint={x:t.x,y:t.y},this.points.push(this.originPoint),e.show())},onDragMove:function(t){!this.dragging||"drag"!==this.trigger&&!this.keydown||(this.points.push({x:t.x,y:t.y}),this.updateLasso(t))},onDragEnd:function(t){!this.lasso&&!this.dragging||"drag"!==this.trigger&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var t=this.points,e=[];return t.length&&(t.forEach((function(t,n){e.push(0===n?["M",t.x,t.y]:["L",t.x,t.y])})),e.push(["L",t[0].x,t[0].y])),e},clearStates:function(t){void 0===t&&(t="canvas:click");var e=this.graph,n=this.selectedState,r=this.shouldDeselect,i=e.findAllByState("node",n),o=e.findAllByState("edge",n);r&&!r({action:t,nodes:i,edges:o})||(i.forEach((function(t){return e.setItemState(t,n,!1)})),o.forEach((function(t){return e.setItemState(t,n,!1)}))),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var t=this,e=this.graph,n=this.shouldUpdate,r=this.points.map((function(t){return[e.getCanvasByPoint(t.x,t.y).x,e.getCanvasByPoint(t.x,t.y).y]})),i=this.selectedState,o=[],a=[],s=(e.getNodes().forEach((function(t){var s,u,c;t.isVisible()&&(u=r,c=(s=t).getKeyShape(),c="path"===s.get("type")?Bv(c.attr("path")):[[(s=c.getCanvasBBox()).minX,s.minY],[s.maxX,s.minY],[s.maxX,s.maxY],[s.minX,s.maxY]],Rv(u,c))&&n(t,"select")&&(o.push(t),s=t.getModel(),a.push(s.id),e.setItemState(t,i,!0))})),[]);this.includeEdges&&o.forEach((function(r){r.getOutEdges().forEach((function(r){var i,o;r.isVisible()&&(i=(o=r.getModel()).source,o=o.target,a.includes(i))&&a.includes(o)&&n(r,"select")&&(s.push(r),e.setItemState(r,t.selectedState,!0))}))})),this.selectedEdges=s,this.selectedNodes=o,this.onSelect&&this.onSelect(o,s),e.emit("nodeselectchange",{selectedItems:{nodes:o,edges:s},select:!0})},createLasso:function(){var t=this.graph.get("delegateGroup").addShape("path",{attrs:y({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(t){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(t){t=t.key,t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},tooltip:f,"edge-tooltip":p,"collapse-expand":{getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var t=Nv.includes(this.trigger)?this.trigger:"click",e={};return e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(t){var e,n,r=t.item;r&&(e=this.graph.findDataById(r.get("id")))&&(n=e.children)&&0!==n.length&&(n=!e.collapsed,this.shouldBegin(t,n))&&(e.collapsed=n,r.getModel().collapsed=n,this.graph.emit("itemcollapsed",{item:t.item,collapsed:n}),this.shouldUpdate(t,n))&&(this.onChange(r,n),this.graph.layout())}},"drag-combo":{getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(t){var e=t.item;return!(!e||e.destroyed||!this.shouldUpdate.call(this,t)||"combo"!==e.getType())},onDragStart:function(t){var e,n,r,i=this,o=this.graph,a=t.item;this.currentShouldEnd=!0,this.validationCombo(t)&&(this.targets=[],e=o.findAllByState("combo",this.selectedState),n=a.get("id"),0===e.filter((function(t){return t=t.get("id"),n===t})).length?this.targets.push(a):this.targets=e,r=[],this.targets.forEach((function(t){t=t.getModel();var e=t.x,n=t.y;t=t.id;r.push({x:e,y:n,id:t})})),this.set("beforeDragItems",r),this.activeState&&this.targets.map((function(t){t=t.getModel();t.parentId&&(t=o.findById(t.parentId))&&o.setItemState(t,i.activeState,!0)})),this.point={},this.originPoint={},this.origin={x:t.x,y:t.y},this.currentItemChildCombos=[],rv(a,(function(t){return!t.destroyed&&(t=t.getModel(),i.currentItemChildCombos.push(t.id),!0)})))},onDrag:function(t){var e,n,r,i,o,a,s,u=this;this.origin&&this.validationCombo(t)&&(this.enableDelegate?this.updateDelegate(t):(this.activeState&&(e=this.graph,i=t.item,n=i.getModel(),r=e.getCombos(),i=i.getBBox(),o=i.centerX,a=i.centerY,s=i.width,r.filter((function(t){return t=t.getModel(),n.parentId,t.id!==n.id&&!u.currentItemChildCombos.includes(t.id)})).map((function(t){var n=t.getBBox(),r=n.centerX,i=n.centerY;n=n.width,r=o-r,i=a-i,r=2*Math.sqrt(r*r+i*i);.8*s<s+n-r?e.setItemState(t,u.activeState,!0):e.setItemState(t,u.activeState,!1)}))),(0,w.each)(this.targets,(function(e){u.updateCombo(e,t)}))))},updatePositions:function(t,e){var n=this;(this.enableDelegate||e)&&(0,w.each)(this.targets,(function(r){n.updateCombo(r,t,e)}))},onDrop:function(t){var e,n,r=this,i=t.item;this.currentShouldEnd=this.shouldEnd.call(this,t,i),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&i&&this.targets&&!i.destroyed&&(e=this.graph,n=i.getModel(),this.targets.map((function(t){t.getModel().parentId!==n.id?(r.activeState&&e.setItemState(i,r.activeState,!1),r.onlyChangeComboSize?e.updateCombo(t):e.updateComboTree(t,n.id,!1)):e.updateCombo(i)})),this.end(i,t),this.endComparison=!0)},onNodeDrop:function(t){var e,n,r,i,o=this;this.targets&&0!==this.targets.length&&(e=this.graph,i=(n=t.item.getModel().comboId)?e.findById(n):void 0,this.currentShouldEnd=this.shouldEnd.call(this,t,i),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd)&&(n?(this.activeState&&(i=e.findById(n),e.setItemState(i,this.activeState,!1)),this.targets.map((function(t){o.onlyChangeComboSize?e.updateCombo(t):n!==t.getID()&&(r=e.findById(n),n!==t.getModel().parentId)&&e.updateComboTree(t,n,!1)}))):this.targets.map((function(t){o.onlyChangeComboSize?e.updateCombo(t):t.getModel().comboId&&e.updateComboTree(t,void 0,!1)})),this.endComparison=!0,this.end(r,t))},onDragEnter:function(t){var e;this.origin&&this.validationCombo(t)&&(t=t.item,e=this.graph,this.activeState)&&e.setItemState(t,this.activeState,!0)},onDragLeave:function(t){var e;this.origin&&this.validationCombo(t)&&(t=t.item,e=this.graph,this.activeState)&&e.setItemState(t,this.activeState,!1)},onDragEnd:function(t){var e,n;this.targets&&0!==this.targets.length&&(e=t.item,this.currentShouldEnd&&this.updatePositions(t),e=this.getParentCombo(e.getModel().parentId),n=this.graph,e&&this.activeState&&n.setItemState(e,this.activeState,!1),this.end(void 0,t))},end:function(t,e){var n,r,i,o=this;this.origin&&(n=this.graph,this.delegateShape&&(n.get("delegateGroup").clear(),this.delegateShape=null),t&&this.activeState&&n.setItemState(t,this.activeState,!1),t||(r=n.get("enabledStack")&&this.enableStack,i={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}},this.targets.map((function(t){var e,a,s;o.onlyChangeComboSize?(n.updateCombo(t),e=(s=t.getModel()).x,a=s.y,s=s.id,i.after.combos.push({x:e,y:a,id:s}),n.pushStack("update",i)):n.updateComboTree(t,void 0,r)}))),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0)},traverse:function(t,e,n){var r,i=this;!1!==e(t,n=void 0===n?{}:n)&&t&&(r=t.get("combos"),(0,w.each)(r,(function(t){i.traverse(t,e,n)})),r=t.get("nodes"),(0,w.each)(r,(function(t){i.traverse(t,e,n)})))},updateCombo:function(t,e,n){this.updateSingleItem(t,e,n),e={},this.traverse(t,(function(t,e){return!t.destroyed&&(t.getEdges().forEach((function(t){return e[t.getID()]=t})),!0)}),e),Object.values(e).forEach((function(t){return t.refresh()}))},updateSingleItem:function(t,e,n){var r=this.origin,i=this.graph,o=t.getModel(),a=t.get("id");this.point[a]||(this.point[a]={x:o.x,y:o.y}),o=e.x-r.x+this.point[a].x,a=e.y-r.y+this.point[a].y;n&&(o+=r.x-e.x,a+=r.y-e.y),i.updateItem(t,{x:o,y:a},!1)},getParentCombo:function(t){var e=this.graph;if(t&&(e=e.findById(t),e))return e},updateDelegate:function(t){var e,n,r,i,o,a,s=this.graph;this.delegateShape?(e=t.x-this.origin.x+this.originPoint.minX,t=t.y-this.origin.y+this.originPoint.minY,this.delegateShape.attr({x:e,y:t})):(e=s.get("delegateGroup"),t=null,s=(t=1<this.targets.length?Dv(this.targets):this.targets[0].getBBox()).x,n=t.y,r=t.width,i=t.height,o=t.minX,a=t.minY,this.originPoint={x:s,y:n,width:r,height:i,minX:o,minY:a},s=y(y({},df.delegateStyle),this.delegateStyle),this.delegateShape=e.addShape("rect",{attrs:y({width:t.width,height:t.height,x:t.x,y:t.y},s),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape)}},"collapse-expand-combo":{getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var t=Lv.includes(this.trigger)?this.trigger:"dblclick",e={};return e["combo:".concat(t)]="onComboClick",e},onComboClick:function(t){t=t.item;var e=this.graph,n=this.relayout;t&&!t.destroyed&&"combo"===t.getType()&&(t=t.getModel().id)&&(e.collapseExpandCombo(t),n&&e.get("layout")?e.layout():e.refreshPositions())}},"create-edge":{getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var t;return-1<Fv.indexOf(this.trigger.toLowerCase())||(this.trigger="click"),this.key&&-1===zv.indexOf(this.key.toLowerCase())&&(this.trigger=void 0),"drag"===this.trigger?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===this.trigger&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),this.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(t){var e;this.key&&!this.keydown||(e=t.item)&&e.getID()!==this.source&&"node"===e.getType()||this.cancelCreating({item:this.edge,x:t.x,y:t.y})},onClick:function(t){var e,n,r,i,o,a,s=this;s.key&&!s.keydown||(n=t.item,e=s.graph,n=n.getModel(),r=s.getEdgeConfig,s.addingEdge&&s.edge?s.shouldEnd.call(s,t)&&(a=void 0,a=r&&(0,w.isFunction)(r)?r({source:s.source,target:n.id}):s.edgeConfig,i=y({target:n.id},a),s.source===n.id&&(i.type="loop"),e.emit("beforecreateedge",{}),e.updateItem(s.edge,i,!1),e.get("enabledStack")&&(i=y(y({},s.edge.getModel()),{itemType:"edge"}),(o={}).edges=[i],e.pushStack("add",{before:{},after:o})),e.emit("aftercreateedge",{edge:s.edge}),s.edge.getKeyShape().set("capture",!0),s.edge=null,s.addingEdge=!1):s.shouldBegin.call(s,t)&&(a=void 0,a=r&&(0,w.isFunction)(r)?r({source:n.id,target:n.id}):s.edgeConfig,s.edge=e.addItem("edge",y({source:n.id,target:n.id},a),!1),s.source=n.id,s.addingEdge=!0,s.edge.getKeyShape().set("capture",!1)))},updateEndPoint:function(t){var e=this;e.key&&!e.keydown||(e.edge&&e.edge.destroyed&&e.cancelCreating({item:e.edge}),t={x:t.x,y:t.y},e.graph.findById(e.source)?e.addingEdge&&e.edge&&e.graph.updateItem(e.edge,{target:t},!1):e.addingEdge=!1)},cancelCreating:function(t){var e,n,r=this;r.key&&!r.keydown||(e=r.graph,n=t.item,r.addingEdge&&(r.edge===n||null!=(t=null==(n=t.target)?void 0:n.isCanvas)&&t.call(n))&&(r.edge&&!r.edge.destroyed&&e.removeItem(r.edge,!1),r.edge=null,r.addingEdge=!1))},onKeyDown:function(t){t=t.key,t&&(t.toLowerCase()===this.key.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.addingEdge&&this.edge&&(this.graph.removeItem(this.edge,!1),this.addingEdge=!1,this.edge=null),this.keydown=!1}},"shortcuts-call":{getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return-1<Uv.indexOf(this.trigger.toLowerCase())||(this.trigger="ctrl"),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(t){if(t=t.key,t){var e,n=this.trigger.toLowerCase();t=t.toLowerCase(),n=(this.triggerKeydown||(this.triggerKeydown=t===n||"control"===t&&"ctrl"===n||"ctrl"===t&&"control"===n),this.graph);if(!n[this.functionName])return{};(this.triggerKeydown&&!this.combinedKey||(e=this.combinedKey.toLowerCase(),this.triggerKeydown&&(t===e||"control"===t&&"ctrl"===e||"ctrl"===t&&"control"===e)))&&(this.functionParams&&this.functionParams.length?n[this.functionName].apply(n,this.functionParams):n[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},"scroll-canvas":{getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0}},getEvents:function(){return this.zoomKey&&-1!==Gv.indexOf(this.zoomKey)||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(t){var e,n,r,i,o,a,s,u=this,c=this.graph,l=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];if(l.includes("control")&&l.push("ctrl"),l.some((function(e){return t["".concat(e,"Key")]}))?(l=c.get("canvas").getPointByClient(t.clientX,t.clientY),e=c.getZoom(),0<t.wheelDelta?e+=.05*e:e-=.05*e,c.zoomTo(e,{x:l.x,y:l.y})):(e=t.deltaX||t.movementX,!(l=t.deltaY||t.movementY)&&-1<navigator.userAgent.indexOf("Firefox")&&(l=125*-t.wheelDelta/3),n=this.graph.get("width"),r=this.graph.get("height"),s=this.graph.get("canvas").getCanvasBBox(),i=this.scalableRange,o=this.scalableRange,i<1&&-1<i&&(i*=n,o*=r),E=s.minX,f=s.maxX,a=s.minY,s=s.maxY,0<e?f<-i?e=0:f-e<-i&&(e=f+i):e<0&&(n+i<E?e=0:n+i<E-e&&(e=E-(n+i))),0<l?s<-o?l=0:s-l<-o&&(l=s+o):l<0&&(r+o<a?l=0:r+o<a-l&&(l=a-(r+o))),"x"===this.get("direction")?l=0:"y"===this.get("direction")&&(e=0),c.translate(-e,-l)),t.preventDefault(),this.get("enableOptimize")){var h=this.get("optimizeZoom"),f=this.get("optimized"),d=c.getNodes(),p=c.getEdges(),g=d.length,m=p.length;if(!f){for(var v=0;v<g;v++){var y=d[v];if(!y.destroyed)for(var b=(w=y.get("group").get("children")).length,x=0;x<b;x++)(S=w[x]).destoryed||S.get("isKeyShape")||(S.set("ori-visibility",S.get("ori-visibility")||S.get("visible")),S.hide())}for(var _=0;_<m;_++){var w,S;for(b=(w=p[_].get("group").get("children")).length,x=0;x<b;x++)(S=w[x]).set("ori-visibility",S.get("ori-visibility")||S.get("visible")),S.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var E=setTimeout((function(){var t=c.getZoom();if(u.get("optimized")){u.set("optimized",!1);for(var e=0;e<g;e++){var n=d[e],r=(s=n.get("group").get("children")).length;if(t<h)(o=(l=n.getKeyShape()).get("ori-visibility"))&&l.show();else for(var i=0;i<r;i++){var o=(v=s[i]).get("ori-visibility");!v.get("visible")&&o&&v.show()}}for(var a=0;a<m;a++){var s,l,f=p[a];r=(s=f.get("group").get("children")).length;if(t<h)(o=(l=f.getKeyShape()).get("ori-visibility"))&&l.show();else{var v;for(i=0;i<r;i++)(v=s[i]).get("visible")||(o=v.get("ori-visibility"))&&v.show()}}}}),100);this.set("timeout",E)}}}},(function(t,e){zu(e,t)})),y(y({},e),r)),tn={version:df.version,Graph:on,TreeGraph:A,Util:sn,Layout:xf.Layouts,TreeLayout:rn,registerLayout:function(t,e){e.isCustomLayout=!0,xf.Layouts[t]=(0,xf.registerLayout)(t,e)},Global:df,registerBehavior:zu,registerCombo:u,registerEdge:i,registerNode:s,Minimap:lp.Minimap,Grid:lp.Grid,Bundling:lp.Bundling,Menu:lp.Menu,ToolBar:lp.ToolBar,Tooltip:lp.Tooltip,Legend:lp.Legend,TimeBar:lp.TimeBar,SnapLine:lp.SnapLine,Fisheye:lp.Fisheye,ImageMinimap:lp.ImageMinimap,EdgeFilterLens:lp.EdgeFilterLens,Algorithm:d,Arrow:N,Marker:nn,Shape:un},tn.version="4.7.0",tn)},69787:function(t,e,n){"use strict";n.r(e),n.d(e,{Graph:function(){return x},GraphWithEvent:function(){return C},algorithm:function(){return i},comparision:function(){return a},essence:function(){return o},generate:function(){return s}});var r,i={},o=(n.r(i),n.d(i,{components:function(){return N},dfs:function(){return D},dijkstra:function(){return F},dijkstraAll:function(){return z},findCycles:function(){return G},floydWarshall:function(){return rt},isAcyclic:function(){return tt},postorder:function(){return et},preorder:function(){return nt},prim:function(){return I},tarjan:function(){return U},topsort:function(){return Q}}),{}),a=(n.r(o),n.d(o,{hasSelfLoop:function(){return yt},isGraph:function(){return gt},isNullGraph:function(){return vt},isSimpleGraph:function(){return mt}}),{}),s=(n.r(a),n.d(a,{containAllSameEdges:function(){return lt},containAllSameNodes:function(){return ct},containSameEdges:function(){return ot},containSameNodes:function(){return it},getSameEdges:function(){return st},getSameNodes:function(){return at},isGraphComplement:function(){return bt},isGraphContainsAnother:function(){return ft},isGraphOptionSame:function(){return ut},isGraphSame:function(){return ht}}),{});function u(t,e){var n=t.get(e)||0;t.set(e,n+1)}function c(t,e){var n=t.get(e);void 0!==n&&(0<(n-=1)?t.set(e,n):t.delete(e))}function l(t,e,n,i){return e=String(e),n=String(n),!t&&n<e&&(t=e,e=n,n=t),e+r.EDGE_KEY_DELIM+n+r.EDGE_KEY_DELIM+(void 0===i?r.DEFAULT_EDGE_NAME:i)}function h(t,e,n,r){var i=String(e),o=String(n);e={v:e,w:n};return!t&&o<i&&(n=e.v,e.v=e.w,e.w=n),void 0!==r&&(e.name=r),e}function f(t,e){return l(t,e.v,e.w,e.name)}function d(t){return"function"==typeof t}n.r(s),n.d(s,{getGraphComplement:function(){return xt}}),(e=r=r||{}).DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM="";var p=function(t){return t.nodes().map((function(e){return e={id:e,value:t.node(e),parent:t.parent(e)},void 0===e.value&&delete e.value,void 0===e.parent&&delete e.parent,e}))},g=function(t){return t.edges().map((function(e){var n=t.edge(e);n={v:e.v,w:e.w,value:n,name:e.name};return void 0===n.name&&delete n.name,void 0===n.value&&delete n.value,n}))};function m(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){var r,i;r=t,i=n[e],e in r?Object.defineProperty(r,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[e]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b={compound:!1,multigraph:!1,directed:!0},x=function(){function t(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=this,o=t;if(!(i instanceof o))throw new TypeError("Cannot call a class as a function");this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=r.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return e.directed},this.isMultigraph=function(){return e.multigraph},this.isCompound=function(){return e.compound},this.setGraph=function(t){return e.label=t,e},this.graph=function(){return e.label},this.setDefaultNodeLabel=function(t){return d(t)?e.defaultNodeLabelFn=t:e.defaultNodeLabelFn=function(){return t},e},this.nodeCount=function(){return e.nodeCountNum},this.node=function(t){return e.nodesLabelMap.get(t)},this.nodes=function(){return Array.from(e.nodesLabelMap.keys())},this.sources=function(){return e.nodes().filter((function(t){return!(null!=(t=e.inEdgesMap.get(t))&&t.size)}))},this.sinks=function(){return e.nodes().filter((function(t){return!(null!=(t=e.outEdgesMap.get(t))&&t.size)}))},this.setNodes=function(t,n){return t.map((function(t){return e.setNode(t,n)})),e},this.hasNode=function(t){return e.nodesLabelMap.has(t)},this.checkCompound=function(){if(!e.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(t){if(e.isCompound()){var n=null==(n=e.parentMap)?void 0:n.get(t);if(n!==e.GRAPH_NODE)return n}},this.removeFromParentsChildList=function(t){var n=e.parentMap.get(t);e.childrenMap.get(n).delete(t)},this.setParent=function(t,n){e.checkCompound();for(var r,i=void 0===n?e.GRAPH_NODE:n,o=e.parent(i);o;){if(t===o)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");o=e.parent(o)}n&&e.setNode(n),e.setNode(t),e.removeFromParentsChildList(t),null!=(a=e.parentMap)&&a.set(t,i);var a=e.childrenMap.get(i);return a.set(t,!0),null!=(r=e.childrenMap)&&r.set(i,a),e},this.children=function(t){var n,r=void 0===t?e.GRAPH_NODE:t;return e.isCompound()?(n=null==(n=e.childrenMap)?void 0:n.get(r))?Array.from(n.keys()):void 0:r===e.GRAPH_NODE?e.nodes():t&&e.hasNode(t)?[]:void 0},this.predecessors=function(t){return t=e.predecessorsMap.get(t),t?Array.from(t.keys()):void 0},this.successors=function(t){return t=e.successorsMap.get(t),t?Array.from(t.keys()):void 0},this.neighbors=function(t){var n;if(e.hasNode(t))return Array.from(new Set(null==(n=e.predecessors(t))?void 0:n.concat(e.successors(t))))},this.isLeaf=function(t){var n;return e.isDirected()?!(null!=(n=e.successors(t))&&n.length):!(null!=(n=e.neighbors(t))&&n.length)},this.filterNodes=function(n){var r=e.directed,i=e.multigraph,o=e.compound,a=new t({directed:r,multigraph:i,compound:o});return a.setGraph(e.graph()),e.nodes().forEach((function(t){n(t)&&a.setNode(t,e.node(t))})),e.edges().forEach((function(t){a.hasNode(t.v)&&a.hasNode(t.w)&&a.setEdgeObj(t,e.edge(t))})),o&&a.nodes().forEach((function(t){a.setParent(t,function(t){for(var n=e.parent(t);void 0!==n&&!a.hasNode(n);)n=e.parent(n);return n}(t))})),a},this.setDefaultEdgeLabel=function(t){return d(t)?e.defaultEdgeLabelFn=t:e.defaultEdgeLabelFn=function(){return t},e},this.edgeCount=function(){return e.edgeCountNum},this.setEdgeObj=function(t,n){return e.setEdge(t.v,t.w,n,t.name)},this.setPath=function(t,n){return t.reduce((function(t,r){return e.setEdge(t,r,n),r})),e},this.edgeFromArgs=function(t,n,r){return e.edge({v:t,w:n,name:r})},this.edge=function(t){return e.edgesLabelsMap.get(f(e.isDirected(),t))},this.hasEdge=function(t,n,r){return e.edgesLabelsMap.has(f(e.isDirected(),{v:t,w:n,name:r}))},this.removeEdgeObj=function(t){var n=t.v,r=t.w;t=t.name;return e.removeEdge(n,r,t)},this.edges=function(){return Array.from(e.edgesMap.values())},this.inEdges=function(t,n){if(t=e.inEdgesMap.get(t),t)return Array.from(t.values()).filter((function(t){return!n||t.v===n}))},this.outEdges=function(t,n){if(t=e.outEdgesMap.get(t),t)return Array.from(t.values()).filter((function(t){return!n||t.w===n}))},this.nodeEdges=function(t,n){var r;return e.hasNode(t)&&null!=(r=e.inEdges(t,n))?r.concat(e.outEdges(t,n)):void 0},this.toJSON=function(){var t=e;return void 0===(t={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:p(t),edges:g(t),value:t.graph()}).value&&delete t.value,t},this.nodeInDegree=function(t){return t=e.inEdgesMap.get(t),t?t.size:0},this.nodeOutDegree=function(t){return t=e.outEdgesMap.get(t),t?t.size:0},this.nodeDegree=function(t){return e.nodeInDegree(t)+e.nodeOutDegree(t)},this.source=function(t){return t.v},this.target=function(t){return t.w},i=v(v({},b),n),this.compound=i.compound,this.directed=i.directed,this.multigraph=i.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}var e,n,i;return e=t,(n=[{key:"setNode",value:function(t,e){var n=this.nodesLabelMap,r=this.defaultNodeLabelFn,i=this.isCompound,o=this.parentMap,a=this.childrenMap,s=this.inEdgesMap,u=this.outEdgesMap,c=this.predecessorsMap,l=this.successorsMap;return n.has(t)?void 0!==e&&n.set(t,e):(n.set(t,e||r(t)),i()&&(null!=o&&o.set(t,this.GRAPH_NODE),null!=a&&a.set(t,new Map),null!=a&&a.has(this.GRAPH_NODE)||null!=a&&a.set(this.GRAPH_NODE,new Map),null!=a)&&null!=(n=a.get(this.GRAPH_NODE))&&n.set(t,!0),[s,u,c,l].forEach((function(e){return e.set(t,new Map)})),this.nodeCountNum+=1),this}},{key:"removeNode",value:function(t){var e,n,r,i,o,a,s,u,c=this;return this.hasNode(t)&&(e=function(t){c.removeEdge(t.v,t.w,t.name)},n=this.inEdgesMap,r=this.outEdgesMap,i=this.predecessorsMap,o=this.successorsMap,a=this.nodesLabelMap,this.isCompound()&&(this.removeFromParentsChildList(t),null!=(s=this.parentMap)&&s.delete(t),null!=(s=this.children(t))&&s.forEach((function(t){return c.setParent(t)})),null!=(s=this.childrenMap))&&s.delete(t),s=n.get(t),u=r.get(t),Array.from(s.values()).forEach(e),Array.from(u.values()).forEach(e),a.delete(t),n.delete(t),r.delete(t),i.delete(t),o.delete(t),--this.nodeCountNum),this}},{key:"setEdge",value:function(t,e,n,r){t=h(this.isDirected(),t,e,r),e=f(this.isDirected(),t);var i=t.v,o=t.w;if(this.edgesLabelsMap.has(e))this.edgesLabelsMap.set(e,n);else{if(void 0!==r&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(i),this.setNode(o),this.edgesLabelsMap.set(e,n||this.defaultEdgeLabelFn(i,o,r)),Object.freeze(t),this.edgesMap.set(e,t);n=this.predecessorsMap.get(o),r=this.successorsMap.get(i);u(n,i),u(r,o),null!=(n=this.inEdgesMap.get(o))&&n.set(e,t),null!=(r=this.outEdgesMap.get(i))&&r.set(e,t),this.edgeCountNum+=1}return this}},{key:"removeEdge",value:function(t,e,n){var r,i=l(this.isDirected(),t,e,n);return this.edgesMap.get(i)&&(e=(t=h(this.isDirected(),t,e,n)).v,n=t.w,this.edgesLabelsMap.delete(i),this.edgesMap.delete(i),t=this.predecessorsMap.get(n),r=this.successorsMap.get(e),c(t,e),c(r,n),this.inEdgesMap.get(n).delete(i),this.outEdgesMap.get(e).delete(i),--this.edgeCountNum),this}}])&&y(e.prototype,n),i&&y(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(this,arguments)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=A(t);e=n?(e=A(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments),r=this;if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}x.fromJSON=function(t){var e=new x(t.options);return void 0!==t.value&&e.setGraph(t.value),t.nodes.forEach((function(t){e.setNode(t.id,t.value),t.parent&&e.setParent(t.id,t.parent)})),t.edges.forEach((function(t){e.setEdge(t.v,t.w,t.value,t.name)})),e};var C=function(){var t=i,e=x;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e);var n,r=M(i);function i(){var t=this,e=i;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))).eventPool={},t}return t=i,(e=[{key:"appendEvent",value:function(t,e){this.eventPool[t]||(this.eventPool[t]=[]),this.eventPool[t].push(e)}},{key:"removeEvent",value:function(t,e){this.eventPool[t]&&-1<(e=this.eventPool[t].indexOf(e))&&this.eventPool[t].splice(e,1)}},{key:"emitEvent",value:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.eventPool[t]&&this.eventPool[t].forEach((function(t){t.apply(void 0,n)}))}},{key:"setNode",value:function(t,e){return S(A(i.prototype),"setNode",this).call(this,t,e),this.emitEvent("nodeAdd",t,e),this}},{key:"removeNode",value:function(t){return S(A(i.prototype),"removeNode",this).call(this,t),this.emitEvent("nodeRemove",t),this}},{key:"setEdge",value:function(t,e,n,r){return S(A(i.prototype),"setEdge",this).call(this,t,e,n,r),this.emitEvent("edgeAdd",t,e,n,r),this}},{key:"removeEdge",value:function(t,e,n){return S(A(i.prototype),"removeEdge",this).call(this,t,e,n),this.emitEvent("edgeRemove",t,e,n),this}}])&&w(t.prototype,e),n&&w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,e,n){return e&&T(t.prototype,e),n&&T(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function O(t,e,n,r,i,o){r.includes(e)||(r.push(e),n||o.push(e),i(e).forEach((function(e){return O(t,e,n,r,i,o)})),n&&o.push(e))}var P=k((function t(){var e=this;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.arr=[],this.keyIndice=new Map,this.size=function(){return e.arr.length},this.keys=function(){return e.arr.map((function(t){return t.key}))},this.has=function(t){return e.keyIndice.has(t)},this.priority=function(t){if(t=e.keyIndice.get(t),void 0!==t)return e.arr[t].priority},this.swap=function(t,n){var r=e.arr,i=e.keyIndice,o=[r[t],r[n]],a=o[0];o=o[1];r[t]=o,r[n]=a,i.set(a.key,n),i.set(o.key,t)},this.innerDecrease=function(t){for(var n,r,i=e.arr,o=i[t].priority,a=t;0!==a&&!((null==(n=i[r=a>>1])?void 0:n.priority)<o);)e.swap(a,r),a=r},this.heapify=function(t){var n=e.arr,r=t<<1,i=1+r,o=t;r<n.length&&(o=n[r].priority<n[o].priority?r:o,(o=i<n.length&&n[i].priority<n[o].priority?i:o)!==t)&&(e.swap(t,o),e.heapify(o))},this.min=function(){if(0===e.size())throw new Error("Queue underflow");return e.arr[0].key},this.add=function(t,n){var r,i=e.keyIndice,o=e.arr;return!i.has(t)&&(r=o.length,i.set(t,r),o.push({key:t,priority:n}),e.innerDecrease(r),!0)},this.removeMin=function(){e.swap(0,e.arr.length-1);var t=e.arr.pop();return e.keyIndice.delete(t.key),e.heapify(0),t.key},this.decrease=function(t,n){if(!e.has(t))throw new Error("There's no key named ".concat(t));var r=e.keyIndice.get(t);if(n>e.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(t," Old: + ").concat(e.arr[r].priority," New: ").concat(n));e.arr[r].priority=n,e.innerDecrease(r)}})),I=function(t,e){var n=new x,r=new Map,i=new P;function o(t){var n=t.v===u?t.w:t.v,o=i.priority(n);void 0!==o&&(t=e(t))<o&&(r.set(n,u),i.decrease(n,t))}if(0!==t.nodeCount()){t.nodes().forEach((function(t){i.add(t,Number.POSITIVE_INFINITY),n.setNode(t)})),i.decrease(t.nodes()[0],0);for(var a=!1;0<i.size();){var s,u=i.removeMin();if(r.has(u))n.setEdge(u,r.get(u));else{if(a)throw new Error("Input graph is not connected: "+t.graph());a=!0}null!=(s=t.nodeEdges(u))&&s.forEach(o)}}return n},N=function(t){var e=new Set,n=[];return t.nodes().forEach((function(r){for(var i=[],o=[r];0<o.length;){var a,s=o.pop();e.has(s)||(e.add(s),i.push(s),null!=(a=t.successors(s))&&a.forEach((function(t){return o.push(t)})),null!=(a=t.predecessors(s))&&a.forEach((function(t){return o.push(t)})))}i.length&&n.push(i)})),n},D=function(t,e,n){function r(e){return t.isDirected()?t.successors(e):t.neighbors(e)}e=Array.isArray(e)?e:[e];var i=[],o=[];return e.forEach((function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);O(t,e,"post"===n,o,r,i)})),i};function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){var n;if(t)return"string"==typeof t?R(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B(){return 1}function j(t,e,n,r){function i(t){var e=t.v!==o?t.v:t.w,r=s.get(e),i=n(t),c=a.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);c<r.distance&&(r.distance=c,r.predecessor=o,u.decrease(e,c))}var o,a,s=new Map,u=new P;for(t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s.set(t,{distance:n}),u.add(t,n)}));0<u.size()&&(o=u.removeMin(),!(a=s.get(o))||a.distance!==Number.POSITIVE_INFINITY);)r(o).forEach(i);var c={};return Array.from(s.entries()).forEach((function(t){t=L(t,2);var e=t[0];t=t[1];return c[String(e)]=t,c})),c}var F=function(t,e,n,r){return j(t,e,n||B,r||function(e){return t.outEdges(e)})},z=function(t,e,n){var r={};return t.nodes().forEach((function(i){return r[String(i)]=F(t,i,e,n),r})),r},U=function(t){var e=0,n=[],r=new Map,i=[];return t.nodes().forEach((function(o){r.has(o)||function o(a){var s,u={onStack:!0,lowlink:e,index:e};if(r.set(a,u),e+=1,n.push(a),null!=(s=t.successors(a))&&s.forEach((function(t){var e;r.has(t)?null!=(e=r.get(t))&&e.onStack&&(e=r.get(t),u.lowlink=Math.min(u.lowlink,e.index)):(o(t),e=r.get(t),u.lowlink=Math.min(u.lowlink,e.lowlink))})),u.lowlink===u.index){var c=[];do{var l=n.pop()}while(r.get(l).onStack=!1,c.push(l),a!==l);i.push(c)}}(o)})),i},G=function(t){return U(t).filter((function(e){return 1<e.length||1===e.length&&t.hasEdge(e[0],e[0])}))};function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t){var e=X();return function(){var n,r=Z(t);n=e?(n=Z(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===V(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function Y(t){var e="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return q(t,arguments,Z(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),K(n,t)}(t)}function q(t,e,n){return(q=X()?Reflect.construct:function(t,e,n){var r=[null];return r.push.apply(r,e),e=new(Function.bind.apply(t,r)),n&&K(e,n.prototype),e}).apply(null,arguments)}function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $=function(t){var e=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t);var n,r,i=H(o);function o(){var t=this,e=o;if(t instanceof e)return i.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return e=o,n&&W(e.prototype,n),r&&W(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Y(Error));function J(){return 1}var Q=function(t){var e=new Set,n=new Set,r=[];if(t.sinks().forEach((function i(o){if(n.has(o))throw new $;var a;e.has(o)||(n.add(o),e.add(o),null!=(a=t.predecessors(o))&&a.forEach(i),n.delete(o),r.push(o))})),e.size!==t.nodeCount())throw new $;return r},tt=function(t){try{Q(t)}catch(t){if(t instanceof $)return!1;throw t}return!0},et=function(t,e){return D(t,e,"post")},nt=function(t,e){return D(t,e,"pre")},rt=function(t,e,n){return r=e||J,i=n||function(e){return t.outEdges(e)},o={},(a=t.nodes()).forEach((function(t){var e=String(t);o[e]={},o[e][e]={distance:0},a.forEach((function(n){t!==n&&(o[e][String(n)]={distance:Number.POSITIVE_INFINITY})})),i(t).forEach((function(n){var i=n.v===t?n.w:n.v;n=r(n);o[e][String(i)]={distance:n,predecessor:t}}))})),a.forEach((function(t){var e=String(t),n=o[e];a.forEach((function(t){t=String(t);var r=o[t];a.forEach((function(t){t=String(t);var i=r[e],o=n[t];t=r[t],i=i.distance+o.distance;i<t.distance&&(t.distance=i,t.predecessor=o.predecessor)}))}))})),o;var r,i,o,a},it=function(t,e){for(var n=t.nodes(),r=0;r<n.length;r++){var i=n[r];if(e.hasNode(i))return!0}return!1},ot=function(t,e){for(var n=t.edges(),r=0;r<n.length;r++){var i=n[r];if(e.hasEdge(i.v,i.w,i.name))return!0}return!1},at=function(t,e){return t.nodes().filter((function(t){return e.hasNode(t)}))},st=function(t,e){return t.edges().filter((function(t){return e.hasEdge(t.v,t.w,t.name)}))},ut=function(t,e){return t.isCompound()===e.isCompound()&&t.isDirected()===e.isDirected()&&t.isMultigraph()===e.isMultigraph()},ct=function(t,e){return at(t,e).length===t.nodes().length},lt=function(t,e){return st(t,e).length===t.edges().length},ht=function(t,e){return ut(t,e)&&t.nodeCount()===e.nodeCount()&&ct(t,e)&&t.edgeCount()===e.edgeCount()&&lt(t,e)},ft=function(t,e){return ct(t,e)&&lt(t,e)};function dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){var n;if(t)return"string"==typeof t?pt(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gt(t){return t instanceof x}function mt(t){if(t.isMultigraph())return!1;for(var e=t.edges(),n=new Map,r=0;r<e.length;r++){var i=e[r];if(i.v===i.w)return!1;i=dt([i.v,i.w].sort(),2);var o=i[0];i=i[1],o="".concat(o,"-").concat(i);if(n.has(o))return!1;n.set(o,!0)}return!0}function vt(t){return 0===t.nodes().length}function yt(t){for(var e=t.edges(),n=0;n<e.length;n++){var r=e[n];if(r.v===r.w)return!0}return!1}var bt=function(t,e){var n;return!(!mt(t)||!mt(e)||!ct(t,e)||ot(t,e)||(n=t.nodeCount(),t.edgeCount()+e.edgeCount()!==n*(n-1)/2))},xt=function(t){if(!mt(t))return null;for(var e=t.nodeCount(),n=new x({compound:t.isCompound(),directed:t.isDirected(),multigraph:t.isMultigraph()}),r=t.nodes(),i=0;i<e;i++){var o=r[i];n.setNode(o,t.node(o));for(var a=i+1;a<e;a++){var s=r[a];t.hasEdge(o,s)||n.setEdge(o,s)}}return n}},81746:function(t){var e;e=function(){return e=[function(t,e,n){"use strict";var r=n(4);e.a=function(t){return Array.isArray?Array.isArray(t):Object(r.a)(t,"Array")}},function(t,e,n){"use strict";e.a=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)}},function(t,e,n){"use strict";var r=n(0),i=n(13);e.a=function(t,e){if(t)if(Object(r.a)(t))for(var n=0,o=t.length;n<o&&!1!==e(t[n],n);n++);else if(Object(i.a)(t))for(var a in t)if(t.hasOwnProperty(a)&&!1===e(t[a],a))break}},function(t,e,n){"use strict";var r=n(4);e.a=function(t){return Object(r.a)(t,"Function")}},function(t,e,n){"use strict";var r={}.toString;e.a=function(t,e){return r.call(t)==="[object "+e+"]"}},function(t,e,n){"use strict";var r=n(4);e.a=function(t){return Object(r.a)(t,"Number")}},function(t,e,n){"use strict";e.a=function(t){return null==t}},function(t,e,n){n=n(33).mix,t.exports={assign:n}},function(t,e,n){"use strict";var r=n(4);e.a=function(t){return Object(r.a)(t,"String")}},function(t,e,n){"use strict";var r=n(15),i=n(4);e.a=function(t){if(!Object(r.a)(t)||!Object(i.a)(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},function(t,e,n){"use strict";var r=n(6);e.a=function(t){return Object(r.a)(t)?"":t.toString()}},function(t,e,n){var r=n(18);n=function(){function t(t,e){this.options=e=void 0===e?{}:e,this.rootNode=r(t,e)}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=n},function(t,e,n){"use strict";var r=n(1);e.a=function(t,e){return!!Object(r.a)(t)&&-1<t.indexOf(e)}},function(t,e,n){"use strict";e.a=function(t){var e=typeof t;return null!==t&&"object"==e||"function"==e}},function(t,e,n){"use strict";var r=n(2),i=n(1);e.a=function(t,e){var n;return Object(i.a)(t)?(n=[],Object(r.a)(t,(function(t,r){e(t,r)&&n.push(t)})),n):t}},function(t,e,n){"use strict";e.a=function(t){return"object"==typeof t&&null!==t}},function(t,e,n){"use strict";function r(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}e.a=function(t,e,n,i){return e&&r(t,e),n&&r(t,n),i&&r(t,i),t}},function(t,e,n){var r=n(30),i=["LR","RL","TB","BT","H","V"],o=["LR","RL","H"],a=i[0];t.exports=function(t,e,n){var s=e.direction||a;if(e.isHorizontal=-1<o.indexOf(s),s&&-1===i.indexOf(s))throw new TypeError("Invalid direction: "+s);s===i[0]?n(t,e):s===i[1]?(n(t,e),t.right2left()):s===i[2]?n(t,e):s===i[3]?(n(t,e),t.bottom2top()):s!==i[4]&&s!==i[5]||(u=(s=r(t,e)).left,s=s.right,n(u,e),n(s,e),e.isHorizontal?u.right2left():u.bottom2top(),s.translate(u.x-s.x,u.y-s.y),t.x=u.x,t.y=s.y,n=t.getBoundingBox(),e.isHorizontal?n.top<0&&t.translate(0,-n.top):n.left<0&&t.translate(-n.left,0));var u=e.fixedRoot;return(u=void 0===u||u)&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t}},function(t,e,n){var r=n(7),i={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){var e=t.label||" ";return t.width||18*e.split("").length}};function o(t,e){var n=this;if(n.vgap=n.hgap=0,t instanceof o)return t;n.data=t;var r=e.getHGap(t),i=e.getVGap(t);return n.preH=e.getPreH(t),n.preV=e.getPreV(t),n.width=e.getWidth(t),n.height=e.getHeight(t),n.width+=n.preH,n.height+=n.preV,n.id=e.getId(t),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,i),n}r.assign(o.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){this.hgap+=t,this.vgap+=e,this.width+=2*t,this.height+=2*e},eachNode:function(t){for(var e,n=[this];e=n.shift();)t(e),n=e.children.concat(n)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,n=[this];e=n.shift();)t(e),n=n.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode((function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)})),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode((function(n){n.x+=t,n.y+=e,n.x+=n.preH,n.y+=n.preV}))},right2left:function(){var t=this.getBoundingBox();this.eachNode((function(e){e.x=e.x-2*(e.x-t.left)-e.width})),this.translate(t.width,0)},bottom2top:function(){var t=this.getBoundingBox();this.eachNode((function(e){e.y=e.y-2*(e.y-t.top)-e.height})),this.translate(0,t.height)}}),t.exports=function(t,e,n){var a,s=new o(t,e=r.assign({},i,e=void 0===e?{}:e)),u=[s];if(!n&&!t.collapsed)for(;a=u.shift();)if(!a.data.collapsed){var c=e.getChildren(a.data),l=c?c.length:0;if(a.children=new Array(l),c&&l)for(var h=0;h<l;h++){var f=new o(c[h],e);a.children[h]=f,u.push(f),f.parent=a,f.depth=a.depth+1}}return s}},function(t,e,n){"use strict";var r=n(6),i=n(20);e.a=function(t,e){var n=Object(i.a)(e),o=n.length;if(Object(r.a)(t))return!o;for(var a=0;a<o;a+=1){var s=n[a];if(e[s]!==t[s]||!(s in t))return!1}return!0}},function(t,e,n){"use strict";var r=n(2),i=n(3);n=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return Object(r.a)(t,(function(n,r){Object(i.a)(t)&&"prototype"===r||e.push(r)})),e};e.a=n},function(t,e,n){"use strict";var r=n(1),i=Array.prototype.splice;e.a=function(t,e){if(!Object(r.a)(t))return[];for(var n=t?e.length:0,o=n-1;n--;){var a=e[n];n!==o&&void 0===a||i.call(t,a,1)}return t}},function(t,e,n){"use strict";var r=n(12),i=n(2);e.a=function(t){var e=[];return Object(i.a)(t,(function(t){Object(r.a)(e,t)||e.push(t)})),e}},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(24);e.a=function(t,e){var n;return e?(Object(i.a)(e)||(n=Object(r.a)(e)?e:e.replace(/\s+/g,"").split("*"),e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}),Object(o.a)(t,e)):{0:t}}},function(t,e,n){"use strict";var r=n(2),i=n(0),o=n(3),a=Object.prototype.hasOwnProperty;e.a=function(t,e){var n,s,u;return e&&Object(i.a)(t)?(n={},s=Object(o.a)(e)?e:function(t){return t[e]},Object(r.a)(t,(function(t){u=s(t),a.call(n,u)?n[u].push(t):n[u]=[t]})),n):{}}},function(t,e,n){"use strict";e.a=function(t,e){return t.hasOwnProperty(e)}},function(t,e,n){"use strict";var r=n(2),i=n(3);n=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return Object(r.a)(t,(function(n,r){Object(i.a)(t)&&"prototype"===r||e.push(n)})),e};e.a=n},function(t,e,n){"use strict";var r={}.toString;e.a=function(t){return r.call(t).replace(/^\[object /,"").replace(/]$/,"")}},function(t,e,n){"use strict";var r=Object.prototype;e.a=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;if(t&&e&&!Object(a.a)(t)&&!Object(a.a)(e)){if(Object(o.a)(t)||Object(o.a)(e)){if(t.length!==e.length)return!1;for(var n=!0,s=0;s<t.length&&(n=r(t[s],e[s]));s++);return n}if(Object(i.a)(t)||Object(i.a)(e)){var u=Object.keys(t),c=Object.keys(e);if(u.length!==c.length)return!1;for(n=!0,s=0;s<u.length&&(n=r(t[u[s]],e[u[s]]));s++);return n}}return!1}var i=n(15),o=n(1),a=n(8);e.a=r},function(t,e,n){var r=n(18);t.exports=function(t,e){for(var n=r(t.data,e,!0),i=r(t.data,e,!0),o=t.children.length,a=Math.round(o/2),s=e.getSide||function(t,e){return e<a?"right":"left"},u=0;u<o;u++){var c=t.children[u];("right"===s(c,u)?i:n).children.push(c)}return n.eachNode((function(t){t.isRoot()||(t.side="left")})),i.eachNode((function(t){t.isRoot()||(t.side="right")})),{left:n,right:i}}},function(t,e,n){n={compactBox:n(32),dendrogram:n(114),indented:n(116),mindmap:n(118)},t.exports=n},function(t,e,n){var r=n(11),i=n(113),o=n(17),a=n(7),s=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n,r.prototype.execute=function(){return o(this.rootNode,this.options,i)},r}(r),u={};t.exports=function(t,e){return e=a.assign({},u,e),new s(t,e).execute()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),i=(n.d(e,"contains",(function(){return r.a})),n.d(e,"includes",(function(){return r.a})),n(34)),o=(n.d(e,"difference",(function(){return i.a})),n(35)),a=(n.d(e,"find",(function(){return o.a})),n(36)),s=(n.d(e,"findIndex",(function(){return a.a})),n(37)),u=(n.d(e,"firstValue",(function(){return s.a})),n(38)),c=(n.d(e,"flatten",(function(){return u.a})),n(39)),l=(n.d(e,"flattenDeep",(function(){return c.a})),n(40)),h=(n.d(e,"getRange",(function(){return l.a})),n(41)),f=(n.d(e,"pull",(function(){return h.a})),n(21)),d=(n.d(e,"pullAt",(function(){return f.a})),n(42)),p=(n.d(e,"reduce",(function(){return d.a})),n(43)),g=(n.d(e,"remove",(function(){return p.a})),n(44)),m=(n.d(e,"sortBy",(function(){return g.a})),n(45)),v=(n.d(e,"union",(function(){return m.a})),n(22)),y=(n.d(e,"uniq",(function(){return v.a})),n(46)),b=(n.d(e,"valuesOfKey",(function(){return y.a})),n(47)),x=(n.d(e,"head",(function(){return b.a})),n(48)),_=(n.d(e,"last",(function(){return x.a})),n(49)),w=(n.d(e,"startsWith",(function(){return _.a})),n(50)),S=(n.d(e,"endsWith",(function(){return w.a})),n(14)),E=(n.d(e,"filter",(function(){return S.a})),n(51)),M=(n.d(e,"every",(function(){return E.a})),n(52)),A=(n.d(e,"some",(function(){return M.a})),n(53)),C=(n.d(e,"group",(function(){return A.a})),n(24)),T=(n.d(e,"groupBy",(function(){return C.a})),n(23)),k=(n.d(e,"groupToMap",(function(){return T.a})),n(54)),O=(n.d(e,"getWrapBehavior",(function(){return k.a})),n(55)),P=(n.d(e,"wrapBehavior",(function(){return O.a})),n(56)),I=(n.d(e,"number2color",(function(){return P.a})),n(57)),N=(n.d(e,"parseRadius",(function(){return I.a})),n(58)),D=(n.d(e,"clamp",(function(){return N.a})),n(59)),L=(n.d(e,"fixedBase",(function(){return D.a})),n(60)),R=(n.d(e,"isDecimal",(function(){return L.a})),n(61)),B=(n.d(e,"isEven",(function(){return R.a})),n(62)),j=(n.d(e,"isInteger",(function(){return B.a})),n(63)),F=(n.d(e,"isNegative",(function(){return j.a})),n(64)),z=(n.d(e,"isNumberEqual",(function(){return F.a})),n(65)),U=(n.d(e,"isOdd",(function(){return z.a})),n(66)),G=(n.d(e,"isPositive",(function(){return U.a})),n(67)),V=(n.d(e,"maxBy",(function(){return G.a})),n(68)),W=(n.d(e,"minBy",(function(){return V.a})),n(69)),H=(n.d(e,"mod",(function(){return W.a})),n(70)),Y=(n.d(e,"toDegree",(function(){return H.a})),n(71)),q=(n.d(e,"toInteger",(function(){return Y.a})),n(72)),X=(n.d(e,"toRadian",(function(){return q.a})),n(73)),K=(n.d(e,"forIn",(function(){return X.a})),n(25)),Z=(n.d(e,"has",(function(){return K.a})),n(74)),$=(n.d(e,"hasKey",(function(){return Z.a})),n(75)),J=(n.d(e,"hasValue",(function(){return $.a})),n(20)),Q=(n.d(e,"keys",(function(){return J.a})),n(19)),tt=(n.d(e,"isMatch",(function(){return Q.a})),n(26)),et=(n.d(e,"values",(function(){return tt.a})),n(76)),nt=(n.d(e,"lowerCase",(function(){return et.a})),n(77)),rt=(n.d(e,"lowerFirst",(function(){return nt.a})),n(78)),it=(n.d(e,"substitute",(function(){return rt.a})),n(79)),ot=(n.d(e,"upperCase",(function(){return it.a})),n(80)),at=(n.d(e,"upperFirst",(function(){return ot.a})),n(27)),st=(n.d(e,"getType",(function(){return at.a})),n(81)),ut=(n.d(e,"isArguments",(function(){return st.a})),n(0)),ct=(n.d(e,"isArray",(function(){return ut.a})),n(1)),lt=(n.d(e,"isArrayLike",(function(){return ct.a})),n(82)),ht=(n.d(e,"isBoolean",(function(){return lt.a})),n(83)),ft=(n.d(e,"isDate",(function(){return ht.a})),n(84)),dt=(n.d(e,"isError",(function(){return ft.a})),n(3)),pt=(n.d(e,"isFunction",(function(){return dt.a})),n(85)),gt=(n.d(e,"isFinite",(function(){return pt.a})),n(6)),mt=(n.d(e,"isNil",(function(){return gt.a})),n(86)),vt=(n.d(e,"isNull",(function(){return mt.a})),n(5)),yt=(n.d(e,"isNumber",(function(){return vt.a})),n(13)),bt=(n.d(e,"isObject",(function(){return yt.a})),n(15)),xt=(n.d(e,"isObjectLike",(function(){return bt.a})),n(9)),_t=(n.d(e,"isPlainObject",(function(){return xt.a})),n(28)),wt=(n.d(e,"isPrototype",(function(){return _t.a})),n(87)),St=(n.d(e,"isRegExp",(function(){return wt.a})),n(8)),Et=(n.d(e,"isString",(function(){return St.a})),n(4)),Mt=(n.d(e,"isType",(function(){return Et.a})),n(88)),At=(n.d(e,"isUndefined",(function(){return Mt.a})),n(89)),Ct=(n.d(e,"isElement",(function(){return At.a})),n(90)),Tt=(n.d(e,"requestAnimationFrame",(function(){return Ct.a})),n(91)),kt=(n.d(e,"clearAnimationFrame",(function(){return Tt.a})),n(92)),Ot=(n.d(e,"augment",(function(){return kt.a})),n(93)),Pt=(n.d(e,"clone",(function(){return Ot.a})),n(94)),It=(n.d(e,"debounce",(function(){return Pt.a})),n(95)),Nt=(n.d(e,"memoize",(function(){return It.a})),n(96)),Dt=(n.d(e,"deepMix",(function(){return Nt.a})),n(2)),Lt=(n.d(e,"each",(function(){return Dt.a})),n(97)),Rt=(n.d(e,"extend",(function(){return Lt.a})),n(98)),Bt=(n.d(e,"indexOf",(function(){return Rt.a})),n(99)),jt=(n.d(e,"isEmpty",(function(){return Bt.a})),n(29)),Ft=(n.d(e,"isEqual",(function(){return jt.a})),n(100)),zt=(n.d(e,"isEqualWith",(function(){return Ft.a})),n(101)),Ut=(n.d(e,"map",(function(){return zt.a})),n(102)),Gt=(n.d(e,"mapValues",(function(){return Ut.a})),n(16)),Vt=(n.d(e,"mix",(function(){return Gt.a})),n.d(e,"assign",(function(){return Gt.a})),n(103)),Wt=(n.d(e,"get",(function(){return Vt.a})),n(104)),Ht=(n.d(e,"set",(function(){return Wt.a})),n(105)),Yt=(n.d(e,"pick",(function(){return Ht.a})),n(106)),qt=(n.d(e,"throttle",(function(){return Yt.a})),n(107)),Xt=(n.d(e,"toArray",(function(){return qt.a})),n(10)),Kt=(n.d(e,"toString",(function(){return Xt.a})),n(108)),Zt=(n.d(e,"uniqueId",(function(){return Kt.a})),n(109)),$t=(n.d(e,"noop",(function(){return Zt.a})),n(110)),Jt=(n.d(e,"identity",(function(){return $t.a})),n(111)),Qt=(n.d(e,"size",(function(){return Jt.a})),n(112));n.d(e,"Cache",(function(){return Qt.a}))},function(t,e,n){"use strict";var r=n(14),i=n(12);e.a=function(t,e){return void 0===e&&(e=[]),Object(r.a)(t,(function(t){return!Object(i.a)(e,t)}))}},function(t,e,n){"use strict";var r=n(3),i=n(19),o=n(0),a=n(9);e.a=function(t,e){var n;if(Object(o.a)(t)&&(Object(r.a)(e)&&(n=e),n=Object(a.a)(e)?function(t){return Object(i.a)(t,e)}:n))for(var s=0;s<t.length;s+=1)if(n(t[s]))return t[s];return null}},function(t,e,n){"use strict";e.a=function(t,e,n){for(var r=n=void 0===n?0:n;r<t.length;r++)if(e(t[r],r))return r;return-1}},function(t,e,n){"use strict";var r=n(6),i=n(0);e.a=function(t,e){for(var n=null,o=0;o<t.length;o++){var a=t[o][e];if(!Object(r.a)(a)){n=Object(i.a)(a)?a[0]:a;break}}return n}},function(t,e,n){"use strict";var r=n(0);e.a=function(t){if(!Object(r.a)(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e}},function(t,e,n){"use strict";function r(t,e){if(void 0===e&&(e=[]),Object(i.a)(t))for(var n=0;n<t.length;n+=1)r(t[n],e);else e.push(t);return e}var i=n(0);e.a=r},function(t,e,n){"use strict";var r=n(0),i=n(14);e.a=function(t){if(!(t=Object(i.a)(t,(function(t){return!isNaN(t)}))).length)return{min:0,max:0};if(Object(r.a)(t[0])){for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);t=e}var o=Math.max.apply(null,t);return{min:Math.min.apply(null,t),max:o}}},function(t,e,n){"use strict";var r=Array.prototype,i=r.splice,o=r.indexOf;e.a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var a,s=e[r];-1<(a=o.call(t,s));)i.call(t,a,1);return t}},function(t,e,n){"use strict";var r=n(2),i=n(0),o=n(9);e.a=function(t,e,n){var a;return Object(i.a)(t)||Object(o.a)(t)?(a=n,Object(r.a)(t,(function(t,n){a=e(a,t,n)})),a):t}},function(t,e,n){"use strict";var r=n(1),i=n(21);e.a=function(t,e){var n=[];if(Object(r.a)(t)){for(var o=-1,a=[],s=t.length;++o<s;){var u=t[o];e(u,o,t)&&(n.push(u),a.push(o))}Object(i.a)(t,a)}return n}},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(3);e.a=function(t,e){var n,a=Object(o.a)(e)?function(t,n){return e(t)-e(n)}:(n=[],Object(i.a)(e)?n.push(e):Object(r.a)(e)&&(n=e),function(t,e){for(var r=0;r<n.length;r+=1){var i=n[r];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0});return t.sort(a),t}},function(t,e,n){"use strict";var r=n(22);e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(r.a)([].concat.apply([],t))}},function(t,e,n){"use strict";var r=n(2),i=n(0),o=n(6);e.a=function(t,e){var n=[],a={};return t.forEach((function(t){t=t[e],Object(o.a)(t)||(Object(i.a)(t)||(t=[t]),Object(r.a)(t,(function(t){a[t]||(n.push(t),a[t]=!0)})))})),n}},function(t,e,n){"use strict";e.a=function(t){if(Object(r.a)(t))return t[0]};var r=n(1)},function(t,e,n){"use strict";e.a=function(t){if(Object(r.a)(t))return t[t.length-1]};var r=n(1)},function(t,e,n){"use strict";var r=n(0),i=n(8);e.a=function(t,e){return!(!Object(r.a)(t)&&!Object(i.a)(t))&&t[0]===e}},function(t,e,n){"use strict";var r=n(0),i=n(8);e.a=function(t,e){return!(!Object(r.a)(t)&&!Object(i.a)(t))&&t[t.length-1]===e}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1}},function(t,e,n){"use strict";var r=n(23);e.a=function(t,e){if(!e)return[t];var n,i=Object(r.a)(t,e),o=[];for(n in i)o.push(i[n]);return o}},function(t,e,n){"use strict";e.a=function(t,e){return t["_wrap_"+e]}},function(t,e,n){"use strict";e.a=function(t,e){return t["_wrap_"+e]||(t["_wrap_"+e]=function(n){t[e](n)})}},function(t,e,n){"use strict";var r={};e.a=function(t){var e=r[t];if(!e){for(var n=t.toString(16),i=n.length;i<6;i++)n="0"+n;r[t]=e="#"+n}return e}},function(t,e,n){"use strict";var r=n(0);e.a=function(t){var e=0,n=0,i=0,o=0;return Object(r.a)(t)?1===t.length?e=n=i=o=t[0]:2===t.length?(e=i=t[0],n=o=t[1]):3===t.length?(e=t[0],n=o=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],o=t[3]):e=n=i=o=t,{r1:e,r2:n,r3:i,r4:o}}},function(t,e,n){"use strict";e.a=function(t,e,n){return t<e?e:n<t?n:t}},function(t,e,n){"use strict";e.a=function(t,e){e=e.toString();var n=e.indexOf(".");return-1===n?Math.round(t):(20<(e=e.substr(n+1).length)&&(e=20),parseFloat(t.toFixed(e)))}},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t%1!=0}},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t%2==0}},function(t,e,n){"use strict";var r=n(5);n=Number.isInteger||function(t){return Object(r.a)(t)&&t%1==0};e.a=n},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t<0}},function(t,e,n){"use strict";e.a=function(t,e,n){return void 0===n&&(n=r),Math.abs(t-e)<n};var r=1e-5},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t%2!=0}},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&0<t}},function(t,e,n){"use strict";var r=n(2),i=n(0),o=n(3);e.a=function(t,e){var n,a,s;if(Object(i.a)(t))return n=t[0],s=Object(o.a)(e)?e(t[0]):t[0][e],Object(r.a)(t,(function(t){a=Object(o.a)(e)?e(t):t[e],s<a&&(n=t,s=a)})),n}},function(t,e,n){"use strict";var r=n(2),i=n(0),o=n(3);e.a=function(t,e){var n,a,s;if(Object(i.a)(t))return n=t[0],s=Object(o.a)(e)?e(t[0]):t[0][e],Object(r.a)(t,(function(t){(a=Object(o.a)(e)?e(t):t[e])<s&&(n=t,s=a)})),n}},function(t,e,n){"use strict";e.a=function(t,e){return(t%e+e)%e}},function(t,e,n){"use strict";var r=180/Math.PI;e.a=function(t){return r*t}},function(t,e,n){"use strict";e.a=parseInt},function(t,e,n){"use strict";var r=Math.PI/180;e.a=function(t){return r*t}},function(t,e,n){"use strict";n=n(2),e.a=n.a},function(t,e,n){"use strict";n=n(25),e.a=n.a},function(t,e,n){"use strict";var r=n(12),i=n(26);e.a=function(t,e){return Object(r.a)(Object(i.a)(t),e)}},function(t,e,n){"use strict";var r=n(10);e.a=function(t){return Object(r.a)(t).toLowerCase()}},function(t,e,n){"use strict";var r=n(10);e.a=function(t){return t=Object(r.a)(t),t.charAt(0).toLowerCase()+t.substring(1)}},function(t,e,n){"use strict";e.a=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t}},function(t,e,n){"use strict";var r=n(10);e.a=function(t){return Object(r.a)(t).toUpperCase()}},function(t,e,n){"use strict";var r=n(10);e.a=function(t){return t=Object(r.a)(t),t.charAt(0).toUpperCase()+t.substring(1)}},function(t,e,n){"use strict";var r=n(4);e.a=function(t){return Object(r.a)(t,"Arguments")}},function(t,e,n){"use strict";var r=n(4);e.a=function(t){return Object(r.a)(t,"Boolean")}},function(t,e,n){"use strict";var r=n(4);e.a=function(t){return Object(r.a)(t,"Date")}},function(t,e,n){"use strict";var r=n(4);e.a=function(t){return Object(r.a)(t,"Error")}},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&isFinite(t)}},function(t,e,n){"use strict";e.a=function(t){return null===t}},function(t,e,n){"use strict";var r=n(4);e.a=function(t){return Object(r.a)(t,"RegExp")}},function(t,e,n){"use strict";e.a=function(t){return void 0===t}},function(t,e,n){"use strict";e.a=function(t){return t instanceof Element||t instanceof HTMLDocument}},function(t,e,n){"use strict";e.a=function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}},function(t,e,n){"use strict";e.a=function(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}},function(t,e,n){"use strict";var r=n(16),i=n(3);e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],o=1;o<t.length;o++){var a=t[o];Object(i.a)(a)&&(a=a.prototype),Object(r.a)(n.prototype,a)}}},function(t,e,n){"use strict";function r(t){if("object"!=typeof t||null===t)return t;if(Object(i.a)(t))for(var e=[],n=0,o=t.length;n<o;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=r(t[n]):e[n]=t[n];else for(var a in e={},t)"object"==typeof t[a]&&null!=t[a]?e[a]=r(t[a]):e[a]=t[a];return e}var i=n(0);e.a=r},function(t,e,n){"use strict";e.a=function(t,e,n){var r;return function(){var i=this,o=arguments,a=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||t.apply(i,o)}),e),a&&t.apply(i,o)}}},function(t,e,n){"use strict";var r=n(3);e.a=function(t,e){var n;if(Object(r.a)(t))return(n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o,a=e?e.apply(this,r):r[0],s=n.cache;return s.has(a)?s.get(a):(o=t.apply(this,r),s.set(a,o),o)}).cache=new Map,n;throw new TypeError("Expected a function")}},function(t,e,n){"use strict";var r=n(0),i=n(9),o=5;e.a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var a=0;a<e.length;a+=1)!function t(e,n,a,s){for(var u in a=a||0,s=s||o,n){var c;n.hasOwnProperty(u)&&(null!==(c=n[u])&&Object(i.a)(c)?(Object(i.a)(e[u])||(e[u]={}),a<s?t(e[u],c,a+1,s):e[u]=n[u]):Object(r.a)(c)?(e[u]=[],e[u]=e[u].concat(c)):void 0!==c&&(e[u]=c))}}(t,e[a]);return t}},function(t,e,n){"use strict";var r=n(16),i=n(3);e.a=function(t,e,n,o){Object(i.a)(e)||(n=e,e=t,t=function(){});var a=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}return n.prototype=t,t=new n,t.constructor=e,t},s=a(e.prototype,t);return t.prototype=Object(r.a)(s,t.prototype),t.superclass=a(e.prototype,e),Object(r.a)(s,n),Object(r.a)(t,o),t}},function(t,e,n){"use strict";var r=n(1);e.a=function(t,e){if(!Object(r.a)(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,o=0;o<t.length;o++)if(t[o]===e){i=o;break}return i}},function(t,e,n){"use strict";var r=n(6),i=n(1),o=n(27),a=n(28),s=Object.prototype.hasOwnProperty;e.a=function(t){if(!Object(r.a)(t)){if(Object(i.a)(t))return!t.length;var e,n=Object(o.a)(t);if("Map"===n||"Set"===n)return!t.size;if(Object(a.a)(t))return!Object.keys(t).length;for(e in t)if(s.call(t,e))return!1}return!0}},function(t,e,n){"use strict";var r=n(3),i=n(29);e.a=function(t,e,n){return Object(r.a)(n)?!!n(t,e):Object(i.a)(t,e)}},function(t,e,n){"use strict";var r=n(2),i=n(1);e.a=function(t,e){var n;return Object(i.a)(t)?(n=[],Object(r.a)(t,(function(t,r){n.push(e(t,r))})),n):t}},function(t,e,n){"use strict";function r(t){return t}var i=n(6),o=n(13);e.a=function(t,e){void 0===e&&(e=r);var n={};return Object(o.a)(t)&&!Object(i.a)(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n}},function(t,e,n){"use strict";var r=n(8);e.a=function(t,e,n){for(var i=0,o=Object(r.a)(e)?e.split("."):e;t&&i<o.length;)t=t[o[i++]];return void 0===t||i<o.length?n:t}},function(t,e,n){"use strict";var r=n(13),i=n(8),o=n(5);e.a=function(t,e,n){var a=t,s=Object(i.a)(e)?e.split("."):e;return s.forEach((function(t,e){e<s.length-1?(Object(r.a)(a[t])||(a[t]=Object(o.a)(s[e+1])?[]:{}),a=a[t]):a[t]=n})),t}},function(t,e,n){"use strict";var r=n(2),i=n(9),o=Object.prototype.hasOwnProperty;e.a=function(t,e){var n;return null!==t&&Object(i.a)(t)?(n={},Object(r.a)(e,(function(e){o.call(t,e)&&(n[e]=t[e])})),n):{}}},function(t,e,n){"use strict";e.a=function(t,e,n){function r(){c=!1===n.leading?0:Date.now(),o=null,u=t.apply(a,s),o||(a=s=null)}function i(){var i=Date.now(),l=(c||!1!==n.leading||(c=i),e-(i-c));return a=this,s=arguments,l<=0||e<l?(o&&(clearTimeout(o),o=null),c=i,u=t.apply(a,s),o||(a=s=null)):o||!1===n.trailing||(o=setTimeout(r,l)),u}var o,a,s,u,c=0;return n=n||{},i.cancel=function(){clearTimeout(o),c=0,o=a=s=null},i}},function(t,e,n){"use strict";var r=n(1);e.a=function(t){return Object(r.a)(t)?Array.prototype.slice.call(t):[]}},function(t,e,n){"use strict";var r={};e.a=function(t){return r[t=t||"g"]?r[t]+=1:r[t]=1,t+r[t]}},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";e.a=function(t){return Object(r.a)(t)?0:Object(i.a)(t)?t.length:Object.keys(t).length};var r=n(6),i=n(1)},function(t,e,n){"use strict";function r(){this.map={}}r.prototype.has=function(t){return void 0!==this.map[t]},r.prototype.get=function(t,e){return t=this.map[t],void 0===t?e:t},r.prototype.set=function(t,e){this.map[t]=e},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(t){delete this.map[t]},r.prototype.size=function(){return Object.keys(this.map).length},e.a=r},function(t,e){function n(t,e,n,r){void 0===r&&(r=[]);var i=this;i.w=t||0,i.h=e||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function r(t,e){!function t(e,n,r){r?e.y+=n:e.x+=n,e.children.forEach((function(e){t(e,n,r)}))}(t,-function t(e,n){var r=n?e.y:e.x;return e.children.forEach((function(e){r=Math.min(t(e,n),r)})),r}(t,e),e)}n.fromNode=function(t,e){var r;return t?(r=[],t.children.forEach((function(t){r.push(n.fromNode(t,e))})),e?new n(t.height,t.width,t.x,r):new n(t.width,t.height,t.y,r)):null},t.exports=function(t,e){function i(t){0===t.cs?((t.el=t).er=t).msel=t.mser=0:(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function o(t){return t.y+t.h}function a(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}e=(e=void 0===e?{}:e).isHorizontal,function t(e,n,r){void 0===r&&(r=0),n?(e.x=r,r+=e.width):(e.y=r,r+=e.height),e.children.forEach((function(e){t(e,n,r)}))}(t,e);var s=n.fromNode(t,e);return function t(e){if(0!==e.cs){t(e.c[0]);for(var n=a(o(e.c[0].el),0,null),r=1;r<e.cs;++r){t(e.c[r]);for(var s,u,c,l,h,f=o(e.c[r].er),d=(_=x=b=y=v=m=g=p=d=void 0,e),p=r,g=n,m=d.c[p-1],v=m.mod,y=d.c[p],b=y.mod;null!==m&&null!==y;){o(m)>g.low&&(g=g.nxt),0<(x=v+m.prelim+m.w-(b+y.prelim))&&(b+=x,function(t,e,n,r){var i;t.c[e].mod+=r,t.c[e].msel+=r,t.c[e].mser+=r,n!==e-1&&(i=e-n,t.c[n+1].shift+=r/i,t.c[e].shift-=r/i,t.c[e].change-=r-r/i)}(d,p,g.index,x));var x=o(m),_=o(y);x<=_&&null!==(m=function(t){return 0===t.cs?t.tr:t.c[t.cs-1]}(m))&&(v+=m.mod),_<=x&&null!==(y=function(t){return 0===t.cs?t.tl:t.c[0]}(y))&&(b+=y.mod)}!m&&y?(l=h=c=u=s=void 0,u=p,c=y,h=b,(l=(s=d).c[0].el).tl=c,h=h-c.mod-s.c[0].msel,l.mod+=h,l.prelim-=h,s.c[0].el=s.c[u].el,s.c[0].msel=s.c[u].msel):m&&!y&&(u=s=h=l=c=void 0,l=p,h=m,s=v,(u=(c=d).c[l].er).tr=h,s=s-h.mod-c.c[l].mser,u.mod+=s,u.prelim-=s,c.c[l].er=c.c[l-1].er,c.c[l].mser=c.c[l-1].mser),n=a(f,r,n)}e.prelim=(e.c[0].prelim+e.c[0].mod+e.c[e.cs-1].mod+e.c[e.cs-1].prelim+e.c[e.cs-1].w)/2-e.w/2}i(e)}(s),function t(e,n){n+=e.mod,e.x=e.prelim+n;for(var r=e,i=0,o=0,a=0;a<r.cs;a++)i+=r.c[a].shift,o+=i+r.c[a].change,r.c[a].mod+=o;for(var s=0;s<e.cs;s++)t(e.c[s],n)}(s,0),function t(e,n,r){r?n.y=e.x:n.x=e.x,e.c.forEach((function(e,i){t(e,n.children[i],r)}))}(s,t,e),r(t,e),t}},function(t,e,n){var r=n(11),i=n(115),o=n(17),a=n(7),s=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n,r.prototype.execute=function(){return this.rootNode.width=0,o(this.rootNode,this.options,i)},r}(r),u={};t.exports=function(t,e){return e=a.assign({},u,e),new s(t,e).execute()}},function(t,e,n){var r=n(7);function i(t,e){void 0===t&&(t=0),void 0===e&&(e=[]),this.x=this.y=0,this.leftChild=this.rightChild=null,this.height=0,this.children=e}var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},o,e);var n,a=0,s=function t(e){if(!e)return null;e.width=0,e.depth&&e.depth>a&&(a=e.depth);var n=e.children,r=n.length,o=new i(e.height,[]);return n.forEach((function(e,n){e=t(e),o.children.push(e),0===n&&(o.leftChild=e),n===r-1&&(o.rightChild=e)})),o.originNode=e,o.isLeaf=e.isLeaf(),o}(t);return function t(e){var n;return e.isLeaf||0===e.children.length?e.drawingDepth=a:(n=e.children.map(t),n=Math.min.apply(null,n),e.drawingDepth=n-1),e.drawingDepth}(s),function t(r){r.x=r.drawingDepth*e.rankSep,r.isLeaf?(r.y=0,n&&(r.y=n.y+n.height+e.nodeSep,r.originNode.parent!==n.originNode.parent)&&(r.y+=e.subTreeSep),n=r):(r.children.forEach((function(e){t(e)})),r.y=(r.leftChild.y+r.rightChild.y)/2)}(s),function t(e,n,r){r?(n.x=e.x,n.y=e.y):(n.x=e.y,n.y=e.x),e.children.forEach((function(e,i){t(e,n.children[i],r)}))}(s,t,e.isHorizontal),t}},function(t,e,n){var r=n(11),i=n(117),o=n(30),a=n(7),s=["LR","RL","H"],u=s[0],c=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n,r.prototype.execute=function(){var t=this.options,e=this.rootNode,n=(t.isHorizontal=!0,t.indent),r=(n=void 0===n?20:n,t.dropCap),a=(r=void 0===r||r,t.direction||u);if(a&&-1===s.indexOf(a))throw new TypeError("Invalid direction: "+a);return a===s[0]?i(e,n,r):a===s[1]?(i(e,n,r),e.right2left()):a===s[2]&&(t=(a=o(e,t)).left,a=a.right,i(t,n,r),t.right2left(),i(a,n,r),n=t.getBoundingBox(),a.translate(n.width,0),e.x=a.x-e.width/2),e},r}(r),l={};t.exports=function(t,e){return e=a.assign({},l,e),new c(t,e).execute()}},function(t,e){t.exports=function(t,e,n){var r=null;t.eachNode((function(t){!function(t,e,n,r){if(n="function"==typeof n?n(t):n*t.depth,!r)try{if(t.id===t.parent.children[0].id)return t.x+=n,t.y=e?e.y:0}catch(t){}t.x+=n,t.y=e?e.y+e.height:0}(t,r,e,n),r=t}))}},function(t,e,n){var r=n(11),i=n(119),o=n(17),a=n(7),s=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n,r.prototype.execute=function(){return o(this.rootNode,this.options,i)},r}(r),u={};t.exports=function(t,e){return e=a.assign({},u,e),new s(t,e).execute()}},function(t,e,n){var r=n(7),i={getSubTreeSep:function(){return 0}};t.exports=function(t,e){e=r.assign({},i,e=void 0===e?{}:e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse((function(t){t.x=t.parent.x+t.parent.width})),t.parent=null,function t(e,n){var r=0;return e.children.length?e.children.forEach((function(e){r+=t(e,n)})):r=e.height,e._subTreeSep=n.getSubTreeSep(e.data),e.totalHeight=Math.max(e.height,r)+2*e._subTreeSep,e.totalHeight}(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode((function(t){var e=t.children,n=e.length;if(n){var r=e[0];if(r.startY=t.startY+t._subTreeSep,1===n)r.y=t.y+t.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var o=e[i];o.startY=e[i-1].startY+e[i-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}})),function t(e){var n,r,i,o,a=e.children,s=a.length;s&&(a.forEach((function(e){t(e)})),n=a[0],r=(s=a[s-1]).y-n.y+s.height,i=0,a.forEach((function(t){i+=t.totalHeight})),r>e.height?e.y=n.y+r/2-e.height/2:1!==a.length||e.height>i?(o=e.y+(e.height-r)/2-n.y,a.forEach((function(t){t.translate(0,o)}))):e.y=(n.y+n.height/2+s.y+s.height/2)/2-e.height/2)}(t)}}],n={},t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=31);function t(r){var i;return(n[r]||(i=n[r]={i:r,l:!1,exports:{}},e[r].call(i.exports,i,i.exports,t),i.l=!0,i)).exports}var e,n},t.exports=e()},83360:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&("get"in i?e.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)},o=(Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0,n(95326));Object.defineProperty(e,"registerLayout",{enumerable:!0,get:function(){return o.registerLayout}}),Object.defineProperty(e,"unRegisterLayout",{enumerable:!0,get:function(){return o.unRegisterLayout}}),Object.defineProperty(e,"getLayoutByName",{enumerable:!0,get:function(){return o.getLayoutByName}}),i(n(2584),e)},62329:function(t,e){"use strict";function n(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}Object.defineProperty(e,"__esModule",{value:!0}),e.Base=void 0,n.prototype.layout=function(t){return this.init(t),this.execute(!0)},n.prototype.init=function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[]},n.prototype.execute=function(t){},n.prototype.executeWithWorker=function(){},n.prototype.getDefaultCfg=function(){return{}},n.prototype.updateCfg=function(t){t&&Object.assign(this,t)},n.prototype.getType=function(){return"base"},n.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},e.Base=n},64885:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(e,"__esModule",{value:!0}),e.CircularLayout=void 0,n(62329)),a=n(49784);function s(t,e){return t=t.degree,e=e.degree,t<e?-1:e<t?1:0}u=o.Base,i(c,u),c.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},c.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,r=e.length;if(0!==r){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var i=t.center;if(1!==r){for(var o,s,u,c,l=t.radius,h=t.startRadius,f=t.endRadius,d=t.divisions,p=t.startAngle,g=t.endAngle,m=t.angleRatio,v=t.ordering,y=t.clockwise,b=t.nodeSpacing,x=t.nodeSize,_=(g-p)/r,w={},S=(e.forEach((function(t,e){w[t.id]=e})),t.nodeMap=w,(0,a.getDegree)(e.length,w,n)),E=(t.degrees=S,b?(o=(0,a.getFuncByUnknownType)(10,b),s=(0,a.getFuncByUnknownType)(10,x),u=-1/0,e.forEach((function(t){t=s(t),u<t&&(u=t)})),c=0,e.forEach((function(t,e){c+=0===e?u||10:(o(t)||0)+(u||10)})),l=c/(2*Math.PI)):l||h||f?!h&&f?h=f:h&&!f&&(f=h):l=t.height>t.width?t.width/2:t.height/2,_*m),M=[],A=(M="topology"===v?t.topologyOrdering():"topology-directed"===v?t.topologyOrdering(!0):"degree"===v?t.degreeOrdering():e,Math.ceil(r/d)),C=0;C<r;++C){var T=l,k=(T=(T=T||null===h||null===f?T:h+C*(f-h)/(r-1))||10+100*C/(r-1),p+C%A*E+2*Math.PI/d*Math.floor(C/A));y||(k=g-C%A*E-2*Math.PI/d*Math.floor(C/A)),M[C].x=i[0]+Math.cos(k)*T,M[C].y=i[1]+Math.sin(k)*T,M[C].weight=S[C].all}return null!=(n=t.onLayoutEnd)&&n.call(t),{nodes:M,edges:this.edges}}e[0].x=i[0],e[0].y=i[1]}t.onLayoutEnd&&t.onLayoutEnd()},c.prototype.topologyOrdering=function(t){void 0===t&&(t=!1);var e,n,r,i=this.degrees,o=this.edges,s=this.nodes,u=(0,a.clone)(s),c=this.nodeMap,l=[u[0]],h=[s[0]],f=[],d=s.length,p=(f[0]=!0,n=o,r=c,(e=u).forEach((function(t,n){e[n].children=[],e[n].parent=[]})),t?n.forEach((function(t){var n=(0,a.getEdgeTerminal)(t,"source"),i=(t=(0,a.getEdgeTerminal)(t,"target"),0),o=(n=(n&&(i=r[n]),0),t=(t&&(n=r[t]),e[i].children),e[n].parent);t.push(e[n].id),o.push(e[i].id)})):n.forEach((function(t){var n=(0,a.getEdgeTerminal)(t,"source"),i=(t=(0,a.getEdgeTerminal)(t,"target"),0),o=(n=(n&&(i=r[n]),0),t=(t&&(n=r[t]),e[i].children),e[n].children);t.push(e[n].id),o.push(e[i].id)})),0);return u.forEach((function(t,e){if(0!==e)if(e!==d-1&&i[e].all===i[e+1].all&&!function(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=(0,a.getEdgeTerminal)(n[i],"source"),s=(0,a.getEdgeTerminal)(n[i],"target");if(t.id===o&&e.id===s||e.id===o&&t.id===s)return 1}}(l[p],t,o)||f[e]){for(var n=l[p].children,r=!1,g=0;g<n.length;g++){var m=c[n[g]];if(i[m].all===i[e].all&&!f[m]){l.push(u[m]),h.push(s[c[u[m].id]]),r=f[m]=!0;break}}for(var v=0;!r&&(f[v]||(l.push(u[v]),h.push(s[c[u[v].id]]),r=f[v]=!0),++v!==d););}else l.push(t),h.push(s[c[t.id]]),f[e]=!0,p++})),h},c.prototype.degreeOrdering=function(){var t=this.nodes,e=[],n=this.degrees;return t.forEach((function(t,r){t.degree=n[r].all,e.push(t)})),e.sort(s),e},c.prototype.getType=function(){return"circular"};var u;n=c;function c(t){var e=u.call(this)||this;return e.radius=null,e.nodeSize=void 0,e.startRadius=null,e.endRadius=null,e.startAngle=0,e.endAngle=2*Math.PI,e.clockwise=!0,e.divisions=1,e.ordering=null,e.angleRatio=1,e.nodes=[],e.edges=[],e.nodeMap={},e.degrees=[],e.width=300,e.height=300,e.updateCfg(t),e}e.CircularLayout=n},63861:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.ComboCombinedLayout=void 0,n(16470)),u=n(62329),c=n(49784),l=n(2584);i=u.Base,o(h,i),h.prototype.getDefaultCfg=function(){return{}},h.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;e&&0!==e.length&&(1===e.length?(e[0].x=n[0],e[0].y=n[1]):(t.initVals(),t.run())),t.onLayoutEnd&&t.onLayoutEnd()},h.prototype.run=function(){for(var t,e,n,r=this.nodes,i=this.edges,o=this.combos,u=this.comboEdges,h=this.center,f={},d=(r.forEach((function(t){f[t.id]=t})),{}),p=(o.forEach((function(t){d[t.id]=t})),this.getInnerGraphs(f)),g=[],m=[],v={},y=!0,b=(this.comboTrees.forEach((function(t){var e=p[t.id];e=a(a({},t),{x:e.x||d[t.id].x,y:e.y||d[t.id].y,fx:e.fx||d[t.id].fx,fy:e.fy||d[t.id].fy,mass:e.mass||d[t.id].mass,size:e.size});m.push(e),isNaN(e.x)||0===e.x||isNaN(e.y)||0===e.y?(e.x=100*Math.random(),e.y=100*Math.random()):y=!1,g.push(t.id),(0,c.traverseTreeUp)(t,(function(e){return e.id!==t.id&&(v[e.id]=t.id),!0}))})),r.forEach((function(t){var e;t.comboId&&d[t.comboId]||(e=a({},t),m.push(e),isNaN(e.x)||0===e.x||isNaN(e.y)||0===e.y?(e.x=100*Math.random(),e.y=100*Math.random()):y=!1,g.push(t.id))})),[]),x=(i.concat(u).forEach((function(t){var e=v[t.source]||t.source;t=v[t.target]||t.target;e!==t&&g.includes(e)&&g.includes(t)&&b.push({source:e,target:t})})),null!=m&&m.length&&(1===m.length?(m[0].x=h[0],m[0].y=h[1]):(t={nodes:m,edges:b},n=null==(n=(e=this.outerLayout||new l.GForceLayout({gravity:1,factor:2,linkDistance:function(t,e,n){return n=(((null==(e=e.size)?void 0:e[0])||30)+((null==(e=n.size)?void 0:e[0])||30))/2,Math.min(1.5*n,700)}})).getType)?void 0:n.call(e),e.updateCfg({center:h,kg:5,preventOverlap:!0,animate:!1}),y&&s.FORCE_LAYOUT_TYPE_MAP[n]&&(new(m.length<100?l.MDSLayout:l.GridLayout)).layout(t),e.layout(t)),m.forEach((function(t){var e=p[t.id];e?(e.visited=!0,e.x=t.x,e.y=t.y,e.nodes.forEach((function(e){e.x+=t.x,e.y+=t.y}))):(e=f[t.id])&&(e.x=t.x,e.y=t.y)}))),Object.keys(p)),_=x.length-1;0<=_;_--)!function(t){t=x[t];var e=p[t];e&&(e.nodes.forEach((function(t){e.visited||(t.x+=e.x||0,t.y+=e.y||0),f[t.id]&&(f[t.id].x=t.x,f[t.id].y=t.y)})),d[t]&&(d[t].x=e.x,d[t].y=e.y))}(_);return{nodes:r,edges:i,combos:o,comboEdges:u}},h.prototype.getInnerGraphs=function(t){var e=this.comboTrees,n=this.nodeSize,r=this.edges,i=this.comboPadding,o=this.spacing,s={},u=this.innerLayout||new l.ConcentricLayout({sortBy:"id"});return u.center=[0,0],u.preventOverlap=!0,u.nodeSpacing=o,(e||[]).forEach((function(e){(0,c.traverseTreeUp)(e,(function(e){var o,l,h,f,d,p,g,m=(null==i?void 0:i(e))||10;return(0,c.isArray)(m)&&(m=Math.max.apply(Math,m)),null!=(o=e.children)&&o.length?(o=e.children.map((function(e){var n;return"combo"===e.itemType?s[e.id]:(n=t[e.id]||{},a(a({},n),e))})),l=o.map((function(t){return t.id})),p={nodes:o,edges:r.filter((function(t){return l.includes(t.source)&&l.includes(t.target)}))},h=1/0,o.forEach((function(t){var e;t.size||(t.size=(null==(e=s[t.id])?void 0:e.size)||(null==n?void 0:n(t))||[30,30]),(0,c.isNumber)(t.size)&&(t.size=[t.size,t.size]),(h=h>t.size[0]?t.size[0]:h)>t.size[1]&&(h=t.size[1])})),u.layout(p),f=(p=(0,c.findMinMaxNodeXY)(o)).minX,d=p.minY,g=p.maxX,p=p.maxY,g=Math.max(g-f,p-d,h)+2*m,s[e.id]={id:e.id,nodes:o,size:[g,g]}):"combo"===e.itemType&&(s[e.id]={id:e.id,nodes:[],size:m?[2*m,2*m]:[30,30]}),!0}))})),s},h.prototype.initVals=function(){var t,e,n=this.nodeSize,r=this.spacing,i=(0,c.isNumber)(r)?function(){return r}:(0,c.isFunction)(r)?r:function(){return 0},o=(this.spacing=i,a=n?(0,c.isFunction)(n)?function(t){var e=n(t),r=i(t);return(0,c.isArray)(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+r)/2:((e||10)+r)/2}:(0,c.isArray)(n)?(t=(n[0]>n[1]?n[0]:n[1])/2,function(e){return t+i(e)/2}):(e=n/2,function(t){return e+i(t)/2}):function(t){var e=i(t);return t.size?(0,c.isArray)(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+e)/2:(0,c.isObject)(t.size)?((t.size.width>t.size.height?t.size.width:t.size.height)+e)/2:(t.size+e)/2:10+e/2},this.nodeSize=a,this.comboPadding),a=(0,c.isNumber)(o)?function(){return o}:(0,c.isArray)(o)?function(){return Math.max.apply(null,o)}:(0,c.isFunction)(o)?o:function(){return 0};this.comboPadding=a},h.prototype.getType=function(){return"comboCombined"},n=h;function h(t){var e=i.call(this)||this;return e.center=[0,0],e.nodes=[],e.edges=[],e.combos=[],e.comboEdges=[],e.comboPadding=10,e.comboTrees=[],e.updateCfg(t),e}e.ComboCombinedLayout=n},66590:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.ComboForceLayout=void 0,n(62329)),s=n(49784);i=a.Base,o(u,i),u.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},u.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},e&&0!==e.length&&(1===e.length?(e[0].x=n[0],e[0].y=n[1]):(t.initVals(),t.run())),t.onLayoutEnd&&t.onLayoutEnd()},u.prototype.run=function(){for(var t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration,r=(t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center),i=t.velocityDecay,o=t.comboMap,a=(t.previousLayouted||t.initPos(o),0);a<n;a++)!function(){var n=[];e.forEach((function(t,e){n[e]={x:0,y:0}})),t.applyCalculate(n),t.applyComboCenterForce(n),e.forEach((function(t,e){(0,s.isNumber)(t.x)&&(0,s.isNumber)(t.y)&&(t.x+=n[e].x*i,t.y+=n[e].y*i)})),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()}();var u=[0,0],c=(e.forEach((function(t){(0,s.isNumber)(t.x)&&(0,s.isNumber)(t.y)&&(u[0]+=t.x,u[1]+=t.y)})),u[0]/=e.length,u[1]/=e.length,[r[0]-u[0],r[1]-u[1]]);e.forEach((function(t,e){(0,s.isNumber)(t.x)&&(0,s.isNumber)(t.y)&&(t.x+=c[0],t.y+=c[1])})),t.combos.forEach((function(t){var e=o[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)})),t.previousLayouted=!0},u.prototype.initVals=function(){var t=this,e=t.edges,n=t.nodes,r=t.combos,i={},o={},a={},u=(n.forEach((function(t,e){o[t.id]=t,a[t.id]=e})),t.nodeMap=o,t.indexMap=a,{});r.forEach((function(t){u[t.id]=t})),t.oriComboMap=u,t.comboMap=t.getComboMap(),n=t.preventOverlap,t.preventComboOverlap=t.preventComboOverlap||n,t.preventNodeOverlap=t.preventNodeOverlap||n,r=t.collideStrength;r&&(t.comboCollideStrength=r,t.nodeCollideStrength=r),t.comboCollideStrength=t.comboCollideStrength||0,t.nodeCollideStrength=t.nodeCollideStrength||0;for(var c=0;c<e.length;++c){var l=(0,s.getEdgeTerminal)(e[c],"source"),h=(0,s.getEdgeTerminal)(e[c],"target");i[l]?i[l]++:i[l]=1,i[h]?i[h]++:i[h]=1}var f=[];for(c=0;c<e.length;++c)l=(0,s.getEdgeTerminal)(e[c],"source"),h=(0,s.getEdgeTerminal)(e[c],"target"),f[c]=i[l]/(i[l]+i[h]);this.bias=f;var d,p,g=t.nodeSize,m=t.nodeSpacing,v=(n=(0,s.isNumber)(m)?function(){return m}:(0,s.isFunction)(m)?m:function(){return 0},this.nodeSpacing=n,r=g?(0,s.isFunction)(g)?function(t){return g(t)}:(0,s.isArray)(g)?(d=(g[0]>g[1]?g[0]:g[1])/2,function(t){return d}):(p=g/2,function(t){return p}):function(t){return t.size?(0,s.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2:(0,s.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)/2:t.size/2:10},this.nodeSize=r,t.comboSpacing),y=(n=(0,s.isNumber)(v)?function(){return v}:(0,s.isFunction)(v)?v:function(){return 0},this.comboSpacing=n,t.comboPadding);r=(0,s.isNumber)(y)?function(){return y}:(0,s.isArray)(y)?function(){return Math.max.apply(null,y)}:(0,s.isFunction)(y)?y:function(){return 0};this.comboPadding=r;var b=(b=this.linkDistance)||10;n=(0,s.isNumber)(b)?function(t){return b}:b;this.linkDistance=n;var x=(x=this.edgeStrength)||1;t=(0,s.isNumber)(x)?function(t){return x}:x;this.edgeStrength=t;var _=(_=this.nodeStrength)||30;r=(0,s.isNumber)(_)?function(t){return _}:_;this.nodeStrength=r},u.prototype.initPos=function(t){this.nodes.forEach((function(e,n){var r=e.comboId,i=t[r];r&&i?(e.x=i.cx+100/(n+1),e.y=i.cy+100/(n+1)):(e.x=100/(n+1),e.y=100/(n+1))}))},u.prototype.getComboMap=function(){var t=this,e=t.nodeMap,n=t.comboTrees,r=t.oriComboMap,i={};return(n||[]).forEach((function(n){var o=[];(0,s.traverseTreeUp)(n,(function(n){var a,u;return"node"!==n.itemType&&r[n.id]&&(void 0===i[n.id]&&(u={id:n.id,name:n.id,cx:0,cy:0,count:0,depth:t.oriComboMap[n.id].depth||0,children:[]},i[n.id]=u),(u=n.children)&&u.forEach((function(t){if(!i[t.id]&&!e[t.id])return!0;o.push(t)})),(a=i[n.id]).cx=0,(a.cy=0)===o.length&&(a.empty=!0,u=r[n.id],a.cx=u.x,a.cy=u.y),o.forEach((function(t){var n;a.count++,"node"!==t.itemType?(n=i[t.id],(0,s.isNumber)(n.cx)&&(a.cx+=n.cx),(0,s.isNumber)(n.cy)&&(a.cy+=n.cy)):(n=e[t.id])&&((0,s.isNumber)(n.x)&&(a.cx+=n.x),(0,s.isNumber)(n.y))&&(a.cy+=n.y)})),a.cx/=a.count||1,a.cy/=a.count||1,a.children=o),!0}))})),i},u.prototype.applyComboCenterForce=function(t){var e=this.gravity,n=this.comboGravity||e,r=this.alpha,i=(e=this.comboTrees,this.indexMap),o=this.nodeMap,a=this.comboMap;(e||[]).forEach((function(e){(0,s.traverseTreeUp)(e,(function(e){var u,c,l,h;return"node"!==e.itemType&&a[e.id]&&(u=a[e.id],c=(u.depth+1)/10*.5,l=u.cx,h=u.cy,u.cx=0,u.cy=0,u.children.forEach((function(e){var f,d,p,g;"node"!==e.itemType?((f=a[e.id])&&(0,s.isNumber)(f.cx)&&(u.cx+=f.cx),f&&(0,s.isNumber)(f.cy)&&(u.cy+=f.cy)):(e=(f=o[e.id]).x-l||.005,d=f.y-h||.005,p=Math.sqrt(e*e+d*d),g=i[f.id],t[g].x-=e*(e=n*r/p*c),t[g].y-=d*e,(0,s.isNumber)(f.x)&&(u.cx+=f.x),(0,s.isNumber)(f.y)&&(u.cy+=f.y))})),u.cx/=u.count||1,u.cy/=u.count||1),!0}))}))},u.prototype.applyCalculate=function(t){var e=this.comboMap,n=this.nodes,r={};n.forEach((function(t,e){n.forEach((function(n,i){var o,a,s;e<i||(a=(i=t.x-n.x||.005)*i+(o=t.y-n.y||.005)*o,s=Math.sqrt(a),a<1&&(a=s),r["".concat(t.id,"-").concat(n.id)]={vx:i,vy:o,vl2:a,vl:s},r["".concat(n.id,"-").concat(t.id)]={vl2:a,vl:s,vx:-i,vy:-o})}))})),this.updateComboSizes(e),this.calRepulsive(t,r),this.calAttractive(t,r),this.preventComboOverlap&&this.comboNonOverlapping(t,e)},u.prototype.updateComboSizes=function(t){var e=this,n=e.comboTrees,r=e.nodeMap,i=e.nodeSize,o=e.comboSpacing,a=e.comboPadding;(n||[]).forEach((function(n){var u=[];(0,s.traverseTreeUp)(n,(function(n){if("node"!==n.itemType){var c=t[n.id];if(!c)return!1;var l=n.children;l=(l&&l.forEach((function(e){(t[e.id]||r[e.id])&&u.push(e)})),c.minX=1/0,c.minY=1/0,c.maxX=-1/0,c.maxY=-1/0,u.forEach((function(t){var e,n,o,a;return"node"!==t.itemType||!(t=r[t.id])||(e=i(t),n=t.x-e,o=t.y-e,a=t.x+e,t=t.y+e,c.minX>n&&(c.minX=n),c.minY>o&&(c.minY=o),c.maxX<a&&(c.maxX=a),void(c.maxY<t&&(c.maxY=t)))})),e.oriComboMap[n.id].size||10),n=((0,s.isArray)(l)&&(l=l[0]),Math.max(c.maxX-c.minX,c.maxY-c.minY,l));c.r=n/2+o(c)/2+a(c)}return!0}))}))},u.prototype.comboNonOverlapping=function(t,e){var n=this.comboTree,r=this.comboCollideStrength,i=this.indexMap,o=this.nodeMap;(0,s.traverseTreeUp)(n,(function(n){var a;return!(!e[n.id]&&!o[n.id]&&"comboTreeRoot"!==n.id||((a=n.children)&&1<a.length&&a.forEach((function(n,s){if("node"===n.itemType)return!1;var u=e[n.id];u&&a.forEach((function(a,c){var l,h,f,d,p,g,m,v,y,b,x;return!(s<=c||"node"===a.itemType||!(c=e[a.id]))&&(l=u.cx-c.cx||.005,h=u.cy-c.cy||.005,f=u.r||1,d=(c=c.r||1)*c,p=f*f,(m=l*l+h*h)<(f+=c)*f?!(!(c=n.children)||0===c.length||!(g=a.children)||0===g.length)&&(a=Math.sqrt(m),v=l*(m=(f-a)/a*r),y=h*m,x=1-(b=d/(p+d)),void c.forEach((function(e){if("node"!==e.itemType)return!1;var n;o[e.id]&&(n=i[e.id],g.forEach((function(e){return"node"===e.itemType&&!!o[e.id]&&(e=i[e.id],t[n].x+=v*b,t[n].y+=y*b,t[e].x-=v*x,void(t[e].y-=y*x))})))}))):void 0)}))})),0))}))},u.prototype.calRepulsive=function(t,e){var n=this,r=n.nodes,i=n.width*n.optimizeRangeFactor,o=n.nodeStrength,a=n.alpha,s=n.nodeCollideStrength,u=n.preventNodeOverlap,c=n.nodeSize,l=n.nodeSpacing,h=n.depthRepulsiveForceScale,f=n.center;r.forEach((function(d,p){var g,m,v,y;d.x&&d.y&&(f&&(g=n.gravity,m=d.x-f[0]||.005,v=d.y-f[1]||.005,y=Math.sqrt(m*m+v*v),t[p].x-=m*g*a/y,t[p].y-=v*g*a/y),r.forEach((function(n,r){var f,g,m,v,y;p!==r&&n.x&&n.y&&(g=(y=e["".concat(d.id,"-").concat(n.id)]).vl2,y=y.vl,i<y||(m=(v=e["".concat(d.id,"-").concat(n.id)]).vx,v=v.vy,f=(f=Math.log(Math.abs(n.depth-d.depth)/10)+1||1)<1?1:f,n.comboId!==d.comboId&&(f+=1),f=f?Math.pow(h,f):1,f=o(n)*a/g*f,t[p].x+=m*f,t[p].y+=v*f,p<r&&u&&g<(n=(f=c(d)+l(d)||1)+(g=c(n)+l(n)||1))*n&&(n=v*(v=(n-y)/y*s),t[p].x+=(y=m*v)*(v=(m=g*g)/(f*f+m)),t[p].y+=n*v,t[r].x-=y*(v=1-v),t[r].y-=n*v)))})))}))},u.prototype.calAttractive=function(t,e){var n=this,r=n.edges,i=n.linkDistance,o=n.alpha,a=n.edgeStrength,u=n.bias,c=n.depthAttractiveForceScale;r.forEach((function(r,l){var h,f,d,p,g,m=(0,s.getEdgeTerminal)(r,"source"),v=(0,s.getEdgeTerminal)(r,"target");m&&v&&m!==v&&(h=n.indexMap[m],f=n.indexMap[v],g=n.nodeMap[m],p=n.nodeMap[v],g)&&p&&(d=g.depth===p.depth?0:Math.log(Math.abs(g.depth-p.depth)/10),g.comboId===p.comboId&&(d/=2),d=d?Math.pow(c,d):1,g.comboId!==p.comboId&&1===d?d=c/2:g.comboId===p.comboId&&(d=2),(0,s.isNumber)(p.x))&&(0,s.isNumber)(g.x)&&(0,s.isNumber)(p.y)&&(0,s.isNumber)(g.y)&&(g=(p=e["".concat(v,"-").concat(m)]).vl,v=p.vx,p=p.vy*(m=(g-i(r))/g*o*a(r)*d),g=u[l],t[f].x-=(r=v*m)*g,t[f].y-=p*g,t[h].x+=r*(1-g),t[h].y+=p*(1-g))}))},u.prototype.getType=function(){return"comboForce"},n=u;function u(t){var e=i.call(this)||this;return e.center=[0,0],e.maxIteration=100,e.gravity=10,e.comboGravity=10,e.linkDistance=10,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.edgeStrength=.6,e.nodeStrength=30,e.preventOverlap=!1,e.preventNodeOverlap=!1,e.preventComboOverlap=!1,e.collideStrength=void 0,e.nodeCollideStrength=.5,e.comboCollideStrength=.5,e.comboSpacing=20,e.comboPadding=10,e.optimizeRangeFactor=1,e.onTick=function(){},e.onLayoutEnd=function(){},e.depthAttractiveForceScale=1,e.depthRepulsiveForceScale=2,e.nodes=[],e.edges=[],e.combos=[],e.comboTrees=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.oriComboMap={},e.indexMap={},e.comboMap={},e.previousLayouted=!1,e.updateCfg(t),e}e.ComboForceLayout=n},43281:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.ConcentricLayout=void 0,n(49784));n=n(62329),i=n.Base,o(s,i),s.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},s.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,r=e.length;if(0===r)null!=(s=t.onLayoutEnd)&&s.call(t);else{t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var i=t.center;if(1!==r){var o,s=t.nodeSize,u=t.nodeSpacing,c=[],l=0,h=(0,a.isArray)(s)?Math.max(s[0],s[1]):s,f=((0,a.isArray)(u)?l=Math.max(u[0],u[1]):(0,a.isNumber)(u)&&(l=u),e.forEach((function(t){c.push(t);var e=h;(0,a.isArray)(t.size)?e=Math.max(t.size[0],t.size[1]):(0,a.isNumber)(t.size)?e=t.size:(0,a.isObject)(t.size)&&(e=Math.max(t.size.width,t.size.height)),h=Math.max(h,e),(0,a.isFunction)(u)&&(l=Math.max(u(t),l))})),t.clockwise=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,{}),d=(c.forEach((function(t,e){t.id,f[t.id]=e})),"degree"!==t.sortBy&&(0,a.isString)(t.sortBy)&&void 0!==c[0][t.sortBy]||(t.sortBy="degree",(0,a.isNumber)(e[0].degree))||(o=(0,a.getDegree)(e.length,f,n),c.forEach((function(t,e){t.degree=o[e].all}))),c.sort((function(e,n){return n[t.sortBy]-e[t.sortBy]})),t.maxValueNode=c[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4,[[]]),p=d[0],g=(c.forEach((function(e){var n;0<p.length&&(n=Math.abs(p[0][t.sortBy]-e[t.sortBy]),t.maxLevelDiff)&&n>=t.maxLevelDiff&&(p=[],d.push(p)),p.push(e)})),h+(l||t.minNodeSpacing)),m=(t.preventOverlap||(r=0<d.length&&1<d[0].length,s=Math.min(t.width,t.height)/2-g,g=Math.min(g,s/(d.length+(r?1:0)))),0);if(d.forEach((function(e){var n,r=t.sweep;void 0===r&&(r=2*Math.PI-2*Math.PI/e.length),r=e.dTheta=r/Math.max(1,e.length-1);1<e.length&&t.preventOverlap&&(n=Math.cos(r)-Math.cos(0),r=Math.sin(r)-Math.sin(0),n=Math.sqrt(g*g/(n*n+r*r)),m=Math.max(n,m)),e.r=m,m+=g})),t.equidistant){for(var v=0,y=0,b=0;b<d.length;b++){var x=d[b].r-y;v=Math.max(v,x)}y=0,d.forEach((function(t,e){0===e&&(y=t.r),t.r=y,y+=v}))}return d.forEach((function(e){var n=e.dTheta,r=e.r;e.forEach((function(e,o){o=t.startAngle+(t.clockwise?1:-1)*n*o,e.x=i[0]+r*Math.cos(o),e.y=i[1]+r*Math.sin(o)}))})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}e[0].x=i[0],e[0].y=i[1],null!=(s=t.onLayoutEnd)&&s.call(t)}},s.prototype.getType=function(){return"concentric"},n=s;function s(t){var e=i.call(this)||this;return e.nodeSize=30,e.minNodeSpacing=10,e.nodeSpacing=10,e.preventOverlap=!1,e.equidistant=!1,e.startAngle=1.5*Math.PI,e.clockwise=!0,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e.onLayoutEnd=function(){},e.updateCfg(t),e}e.ConcentricLayout=n},16470:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FORCE_LAYOUT_TYPE_MAP=e.LAYOUT_MESSAGE=void 0,e.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},e.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},20171:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.DagreLayout=void 0,a(n(41106))),u=n(49784),c=(a=n(62329),n(27652));i=a.Base,o(l,i),l.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},l.prototype.execute=function(){var t,e,n,r,i,o,a,l,h,f,d,p,g,m,v,y,b,x,_,w,S,E,M,A,C,T=this,k=this,O=k.nodes,P=k.nodeSize,I=k.rankdir,N=k.combos,D=k.begin,L=k.radial;if(O)return t=k.edges||[],e=new c.Graph({multigraph:!0,compound:!0}),n=P?(0,u.isArray)(P)?function(){return P}:function(){return[P,P]}:function(t){return t.size?(0,u.isArray)(t.size)?t.size:(0,u.isObject)(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40]},r=(0,u.getFunc)(k.ranksep,50,k.ranksepFunc),i=(0,u.getFunc)(k.nodesep,50,k.nodesepFunc),o=i,a=r,"LR"!==I&&"RL"!==I||(o=r,a=i),e.setDefaultEdgeLabel((function(){return{}})),e.setGraph(k),l={},this.sortByCombo&&N&&N.forEach((function(t){t.parentId&&(l[t.parentId]||(l[t.parentId]=!0,e.setNode(t.parentId,{})),e.setParent(t.id,t.parentId))})),O.filter((function(t){return!1!==t.layout})).forEach((function(t){var r=n(t),i=a(t),s=o(t);s=r[0]+2*s,r=r[1]+2*i,i=t.layer;(0,u.isNumber)(i)?e.setNode(t.id,{width:s,height:r,layer:i}):e.setNode(t.id,{width:s,height:r}),T.sortByCombo&&t.comboId&&(l[t.comboId]||(l[t.comboId]=!0,e.setNode(t.comboId,{})),e.setParent(t.id,t.comboId))})),h=void t.forEach((function(t){var n=(0,u.getEdgeTerminal)(t,"source"),r=(0,u.getEdgeTerminal)(t,"target");T.layoutNode(n)&&T.layoutNode(r)&&e.setEdge(n,r,{weight:t.weight||1})})),null!=(N=k.preset)&&N.nodes&&(h=new c.Graph({multigraph:!0,compound:!0}),k.preset.nodes.forEach((function(t){null!=h&&h.setNode(t.id,t)}))),s.default.layout(e,{prevGraph:h,edgeLabelSpace:k.edgeLabelSpace,keepNodeOrder:Boolean(!!k.nodeOrder),nodeOrder:k.nodeOrder}),f=[0,0],D&&(p=d=1/0,e.nodes().forEach((function(t){t=e.node(t),d>t.x&&(d=t.x),p>t.y&&(p=t.y)})),e.edges().forEach((function(t){null!=(t=e.edge(t).points)&&t.forEach((function(t){d>t.x&&(d=t.x),p>t.y&&(p=t.y)}))})),f[0]=D[0]-d,f[1]=D[1]-p),L?(N=this.focusNode,D=this.ranksep,g=this.getRadialPos,L=(0,u.isString)(N)?N:null==N?void 0:N.id,m=L?null==(N=e.node(L))?void 0:N._rank:0,v=[],y=(L="LR"===I||"RL"===I)?"y":"x",b=L?"height":"width",x=1/0,_=-1/0,e.nodes().forEach((function(t){var n,r,o=e.node(t),a=O.findIndex((function(e){return e.id===t}));O[a]&&(a=i(O[a]),0===m?(v[o._rank]||(v[o._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),v[o._rank].nodes.push(t),v[o._rank].totalWidth+=2*a+o[b],v[o._rank].maxSize<Math.max(o.width,o.height)&&(v[o._rank].maxSize=Math.max(o.width,o.height))):0==(n=o._rank-m)?(v[n]||(v[n]={nodes:[],totalWidth:0,maxSize:-1/0}),v[n].nodes.push(t),v[n].totalWidth+=2*a+o[b],v[n].maxSize<Math.max(o.width,o.height)&&(v[n].maxSize=Math.max(o.width,o.height))):(r=Math.abs(n),v[r]||(v[r]={left:[],right:[],totalWidth:0,maxSize:-1/0}),v[r].totalWidth+=2*a+o[b],v[r].maxSize<Math.max(o.width,o.height)&&(v[r].maxSize=Math.max(o.width,o.height)),(n<0?v[r].left:v[r].right).push(t)),n=o[y]-o[b]/2-a,r=o[y]+o[b]/2+a,n<x&&(x=n),_<r)&&(_=r)})),w=D||50,S={},M=[.5*(x+_-(E=(_-x)/.9)),.5*(x+_+E)],A=function(t,n,i,o){void 0===o&&(o=[0,1]);var a=i=void 0===i?-1/0:i;return t.forEach((function(t){var i=e.node(t),s=(S[t]=n,g(i[y],M,E,n,o)),u=s.x,c=(s=s.y,O.findIndex((function(e){return e.id===t})));O[c]&&(O[c].x=u+f[0],O[c].y=s+f[1],O[c]._order=i._order,u=r(O[c]),a<u)&&(a=u)})),a},C=!0,v.forEach((function(t){var e,n;(null!=(n=null==t?void 0:t.nodes)&&n.length||null!=(n=null==t?void 0:t.left)&&n.length||null!=(n=null==t?void 0:t.right)&&n.length)&&(C&&1===t.nodes.length?(n=O.findIndex((function(e){return e.id===t.nodes[0]})),O[n].x=f[0],O[n].y=f[1],S[t.nodes[0]]=0,w=r(O[n]),C=!1):(w=Math.max(w,t.totalWidth/(2*Math.PI)),n=-1/0,n=0===m||null!=(e=t.nodes)&&e.length?A(t.nodes,w,n,[0,1]):(e=(null==(e=t.left)?void 0:e.length)/((null==(e=t.left)?void 0:e.length)+(null==(e=t.right)?void 0:e.length)),n=A(t.left,w,n,[0,e]),A(t.right,w,n,[.05+e,1])),w+=n,C=!1,t.maxSize))})),e.edges().forEach((function(n){var r,i,o,a,s,c,l,h=e.edge(n),d=t.findIndex((function(t){var e=(0,u.getEdgeTerminal)(t,"source");t=(0,u.getEdgeTerminal)(t,"target");return e===n.v&&t===n.w}));k.edgeLabelSpace&&k.controlPoints&&"loop"!==t[d].type&&(r="x"===y?"y":"x",i=null==(i=null==h?void 0:h.points)?void 0:i.slice(1,h.points.length-1),o=[],a=null==(h=e.node(n.v))?void 0:h[r],s=a-(null==(h=e.node(n.w))?void 0:h[r]),c=S[n.v],l=c-S[n.w],null!=i&&i.forEach((function(t){var e=(t[r]-a)/s*l+c;t=g(t[y],M,E,e);o.push({x:t.x+f[0],y:t.y+f[1]})})),t[d].controlPoints=o)}))):(e.nodes().forEach((function(t){var n=e.node(t),r=O.findIndex((function(e){return e.id===t}));O[r]&&(O[r].x=n.x+f[0],O[r].y=n.y+f[1],O[r]._order=n._order)})),e.edges().forEach((function(n){var r,i=e.edge(n),o=t.findIndex((function(t){var e=(0,u.getEdgeTerminal)(t,"source");t=(0,u.getEdgeTerminal)(t,"target");return e===n.v&&t===n.w}));k.edgeLabelSpace&&k.controlPoints&&"loop"!==t[o].type&&(t[o].controlPoints=null==(r=null==i?void 0:i.points)?void 0:r.slice(1,i.points.length-1),t[o].controlPoints.forEach((function(t){t.x+=f[0],t.y+=f[1]})))}))),k.onLayoutEnd&&k.onLayoutEnd(),{nodes:O,edges:t}},l.prototype.getRadialPos=function(t,e,n,r,i){return t=2*((t-e[0])/n*((i=void 0===i?[0,1]:i)[1]-i[0])+i[0])*Math.PI,{x:Math.cos(t)*r,y:Math.sin(t)*r}},l.prototype.getType=function(){return"dagre"},n=l;function l(t){var e=i.call(this)||this;return e.rankdir="TB",e.nodesep=50,e.ranksep=50,e.controlPoints=!1,e.sortByCombo=!1,e.edgeLabelSpace=!0,e.radial=!1,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.layoutNode=function(t){var n=e.nodes.find((function(e){return e.id===t}));return!n||!1!==n.layout},e.updateCfg(t),e}e.DagreLayout=n},27652:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0,n=n(69787),i=n.Graph,o(a,i),n=a;function a(){return null!==i&&i.apply(this,arguments)||this}e.Graph=n},41106:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),r=r(n(65236)),n=n(69209);e.default={layout:r.default,util:{time:n.time,notime:n.notime}}},78029:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=(Object.defineProperty(e,"__esModule",{value:!0}),r(n(40773))),o=function(t){function e(o){var a;i[o]||(r[o]=i[o]=!0,null!=(a=t.outEdges(o))&&a.forEach((function(t){r[t.w]?n.push(t):e(t.w)})),delete r[o])}var n=[],r={},i={};return t.nodes().forEach(e),n};e.default={run:function(t){var e,n="greedy"===t.graph().acyclicer?(0,i.default)(t,(e=t,function(t){return(null==(t=e.edge(t))?void 0:t.weight)||1})):o(t);null!=n&&n.forEach((function(e){var n=t.edge(e);t.removeEdgeObj(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,"rev-".concat(Math.random()))}))},undo:function(t){t.edges().forEach((function(e){var n,r=t.edge(e);r.reversed&&(t.removeEdgeObj(e),n=r.forwardName,delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n))}))}}},11500:function(t,e,n){"use strict";function r(t,e,n,r,o,a){var s=o[e][a-1];n=(0,i.addDummyNode)(t,"border",{rank:a,borderType:e,width:0,height:0},n);o[e][a]=n,t.setParent(n,r),s&&t.setEdge(s,n,{weight:1})}Object.defineProperty(e,"__esModule",{value:!0});var i=n(69209);e.default=function(t){function e(n){var i=t.children(n),o=t.node(n);if(null!=i&&i.length&&i.forEach(e),o.hasOwnProperty("minRank")){o.borderLeft=[],o.borderRight=[];for(var a=o.minRank,s=o.maxRank+1;a<s;a+=1)r(t,"borderLeft","_bl",n,o,a),r(t,"borderRight","_br",n,o,a)}}var n;null!=(n=t.children())&&n.forEach(e)}},35279:function(t,e){"use strict";function n(t){t.nodes().forEach((function(e){r(t.node(e))})),t.edges().forEach((function(e){r(t.edge(e))}))}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){var e=t.width;t.width=t.height,t.height=e},i=function(t){null!=t&&t.y&&(t.y=-t.y)},o=function(t){var e=t.x;t.x=t.y,t.y=e};e.default={adjust:function(t){var e=null==(e=t.graph().rankdir)?void 0:e.toLowerCase();"lr"!==e&&"rl"!==e||n(t)},undo:function(t){var e,r,a=null==(a=t.graph().rankdir)?void 0:a.toLowerCase();"bt"!==a&&"rl"!==a||((e=t).nodes().forEach((function(t){i(e.node(t))})),e.edges().forEach((function(t){var n;t=e.edge(t);null!=(n=t.points)&&n.forEach((function(t){return i(t)})),t.hasOwnProperty("y")&&i(t)}))),"lr"!==a&&"rl"!==a||((r=t).nodes().forEach((function(t){o(r.node(t))})),r.edges().forEach((function(t){var e;t=r.edge(t);null!=(e=t.points)&&e.forEach((function(t){return o(t)})),t.hasOwnProperty("x")&&o(t)})),n(t))}}},55532:function(t,e){"use strict";function n(t,e){if("next"!==t&&"prev"!==t)return e}function r(t){t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev}function i(){var t={};(t.prev=t).next=t.prev,this.shortcut=t}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.dequeue=function(){var t=this.shortcut,e=t.prev;if(e&&e!==t)return r(e),e},i.prototype.enqueue=function(t){var e=this.shortcut;t.prev&&t.next&&r(t),t.next=e.next,e.next.prev=t,(e.next=t).prev=e},i.prototype.toString=function(){for(var t=[],e=this.shortcut,r=e.prev;r!==e;)t.push(JSON.stringify(r,n)),r=null==r?void 0:r.prev;return"[".concat(t.join(", "),"]")},e.default=i},40773:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=(a=(Object.defineProperty(e,"__esModule",{value:!0}),a(n(55532))),n=n(69787),i=a.default,o(u,i),u);function u(){return null!==i&&i.apply(this,arguments)||this}c=n.Graph,o(h,c);var c,l=h;function h(){return null!==c&&c.apply(this,arguments)||this}var f=function(){return 1},d=function(t,e,n){for(var r,i=[],o=e[e.length-1],a=e[0];t.nodeCount();){for(;r=a.dequeue();)p(t,e,n,r);for(;r=o.dequeue();)p(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;0<s;--s)if(r=e[s].dequeue()){i=i.concat(p(t,e,n,r,!0));break}}return i},p=function(t,e,n,r,i){var o,a=[];return null!=(o=t.inEdges(r.v))&&o.forEach((function(r){var o=t.edge(r),s=t.node(r.v);i&&a.push({v:r.v,w:r.w,in:0,out:0}),void 0===s.out&&(s.out=0),s.out-=o,m(e,n,s)})),null!=(o=t.outEdges(r.v))&&o.forEach((function(r){var i=t.edge(r);r=r.w,r=t.node(r);void 0===r.in&&(r.in=0),r.in-=i,m(e,n,r)})),t.removeNode(r.v),i?a:void 0},g=function(t,e){for(var n=new l,r=0,i=0,o=(t.nodes().forEach((function(t){n.setNode(t,{v:t,in:0,out:0})})),t.edges().forEach((function(t){var o=n.edge(t)||0,a=(null==e?void 0:e(t))||1;n.setEdge(t.v,t.w,o+a),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)})),[]),a=i+r+3,u=0;u<a;u++)o.push(new s);var c=r+1;return n.nodes().forEach((function(t){m(o,c,n.node(t))})),{buckets:o,zeroIdx:c,graph:n}},m=function(t,e,n){(n.out?n.in?t[n.out-n.in+e]:t[t.length-1]:t[0]).enqueue(n)};e.default=function(t,e){return t.nodeCount()<=1?[]:(e=g(t,e||f),null==(e=d(e.graph,e.buckets,e.zeroIdx).map((function(e){return t.outEdges(e.v,e.w)})))?void 0:e.flat())}},65236:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=(Object.defineProperty(e,"__esModule",{value:!0}),i(n(78029))),a=i(n(46171)),s=i(n(76827)),u=n(69209),c=i(n(33562)),l=i(n(59596)),h=i(n(11500)),f=i(n(35279)),d=i(n(19597)),p=i(n(95)),g=i(n(24956)),m=n(27652),v=function(t,e,n){e("    removeSelfEdges",(function(){j(t)})),e("    acyclic",(function(){o.default.run(t)})),e("    nestingGraph.run",(function(){l.default.run(t)})),e("    rank",(function(){(0,s.default)((0,u.asNonCompoundGraph)(t))})),e("    injectEdgeLabelProxies",(function(){O(t)})),e("    removeEmptyRanks",(function(){(0,u.removeEmptyRanks)(t)})),e("    nestingGraph.cleanup",(function(){l.default.cleanup(t)})),e("    normalizeRanks",(function(){(0,u.normalizeRanks)(t)})),e("    assignRankMinMax",(function(){P(t)})),e("    removeEdgeLabelProxies",(function(){I(t)})),e("    normalize.run",(function(){a.default.run(t)})),e("    parentDummyChains",(function(){(0,c.default)(t)})),e("    addBorderSegments",(function(){(0,h.default)(t)})),n&&n.keepNodeOrder&&e("    initDataOrder",(function(){(0,g.default)(t,n.nodeOrder)})),e("    order",(function(){(0,d.default)(t)})),e("    insertSelfEdges",(function(){F(t)})),e("    adjustCoordinateSystem",(function(){f.default.adjust(t)})),e("    position",(function(){(0,p.default)(t)})),e("    positionSelfEdges",(function(){z(t)})),e("    removeBorderNodes",(function(){B(t)})),e("    normalize.undo",(function(){a.default.undo(t)})),e("    fixupEdgeLabelCoords",(function(){L(t)})),e("    undoCoordinateSystem",(function(){f.default.undo(t)})),e("    translateGraph",(function(){N(t)})),e("    assignNodeIntersects",(function(){D(t)})),e("    reversePoints",(function(){R(t)})),e("    acyclic.undo",(function(){o.default.undo(t)}))},y=function(t,e){t.nodes().forEach((function(n){var r=t.node(n);n=e.node(n);void 0!==n?(r.fixorder=n._order,delete n._order):delete r.fixorder}))},b=function(t,e){t.nodes().forEach((function(n){var r,i=t.node(n);i&&(r=e.node(n),i.x=r.x,i.y=r.y,i._order=r.order,i._rank=r.rank,null!=(n=e.children(n)))&&n.length&&(i.width=r.width,i.height=r.height)})),t.edges().forEach((function(n){var r=t.edge(n);n=e.edge(n);r.points=n.points,n.hasOwnProperty("x")&&(r.x=n.x,r.y=n.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height},x=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},w=["acyclicer","ranker","rankdir","align"],S=["width","height","layer","fixorder"],E={width:0,height:0},M=["minlen","weight","width","height","labeloffset"],A={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},C=["labelpos"],T=function(t){var e=new m.Graph({multigraph:!0,compound:!0}),n=G(t.graph()),i={};return null!=w&&w.forEach((function(t){void 0!==n[t]&&(i[t]=n[t])})),e.setGraph(Object.assign({},_,U(n,x),i)),t.nodes().forEach((function(n){var i=G(t.node(n));i=r(r({},E),i),i=U(i,S);e.setNode(n,i),e.setParent(n,t.parent(n))})),t.edges().forEach((function(n){var r=G(t.edge(n)),i={};null!=C&&C.forEach((function(t){void 0!==r[t]&&(i[t]=r[t])})),e.setEdgeObj(n,Object.assign({},A,U(r,M),i))})),e},k=function(t){var e=t.graph();e.ranksep||(e.ranksep=0),e.ranksep/=2,t.nodes().forEach((function(e){e=t.node(e),isNaN(e.layer)||e.layer||(e.layer=0)})),t.edges().forEach((function(n){var r;n=t.edge(n);n.minlen*=2,"c"!==(null==(r=n.labelpos)?void 0:r.toLowerCase())&&("TB"===e.rankdir||"BT"===e.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)}))},O=function(t){t.edges().forEach((function(e){var n=t.edge(e);n.width&&n.height&&(n=t.node(e.v),e={e:e,rank:(t.node(e.w).rank-n.rank)/2+n.rank},(0,u.addDummyNode)(t,"edge-proxy",e,"_ep"))}))},P=function(t){var e=0;t.nodes().forEach((function(n){var r;n=t.node(n);n.borderTop&&(n.minRank=null==(r=t.node(n.borderTop))?void 0:r.rank,n.maxRank=null==(r=t.node(n.borderBottom))?void 0:r.rank,e=Math.max(e,n.maxRank||-1/0))})),t.graph().maxRank=e},I=function(t){t.nodes().forEach((function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))},N=function(t){function e(t){var e,a,s;t&&(e=t.x,a=t.y,s=t.width,t=t.height,isNaN(e)||isNaN(s)||(void 0===n&&(n=e-s/2),n=Math.min(n,e-s/2),i=Math.max(i,e+s/2)),isNaN(a)||isNaN(t)||(void 0===r&&(r=a-t/2),r=Math.min(r,a-t/2),o=Math.max(o,a+t/2)))}var n,r,i=0,o=0,a=t.graph(),s=a.marginx||0,u=a.marginy||0;t.nodes().forEach((function(n){e(t.node(n))})),t.edges().forEach((function(n){n=t.edge(n),null!=n&&n.hasOwnProperty("x")&&e(n)})),n-=s,r-=u,t.nodes().forEach((function(e){e=t.node(e),e&&(e.x-=n,e.y-=r)})),t.edges().forEach((function(e){var i;e=t.edge(e);null!=(i=e.points)&&i.forEach((function(t){t.x-=n,t.y-=r})),e.hasOwnProperty("x")&&(e.x-=n),e.hasOwnProperty("y")&&(e.y-=r)})),a.width=i-n+s,a.height=o-r+u},D=function(t){t.edges().forEach((function(e){var n,r=t.edge(e),i=t.node(e.v),o=(e=t.node(e.w),r.points?(n=r.points[0],r.points[r.points.length-1]):(r.points=[],n=e,i));r.points.unshift((0,u.intersectRect)(i,n)),r.points.push((0,u.intersectRect)(e,o))}))},L=function(t){t.edges().forEach((function(e){var n=t.edge(e);if(null!=n&&n.hasOwnProperty("x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))},R=function(t){t.edges().forEach((function(e){e=t.edge(e);e.reversed&&null!=(e=e.points)&&e.reverse()}))},B=function(t){t.nodes().forEach((function(e){var n,r,i,o;null!=(n=t.children(e))&&n.length&&(n=t.node(e),e=t.node(n.borderTop),r=t.node(n.borderBottom),i=t.node(n.borderLeft[(null==(i=n.borderLeft)?void 0:i.length)-1]),o=t.node(n.borderRight[(null==(o=n.borderRight)?void 0:o.length)-1]),n.width=Math.abs((null==o?void 0:o.x)-(null==i?void 0:i.x))||10,n.height=Math.abs((null==r?void 0:r.y)-(null==e?void 0:e.y))||10,n.x=((null==i?void 0:i.x)||0)+n.width/2,n.y=((null==e?void 0:e.y)||0)+n.height/2)})),t.nodes().forEach((function(e){var n;"border"===(null==(n=t.node(e))?void 0:n.dummy)&&t.removeNode(e)}))},j=function(t){t.edges().forEach((function(e){var n;e.v===e.w&&((n=t.node(e.v)).selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdgeObj(e))}))},F=function(t){var e=(0,u.buildLayerMatrix)(t);null!=e&&e.forEach((function(e){var n=0;null!=e&&e.forEach((function(e,r){var i=t.node(e);i.order=r+n,null!=(e=i.selfEdges)&&e.forEach((function(e){(0,u.addDummyNode)(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))},z=function(t){t.nodes().forEach((function(e){var n,r,i,o,a=t.node(e);"selfedge"===a.dummy&&(n=(o=t.node(a.e.v)).x+o.width/2,r=o.y,i=a.x-n,o=o.height/2,t.setEdgeObj(a.e,a.label),t.removeNode(e),a.label.points=[{x:n+2*i/3,y:r-o},{x:n+5*i/6,y:r-o},{y:r,x:n+i},{x:n+5*i/6,y:r+o},{x:n+2*i/3,y:r+o}],a.label.x=a.x,a.label.y=a.y)}))},U=function(t,e){var n={};return null!=e&&e.forEach((function(e){void 0!==t[e]&&(n[e]=+t[e])})),n},G=function(t){void 0===t&&(t={});var e={};return Object.keys(t).forEach((function(n){e[n.toLowerCase()]=t[n]})),e};e.default=function(t,e){var n=e&&e.debugTiming?u.time:u.notime;n("layout",(function(){e&&!e.keepNodeOrder&&e.prevGraph&&n("  inheritOrder",(function(){y(t,e.prevGraph)}));var r=n("  buildLayoutGraph",(function(){return T(t)}));e&&!1===e.edgeLabelSpace||n("  makeSpaceForEdgeLabels",(function(){k(r)}));try{n("  runLayout",(function(){v(r,n,e)}))}catch(r){if("Not possible to find intersection inside of the rectangle"===r.message)return;throw r}n("  updateInputGraph",(function(){b(t,r)}))}))}},59596:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(69209),i=function(t,e,n,o,a,s,u){var c,l,h,f=t.children(u);null!=f&&f.length?(c=(0,r.addBorderNode)(t,"_bt"),l=(0,r.addBorderNode)(t,"_bb"),h=t.node(u),t.setParent(c,u),h.borderTop=c,t.setParent(l,u),h.borderBottom=l,null!=f&&f.forEach((function(r){i(t,e,n,o,a,s,r);var h=t.node(r),f=h.borderTop||r,d=(r=h.borderBottom||r,h=h.borderTop?o:2*o,f!==r?1:a-s[u]+1);t.setEdge(c,f,{minlen:d,weight:h,nestingEdge:!0}),t.setEdge(r,l,{minlen:d,weight:h,nestingEdge:!0})})),t.parent(u)||t.setEdge(e,c,{weight:0,minlen:a+s[u]})):u!==e&&t.setEdge(e,u,{weight:0,minlen:n})};e.default={run:function(t){var e,n,o,a,s,u=(0,r.addDummyNode)(t,"root",{},"_root"),c=(n={},o=function(t,r){var i=e.children(t);null!=i&&i.forEach((function(t){return o(t,r+1)})),n[t]=r},null!=(l=(e=t).children())&&l.forEach((function(t){return o(t,1)})),n),l=Math.max.apply(Math,Object.values(c)),h=(l=Math.abs(l)===1/0?1:l)-1,f=2*h+1,d=(t.graph().nestingRoot=u,t.edges().forEach((function(e){t.edge(e).minlen*=f})),s=0,(a=t).edges().forEach((function(t){s+=a.edge(t).weight})),s+1);null!=(l=t.children())&&l.forEach((function(e){i(t,u,f,d,h,c,e)})),t.graph().nodeRankFactor=f},cleanup:function(t){var e=t.graph();e.nestingRoot&&t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach((function(e){t.edge(e).nestingEdge&&t.removeEdgeObj(e)}))}}},46171:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(69209);e.default={run:function(t){t.graph().dummyChains=[],t.edges().forEach((function(e){var n=t,i=e,o=i.v,a=n.node(o).rank,s=(e=i.w,n.node(e).rank),u=i.name,c=n.edge(i),l=c.labelRank;if(s!==a+1){n.removeEdgeObj(i);var h,f,d=n.graph(),p=0;for(++a;a<s;++p,++a)c.points=[],h=(0,r.addDummyNode)(n,"edge",f={edgeLabel:c,width:0,height:0,edgeObj:i,rank:a},"_d"),a===l&&(f.width=c.width,f.height=c.height,f.dummy="edge-label",f.labelpos=c.labelpos),n.setEdge(o,h,{weight:c.weight},u),0===p&&(d.dummyChains||(d.dummyChains=[]),d.dummyChains.push(h)),o=h;n.setEdge(o,e,{weight:c.weight},u)}}))},undo:function(t){var e;null!=(e=t.graph().dummyChains)&&e.forEach((function(e){for(var n,r=t.node(e),i=r.edgeLabel,o=(r.edgeObj&&t.setEdgeObj(r.edgeObj,i),e);r.dummy;)n=t.successors(o)[0],t.removeNode(o),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),r=t.node(o=n)}))}}},80314:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r,i={};null!=n&&n.forEach((function(n){for(var o,a,s=t.parent(n);s;){if((o=t.parent(s))?(a=i[o],i[o]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=o}}))}},89921:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return e.map((function(e){var n,r=t.inEdges(e);return null!=r&&r.length?(n={sum:0,weight:0},null!=r&&r.forEach((function(e){var r=t.edge(e);e=t.node(e.v);n.sum+=r.weight*e.order,n.weight+=r.weight})),{v:e,barycenter:n.sum/n.weight,weight:n.weight}):{v:e}}))}},77006:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(27652);e.default=function(t,e,n){var i=function(t){var e;while(t.hasNode(e="_root".concat(Math.random())));return e}(t),o=new r.Graph({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(e){return t.node(e)}));return t.nodes().forEach((function(r){var a=t.node(r),s=t.parent(r);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(o.setNode(r),o.setParent(r,s||i),null!=(s=t[n](r))&&s.forEach((function(e){var n=e.v===r?e.w:e.v,i=o.edgeFromArgs(n,r);i=void 0!==i?i.weight:0;o.setEdge(n,r,{weight:t.edge(e).weight+i})})),a.hasOwnProperty("minRank"))&&o.setNode(r,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]})})),o}},32957:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(69209);e.default=function(t,e){for(var n=0,i=1;i<(null==e?void 0:e.length);i+=1)n+=function(t,e,n){for(var i=(0,r.zipObject)(n,n.map((function(t,e){return e}))),o=(e=e.map((function(e){return e=null==(e=t.outEdges(e))?void 0:e.map((function(e){return{pos:i[e.w]||0,weight:t.edge(e).weight}})),null==e?void 0:e.sort((function(t,e){return t.pos-e.pos}))})).flat().filter((function(t){return void 0!==t})),1);o<n.length;)o<<=1;var a=2*o-1,s=(--o,Array(a).fill(0,0,a)),u=0;return null!=e&&e.forEach((function(t){if(t){for(var e=t.pos+o,n=(s[e]+=t.weight,0);0<e;)e%2&&(n+=s[e+1]),s[e=e-1>>1]+=t.weight;u+=t.weight*n}})),u}(t,e[i-1],e[i]);return n}},19597:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=(Object.defineProperty(e,"__esModule",{value:!0}),r(n(15697))),o=r(n(32957)),a=r(n(77006)),s=r(n(80314)),u=r(n(99455)),c=n(49784),l=n(27652),h=n(69209),f=function(t,e,n){return e.map((function(e){return(0,a.default)(t,e,n)}))},d=function(t,e,n){var r=new l.Graph;null!=t&&t.forEach((function(t){for(var i=t.graph().root,o=(0,u.default)(t,i,r,e,n),a=0;a<(null==(c=o.vs)?void 0:c.length);a++){var c=t.node(o.vs[a]);c&&(c.order=a)}(0,s.default)(t,r,o.vs)}))},p=function(t,e){null!=e&&e.forEach((function(e){null!=e&&e.forEach((function(e,n){t.node(e).order=n}))}))};e.default=function(t){for(var e=(0,h.maxRank)(t),n=[],r=[],a=1;a<e+1;a++)n.push(a);for(a=e-1;-1<a;a--)r.push(a);for(var s,u=f(t,n,"inEdges"),l=f(t,r,"outEdges"),g=(0,i.default)(t),m=(p(t,g),Number.POSITIVE_INFINITY),v=(a=0,0);v<4;++a,++v)d(a%2?u:l,2<=a%4),g=(0,h.buildLayerMatrix)(t),(y=(0,o.default)(t,g))<m&&(s=(v=0,c.clone)(g),m=y);g=(0,i.default)(t),p(t,g);var y;for(a=0,v=0;v<4;++a,++v)d(a%2?u:l,2<=a%4,!0),g=(0,h.buildLayerMatrix)(t),(y=(0,o.default)(t,g))<m&&(s=(v=0,c.clone)(g),m=y);p(t,s)}},24956:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t.nodes().filter((function(e){return!(null!=(e=t.children(e))&&e.length)})).map((function(e){return t.node(e).rank})),r=(n=Math.max.apply(Math,n),Array(n+1).fill([]));null!=e&&e.forEach((function(e){var n=t.node(e);!n||null!=n&&n.dummy||isNaN(n.rank)||(n.fixorder=r[n.rank].length,r[n.rank].push(e))}))}},15697:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e={},n=t.nodes().filter((function(e){return!(null!=(e=t.children(e))&&e.length)})),r=n.map((function(e){return t.node(e).rank})),i=Math.max.apply(Math,r),o=[],a=0;a<i+1;a++)o.push([]);function s(n){var r;e.hasOwnProperty(n)||(e[n]=!0,r=t.node(n),isNaN(r.rank)||o[r.rank].push(n),null!=(r=t.successors(n))&&r.forEach(s))}return r=n.sort((function(e,n){return t.node(e).rank-t.node(n).rank})),n=r.filter((function(e){return void 0!==t.node(e).fixorder})).sort((function(e,n){return t.node(e).fixorder-t.node(n).fixorder})),null!=n&&n.forEach((function(n){isNaN(t.node(n).rank)||o[t.node(n).rank].push(n),e[n]=!0})),null!=r&&r.forEach(s),o}},7043:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){var n,r=0,i=0;t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.vs=null==(n=e.vs)?void 0:n.concat(t.vs),t.barycenter=r/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0};e.default=function(t,e){var r={};function i(t){return function(e){e.merged||(void 0===e.barycenter||void 0===t.barycenter||e.barycenter>=t.barycenter)&&n(t,e)}}function o(t){return function(e){e.in.push(t),0==--e.indegree&&u.push(e)}}function a(){var t=u.pop();c.push(t),null!=(s=t.in.reverse())&&s.forEach((function(e){return i(t)(e)})),null!=(s=t.out)&&s.forEach((function(e){return o(t)(e)}))}null!=t&&t.forEach((function(t,e){r[t.v]={i:e,indegree:0,in:[],out:[],vs:[t.v]},e=r[t.v],void 0!==t.barycenter&&(e.barycenter=t.barycenter,e.weight=t.weight)})),null!=(t=e.edges())&&t.forEach((function(t){var e=r[t.v],n=r[t.w];void 0!==e&&void 0!==n&&(n.indegree++,e.out.push(r[t.w]))}));for(var s,u=null==(t=(e=Object.values(r)).filter)?void 0:t.call(e,(function(t){return!t.indegree})),c=[];null!=u&&u.length;)a();t=c.filter((function(t){return!t.merged}));var l=["vs","i","barycenter","weight"];return t.map((function(t){var e={};return null!=l&&l.forEach((function(n){void 0!==t[n]&&(e[n]=t[n])})),e}))}},99455:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=(Object.defineProperty(e,"__esModule",{value:!0}),r(n(89921))),o=r(n(7043)),a=r(n(21498)),s=function(t,e,n,r,l){var h=t.children(e),f=(e=t.node(e),e?e.borderLeft:void 0),d=e?e.borderRight:void 0,p={};f&&(h=null==h?void 0:h.filter((function(t){return t!==f&&t!==d}))),e=(0,i.default)(t,h||[]),null!=e&&e.forEach((function(e){var i;null!=(i=t.children(e.v))&&i.length&&(i=s(t,e.v,n,r),(p[e.v]=i).hasOwnProperty("barycenter"))&&c(e,i)})),h=(0,o.default)(e,n),u(h,p),null!=(e=h.filter((function(t){return 0<t.vs.length})))&&e.forEach((function(e){var n=t.node(e.vs[0]);n&&(e.fixorder=n.fixorder,e.order=n.order)})),e=(0,a.default)(h,r,l);return f&&(e.vs=[f,e.vs,d].flat(),null!=(h=t.predecessors(f)))&&h.length&&(h=t.node((null==(l=t.predecessors(f))?void 0:l[0])||""),l=t.node((null==(l=t.predecessors(d))?void 0:l[0])||""),e.hasOwnProperty("barycenter")||(e.barycenter=0,e.weight=0),e.barycenter=(e.barycenter*e.weight+h.order+l.order)/(e.weight+2),e.weight+=2),e},u=function(t,e){null!=t&&t.forEach((function(t){var n=null==(n=t.vs)?void 0:n.map((function(t){return e[t]?e[t].vs:t}));t.vs=n.flat()}))},c=function(t,e){void 0!==t.barycenter?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)};e.default=s},21498:function(t,e,n){"use strict";function r(t,e,n){for(var r,i=n;e.length&&(r=e[e.length-1]).i<=i;)e.pop(),null!=t&&t.push(r.vs),i++;return i}Object.defineProperty(e,"__esModule",{value:!0});var i=n(69209);e.default=function(t,e,n){t=(0,i.partition)(t,(function(t){return t.hasOwnProperty("fixorder")&&!isNaN(t.fixorder)||t.hasOwnProperty("barycenter")}));var o,a,s=t.lhs,u=t.rhs.sort((function(t,e){return-t.i- -e.i})),c=[],l=0,h=0,f=0;null!=s&&s.sort((o=!!e,a=!!n,function(t,e){if(void 0!==t.fixorder&&void 0!==e.fixorder)return t.fixorder-e.fixorder;if(t.barycenter<e.barycenter)return-1;if(t.barycenter>e.barycenter)return 1;if(a&&void 0!==t.order&&void 0!==e.order){if(t.order<e.order)return-1;if(t.order>e.order)return 1}return o?e.i-t.i:t.i-e.i})),f=r(c,u,f),null!=s&&s.forEach((function(t){var e;f+=null==(e=t.vs)?void 0:e.length,c.push(t.vs),l+=t.barycenter*t.weight,h+=t.weight,f=r(c,u,f)})),t={vs:c.flat()};return h&&(t.barycenter=l/h,t.weight=h),t}},33562:function(t,e){"use strict";function n(t){function e(n){var o,a=i;null!=(o=t.children(n))&&o.forEach(e),r[n]={low:a,lim:i++}}var n,r={},i=0;return null!=(n=t.children())&&n.forEach(e),r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,r=n(t);null!=(e=t.graph().dummyChains)&&e.forEach((function(e){var n,i,o,a=e,s=t.node(a).edgeObj;if(s){e=function(t,e,n,r){for(var i,o=[],a=[],s=Math.min(e[n].low,e[r].low),u=Math.max(e[n].lim,e[r].lim),c=n;c=t.parent(c),o.push(c),c&&(e[c].low>s||u>e[c].lim););for(i=c,c=r;c&&c!==i;)a.push(c),c=t.parent(c);return{lca:i,path:o.concat(a.reverse())}}(t,r,s.v,s.w);for(var u=e.path,c=e.lca,l=0,h=u[l],f=!0;a!==s.w;){if(o=t.node(a),f){for(;h!==c&&(null==(n=t.node(h))?void 0:n.maxRank)<o.rank;)h=u[++l];h===c&&(f=!1)}if(!f){for(;l<u.length-1&&(null==(i=t.node(u[l+1]))?void 0:i.minRank)<=o.rank;)l++;h=u[l]}t.setParent(a,h),a=t.successors(a)[0]}}}))}},71963:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.width=e.sep=e.positionX=e.balance=e.alignCoordinates=e.findSmallestWidthAlignment=e.buildBlockGraph=e.horizontalCompaction=e.verticalAlignment=e.hasConflict=e.addConflict=e.findOtherInnerSegmentNode=e.findType2Conflicts=e.findType1Conflicts=void 0,n(69787)),s=n(69209),u=(i=a.Graph,o(c,i),c);function c(){return null!==i&&i.apply(this,arguments)||this}function l(t,e){var n=Object.values(e),r=Math.min.apply(Math,n),i=Math.max.apply(Math,n);["u","d"].forEach((function(n){["l","r"].forEach((function(o){var a,s,u=n+o,c=t[u];c!==e&&(a=Object.values(c),s="l"===o?r-Math.min.apply(Math,a):i-Math.max.apply(Math,a))&&(t[u]={},Object.keys(c).forEach((function(e){t[u][e]=c[e]+s})))}))}))}e.findType1Conflicts=function(t,n){var r={};return null!=n&&n.length&&n.reduce((function(n,i){var o=0,a=0,s=n.length,u=null==i?void 0:i[(null==i?void 0:i.length)-1];return null!=i&&i.forEach((function(n,c){var l=(0,e.findOtherInnerSegmentNode)(t,n),h=l?t.node(l).order:s;!l&&n!==u||(null!=(l=i.slice(a,c+1))&&l.forEach((function(n){var i;null!=(i=t.predecessors(n))&&i.forEach((function(i){var a=t.node(i),s=a.order;!(s<o||h<s)||a.dummy&&null!=(s=t.node(n))&&s.dummy||(0,e.addConflict)(r,i,n)}))})),a=c+1,o=h)})),i})),r},e.findType2Conflicts=function(t,n){function r(n,r,o,a,s){for(var u,c=[],l=r;l<o;l++)c.push(l);c.forEach((function(r){u=n[r],null!=(r=t.node(u))&&r.dummy&&null!=(r=t.predecessors(u))&&r.forEach((function(n){var r=t.node(n);r.dummy&&(r.order<a||r.order>s)&&(0,e.addConflict)(i,n,u)}))}))}var i={};return null!=n&&n.length&&n.reduce((function(e,n){var i,o=-1,a=0;return null!=n&&n.forEach((function(s,u){var c;"border"===(null==(c=t.node(s))?void 0:c.dummy)&&(c=t.predecessors(s)||[]).length&&(i=t.node(c[0]).order,r(n,a,u,o,i),a=u,o=i),r(n,a,n.length,i,e.length)})),n})),i},e.findOtherInnerSegmentNode=function(t,e){var n;return null!=(n=t.node(e))&&n.dummy&&null!=(n=t.predecessors(e))?n.find((function(e){return t.node(e).dummy})):void 0},e.addConflict=function(t,e,n){var r,i=n;n<e&&(r=e,e=n,i=r),n=t[e];n||(t[e]=n={}),n[i]=!0},e.hasConflict=function(t,e,n){var r=e;return n<e&&(r=n),!!t[r]},e.verticalAlignment=function(t,n,r,i){var o={},a={},s={};return null!=n&&n.forEach((function(t){null!=t&&t.forEach((function(t,e){s[a[o[t]=t]=t]=e}))})),null!=n&&n.forEach((function(t){var n=-1;null!=t&&t.forEach((function(t){var u=i(t);if(u.length)for(var c=((u=u.sort((function(t,e){return s[t]-s[e]}))).length-1)/2,l=Math.floor(c),h=Math.ceil(c);l<=h;++l){var f=u[l];a[t]===t&&n<s[f]&&!(0,e.hasConflict)(r,t,f)&&(a[f]=t,a[t]=o[t]=o[f],n=s[f])}}))})),{root:o,align:a}},e.horizontalCompaction=function(t,n,r,i,o){function a(t,e){for(var n=u.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}var s={},u=(0,e.buildBlockGraph)(t,n,r,o),c=o?"borderLeft":"borderRight";return a((function(t){s[t]=(u.inEdges(t)||[]).reduce((function(t,e){return Math.max(t,(s[e.v]||0)+u.edge(e))}),0)}),u.predecessors.bind(u)),a((function(e){var n=(u.outEdges(e)||[]).reduce((function(t,e){return Math.min(t,(s[e.w]||0)-u.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(s[e]=Math.max(s[e],n))}),u.successors.bind(u)),null!=(n=Object.values(i))&&n.forEach((function(t){s[t]=s[r[t]]})),s},e.buildBlockGraph=function(t,n,r,i){var o=new u,a=t.graph(),s=(0,e.sep)(a.nodesep,a.edgesep,i);return null!=n&&n.forEach((function(e){var n;null!=e&&e.forEach((function(e){var i,a,u=r[e];o.setNode(u),n&&(i=r[n],a=o.edgeFromArgs(i,u),o.setEdge(i,u,Math.max(s(t,e,n),a||0))),n=e}))})),o},e.findSmallestWidthAlignment=function(t,n){return(0,s.minBy)(Object.values(n),(function(n){var r,i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return null!=(r=Object.keys(n))&&r.forEach((function(r){var a=n[r];r=(0,e.width)(t,r)/2;i=Math.max(a+r,i),o=Math.min(a-r,o)})),i-o}))},e.alignCoordinates=l,e.balance=function(t,e){var n={};return Object.keys(t.ul).forEach((function(r){var i;e?n[r]=t[e.toLowerCase()][r]:(i=Object.values(t).map((function(t){return t[r]})),n[r]=(i[0]+i[1])/2)})),n},e.positionX=function(t){var n,r=(0,s.buildLayerMatrix)(t),i=Object.assign((0,e.findType1Conflicts)(t,r),(0,e.findType2Conflicts)(t,r)),o={},a=(["u","d"].forEach((function(a){n="u"===a?r:Object.values(r).reverse(),["l","r"].forEach((function(r){"r"===r&&(n=n.map((function(t){return Object.values(t).reverse()})));var s=("u"===a?t.predecessors:t.successors).bind(t),u=(s=(0,e.verticalAlignment)(t,n,i,s),(0,e.horizontalCompaction)(t,n,s.root,s.align,"r"===r));"r"===r&&Object.keys(u).forEach((function(t){u[t]=-u[t]})),o[a+r]=u}))})),(0,e.findSmallestWidthAlignment)(t,o));return l(o,a),(0,e.balance)(o,t.graph().align)},e.sep=function(t,e,n){return function(r,i,o){var a,s=r.node(i),u=r.node(o);i=0;if(i+=s.width/2,s.hasOwnProperty("labelpos"))switch((s.labelpos||"").toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(i+=n?a:-a),a=0,i=(i=(i+=(s.dummy?e:t)/2)+(u.dummy?e:t)/2)+u.width/2,u.labelpos)switch((u.labelpos||"").toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(i+=n?a:-a),a=0,i}},e.width=function(t,e){return t.node(e).width||0}},95:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(69209),i=n(71963);e.default=function(t){var e,n,o,a,s,u,c,l,h=(0,r.asNonCompoundGraph)(t),f=(e=h,t=(0,r.buildLayerMatrix)(e),n=e.graph().ranksep,o=0,null!=t&&t.forEach((function(t){var r=t.map((function(t){return e.node(t).height})),i=Math.max.apply(Math,r);null!=t&&t.forEach((function(t){e.node(t).y=o+i/2})),o+=i+n})),a=h,s=(0,r.buildLayerMatrix)(a),u=Object.assign((0,i.findType1Conflicts)(a,s),(0,i.findType2Conflicts)(a,s)),c={},l=[],["u","d"].forEach((function(t){l="u"===t?s:Object.values(s).reverse(),["l","r"].forEach((function(e){"r"===e&&(l=l.map((function(t){return Object.values(t).reverse()})));var n=("u"===t?a.predecessors:a.successors).bind(a),r=(n=(0,i.verticalAlignment)(a,l,u,n),(0,i.horizontalCompaction)(a,l,n.root,n.align,"r"===e));"r"===e&&Object.keys(r).forEach((function(t){return r[t]=-r[t]})),c[t+e]=r}))})),(t=(0,i.findSmallestWidthAlignment)(a,c))&&(0,i.alignCoordinates)(c,t),(0,i.balance)(c,a.graph().align));null!=(t=Object.keys(f))&&t.forEach((function(t){h.node(t).x=f[t]}))}},13614:function(t,e,n){"use strict";function r(t){var e,n=new s.Graph({directed:!1}),r=t.nodes()[0],i=t.nodeCount();for(n.setNode(r,{});u(n,t)<i;)e=l(n,t),e=n.hasNode(e.v)?(0,o.slack)(t,e):-(0,o.slack)(t,e),h(n,t,e);return n}function i(t){var e,n=new s.Graph({directed:!1}),r=t.nodes()[0],i=t.nodeCount();for(n.setNode(r,{});c(n,t)<i;)e=l(n,t),e=n.hasNode(e.v)?(0,o.slack)(t,e):-(0,o.slack)(t,e),h(n,t,e);return n}Object.defineProperty(e,"__esModule",{value:!0}),e.feasibleTreeWithLayer=e.feasibleTree=void 0;var o=n(37323),a=n(69209),s=n(27652),u=(e.feasibleTree=r,function(t,e){function n(r){e.nodeEdges(r).forEach((function(i){var a=i.v;a=r===a?i.w:a;t.hasNode(a)||(0,o.slack)(e,i)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))}))}return t.nodes().forEach(n),t.nodeCount()}),c=(e.feasibleTreeWithLayer=i,function(t,e){function n(r){var i;null!=(i=e.nodeEdges(r))&&i.forEach((function(i){var a=i.v;a=r===a?i.w:a;t.hasNode(a)||void 0===e.node(a).layer&&(0,o.slack)(e,i)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))}))}return t.nodes().forEach(n),t.nodeCount()}),l=function(t,e){return(0,a.minBy)(e.edges(),(function(n){return t.hasNode(n.v)!==t.hasNode(n.w)?(0,o.slack)(e,n):1/0}))},h=function(t,e,n){t.nodes().forEach((function(t){e.node(t).rank||(e.node(t).rank=0),e.node(t).rank+=n}))};e.default={feasibleTree:r,feasibleTreeWithLayer:i}},76827:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=(Object.defineProperty(e,"__esModule",{value:!0}),n(37323)),o=n(13614),a=r(n(32253)),s=i.longestPath,u=function(t){(0,i.longestPathWithLayer)(t),(0,o.feasibleTreeWithLayer)(t)},c=function(t){(0,a.default)(t)};e.default=function(t){switch(t.graph().ranker){case"network-simplex":c(t);break;case"tight-tree":u(t);break;case"longest-path":s(t);break;default:u(t)}}},32253:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exchangeEdges=e.enterEdge=e.leaveEdge=e.initLowLimValues=e.calcCutValue=e.initCutValues=void 0;var r=n(13614),i=n(37323),o=n(69209),a=(n=n(69787),n.algorithm.preorder),s=n.algorithm.postorder,u=(e.initCutValues=function(t,e){var n=s(t,t.nodes());null!=(n=null==n?void 0:n.slice(0,(null==n?void 0:n.length)-1))&&n.forEach((function(n){u(t,e,n)}))},function(t,n,r){var i=t.node(r).parent;t.edgeFromArgs(r,i).cutvalue=(0,e.calcCutValue)(t,n,r)}),c=(e.calcCutValue=function(t,e,n){var r=t.node(n).parent,i=!0,o=e.edgeFromArgs(n,r),a=0;return o||(i=!1,o=e.edgeFromArgs(r,n)),a=o.weight,null!=(o=e.nodeEdges(n))&&o.forEach((function(o){var s=o.v===n,u=s?o.w:o.v;u!==r&&(s=s===i,o=e.edge(o).weight,a+=s?o:-o,h(t,n,u))&&(o=t.edgeFromArgs(n,u).cutvalue,a+=s?-o:o)})),a},e.initLowLimValues=function(t,e){void 0===e&&(e=t.nodes()[0]),c(t,{},1,e)},function(t,e,n,r,i){var o,a=n,s=n;n=t.node(r);return e[r]=!0,null!=(o=t.neighbors(r))&&o.forEach((function(n){e[n]||(s=c(t,e,s,n,r))})),n.low=a,n.lim=s++,i?n.parent=i:delete n.parent,s}),l=(e.leaveEdge=function(t){return t.edges().find((function(e){return t.edge(e).cutvalue<0}))},e.enterEdge=function(t,e,n){var r=n.v,a=n.w,s=(n=(e.hasEdge(r,a)||(r=n.w,a=n.v),t.node(r)),r=t.node(a),n),u=!1;n.lim>r.lim&&(s=r,u=!0),a=e.edges().filter((function(e){return u===f(t,t.node(e.v),s)&&u!==f(t,t.node(e.w),s)}));return(0,o.minBy)(a,(function(t){return(0,i.slack)(e,t)}))},e.exchangeEdges=function(t,n,r,i){var o=r.v;r=r.w;t.removeEdge(o,r),t.setEdge(i.v,i.w,{}),(0,e.initLowLimValues)(t),(0,e.initCutValues)(t,n),l(t,n)},function(t,e){var n=t.nodes().find((function(t){return!(null!=(t=e.node(t))&&t.parent)}));n=a(t,n);null!=(n=null==n?void 0:n.slice(1))&&n.forEach((function(n){var r=t.node(n).parent,i=e.edgeFromArgs(n,r),o=!1;i||(i=e.edgeFromArgs(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)}))}),h=function(t,e,n){return t.hasEdge(e,n)},f=function(t,e,n){return n.low<=e.lim&&e.lim<=n.lim};e.default=function(t){var n,a,s=(0,o.simplify)(t),u=((0,i.longestPath)(s),(0,r.feasibleTree)(s));for((0,e.initLowLimValues)(u),(0,e.initCutValues)(u,s);n=(0,e.leaveEdge)(u);)a=(0,e.enterEdge)(u,s,n),(0,e.exchangeEdges)(u,s,n,a)}},37323:function(t,e){"use strict";function n(t){function e(n){var i,o=t.node(n);return r[n]?o.rank:(r[n]=!0,null!=(n=t.outEdges(n))&&n.forEach((function(n){n=e(n.w)-t.edge(n).minlen,n&&(void 0===i||n<i)&&(i=n)})),i=i||0,o.rank=i)}var n,r={};null!=(n=t.sources())&&n.forEach(e)}function r(t){function e(n){var r,a=t.node(n);return o[n]?a.rank:(o[n]=!0,null!=(n=t.outEdges(n))&&n.forEach((function(n){n=e(n.w)-t.edge(n).minlen,n&&(void 0===r||n<r)&&(r=n)})),r=r||0,(void 0===i||r<i)&&(i=r),a.rank=r)}function n(e,r){var i=t.node(e),o=isNaN(i.layer)?r:i.layer;(void 0===i.rank||i.rank<o)&&(i.rank=o),null!=(r=t.outEdges(e))&&r.map((function(e){n(e.w,o+t.edge(e).minlen)}))}var r,i,o={};null!=(r=t.sources())&&r.forEach(e),void 0===i&&(i=0),t.nodes().forEach((function(e){var r=t.node(e);isNaN(r.layer)?r.rank-=i:n(e,r.layer)}))}function i(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}Object.defineProperty(e,"__esModule",{value:!0}),e.slack=e.longestPathWithLayer=e.longestPath=void 0,e.longestPath=n,e.longestPathWithLayer=r,e.slack=i,e.default={longestPath:n,longestPathWithLayer:r,slack:i}},69209:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.minBy=e.notime=e.time=e.partition=e.maxRank=e.addBorderNode=e.removeEmptyRanks=e.normalizeRanks=e.buildLayerMatrix=e.intersectRect=e.predecessorWeights=e.successorWeights=e.zipObject=e.asNonCompoundGraph=e.simplify=e.addDummyNode=void 0;var r=n(49784),i=n(27652);e.addDummyNode=function(t,e,n,r){for(var i;i="".concat(r).concat(Math.random()),t.hasNode(i););return n.dummy=e,t.setNode(i,n),i},e.simplify=function(t){var e=(new i.Graph).setGraph(t.graph());return t.nodes().forEach((function(n){e.setNode(n,t.node(n))})),t.edges().forEach((function(n){var r=e.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e},e.asNonCompoundGraph=function(t){var e=new i.Graph({multigraph:t.isMultigraph()}).setGraph(t.graph());return t.nodes().forEach((function(n){var r;null!=(r=t.children(n))&&r.length||e.setNode(n,t.node(n))})),t.edges().forEach((function(n){e.setEdgeObj(n,t.edge(n))})),e},e.zipObject=function(t,e){return null==t?void 0:t.reduce((function(t,n,r){return t[n]=e[r],t}),{})},e.successorWeights=function(t){var e={};return t.nodes().forEach((function(n){var r,i={};null!=(r=t.outEdges(n))&&r.forEach((function(e){i[e.w]=(i[e.w]||0)+((null==(e=t.edge(e))?void 0:e.weight)||0)})),e[n]=i})),e},e.predecessorWeights=function(t){var n=t.nodes(),r=n.map((function(e){var n={};return null!=(e=t.inEdges(e))&&e.forEach((function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return(0,e.zipObject)(n,r)},e.intersectRect=function(t,e){var n,r=Number(t.x),i=Number(t.y),o=Number(e.x)-r,a=(e=Number(e.y)-i,Number(t.width)/2);t=Number(t.height)/2;return o||e?(t=Math.abs(e)*a>Math.abs(o)*t?(n=(t=e<0?-t:t)*o/e,t):(n=a=o<0?-a:a)*e/o,{x:r+n,y:i+t}):{x:0,y:0}},e.buildLayerMatrix=function(t){for(var n=[],r=(0,e.maxRank)(t)+1,i=0;i<r;i++)n.push([]);for(t.nodes().forEach((function(e){var r=t.node(e).rank;void 0!==r&&n[r]&&n[r].push(e)})),i=0;i<r;i++)n[i]=n[i].sort((function(e,n){return e=null==(e=t.node(e))?void 0:e.order,n=null==(n=t.node(n))?void 0:n.order,Number(e)-Number(n)}));return n},e.normalizeRanks=function(t){var e=t.nodes().filter((function(e){return void 0!==(null==(e=t.node(e))?void 0:e.rank)})).map((function(e){return t.node(e).rank})),n=Math.min.apply(Math,e);t.nodes().forEach((function(e){e=t.node(e),e.hasOwnProperty("rank")&&n!==1/0&&(e.rank-=n)}))},e.removeEmptyRanks=function(t){for(var e=t.nodes(),n=e.filter((function(e){return void 0!==(null==(e=t.node(e))?void 0:e.rank)})).map((function(e){return t.node(e).rank})),r=Math.min.apply(Math,n),i=[],o=(e.forEach((function(e){var n=((null==(n=t.node(e))?void 0:n.rank)||0)-r;i[n]||(i[n]=[]),i[n].push(e)})),0),a=t.graph().nodeRankFactor||0,s=0;s<i.length;s++){var u=i[s];void 0===u?s%a!=0&&--o:o&&null!=u&&u.forEach((function(e){e=t.node(e),e&&(e.rank=e.rank||0,e.rank+=o)}))}},e.addBorderNode=function(t,n,i,o){var a={width:0,height:0};return(0,r.isNumber)(i)&&(0,r.isNumber)(o)&&(a.rank=i,a.order=o),(0,e.addDummyNode)(t,"border",a,n)},e.maxRank=function(t){var e;return t.nodes().forEach((function(n){n=null==(n=t.node(n))?void 0:n.rank,void 0!==n&&(void 0===e||e<n)&&(e=n)})),e=e||0},e.partition=function(t,e){var n={lhs:[],rhs:[]};return null!=t&&t.forEach((function(t){(e(t)?n.lhs:n.rhs).push(t)})),n},e.time=function(t,e){return Date.now(),e()},e.notime=function(t,e){return e()},e.minBy=function(t,e){return t.reduce((function(t,n){var r=e(t);return e(n)<r?n:t}))}},77057:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},u=(Object.defineProperty(e,"__esModule",{value:!0}),e.DagreCompoundLayout=void 0,n(62329)),c=n(31969),l=n(49784);i=u.Base,o(h,i),h.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},h.prototype.init=function(t){var e=t.hiddenNodes||[],n=t.hiddenEdges||[],r=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(e)),this.edges=this.getDataByOrder((t.edges||[]).concat(n)),this.combos=(t.combos||[]).concat(r.map((function(t){return a(a({},t),{collapsed:!0})})))},h.prototype.execute=function(){var t,e,n,r=this.nodes,i=this.edges;if(r)return e=(t=this.getLayoutConfig()).graphDef,n=t.graphOption,t=t.graphSettings,e=(0,c.buildGraph)(e,n,t),n=(0,c.flatGraph)(e,!0),this.updatePosition(n),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:r,edges:i}},h.prototype.getNodePath=function(t){var e=this.nodes,n=this.combos,r=(e=e.find((function(e){return e.id===t})),function(t,e){void 0===e&&(e=[]);var i=n.find((function(e){return e.id===t}));return i&&(e.unshift(t),i.parentId)?r(i.parentId,e):e});return e&&e.comboId?r(e.comboId,[t]):[t]},h.prototype.getLayoutConfig=function(){var t=this,e=t.nodes,n=t.edges,r=t.combos,i=t.nodeSize,o=t.rankdir,u=t.align,h=t.edgesep,f=t.nodesep,d=t.ranksep,p=t.settings,g=(r||[]).reduce((function(t,n){var i=e.filter((function(t){return t.comboId===n.id})).map((function(t){return t.id})),o=(r||[]).filter((function(t){return t.parentId===n.id})).map((function(t){return t.id}));return(i.length||o.length)&&(t[n.id]=s(s([],i,!0),o,!0)),t}),{}),m=i?(0,l.isArray)(i)?function(){return i}:function(){return[i,i]}:function(t){return t&&t.size?(0,l.isArray)(t.size)?t.size:(0,l.isObject)(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40]},v=(v=null==r?void 0:r[0])&&v.size?(0,l.isArray)(v.size)?v.size:[v.size,v.size]:[80,40],y=v[0],b=(v=v[1],null==(b=null==(b=t.graphSettings)?void 0:b.subScene)?void 0:b.meta),x=(null==(x=r.find((function(t){return!t.collapsed})))?void 0:x.padding)||[20,20,20,20],_=x[0],w=x[1],S=x[2];x=x[3],g={compound:g,nodes:s([],(e||[]).map((function(t){var e=m(t),n=e[0];e=e[1];return a(a({},t),{width:n,height:e})})),!0),edges:s([],(n||[]).map((function(t){return a(a({},t),{v:t.source,w:t.target})})),!0)},n={expanded:(r||[]).filter((function(t){return!t.collapsed})).map((function(t){return t.id}))},u={graph:{meta:{align:u,rankDir:o,nodeSep:f,edgeSep:h,rankSep:d}},subScene:{meta:{paddingTop:_||(null==b?void 0:b.paddingTop)||20,paddingRight:w||(null==b?void 0:b.paddingRight)||20,paddingBottom:S||(null==b?void 0:b.paddingBottom)||20,paddingLeft:x||(null==b?void 0:b.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:y,height:v}}},o=(0,c.mergeConfig)(p,a({},(0,c.mergeConfig)(u,c.LAYOUT_CONFIG)));return{graphDef:g,graphOption:n,graphSettings:t.graphSettings=o}},h.prototype.updatePosition=function(t){var e=t.nodes;t=t.edges;this.updateNodePosition(e,t),this.updateEdgePosition(e,t)},h.prototype.getBegin=function(t,e){var n,r,i=this.begin,o=[0,0];return i&&(r=n=1/0,t.forEach((function(t){n>t.x&&(n=t.x),r>t.y&&(r=t.y)})),e.forEach((function(t){t.points.forEach((function(t){n>t.x&&(n=t.x),r>t.y&&(r=t.y)}))})),o[0]=i[0]-n,o[1]=i[1]-r),o},h.prototype.updateNodePosition=function(t,e){var n=this.combos,r=this.nodes,i=this.edges,o=this.anchorPoint,a=this.graphSettings,s=this.getBegin(t,e);t.forEach((function(t){var u,l,h,f=t.x,d=t.y,p=t.id,g=t.type,m=t.coreBox;g===c.HierarchyNodeType.META&&p!==c.ROOT_NAME?(u=n.findIndex((function(t){return t.id===p})),h=null==(h=null==a?void 0:a.subScene)?void 0:h.meta,n[u].offsetX=f+s[0],n[u].offsetY=d+s[1],n[u].fixSize=[m.width,m.height],n[u].fixCollapseSize=[m.width,m.height],t.expanded?n[u].padding=[null==h?void 0:h.paddingTop,null==h?void 0:h.paddingRight,null==h?void 0:h.paddingBottom,null==h?void 0:h.paddingLeft]:n[u].padding=[0,0,0,0]):g===c.HierarchyNodeType.OP&&(u=r.findIndex((function(t){return t.id===p})),r[u].x=f+s[0],r[u].y=d+s[1],o)&&(l=[],m=e.filter((function(t){return t.v===p})),h=e.filter((function(t){return t.w===p})),0<m.length&&m.forEach((function(e){var n=e.points[0],r=(n.x-f)/t.width+.5;n=(n.y-d)/t.height+.5;l.push([r,n]),e.baseEdgeList.forEach((function(t){var e=i.find((function(e){return e.source===t.v&&e.target===t.w}));e&&(e.sourceAnchor=l.length-1)}))})),0<h.length&&h.forEach((function(e){var n=e.points[e.points.length-1],r=(n.x-f)/t.width+.5;n=(n.y-d)/t.height+.5;l.push([r,n]),e.baseEdgeList.forEach((function(t){var e=i.find((function(e){return e.source===t.v&&e.target===t.w}));e&&(e.targetAnchor=l.length-1)}))})),r[u].anchorPoints=0<l.length?l:r[u].anchorPoints||[])}))},h.prototype.updateEdgePosition=function(t,e){var n=this,r=n.combos,i=n.edges,o=n.controlPoints,u=this.getBegin(t,e);o&&(r.forEach((function(t){t.inEdges=[],t.outEdges=[]})),i.forEach((function(e){var i,o,l,h,f=t.find((function(t){return t.id===e.source})),d=t.find((function(t){return t.id===e.target})),p=[];p=(p=(f&&d?(0,c.getEdges)(null==f?void 0:f.id,null==d?void 0:d.id,t):(i=n.getNodePath(e.source),o=n.getNodePath(e.target),l=i.reverse().slice(f?0:1).find((function(e){return t.find((function(t){return t.id===e}))})),h=o.reverse().slice(d?0:1).find((function(e){return t.find((function(t){return t.id===e}))})),f=t.find((function(t){return t.id===l})),d=t.find((function(t){return t.id===h})),(0,c.getEdges)(null==f?void 0:f.id,null==d?void 0:d.id,t,{v:e.source,w:e.target}))).reduce((function(t,e){return s(s([],t,!0),e.points.map((function(t){return a(a({},t),{x:t.x+u[0],y:t.y+u[1]})})),!0)}),[])).slice(1,-1);if(e.controlPoints=p,(null==d?void 0:d.type)===c.NodeType.META){var g=r.findIndex((function(t){return t.id===(null==d?void 0:d.id)}));if(!r[g]||null!=(i=r[g].inEdges)&&i.some((function(t){return t.source===f.id&&t.target===d.id})))return;null!=(o=r[g].inEdges)&&o.push({source:f.id,target:d.id,controlPoints:p})}(null==f?void 0:f.type)===c.NodeType.META&&(g=r.findIndex((function(t){return t.id===(null==f?void 0:f.id)})),!r[g]||null!=(i=r[g].outEdges)&&i.some((function(t){return t.source===f.id&&t.target===d.id}))||null!=(o=r[g].outEdges)&&o.push({source:f.id,target:d.id,controlPoints:p}))})))},h.prototype.getType=function(){return"dagreCompound"},h.prototype.getDataByOrder=function(t){return t.every((function(t){return void 0!==t.layoutOrder}))||t.forEach((function(t,e){t.layoutOrder=e})),t.sort((function(t,e){return t.layoutOrder-e.layoutOrder}))},n=h;function h(t){var e=i.call(this)||this;return e.rankdir="TB",e.nodesep=50,e.edgesep=5,e.ranksep=50,e.controlPoints=!0,e.anchorPoint=!0,e.nodes=[],e.edges=[],e.combos=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}e.DagreCompoundLayout=n},34015:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&("get"in i?e.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},u=(Object.defineProperty(e,"__esModule",{value:!0}),a(n(14085))),c=s(n(88221)),l=s(n(87064)),h=n(20171);e.default=function(t,e){var n,i,o,a,s,f=t.nodes,d=t.edges,p=e.width,g=e.height;return null!=f&&f.length?(n=[],f.forEach((function(t){var e;1<d.filter((function(e){return e.source===t.id||e.target===t.id})).length&&(delete(e=r({},t)).size,n.push(e))})),i=[],d.forEach((function(t){var e=n.find((function(e){return e.id===t.source})),r=n.find((function(e){return e.id===t.target}));e&&r&&i.push(t)})),o=new h.DagreLayout({type:"dagre",ranksep:e.nodeMinGap,nodesep:e.nodeMinGap}).layout({nodes:n,edges:i}).nodes,f.forEach((function(t){var e=(o||[]).find((function(e){return e.id===t.id}));t.x=(null==e?void 0:e.x)||p/2,t.y=(null==e?void 0:e.y)||g/2})),a=JSON.parse(JSON.stringify(f)),t=JSON.parse(JSON.stringify(d)),s=u.forceSimulation().nodes(a).force("link",u.forceLink(t).id((function(t){return t.id})).distance((function(t){return i.find((function(e){return e.source===t.source&&e.target===t.target}))?30:20}))).force("charge",u.forceManyBody()).force("center",u.forceCenter(p/2,g/2)).force("x",u.forceX(p/2)).force("y",u.forceY(g/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),new Promise((function(t){s.on("end",(function(){f.forEach((function(t){var e=a.find((function(e){return e.id===t.id}));e&&(t.x=e.x,t.y=e.y)}));var n=Math.min.apply(Math,f.map((function(t){return t.x}))),r=Math.max.apply(Math,f.map((function(t){return t.x}))),i=Math.min.apply(Math,f.map((function(t){return t.y}))),o=Math.max.apply(Math,f.map((function(t){return t.y}))),s=p/(r-n),u=g/(o-i);f.forEach((function(t){void 0!==t.x&&s<1&&(t.x=(t.x-n)*s),void 0!==t.y&&u<1&&(t.y=(t.y-i)*u)})),f.forEach((function(t){t.sizeTemp=t.size,t.size=[10,10]})),(0,l.default)(f,d),f.forEach((function(t){t.size=t.sizeTemp||[],delete t.sizeTemp})),(0,c.default)({nodes:f,edges:d},e),t()}))}))):Promise.resolve()}},88221:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=(Object.defineProperty(e,"__esModule",{value:!0}),r(n(28611)));e.default=function(t,e){if(!t.nodes||0===t.nodes.length)return t;var n=e.width,r=e.height,o=e.nodeMinGap,a=1e4,s=1e4,u=(t.nodes.forEach((function(t){var e=t.size[0]||50;t=t.size[1]||50;a=Math.min(e,a),s=Math.min(t,s)})),new i.default);u.init(n,r,{CELL_H:s,CELL_W:a}),t.nodes.forEach((function(t){var e=u.occupyNearest(t);e&&(e.node={id:t.id,size:t.size},t.x=e.x,t.y=e.y,t.dx=e.dx,t.dy=e.dy)}));for(var c=0;c<t.nodes.length;c++){var l=t.nodes[c],h=u.findGridByNodeId(l.id);if(!h)throw new Error("can not find node cell");var f=h.column,d=h.row;if(l.size[0]+o>a){for(var p=m=Math.ceil((l.size[0]+o)/a)-1,g=0;g<m;g++){if(!(-1<u.additionColumn.indexOf(f+g+1))||u.cells[f+g+1][d].node)break;p--}u.insertColumn(f,p)}if(l.size[1]+o>s){var m;for(p=m=Math.ceil((l.size[1]+o)/s)-1,g=0;g<m;g++){if(!(-1<u.additionRow.indexOf(d+g+1))||u.cells[f][d+g+1].node)break;p--}u.insertRow(d,p)}}for(c=0;c<u.columnNum;c++)for(g=0;g<u.rowNum;g++)!function(e){var n=u.cells[c][e];n.node&&(e=t.nodes.find((function(t){return t.id===(null==(t=null==n?void 0:n.node)?void 0:t.id)})))&&(e.x=n.x+e.size[0]/2,e.y=n.y+e.size[1]/2)}(g)}},28611:function(t,e){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function r(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}Object.defineProperty(e,"__esModule",{value:!0}),r.prototype.init=function(t,e,n){this.cells=[],this.CELL_W=n.CELL_W||r.DEFAULT_CELL_W,this.CELL_H=n.CELL_H||r.DEFAULT_CELL_H,this.columnNum=Math.ceil(t/this.CELL_W),this.rowNum=Math.ceil(e/this.CELL_H),r.MIN_DIST=Math.pow(t,2)+Math.pow(e,2);for(var i=0;i<this.columnNum;i++){for(var o=[],a=0;a<this.rowNum;a++){var s={dx:i,dy:a,x:i*this.CELL_W,y:a*this.CELL_H,occupied:!1};o.push(s)}this.cells.push(o)}},r.prototype.findGridByNodeId=function(t){for(var e,n=0;n<this.columnNum;n++)for(var r=0;r<this.rowNum;r++)if(this.cells[n][r].node&&(null==(e=null==(e=this.cells[n][r])?void 0:e.node)?void 0:e.id)===t)return{column:n,row:r};return null},r.prototype.sqdist=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},r.prototype.occupyNearest=function(t){for(var e,n=r.MIN_DIST,i=null,o=0;o<this.columnNum;o++)for(var a=0;a<this.rowNum;a++)!this.cells[o][a].occupied&&(e=this.sqdist(t,this.cells[o][a]))<n&&(n=e,i=this.cells[o][a]);return i&&(i.occupied=!0),i},r.prototype.insertColumn=function(t,e){if(!(e<=0)){for(var r=0;r<e;r++){this.cells[r+this.columnNum]=[];for(var i=0;i<this.rowNum;i++)this.cells[r+this.columnNum][i]={dx:r,dy:i,x:r*this.CELL_W,y:i*this.CELL_H,occupied:!1,node:null}}for(r=this.columnNum-1;t<r;r--)for(i=0;i<this.rowNum;i++)this.cells[r+e][i]=n(n({},this.cells[r][i]),{x:(r+e)*this.CELL_W,y:i*this.CELL_H}),this.cells[r][i]={x:r*this.CELL_W,y:i*this.CELL_H,occupied:!0,node:null};for(i=0;i<this.additionColumn.length;i++)this.additionColumn[i]>=t&&(this.additionColumn[i]+=e);for(r=0;r<e;r++)this.additionColumn.push(t+r+1);this.columnNum+=e}},r.prototype.insertRow=function(t,e){if(!(e<=0)){for(var r=0;r<e;r++)for(var i=0;i<this.columnNum;i++)this.cells[i][r+this.rowNum]={dx:i,dy:r,x:i*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null};for(i=0;i<this.columnNum;i++)for(r=this.rowNum-1;t<r;r--)this.cells[i][r+e]=n(n({},this.cells[i][r]),{dx:i,dy:r+e,x:i*this.CELL_W,y:(r+e)*this.CELL_H}),this.cells[i][r]={dx:i,dy:r,x:i*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null};for(r=0;r<this.additionRow.length;r++)this.additionRow[r]>=t&&(this.additionRow[r]+=e);for(i=0;i<e;i++)this.additionRow.push(t+i+1);this.rowNum+=e}},r.prototype.getNodes=function(){for(var t=[],e=0;e<this.columnNum;e++)for(var n=0;n<this.rowNum;n++)this.cells[e][n].node&&t.push(this.cells[e][n]);return t},r.MIN_DIST=50,r.DEFAULT_CELL_W=80,r.DEFAULT_CELL_H=80,e.default=r},90441:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=void 0,n(62329)),u=a(n(34015));i=s.Base,o(c,i),c.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},c.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges;return null!=e&&e.forEach((function(t){t.size||(t.size=[50,50])})),(0,u.default)({nodes:e,edges:n},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then((function(){t.onLayoutEnd&&t.onLayoutEnd()}))},c.prototype.getType=function(){return"er"},a=c;function c(t){var e=i.call(this)||this;return e.width=300,e.height=300,e.nodeMinGap=50,e.onLayoutEnd=function(){},t&&e.updateCfg(t),e}e.ERLayout=a},87064:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=1200,r=800,i=1e7,o=10,a=1.5707963267948966,s=new Map,u=10,c=10,l=.8,h=.1,f=.5;function d(t,e){var n,r=(s.get(t.id)||[]).find((function(t){return t.source===e.id||t.target===e.id})),u=t.size[0]*t.size[1],c=e.size[0]*e.size[1],l=c<u?e:t,h=(c=c<u?t:e,u=l.x-l.size[0]/2,t=l.y-l.size[1]/2,l.x+l.size[0]/2),f=l.y+l.size[1]/2,d=c.x-c.size[0]/2,p=c.y-c.size[1]/2,g=c.x+c.size[0]/2,m=c.y+c.size[1]/2,v=l.x,y=l.y,b=c.x,x=c.y,_=0,w=0;return d<=h&&u<=g&&p<=f&&t<=m?(w=Math.sqrt(Math.pow(b-v,2)+Math.pow(x-y,2)),_=+o/(w=0===w?1e-7:w)*100+((h<g?h:g)-(d<u?u:d))*((f<m?f:m)-(p<t?t:p)),_*=i):(b=c,v=!1,y=(x=l).x-x.size[0]/2,h=x.y-x.size[1]/2,g=x.x+x.size[0]/2,u=x.y+x.size[1]/2,d=b.x-b.size[0]/2,f=b.y-b.size[1]/2,m=b.x+b.size[0]/2,t=b.y+b.size[1]/2,p=x.x,x=x.y,c=b.x,b=b.y,c-=p,p=Math.atan2(c,b-x),n=l=x=b=0,a<p?(x=h-t,b=d-g,l=parseFloat((x?x/Math.cos(p):b).toFixed(2)),n=parseFloat((b?b/Math.sin(p):x).toFixed(2))):l=n=0<p&&p<=a?(b=d-g)<(x=f-u)?parseFloat((x?x/Math.cos(p):b).toFixed(2)):parseFloat((b?b/Math.sin(p):x).toFixed(2)):p<-a?(b=-(m-y))<(x=h-t)?parseFloat((x?x/Math.cos(p):b).toFixed(2)):parseFloat((b?b/Math.sin(p):x).toFixed(2)):(x=f-u,(b=Math.abs(c)>(g-y)/2?y-m:c)<x?parseFloat((x?x/Math.cos(p):b).toFixed(2)):parseFloat((b&&0!==p?b/Math.sin(p):x).toFixed(2))),d=parseFloat(p.toFixed(2)),h=v&&1.1780972450961724<d&&d<1.9634954084936207,t={distance:Math.abs(l<n?l:n),isHoriz:h},(w=t.distance)<=o?_+=0!==w?r?o+ +i/w:o+i*o/w:i:(_+=w,r&&(_+=w*w))),_}function p(t){for(var e=0,i=0;i<t.length;i++){var o=t[i];(o.x<0||o.y<0||o.x>n||o.y>r)&&(e+=1e12);for(var a=i+1;a<t.length;a++)e+=d(o,t[a])}return e}function g(t,e){for(var n=!1,r=+u,i=+c,o=[r,-r,0,0],a=[0,0,i,-i],s=0;s<t.length;++s)for(var d,g,v=t[s],y=m(v,t),b=0;b<o.length;b++)(function(t,e,n,r){for(var i=new Map,o=(n=(n.forEach((function(t,e){i.set(t.id,t)})),r.filter((function(e){return e.source===t.id||e.target===t.id}))||[]),[]),a=(n.forEach((function(e){e=e.source===t.id?e.target:e.source,e=i.get(e),e&&o.push(e)})),!0),s=0;s<o.length;s++){var u=o[s],c=180*Math.atan((t.y-u.y)/(u.x-t.y)),l=180*Math.atan((e.y-u.y)/(u.x-e.y)),h=70<c&&c<110,f=70<l&&l<110;if((c<30||150<c)&&!(l<30||150<l)||c*l<0){a=!1;break}if(h&&!f||c*l<0){a=!1;break}if((u.x-t.x)*(u.x-e.x)<0){a=!1;break}if((u.y-t.y)*(u.y-e.y)<0){a=!1;break}}return a})(v,{x:v.x+o[b],y:v.y+a[b]},t,e)&&(v.x+=o[b],v.y+=a[b],d=m(v,t),g=Math.random(),d<y||g<l&&h<g?(y=d,n=!0):(v.x-=o[b],v.y-=a[b]));return h<l&&(l*=f),n?p(t):0}function m(t,e){var i=0;(t.x<0||t.y<0||t.x+t.size[0]+20>n||t.y+t.size[1]+20>r)&&(i+=1e12);for(var o=0;o<e.length;++o)t.id!==e[o].id&&(i+=d(t,e[o]));return i}e.default=function(t,e){if(0!==t.length){t.forEach((function(t){var n=e.filter((function(e){return e.source===t.id||e.target===t.id}));s.set(t,n)})),t.sort((function(t,e){return(null==(t=s.get(t.id))?void 0:t.length)-(null==(t=s.get(e.id))?void 0:t.length)}));for(var n=p(t),r=20,i=0,o=0;0<r&&!(50<=++o);){var a=g(t,e);a=(i=0!==a?a:i)-n,n=i;0==a?--r:r=20}t.forEach((function(t){t.x=t.x-t.size[0]/2,t.y=t.y-t.size[1]/2}))}return{nodes:t,edges:e}}},89806:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&("get"in i?e.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=(Object.defineProperty(e,"__esModule",{value:!0}),o(n(14085))),s=n(49784);e.default=function(){function t(t){return function(){return t}}var e,n=function(t){return t.cluster},r=t(1),i=t(-1),o=t(100),u=t(.1),c=[0,0],l=[],h={},f=[],d=100,p=100,g={none:{x:0,y:0}},m=[],v="force",y=!0,b=.1;function x(t){if(!y)return x;e.tick(),w();for(var r=0,i=l.length,o=void 0,a=t*b;r<i;++r)(o=l[r]).vx+=(g[n(o)].x-o.x)*a,o.vy+=(g[n(o)].y-o.y)*a}function _(){if(l&&l.length){if(void 0===n(l[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var t=function(){var t=[],e=[],i={},o={},a=[];return o=function(t){var e={};return t.forEach((function(t){t=n(t),e[t]||(e[t]={count:0,sumforceNodeSize:0})})),t.forEach((function(t){var i=n(t),o=(t=r(t),e[i]);o.count=o.count+1,o.sumforceNodeSize=o.sumforceNodeSize+Math.PI*(t*t)*1.3,e[i]=o})),e}(l),a=function(t){var e={},r=[];return t.forEach((function(t){r=(0,s.getEdgeTerminal)(t,"source"),t=(0,s.getEdgeTerminal)(t,"target"),r=n(h[r]),t=n(h[t]);t=r<=t?"".concat(r,"~").concat(t):"".concat(t,"~").concat(r);var r=0;void 0!==e[t]&&(r=e[t]),e[t]=r+=1})),Object.entries(e).forEach((function(t){var e=t[0],n=(t=t[1],e.split("~")[0]);e=e.split("~")[1];void 0!==n&&void 0!==e&&r.push({source:n,target:e,count:t})})),r}(f),Object.keys(o).forEach((function(e,n){var r=o[e];t.push({id:e,size:r.count,r:Math.sqrt(r.sumforceNodeSize/Math.PI)}),i[e]=n})),a.forEach((function(t){var n=(0,s.getEdgeTerminal)(t,"source"),r=(0,s.getEdgeTerminal)(t,"target");n=i[n],r=i[r];void 0!==n&&void 0!==r&&e.push({source:n,target:r,count:t.count})})),{nodes:t,links:e}}();e=a.forceSimulation(t.nodes).force("x",a.forceX(d).strength(.1)).force("y",a.forceY(p).strength(.1)).force("collide",a.forceCollide((function(t){return t.r})).iterations(4)).force("charge",a.forceManyBody().strength(i)).force("links",a.forceLink(t.nodes.length?t.links:[]).distance(o).strength(u)),m=e.nodes(),w()}}function w(){return g={none:{x:0,y:0}},m.forEach((function(t){g[t.id]={x:t.x-c[0],y:t.y-c[1]}})),g}return x.initialize=function(t){l=t,_()},x.template=function(t){return arguments.length?(v=t,_(),x):v},x.groupBy=function(t){return arguments.length?(n="string"==typeof t?function(e){return e[t]}:t,x):n},x.enableGrouping=function(t){return arguments.length?(y=t,x):y},x.strength=function(t){return arguments.length?(b=t,x):b},x.centerX=function(t){return arguments.length?(d=t,x):d},x.centerY=function(t){return arguments.length?(p=t,x):p},x.nodes=function(t){return arguments.length?(h={},(t||[]).forEach((function(t){h[t.id]=t})),l=t||[],x):l},x.links=function(t){return arguments.length?(f=t||[],_(),x):f},x.nodeSize=x.forceNodeSize=function(e){return arguments.length?(r="function"==typeof e?e:t(+e),_(),x):r},x.forceCharge=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),_(),x):i},x.forceLinkDistance=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),_(),x):o},x.forceLinkStrength=function(e){return arguments.length?(u="function"==typeof e?e:t(+e),_(),x):u},x.offset=function(t){return arguments.length?(c=t,x):c},x.getFocis=w,x}},8810:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&("get"in i?e.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),u=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&a(e,t,n);return s(e,t),e},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},l=(Object.defineProperty(e,"__esModule",{value:!0}),e.ForceLayout=void 0,u(n(14085))),h=c(n(89806)),f=n(49784),d=(u=n(62329),n(16470));i=u.Base,o(p,i),p.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},p.prototype.init=function(t){this.nodes=t.nodes||[],t=t.edges||[],this.edges=t.map((function(t){var e={},n=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach((function(r){-1<n.indexOf(r)||(e[r]=t[r])})),e})),this.ticking=!1},p.prototype.execute=function(t){var e=this,n=e.nodes,r=e.edges;if(!e.ticking){var i,o,a,s,u=e.forceSimulation,c=e.alphaMin,f=e.alphaDecay,p=e.alpha;if(u)t&&(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(r)),u.nodes(n),r&&e.edgeForce?e.edgeForce.links(r):r&&!e.edgeForce&&(m=l.forceLink().id((function(t){return t.id})).links(r),e.edgeStrength&&m.strength(e.edgeStrength),e.linkDistance&&m.distance(e.linkDistance),e.edgeForce=m,u.force("link",m))),e.preventOverlap&&e.overlapProcess(u),u.alpha(p).restart(),this.ticking=!0;else try{var g,m,v=l.forceManyBody();if(e.nodeStrength&&v.strength(e.nodeStrength),u=l.forceSimulation().nodes(n),e.clustering&&((g=(0,h.default)()).centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),r&&g.links(r),n&&g.nodes(n),g.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=g,u.force("group",g)),u.force("center",l.forceCenter(e.center[0],e.center[1])).force("charge",v).alpha(p).alphaDecay(f).alphaMin(c),e.preventOverlap&&e.overlapProcess(u),r&&(m=l.forceLink().id((function(t){return t.id})).links(r),e.edgeStrength&&m.strength(e.edgeStrength),e.linkDistance&&m.distance(e.linkDistance),e.edgeForce=m,u.force("link",m)),!e.workerEnabled||"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||(e.workerEnabled=!1),e.workerEnabled){u.stop(),o=(i=u).alphaMin(),a=i.alphaTarget(),s=i.alpha(),o=Math.log((o-a)/(s-a))/Math.log(1-i.alphaDecay());for(var y=Math.ceil(o),b=1;b<=y;b++)u.tick(),postMessage({nodes:n,currentTick:b,totalTicks:y,type:d.LAYOUT_MESSAGE.TICK},void 0);e.ticking=!1}else u.on("tick",(function(){e.tick()})).on("end",(function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()})),e.ticking=!0;e.forceSimulation=u,e.ticking=!0}catch(t){e.ticking=!1}}},p.prototype.overlapProcess=function(t){var e,n,r,i=this.nodeSize,o=this.nodeSpacing,a=this.collideStrength,s=(0,f.isNumber)(o)?function(){return o}:(0,f.isFunction)(o)?o:function(){return 0};n=i?(0,f.isFunction)(i)?function(t){return i(t)+s(t)}:(0,f.isArray)(i)?(e=(i[0]>i[1]?i[0]:i[1])/2,function(t){return e+s(t)}):(0,f.isNumber)(i)?(r=i/2,function(t){return r+s(t)}):function(){return 10}:function(t){return t.size?(0,f.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+s(t):(0,f.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)/2+s(t):t.size/2+s(t):10+s(t)},t.force("collisionForce",l.forceCollide(n).strength(a))},p.prototype.updateCfg=function(t){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,t)},p.prototype.destroy=function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0},c=p;function p(t){var e=i.call(this)||this;return e.center=[0,0],e.nodeStrength=null,e.edgeStrength=null,e.preventOverlap=!1,e.clusterNodeStrength=null,e.clusterEdgeStrength=null,e.clusterEdgeDistance=null,e.clusterNodeSize=null,e.clusterFociStrength=null,e.linkDistance=50,e.alphaDecay=.028,e.alphaMin=.001,e.alpha=.3,e.collideStrength=1,e.workerEnabled=!1,e.tick=function(){},e.onLayoutEnd=function(){},e.ticking=void 0,t&&e.updateCfg(t),e}e.ForceLayout=c},85717:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&("get"in i?e.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(8810),e)},91019:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forceNBody=void 0;var r=n(76749);function i(t){var e=0,n=0,r=0;if(t.length){for(var i=0;i<4;i++)(o=t[i])&&o.weight&&(e+=o.weight,n+=o.x*o.weight,r+=o.y*o.weight);t.x=n/e,t.y=r/e,t.weight=e}else{var o=t;t.x=o.data.x,t.y=o.data.y,t.weight=o.data.weight}}e.forceNBody=function(t,e,n,a,s){var u=n/a,c=(n=t.map((function(t,n){t=e[t.id];var r=t.data,i=t.x,o=t.y;t=t.size,r=r.layout.force.nodeStrength;return{x:i,y:o,size:t,index:n,vx:0,vy:0,weight:u*r}})),(0,r.quadtree)(n,(function(t){return t.x}),(function(t){return t.y})).visitAfter(i));return n.forEach((function(t){var e;e=t,c.visit((function(t,n,r,i,a){return o(t,n,r,i,a,e)}))})),n.map((function(n,r){var i=e[t[r].id].data.layout.force.mass;i=void 0===i?1:i;s[2*r]=n.vx/i,s[2*r+1]=n.vy/i})),s};var o=function(t,e,n,r,i,o){var a,s=o.x-t.x||.1,u=o.y-t.y||.1,c=(r=r-e,e=s*s+u*u,Math.sqrt(e)*e);return r*r*.81<e?(a=t.weight/c,o.vx+=s*a,o.vy+=u*a,!0):!t.length&&void(t.data!==o&&(a=t.data.weight/c,o.vx+=s*a,o.vy+=u*a))}},6740:function(t,e,n){"use strict";function r(t,e){var n=t?(0,c.isNumber)(t)?function(e){return t}:t:function(t){return e||1};return n}var i,o,a=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},u=(Object.defineProperty(e,"__esModule",{value:!0}),e.Force2Layout=void 0,n(62329)),c=n(49784),l=n(91019);o=u.Base,a(h,o),h.prototype.getCentripetalOptions=function(){function t(t){return"function"==typeof h?h(t):h}var e,n,r,i=this.leafCluster,o=this.clustering,a=this.nodeClusterBy,u=this.nodes,l=this.nodeMap,h=this.clusterNodeStrength,f={},d=(o=(i&&(e=this.getSameTypeLeafMap()||{},n=Array.from(new Set(null==u?void 0:u.map((function(t){return t[a]}))))||[],f={single:100,leaf:function(r,i,o){var a=e[r.id]||{},s=a.relativeLeafNodes;a=a.sameTypeLeafNodes;return(null==a?void 0:a.length)===(null==s?void 0:s.length)||1===(null===n?void 0:n.length)?1:t(r)},others:1,center:function(t,n,r){var i,o=((null==(o=t.data)?void 0:o.layout)||{}).degree;return o?(1!==o||1===(t=void 0===(o=(e[t.id]||{}).sameTypeLeafNodes)?[]:o).length?i=void 0:1<t.length&&(i=(0,c.getAvgNodePosition)(t)),{x:null==i?void 0:i.x,y:null==i?void 0:i.y}):{x:100,y:100}}}),o&&(e=e||this.getSameTypeLeafMap(),i=Array.from(new Set(u.map((function(t,e){return t[a]})))).filter((function(t){return void 0!==t})),r={},i.forEach((function(t){var e=u.filter((function(e){return e[a]===t})).map((function(t){return l[t.id]}));r[t]=(0,c.getAvgNodePosition)(e)})),f={single:t,leaf:t,others:t,center:function(t,e,n){return t=r[t[a]],{x:null==t?void 0:t.x,y:null==t?void 0:t.y}}}),this.centripetalOptions=s(s({},this.centripetalOptions),f),this.centripetalOptions),o.leaf),p=o.single,g=o.others;d&&"function"!=typeof d&&(this.centripetalOptions.leaf=function(){return d}),p&&"function"!=typeof p&&(this.centripetalOptions.single=function(){return p}),g&&"function"!=typeof g&&(this.centripetalOptions.others=function(){return g})},h.prototype.updateCfg=function(t){t&&Object.assign(this,t)},h.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},h.prototype.execute=function(){var t,e,n,i,o,a,u,l=this,h=(l.stop(),l.nodes),f=l.edges,d=l.defSpringLen;l.judgingDistance=0,h&&0!==h.length?(l.width||"undefined"==typeof window||(l.width=window.innerWidth),l.height||"undefined"==typeof window||(l.height=window.innerHeight),l.center||(l.center=[l.width/2,l.height/2]),t=l.center,1===h.length?(h[0].x=t[0],h[0].y=t[1],l.onLayoutEnd([s({},h[0])])):(l.degreesMap=(0,c.getDegreeMap)(h,f),l.getMass||(l.getMass=function(t){var e=1;(0,c.isNumber)(t.mass)&&(e=t.mass),t=l.degreesMap[t.id].all;return!t||t<5?e:5*t*e}),e=l.nodeSize,l.preventOverlap&&(n=l.nodeSpacing,i=(0,c.isNumber)(n)?function(){return n}:(0,c.isFunction)(n)?n:function(){return 0},o=e?(0,c.isArray)(e)?function(t){return Math.max(e[0],e[1])+i(t)}:function(t){return e+i(t)}:function(t){return t.size?(0,c.isArray)(t.size)?Math.max(t.size[0],t.size[1])+i(t):(0,c.isObject)(t.size)?Math.max(t.size.width,t.size.height)+i(t):t.size+i(t):10+i(t)}),l.nodeSize=o,l.linkDistance=r(l.linkDistance,1),l.nodeStrength=r(l.nodeStrength,1),l.edgeStrength=r(l.edgeStrength,1),a={},u={},h.forEach((function(t,e){(0,c.isNumber)(t.x)||(t.x=Math.random()*l.width),(0,c.isNumber)(t.y)||(t.y=Math.random()*l.height);var n=l.degreesMap[t.id];a[t.id]=s(s({},t),{data:s(s({},t.data),{size:l.nodeSize(t)||30,layout:{inDegree:n.in,outDegree:n.out,degree:n.all,tDegree:n.in,sDegree:n.out,force:{mass:l.getMass(t),nodeStrength:l.nodeStrength(t)}}})}),u[t.id]=e})),l.nodeMap=a,l.nodeIdxMap=u,l.edgeInfos=[],null!=f&&f.forEach((function(t){var n=a[t.source],r=a[t.target];n&&r?l.edgeInfos.push({edgeStrength:l.edgeStrength(t),linkDistance:d?d(s(s({},t),{source:n,target:r}),n,r):l.linkDistance(t,n,r)||1+(e(n)+e(n)||0)/2}):elf.edgeInfos.push({})})),this.getCentripetalOptions(),l.onLayoutEnd=l.onLayoutEnd||function(){},l.run())):l.onLayoutEnd([])},h.prototype.run=function(){var t=this,e=t.maxIteration,n=t.nodes,r=t.workerEnabled,i=t.minMovement,o=t.animate,a=t.nodeMap;if(n){var s,u=[],c=(n.forEach((function(t,e){u[2*e]=0,u[2*e+1]=0})),e);if(r||!o){for(var l=0;(t.judgingDistance>i||l<1)&&l<c;l++)t.runOneStep(l,u);t.onLayoutEnd(Object.values(a))}else"undefined"!=typeof window&&(s=0,this.timeInterval=window.setInterval((function(){n&&(t.runOneStep(s,u),c<=++s||t.judgingDistance<i)&&(t.onLayoutEnd(Object.values(a)),window.clearInterval(t.timeInterval))}),0))}},h.prototype.runOneStep=function(t,e){var n,r=this,i=r.nodes,o=r.edges,a=(r.nodeMap,r.monitor),s=[];null!=i&&i.length&&(r.calRepulsive(s),o&&r.calAttractive(s),r.calGravity(s),n=r.interval,r.updateVelocity(s,e,n),r.updatePosition(e,n),null!=(e=r.tick)&&e.call(r),a)&&a({energy:this.calTotalEnergy(s),nodes:i,edges:o,iterations:t})},h.prototype.calTotalEnergy=function(t){var e,n=this.nodes,r=this.nodeMap;return null!=n&&n.length?(e=0,n.forEach((function(n,i){var o=t[2*i];i=t[2*i+1],n=r[n.id].data.layout.force.mass;e+=(void 0===n?1:n)*(o*o+i*i)*.5})),e):0},h.prototype.calRepulsive=function(t){var e=this.nodes,n=this.nodeMap,r=this.factor,i=this.coulombDisScale;this.nodeSize,(0,l.forceNBody)(e,n,r,i*i,t)},h.prototype.calAttractive=function(t){var e=this.edges,n=this.nodeMap,r=this.nodeIdxMap,i=this.edgeInfos;this.nodeSize,e.forEach((function(e,o){var a,s,u,l,h=(0,c.getEdgeTerminal)(e,"source"),f=(e=(0,c.getEdgeTerminal)(e,"target"),n[h]),d=n[e];f&&d&&(a=d.x-f.x,u=d.y-f.y,a||u||(a=.01*Math.random(),u=.01*Math.random()),s=Math.sqrt(a*a+u*u),l=(o=i[o]||{}).linkDistance,o=o.edgeStrength,f=1/(f.data.layout.force.mass||1),d=1/(d.data.layout.force.mass||1),l=u/s*(u=((void 0===l?200:l)-s)*(void 0===o?200:o)),o=2*r[h],h=2*r[e],t[o]-=(e=a/s*u)*f,t[1+o]-=l*f,t[h]+=e*d,t[1+h]+=l*d)}))},h.prototype.calGravity=function(t){var e=this,n=e.nodes,r=e.edges,i=void 0===r?[]:r,o=e.nodeMap,a=e.width,s=e.height,u=e.center,l=e.gravity,h=e.degreesMap,f=e.centripetalOptions;if(n)for(var d=n.length,p=0;p<d;p++){var g,m,v=2*p,y=o[n[p].id],b=y.data.layout.force.mass,x=(b=void 0===b?1:b,0),_=0,w=l,S=h[y.id],E=S.in,M=S.out,A=(S=S.all,null==(A=e.getCenter)?void 0:A.call(e,y,S));A?(g=A[0],m=A[1],A=A[2],x=y.x-g,_=y.y-m,w=A):(x=y.x-u[0],_=y.y-u[1]),w&&(t[v]-=w*x/b,t[1+v]-=w*_/b),f&&(g=f.leaf,m=f.single,A=f.others,_=(w=(null==(x=f.center)?void 0:x(y,n,i,a,s))||{x:0,y:0,centerStrength:0}).x,x=w.y,w=w.centerStrength,(0,c.isNumber)(_))&&(0,c.isNumber)(x)&&(_=(y.x-_)/b,x=(y.y-x)/b,w&&(t[v]-=w*_,t[1+v]-=w*x),0===S?(b=m(y))&&(t[v]-=b*_,t[1+v]-=b*x):0===E||0===M?(w=g(y,n,i))&&(t[v]-=w*_,t[1+v]-=w*x):(S=A(y))&&(t[v]-=S*_,t[1+v]-=S*x))}},h.prototype.updateVelocity=function(t,e,n){var r=this.nodes,i=this.damping,o=this.maxSpeed;null!=r&&r.length&&r.forEach((function(r,a){var s=(e[2*a]+t[2*a]*n)*i||.01,u=(e[2*a+1]+t[2*a+1]*n)*i||.01,c=Math.sqrt(s*s+u*u);o<c&&(s*=c=o/c,u*=c),e[2*a]=s,e[2*a+1]=u}))},h.prototype.updatePosition=function(t,e){var n,r=this,i=r.nodes,o=r.distanceThresholdMode,a=r.nodeMap;null!=i&&i.length?(n=0,"max"===o?r.judgingDistance=-1/0:"min"===o&&(r.judgingDistance=1/0),i.forEach((function(i,s){var u=a[i.id];if((0,c.isNumber)(i.fx)&&(0,c.isNumber)(i.fy))i.x=i.fx,i.y=i.fy,u.x=i.x,u.y=i.y;else{var l=t[2*s]*e,h=(s=t[2*s+1]*e,i.x+=l,i.y+=s,u.x=i.x,u.y=i.y,Math.sqrt(l*l+s*s));switch(o){case"max":r.judgingDistance<h&&(r.judgingDistance=h);break;case"min":r.judgingDistance>h&&(r.judgingDistance=h);break;default:n+=h}}})),o&&"mean"!==o||(r.judgingDistance=n/i.length)):this.judgingDistance=0},h.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},h.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},h.prototype.getType=function(){return"force2"},h.prototype.getSameTypeLeafMap=function(){var t,e=this.nodeClusterBy,n=this.nodes,r=this.edges,i=this.nodeMap,o=this.degreesMap;if(null!=n&&n.length)return t={},n.forEach((function(n,a){1===o[n.id].all&&(t[n.id]=(0,c.getCoreNodeAndRelativeLeafNodes)("leaf",n,r,e,o,i))})),t},n=h;function h(t){var e=o.call(this)||this;return e.maxIteration=1e3,e.workerEnabled=!1,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.4,e.interval=.02,e.factor=1,e.linkDistance=200,e.gravity=0,e.clusterNodeStrength=20,e.preventOverlap=!0,e.distanceThresholdMode="mean",e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.judgingDistance=0,e.centripetalOptions={leaf:2,single:2,others:1,center:function(t){return{x:e.width/2,y:e.height/2}}},e.updateCfg(t),e}e.Force2Layout=n},19712:function(t,e){"use strict";function n(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype.distanceTo=function(t){var e=this.rx-t.rx;t=this.ry-t.ry;return Math.hypot(e,t)},n.prototype.setPos=function(t,e){this.rx=t,this.ry=e},n.prototype.resetForce=function(){this.fx=0,this.fy=0},n.prototype.addForce=function(t){var e=t.rx-this.rx,n=t.ry-this.ry,r=Math.hypot(e,n);t=this.g*(this.degree+1)*(t.degree+1)/(r=r<1e-4?1e-4:r);this.fx+=t*e/r,this.fy+=t*n/r},n.prototype.in=function(t){return t.contains(this.rx,this.ry)},n.prototype.add=function(t){var e=this.mass+t.mass;return new n({rx:(this.rx*this.mass+t.rx*t.mass)/e,ry:(this.ry*this.mass+t.ry*t.mass)/e,mass:e,degree:this.degree+t.degree})},e.default=n},48564:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.ForceAtlas2Layout=void 0,n(62329)),u=n(49784),c=a(n(19712)),l=a(n(51638)),h=a(n(62732));i=s.Base,o(f,i),f.prototype.getDefaultCfg=function(){return{}},f.prototype.execute=function(){for(var t=this,e=t.nodes,n=t.onLayoutEnd,r=t.prune,i=t.maxIteration,o=(t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),[]),a=e.length,s=0;s<a;s+=1){var c=e[s],l=10,h=10;c=((0,u.isNumber)(c.size)&&(l=c.size,h=c.size),(0,u.isArray)(c.size)?(isNaN(c.size[0])||(l=c.size[0]),isNaN(c.size[1])||(h=c.size[1])):(0,u.isObject)(c.size)&&(l=c.size.width,h=c.size.height),t.getWidth&&!isNaN(t.getWidth(c))&&(h=t.getWidth(c)),t.getHeight&&!isNaN(t.getHeight(c))&&(l=t.getHeight(c)),Math.max(l,h));o.push(c)}void 0===t.barnesHut&&250<a&&(t.barnesHut=!0),void 0===t.prune&&100<a&&(t.prune=!0),0!==this.maxIteration||t.prune?0===this.maxIteration&&r&&(i=100,a<=200&&100<a?i=500:200<a&&(i=950),this.maxIteration=i):(i=250,a<=200&&100<a?i=1e3:200<a&&(i=1200),this.maxIteration=i),t.kr||(t.kr=50,100<a&&a<=500?t.kr=20:500<a&&(t.kr=1)),t.kg||(t.kg=20,100<a&&a<=500?t.kg=10:500<a&&(t.kg=1)),this.nodes=t.updateNodesByForces(o),n()},f.prototype.updateNodesByForces=function(t){for(var e=this.edges,n=this.maxIteration,r=this.nodes,i=e.filter((function(t){return(0,u.getEdgeTerminal)(t,"source")!==(0,u.getEdgeTerminal)(t,"target")})),o=r.length,a=i.length,s=[],c={},l={},h=[],f=0;f<o;f+=1)void(s[c[r[f].id]=f]=0)!==r[f].x&&!isNaN(r[f].x)||(r[f].x=1e3*Math.random()),void 0!==r[f].y&&!isNaN(r[f].y)||(r[f].y=1e3*Math.random()),h.push({x:r[f].x,y:r[f].y});for(f=0;f<a;f+=1){for(var d=void 0,p=void 0,g=0,m=0,v=0;v<o;v+=1){var y=(0,u.getEdgeTerminal)(i[f],"source"),b=(0,u.getEdgeTerminal)(i[f],"target");r[v].id===y?(d=r[v],g=v):r[v].id===b&&(p=r[v],m=v),l[f]={sourceIdx:g,targetIdx:m}}d&&(s[c[d.id]]+=1),p&&(s[c[p.id]]+=1)}if(r=this.iterate(n,c,l,a,s,t),this.prune){for(v=0;v<a;v+=1)s[l[v].sourceIdx]<=1?(r[l[v].sourceIdx].x=r[l[v].targetIdx].x,r[l[v].sourceIdx].y=r[l[v].targetIdx].y):s[l[v].targetIdx]<=1&&(r[l[v].targetIdx].x=r[l[v].sourceIdx].x,r[l[v].targetIdx].y=r[l[v].sourceIdx].y);this.prune=!1,this.barnesHut=!1,r=this.iterate(100,c,l,a,s,t)}return r},f.prototype.iterate=function(t,e,n,r,i,o){for(var a,s=this.nodes,u=this.kr,l=this.preventOverlap,h=this.barnesHut,f=s.length,d=0,p=t,g=[],m=[],v=[],y=0;y<f;y+=1)g[2*y]=0,g[2*y+1]=0,h&&(a={id:y,rx:s[y].x,ry:s[y].y,mass:1,g:u,degree:i[y]},v[y]=new c.default(a));for(;0<p;){for(y=0;y<f;y+=1)m[2*y]=g[2*y],m[2*y+1]=g[2*y+1],g[2*y]=0,g[2*y+1]=0;g=this.getAttrForces(p,50,r,e,n,i,o,g);g=h&&(l&&50<p||!l)?this.getOptRepGraForces(g,v,i):this.getRepGraForces(p,50,g,100,o,i);var b=this.updatePos(g,m,d,i);s=b.nodes,d=b.sg;p--,this.tick&&this.tick()}return s},f.prototype.getAttrForces=function(t,e,n,r,i,o,a,s){for(var u=this.nodes,c=this.preventOverlap,l=this.dissuadeHubs,h=this.mode,f=this.prune,d=0;d<n;d+=1){var p,g,m,v,y=u[i[d].sourceIdx],b=i[d].sourceIdx,x=u[i[d].targetIdx],_=i[d].targetIdx;f&&(o[b]<=1||o[_]<=1)||(p=[x.x-y.x,x.y-y.y],g=(g=Math.hypot(p[0],p[1]))<1e-4?1e-4:g,p[0]=p[0]/g,p[1]=p[1]/g,v=m=g=c&&t<e?g-a[b]-a[_]:g,"linlog"===h&&(v=m=Math.log(1+g)),l&&(m=g/o[b],v=g/o[_]),c&&t<e&&g<=0?v=m=0:c&&t<e&&0<g&&(v=m=g),s[2*r[y.id]]+=m*p[0],s[2*r[x.id]]-=v*p[0],s[2*r[y.id]+1]+=m*p[1],s[2*r[x.id]+1]-=v*p[1])}return s},f.prototype.getRepGraForces=function(t,e,n,r,i,o){for(var a=this.nodes,s=this.preventOverlap,u=this.kr,c=this.kg,l=this.center,h=this.prune,f=a.length,d=0;d<f;d+=1){for(var p,g,m,v=d+1;v<f;v+=1)h&&(o[d]<=1||o[v]<=1)||(p=[a[v].x-a[d].x,a[v].y-a[d].y],g=(g=Math.hypot(p[0],p[1]))<1e-4?1e-4:g,p[0]=p[0]/g,p[1]=p[1]/g,s&&t<e&&(g=g-i[d]-i[v]),m=u*(o[d]+1)*(o[v]+1)/g,s&&t<e&&g<0?m=r*(o[d]+1)*(o[v]+1):s&&t<e&&0===g?m=0:s&&t<e&&0<g&&(m=u*(o[d]+1)*(o[v]+1)/g),n[2*d]-=m*p[0],n[2*v]+=m*p[0],n[2*d+1]-=m*p[1],n[2*v+1]+=m*p[1]);var y=[a[d].x-l[0],a[d].y-l[1]],b=Math.hypot(y[0],y[1]);b=(y[0]=y[0]/b,y[1]=y[1]/b,c*(o[d]+1));n[2*d]-=b*y[0],n[2*d+1]-=b*y[1]}return n},f.prototype.getOptRepGraForces=function(t,e,n){for(var r=this.nodes,i=this.kg,o=this.center,a=this.prune,s=r.length,u=9e10,c=-9e10,f=9e10,d=-9e10,p=0;p<s;p+=1)a&&n[p]<=1||(e[p].setPos(r[p].x,r[p].y),r[p].x>=c&&(c=r[p].x),r[p].x<=u&&(u=r[p].x),r[p].y>=d&&(d=r[p].y),r[p].y<=f&&(f=r[p].y));var g=Math.max(c-u,d-f),m=new l.default({xmid:(c+u)/2,ymid:(d+f)/2,length:g,massCenter:o,mass:s}),v=new h.default(m);for(p=0;p<s;p+=1)a&&n[p]<=1||e[p].in(m)&&v.insert(e[p]);var y,b;for(p=0;p<s;p+=1)a&&n[p]<=1||(e[p].resetForce(),v.updateForce(e[p]),t[2*p]-=e[p].fx,t[2*p+1]-=e[p].fy,y=[r[p].x-o[0],r[p].y-o[1]],b=Math.hypot(y[0],y[1]),y[0]=y[0]/(b=b<1e-4?1e-4:b),y[1]=y[1]/b,b=i*(n[p]+1),t[2*p]-=b*y[0],t[2*p+1]-=b*y[1]);return t},f.prototype.updatePos=function(t,e,n,r){for(var i,o,a=this.nodes,s=this.ks,c=this.tao,l=this.prune,h=this.ksmax,f=a.length,d=[],p=[],g=0,m=0,v=0;v<f;v+=1)l&&r[v]<=1||(i=[t[2*v]-e[2*v],t[2*v+1]-e[2*v+1]],i=Math.hypot(i[0],i[1]),o=[t[2*v]+e[2*v],t[2*v+1]+e[2*v+1]],o=Math.hypot(o[0],o[1]),d[v]=i,p[v]=o/2,g+=(r[v]+1)*d[v],m+=(r[v]+1)*p[v]);var y=n;n=c*m/g,0!==y&&(n=1.5*y<n?1.5*y:n);var b,x;for(v=0;v<f;v+=1)l&&r[v]<=1||(0,u.isNumber)(a[v].fx)&&(0,u.isNumber)(a[v].fy)||(x=s*n/(1+n*Math.sqrt(d[v])),b=(x=(b=h/(b=(b=Math.hypot(t[2*v],t[2*v+1]))<1e-4?1e-4:b))<x?b:x)*t[2*v],x*=t[2*v+1],a[v].x+=b,a[v].y+=x);return{nodes:a,sg:n}},a=f;function f(t){var e=i.call(this)||this;return e.center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.kr=5,e.kg=1,e.mode="normal",e.preventOverlap=!1,e.dissuadeHubs=!1,e.barnesHut=void 0,e.maxIteration=0,e.ks=.1,e.ksmax=10,e.tao=.1,e.onLayoutEnd=function(){},e.prune=void 0,e.updateCfg(t),e}e.ForceAtlas2Layout=a},51638:function(t,e){"use strict";function n(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype.getLength=function(){return this.length},n.prototype.contains=function(t,e){var n=this.length/2;return t<=this.xmid+n&&t>=this.xmid-n&&e<=this.ymid+n&&e>=this.ymid-n},n.prototype.NW=function(){return new n({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},n.prototype.NE=function(){return new n({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},n.prototype.SW=function(){return new n({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},n.prototype.SE=function(){return new n({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},e.default=n},62732:function(t,e){"use strict";function n(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=t&&(this.quad=t)}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype.insert=function(t){null==this.body?this.body=t:this._isExternal()?(this.quad&&(this.NW=new n(this.quad.NW()),this.NE=new n(this.quad.NE()),this.SW=new n(this.quad.SW()),this.SE=new n(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t))},n.prototype._putBody=function(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))},n.prototype._isExternal=function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE},n.prototype.updateForce=function(t){null!=this.body&&t!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(t)<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t)))},e.default=n},80374:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.FruchtermanLayout=void 0,n(62329)),s=n(49784);i=a.Base,o(u,i),u.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},u.prototype.execute=function(){var t=this,e=this,n=e.nodes;if(void 0!==e.timeInterval&&"undefined"!=typeof window&&window.clearInterval(e.timeInterval),n&&0!==n.length){e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var r,i,o=e.center;if(1!==n.length)return r={},i={},n.forEach((function(e,n){(0,s.isNumber)(e.x)||(e.x=Math.random()*t.width),(0,s.isNumber)(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,i[e.id]=n})),e.nodeMap=r,e.nodeIdxMap=i,e.run();n[0].x=o[0],n[0].y=o[1],null!=(n=e.onLayoutEnd)&&n.call(e)}else null!=(o=e.onLayoutEnd)&&o.call(e)},u.prototype.run=function(){var t=this,e=t.nodes;if(e){var n=t.edges,r=t.maxIteration,i=t.workerEnabled,o=t.clustering,a=t.animate,s={};if(o&&e.forEach((function(t){void 0===s[t.cluster]&&(s[t.cluster]={name:t.cluster,cx:0,cy:0,count:0})})),i||!a){for(var u=0;u<r;u++)t.runOneStep(s);null!=(o=t.onLayoutEnd)&&o.call(t)}else{if("undefined"==typeof window)return;var c=0;this.timeInterval=window.setInterval((function(){var e;t.runOneStep(s),r<=++c&&(null!=(e=t.onLayoutEnd)&&e.call(t),window.clearInterval(t.timeInterval))}),0)}return{nodes:e,edges:n}}},u.prototype.runOneStep=function(t){var e=this,n=e.nodes;if(n){var r=e.edges,i=e.center,o=e.gravity,a=e.speed,u=e.clustering,c=e.height*e.width,l=Math.sqrt(c)/10,h=(c=c/(n.length+1),Math.sqrt(c)),f=[];if(n.forEach((function(t,e){f[e]={x:0,y:0}})),e.applyCalculate(n,r,f,h,c),u){for(var d in t)t[d].cx=0,t[d].cy=0,t[d].count=0;for(var d in n.forEach((function(e){var n=t[e.cluster];(0,s.isNumber)(e.x)&&(n.cx+=e.x),(0,s.isNumber)(e.y)&&(n.cy+=e.y),n.count++})),t)t[d].cx/=t[d].count,t[d].cy/=t[d].count;var p=e.clusterGravity||o;n.forEach((function(e,n){var r,i,o;(0,s.isNumber)(e.x)&&(0,s.isNumber)(e.y)&&(r=t[e.cluster],i=Math.sqrt((e.x-r.cx)*(e.x-r.cx)+(e.y-r.cy)*(e.y-r.cy)),f[n].x-=(o=h*p)*(e.x-r.cx)/i,f[n].y-=o*(e.y-r.cy)/i)}))}n.forEach((function(t,e){var n;(0,s.isNumber)(t.x)&&(0,s.isNumber)(t.y)&&(f[e].x-=(n=.01*h*o)*(t.x-i[0]),f[e].y-=n*(t.y-i[1]))})),n.forEach((function(t,e){var n,r;(0,s.isNumber)(t.fx)&&(0,s.isNumber)(t.fy)?(t.x=t.fx,t.y=t.fy):(0,s.isNumber)(t.x)&&(0,s.isNumber)(t.y)&&0<(n=Math.sqrt(f[e].x*f[e].x+f[e].y*f[e].y))&&(r=Math.min(a/800*l,n),t.x+=f[e].x/n*r,t.y+=f[e].y/n*r)})),null!=(r=e.tick)&&r.call(e)}},u.prototype.applyCalculate=function(t,e,n,r,i){this.calRepulsive(t,n,i),e&&this.calAttractive(e,n,r)},u.prototype.calRepulsive=function(t,e,n){t.forEach((function(r,i){e[i]={x:0,y:0},t.forEach((function(t,o){var a,u;i!==o&&(0,s.isNumber)(r.x)&&(0,s.isNumber)(t.x)&&(0,s.isNumber)(r.y)&&(0,s.isNumber)(t.y)&&(0===(a=(u=r.x-t.x)*u+(t=r.y-t.y)*t)&&(a=1,t=u=.01*(o<i?1:-1)),e[i].x+=u*(o=n/a),e[i].y+=t*o)}))}))},u.prototype.calAttractive=function(t,e,n){var r=this;t.forEach((function(t){var i,o,a,u,c=(0,s.getEdgeTerminal)(t,"source");t=(0,s.getEdgeTerminal)(t,"target");c&&t&&(i=r.nodeIdxMap[c])!==(o=r.nodeIdxMap[t])&&(c=r.nodeMap[c],t=r.nodeMap[t],(0,s.isNumber)(t.x))&&(0,s.isNumber)(c.x)&&(0,s.isNumber)(t.y)&&(0,s.isNumber)(c.y)&&(a=t.x-c.x,t=t.y-c.y,c=Math.sqrt(a*a+t*t),e[o].x-=a/c*(u=c*c/n),e[o].y-=t/c*u,e[i].x+=a/c*u,e[i].y+=t/c*u)}))},u.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},u.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},u.prototype.getType=function(){return"fruchterman"},n=u;function u(t){var e=i.call(this)||this;return e.maxIteration=1e3,e.workerEnabled=!1,e.gravity=10,e.speed=5,e.clustering=!1,e.clusterGravity=10,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.onLayoutEnd=function(){},e.tick=function(){},e.animate=!0,e.updateCfg(t),e}e.FruchtermanLayout=n},13653:function(t,e,n){"use strict";function r(t,e){var n=t?(0,u.isNumber)(t)?function(e){return t}:t:function(t){return e||1};return n}var i,o,a=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=(Object.defineProperty(e,"__esModule",{value:!0}),e.GForceLayout=void 0,n(62329)),u=n(49784);o=s.Base,a(c,o),c.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},c.prototype.execute=function(){var t,e,n,i,o,a,s,c=this,l=c.nodes;void 0!==c.timeInterval&&"undefined"!=typeof window&&window.clearInterval(c.timeInterval),l&&0!==l.length?(c.width||"undefined"==typeof window||(c.width=window.innerWidth),c.height||"undefined"==typeof window||(c.height=window.innerHeight),c.center||(c.center=[c.width/2,c.height/2]),s=c.center,1===l.length?(l[0].x=s[0],l[0].y=s[1],null!=(s=c.onLayoutEnd)&&s.call(c)):(t={},e={},l.forEach((function(n,r){(0,u.isNumber)(n.x)||(n.x=Math.random()*c.width),(0,u.isNumber)(n.y)||(n.y=Math.random()*c.height),t[n.id]=n,e[n.id]=r})),c.nodeMap=t,c.nodeIdxMap=e,c.linkDistance=r(c.linkDistance,1),c.nodeStrength=r(c.nodeStrength,1),c.edgeStrength=r(c.edgeStrength,1),n=c.nodeSize,c.preventOverlap&&(i=c.nodeSpacing,o=(0,u.isNumber)(i)?function(){return i}:(0,u.isFunction)(i)?i:function(){return 0},a=n?(0,u.isArray)(n)?function(t){return Math.max(n[0],n[1])+o(t)}:function(t){return n+o(t)}:function(t){return t.size?(0,u.isArray)(t.size)?Math.max(t.size[0],t.size[1])+o(t):(0,u.isObject)(t.size)?Math.max(t.size.width,t.size.height)+o(t):t.size+o(t):10+o(t)}),c.nodeSize=a,s=c.edges,c.degrees=(0,u.getDegree)(l.length,c.nodeIdxMap,s),c.getMass||(c.getMass=function(t){return t.mass||c.degrees[c.nodeIdxMap[t.id]].all||1}),c.run())):null!=(a=c.onLayoutEnd)&&a.call(c)},c.prototype.run=function(){var t,e=this,n=e.maxIteration,r=e.nodes,i=e.workerEnabled,o=e.minMovement,a=e.animate;if(r)if(i||!a){for(var s=0;s<n;s++){var u=e.runOneStep(s);if(e.reachMoveThreshold(r,u,o))break}null!=(i=e.onLayoutEnd)&&i.call(e)}else"undefined"!=typeof window&&(t=0,this.timeInterval=window.setInterval((function(){var i;r&&(i=e.runOneStep(t)||[],e.reachMoveThreshold(r,i,o)&&(null!=(i=e.onLayoutEnd)&&i.call(e),window.clearInterval(e.timeInterval)),n<=++t)&&(null!=(i=e.onLayoutEnd)&&i.call(e),window.clearInterval(e.timeInterval))}),0))},c.prototype.reachMoveThreshold=function(t,e,n){var r=0;return t.forEach((function(t,n){var i=t.x-e[n].x;t=t.y-e[n].y;r+=Math.sqrt(i*i+t*t)})),(r/=t.length)<n},c.prototype.runOneStep=function(t){var e,n=this,r=n.nodes,i=n.edges,o=[],a=[];if(r)return r.forEach((function(t,e){o[2*e]=0,a[2*e]=o[2*e+1]=0,a[2*e+1]=0})),n.calRepulsive(o,r),i&&n.calAttractive(o,i),n.calGravity(o,r),i=Math.max(.02,n.interval-.002*t),n.updateVelocity(o,a,i,r),e=[],r.forEach((function(t){e.push({x:t.x,y:t.y})})),n.updatePosition(a,i,r),null!=(t=n.tick)&&t.call(n),e},c.prototype.calRepulsive=function(t,e){var n=this.getMass,r=this.factor,i=this.coulombDisScale,o=this.preventOverlap,a=this.collideStrength,s=void 0===a?1:a,u=this.nodeStrength,c=this.nodeSize;e.forEach((function(a,l){var h=n?n(a):1;e.forEach((function(e,f){var d,p,g,m,v,y;f<=l||(g=a.x-e.x,m=a.y-e.y,0===g&&0===m&&(g=.01*Math.random(),m=.01*Math.random()),d=g*g+m*m,y=((p=Math.sqrt(d))+.1)*i,g/=p,m/=p,y=.5*(u(a)+u(e))*r/(y*y),v=n?n(e):1,t[2*l]+=g*y,t[2*l+1]+=m*y,t[2*f]-=g*y,t[2*f+1]-=m*y,o&&(c(a)+c(e))/2>p&&(y=s*(u(a)+u(e))*.5/d,t[2*l]+=g*y/h,t[2*l+1]+=m*y/h,t[2*f]-=g*y/v,t[2*f+1]-=m*y/v))}))}))},c.prototype.calAttractive=function(t,e){var n=this.nodeMap,r=this.nodeIdxMap,i=this.linkDistance,o=this.edgeStrength,a=this.nodeSize,s=this.getMass;e.forEach((function(e,c){var l=(0,u.getEdgeTerminal)(e,"source"),h=(0,u.getEdgeTerminal)(e,"target"),f=n[l],d=n[h],p=d.x-f.x,g=d.y-f.y,m=(0===p&&0===g&&(p=.01*Math.random(),g=.01*Math.random()),Math.sqrt(p*p+g*g));p/=m,g/=m,m=((i(e,f,d)||1+(a(f)+a(f)||0)/2)-m)*o(e),e=r[l],l=r[h],h=s?s(f):1,f=s?s(d):1;t[2*e]-=p*m/h,t[2*e+1]-=g*m/h,t[2*l]+=p*m/f,t[2*l+1]+=g*m/f}))},c.prototype.calGravity=function(t,e){for(var n=this.center,r=this.gravity,i=this.degrees,o=e.length,a=0;a<o;a++){var s,c=e[a],l=c.x-n[0],h=c.y-n[1],f=r;this.getCenter&&(s=this.getCenter(c,i[a].all))&&(0,u.isNumber)(s[0])&&(0,u.isNumber)(s[1])&&(0,u.isNumber)(s[2])&&(l=c.x-s[0],h=c.y-s[1],f=s[2]),f&&(t[2*a]-=f*l,t[2*a+1]-=f*h)}},c.prototype.updateVelocity=function(t,e,n,r){var i=this,o=n*i.damping;r.forEach((function(n,r){var a=t[2*r]*o||.01,s=t[2*r+1]*o||.01,u=Math.sqrt(a*a+s*s);u>i.maxSpeed&&(a*=u=i.maxSpeed/u,s*=u),e[2*r]=a,e[2*r+1]=s}))},c.prototype.updatePosition=function(t,e,n){n.forEach((function(n,r){var i;(0,u.isNumber)(n.fx)&&(0,u.isNumber)(n.fy)?(n.x=n.fx,n.y=n.fy):(i=t[2*r]*e,r=t[2*r+1]*e,n.x+=i,n.y+=r)}))},c.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},c.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},c.prototype.getType=function(){return"gForce"},n=c;function c(t){var e=o.call(this)||this;return e.maxIteration=500,e.workerEnabled=!1,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.preventOverlap=!0,e.collideStrength=1,e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.animate=!0,e.updateCfg(t),e}e.GForceLayout=n},87745:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var u=[a,s];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,(u=i?[2&u[0],i.value]:u)[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3]))o.label=u[1];else if(6===u[0]&&o.label<i[1])o.label=i[1],i=u;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(u)}}u=e.call(t,o)}catch(s){u=[6,s],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},u=(Object.defineProperty(e,"__esModule",{value:!0}),e.FruchtermanGPULayout=void 0,n(62329)),c=n(49784),l=n(9527),h=n(48835),f=n(8574),d=n(16470);i=u.Base,o(p,i),p.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},p.prototype.execute=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i,o=this;return s(this,(function(a){switch(a.label){case 0:return(e=(t=this).nodes)&&0!==e.length?(t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),n=t.center,1===e.length?(e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(r={},i={},e.forEach((function(t,e){(0,c.isNumber)(t.x)||(t.x=Math.random()*o.width),(0,c.isNumber)(t.y)||(t.y=Math.random()*o.height),r[t.id]=t,i[t.id]=e})),t.nodeMap=r,t.nodeIdxMap=i,[4,t.run()])):(t.onLayoutEnd&&t.onLayoutEnd(),[2]);case 1:return a.sent(),[2]}}))}))},p.prototype.executeWithWorker=function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u=this;return s(this,(function(s){switch(s.label){case 0:return r=(n=this).nodes,i=n.center,r&&0!==r.length?1===r.length?(r[0].x=i[0],r[0].y=i[1],[2]):(o={},a={},r.forEach((function(t,e){(0,c.isNumber)(t.x)||(t.x=Math.random()*u.width),(0,c.isNumber)(t.y)||(t.y=Math.random()*u.height),o[t.id]=t,a[t.id]=e})),n.nodeMap=o,n.nodeIdxMap=a,[4,n.run(t,e)]):[2];case 1:return s.sent(),[2]}}))}))},p.prototype.run=function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,u,p,g,m,v,y,b,x,_,w,S,E,M,A,C,T,k=this;return s(this,(function(O){switch(O.label){case 0:for(r=(n=this).nodes,w=n.edges,i=n.maxIteration,o=n.center,p=n.height*n.width,u=Math.sqrt(p)/10,p/=r.length+1,g=Math.sqrt(p),m=n.speed,v=n.clustering,x=(0,h.attributesToTextureData)([n.clusterField],r),y=x.array,b=x.count,r.forEach((function(t,e){var n=0,r=0;(0,c.isNumber)(t.fx)&&(0,c.isNumber)(t.fy)&&(n=t.fx||.001,r=t.fy||.001),y[4*e+1]=n,y[4*e+2]=r})),x=r.length,w=(0,h.buildTextureData)(r,w),_=w.maxEdgePerVetex,w=w.array,S=n.workerEnabled,S=S?l.World.create({canvas:t,engineOptions:{supportCompute:!0}}):l.World.create({engineOptions:{supportCompute:!0}}),E=n.onLayoutEnd,M=[],A=0;A<b;A++)M.push(0,0,0,0);return C=S.createKernel(f.fruchtermanBundle).setDispatch([x,1,1]).setBinding({u_Data:w,u_K:g,u_K2:p,u_Gravity:n.gravity,u_ClusterGravity:n.clusterGravity||n.gravity||1,u_Speed:m,u_MaxDisplace:u,u_Clustering:v?1:0,u_Center:o,u_AttributeArray:y,u_ClusterCenters:M,MAX_EDGE_PER_VERTEX:_,VERTEX_COUNT:x}),v&&(T=S.createKernel(f.clusterBundle).setDispatch([b,1,1]).setBinding({u_Data:w,u_NodeAttributes:y,u_ClusterCenters:M,VERTEX_COUNT:x,CLUSTER_COUNT:b})),[4,function(){return a(k,void 0,void 0,(function(){var n,o;return s(this,(function(a){switch(a.label){case 0:n=0,a.label=1;case 1:return n<i?[4,C.execute()]:[3,6];case 2:return a.sent(),v?(T.setBinding({u_Data:C}),[4,T.execute()]):[3,4];case 3:a.sent(),C.setBinding({u_ClusterCenters:T}),a.label=4;case 4:C.setBinding({u_MaxDisplace:u*=.99}),a.label=5;case 5:return n++,[3,1];case 6:return[4,C.getOutput()];case 7:return o=a.sent(),t?e.postMessage({type:d.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:o}):r.forEach((function(t,e){var n=o[4*e];e=o[4*e+1];t.x=n,t.y=e})),E&&E(),[2]}}))}))}()];case 1:return O.sent(),[2]}}))}))},p.prototype.getType=function(){return"fruchterman-gpu"},n=p;function p(t){var e=i.call(this)||this;return e.maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterField="cluster",e.clusterGravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}e.FruchtermanGPULayout=n},8574:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clusterBundle=e.clusterCode=e.fruchtermanBundle=e.fruchtermanCode=void 0,e.fruchtermanCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass Fruchterman {\n  @in @out\n  u_Data: vec4[];\n  @in\n  u_K: float;\n  @in\n  u_K2: float;\n  \n  @in\n  u_Center: vec2;\n  @in\n  u_Gravity: float;\n  @in\n  u_ClusterGravity: float;\n  @in\n  u_Speed: float;\n  @in\n  u_MaxDisplace: float;\n  @in\n  u_Clustering: float;\n  @in\n  u_AttributeArray: vec4[];\n  @in\n  u_ClusterCenters: vec4[];\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const xDist = currentNode[0] - nextNode[0];\n        const yDist = currentNode[1] - nextNode[1];\n        const dist = (xDist * xDist + yDist * yDist) + 0.01;\n        let param = this.u_K2 / dist;\n        \n        if (dist > 0.0) {\n          dx += param * xDist;\n          dy += param * yDist;\n          if (xDist == 0 && yDist == 0) {\n            const sign = i < j ? 1 : -1;\n            dx += param * sign;\n            dy += param * sign;\n          }\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // \n    let dx = 0, dy = 0;\n    const vx = currentNode[0] - this.u_Center[0];\n    const vy = currentNode[1] - this.u_Center[1];\n    const gf = 0.01 * this.u_K * this.u_Gravity;\n    dx = gf * vx;\n    dy = gf * vy;\n    if (this.u_Clustering == 1) {\n      const clusterIdx = int(nodeAttributes[0]);\n      const center = this.u_ClusterCenters[clusterIdx];\n      const cvx = currentNode[0] - center[0];\n      const cvy = currentNode[1] - center[1];\n      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;\n      const parma = this.u_K * this.u_ClusterGravity / dist;\n      dx += parma * cvx;\n      dy += parma * cvy;\n    }\n    return [dx, dy];\n  }\n  calcAttractive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    const arr_offset = int(floor(currentNode[2] + 0.5));\n    const length = int(floor(currentNode[3] + 0.5));\n    const node_buffer: vec4;\n    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + p;\n      // when arr_idx % 4 == 0 update currentNodedx_buffer\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)];\n      }\n      const float_j = buf_offset == 0 ? node_buffer[0] :\n                      buf_offset == 1 ? node_buffer[1] :\n                      buf_offset == 2 ? node_buffer[2] :\n                                        node_buffer[3];\n      const nextNode = this.u_Data[int(float_j)];\n      const xDist = currentNode[0] - nextNode[0];\n      const yDist = currentNode[1] - nextNode[1];\n      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;\n      let attractiveF = dist / this.u_K;\n    \n      if (dist > 0.0) {\n        dx -= xDist * attractiveF;\n        dy -= yDist * attractiveF;\n        if (xDist == 0 && yDist == 0) {\n          const sign = i < int(float_j) ? 1 : -1;\n          dx -= sign * attractiveF;\n          dy -= sign * attractiveF;\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    let dx = 0, dy = 0;\n    if (i >= VERTEX_COUNT) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // [gravity, fx, fy, 0]\n    const nodeAttributes = this.u_AttributeArray[i];\n\n    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {\n      // the node is fixed\n      this.u_Data[i] = [\n        nodeAttributes[1],\n        nodeAttributes[2],\n        currentNode[2],\n        currentNode[3]\n      ];\n      return;\n    }\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    dx += repulsive[0];\n    dy += repulsive[1];\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode);\n    dx += attractive[0];\n    dy += attractive[1];\n    // gravity\n    const gravity = this.calcGravity(currentNode, nodeAttributes);\n    dx -= gravity[0];\n    dy -= gravity[1];\n    // speed\n    dx *= this.u_Speed;\n    dy *= this.u_Speed;\n\n    // move\n    const distLength = sqrt(dx * dx + dy * dy);\n    if (distLength > 0.0) {\n      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);\n      this.u_Data[i] = [\n        currentNode[0] + dx / distLength * limitedDist,\n        currentNode[1] + dy / distLength * limitedDist,\n        currentNode[2],\n        currentNode[3]\n      ];\n    }\n  }\n}\n",e.fruchtermanBundle='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',e.clusterCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst VERTEX_COUNT;\nconst CLUSTER_COUNT;\n@numthreads(1, 1, 1)\nclass CalcCenter {\n  @in\n  u_Data: vec4[];\n  @in\n  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]\n  @in @out\n  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const center = this.u_ClusterCenters[i];\n    let sumx = 0;\n    let sumy = 0;\n    let count = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      const attributes = this.u_NodeAttributes[j];\n      const clusterIdx = int(attributes[0]);\n      const vertex = this.u_Data[j];\n      if (clusterIdx == i) {\n        sumx += vertex.x;\n        sumy += vertex.y;\n        count += 1;\n      }\n    }\n    this.u_ClusterCenters[i] = [\n      sumx / count,\n      sumy / count,\n      count,\n      i\n    ];\n  }\n}\n",e.clusterBundle='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},85194:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var u=[a,s];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,(u=i?[2&u[0],i.value]:u)[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3]))o.label=u[1];else if(6===u[0]&&o.label<i[1])o.label=i[1],i=u;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(u)}}u=e.call(t,o)}catch(s){u=[6,s],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},u=(Object.defineProperty(e,"__esModule",{value:!0}),e.GForceGPULayout=void 0,n(62329)),c=n(49784),l=n(9527),h=n(48835),f=n(80628),d=n(49762),p=n(16470);i=u.Base,o(g,i),g.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},g.prototype.execute=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i;return s(this,(function(o){switch(o.label){case 0:return(e=(t=this).nodes)&&0!==e.length?(t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),n=t.center,1===e.length?(e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(r={},i={},e.forEach((function(e,n){(0,c.isNumber)(e.x)||(e.x=Math.random()*t.width),(0,c.isNumber)(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,i[e.id]=n})),t.nodeMap=r,t.nodeIdxMap=i,t.nodeStrength=(0,h.proccessToFunc)(t.nodeStrength,1),t.edgeStrength=(0,h.proccessToFunc)(t.edgeStrength,1),[4,t.run()])):(t.onLayoutEnd&&t.onLayoutEnd(),[2]);case 1:return o.sent(),[2]}}))}))},g.prototype.executeWithWorker=function(t,e){var n,r,i=this,o=i.nodes,a=i.center;o&&0!==o.length&&(1===o.length?(o[0].x=a[0],o[0].y=a[1]):(n={},r={},o.forEach((function(t,e){(0,c.isNumber)(t.x)||(t.x=Math.random()*i.width),(0,c.isNumber)(t.y)||(t.y=Math.random()*i.height),n[t.id]=t,r[t.id]=e})),i.nodeMap=n,i.nodeIdxMap=r,i.nodeStrength=(0,h.proccessToFunc)(i.nodeStrength,1),i.edgeStrength=(0,h.proccessToFunc)(i.edgeStrength,1),i.run(t,e)))},g.prototype.run=function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,u,g,m,v,y,b,x,_,w,S,E,M,A,C,T,k,O,P,I,N=this;return s(this,(function(D){switch(D.label){case 0:for(r=(n=this).nodes,M=n.edges,i=n.maxIteration,n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),o=r.length,n.linkDistance=(0,h.proccessToFunc)(n.linkDistance),n.edgeStrength=(0,h.proccessToFunc)(n.edgeStrength),g=(0,h.buildTextureDataWithTwoEdgeAttr)(r,M,n.linkDistance,n.edgeStrength),u=g.maxEdgePerVetex,g=g.array,n.degrees=(0,f.getDegree)(r.length,n.nodeIdxMap,M).map((function(t){return t.all})),m=[],v=[],y=[],b=[],x=[],_=[],w=[],n.getMass||(n.getMass=function(t){return n.degrees[n.nodeIdxMap[t.id]]||1}),S=n.gravity,E=n.center,r.forEach((function(t,e){m.push(n.getMass(t)),v.push(n.nodeStrength(t)),n.degrees[e]||(n.degrees[e]=0);var r=[E[0],E[1],S];n.getCenter&&(e=n.getCenter(t,n.degrees[e]))&&(0,c.isNumber)(e[0])&&(0,c.isNumber)(e[1])&&(0,c.isNumber)(e[2])&&(r=e),y.push(r[0]),b.push(r[1]),x.push(r[2]),(0,c.isNumber)(t.fx)&&(0,c.isNumber)(t.fy)?(_.push(t.fx||.001),w.push(t.fy||.001)):(_.push(0),w.push(0))})),M=(0,h.arrayToTextureData)([m,n.degrees,v,_]),A=(0,h.arrayToTextureData)([y,b,x,w]),C=n.workerEnabled,C=C?l.World.create({canvas:t,engineOptions:{supportCompute:!0}}):l.World.create({engineOptions:{supportCompute:!0}}),T=n.onLayoutEnd,k=[],g.forEach((function(t){k.push(t)})),O=0;O<4;O++)k.push(0);return P=C.createKernel(d.gForceBundle).setDispatch([o,1,1]).setBinding({u_Data:g,u_damping:n.damping,u_maxSpeed:n.maxSpeed,u_minMovement:n.minMovement,u_coulombDisScale:n.coulombDisScale,u_factor:n.factor,u_NodeAttributeArray1:M,u_NodeAttributeArray2:A,MAX_EDGE_PER_VERTEX:u,VERTEX_COUNT:o,u_AveMovement:k,u_interval:n.interval}),I=C.createKernel(d.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:g,VERTEX_COUNT:o,u_AveMovement:[0,0,0,0]}),[4,function(){return a(N,void 0,void 0,(function(){var o,a,u;return s(this,(function(s){switch(s.label){case 0:o=0,s.label=1;case 1:return o<i?[4,P.execute()]:[3,5];case 2:return s.sent(),I.setBinding({u_Data:P}),[4,I.execute()];case 3:s.sent(),a=Math.max(.02,n.interval-.002*o),P.setBinding({u_interval:a,u_AveMovement:I}),s.label=4;case 4:return o++,[3,1];case 5:return[4,P.getOutput()];case 6:return u=s.sent(),t?e.postMessage({type:p.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:u}):r.forEach((function(t,e){var n=u[4*e];e=u[4*e+1];t.x=n,t.y=e})),T&&T(),[2]}}))}))}()];case 1:return D.sent(),[2]}}))}))},g.prototype.getType=function(){return"gForce-gpu"},n=g;function g(t){var e=i.call(this)||this;return e.maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}e.GForceGPULayout=n},49762:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.aveMovementBundle=e.aveMovementCode=e.gForceBundle=e.gForceCode=void 0,e.gForceCode="\nimport { globalInvocationID } from 'g-webgpu';\n\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\nconst SHIFT_20 = 1048576;\n\n@numthreads(1, 1, 1)\nclass GGForce {\n  @in @out\n  u_Data: vec4[];\n\n  @in\n  u_damping: float;\n  \n  @in\n  u_maxSpeed: float;\n\n  @in\n  u_minMovement: float;\n\n  @in\n  u_AveMovement: vec4[];\n\n  @in\n  u_coulombDisScale: float;\n\n  @in\n  u_factor: float;\n\n  @in\n  u_NodeAttributeArray1: vec4[];\n\n  @in\n  u_NodeAttributeArray2: vec4[];\n\n  @in\n  u_interval: float;\n\n  unpack_float(packedValue: float): ivec2 {\n    const packedIntValue = int(packedValue);\n    const v0 = packedIntValue / SHIFT_20;\n    return [v0, packedIntValue - v0 * SHIFT_20];\n  }\n\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let ax = 0, ay = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const vx = currentNode[0] - nextNode[0];\n        const vy = currentNode[1] - nextNode[1];\n        const dist = sqrt(vx * vx + vy * vy) + 0.01;\n        const n_dist = (dist + 0.1) * this.u_coulombDisScale;\n        const direx = vx / dist;\n        const direy = vy / dist;\n        const attributesi = this.u_NodeAttributeArray1[i];\n        const attributesj = this.u_NodeAttributeArray1[j];\n        const massi = attributesi[0];\n        const nodeStrengthi = attributesi[2];\n        const nodeStrengthj = attributesj[2];\n        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;\n        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);\n        const param = nodeStrength * this.u_factor / (n_dist * n_dist);\n        ax += direx * param;\n        ay += direy * param;\n      }\n    }\n    return [ax, ay];\n  }\n\n  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {\n    // note: attributes2 = [centerX, centerY, gravity, 0]\n\n    const vx = currentNode[0] - attributes2[0];\n    const vy = currentNode[1] - attributes2[1];\n    \n    const ax = vx * attributes2[2];\n    const ay = vy * attributes2[2];\n    \n    return [ax, ay];\n  }\n\n  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {\n    // note: attributes1 = [mass, degree, nodeSterngth, 0]\n\n    const mass = attributes1[0];\n    let ax = 0, ay = 0;\n    // const arr_offset = int(floor(currentNode[2] + 0.5));\n    // const length = int(floor(currentNode[3] + 0.5));\n\n    const compressed = this.unpack_float(currentNode[2]);\n    const length = compressed[0];\n    const arr_offset = compressed[1];\n\n    const node_buffer: vec4;\n    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + 4 * p; // i 节点的第 p 条边开始的小格子位置\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)]; // 大格子，大格子位置=小个子位置 / 4，\n      }\n\n      let float_j: float = node_buffer[0];\n\n      const nextNode = this.u_Data[int(float_j)];\n      const vx = nextNode[0] - currentNode[0];\n      const vy = nextNode[1] - currentNode[1];\n      const dist = sqrt(vx * vx + vy * vy) + 0.01;\n      const direx = vx / dist;\n      const direy = vy / dist;\n      const edgeLength = node_buffer[1];\n      const edgeStrength = node_buffer[2];\n      const diff: float = edgeLength - dist;//edgeLength\n      // const param = diff * this.u_stiffness / mass; //\n      const param = diff * edgeStrength / mass; // \n      ax -= direx * param;\n      ay -= direy * param;\n    }\n    return [ax, ay];\n  }\n\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    const movement = u_AveMovement[0];\n    let ax = 0, ay = 0;\n\n    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // 每个节点属性占两个数组中各一格\n    // [mass, degree, nodeStrength, fx]\n    const nodeAttributes1 = this.u_NodeAttributeArray1[i];\n    // [centerX, centerY, centerGravity, fy]\n    const nodeAttributes2 = this.u_NodeAttributeArray2[i];\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    ax += repulsive[0];\n    ay += repulsive[1];\n\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);\n    ax += attractive[0];\n    ay += attractive[1];\n\n    // gravity\n    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);\n    ax -= gravity[0];\n    ay -= gravity[1];\n\n    // speed\n    const param = this.u_interval * this.u_damping;\n    let vx = ax * param;\n    let vy = ay * param;\n    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;\n    if (vlength > this.u_maxSpeed) {\n      const param2 = this.u_maxSpeed / vlength;\n      vx = param2 * vx;\n      vy = param2 * vy;\n    }\n\n    // move\n    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {\n      this.u_Data[i] = [\n        nodeAttributes1[3],\n        nodeAttributes2[3],\n        currentNode[2],\n        0\n      ];\n    } else {\n      const distx = vx * this.u_interval;\n      const disty = vy * this.u_interval;\n      const distLength = sqrt(distx * distx + disty * disty);\n      this.u_Data[i] = [\n        currentNode[0] + distx,\n        currentNode[1] + disty,\n        currentNode[2],\n        distLength\n      ];\n    }\n    \n    // the avarage move distance\n    // need to share memory\n    \n  }\n}\n",e.gForceBundle='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',e.aveMovementCode="\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass CalcAveMovement {\n  @in\n  u_Data: vec4[];\n  @in\n  u_iter: float;\n  @in @out\n  u_AveMovement: vec4[];\n  @main\n  compute() {\n    let movement = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      const vertex = this.u_Data[j];\n      movement += vertex[3];\n    }\n    movement = movement / float(VERTEX_COUNT);\n    this.u_AveMovement[0] = [movement, 0, 0, 0];\n  }\n}\n",e.aveMovementBundle='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},94414:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.GridLayout=void 0,n(49784));n=n(62329),i=n.Base,o(s,i),s.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},s.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,r=t.begin,i=e.length;if(0===i)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};if(1===i)return e[0].x=r[0],e[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};var o,s,u,c=t.sortBy,l=(r=t.width,t.height),h=t.condense,f=t.preventOverlapPadding,d=t.preventOverlap,p=t.nodeSpacing,g=t.nodeSize,m=[],v=(e.forEach((function(t){m.push(t)})),{}),y=(e=(m.forEach((function(t,e){v[t.id]=e})),"degree"!==c&&(0,a.isString)(c)&&void 0!==m[0][c]||(c="degree",(0,a.isNaN)(e[0].degree)&&(o=(0,a.getDegree)(m.length,v,n),m.forEach((function(t,e){t.degree=o[e].all})))),m.sort((function(t,e){return e[c]-t[c]})),r||"undefined"==typeof window||(r=window.innerWidth),l||"undefined"==typeof window||(l=window.innerHeight),t.rows),null!=t.cols?t.cols:t.columns);if(t.cells=i,null!=e&&null!=y?(t.rows=e,t.cols=y):null!=e&&null==y?(t.rows=e,t.cols=Math.ceil(t.cells/t.rows)):null==e&&null!=y?(t.cols=y,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.rows=Math.max(t.rows,1),t.cols=Math.max(t.cols,1),t.cols*t.rows>t.cells)((x=t.small())-1)*(b=t.large())>=t.cells?t.small(x-1):(b-1)*x>=t.cells&&t.large(b-1);else for(;t.cols*t.rows<t.cells;){var b,x=t.small();((b=t.large())+1)*x>=t.cells?t.large(b+1):t.small(x+1)}t.cellWidth=r/t.cols,t.cellHeight=l/t.rows,h&&(t.cellWidth=0,t.cellHeight=0),(d||p)&&(s=(0,a.getFuncByUnknownType)(10,p),u=(0,a.getFuncByUnknownType)(30,g,!1),m.forEach((function(e){e.x&&e.y||(e.x=0,e.y=0);var n,r=u(e)||30;r=(0,a.isArray)(r)?(n=r[0],r[1]):n=r,e=void 0!==s?s(e):f,r+=e;t.cellWidth=Math.max(t.cellWidth,n+e),t.cellHeight=Math.max(t.cellHeight,r)}))),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var _=0;_<m.length;_++){var w=m[_],S=void 0;if((S=t.position?t.position(w):S)&&(void 0!==S.row||void 0!==S.col)){var E={row:S.row,col:S.col};if(void 0===E.col)for(E.col=0;t.used(E.row,E.col);)E.col++;else if(void 0===E.row)for(E.row=0;t.used(E.row,E.col);)E.row++;t.id2manPos[w.id]=E,t.use(E.row,E.col)}t.getPos(w)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:n,nodes:m}},s.prototype.small=function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.min(n,r):Math.min(n,r)===this.rows?this.rows=t:this.cols=t,e},s.prototype.large=function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.max(n,r):Math.max(n,r)===this.rows?this.rows=t:this.cols=t,e},s.prototype.used=function(t,e){return this.cellUsed["c-".concat(t,"-").concat(e)]||!1},s.prototype.use=function(t,e){this.cellUsed["c-".concat(t,"-").concat(e)]=!0},s.prototype.moveToNextCell=function(){var t=this.cols||5;this.col++,this.col>=t&&(this.col=0,this.row++)},s.prototype.getPos=function(t){var e,n,r=this,i=r.begin,o=r.cellWidth,a=r.cellHeight,s=r.id2manPos[t.id];if(s)e=s.col*o+o/2+i[0],n=s.row*a+a/2+i[1];else{for(;r.used(r.row,r.col);)r.moveToNextCell();e=r.col*o+o/2+i[0],n=r.row*a+a/2+i[1],r.use(r.row,r.col),r.moveToNextCell()}t.x=e,t.y=n},s.prototype.getType=function(){return"grid"},n=s;function s(t){var e=i.call(this)||this;return e.begin=[0,0],e.preventOverlap=!0,e.preventOverlapPadding=10,e.condense=!1,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e.row=0,e.col=0,e.cellWidth=0,e.cellHeight=0,e.cellUsed={},e.id2manPos={},e.onLayoutEnd=function(){},e.updateCfg(t),e}e.GridLayout=n},2584:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&("get"in i?e.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)},o=(Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=e.ForceAtlas2Layout=e.ComboCombinedLayout=e.ComboForceLayout=e.GForceGPULayout=e.FruchtermanGPULayout=e.FruchtermanLayout=e.MDSLayout=e.ConcentricLayout=e.RadialLayout=e.DagreCompoundLayout=e.DagreLayout=e.CircularLayout=e.ForceLayout=e.Force2Layout=e.GForceLayout=e.RandomLayout=e.GridLayout=e.Layouts=e.Layout=void 0,n(94414)),a=(Object.defineProperty(e,"GridLayout",{enumerable:!0,get:function(){return o.GridLayout}}),n(39711)),s=(Object.defineProperty(e,"RandomLayout",{enumerable:!0,get:function(){return a.RandomLayout}}),n(13653)),u=(Object.defineProperty(e,"GForceLayout",{enumerable:!0,get:function(){return s.GForceLayout}}),n(6740)),c=(Object.defineProperty(e,"Force2Layout",{enumerable:!0,get:function(){return u.Force2Layout}}),n(85717)),l=(Object.defineProperty(e,"ForceLayout",{enumerable:!0,get:function(){return c.ForceLayout}}),n(64885)),h=(Object.defineProperty(e,"CircularLayout",{enumerable:!0,get:function(){return l.CircularLayout}}),n(20171)),f=(Object.defineProperty(e,"DagreLayout",{enumerable:!0,get:function(){return h.DagreLayout}}),n(77057)),d=(Object.defineProperty(e,"DagreCompoundLayout",{enumerable:!0,get:function(){return f.DagreCompoundLayout}}),n(47944)),p=(Object.defineProperty(e,"RadialLayout",{enumerable:!0,get:function(){return d.RadialLayout}}),n(43281)),g=(Object.defineProperty(e,"ConcentricLayout",{enumerable:!0,get:function(){return p.ConcentricLayout}}),n(52899)),m=(Object.defineProperty(e,"MDSLayout",{enumerable:!0,get:function(){return g.MDSLayout}}),n(80374)),v=(Object.defineProperty(e,"FruchtermanLayout",{enumerable:!0,get:function(){return m.FruchtermanLayout}}),n(87745)),y=(Object.defineProperty(e,"FruchtermanGPULayout",{enumerable:!0,get:function(){return v.FruchtermanGPULayout}}),n(85194)),b=(Object.defineProperty(e,"GForceGPULayout",{enumerable:!0,get:function(){return y.GForceGPULayout}}),n(66590)),x=(Object.defineProperty(e,"ComboForceLayout",{enumerable:!0,get:function(){return b.ComboForceLayout}}),n(63861)),_=(Object.defineProperty(e,"ComboCombinedLayout",{enumerable:!0,get:function(){return x.ComboCombinedLayout}}),n(48564)),w=(Object.defineProperty(e,"ForceAtlas2Layout",{enumerable:!0,get:function(){return _.ForceAtlas2Layout}}),n(90441)),S=(Object.defineProperty(e,"ERLayout",{enumerable:!0,get:function(){return w.ERLayout}}),n(42875));Object.defineProperty(e,"Layout",{enumerable:!0,get:function(){return S.Layout}}),Object.defineProperty(e,"Layouts",{enumerable:!0,get:function(){return S.Layouts}}),i(n(32867),e)},42875:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Layouts=e.Layout=void 0;var r=n(95326),i=n(94414),o=n(39711),a=n(6740),s=n(13653),u=n(85717),c=n(64885),l=n(20171),h=n(47944),f=n(43281),d=n(52899),p=n(80374),g=n(87745),m=n(85194),v=n(66590),y=n(63861),b=n(48564),x=n(90441);n=n(77057);function _(t){var e=(0,r.getLayoutByName)(t.type);this.layoutInstance=new e(t)}_.prototype.layout=function(t){return this.layoutInstance.layout(t)},_.prototype.updateCfg=function(t){this.layoutInstance.updateCfg(t)},_.prototype.init=function(t){this.layoutInstance.init(t)},_.prototype.execute=function(){this.layoutInstance.execute()},_.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},_.prototype.destroy=function(){return this.layoutInstance.destroy()},e.Layout=_,e.Layouts={force:u.ForceLayout,fruchterman:p.FruchtermanLayout,forceAtlas2:b.ForceAtlas2Layout,gForce:s.GForceLayout,force2:a.Force2Layout,dagre:l.DagreLayout,dagreCompound:n.DagreCompoundLayout,circular:c.CircularLayout,radial:h.RadialLayout,concentric:f.ConcentricLayout,grid:i.GridLayout,mds:d.MDSLayout,comboForce:v.ComboForceLayout,comboCombined:y.ComboCombinedLayout,random:o.RandomLayout,"gForce-gpu":m.GForceGPULayout,"fruchterman-gpu":g.FruchtermanGPULayout,er:x.ERLayout}},52899:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.MDSLayout=void 0,n(70023)),s=n(49784);n=n(62329),i=n.Base,o(u,i),u.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},u.prototype.execute=function(){var t,e,n=this,r=n.nodes,i=n.edges,o=(i=void 0===i?[]:i,n.center);if(r&&0!==r.length){if(1!==r.length)return e=n.linkDistance,t=(0,s.getAdjMatrix)({nodes:r,edges:i},!1),t=(0,s.floydWarshall)(t),n.handleInfinity(t),t=(0,s.scaleMatrix)(t,e),n.scaledDistances=t,e=n.runMDS(),(n.positions=e).forEach((function(t,e){r[e].x=t[0]+o[0],r[e].y=t[1]+o[1]})),n.onLayoutEnd&&n.onLayoutEnd(),{nodes:r,edges:i};r[0].x=o[0],r[0].y=o[1]}n.onLayoutEnd&&n.onLayoutEnd()},u.prototype.runMDS=function(){var t=this.scaledDistances,e=(t=a.Matrix.mul(a.Matrix.pow(t,2),-.5),t.mean("row")),n=t.mean("column"),r=t.mean(),i=(r=(t.add(r).subRowVector(e).subColumnVector(n),new a.SingularValueDecomposition(t)),a.Matrix.sqrt(r.diagonalMatrix).diagonal());return r.leftSingularVectors.toJSON().map((function(t){return a.Matrix.mul([t],[i]).toJSON()[0].splice(0,2)}))},u.prototype.handleInfinity=function(t){var e=-999999;t.forEach((function(t){t.forEach((function(t){t!==1/0&&e<t&&(e=t)}))})),t.forEach((function(n,r){n.forEach((function(n,i){n===1/0&&(t[r][i]=e)}))}))},u.prototype.getType=function(){return"mds"},n=u;function u(t){var e=i.call(this)||this;return e.center=[0,0],e.linkDistance=50,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}e.MDSLayout=n},47944:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&("get"in i?e.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(55974),e)},66082:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(70023);function i(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}i.prototype.layout=function(){var t=this.dimension,e=this.distances,n=this.linkDistance;try{var i=r.Matrix.mul(r.Matrix.pow(e,2),-.5),o=i.mean("row"),a=i.mean("column"),s=i.mean(),u=(i.add(s).subRowVector(o).subColumnVector(a),new r.SingularValueDecomposition(i)),c=r.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map((function(e){return r.Matrix.mul([e],[c]).toJSON()[0].splice(0,t)}))}catch(i){for(var l=[],h=0;h<e.length;h++){var f=Math.random()*n,d=Math.random()*n;l.push([f,d])}return l}},e.default=i},55974:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},a=(Object.defineProperty(e,"__esModule",{value:!0}),e.RadialLayout=void 0,n(49784)),s=n(62329),u=o(n(66082)),c=o(n(6290));function l(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}h=s.Base,i(f,h),f.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},f.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges||[];if(e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var r=t.center;if(1!==e.length){var i=t.linkDistance,o=null;if((0,a.isString)(t.focusNode)){for(var s=!1,l=0;l<e.length;l++)e[l].id===t.focusNode&&(o=e[l],t.focusNode=o,s=!0,l=e.length);s||(o=null)}else o=t.focusNode;o||(o=e[0],t.focusNode=o),h=o.id,f=-1,e.forEach((function(t,e){t.id===h&&(f=e)}));var h,f,d=f,p=(d<0&&(d=0),t.focusIndex=d,(0,a.getAdjMatrix)({nodes:e,edges:n},!1)),g=(0,a.floydWarshall)(p),m=t.maxToFocus(g,d),v=(m=(t.handleInfinity(g,d,m+1),(t.distances=g)[d]),g=t.width||500,t.height||500),y=g-r[0]>r[0]?r[0]:g-r[0],b=v-r[1]>r[1]?r[1]:v-r[1],x=(y=0===y?g/2:y)<(b=0===b?v/2:b)?y:b,_=Math.max.apply(Math,m),w=[];y=(m.forEach((function(e,n){t.unitRadius||(t.unitRadius=x/_),w[n]=e*t.unitRadius})),t.radii=w,t.eIdealDisMatrix()),b=function(t){for(var e=t.length,n=t[0].length,r=[],i=0;i<e;i++){for(var o=[],a=0;a<n;a++)0!==t[i][a]?o.push(1/(t[i][a]*t[i][a])):o.push(0);r.push(o)}return r}(t.eIdealDistances=y);t.weights=b;var S,E,M=new u.default({linkDistance:i,distances:y}).layout(),A=(m=(M.forEach((function(t){(0,a.isNaN)(t[0])&&(t[0]=Math.random()*i),(0,a.isNaN)(t[1])&&(t[1]=Math.random()*i)})),(t.positions=M).forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),M.forEach((function(t){t[0]-=M[d][0],t[1]-=M[d][1]})),t.run(),t.preventOverlap),t.nodeSize);b=t.strictRadial;return m&&(S=t.nodeSpacing,E=(0,a.isNumber)(S)?function(){return S}:(0,a.isFunction)(S)?S:function(){return 0},y=A?(0,a.isArray)(A)?function(t){return(A[0]>A[1]?A[0]:A[1])+E(t)}:function(t){return A+E(t)}:function(t){return t.size?(0,a.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+E(t):(0,a.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)+E(t):t.size+E(t):10+E(t)},m={nodes:e,nodeSizeFunc:y,adjMatrix:p,positions:M,radii:w,height:v,width:g,strictRadial:b,focusID:d,iterations:t.maxPreventOverlapIteration||200,k:M.length/4.5},M=new c.default(m).layout()),M.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}e[0].x=r[0],e[0].y=r[1]}t.onLayoutEnd&&t.onLayoutEnd()},f.prototype.run=function(){for(var t=this.maxIteration,e=this.positions||[],n=this.weights||[],r=this.eIdealDistances||[],i=this.radii||[],o=0;o<=t;o++)this.oneIteration(o/t,e,i,r,n)},f.prototype.oneIteration=function(t,e,n,r,i){var o=1-t,a=this.focusIndex;e.forEach((function(s,u){var c,h,f,d,p=l(s,[0,0]);p=0===p?0:1/p;u!==a&&(f=c=d=0,e.forEach((function(t,e){var n,o;u!==e&&(n=l(s,t),o=r[e][u],f+=i[u][e],d+=i[u][e]*(t[0]+o*(s[0]-t[0])*(n=0===n?0:1/n)),c+=i[u][e]*(t[1]+o*(s[1]-t[1])*n))})),h=0===n[u]?0:1/n[u],f=f*o+t*h*h,d=(d*=o)+t*h*s[0]*p,s[0]=d/f,c=(c*=o)+t*h*s[1]*p,s[1]=c/f)}))},f.prototype.eIdealDisMatrix=function(){var t,e,n,r,i,o=this,s=o.nodes;return s?(t=o.distances,e=o.linkDistance,n=o.radii||[],r=o.unitRadius||50,i=[],t&&t.forEach((function(t,u){var c=[];t.forEach((function(t,i){var l;u===i?c.push(0):n[u]===n[i]?"data"===o.sortBy?c.push(t*(Math.abs(u-i)*o.sortStrength)/(n[u]/r)):o.sortBy?(l=s[u][o.sortBy]||0,i=s[i][o.sortBy]||0,(0,a.isString)(l)&&(l=l.charCodeAt(0)),(0,a.isString)(i)&&(i=i.charCodeAt(0)),c.push(t*(Math.abs(l-i)*o.sortStrength)/(n[u]/r))):c.push(t*e/(n[u]/r)):c.push(t*((e+r)/2))})),i.push(c)})),i):[]},f.prototype.handleInfinity=function(t,e,n){for(var r=t.length,i=0;i<r;i++)if(t[e][i]===1/0){t[e][i]=n,t[i][e]=n;for(var o=0;o<r;o++)t[i][o]!==1/0&&t[e][o]===1/0&&(t[e][o]=n+t[i][o],t[o][e]=n+t[i][o])}for(i=0;i<r;i++)if(i!==e){var a;for(o=0;o<r;o++)t[i][o]===1/0&&(a=Math.abs(t[e][i]-t[e][o]),t[i][o]=a=0===a?1:a)}},f.prototype.maxToFocus=function(t,e){for(var n=0,r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n},f.prototype.getType=function(){return"radial"};var h;o=f;function f(t){var e=h.call(this)||this;return e.maxIteration=1e3,e.focusNode=null,e.unitRadius=null,e.linkDistance=50,e.preventOverlap=!1,e.strictRadial=!0,e.maxPreventOverlapIteration=200,e.sortStrength=10,e.nodes=[],e.edges=[],e.updateCfg(t),e}e.RadialLayout=o},6290:function(t,e){"use strict";function n(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype.layout=function(){var t=this.positions,e=[],n=this.iterations,r=this.width/10;this.maxDisplace=r,this.disp=e;for(var i=0;i<n;i++)t.forEach((function(t,n){e[n]={x:0,y:0}})),this.getRepulsion(),this.updatePositions();return t},n.prototype.getRepulsion=function(){var t=this,e=t.positions,n=t.nodes,r=t.disp,i=t.k,o=t.radii||[];e.forEach((function(a,s){r[s]={x:0,y:0},e.forEach((function(e,u){var c,l;s!==u&&o[s]===o[u]&&(l=a[0]-e[0],e=a[1]-e[1],0===(c=Math.sqrt(l*l+e*e))&&(c=1,e=l=.01*(u<s?1:-1)),c<t.nodeSizeFunc(n[s])/2+t.nodeSizeFunc(n[u])/2)&&(r[s].x+=l/c*(u=i*i/c),r[s].y+=e/c*u)}))}))},n.prototype.updatePositions=function(){var t=this.positions,e=this.disp,n=this.speed,r=this.strictRadial,i=this.focusID,o=this.maxDisplace||this.width/10,a=(r&&e.forEach((function(e,n){var r=t[n][0]-t[i][0],o=(n=t[n][1]-t[i][1],Math.sqrt(r*r+n*n)),a=(n=n/o,r=-r/o,o=Math.sqrt(e.x*e.x+e.y*e.y),Math.acos((n*e.x+r*e.y)/o));a>Math.PI/2&&(a-=Math.PI/2,n*=-1,r*=-1),a=Math.cos(a)*o;e.x=n*a,e.y=r*a})),this.radii);t.forEach((function(s,u){var c,l,h;u!==i&&0<(l=Math.sqrt(e[u].x*e[u].x+e[u].y*e[u].y))&&u!==i&&(h=Math.min(o*(n/800),l),s[0]+=e[u].x/l*h,s[1]+=e[u].y/l*h,r)&&(l=s[0]-t[i][0],h=s[1]-t[i][1],l=l/(c=Math.sqrt(l*l+h*h))*a[u],h=h/c*a[u],s[0]=t[i][0]+l,s[1]=t[i][1]+h)}))},e.default=n},39711:function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RandomLayout=void 0,n=n(62329),i=n.Base,o(a,i),a.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},a.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;return t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach((function(e){e.x=.9*(Math.random()-.5)*t.width+n[0],e.y=.9*(Math.random()-.5)*t.height+n[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}},a.prototype.getType=function(){return"random"},n=a;function a(t){var e=i.call(this)||this;return e.center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}e.RandomLayout=n},32867:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},95326:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0,n(62329)),a=n(49784),s=new Map;e.registerLayout=function(t,e){var n;function r(t){var r=n.call(this)||this,i=r,o={},a=i.getDefaultCfg();return Object.assign(o,a,e,t),Object.keys(o).forEach((function(t){i[t]=o[t]})),r}return s.get(t),(0,a.isObject)(e)?(n=o.Base,i(r,n),s.set(t,r)):s.set(t,e),s.get(t)},e.unRegisterLayout=function(t){s.has(t)&&s.delete(t)},e.getLayoutByName=function(t){return s.has(t)?s.get(t):null}},85087:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=void 0,e.isArray=Array.isArray},78732:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFuncByUnknownType=e.getFunc=e.isFunction=void 0;var r=n(49784),i=n(30627);e.isFunction=function(t){return"function"==typeof t},e.getFunc=function(t,e,n){return n=n||((0,i.isNumber)(t)?function(){return t}:function(){return e}),n},e.getFuncByUnknownType=function(t,n,o){return void 0===o&&(o=!0),n||0===n?(0,e.isFunction)(n)?n:(0,i.isNumber)(n)?function(){return n}:(0,r.isArray)(n)?function(){var e;return o?(e=Math.max.apply(Math,n),isNaN(e)?t:e):n}:(0,r.isObject)(n)?function(){var e;return o?(e=Math.max(n.width,n.height),isNaN(e)?t:e):[n.width,n.height]}:function(){return t}:function(e){return e.size?(0,r.isArray)(e.size)?e.size[0]>e.size[1]?e.size[0]:e.size[1]:(0,r.isObject)(e.size)?e.size.width>e.size.height?e.size.width:e.size.height:e.size:t}}},48835:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayToTextureData=e.attributesToTextureData=e.buildTextureDataWithTwoEdgeAttr=e.buildTextureData=e.proccessToFunc=void 0;var r=n(49784),i=n(80628);e.proccessToFunc=function(t,e){var n=t?(0,r.isNumber)(t)?function(){return t}:t:function(){return e||1};return n},e.buildTextureData=function(t,e){var n=[],r=[],o={},a=0;for(a=0;a<t.length;a++){var s=t[a];o[s.id]=a,n.push(s.x),n.push(s.y),n.push(0),n.push(0),r.push([])}for(a=0;a<e.length;a++){var u=e[a],c=(0,i.getEdgeTerminal)(u,"source");u=(0,i.getEdgeTerminal)(u,"target");isNaN(o[c])||isNaN(o[u])||(r[o[c]].push(o[u]),r[o[u]].push(o[c]))}var l=0;for(a=0;a<t.length;a++){var h=r[a],f=h.length;n[4*a+2]=n.length,n[4*a+3]=f;l=Math.max(l,f);for(var d=0;d<f;++d){var p=h[d];n.push(+p)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:l,array:new Float32Array(n)}},e.buildTextureDataWithTwoEdgeAttr=function(t,e,n,r){var o=[],a=[],s={},u=0;for(u=0;u<t.length;u++){var c=t[u];s[c.id]=u,o.push(c.x),o.push(c.y),o.push(0),o.push(0),a.push([])}for(u=0;u<e.length;u++){var l=e[u],h=(0,i.getEdgeTerminal)(l,"source"),f=(0,i.getEdgeTerminal)(l,"target");a[s[h]].push(s[f]),a[s[h]].push(n(l)),a[s[h]].push(r(l)),a[s[h]].push(0),a[s[f]].push(s[h]),a[s[f]].push(n(l)),a[s[f]].push(r(l)),a[s[f]].push(0)}var d=0;for(u=0;u<t.length;u++){var p=a[u],g=p.length;o[4*u+2]=o.length+1048576*g/4,o[4*u+3]=0;d=Math.max(d,g/4);for(var m=0;m<g;++m){var v=p[m];o.push(+v)}}for(;o.length%4!=0;)o.push(0);return{maxEdgePerVetex:d,array:new Float32Array(o)}},e.attributesToTextureData=function(t,e){var n=[],r=t.length,i={};return e.forEach((function(e){t.forEach((function(t,o){if(void 0===i[e[t]]&&(i[e[t]]=Object.keys(i).length),n.push(i[e[t]]),o===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}},e.arrayToTextureData=function(t){for(var e=[],n=t.length,r=t[0].length,i=0;i<r;i++)!function(r){t.forEach((function(t,i){if(e.push(t[r]),i===n-1)for(;e.length%4!=0;)e.push(0)}))}(i);return new Float32Array(e)}},49784:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&("get"in i?e.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(8055),e),i(n(85087),e),i(n(30627),e),i(n(80628),e),i(n(98130),e),i(n(78732),e)},80628:function(t,e,n){"use strict";function r(t,e,n){return"source"===t?(null==(t=null==n?void 0:n.find((function(t){return t.target===e.id})))?void 0:t.source)||{}:(null==(t=null==n?void 0:n.find((function(t){return t.source===e.id})))?void 0:t.target)||{}}function i(t,e,n){var r=[];switch(t){case"source":r=null==n?void 0:n.filter((function(t){return t.source===e.id})).map((function(t){return t.target}));break;case"target":r=null==n?void 0:n.filter((function(t){return t.target===e.id})).map((function(t){return t.source}));break;case"both":r=null==n?void 0:n.filter((function(t){return t.source===e.id})).map((function(t){return t.target})).concat(null==n?void 0:n.filter((function(t){return t.target===e.id})).map((function(t){return t.source})))}return t=new Set(r),Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getCoreNodeAndRelativeLeafNodes=e.getAvgNodePosition=e.findMinMaxNodeXY=e.traverseTreeUp=e.scaleMatrix=e.getAdjMatrix=e.floydWarshall=e.getDegreeMap=e.getDegree=e.getEdgeTerminal=void 0;var o=n(98130),a=(e.getEdgeTerminal=function(t,e){return t=t[e],(0,o.isObject)(t)?t.cell:t},e.getDegree=function(t,n,r){for(var i=[],o=0;o<t;o++)i[o]={in:0,out:0,all:0};return r&&r.forEach((function(t){var r=(0,e.getEdgeTerminal)(t,"source");t=(0,e.getEdgeTerminal)(t,"target");r&&i[n[r]]&&(i[n[r]].out+=1,i[n[r]].all+=1),t&&i[n[t]]&&(i[n[t]].in+=1,i[n[t]].all+=1)})),i},e.getDegreeMap=function(t,n){var r={};return t.forEach((function(t){r[t.id]={in:0,out:0,all:0}})),n&&n.forEach((function(t){var n=(0,e.getEdgeTerminal)(t,"source");t=(0,e.getEdgeTerminal)(t,"target");n&&(r[n].out+=1,r[n].all+=1),t&&(r[t].in+=1,r[t].all+=1)})),r},e.floydWarshall=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var i=0;i<n;i+=1)r===i?e[r][i]=0:0!==t[r][i]&&t[r][i]?e[r][i]=t[r][i]:e[r][i]=1/0}for(var o=0;o<n;o+=1)for(r=0;r<n;r+=1)for(i=0;i<n;i+=1)e[r][i]>e[r][o]+e[o][i]&&(e[r][i]=e[r][o]+e[o][i]);return e},e.getAdjMatrix=function(t,n){var r=t.nodes,i=(t=t.edges,[]),o={};if(r)return r&&r.forEach((function(t,e){o[t.id]=e,i.push([])})),t&&t.forEach((function(t){var r=(0,e.getEdgeTerminal)(t,"source");t=(0,e.getEdgeTerminal)(t,"target"),r=o[r],t=o[t];i[r][t]=1,n||(i[t][r]=1)})),i;throw new Error("invalid nodes data!")},e.scaleMatrix=function(t,e){var n=[];return t.forEach((function(t){var r=[];t.forEach((function(t){r.push(t*e)})),n.push(r)})),n},function(t,e){if(t&&t.children)for(var n=t.children.length-1;0<=n;n--)if(!a(t.children[n],e))return;return!!e(t)});e.traverseTreeUp=function(t,e){"function"==typeof e&&a(t,e)},e.findMinMaxNodeXY=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;return t.forEach((function(t){e>t.x&&(e=t.x),n>t.y&&(n=t.y),r<t.x&&(r=t.x),i<t.y&&(i=t.y)})),{minX:e,minY:n,maxX:r,maxY:i}},e.getAvgNodePosition=function(t){var e={x:0,y:0};t.forEach((function(t){e.x+=t.x||0,e.y+=t.y||0})),t=t.length||1;return{x:e.x/t,y:e.y/t}},e.getCoreNodeAndRelativeLeafNodes=function(t,e,n,o,a,s){var u,c,l,h=a[e.id],f=h.in,d=(h=h.out,e),p=[];return 0===f?(d=r("source",e,n),p=i("both",d,n).map((function(t){return s[t]}))):0===h&&(d=r("target",e,n),p=i("both",d,n).map((function(t){return s[t]}))),p=p.filter((function(t){return a[t.id]&&(0===a[t.id].in||0===a[t.id].out)})),f=t,h=p,c=a,l=(n=e)[u=o]||"",n=(null==h?void 0:h.filter((function(t){return t[u]===l})))||[],n="leaf"===f?n.filter((function(t){var e;return 0===(null==(e=c[t.id])?void 0:e.in)||0===(null==(e=c[t.id])?void 0:e.out)})):n,{coreNode:d,relativeLeafNodes:p,sameTypeLeafNodes:n}}},30627:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toNumber=e.isNaN=e.isNumber=void 0,e.isNumber=function(t){return"number"==typeof t},e.isNaN=function(t){return Number.isNaN(Number(t))},e.toNumber=function(t){var n=parseFloat(t);return(0,e.isNaN)(n)?t:n}},98130:function(t,e){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.isObject=void 0,e.isObject=function(t){return null!==t&&"object"==typeof t},e.clone=function(t){var r,i;return null===t?t:t instanceof Date?new Date(t.getTime()):t instanceof Array?(r=[],t.forEach((function(t){r.push(t)})),r.map((function(t){return(0,e.clone)(t)}))):"object"==typeof t&&t!=={}?(i=n({},t),Object.keys(i).forEach((function(t){i[t]=(0,e.clone)(i[t])})),i):t}},8055:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.camelize=e.isString=void 0,e.isString=function(t){return"string"==typeof t};var n,r,i=/-(\w)/g;e.camelize=(n=function(t){return t.replace(i,(function(t,e){return e?e.toUpperCase():""}))},r=Object.create(null),function(t){return r[t]||(r[t]=n(t))})},14085:function(t,e,n){"use strict";function r(t,e){var n,r=1;function i(){for(var i,o=n.length,a=0,s=0,u=0;u<o;++u)a+=(i=n[u]).x,s+=i.y;for(a=(a/o-t)*r,s=(s/o-e)*r,u=0;u<o;++u)(i=n[u]).x-=a,i.y-=s}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}n.r(e),n.d(e,{forceCenter:function(){return r},forceCollide:function(){return c},forceLink:function(){return f},forceManyBody:function(){return W},forceRadial:function(){return H},forceSimulation:function(){return V},forceX:function(){return Y},forceY:function(){return q}});var i=n(88863);function o(t){return function(){return t}}function a(t){return 1e-6*(t()-.5)}function s(t){return t.x+t.vx}function u(t){return t.y+t.vy}function c(t){var e,n,r,c=1,l=1;function h(){for(var t,o,h,d,p,g,m,v=e.length,y=0;y<l;++y)for(o=(0,i.Z)(e,s,u).visitAfter(f),t=0;t<v;++t)h=e[t],g=n[h.index],m=g*g,d=h.x+h.vx,p=h.y+h.vy,o.visit(b);function b(t,e,n,i,o){var s=t.data,u=(t=t.r,g+t);if(!s)return d+u<e||i<d-u||p+u<n||o<p-u;s.index>h.index&&(n=(e=d-s.x-s.vx)*e+(i=p-s.y-s.vy)*i)<u*u&&(0===e&&(n+=(e=a(r))*e),0===i&&(n+=(i=a(r))*i),n=(u-(n=Math.sqrt(n)))/n*c,h.vx+=(e*=n)*(u=(t*=t)/(m+t)),h.vy+=(i*=n)*u,s.vx-=e*(u=1-u),s.vy-=i*u)}}function f(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function d(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=o(null==t?1:+t)),h.initialize=function(t,n){e=t,r=n,d()},h.iterations=function(t){return arguments.length?(l=+t,h):l},h.strength=function(t){return arguments.length?(c=+t,h):c},h.radius=function(e){return arguments.length?(t="function"==typeof e?e:o(+e),d(),h):t},h}function l(t){return t.index}function h(t,e){if(t=t.get(e),t)return t;throw new Error("node not found: "+e)}function f(t){var e,n,r,i,s,u,c=l,f=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},d=o(30),p=1;function g(r){for(var i=0,o=t.length;i<p;++i)for(var c,l,h,f,d,g=0;g<o;++g)c=(l=t[g]).source,h=(l=l.target).x+l.vx-c.x-c.vx||a(u),f=l.y+l.vy-c.y-c.vy||a(u),h*=d=((d=Math.sqrt(h*h+f*f))-n[g])/d*r*e[g],f*=d,l.vx-=h*(d=s[g]),l.vy-=f*d,c.vx+=h*(d=1-d),c.vy+=f*d}function m(){if(r){var o,a=r.length,u=t.length,l=new Map(r.map(((t,e)=>[c(t,e,r),t]))),f=0;for(i=new Array(a);f<u;++f)(o=t[f]).index=f,"object"!=typeof o.source&&(o.source=h(l,o.source)),"object"!=typeof o.target&&(o.target=h(l,o.target)),i[o.source.index]=(i[o.source.index]||0)+1,i[o.target.index]=(i[o.target.index]||0)+1;for(f=0,s=new Array(u);f<u;++f)o=t[f],s[f]=i[o.source.index]/(i[o.source.index]+i[o.target.index]);e=new Array(u),v(),n=new Array(u),y()}}function v(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+f(t[n],n,t)}function y(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+d(t[e],e,t)}return null==t&&(t=[]),g.initialize=function(t,e){r=t,u=e,m()},g.links=function(e){return arguments.length?(t=e,m(),g):t},g.id=function(t){return arguments.length?(c=t,g):c},g.iterations=function(t){return arguments.length?(p=+t,g):p},g.strength=function(t){return arguments.length?(f="function"==typeof t?t:o(+t),v(),g):f},g.distance=function(t){return arguments.length?(d="function"==typeof t?t:o(+t),y(),g):d},g}var d={value:()=>{}};function p(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new g(r)}function g(t){this._=t}function m(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=d,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}g.prototype=p.prototype={constructor:g,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=m(i[n],t.name,e);else if(null==e)for(n in i)i[n]=m(i[n],t.name,null);return this}for(;++a<s;)if(n=(n=(t=o[a]).type)&&function(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}(i[n],t.name))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new g(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var v,y,b=p,x=0,_=0,w=0,S=1e3,E=0,M=0,A=0,C="object"==typeof performance&&performance.now?performance:Date,T="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function k(){return M||(T(O),M=C.now()+A)}function O(){M=0}function P(){this._call=this._time=this._next=null}function I(t,e,n){var r=new P;return r.restart(t,e,n),r}function N(){M=(E=C.now())+A,x=_=0;try{k(),++x;for(var t,e=v;e;)0<=(t=M-e._time)&&e._call.call(null,t),e=e._next;--x}finally{for(var n,r,i=v,o=1/(x=0);i;)i=i._call?(o>i._time&&(o=i._time),(n=i)._next):(r=i._next,i._next=null,n?n._next=r:v=r);y=n,L(o),M=0}}function D(){var t=C.now(),e=t-E;S<e&&(A-=e,E=t)}function L(t){x||(_=_&&clearTimeout(_),24<t-M?(t<1/0&&(_=setTimeout(N,t-C.now()-A)),w=w&&clearInterval(w)):(w||(E=C.now(),w=setInterval(D,S)),x=1,T(N)))}P.prototype=I.prototype={constructor:P,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?k():+n)+(null==e?0:+e),this._next||y===this||(y?y._next=this:v=this,y=this),this._call=t,this._time=n,L()},stop:function(){this._call&&(this._call=null,this._time=1/0,L())}};const R=1664525,B=1013904223,j=4294967296;function F(t){return t.x}function z(t){return t.y}var U=10,G=Math.PI*(3-Math.sqrt(5));function V(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=I(h),c=b("tick","end"),l=function(){let t=1;return()=>(t=(R*t+B)%j)/j}();function h(){f(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function f(r){var u,c,l=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),u=0;u<l;++u)null==(c=t[u]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function d(){for(var e,n,r,i=0,o=t.length;i<o;++i)(r=t[i]).index=i,null!=r.fx&&(r.x=r.fx),null!=r.fy&&(r.y=r.fy),(isNaN(r.x)||isNaN(r.y))&&(e=U*Math.sqrt(.5+i),n=i*G,r.x=e*Math.cos(n),r.y=e*Math.sin(n)),(isNaN(r.vx)||isNaN(r.vy))&&(r.vx=r.vy=0)}function p(e){return e.initialize&&e.initialize(t,l),e}return null==t&&(t=[]),d(),e={tick:f,restart:function(){return u.restart(h),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(l=t,s.forEach(p),e):l},force:function(t,n){return 1<arguments.length?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s=0,u=t.length;for(null==r?r=1/0:r*=r,s=0;s<u;++s)(i=(i=e-(o=t[s]).x)*i+(i=n-o.y)*i)<r&&(a=o,r=i);return a},on:function(t,n){return 1<arguments.length?(c.on(t,n),e):c.on(t)}}}function W(){var t,e,n,r,s,u=o(-30),c=1,l=1/0,h=.81;function f(n){var o,a=t.length,s=(0,i.Z)(t,F,z).visitAfter(p);for(r=n,o=0;o<a;++o)e=t[o],s.visit(g)}function d(){if(t){var e,n,r=t.length;for(s=new Array(r),e=0;e<r;++e)n=t[e],s[n.index]=+u(n,e,t)}}function p(t){var e,n,r,i,o,a=0,u=0;if(t.length){for(r=i=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(a+=e.value,u+=n,r+=n*e.x,i+=n*e.y);t.x=r/u,t.y=i/u}else for((e=t).x=e.data.x,e.y=e.data.y;a+=s[e.data.index],e=e.next;);t.value=a}function g(t,i,o,u){if(!t.value)return!0;var f=t.x-e.x,d=t.y-e.y,p=u-i,g=f*f+d*d;if(p*p/h<g)return g<l&&(0===f&&(g+=(f=a(n))*f),0===d&&(g+=(d=a(n))*d),g<c&&(g=Math.sqrt(c*g)),e.vx+=f*t.value*r/g,e.vy+=d*t.value*r/g),!0;if(!(t.length||l<=g))for((t.data!==e||t.next)&&(0===f&&(g+=(f=a(n))*f),0===d&&(g+=(d=a(n))*d),g<c)&&(g=Math.sqrt(c*g));t.data!==e&&(p=s[t.data.index]*r/g,e.vx+=f*p,e.vy+=d*p),t=t.next;);}return f.initialize=function(e,r){t=e,n=r,d()},f.strength=function(t){return arguments.length?(u="function"==typeof t?t:o(+t),d(),f):u},f.distanceMin=function(t){return arguments.length?(c=t*t,f):Math.sqrt(c)},f.distanceMax=function(t){return arguments.length?(l=t*t,f):Math.sqrt(l)},f.theta=function(t){return arguments.length?(h=t*t,f):Math.sqrt(h)},f}function H(t,e,n){var r,i,a,s=o(.1);function u(t){for(var o=0,s=r.length;o<s;++o){var u=r[o],c=u.x-e||1e-6,l=u.y-n||1e-6,h=Math.sqrt(c*c+l*l);h=(a[o]-h)*i[o]*t/h;u.vx+=c*h,u.vy+=l*h}}function c(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(r[e],e,r),i[e]=isNaN(a[e])?0:+s(r[e],e,r)}}return"function"!=typeof t&&(t=o(+t)),null==e&&(e=0),null==n&&(n=0),u.initialize=function(t){r=t,c()},u.strength=function(t){return arguments.length?(s="function"==typeof t?t:o(+t),c(),u):s},u.radius=function(e){return arguments.length?(t="function"==typeof e?e:o(+e),c(),u):t},u.x=function(t){return arguments.length?(e=+t,u):e},u.y=function(t){return arguments.length?(n=+t,u):n},u}function Y(t){var e,n,r,i=o(.1);function a(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function s(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=o(null==t?0:+t)),a.initialize=function(t){e=t,s()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:o(+t),s(),a):i},a.x=function(e){return arguments.length?(t="function"==typeof e?e:o(+e),s(),a):t},a}function q(t){var e,n,r,i=o(.1);function a(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function s(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=o(null==t?0:+t)),a.initialize=function(t){e=t,s()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:o(+t),s(),a):i},a.y=function(e){return arguments.length?(t="function"==typeof e?e:o(+e),s(),a):t},a}},76749:function(t,e,n){"use strict";n.r(e),n.d(e,{quadtree:function(){return r.Z}});var r=n(88863)},88863:function(t,e,n){"use strict";function r(t,e,n,r){if(!isNaN(e)&&!isNaN(n)){var i,o,a,s,u,c,l,h,f,d=t._root,p={data:r},g=t._x0,m=t._y0,v=t._x1,y=t._y1;if(d){for(;d.length;)if((c=e>=(o=(g+v)/2))?g=o:v=o,(l=n>=(a=(m+y)/2))?m=a:y=a,!(d=(i=d)[h=l<<1|c]))return i[h]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)p.next=d,i?i[h]=p:t._root=p;else{for(;i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+v)/2))?g=o:v=o,(l=n>=(a=(m+y)/2))?m=a:y=a,(h=l<<1|c)==(f=(a<=u)<<1|o<=s););i[f]=d,i[h]=p}}else t._root=p}return t}function i(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function o(t){return t[0]}function a(t){return t[1]}function s(t,e,n){return e=new u(null==e?o:e,null==n?a:n,NaN,NaN,NaN,NaN),null==t?e:e.addAll(t)}function u(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function c(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}n.d(e,{Z:function(){return s}}),n=s.prototype=u.prototype,n.copy=function(){var t,e,n=new u(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(r)if(r.length)for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=c(e));else n._root=c(r);return n},n.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return r(this.cover(e,n),e,n,t)},n.addAll=function(t){for(var e,n,i=t.length,o=new Array(i),a=new Array(i),s=1/0,u=1/0,c=-1/0,l=-1/0,h=0;h<i;++h)isNaN(e=+this._x.call(null,n=t[h]))||isNaN(n=+this._y.call(null,n))||((o[h]=e)<s&&(s=e),c<e&&(c=e),(a[h]=n)<u&&(u=n),l<n&&(l=n));if(!(c<s||l<u))for(this.cover(s,u).cover(c,l),h=0;h<i;++h)r(this,o[h],a[h],t[h]);return this},n.cover=function(t,e){if(!isNaN(t=+t)&&!isNaN(e=+e)){var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n||1,c=this._root;t<n||i<=t||e<r||o<=e;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}this._x0=n,this._y0=r,this._x1=i,this._y1=o}return this},n.data=function(){var t=[];return this.visit((function(e){if(!e.length)for(;t.push(e.data),e=e.next;);})),t},n.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(t,e,n){var r,o,a,s,u,c,l,h,f=this._x0,d=this._y0,p=this._x1,g=this._y1,m=[],v=this._root;for(v&&m.push(new i(v,f,d,p,g)),null==n?n=1/0:(f=t-n,d=e-n,p=t+n,g=e+n,n*=n);r=m.pop();)!(v=r.node)||(u=r.x0)>p||(c=r.y0)>g||(s=r.x1)<f||(o=r.y1)<d||(v.length?(m.push(new i(v[3],a=(u+s)/2,l=(c+o)/2,s,o),new i(v[2],u,l,a,o),new i(v[1],a,c,s,l),new i(v[0],u,c,a,l)),(o=(l<=e)<<1|a<=t)&&(r=m[m.length-1],m[m.length-1]=m[m.length-1-o],m[m.length-1-o]=r)):(c=(s=t-+this._x.call(null,v.data))*s+(u=e-+this._y.call(null,v.data))*u)<n&&(f=t-(l=Math.sqrt(n=c)),d=e-l,p=t+l,g=e+l,h=v.data));return h},n.remove=function(t){if(!isNaN(o=+this._x.call(null,t))&&!isNaN(a=+this._y.call(null,t))){var e,n,r,i,o,a,s,u,c,l,h,f=this._root,d=this._x0,p=this._y0,g=this._x1,m=this._y1;if(f){if(f.length)for(;;){if((u=o>=(s=(d+g)/2))?d=s:g=s,(c=a>=(s=(p+m)/2))?p=s:m=s,!(f=(e=f)[l=c<<1|u]))return this;if(!f.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;f.data!==t;)if(!(f=(r=f).next))return this;(i=f.next)&&delete f.next,r?i?r.next=i:delete r.next:e?(i?e[l]=i:delete e[l],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[h]=f:this._root=f)):this._root=i}}return this},n.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},n.root=function(){return this._root},n.size=function(){var t=0;return this.visit((function(e){if(!e.length)for(;++t,e=e.next;);})),t},n.visit=function(t){var e,n,r,o,a,s,u,c=[],l=this._root;for(l&&c.push(new i(l,this._x0,this._y0,this._x1,this._y1));a=c.pop();)!t(l=a.node,n=a.x0,r=a.y0,o=a.x1,a=a.y1)&&l.length&&(s=(n+o)/2,u=(r+a)/2,(e=l[3])&&c.push(new i(e,s,u,o,a)),(e=l[2])&&c.push(new i(e,n,u,s,a)),(e=l[1])&&c.push(new i(e,s,r,o,u)),e=l[0])&&c.push(new i(e,n,r,s,u));return this},n.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new i(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o,a,s,u,c,l,h,f=e.node;f.length&&(a=e.x0,s=e.y0,l=(a+(u=e.x1))/2,h=(s+(c=e.y1))/2,(o=f[0])&&n.push(new i(o,a,s,l,h)),(o=f[1])&&n.push(new i(o,l,s,u,h)),(o=f[2])&&n.push(new i(o,a,h,l,c)),o=f[3])&&n.push(new i(o,l,h,u,c)),r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},n.x=function(t){return arguments.length?(this._x=t,this):this._x},n.y=function(t){return arguments.length?(this._y=t,this):this._y}},31278:function(t,e,n){"use strict";var r=n(92906);function i(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.mat3.fromTranslation(i,n),r.mat3.multiply(t,i,e)}function o(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.mat3.fromRotation(i,n),r.mat3.multiply(t,i,e)}function a(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.mat3.fromScaling(i,n),r.mat3.multiply(t,i,e)}e.vs=function(t,e){for(var n,s=t?[].concat(t):[1,0,0,0,1,0,0,0,1],u=0,c=e.length;u<c;u++){var l=e[u];switch(l[0]){case"t":i(s,s,[l[1],l[2]]);break;case"s":a(s,s,[l[1],l[2]]);break;case"r":o(s,s,l[1]);break;case"m":n=l[1],r.mat3.multiply(s,n,s)}}return s}},14062:function(t,e,n){"use strict";n.r(e),n.d(e,{Cache:function(){return Ae},assign:function(){return Yt},augment:function(){return Xt},clamp:function(){return tt},clearAnimationFrame:function(){return Wt},clone:function(){return Kt},contains:function(){return i},debounce:function(){return Zt},deepMix:function(){return Qt},difference:function(){return a},each:function(){return d},endsWith:function(){return G},every:function(){return V},extend:function(){return te},filter:function(){return o},find:function(){return y},findIndex:function(){return x},firstValue:function(){return _},fixedBase:function(){return et},flatten:function(){return w},flattenDeep:function(){return S},forIn:function(){return bt},get:function(){return he},getEllipsisText:function(){return Ee},getRange:function(){return A},getType:function(){return Pt},getWrapBehavior:function(){return K},group:function(){return X},groupBy:function(){return Y},groupToMap:function(){return q},has:function(){return xt},hasKey:function(){return _t},hasValue:function(){return St},head:function(){return F},identity:function(){return _e},includes:function(){return i},indexOf:function(){return ee},isArguments:function(){return It},isArray:function(){return h},isArrayLike:function(){return r},isBoolean:function(){return Nt},isDate:function(){return Dt},isDecimal:function(){return rt},isElement:function(){return Gt},isEmpty:function(){return ae},isEqual:function(){return se},isEqualWith:function(){return ue},isError:function(){return Lt},isEven:function(){return it},isFinite:function(){return Rt},isFunction:function(){return c},isInteger:function(){return ot},isMatch:function(){return g},isNegative:function(){return at},isNil:function(){return l},isNull:function(){return Bt},isNumber:function(){return nt},isNumberEqual:function(){return ut},isObject:function(){return f},isObjectLike:function(){return m},isOdd:function(){return ct},isPlainObject:function(){return v},isPositive:function(){return lt},isPrototype:function(){return Ft},isRegExp:function(){return zt},isString:function(){return D},isType:function(){return u},isUndefined:function(){return Ut},keys:function(){return p},last:function(){return z},lowerCase:function(){return Mt},lowerFirst:function(){return At},map:function(){return ce},mapValues:function(){return le},max:function(){return E},maxBy:function(){return ht},measureTextWidth:function(){return Se},memoize:function(){return $t},min:function(){return M},minBy:function(){return ft},mix:function(){return Yt},mod:function(){return dt},noop:function(){return xe},number2color:function(){return J},omit:function(){return ge},parseRadius:function(){return Q},pick:function(){return pe},pull:function(){return k},pullAt:function(){return P},reduce:function(){return I},remove:function(){return N},requestAnimationFrame:function(){return Vt},set:function(){return fe},size:function(){return we},some:function(){return W},sortBy:function(){return L},startsWith:function(){return U},substitute:function(){return Ct},throttle:function(){return me},toArray:function(){return ve},toDegree:function(){return gt},toInteger:function(){return mt},toRadian:function(){return yt},toString:function(){return Et},union:function(){return B},uniq:function(){return R},uniqueId:function(){return be},upperCase:function(){return Tt},upperFirst:function(){return kt},values:function(){return wt},valuesOfKey:function(){return j},wrapBehavior:function(){return Z}});var r=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},i=function(t,e){return!!r(t)&&-1<t.indexOf(e)},o=function(t,e){if(!r(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];e(o,i)&&n.push(o)}return n},a=function(t,e){return void 0===e&&(e=[]),o(t,(function(t){return!i(e,t)}))},s={}.toString,u=function(t,e){return s.call(t)==="[object "+e+"]"},c=function(t){return u(t,"Function")},l=function(t){return null==t},h=function(t){return Array.isArray?Array.isArray(t):u(t,"Array")},f=function(t){var e=typeof t;return null!==t&&"object"==e||"function"==e},d=function(t,e){if(t)if(h(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(f(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break},p=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return d(t,(function(n,r){c(t)&&"prototype"===r||e.push(r)})),e},g=function(t,e){var n=p(e),r=n.length;if(l(t))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(e[o]!==t[o]||!(o in t))return!1}return!0},m=function(t){return"object"==typeof t&&null!==t},v=function(t){if(!m(t)||!u(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},y=function(t,e){var n;if(h(t)&&(c(e)&&(n=e),n=v(e)?function(t){return g(t,e)}:n))for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null};function b(t,e){if(void 0===e&&(e=[]),h(t))for(var n=0;n<t.length;n+=1)b(t[n],e);else e.push(t);return e}var x=function(t,e,n){for(var r=n=void 0===n?0:n;r<t.length;r++)if(e(t[r],r))return r;return-1},_=function(t,e){for(var n=null,r=0;r<t.length;r++){var i=t[r][e];if(!l(i)){n=h(i)?i[0]:i;break}}return n},w=function(t){if(!h(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e},S=b,E=function(t){if(h(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},M=function(t){if(h(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])},A=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(h(t[0])){for(var n=[],r=0;r<t.length;r++)n=n.concat(t[r]);e=n}var i=E(e);return{min:M(e),max:i}},C=(n=Array.prototype,n.splice),T=n.indexOf,k=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var i,o=e[r];-1<(i=T.call(t,o));)C.call(t,i,1);return t},O=Array.prototype.splice,P=function(t,e){if(!r(t))return[];for(var n=t?e.length:0,i=n-1;n--;){var o=e[n];n!==i&&void 0===o||O.call(t,o,1)}return t},I=function(t,e,n){var r;return h(t)||v(t)?(r=n,d(t,(function(t,n){r=e(r,t,n)})),r):t},N=function(t,e){var n=[];if(r(t)){for(var i=-1,o=[],a=t.length;++i<a;){var s=t[i];e(s,i,t)&&(n.push(s),o.push(i))}P(t,o)}return n},D=function(t){return u(t,"String")},L=function(t,e){var n,r=c(e)?function(t,n){return e(t)-e(n)}:(n=[],D(e)?n.push(e):h(e)&&(n=e),function(t,e){for(var r=0;r<n.length;r+=1){var i=n[r];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0});return t.sort(r),t};function R(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];e.has(o)||(n.push(o),e.set(o,!0))}return n}var B=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return R([].concat.apply([],t))},j=function(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i][e];if(!l(o)){h(o)||(o=[o]);for(var a=0;a<o.length;a++){var s=o[a];r[s]||(n.push(s),r[s]=!0)}}}return n};function F(t){if(r(t))return t[0]}function z(t){if(r(t))return t[t.length-1]}var U=function(t,e){return!(!h(t)&&!D(t))&&t[0]===e},G=function(t,e){return!(!h(t)&&!D(t))&&t[t.length-1]===e},V=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0},W=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1},H=Object.prototype.hasOwnProperty,Y=function(t,e){if(!e||!h(t))return{};for(var n={},r=c(e)?e:function(t){return t[e]},i=0;i<t.length;i++){var o=t[i],a=r(o);H.call(n,a)?n[a].push(o):n[a]=[o]}return n};function q(t,e){var n;return e?(c(e)||(n=h(e)?e:e.replace(/\s+/g,"").split("*"),e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}),Y(t,e)):{0:t}}var X=function(t,e){if(!e)return[t];var n,r=q(t,e),i=[];for(n in r)i.push(r[n]);return i},K=function(t,e){return t["_wrap_"+e]},Z=function(t,e){return t["_wrap_"+e]||(t["_wrap_"+e]=function(n){t[e](n)})},$={},J=function(t){var e=$[t];if(!e){for(var n=t.toString(16),r=n.length;r<6;r++)n="0"+n;$[t]=e="#"+n}return e},Q=function(t){var e=0,n=0,r=0,i=0;return h(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}},tt=function(t,e,n){return t<e?e:n<t?n:t},et=function(t,e){e=e.toString();var n=e.indexOf(".");return-1===n?Math.round(t):(20<(e=e.substr(n+1).length)&&(e=20),parseFloat(t.toFixed(e)))},nt=function(t){return u(t,"Number")},rt=function(t){return nt(t)&&t%1!=0},it=function(t){return nt(t)&&t%2==0},ot=Number.isInteger||function(t){return nt(t)&&t%1==0},at=function(t){return nt(t)&&t<0},st=1e-5;function ut(t,e,n){return void 0===n&&(n=st),Math.abs(t-e)<n}var ct=function(t){return nt(t)&&t%2!=0},lt=function(t){return nt(t)&&0<t},ht=function(t,e){if(h(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var o=t[i],a=c(e)?e(o):o[e];r<a&&(n=o,r=a)}return n}},ft=function(t,e){if(h(t)){for(var n,r=1/0,i=0;i<t.length;i++){var o=t[i],a=c(e)?e(o):o[e];a<r&&(n=o,r=a)}return n}},dt=function(t,e){return(t%e+e)%e},pt=180/Math.PI,gt=function(t){return pt*t},mt=parseInt,vt=Math.PI/180,yt=function(t){return vt*t},bt=d,xt=function(t,e){return t.hasOwnProperty(e)},_t=xt,wt=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return d(t,(function(n,r){c(t)&&"prototype"===r||e.push(n)})),e},St=function(t,e){return i(wt(t),e)},Et=function(t){return l(t)?"":t.toString()},Mt=function(t){return Et(t).toLowerCase()},At=function(t){return t=Et(t),t.charAt(0).toLowerCase()+t.substring(1)},Ct=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t},Tt=function(t){return Et(t).toUpperCase()},kt=function(t){return t=Et(t),t.charAt(0).toUpperCase()+t.substring(1)},Ot={}.toString,Pt=function(t){return Ot.call(t).replace(/^\[object /,"").replace(/]$/,"")},It=function(t){return u(t,"Arguments")},Nt=function(t){return u(t,"Boolean")},Dt=function(t){return u(t,"Date")},Lt=function(t){return u(t,"Error")};function Rt(t){return nt(t)&&isFinite(t)}var Bt=function(t){return null===t},jt=Object.prototype,Ft=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||jt)},zt=function(t){return u(t,"RegExp")},Ut=function(t){return void 0===t},Gt=function(t){return t instanceof Element||t instanceof HTMLDocument};function Vt(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}function Wt(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}function Ht(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function Yt(t,e,n,r){return e&&Ht(t,e),n&&Ht(t,n),r&&Ht(t,r),t}function qt(t){if("object"!=typeof t||null===t)return t;if(h(t))for(var e=[],n=0,r=t.length;n<r;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=qt(t[n]):e[n]=t[n];else for(var i in e={},t)"object"==typeof t[i]&&null!=t[i]?e[i]=qt(t[i]):e[i]=t[i];return e}var Xt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],r=1;r<t.length;r++){var i=t[r];c(i)&&(i=i.prototype),Yt(n.prototype,i)}},Kt=qt,Zt=function(t,e,n){var r;return function(){var i=this,o=arguments,a=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||t.apply(i,o)}),e),a&&t.apply(i,o)}},$t=function(t,e){var n;if(c(t))return(n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o,a=e?e.apply(this,r):r[0],s=n.cache;return s.has(a)?s.get(a):(o=t.apply(this,r),s.set(a,o),o)}).cache=new Map,n;throw new TypeError("Expected a function")},Jt=5,Qt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)!function t(e,n,r,i){for(var o in r=r||0,i=i||Jt,n){var a;n.hasOwnProperty(o)&&(null!==(a=n[o])&&v(a)?(v(e[o])||(e[o]={}),r<i?t(e[o],a,r+1,i):e[o]=n[o]):h(a)?(e[o]=[],e[o]=e[o].concat(a)):void 0!==a&&(e[o]=a))}}(t,e[r]);return t},te=function(t,e,n,r){c(e)||(n=e,e=t,t=function(){});var i=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}return n.prototype=t,t=new n,t.constructor=e,t},o=i(e.prototype,t);return t.prototype=Yt(o,t.prototype),t.superclass=i(e.prototype,e),Yt(o,n),Yt(t,r),t},ee=function(t,e){if(!r(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,o=0;o<t.length;o++)if(t[o]===e){i=o;break}return i},ne=Object.prototype.hasOwnProperty;function re(t,e){if(t===e)return!0;if(t&&e&&!D(t)&&!D(e)){if(r(t)||r(e)){if(t.length!==e.length)return!1;for(var n=!0,i=0;i<t.length&&(n=re(t[i],e[i]));i++);return n}if(m(t)||m(e)){var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(n=!0,i=0;i<o.length&&(n=re(t[o[i]],e[o[i]]));i++);return n}}return!1}function ie(t){return t}var oe,ae=function(t){if(!l(t)){if(r(t))return!t.length;var e,n=Pt(t);if("Map"===n||"Set"===n)return!t.size;if(Ft(t))return!Object.keys(t).length;for(e in t)if(ne.call(t,e))return!1}return!0},se=re,ue=function(t,e,n){return c(n)?!!n(t,e):se(t,e)},ce=function(t,e){if(!r(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];n.push(e(o,i))}return n},le=function(t,e){void 0===e&&(e=ie);var n={};return f(t)&&!l(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n},he=function(t,e,n){for(var r=0,i=D(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return void 0===t||r<i.length?n:t},fe=function(t,e,n){var r=t,i=D(e)?e.split("."):e;return i.forEach((function(t,e){e<i.length-1?(f(r[t])||(r[t]=nt(i[e+1])?[]:{}),r=r[t]):r[t]=n})),t},de=Object.prototype.hasOwnProperty,pe=function(t,e){var n;return null!==t&&v(t)?(n={},d(e,(function(e){de.call(t,e)&&(n[e]=t[e])})),n):{}},ge=function(t,e){return I(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})},me=function(t,e,n){function r(){c=!1===n.leading?0:Date.now(),o=null,u=t.apply(a,s),o||(a=s=null)}function i(){var i=Date.now(),l=(c||!1!==n.leading||(c=i),e-(i-c));return a=this,s=arguments,l<=0||e<l?(o&&(clearTimeout(o),o=null),c=i,u=t.apply(a,s),o||(a=s=null)):o||!1===n.trailing||(o=setTimeout(r,l)),u}var o,a,s,u,c=0;return n=n||{},i.cancel=function(){clearTimeout(o),c=0,o=a=s=null},i},ve=function(t){return r(t)?Array.prototype.slice.call(t):[]},ye={},be=function(t){return ye[t=t||"g"]?ye[t]+=1:ye[t]=1,t+ye[t]},xe=function(){},_e=function(t){return t};function we(t){return l(t)?0:(r(t)?t:Object.keys(t)).length}Object.create,Object.create;var Se=$t((function(t,e){var n=(e=void 0===e?{}:e).fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle;e=e.fontVariant;return(oe=oe||document.createElement("canvas").getContext("2d")).font=[o,e,i,n+"px",r].join(" "),oe.measureText(D(t)?t:"").width}),(function(t,e){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}([t],wt(e=void 0===e?{}:e)).join("")})),Ee=function(t,e,n,r){var i,o,a=Se(r=void 0===r?"...":r,n),s=D(t)?t:Et(t),u=e,c=[];if(Se(t,n)<=e)return t;for(;;){if(i=s.substr(0,16),u<(o=Se(i,n))+a&&u<o)break;if(c.push(i),u-=o,!(s=s.substr(16)))return c.join("")}for(;;){if(i=s.substr(0,1),u<(o=Se(i,n))+a)break;if(c.push(i),u-=o,!(s=s.substr(1)))return c.join("")}return""+c.join("")+r};function Me(){this.map={}}Me.prototype.has=function(t){return void 0!==this.map[t]},Me.prototype.get=function(t,e){return t=this.map[t],void 0===t?e:t},Me.prototype.set=function(t,e){this.map[t]=e},Me.prototype.clear=function(){this.map={}},Me.prototype.delete=function(t){delete this.map[t]},Me.prototype.size=function(){return Object.keys(this.map).length};var Ae=Me},94750:function(t,e,n){"use strict";n.r(e),n.d(e,{afterMain:function(){return w},afterRead:function(){return b},afterWrite:function(){return M},applyStyles:function(){return I},arrow:function(){return Z},auto:function(){return s},basePlacements:function(){return u},beforeMain:function(){return x},beforeRead:function(){return v},beforeWrite:function(){return S},bottom:function(){return i},clippingParents:function(){return h},computeStyles:function(){return Q},createPopper:function(){return kt},createPopperBase:function(){return Tt},createPopperLite:function(){return Ot},detectOverflow:function(){return gt},end:function(){return l},eventListeners:function(){return et},flip:function(){return mt},hide:function(){return bt},left:function(){return a},main:function(){return _},modifierPhases:function(){return A},offset:function(){return xt},placements:function(){return m},popper:function(){return d},popperGenerator:function(){return Ct},popperOffsets:function(){return _t},preventOverflow:function(){return wt},read:function(){return y},reference:function(){return p},right:function(){return o},start:function(){return c},top:function(){return r},variationPlacements:function(){return g},viewport:function(){return f},write:function(){return E}});var r="top",i="bottom",o="right",a="left",s="auto",u=[r,i,o,a],c="start",l="end",h="clippingParents",f="viewport",d="popper",p="reference",g=u.reduce((function(t,e){return t.concat([e+"-"+c,e+"-"+l])}),[]),m=[].concat(u,[s]).reduce((function(t,e){return t.concat([e,e+"-"+c,e+"-"+l])}),[]),v="beforeRead",y="read",b="afterRead",x="beforeMain",_="main",w="afterMain",S="beforeWrite",E="write",M="afterWrite",A=[v,y,b,x,_,w,S,E,M];function C(t){return t?(t.nodeName||"").toLowerCase():null}function T(t){var e;return null==t?window:"[object Window]"!==t.toString()?(e=t.ownerDocument)&&e.defaultView||window:t}function k(t){return t instanceof T(t).Element||t instanceof Element}function O(t){return t instanceof T(t).HTMLElement||t instanceof HTMLElement}function P(t){return"undefined"!=typeof ShadowRoot&&(t instanceof T(t).ShadowRoot||t instanceof ShadowRoot)}var I={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];O(i)&&C(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{};t=Object.keys((e.styles.hasOwnProperty(t)?e.styles:n)[t]).reduce((function(t,e){return t[e]="",t}),{});O(r)&&C(r)&&(Object.assign(r.style,t),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]};function N(t){return t.split("-")[0]}function D(t){return t=t.getBoundingClientRect(),{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function L(t){var e=D(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function R(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&P(n)){var r=e;do{if(r&&t.isSameNode(r))return!0}while(r=r.parentNode||r.host)}return!1}function B(t){return T(t).getComputedStyle(t)}function j(t){return((k(t)?t.ownerDocument:t.document)||window.document).documentElement}function F(t){return"html"===C(t)?t:t.assignedSlot||t.parentNode||(P(t)?t.host:null)||j(t)}function z(t){return O(t)&&"fixed"!==B(t).position?t.offsetParent:null}function U(t){for(var e,n=T(t),r=z(t);r&&(e=r,0<=["table","td","th"].indexOf(C(e)))&&"static"===B(r).position;)r=z(r);return(!r||"html"!==C(r)&&("body"!==C(r)||"static"!==B(r).position))&&(r||function(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),n=-1!==navigator.userAgent.indexOf("Trident");if(!n||!O(t)||"fixed"!==B(t).position)for(var r=F(t);O(r)&&["html","body"].indexOf(C(r))<0;){var i=B(r);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return r;r=r.parentNode}return null}(t))||n}function G(t){return 0<=["top","bottom"].indexOf(t)?"x":"y"}var V=Math.max,W=Math.min,H=Math.round;function Y(t,e,n){return V(t,W(e,n))}function q(){return{top:0,right:0,bottom:0,left:0}}function X(t){return Object.assign({},q(),t)}function K(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}var Z={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n,s,c,l=t.state,h=t.name,f=(t=t.options,l.elements.arrow),d=l.modifiersData.popperOffsets,p=G(g=N(l.placement)),g=0<=[a,o].indexOf(g)?"height":"width";f&&d&&(t=t.padding,n=l,n=X("number"!=typeof(t="function"==typeof t?t(Object.assign({},n.rects,{placement:n.placement})):t)?t:K(t,u)),t=L(f),c="y"===p?r:a,s="y"===p?i:o,e=l.rects.reference[g]+l.rects.reference[p]-d[p]-l.rects.popper[g],d=d[p]-l.rects.reference[p],f=(f=U(f))?"y"===p?f.clientHeight||0:f.clientWidth||0:0,c=n[c],n=f-t[g]-n[s],c=Y(c,s=f/2-t[g]/2+(e/2-d/2),n),l.modifiersData[h]=((f={})[p]=c,f.centerOffset=c-s,f))},effect:function(t){var e=t.state;null!=(t=void 0===(t=t.options.element)?"[data-popper-arrow]":t)&&("string"!=typeof t||(t=e.elements.popper.querySelector(t)))&&R(e.elements.popper,t)&&(e.elements.arrow=t)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},$={top:"auto",right:"auto",bottom:"auto",left:"auto"};function J(t){var e,n,s,u=t.popper,c=t.popperRect,l=t.placement,h=t.offsets,f=t.position,d=t.gpuAcceleration,p=t.adaptive,g=(t=t.roundOffsets,!0===t?(g=(m=h).x,m=h.y,v=window.devicePixelRatio||1,{x:H(H(g*v)/v)||0,y:H(H(m*v)/v)||0}):"function"==typeof t?t(h):h),m=g.x,v=void 0===m?0:m,y=(t=g.y,t=void 0===t?0:t,h.hasOwnProperty("x")),b=(h=h.hasOwnProperty("y"),a),x=r,_=window;p&&(s="clientHeight",n="clientWidth",(e=U(u))===T(u)&&"static"!==B(e=j(u)).position&&(s="scrollHeight",n="scrollWidth"),l===r&&(x=i,t=(t-(e[s]-c.height))*(d?1:-1)),l===a)&&(b=o,v=(v-(e[n]-c.width))*(d?1:-1)),u=Object.assign({position:f},p&&$);return d?Object.assign({},u,((s={})[x]=h?"0":"",s[b]=y?"0":"",s.transform=(_.devicePixelRatio||1)<2?"translate("+v+"px, "+t+"px)":"translate3d("+v+"px, "+t+"px, 0)",s)):Object.assign({},u,((l={})[x]=h?t+"px":"",l[b]=y?v+"px":"",l.transform="",l))}var Q={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=(t=t.options,void 0===(n=t.gpuAcceleration)||n),r=void 0===(r=t.adaptive)||r;t=void 0===(t=t.roundOffsets)||t,n={placement:N(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,J(Object.assign({},n,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r,roundOffsets:t})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,J(Object.assign({},n,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:t})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},tt={passive:!0},et={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,r=(t=t.options).scroll,i=void 0===r||r,o=void 0===(r=t.resize)||r,a=T(e.elements.popper),s=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&s.forEach((function(t){t.addEventListener("scroll",n.update,tt)})),o&&a.addEventListener("resize",n.update,tt),function(){i&&s.forEach((function(t){t.removeEventListener("scroll",n.update,tt)})),o&&a.removeEventListener("resize",n.update,tt)}},data:{}},nt={left:"right",right:"left",bottom:"top",top:"bottom"};function rt(t){return t.replace(/left|right|bottom|top/g,(function(t){return nt[t]}))}var it={start:"end",end:"start"};function ot(t){return t.replace(/start|end/g,(function(t){return it[t]}))}function at(t){return t=T(t),{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function st(t){return D(j(t)).left+at(t).scrollLeft}function ut(t){t=B(t);var e=t.overflow,n=t.overflowX;t=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+t+n)}function ct(t,e){void 0===e&&(e=[]);var n=function t(e){return 0<=["html","body","#document"].indexOf(C(e))?e.ownerDocument.body:O(e)&&ut(e)?e:t(F(e))}(t),r=(t=n===(null==(t=t.ownerDocument)?void 0:t.body),T(n));r=t?[r].concat(r.visualViewport||[],ut(n)?n:[]):n,n=e.concat(r);return t?n:n.concat(ct(F(r)))}function lt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ht(t,e){return e===f?lt((r=T(n=t),i=j(n),r=r.visualViewport,o=i.clientWidth,i=i.clientHeight,s=a=0,r&&(o=r.width,i=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,s=r.offsetTop)),{width:o,height:i,x:a+st(n),y:s})):O(e)?((o=D(r=e)).top=o.top+r.clientTop,o.left=o.left+r.clientLeft,o.bottom=o.top+r.clientHeight,o.right=o.left+r.clientWidth,o.width=r.clientWidth,o.height=r.clientHeight,o.x=o.left,o.y=o.top,o):lt((i=j(t),a=j(i),n=at(i),s=null==(s=i.ownerDocument)?void 0:s.body,e=V(a.scrollWidth,a.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),t=V(a.scrollHeight,a.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),i=-n.scrollLeft+st(i),n=-n.scrollTop,"rtl"===B(s||a).direction&&(i+=V(a.clientWidth,s?s.clientWidth:0)-e),{width:e,height:t,x:i,y:n}));var n,r,i,o,a,s}function ft(t,e,n){var r,i="clippingParents"===e?(o=ct(F(i=t)),k(r=0<=["absolute","fixed"].indexOf(B(i).position)&&O(i)?U(i):i)?o.filter((function(t){return k(t)&&R(t,r)&&"body"!==C(t)})):[]):[].concat(e),o=[].concat(i,[n]);e=o[0],n=o.reduce((function(e,n){return n=ht(t,n),e.top=V(n.top,e.top),e.right=W(n.right,e.right),e.bottom=W(n.bottom,e.bottom),e.left=V(n.left,e.left),e}),ht(t,e));return n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}function dt(t){return t.split("-")[1]}function pt(t){var e,n=t.reference,s=t.element,u=(t=t.placement,t?N(t):null),h=(t=t?dt(t):null,n.x+n.width/2-s.width/2),f=n.y+n.height/2-s.height/2;switch(u){case r:e={x:h,y:n.y-s.height};break;case i:e={x:h,y:n.y+n.height};break;case o:e={x:n.x+n.width,y:f};break;case a:e={x:n.x-s.width,y:f};break;default:e={x:n.x,y:n.y}}var d=u?G(u):null;if(null!=d){var p="y"===d?"height":"width";switch(t){case c:e[d]=e[d]-(n[p]/2-s[p]/2);break;case l:e[d]=e[d]+(n[p]/2-s[p]/2)}}return e}function gt(t,e){e=e=void 0===e?{}:e;var n,a=e.placement,s=(a=void 0===a?t.placement:a,e.boundary),c=(s=void 0===s?h:s,e.rootBoundary),l=(c=void 0===c?f:c,e.elementContext),g=(l=void 0===l?d:l,e.altBoundary),m=(g=void 0!==g&&g,e=e.padding,e=void 0===e?0:e,e=X("number"!=typeof e?e:K(e,u)),t.elements.reference),v=t.rects.popper,y=(g=t.elements[g?l===d?p:d:l],g=ft(k(g)?g:g.contextElement||j(t.elements.popper),s,c),s=D(m),c=pt({reference:s,element:v,strategy:"absolute",placement:a}),m=lt(Object.assign({},v,c)),v=l===d?m:s,{top:g.top-v.top+e.top,bottom:v.bottom-g.bottom+e.bottom,left:g.left-v.left+e.left,right:v.right-g.right+e.right});c=t.modifiersData.offset;return l===d&&c&&(n=c[a],Object.keys(y).forEach((function(t){var e=0<=[o,i].indexOf(t)?1:-1,a=0<=[r,i].indexOf(t)?"y":"x";y[t]+=n[a]*e}))),y}var mt={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options;t=t.name;if(!e.modifiersData[t]._skip){for(var l=n.mainAxis,h=void 0===l||l,f=(l=n.altAxis,void 0===l||l),d=(l=n.fallbackPlacements,n.padding),p=n.boundary,v=n.rootBoundary,y=n.altBoundary,b=n.flipVariations,x=void 0===b||b,_=n.allowedAutoPlacements,w=(b=e.options.placement,n=N(b),l=l||(n!==b&&x?N(l=b)===s?[]:(n=rt(l),[ot(l),n,ot(n)]):[rt(b)]),[b].concat(l).reduce((function(t,n){return t.concat(N(n)===s?(r=e,i=(t=t=void 0===(t={placement:n,boundary:p,rootBoundary:v,padding:d,flipVariations:x,allowedAutoPlacements:_})?{}:t).placement,o=t.boundary,a=t.rootBoundary,c=t.padding,l=t.flipVariations,h=void 0===(t=t.allowedAutoPlacements)?m:t,f=dt(i),t=f?l?g:g.filter((function(t){return dt(t)===f})):u,y=(i=0===(i=t.filter((function(t){return 0<=h.indexOf(t)}))).length?t:i).reduce((function(t,e){return t[e]=gt(r,{placement:e,boundary:o,rootBoundary:a,padding:c})[N(e)],t}),{}),Object.keys(y).sort((function(t,e){return y[t]-y[e]}))):n);var r,i,o,a,c,l,h,f,y}),[])),S=e.rects.reference,E=e.rects.popper,M=new Map,A=!0,C=w[0],T=0;T<w.length;T++){var k=w[T],O=N(k),P=dt(k)===c,I=0<=[r,i].indexOf(O),D=I?"width":"height",L=gt(e,{placement:k,boundary:p,rootBoundary:v,altBoundary:y,padding:d});I=I?P?o:a:P?i:r,P=(S[D]>E[D]&&(I=rt(I)),rt(I)),D=[];if(h&&D.push(L[O]<=0),f&&D.push(L[I]<=0,L[P]<=0),D.every((function(t){return t}))){C=k,A=!1;break}M.set(k,D)}if(A)for(var R=x?3:1;0<R;R--)if("break"===function(t){var e=w.find((function(e){if(e=M.get(e),e)return e.slice(0,t).every((function(t){return t}))}));if(e)return C=e,"break"}(R))break;e.placement!==C&&(e.modifiersData[t]._skip=!0,e.placement=C,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function vt(t,e,n){return{top:t.top-e.height-(n=void 0===n?{x:0,y:0}:n).y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function yt(t){return[r,o,i,a].some((function(e){return 0<=t[e]}))}var bt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=(t=t.name,e.rects.reference),r=e.rects.popper,i=e.modifiersData.preventOverflow,o=gt(e,{elementContext:"reference"}),a=gt(e,{altBoundary:!0});o=vt(o,n),n=vt(a,r,i),a=yt(o),r=yt(n);e.modifiersData[t]={referenceClippingOffsets:o,popperEscapeOffsets:n,isReferenceHidden:a,hasPopperEscaped:r},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":a,"data-popper-escaped":r})}},xt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=(t=t.name,void 0===(n=n.offset)?[0,0]:n),s=(n=m.reduce((function(t,n){var s,u,c,l;return t[n]=(s=e.rects,u=i,c=N(n),l=0<=[a,r].indexOf(c)?-1:1,n=(s="function"==typeof u?u(Object.assign({},s,{placement:n})):u)[0]||0,u=(s[1]||0)*l,0<=[a,o].indexOf(c)?{x:u,y:n}:{x:n,y:u}),t}),{}),(u=n[e.placement]).x),u=u.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=s,e.modifiersData.popperOffsets.y+=u),e.modifiersData[t]=n}},_t={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state;t=t.name;e.modifiersData[t]=pt({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},wt={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e,n,s,u,l,h,f,d,p,g=t.state,m=t.options,v=(t=t.name,void 0===(v=m.mainAxis)||v),y=void 0!==(y=m.altAxis)&&y,b=m.boundary,x=m.rootBoundary,_=m.altBoundary,w=m.padding,S=void 0===(S=m.tether)||S,E=(m=void 0===(m=m.tetherOffset)?0:m,b=gt(g,{boundary:b,rootBoundary:x,padding:w,altBoundary:_}),x=N(g.placement),_=!(w=dt(g.placement)),"x"===(x=G(x))?"y":"x"),M=g.modifiersData.popperOffsets,A=g.rects.reference,C=g.rects.popper,T=(m="function"==typeof m?m(Object.assign({},g.rects,{placement:g.placement})):m,{x:0,y:0});M&&((v||y)&&(l="y"===x?"height":"width",e=M[x],n=M[x]+b[p="y"===x?r:a],s=M[x]-b[f="y"===x?i:o],h=S?-C[l]/2:0,u=(w===c?A:C)[l],w=w===c?-C[l]:-A[l],C=g.elements.arrow,C=S&&C?L(C):{width:0,height:0},p=(d=g.modifiersData["arrow#persistent"]?g.modifiersData["arrow#persistent"].padding:q())[p],d=d[f],f=Y(0,A[l],C[l]),C=_?A[l]/2-h-f-p-m:u-f-p-m,u=_?-A[l]/2+h+f+d+m:w+f+d+m,_=(p=g.elements.arrow&&U(g.elements.arrow))?"y"===x?p.clientTop||0:p.clientLeft||0:0,A=g.modifiersData.offset?g.modifiersData.offset[g.placement][x]:0,l=M[x]+C-A-_,h=M[x]+u-A,v&&(w=Y(S?W(n,l):n,e,S?V(s,h):s),M[x]=w,T[x]=w-e),y)&&(d=(f=M[E])+b["x"===x?r:a],m=f-b["x"===x?i:o],p=Y(S?W(d,l):d,f,S?V(m,h):m),M[E]=p,T[E]=p-f),g.modifiersData[t]=T)},requiresIfExists:["offset"]};function St(t,e,n){void 0===n&&(n=!1);var r=j(e),i=(t=D(t),O(e)),o={scrollLeft:0,scrollTop:0},a={x:0,y:0};return!i&&n||("body"===C(e)&&!ut(r)||(o=(i=e)!==T(i)&&O(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:at(i)),O(e)?((a=D(e)).x+=e.clientLeft,a.y+=e.clientTop):r&&(a.x=st(r))),{x:t.left+o.scrollLeft-a.x,y:t.top+o.scrollTop-a.y,width:t.width,height:t.height}}function Et(t){var e=new Map,n=new Set,r=[];return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||function t(i){n.add(i.name),[].concat(i.requires||[],i.requiresIfExists||[]).forEach((function(r){n.has(r)||(r=e.get(r))&&t(r)})),r.push(i)}(t)})),r}var Mt={placement:"bottom",modifiers:[],strategy:"absolute"};function At(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function Ct(t){t=t=void 0===t?{}:t;var e=t.defaultModifiers,n=void 0===e?[]:e,r=(e=t.defaultOptions,void 0===e?Mt:e);return function(t,e,i){void 0===i&&(i=r);var o,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},Mt,r),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},u=[],c=!1,l={state:s,setOptions:function(i){h(),s.options=Object.assign({},r,s.options,i),s.scrollParents={reference:k(t)?ct(t):t.contextElement?ct(t.contextElement):[],popper:ct(e)},i=[].concat(n,s.options.modifiers),a=i.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),i=Object.keys(a).map((function(t){return a[t]})),o=Et(i);var o,a;i=A.reduce((function(t,e){return t.concat(o.filter((function(t){return t.phase===e})))}),[]);return s.orderedModifiers=i.filter((function(t){return t.enabled})),s.orderedModifiers.forEach((function(t){var e=t.name,n=t.options;t=t.effect;"function"==typeof t&&(t=t({state:s,name:e,instance:l,options:void 0===n?{}:n}),u.push(t||function(){}))})),l.update()},forceUpdate:function(){if(!c){var t=s.elements,e=t.reference;t=t.popper;if(At(e,t)){s.rects={reference:St(e,U(t),"fixed"===s.options.strategy),popper:L(t)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(t){return s.modifiersData[t.name]=Object.assign({},t.data)}));for(var n,r,i,o=0;o<s.orderedModifiers.length;o++)!0===s.reset?(s.reset=!1,o=-1):(n=(i=s.orderedModifiers[o]).fn,r=i.options,i=i.name,"function"==typeof n&&(s=n({state:s,options:void 0===r?{}:r,name:i,instance:l})||s))}}},update:(o=function(){return new Promise((function(t){l.forceUpdate(),t(s)}))},function(){return a=a||new Promise((function(t){Promise.resolve().then((function(){a=void 0,t(o())}))}))}),destroy:function(){h(),c=!0}};return At(t,e)&&l.setOptions(i).then((function(t){!c&&i.onFirstUpdate&&i.onFirstUpdate(t)})),l;function h(){u.forEach((function(t){return t()})),u=[]}}}var Tt=Ct(),kt=Ct({defaultModifiers:[et,_t,Q,I,xt,mt,wt,Z,bt]}),Ot=Ct({defaultModifiers:[et,_t,Q,I]})},2262:function(t,e,n){"use strict";n.d(e,{Fl:function(){return kt},ZM:function(){return Et},cE:function(){return c},X3:function(){return lt},PG:function(){return ut},$y:function(){return ct},dq:function(){return pt},Xl:function(){return ft},Jd:function(){return g},WL:function(){return wt},qj:function(){return rt},OT:function(){return ot},iH:function(){return gt},lk:function(){return m},Um:function(){return it},YS:function(){return at},XI:function(){return mt},sT:function(){return l},IU:function(){return ht},Vh:function(){return Ct},BK:function(){return Mt},j:function(){return v},X$:function(){return y},oR:function(){return bt},SU:function(){return xt}});var r=n(3577);const i=new WeakMap,o=[];let a;const s=Symbol(""),u=Symbol("");function c(t,e=r.EMPTY_OBJ){(s=t)&&!0===s._isEffect&&(t=t.raw),n=t,i=e,u.id=h++,u.allowRecurse=!!i.allowRecurse,u._isEffect=!0,u.active=!0,u.raw=n,u.deps=[],u.options=i;var n,i,s=u;function u(){if(!u.active)return i.scheduler?void 0:n();if(!o.includes(u)){f(u);try{return p.push(d),d=!0,o.push(u),a=u,n()}finally{o.pop(),m(),a=o[o.length-1]}}}return e.lazy||s(),s}function l(t){t.active&&(f(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let h=0;function f(t){var e=t["deps"];if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let d=!0;const p=[];function g(){p.push(d),d=!1}function m(){var t=p.pop();d=void 0===t||t}function v(t,e,n){if(d&&void 0!==a){let e=i.get(t),r=(e||i.set(t,e=new Map),e.get(n));r||e.set(n,r=new Set),r.has(a)||(r.add(a),a.deps.push(r))}}function y(t,e,n,o,c,l){var h=i.get(t);if(h){const i=new Set,c=t=>{t&&t.forEach((t=>{t===a&&!t.allowRecurse||i.add(t)}))};if("clear"===e)h.forEach(c);else if("length"===n&&(0,r.isArray)(t))h.forEach(((t,e)=>{("length"===e||o<=e)&&c(t)}));else switch(void 0!==n&&c(h.get(n)),e){case"add":(0,r.isArray)(t)?(0,r.isIntegerKey)(n)&&c(h.get("length")):(c(h.get(s)),(0,r.isMap)(t)&&c(h.get(u)));break;case"delete":(0,r.isArray)(t)||(c(h.get(s)),(0,r.isMap)(t)&&c(h.get(u)));break;case"set":(0,r.isMap)(t)&&c(h.get(s))}i.forEach((t=>{t.options.scheduler?t.options.scheduler(t):t()}))}}const b=(0,r.makeMap)("__proto__,__v_isRef,__isVue"),x=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(r.isSymbol));e=E(),n=E(!1,!0);var _=E(!0),w=E(!0,!0);const S={};function E(t=!1,e=!1){return function(n,i,o){var a;return"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i&&o===(t?e?nt:et:e?tt:Q).get(n)?n:(a=(0,r.isArray)(n),!t&&a&&(0,r.hasOwn)(S,i)?Reflect.get(S,i,o):(o=Reflect.get(n,i,o),((0,r.isSymbol)(i)?x.has(i):b(i))||(t||v(n,0,i),e)?o:pt(o)?a&&(0,r.isIntegerKey)(i)?o:o.value:(0,r.isObject)(o)?(t?ot:rt)(o):o))}}function M(t=!1){return function(e,n,i,o){let a=e[n];var s,u;return t||(i=ht(i),a=ht(a),(0,r.isArray)(e))||!pt(a)||pt(i)?(s=(0,r.isArray)(e)&&(0,r.isIntegerKey)(n)?Number(n)<e.length:(0,r.hasOwn)(e,n),u=Reflect.set(e,n,i,o),e===ht(o)&&(s?(0,r.hasChanged)(i,a)&&y(e,"set",n,i,a):y(e,"add",n,i)),u):(a.value=i,!0)}}["includes","indexOf","lastIndexOf"].forEach((t=>{const e=Array.prototype[t];S[t]=function(...t){var n=ht(this);for(let e=0,i=this.length;e<i;e++)v(n,0,e+"");var r=e.apply(n,t);return-1===r||!1===r?e.apply(n,t.map(ht)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{const e=Array.prototype[t];S[t]=function(...t){return g(),t=e.apply(this,t),m(),t}}));const A={get:e,set:M(),deleteProperty:function(t,e){var n=(0,r.hasOwn)(t,e),i=(t[e],Reflect.deleteProperty(t,e));return i&&n&&y(t,"delete",e,void 0),i},has:function(t,e){var n=Reflect.has(t,e);return(0,r.isSymbol)(e)&&x.has(e)||v(t,0,e),n},ownKeys:function(t){return v(t,0,(0,r.isArray)(t)?"length":s),Reflect.ownKeys(t)}},C={get:_,set(t,e){return!0},deleteProperty(t,e){return!0}},T=(0,r.extend)({},A,{get:n,set:M(!0)}),k=(0,r.extend)({},C,{get:w}),O=t=>(0,r.isObject)(t)?rt(t):t,P=t=>(0,r.isObject)(t)?ot(t):t,I=t=>t,N=t=>Reflect.getPrototypeOf(t);function D(t,e,n=!1,r=!1){var i=ht(t=t.__v_raw),o=ht(e),a=(e===o||n||v(i,0,e),n||v(i,0,o),N(i))["has"];r=r?I:n?P:O;return a.call(i,e)?r(t.get(e)):a.call(i,o)?r(t.get(o)):void 0}function L(t,e=!1){var n=this.__v_raw,r=ht(n),i=ht(t);return t===i||e||v(r,0,t),e||v(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function R(t,e=!1){return t=t.__v_raw,e||v(ht(t),0,s),Reflect.get(t,"size",t)}function B(t){t=ht(t);var e=ht(this);return N(e).has.call(e,t)||(e.add(t),y(e,"add",t,t)),this}function j(t,e){e=ht(e);var n=ht(this),{has:i,get:o}=N(n);let a=i.call(n,t);return a||(t=ht(t),a=i.call(n,t)),i=o.call(n,t),n.set(t,e),a?(0,r.hasChanged)(e,i)&&y(n,"set",t,e):y(n,"add",t,e),this}function F(t){var e=ht(this),{has:n,get:r}=N(e);let i=n.call(e,t);return i||(t=ht(t),i=n.call(e,t)),r&&r.call(e,t),n=e.delete(t),i&&y(e,"delete",t,void 0),n}function z(){var t=ht(this),e=0!==t.size,n=t.clear();return e&&y(t,"clear",void 0,void 0),n}function U(t,e){return function(n,r){const i=this;var o=i.__v_raw,a=ht(o);const u=e?I:t?P:O;return t||v(a,0,s),o.forEach(((t,e)=>n.call(r,u(t),u(e),i)))}}function G(t,e,n){return function(...i){var o=this.__v_raw,a=ht(o),c=(0,r.isMap)(a);const l="entries"===t||t===Symbol.iterator&&c;c="keys"===t&&c;const h=o[t](...i),f=n?I:e?P:O;return e||v(a,0,c?u:s),{next(){var{value:t,done:e}=h.next();return e?{value:t,done:e}:{value:l?[f(t[0]),f(t[1])]:f(t),done:e}},[Symbol.iterator](){return this}}}}function V(t){return function(){return"delete"!==t&&this}}const W={get(t){return D(this,t)},get size(){return R(this)},has:L,add:B,set:j,delete:F,clear:z,forEach:U(!1,!1)},H={get(t){return D(this,t,!1,!0)},get size(){return R(this)},has:L,add:B,set:j,delete:F,clear:z,forEach:U(!1,!0)},Y={get(t){return D(this,t,!0)},get size(){return R(this,!0)},has(t){return L.call(this,t,!0)},add:V("add"),set:V("set"),delete:V("delete"),clear:V("clear"),forEach:U(!0,!1)},q={get(t){return D(this,t,!0,!0)},get size(){return R(this,!0)},has(t){return L.call(this,t,!0)},add:V("add"),set:V("set"),delete:V("delete"),clear:V("clear"),forEach:U(!0,!0)};function X(t,e){const n=e?t?q:H:t?Y:W;return(e,i,o)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get((0,r.hasOwn)(n,i)&&i in e?n:e,i,o)}["keys","values","entries",Symbol.iterator].forEach((t=>{W[t]=G(t,!1,!1),Y[t]=G(t,!0,!1),H[t]=G(t,!1,!0),q[t]=G(t,!0,!0)}));const K={get:X(!1,!1)},Z={get:X(!1,!0)},$={get:X(!0,!1)},J={get:X(!0,!0)},Q=new WeakMap,tt=new WeakMap,et=new WeakMap,nt=new WeakMap;function rt(t){return t&&t.__v_isReadonly?t:st(t,!1,A,K,Q)}function it(t){return st(t,!1,T,Z,tt)}function ot(t){return st(t,!0,C,$,et)}function at(t){return st(t,!0,k,J,nt)}function st(t,e,n,i,o){return(0,r.isObject)(t)&&(!t.__v_raw||e&&t.__v_isReactive)?o.get(t)||(0===(e=function(t){if(t.__v_skip||!Object.isExtensible(t))return 0;switch((0,r.toRawType)(t)){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(t))?t:(e=new Proxy(t,2===e?i:n),o.set(t,e),e)):t}function ut(t){return ct(t)?ut(t.__v_raw):!(!t||!t.__v_isReactive)}function ct(t){return!(!t||!t.__v_isReadonly)}function lt(t){return ut(t)||ct(t)}function ht(t){return t&&ht(t.__v_raw)||t}function ft(t){return(0,r.def)(t,"__v_skip",!0),t}const dt=t=>(0,r.isObject)(t)?rt(t):t;function pt(t){return Boolean(t&&!0===t.__v_isRef)}function gt(t){return yt(t)}function mt(t){return yt(t,!0)}class vt{constructor(t,e=!1){this._rawValue=t,this._shallow=e,this.__v_isRef=!0,this._value=e?t:dt(t)}get value(){return v(ht(this),0,"value"),this._value}set value(t){(0,r.hasChanged)(ht(t),this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:dt(t),y(ht(this),"set","value",t))}}function yt(t,e=!1){return pt(t)?t:new vt(t,e)}function bt(t){y(ht(t),"set","value",void 0)}function xt(t){return pt(t)?t.value:t}const _t={get:(t,e,n)=>xt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{var i=t[e];return pt(i)&&!pt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function wt(t){return ut(t)?t:new Proxy(t,_t)}class St{constructor(t){this.__v_isRef=!0;var{get:t,set:e}=t((()=>v(this,0,"value")),(()=>y(this,"set","value")));this._get=t,this._set=e}get value(){return this._get()}set value(t){this._set(t)}}function Et(t){return new St(t)}function Mt(t){var e=(0,r.isArray)(t)?new Array(t.length):{};for(const n in t)e[n]=Ct(t,n);return e}class At{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}function Ct(t,e){return pt(t[e])?t[e]:new At(t,e)}class Tt{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=c(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,y(ht(this),"set","value"))}}),this.__v_isReadonly=n}get value(){var t=ht(this);return t._dirty&&(t._value=this.effect(),t._dirty=!1),v(t,0,"value"),t._value}set value(t){this._setter(t)}}function kt(t){let e,n;return n=(0,r.isFunction)(t)?(e=t,r.NOOP):(e=t.get,t.set),new Tt(e,n,(0,r.isFunction)(t)||!t.set)}},66252:function(t,e,n){"use strict";n.d(e,{ZM:function(){return r.ZM},X3:function(){return r.X3},PG:function(){return r.PG},$y:function(){return r.$y},dq:function(){return r.dq},Xl:function(){return r.Xl},WL:function(){return r.WL},qj:function(){return r.qj},OT:function(){return r.OT},iH:function(){return r.iH},Um:function(){return r.Um},YS:function(){return r.YS},XI:function(){return r.XI},IU:function(){return r.IU},Vh:function(){return r.Vh},BK:function(){return r.BK},oR:function(){return r.oR},SU:function(){return r.SU},_A:function(){return i.camelize},kC:function(){return i.capitalize},zw:function(){return i.toDisplayString},hR:function(){return i.toHandlerKey},P$:function(){return Et},sv:function(){return Me},HY:function(){return Se},Ob:function(){return It},qG:function(){return Ae},n4:function(){return $},lR:function(){return pe},xv:function(){return Ee},$d:function(){return u},KU:function(){return s},Ho:function(){return Ve},Fl:function(){return Pn},j4:function(){return De},ry:function(){return Ye},Eo:function(){return ae},Us:function(){return oe},Nv:function(){return Un},uE:function(){return He},Uk:function(){return We},Wm:function(){return Ue},RC:function(){return te},aZ:function(){return Qt},zX:function(){return Nn},MW:function(){return In},mW:function(){return I},FN:function(){return gn},Q6:function(){return Ot},h:function(){return Ln},S3:function(){return c},Mr:function(){return jn},f3:function(){return Je},of:function(){return _n},lA:function(){return Le},dG:function(){return Ze},Y3:function(){return S},dl:function(){return Dt},wF:function(){return ct},Jd:function(){return dt},Xn:function(){return ht},se:function(){return Lt},d1:function(){return vt},bv:function(){return lt},bT:function(){return mt},Yq:function(){return gt},Ah:function(){return pt},ic:function(){return ft},wg:function(){return ke},Cn:function(){return G},JJ:function(){return $e},dD:function(){return U},qb:function(){return C},Y1:function(){return wn},Ko:function(){return Fn},WI:function(){return B},up:function(){return ve},Q2:function(){return xe},LL:function(){return be},U2:function(){return At},qZ:function(){return Ne},ec:function(){return N},nK:function(){return kt},Uc:function(){return Rn},G:function(){return Vn},mx:function(){return zn},C3:function(){return Be},qp:function(){return Dn},Zq:function(){return Bn},Y8:function(){return St},i8:function(){return Gn},ZK:function(){return a},YP:function(){return xt},m0:function(){return yt},w5:function(){return W},wy:function(){return Ht},HX:function(){return V}});var r=n(2262),i=n(3577);const o=[];function a(t,...e){(0,r.Jd)();const n=o.length?o[o.length-1].component:null;var a=n&&n.appContext.config.warnHandler,u=function(){let t=o[o.length-1];if(!t)return[];for(var e=[];t;){var n=e[0];n=(n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0}),t.component&&t.component.parent);t=n&&n.vnode}return e}();a?s(a,n,11,[t+e.join(""),n&&n.proxy,u.map((({vnode:t})=>`at <${kn(n,t.type)}>`)).join("\n"),u]):(a=["[Vue warn]: "+t,...e],u.length&&a.push("\n",...function(t){const e=[];return t.forEach(((t,n)=>{var o;e.push(...0===n?[]:["\n"],...(({vnode:n,recurseCount:t}=[t][0]),t=0<t?`... (${t} recursive calls)`:"",o=!!n.component&&null==n.component.parent,o=" at <"+kn(n.component,n.type,o),t=">"+t,n.props?[o,...function(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach((n=>{e.push(...function t(e,n,o){return(0,i.isString)(n)?(n=JSON.stringify(n),o?n:[e+"="+n]):"number"==typeof n||"boolean"==typeof n||null==n?o?n:[e+"="+n]:(0,r.dq)(n)?(n=t(e,(0,r.IU)(n.value),!0),o?n:[e+"=Ref<",n,">"]):(0,i.isFunction)(n)?[e+"=fn"+(n.name?`<${n.name}>`:"")]:(n=(0,r.IU)(n),o?n:[e+"=",n])}(n,t[n]))})),3<n.length&&e.push(" ..."),e}(n.props),t]:[o+t]))})),e}(u))),(0,r.lk)()}function s(t,e,n,r){let i;try{i=r?t(...r):t()}catch(t){c(t,e,n)}return i}function u(t,e,n,r){var o;if((0,i.isFunction)(t))return(o=s(t,e,n,r))&&(0,i.isPromise)(o)&&o.catch((t=>{c(t,e,n)})),o;var a=[];for(let i=0;i<t.length;i++)a.push(u(t[i],e,n,r));return a}function c(t,e,n,r=0){if(e&&e.vnode,e){let r=e.parent;for(var i=e.proxy,o=n;r;){var a=r.ec;if(a)for(let e=0;e<a.length;e++)if(!1===a[e](t,i,o))return;r=r.parent}if(n=e.appContext.config.errorHandler,n)return void s(n,null,10,[t,i,o])}}let l=!1,h=!1;const f=[];let d=0;const p=[];let g=null,m=0;const v=[];let y=null,b=0;const x=Promise.resolve();let _=null,w=null;function S(t){var e=_||x;return t?e.then(this?t.bind(this):t):e}function E(t){var e;f.length&&f.includes(t,l&&t.allowRecurse?d+1:d)||t===w||(-1<(e=function(t){let e=d+1,n=f.length;for(var r=O(t);e<n;){var i=e+n>>>1;O(f[i])<r?e=1+i:n=i}return e}(t))?f.splice(e,0,t):f.push(t),M())}function M(){l||h||(h=!0,_=x.then(P))}function A(t,e,n,r){(0,i.isArray)(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),M()}function C(t){A(t,y,v,b)}function T(t,e=null){if(p.length){for(w=e,g=[...new Set(p)],p.length=0,m=0;m<g.length;m++)g[m]();g=null,m=0,w=null,T(t,e)}}function k(){if(v.length){var t=[...new Set(v)];if(v.length=0,y)y.push(...t);else{for((y=t).sort(((t,e)=>O(t)-O(e))),b=0;b<y.length;b++)y[b]();y=null,b=0}}}const O=t=>null==t.id?1/0:t.id;function P(t){h=!1,l=!0,T(t),f.sort(((t,e)=>O(t)-O(e)));try{for(d=0;d<f.length;d++){var e=f[d];e&&s(e,null,14)}}finally{d=0,f.length=0,k(),l=!1,_=null,(f.length||v.length)&&P(t)}}let I;function N(t){I=t}function D(t,e){return t&&(0,i.isOn)(e)&&(e=e.slice(2).replace(/Once$/,""),(0,i.hasOwn)(t,e[0].toLowerCase()+e.slice(1))||(0,i.hasOwn)(t,(0,i.hyphenate)(e))||(0,i.hasOwn)(t,e))}new Set,new Map;let L=0;const R=t=>L+=t;function B(t,e,n={},r,i){var o=t[e];L++,ke(),o=o&&function t(e){return e.some((e=>!Le(e)||e.type!==Me&&!(e.type===Se&&!t(e.children))))?e:null}(o(n)),n=De(Se,{key:n.key||"_"+e},o||(r?r():[]),o&&1===t._?64:-2);return!i&&n.scopeId&&(n.slotScopeIds=[n.scopeId+"-s"]),L--,n}let j=null,F=null;function z(t){var e=j;return j=t,F=t&&t.type.__scopeId||null,e}function U(t){F=t}function G(){F=null}const V=t=>W;function W(t,e=j){var n;return e?((n=(...n)=>{L||ke(!0);var r=z(e);n=t(...n);return z(r),L||Oe(),n})._c=!0,n):t}function H(t){const{type:e,vnode:n,proxy:r,withProxy:o,props:a,propsOptions:[s],slots:u,attrs:l,emit:h,render:f,renderCache:d,data:p,setupState:g,ctx:m}=t;let v;var y=z(t);try{let t;if(4&n.shapeFlag){var b=o||r;v=qe(f.call(b,b,d,a,g,p,m)),t=l}else{const n=e;v=qe(1<n.length?n(a,{attrs:l,slots:u,emit:h}):n(a,null)),t=e.props?l:q(l)}let c=v;var x,_;!1!==e.inheritAttrs&&t&&(x=Object.keys(t),_=c["shapeFlag"],x.length)&&(1&_||6&_)&&(s&&x.some(i.isModelListener)&&(t=X(t,s)),c=Ve(c,t)),n.dirs&&(c.dirs=c.dirs?c.dirs.concat(n.dirs):n.dirs),n.transition&&(c.transition=n.transition),v=c}catch(y){Ce.length=0,c(y,t,1),v=Ue(Me)}return z(y),v}function Y(t){let e;for(let r=0;r<t.length;r++){var n=t[r];if(!Le(n))return;if(n.type!==Me||"v-if"===n.children){if(e)return;e=n}}return e}const q=t=>{let e;for(const n in t)"class"!==n&&"style"!==n&&!(0,i.isOn)(n)||((e=e||{})[n]=t[n]);return e},X=(t,e)=>{var n={};for(const r in t)(0,i.isModelListener)(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function K(t,e,n){var r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){var i=r[o];if(e[i]!==t[i]&&!D(n,i))return!0}return!1}function Z({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const $={name:"Suspense",__isSuspense:!0,process(t,e,n,r,o,a,s,u,c,l){if(null!=t){var[t,h,f,d,p,g,m,v,{p:y,um:b,o:{createElement:x}}]=[t,e,n,r,o,s,u,c,l];const a=h.suspense=t.suspense,_=((a.vnode=h).el=t.el,h.ssContent),w=h.ssFallback,{activeBranch:S,pendingBranch:E,isInFallback:M,isHydrating:A}=a;if(E)Re(a.pendingBranch=_,E)?(y(E,_,a.hiddenContainer,null,p,a,g,m,v),a.deps<=0?a.resolve():M&&(y(S,w,f,d,p,null,g,m,v),et(a,w))):(a.pendingId++,A?(a.isHydrating=!1,a.activeBranch=E):b(E,p,a),a.deps=0,a.effects.length=0,a.hiddenContainer=x("div"),M?(y(null,_,a.hiddenContainer,null,p,a,g,m,v),a.deps<=0?a.resolve():(y(S,w,f,d,p,null,g,m,v),et(a,w))):S&&Re(_,S)?(y(S,_,f,d,p,a,g,m,v),a.resolve(!0)):(y(null,_,a.hiddenContainer,null,p,a,g,m,v),a.deps<=0&&a.resolve()));else if(S&&Re(_,S))y(S,_,f,d,p,a,g,m,v),et(a,_);else if(t=h.props&&h.props.onPending,(0,i.isFunction)(t)&&t(),a.pendingBranch=_,a.pendingId++,y(null,_,a.hiddenContainer,null,p,a,g,m,v),a.deps<=0)a.resolve();else{const{timeout:t,pendingId:e}=a;0<t?setTimeout((()=>{a.pendingId===e&&a.fallback(w)}),t):0===t&&a.fallback(w)}}else{var b=e,x=n,f=r,d=o,y=(h=a,t=s,u),p=c,g=l,{p:m,o:{createElement:v}}=g,v=v("div"),h=b.suspense=J(b,h,d,x,v,f,t,y,p,g);m(null,h.pendingBranch=b.ssContent,v,null,d,h,t,y),0<h.deps?(m(null,b.ssFallback,x,f,d,null,t,y),et(h,b.ssFallback)):h.resolve()}},hydrate:function(t,e,n,r,i,o,a,s,u){return r=e.suspense=J(e,r,n,t.parentNode,document.createElement("div"),null,i,o,a,s,!0),i=u(t,r.pendingBranch=e.ssContent,n,r,o,a),0===r.deps&&r.resolve(),i},create:J};function J(t,e,n,r,o,a,s,u,l,h,f=!1){const{p:d,m:p,um:g,n:m,o:{parentNode:v,remove:y}}=h;h=(0,i.toNumber)(t.props&&t.props.timeout);const b={vnode:t,parent:e,parentComponent:n,isSVG:s,container:r,hiddenContainer:o,anchor:a,deps:0,pendingId:0,timeout:"number"==typeof h?h:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:f,isUnmounted:!1,effects:[],resolve(t=!1){const{vnode:e,activeBranch:n,pendingBranch:r,pendingId:o,effects:a,parentComponent:s,container:u}=b;if(b.isHydrating)b.isHydrating=!1;else if(!t){t=n&&r.transition&&"out-in"===r.transition.mode,t&&(n.transition.afterLeave=()=>{o===b.pendingId&&p(r,u,e,0)});let e=b["anchor"];n&&(e=m(n),g(n,s,b,!0)),t||p(r,u,e,0)}et(b,r),b.pendingBranch=null,b.isInFallback=!1;let c=b.parent,l=!1;for(;c;){if(c.pendingBranch){c.effects.push(...a),l=!0;break}c=c.parent}l||C(a),b.effects=[],t=e.props&&e.props.onResolve,(0,i.isFunction)(t)&&t()},fallback(t){if(b.pendingBranch){const{vnode:r,activeBranch:o,parentComponent:a,container:s,isSVG:c}=b;var e=r.props&&r.props.onFallback;(0,i.isFunction)(e)&&e();const h=m(o);e=()=>{b.isInFallback&&(d(null,t,s,h,a,null,c,u,l),et(b,t))};var n=t.transition&&"out-in"===t.transition.mode;n&&(o.transition.afterLeave=e),g(o,a,null,!0),b.isInFallback=!0,n||e()}},move(t,e,n){b.activeBranch&&p(b.activeBranch,t,e,n),b.container=t},next(){return b.activeBranch&&m(b.activeBranch)},registerDep(t,e){const n=!!b.pendingBranch,r=(n&&b.deps++,t.vnode.el);t.asyncDep.catch((e=>{c(e,t,0)})).then((i=>{var o;t.isUnmounted||b.isUnmounted||b.pendingId!==t.suspenseId||(t.asyncResolved=!0,o=t["vnode"],xn(t,i),r&&(o.el=r),i=!r&&t.subTree.el,e(t,o,v(r||t.subTree.el),r?null:m(t.subTree),b,s,l),i&&y(i),Z(t,o.el),n&&0==--b.deps&&b.resolve())}))},unmount(t,e){b.isUnmounted=!0,b.activeBranch&&g(b.activeBranch,n,t,e),b.pendingBranch&&g(b.pendingBranch,n,t,e)}};return b}function Q(t){return(0,i.isFunction)(t)&&(t=t()),qe(t=(0,i.isArray)(t)?Y(t):t)}function tt(t,e){e&&e.pendingBranch?(0,i.isArray)(t)?e.effects.push(...t):e.effects.push(t):C(t)}function et(t,e){t.activeBranch=e;var{vnode:t,parentComponent:n}=t;e=t.el=e.el;n&&n.subTree===t&&(n.vnode.el=e,Z(n,e))}function nt(t,e,n,o){var[a,s]=t.propsOptions;if(e)for(const r in e){var u=e[r];if(!(0,i.isReservedProp)(r)){let e;a&&(0,i.hasOwn)(a,e=(0,i.camelize)(r))?n[e]=u:D(t.emitsOptions,r)||(o[r]=u)}}if(s){var c=(0,r.IU)(n);for(let e=0;e<s.length;e++){var l=s[e];n[l]=rt(a,c,l,c[l],t)}}}function rt(t,e,n,r,o){var a,s,u;t=t[n];return null!=t&&((a=(0,i.hasOwn)(t,"default"))&&void 0===r&&(s=t.default,t.type!==Function&&(0,i.isFunction)(s)?(u=o["propsDefaults"],n in u?r=u[n]:(mn(o),r=u[n]=s(e),mn(null))):r=s),t[0])&&((0,i.hasOwn)(e,n)||a?!t[1]||""!==r&&r!==(0,i.hyphenate)(n)||(r=!0):r=!1),r}function it(t){return"$"!==t[0]}function ot(t){return t=t&&t.toString().match(/^\s*function (\w+)/),t?t[1]:""}function at(t,e){return ot(t)===ot(e)}function st(t,e){return(0,i.isArray)(e)?e.findIndex((e=>at(e,t))):(0,i.isFunction)(e)&&at(e,t)?0:-1}function ut(t,e,n=pn,i=!1){var o,a;if(n)return o=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...i)=>{if(!n.isUnmounted)return(0,r.Jd)(),mn(n),i=u(e,n,t,i),mn(null),(0,r.lk)(),i}),i?o.unshift(a):o.push(a),a}e=t=>(e,n=pn)=>!bn&&ut(t,e,n);const ct=e("bm"),lt=e("m"),ht=e("bu"),ft=e("u"),dt=e("bum"),pt=e("um"),gt=e("rtg"),mt=e("rtc"),vt=(t,e=pn)=>{ut("ec",t,e)};function yt(t,e){return _t(t,null,e)}const bt={};function xt(t,e,n){return _t(t,e,n)}function _t(t,e,{immediate:n,deep:o,flush:a,onTrack:c,onTrigger:l}=i.EMPTY_OBJ,h=pn){let f,d=!1;if((0,r.dq)(t)?(f=()=>t.value,d=!!t._shallow):(0,r.PG)(t)?(f=()=>t,o=!0):f=(0,i.isArray)(t)?()=>t.map((t=>(0,r.dq)(t)?t.value:(0,r.PG)(t)?wt(t):(0,i.isFunction)(t)?s(t,h,2,[h&&h.proxy]):void 0)):(0,i.isFunction)(t)?e?()=>s(t,h,2,[h&&h.proxy]):()=>{if(!h||!h.isUnmounted)return v&&v(),u(t,h,3,[y])}:i.NOOP,e&&o){const t=f;f=()=>wt(t())}let v,y=t=>{v=w.options.onStop=()=>{s(t,h,4)}},b=(0,i.isArray)(t)?[]:bt;const x=()=>{var t;w.active&&(e?(t=w(),(o||d||(0,i.hasChanged)(t,b))&&(v&&v(),u(e,h,3,[t,b===bt?void 0:b,y]),b=t)):w())};let _;x.allowRecurse=!!e,_="sync"===a?x:"post"===a?()=>re(x,h&&h.suspense):()=>{!h||h.isMounted?A(x,g,p,m):x()};const w=(0,r.cE)(f,{lazy:!0,onTrack:c,onTrigger:l,scheduler:_});return Mn(w,h),e?n?x():b=w():"post"===a?re(w,h&&h.suspense):w(),()=>{(0,r.sT)(w),h&&(0,i.remove)(h.effects,w)}}function wt(t,e=new Set){if((0,i.isObject)(t)&&!e.has(t))if(e.add(t),(0,r.dq)(t))wt(t.value,e);else if((0,i.isArray)(t))for(let n=0;n<t.length;n++)wt(t[n],e);else if((0,i.isSet)(t)||(0,i.isMap)(t))t.forEach((t=>{wt(t,e)}));else for(const n in t)wt(t[n],e);return t}function St(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return lt((()=>{t.isMounted=!0})),dt((()=>{t.isUnmounting=!0})),t}n=[Function,Array];const Et={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:n,onEnter:n,onAfterEnter:n,onEnterCancelled:n,onBeforeLeave:n,onLeave:n,onAfterLeave:n,onLeaveCancelled:n,onBeforeAppear:n,onAppear:n,onAfterAppear:n,onAppearCancelled:n},setup(t,{slots:e}){const n=gn(),i=St();let o;return()=>{var a=e.default&&Ot(e.default(),!0);if(a&&a.length){var s=(0,r.IU)(t),u=s["mode"];a=a[0];if(i.isLeaving)return Ct(a);var c=Tt(a);if(!c)return Ct(a);const e=At(c,s,i,n);kt(c,e);var l=n.subTree;const h=l&&Tt(l);let f=!1;l=c.type["getTransitionKey"];if(l&&(l=l(),void 0===o?o=l:l!==o&&(o=l,f=!0)),h&&h.type!==Me&&(!Re(c,h)||f)){if(l=At(h,s,i,n),kt(h,l),"out-in"===u)return i.isLeaving=!0,l.afterLeave=()=>{i.isLeaving=!1,n.update()},Ct(a);"in-out"===u&&c.type!==Me&&(l.delayLeave=(t,n,r)=>{Mt(i,h)[String(h.key)]=h,t._leaveCb=()=>{n(),t._leaveCb=void 0,delete e.delayedLeave},e.delayedLeave=r})}return a}}}};function Mt(t,e){t=t.leavingVNodes;let n=t.get(e.type);return n||(n=Object.create(null),t.set(e.type,n)),n}function At(t,e,n,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:s,onEnter:c,onAfterEnter:l,onEnterCancelled:h,onBeforeLeave:f,onLeave:d,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:m,onAppear:v,onAfterAppear:y,onAppearCancelled:b}=e,x=String(t.key),_=Mt(n,t),w=(t,e)=>{t&&u(t,r,9,e)},S={mode:o,persisted:a,beforeEnter(e){let r=s;if(!n.isMounted){if(!i)return;r=m||s}e._leaveCb&&e._leaveCb(!0);var o=_[x];o&&Re(t,o)&&o.el._leaveCb&&o.el._leaveCb(),w(r,[e])},enter(t){let e=c,r=l,o=h;if(!n.isMounted){if(!i)return;e=v||c,r=y||l,o=b||h}let a=!1;var s=t._enterCb=e=>{a||(a=!0,w(e?o:r,[t]),S.delayedLeave&&S.delayedLeave(),t._enterCb=void 0)};(!e||(e(t,s),e.length<=1))&&s()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();w(f,[e]);let o=!1;var a=e._leaveCb=n=>{o||(o=!0,r(),w(n?g:p,[e]),e._leaveCb=void 0,_[i]===t&&delete _[i])};_[i]=t,(!d||(d(e,a),d.length<=1))&&a()},clone(t){return At(t,e,n,r)}};return S}function Ct(t){if(Pt(t))return(t=Ve(t)).children=null,t}function Tt(t){return Pt(t)?t.children?t.children[0]:void 0:t}function kt(t,e){6&t.shapeFlag&&t.component?kt(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ot(t,e=!1){let n=[],r=0;for(let o=0;o<t.length;o++){var i=t[o];i.type===Se?(128&i.patchFlag&&r++,n=n.concat(Ot(i.children,e))):!e&&i.type===Me||n.push(i)}if(1<r)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}const Pt=t=>t.type.__isKeepAlive,It={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=gn();var r=n.ctx;if(!r.renderer)return e.default;const o=new Map,a=new Set;let s=null;const u=n.suspense,{p:c,m:l,um:h,o:{createElement:f}}=r["renderer"],d=f("div");function p(t){Bt(t),h(t,n,u)}function g(t){o.forEach(((e,n)=>{e=Tn(e.type),!e||t&&t(e)||m(n)}))}function m(t){var e=o.get(t);s&&e.type===s.type?s&&Bt(s):p(e),o.delete(t),a.delete(t)}r.activate=(t,e,n,r,o)=>{const a=t.component;l(t,e,n,0,u),c(a.vnode,t,e,n,a,u,r,t.slotScopeIds,o),re((()=>{a.isDeactivated=!1,a.a&&(0,i.invokeArrayFns)(a.a);var e=t.props&&t.props.onVnodeMounted;e&&ue(e,a.parent,t)}),u)},r.deactivate=t=>{const e=t.component;l(t,d,null,1,u),re((()=>{e.da&&(0,i.invokeArrayFns)(e.da);var n=t.props&&t.props.onVnodeUnmounted;n&&ue(n,e.parent,t),e.isDeactivated=!0}),u)},_t((()=>[t.include,t.exclude]),(([t,e])=>{t&&g((e=>Nt(t,e))),e&&g((t=>!Nt(e,t)))}),{flush:"post",deep:!0});let v=null;return r=()=>{null!=v&&o.set(v,jt(n.subTree))},lt(r),ft(r),dt((()=>{o.forEach((t=>{var{subTree:e,suspense:r}=n,e=jt(e);t.type===e.type?(Bt(e),(e=e.component.da)&&re(e,r)):p(t)}))})),()=>{if(v=null,!e.default)return null;var n=e.default(),r=n[0];if(1<n.length)return s=null,n;if(Le(r)&&(4&r.shapeFlag||128&r.shapeFlag)){let e=jt(r);n=e.type;var i=Tn(n),{include:u,exclude:c,max:l}=t;u&&(!i||!Nt(u,i))||c&&i&&Nt(c,i)||(u=null==e.key?n:e.key,c=o.get(u),e.el&&(e=Ve(e),128&r.shapeFlag)&&(r.ssContent=e),v=u,c?(e.el=c.el,e.component=c.component,e.transition&&kt(e,e.transition),e.shapeFlag|=512,a.delete(u),a.add(u)):(a.add(u),l&&a.size>parseInt(l,10)&&m(a.values().next().value)),e.shapeFlag|=256),s=e}else s=null;return r}}};function Nt(t,e){return(0,i.isArray)(t)?t.some((t=>Nt(t,e))):(0,i.isString)(t)?-1<t.split(",").indexOf(e):!!t.test&&t.test(e)}function Dt(t,e){Rt(t,"a",e)}function Lt(t,e){Rt(t,"da",e)}function Rt(t,e,n=pn){var r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(ut(e,r,n),n){let t=n.parent;for(;t&&t.parent;)Pt(t.parent.vnode)&&function(t,e,n,r){const o=ut(e,t,r,!0);pt((()=>{(0,i.remove)(r[e],o)}),n)}(r,e,n,t),t=t.parent}}function Bt(t){let e=t.shapeFlag;256&e&&(e-=256),512&e&&(e-=512),t.shapeFlag=e}function jt(t){return 128&t.shapeFlag?t.ssContent:t}const Ft=t=>"_"===t[0]||"$stable"===t,zt=t=>(0,i.isArray)(t)?t.map(qe):[qe(t)],Ut=(t,e)=>{var n=t._ctx;for(const o in t)if(!Ft(o)){var r=t[o];if((0,i.isFunction)(r))e[o]=((t,e)=>W((e=>zt(t(e))),e))(r,n);else if(null!=r){const t=zt(r);e[o]=()=>t}}},Gt=(t,e)=>{const n=zt(e);t.slots.default=()=>n},Vt=(t,e)=>{var n;32&t.vnode.shapeFlag?(n=e._)?(t.slots=e,(0,i.def)(e,"_",n)):Ut(e,t.slots={}):(t.slots={},e&&Gt(t,e)),(0,i.def)(t.slots,je,1)},Wt=(t,e,n)=>{var{vnode:r,slots:o}=t;let a=!0,s=i.EMPTY_OBJ;if(32&r.shapeFlag?((r=e._)?n&&1===r?a=!1:((0,i.extend)(o,e),n||1!==r||delete o._):(a=!e.$stable,Ut(e,o)),s=e):e&&(Gt(t,e),s={default:1}),a)for(const i in o)Ft(i)||i in s||delete o[i]};function Ht(t,e){var n=j;if(null!==n){var r=n.proxy,o=t.dirs||(t.dirs=[]);for(let t=0;t<e.length;t++){let[n,a,s,u=i.EMPTY_OBJ]=e[t];(0,i.isFunction)(n)&&(n={mounted:n,updated:n}),o.push({dir:n,instance:r,value:a,oldValue:void 0,arg:s,modifiers:u})}}return t}function Yt(t,e,n,r){var i=t.dirs,o=e&&e.dirs;for(let c=0;c<i.length;c++){var a=i[c],s=(o&&(a.oldValue=o[c].value),a.dir[r]);s&&u(s,n,8,[t.el,a,t,e])}}function qt(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},isCustomElement:i.NO,errorHandler:void 0,warnHandler:void 0},mixins:[],components:{},directives:{},provides:Object.create(null)}}let Xt=0,Kt=!1;const Zt=t=>/svg/.test(t.namespaceURI)&&"foreignObject"!==t.tagName,$t=t=>8===t.nodeType;function Jt(t){const{mt:e,p:n,o:{patchProp:r,nextSibling:o,parentNode:a,remove:s,insert:u,createComment:c}}=t,l=(n,r,i,s,u,c=!1)=>{const m=$t(n)&&"["===n.data;var v=()=>p(n,r,i,s,u,m),{type:y,ref:b,shapeFlag:x}=r,_=n.nodeType;r.el=n;let w=null;switch(y){case Ee:w=3!==_?v():(n.data!==r.children&&(Kt=!0,n.data=r.children),o(n));break;case Me:w=8!==_||m?v():o(n);break;case Ae:if(1===_){w=n;var S=!r.children.length;for(let t=0;t<r.staticCount;t++)S&&(r.children+=w.outerHTML),t===r.staticCount-1&&(r.anchor=w),w=o(w);return w}w=v();break;case Se:w=m?d(n,r,i,s,u,c):v();break;default:if(1&x)w=1!==_||r.type.toLowerCase()!==n.tagName.toLowerCase()?v():h(n,r,i,s,u,c);else if(6&x){r.slotScopeIds=u;const t=a(n);var E=()=>{e(r,t,null,i,s,Zt(t),c)},M=r.type.__asyncLoader;M?M().then(E):E(),w=(m?g:o)(n)}else 64&x?w=8!==_?v():r.type.hydrate(n,r,i,s,u,c,t,f):128&x&&(w=r.type.hydrate(n,r,i,s,Zt(a(n)),u,c,t,l))}return null!=b&&ie(b,null,s,r),w},h=(t,e,n,o,a,u)=>{u=u||!!e.dynamicChildren;const{props:c,patchFlag:l,shapeFlag:h,dirs:d}=e;if(-1!==l){if(d&&Yt(e,null,n,"created"),c)if(!u||16&l||32&l)for(const e in c)!(0,i.isReservedProp)(e)&&(0,i.isOn)(e)&&r(t,e,null,c[e]);else c.onClick&&r(t,"onClick",null,c.onClick);let g;if((g=c&&c.onVnodeBeforeMount)&&ue(g,n,e),d&&Yt(e,null,n,"beforeMount"),((g=c&&c.onVnodeMounted)||d)&&tt((()=>{g&&ue(g,n,e),d&&Yt(e,null,n,"mounted")}),o),16&h&&(!c||!c.innerHTML&&!c.textContent)){let r=f(t.firstChild,e,t,n,o,a,u);for(;r;){Kt=!0;var p=r;r=r.nextSibling,s(p)}}else 8&h&&t.textContent!==e.children&&(Kt=!0,t.textContent=e.children)}return t.nextSibling},f=(t,e,r,i,o,a,s)=>{s=s||!!e.dynamicChildren;var u=e.children,c=u.length;for(let f=0;f<c;f++){var h=s?u[f]:u[f]=qe(u[f]);t?t=l(t,h,i,o,a,s):h.type===Ee&&!h.children||(Kt=!0,n(null,h,r,null,i,o,Zt(r),a))}return t},d=(t,e,n,r,i,s)=>{var l=e["slotScopeIds"];l&&(i=i?i.concat(l):l),l=a(t),t=f(o(t),e,l,n,r,i,s);return t&&$t(t)&&"]"===t.data?o(e.anchor=t):(Kt=!0,u(e.anchor=c("]"),l,t),t)},p=(t,e,r,i,u,c)=>{if(Kt=!0,e.el=null,c)for(var l=g(t);;){const e=o(t);if(!e||e===l)break;s(e)}const h=o(t);return c=a(t),s(t),n(null,e,c,h,r,i,Zt(c),u),h},g=t=>{let e=0;for(;t;)if((t=o(t))&&$t(t)&&("["===t.data&&e++,"]"===t.data)){if(0===e)return o(t);e--}return t};return[(t,e)=>{Kt=!1,l(e.firstChild,t,null,null,null),k()},l]}function Qt(t){return(0,i.isFunction)(t)?{setup:t,name:t.name}:t}function te(t){const{loader:e,loadingComponent:n,errorComponent:o,delay:a=200,timeout:s,suspensible:u=!0,onError:l}=t=(0,i.isFunction)(t)?{loader:t}:t;let h,f=null,d=0;const p=()=>{let t;return f||(t=f=e().catch((t=>{if(t=t instanceof Error?t:new Error(String(t)),l)return new Promise(((e,n)=>{l(t,(()=>e((d++,f=null,p()))),(()=>n(t)),d+1)}));throw t})).then((e=>t!==f&&f?f:(e&&(e.__esModule||"Module"===e[Symbol.toStringTag])&&(e=e.default),h=e))))};return Qt({__asyncLoader:p,name:"AsyncComponentWrapper",setup(){const t=pn;if(h)return()=>ee(h,t);const e=e=>{f=null,c(e,t,13,!o)};if(u&&t.suspense)return p().then((e=>()=>ee(e,t))).catch((t=>(e(t),()=>o?Ue(o,{error:t}):null)));const i=(0,r.iH)(!1),l=(0,r.iH)(),d=(0,r.iH)(!!a);return a&&setTimeout((()=>{d.value=!1}),a),null!=s&&setTimeout((()=>{var t;i.value||l.value||(t=new Error(`Async component timed out after ${s}ms.`),e(t),l.value=t)}),s),p().then((()=>{i.value=!0})).catch((t=>{e(t),l.value=t})),()=>i.value&&h?ee(h,t):l.value&&o?Ue(o,{error:l.value}):n&&!d.value?Ue(n):void 0}})}function ee(t,{vnode:{ref:e,props:n,children:r}}){return t=Ue(t,n,r),t.ref=e,t}const ne={scheduler:E,allowRecurse:!0},re=tt,ie=(t,e,n,o)=>{if((0,i.isArray)(t))t.forEach(((t,r)=>ie(t,e&&((0,i.isArray)(e)?e[r]:e),n,o)));else{let a;if(o){if(o.type.__asyncLoader)return;a=4&o.shapeFlag?o.component.exposed||o.component.proxy:o.el}else a=null;const{i:u,r:c}=t;t=e&&e.r;const l=u.refs===i.EMPTY_OBJ?u.refs={}:u.refs,h=u.setupState;null!=t&&t!==c&&((0,i.isString)(t)?(l[t]=null,i.hasOwn)(h,t)&&(h[t]=null):(0,r.dq)(t)&&(t.value=null)),(0,i.isString)(c)?(t=()=>{l[c]=a,(0,i.hasOwn)(h,c)&&(h[c]=a)},a?(t.id=-1,re(t,n)):t()):(0,r.dq)(c)?(t=()=>{c.value=a},a?(t.id=-1,re(t,n)):t()):(0,i.isFunction)(c)&&s(c,u,12,[a,l])}};function oe(t){return se(t)}function ae(t){return se(t,Jt)}function se(t,e){const{insert:n,remove:o,patchProp:a,forcePatchProp:l,createElement:h,createText:p,createComment:g,setText:m,setElementText:v,parentNode:y,nextSibling:b,setScopeId:x=i.NOOP,cloneNode:_,insertStaticContent:w}=t,S=(t,e,r,i=null,o=null,a=null,s=!1,u=null,c=!1)=>{t&&!Re(t,e)&&(i=q(t),G(t,o,a,!0),t=null),-2===e.patchFlag&&(c=!1,e.dynamicChildren=null);var{type:l,ref:h,shapeFlag:f}=e;switch(l){case Ee:var d=t,g=e,v=r,y=i;if(null==d)n(g.el=p(g.children),v,y);else{const t=g.el=d.el;g.children!==d.children&&m(t,g.children)}break;case Me:E(t,e,r,i);break;case Ae:null==t&&(v=e,y=r,d=i,g=s,[v.el,v.anchor]=w(v.children,y,d,g));break;case Se:{var b=t,x=e,_=r,S=i,M=o,C=a,T=s,k=u,N=c;const l=x.el=b?b.el:p(""),h=x.anchor=b?b.anchor:p("");let{patchFlag:f,dynamicChildren:d,slotScopeIds:g}=x;f>0&&(N=!0),g&&(k=k?k.concat(g):g),null==b?(n(l,_,S),n(h,_,S),O(x.children,_,h,M,C,T,k,N)):f>0&&64&f&&d&&b.dynamicChildren?(I(b.dynamicChildren,d,_,M,C,T,k),(null!=x.key||M&&x===M.subTree)&&ce(b,x,!0)):F(b,x,_,h,M,C,T,k,N)}break;default:if(1&f)S=t,b=e,x=r,_=i,M=o,C=a,T=s,k=u,N=c,T=T||"svg"===b.type,null==S?A(b,x,_,M,C,T,k,N):P(S,b,M,C,T,k,N);else if(6&f){var D=t,B=e,j=r,z=i,U=o,V=a,W=s,H=u,Y=c;B.slotScopeIds=H,null==D?512&B.shapeFlag?U.ctx.activate(B,j,z,W,Y):L(B,j,z,U,V,W,Y):R(D,B,Y)}else(64&f||128&f)&&l.process(t,e,r,i,o,a,s,u,c,Q)}null!=h&&o&&ie(h,t&&t.ref,a,e)},E=(t,e,r,i)=>{null==t?n(e.el=g(e.children||""),r,i):e.el=t.el},M=({el:t,anchor:e})=>{for(var n;t&&t!==e;)n=b(t),o(t),t=n;o(e)},A=(t,e,r,o,s,u,c,l)=>{let f,d;const{type:p,props:g,shapeFlag:m,transition:y,patchFlag:b,dirs:x}=t;if(t.el&&void 0!==_&&-1===b)f=t.el=_(t.el);else{if(f=t.el=h(t.type,u,g&&g.is,g),8&m?v(f,t.children):16&m&&O(t.children,f,null,o,s,u&&"foreignObject"!==p,c,l||!!t.dynamicChildren),x&&Yt(t,null,o,"created"),g){for(const e in g)(0,i.isReservedProp)(e)||a(f,e,null,g[e],u,t.children,o,s,Y);(d=g.onVnodeBeforeMount)&&ue(d,o,t)}C(f,t,t.scopeId,c,o)}x&&Yt(t,null,o,"beforeMount");const w=(!s||!s.pendingBranch)&&y&&!y.persisted;w&&y.beforeEnter(f),n(f,e,r),((d=g&&g.onVnodeMounted)||w||x)&&re((()=>{d&&ue(d,o,t),w&&y.enter(f),x&&Yt(t,null,o,"mounted")}),s)},C=(t,e,n,r,i)=>{if(n&&x(t,n),r)for(let o=0;o<r.length;o++)x(t,r[o]);i&&e===i.subTree&&(n=i.vnode,C(t,n,n.scopeId,n.slotScopeIds,i.parent))},O=(t,e,n,r,i,o,a,s,u=0)=>{for(let l=u;l<t.length;l++){var c=t[l]=(a?Xe:qe)(t[l]);S(null,c,e,n,r,i,o,a,s)}},P=(t,e,n,r,o,s,u)=>{var c=e.el=t.el;let{patchFlag:h,dynamicChildren:f,dirs:d}=e;h|=16&t.patchFlag;var p=t.props||i.EMPTY_OBJ,g=e.props||i.EMPTY_OBJ;let m;if((m=g.onVnodeBeforeUpdate)&&ue(m,n,e,t),d&&Yt(e,t,n,"beforeUpdate"),0<h){if(16&h)N(c,e,p,g,n,r,o);else if(2&h&&p.class!==g.class&&a(c,"class",null,g.class,o),4&h&&a(c,"style",p.style,g.style,o),8&h){var y=e.dynamicProps;for(let e=0;e<y.length;e++){var b=y[e],x=p[b],_=g[b];(_!==x||l&&l(c,b))&&a(c,b,x,_,o,t.children,n,r,Y)}}1&h&&t.children!==e.children&&v(c,e.children)}else u||null!=f||N(c,e,p,g,n,r,o);var w=o&&"foreignObject"!==e.type;f?I(t.dynamicChildren,f,c,n,r,w,s):u||F(t,e,c,null,n,r,w,s,!1),((m=g.onVnodeUpdated)||d)&&re((()=>{m&&ue(m,n,e,t),d&&Yt(e,t,n,"updated")}),r)},I=(t,e,n,r,i,o,a)=>{for(let l=0;l<e.length;l++){var s=t[l],u=e[l],c=s.type===Se||!Re(s,u)||6&s.shapeFlag||64&s.shapeFlag?y(s.el):n;S(s,u,c,null,r,i,o,a,!0)}},N=(t,e,n,r,o,s,u)=>{if(n!==r){for(const f in r){var c,h;!(0,i.isReservedProp)(f)&&((c=r[f])!==(h=n[f])||l&&l(t,f))&&a(t,f,h,c,u,e.children,o,s,Y)}if(n!==i.EMPTY_OBJ)for(const c in n)(0,i.isReservedProp)(c)||c in r||a(t,c,n[c],null,u,e.children,o,s,Y)}},L=(t,e,n,o,a,l,h)=>{o=t.component=function(t,e,n){var r=t.type,o=(e||t).appContext||fn;t={uid:dn++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:function t(e,n,r=!1){if(!n.deopt&&e.__props)return e.__props;var o,a=e.props;const s={},u=[];let c=!1;if((0,i.isFunction)(e)||(o=e=>{c=!0;var[e,r]=t(e,n,!0);(0,i.extend)(s,e),r&&u.push(...r)},!r&&n.mixins.length&&n.mixins.forEach(o),e.extends&&o(e.extends),e.mixins&&e.mixins.forEach(o)),!a&&!c)return e.__props=i.EMPTY_ARR;if((0,i.isArray)(a))for(let g=0;g<a.length;g++){var l=(0,i.camelize)(a[g]);it(l)&&(s[l]=i.EMPTY_OBJ)}else if(a)for(const g in a){var h,f,d,p=(0,i.camelize)(g);it(p)&&(h=a[g],h=s[p]=(0,i.isArray)(h)||(0,i.isFunction)(h)?{type:h}:h)&&(f=st(Boolean,h.type),d=st(String,h.type),h[0]=-1<f,h[1]=d<0||f<d,-1<f||(0,i.hasOwn)(h,"default"))&&u.push(p)}return e.__props=[s,u]}(r,o),emitsOptions:function t(e,n,r=!1){if(!n.deopt&&void 0!==e.__emits)return e.__emits;var o,a=e.emits;let s={},u=!1;return(0,i.isFunction)(e)||(o=e=>{(e=t(e,n,!0))&&(u=!0,(0,i.extend)(s,e))},!r&&n.mixins.length&&n.mixins.forEach(o),e.extends&&o(e.extends),e.mixins&&e.mixins.forEach(o)),a||u?((0,i.isArray)(a)?a.forEach((t=>s[t]=null)):(0,i.extend)(s,a),e.__emits=s):e.__emits=null}(r,o),emit:null,emitted:null,propsDefaults:i.EMPTY_OBJ,ctx:i.EMPTY_OBJ,data:i.EMPTY_OBJ,props:i.EMPTY_OBJ,attrs:i.EMPTY_OBJ,slots:i.EMPTY_OBJ,refs:i.EMPTY_OBJ,setupState:i.EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null};return t.ctx={_:t},t.root=e?e.root:t,t.emit=function(t,e,...n){var r=t.vnode.props||i.EMPTY_OBJ;let o=n;var a=e.startsWith("update:"),s=a&&e.slice(7);s&&s in r&&(({number:s,trim:h}=r[`${"modelValue"===s?"model":s}Modifiers`]||i.EMPTY_OBJ),h?o=n.map((t=>t.trim())):s&&(o=n.map(i.toNumber)));let c,l=r[c=(0,i.toHandlerKey)(e)]||r[c=(0,i.toHandlerKey)((0,i.camelize)(e))];(l=!l&&a?r[c=(0,i.toHandlerKey)((0,i.hyphenate)(e))]:l)&&u(l,t,6,o);var h=r[c+"Once"];if(h){if(t.emitted){if(t.emitted[c])return}else(t.emitted={})[c]=!0;u(h,t,6,o)}}.bind(null,t),t}(t,o,a);var[f,d=!1]=(Pt(t)&&(o.ctx.renderer=Q),[o]),{props:p,children:g}=(bn=d,f.vnode),m=vn(f),p=(function(t,e,n,o=!1){var a={},s={};(0,i.def)(s,je,1),t.propsDefaults=Object.create(null),nt(t,e,a,s),n?t.props=o?a:(0,r.Um)(a):t.type.props?t.props=a:t.props=s,t.attrs=s}(f,p,m,d),Vt(f,g),m?function(t,e){var n=t.type;if(t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ln),n=n.setup,n){var o=t.setupContext=1<n.length?En(t):null;n=(pn=t,(0,r.Jd)(),s(n,t,0,[t.props,o]));if((0,r.lk)(),(pn=null,i.isPromise)(n)){if(e)return n.then((e=>{xn(t,e)})).catch((e=>{c(e,t,0)}));t.asyncDep=n}else xn(t,n)}else Sn(t)}(f,d):void 0);bn=!1,o.asyncDep?(a&&a.registerDep(o,B),t.el||(g=o.subTree=Ue(Me),E(null,g,e,n))):B(o,t,e,n,a,l,h)},R=(t,e,n)=>{var r=e.component=t.component;!function(t,e,n){var{props:r,children:t,component:i}=t,{props:o,children:a,patchFlag:s}=e,u=i.emitsOptions;if(e.dirs||e.transition)return 1;if(!(n&&0<=s))return!(!t&&!a||a&&a.$stable)||r!==o&&(r?!o||K(r,o,u):o);if(1024&s)return 1;if(16&s)return r?K(r,o,u):o;if(8&s){var c=e.dynamicProps;for(let t=0;t<c.length;t++){var l=c[t];if(o[l]!==r[l]&&!D(u,l))return 1}}}(t,e,n)?(e.component=t.component,e.el=t.el,r.vnode=e):r.asyncDep&&!r.asyncResolved?j(r,e,n):(r.next=e,t=r.update,(t=f.indexOf(t))>d&&f.splice(t,1),r.update())},B=(t,e,n,o,a,s,u)=>{t.update=(0,r.cE)((function(){if(t.isMounted){let{next:e,bu:n,u:o,parent:h,vnode:f}=t;var r=e;let d;e?(e.el=f.el,j(t,e,u)):e=f,n&&(0,i.invokeArrayFns)(n),(d=e.props&&e.props.onVnodeBeforeUpdate)&&ue(d,h,e,f);var c=H(t),l=t.subTree;t.subTree=c,S(l,c,y(l.el),q(l),t,a,s),e.el=c.el,null===r&&Z(t,c.el),o&&re(o,a),(d=e.props&&e.props.onVnodeUpdated)&&re((()=>{ue(d,h,e,f)}),a)}else{let u;var{el:l,props:r}=e;const{bm:h,m:f,parent:d}=t;if(h&&(0,i.invokeArrayFns)(h),(u=r&&r.onVnodeBeforeMount)&&ue(u,d,e),c=t.subTree=H(t),l&&et?et(e.el,c,t,a,null):(S(null,c,n,o,t,a,s),e.el=c.el),f&&re(f,a),u=r&&r.onVnodeMounted){const t=e;re((()=>{ue(u,d,t)}),a)}l=t["a"],l&&256&e.shapeFlag&&re(l,a),t.isMounted=!0,e=n=o=null}}),ne)},j=(t,e,n)=>{var o=(e.component=t).vnode.props,a=(t.vnode=e,t.next=null,t),s=e.props,u=o,{props:c,attrs:l,vnode:{patchFlag:h}}=(o=n,a),f=(0,r.IU)(c),[d]=a.propsOptions;if(!(o||0<h)||16&h){let t;nt(a,s,c,l);for(const e in f)s&&((0,i.hasOwn)(s,e)||(t=(0,i.hyphenate)(e))!==e&&(0,i.hasOwn)(s,t))||(d?!u||void 0===u[e]&&void 0===u[t]||(c[e]=rt(d,s||i.EMPTY_OBJ,e,void 0,a)):delete c[e]);if(l!==f)for(const e in l)s&&(0,i.hasOwn)(s,e)||delete l[e]}else if(8&h){var p=a.vnode.dynamicProps;for(let t=0;t<p.length;t++){var g=p[t],m=s[g];!d||(0,i.hasOwn)(l,g)?l[g]=m:c[g=(0,i.camelize)(g)]=rt(d,f,g,m,a)}}(0,r.X$)(a,"set","$attrs"),Wt(t,e.children,n),(0,r.Jd)(),T(void 0,t.update),(0,r.lk)()},F=(t,e,n,r,o,a,s,u,c=!1)=>{var l=t&&t.children,h=(t=t?t.shapeFlag:0,e.children),{patchFlag:e,shapeFlag:f}=e;if(0<e){if(128&e)return void z(l,h,n,r,o,a,s,u,c);if(256&e){{var d=l,p=h,g=n;e=r;var m=o,y=a,b=s,x=u,_=c;d=d||i.EMPTY_ARR,p=p||i.EMPTY_ARR;const t=d.length,f=p.length,v=Math.min(t,f);let w;for(w=0;w<v;w++){const t=p[w]=_?Xe(p[w]):qe(p[w]);S(d[w],t,g,null,m,y,b,x,_)}t>f?Y(d,m,y,!0,!1,v):O(p,g,e,m,y,b,x,_,v)}return}}8&f?(16&t&&Y(l,o,a),h!==l&&v(n,h)):16&t?16&f?z(l,h,n,r,o,a,s,u,c):Y(l,o,a,!0):(8&t&&v(n,""),16&f&&O(h,n,r,o,a,s,u,c))},z=(t,e,n,r,o,a,s,u,c)=>{let l=0;var h=e.length;let f=t.length-1,d=h-1;for(;l<=f&&l<=d;){var p=t[l],g=e[l]=(c?Xe:qe)(e[l]);if(!Re(p,g))break;S(p,g,n,null,o,a,s,u,c),l++}for(;l<=f&&l<=d;){var m=t[f],v=e[d]=(c?Xe:qe)(e[d]);if(!Re(m,v))break;S(m,v,n,null,o,a,s,u,c),f--,d--}if(l>f){if(l<=d)for(var y=d+1,b=y<h?e[y].el:r;l<=d;)S(null,e[l]=(c?Xe:qe)(e[l]),n,b,o,a,s,u,c),l++}else if(l>d)for(;l<=f;)G(t[l],o,a,!0),l++;else{y=l;var x=l,_=new Map;for(l=x;l<=d;l++){var w=e[l]=(c?Xe:qe)(e[l]);null!=w.key&&_.set(w.key,l)}let p,g=0;var E=d-x+1;let m=!1,v=0;var M=new Array(E);for(l=0;l<E;l++)M[l]=0;for(l=y;l<=f;l++){var A=t[l];if(g>=E)G(A,o,a,!0);else{let t;if(null!=A.key)t=_.get(A.key);else for(p=x;p<=d;p++)if(0===M[p-x]&&Re(A,e[p])){t=p;break}void 0===t?G(A,o,a,!0):(M[t-x]=l+1,t>=v?v=t:m=!0,S(A,e[t],n,null,o,a,s,u,c),g++)}}var C=m?function(t){var e=t.slice(),n=[0];let r,i,o,a,s;var u=t.length;for(r=0;r<u;r++){var c=t[r];if(0!==c)if(i=n[n.length-1],t[i]<c)e[r]=i,n.push(r);else{for(o=0,a=n.length-1;o<a;)s=(o+a)/2|0,t[n[s]]<c?o=1+s:a=s;c<t[n[o]]&&(0<o&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,a=n[o-1];0<o--;)n[o]=a,a=e[a];return n}(M):i.EMPTY_ARR;for(p=C.length-1,l=E-1;0<=l;l--){var T=x+l,k=e[T];T=T+1<h?e[T+1].el:r;0===M[l]?S(null,k,n,T,o,a,s,u,c):m&&(p<0||l!==C[p]?U(k,n,T,2):p--)}}},U=(t,e,r,i,o=null)=>{const{el:a,type:s,transition:u,children:c,shapeFlag:l}=t;if(6&l)U(t.component.subTree,e,r,i);else if(128&l)t.suspense.move(e,r,i);else if(64&l)s.move(t,e,r,Q);else if(s===Se){n(a,e,r);for(let t=0;t<c.length;t++)U(c[t],e,r,i);n(t.anchor,e,r)}else if(s===Ae){for(var h,[{el:f,anchor:d},p,g]=[t,e,r];f&&f!==d;)h=b(f),n(f,p,g),f=h;n(d,p,g)}else if(2!==i&&1&l&&u)if(0===i)u.beforeEnter(a),n(a,e,r),re((()=>u.enter(a)),o);else{const{leave:i,delayLeave:o,afterLeave:s}=u,c=()=>n(a,e,r);t=()=>{i(a,(()=>{c(),s&&s()}))},o?o(a,c,t):t()}else n(a,e,r)},G=(t,e,n,r=!1,i=!1)=>{var{type:o,props:a,ref:s,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:f}=t;if(null!=s&&ie(s,null,n,null),256&l)e.ctx.deactivate(t);else{const s=1&l&&f;let d;if((d=a&&a.onVnodeBeforeUnmount)&&ue(d,e,t),6&l)W(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);s&&Yt(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,n,i,Q,r):c&&(o!==Se||0<h&&64&h)?Y(c,e,n,!1,!0):(o===Se&&(128&h||256&h)||!i&&16&l)&&Y(u,e,n),r&&V(t)}((d=a&&a.onVnodeUnmounted)||s)&&re((()=>{d&&ue(d,e,t),s&&Yt(t,null,e,"unmounted")}),n)}},V=t=>{const{type:e,el:n,anchor:r,transition:i}=t;if(e===Se){for(var a,s=n,u=r;s!==u;)a=b(s),o(s),s=a;o(u)}else if(e===Ae)M(t);else{const e=()=>{o(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:r,delayLeave:o}=i;var c=()=>r(n,e);o?o(t.el,e,c):c()}else e()}},W=(t,e,n)=>{var{bum:o,effects:a,update:s,subTree:u,um:c}=t;if(o&&(0,i.invokeArrayFns)(o),a)for(let i=0;i<a.length;i++)(0,r.sT)(a[i]);s&&((0,r.sT)(s),G(u,t,e,n)),c&&re(c,e),re((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps)&&e.resolve()},Y=(t,e,n,r=!1,i=!1,o=0)=>{for(let a=o;a<t.length;a++)G(t[a],e,n,r,i)},q=t=>6&t.shapeFlag?q(t.component.subTree):128&t.shapeFlag?t.suspense.next():b(t.anchor||t.el);var X,$,J=(t,e,n)=>{null==t?e._vnode&&G(e._vnode,null,null,!0):S(e._vnode||null,t,e,null,null,null,n),k(),e._vnode=t};const Q={p:S,um:G,m:U,r:V,mt:L,mc:O,pc:F,pbc:I,n:q,o:t};let tt,et;return e&&([tt,et]=e(Q)),{render:J,hydrate:tt,createApp:(X=J,$=tt,function(t,e=null){null==e||(0,i.isObject)(e)||(e=null);const n=qt(),r=new Set;let o=!1;const a=n.app={_uid:Xt++,_component:t,_props:e,_container:null,_context:n,version:Gn,get config(){return n.config},set config(t){},use(t,...e){return r.has(t)||(t&&(0,i.isFunction)(t.install)?(r.add(t),t.install(a,...e)):(0,i.isFunction)(t)&&(r.add(t),t(a,...e))),a},mixin(t){return!n.mixins.includes(t)&&(n.mixins.push(t),t.props||t.emits)&&(n.deopt=!0),a},component(t,e){return e?(n.components[t]=e,a):n.components[t]},directive(t,e){return e?(n.directives[t]=e,a):n.directives[t]},mount(r,i,s){var u;if(!o)return(u=Ue(t,e)).appContext=n,i&&$?$(u,r):X(u,r,s),o=!0,(a._container=r).__vue_app__=a,u.component.proxy},unmount(){o&&(X(null,a._container),delete a._container.__vue_app__)},provide(t,e){return n.provides[t]=e,a}};return a})}}function ue(t,e,n,r=null){u(t,e,7,[n,r])}function ce(t,e,n=!1){var r=t.children,o=e.children;if((0,i.isArray)(r)&&(0,i.isArray)(o))for(let i=0;i<r.length;i++){var a=r[i];let t=o[i];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&((t=o[i]=Xe(o[i])).el=a.el),n||ce(a,t))}}const le=t=>t&&(t.disabled||""===t.disabled),he=t=>"undefined"!=typeof SVGElement&&t instanceof SVGElement,fe=(t,e)=>(t=t&&t.to,(0,i.isString)(t)?e?e(t):null:t);function de(t,e,n,{o:{insert:r},m:i},o=2){0===o&&r(t.targetAnchor,e,n);var{el:t,anchor:a,shapeFlag:s,children:u,props:c}=t;o=2===o;if(o&&r(t,e,n),(!o||le(c))&&16&s)for(let l=0;l<u.length;l++)i(u[l],e,n,2);o&&r(a,e,n)}const pe={__isTeleport:!0,process(t,e,n,r,i,o,a,s,u,c){const{mc:l,pc:h,pbc:f,o:{insert:d,querySelector:p,createText:g}}=c;var m,v,y,b,x,_=le(e.props);const{shapeFlag:w,children:S}=e;null==t?(y=e.el=g(""),m=e.anchor=g(""),d(y,n,r),d(m,n,r),y=e.target=fe(e.props,p),r=e.targetAnchor=g(""),y&&(d(r,y),a=a||he(y)),v=(t,e)=>{16&w&&l(S,t,e,i,o,a,s,u)},_?v(n,m):y&&v(y,r)):(e.el=t.el,m=e.anchor=t.anchor,v=e.target=t.target,y=e.targetAnchor=t.targetAnchor,x=(r=le(t.props))?n:v,b=r?m:y,a=a||he(v),e.dynamicChildren?(f(t.dynamicChildren,e.dynamicChildren,x,i,o,a,s),ce(t,e,!0)):u||h(t,e,x,b,i,o,a,s,!1),_?r||de(e,n,m,c,1):(e.props&&e.props.to)!==(t.props&&t.props.to)?(x=e.target=fe(e.props,p))&&de(e,x,null,c,0):r&&de(e,v,y,c,1))},remove(t,e,n,r,{um:i,o:{remove:o}},a){var{shapeFlag:t,children:s,anchor:u,targetAnchor:c,target:l,props:h}=t;if(l&&o(c),(a||!le(h))&&(o(u),16&t))for(let f=0;f<s.length;f++)i(s[f],e,n,!0,r)},move:de,hydrate:function(t,e,n,r,i,o,{o:{nextSibling:a,parentNode:s,querySelector:u}},c){var l;return u=e.target=fe(e.props,u),u&&(l=u._lpa||u.firstChild,16&e.shapeFlag)&&(le(e.props)?(e.anchor=c(a(t),e,s(t),n,r,i,o),e.targetAnchor=l):(e.anchor=a(t),e.targetAnchor=c(l,e,u,n,r,i,o)),u._lpa=e.targetAnchor&&a(e.targetAnchor)),e.anchor&&a(e.anchor)}},ge="components",me="directives";function ve(t,e){return _e(ge,t,0,e)||t}const ye=Symbol();function be(t){return(0,i.isString)(t)?_e(ge,t)||t:t||ye}function xe(t){return _e(me,t)}function _e(t,e,n,r=!1){var o=j||pn;if(o){var a=o.type;if(t===ge){var s=Tn(a);if(s&&(s===e||s===(0,i.camelize)(e)||s===(0,i.capitalize)((0,i.camelize)(e))))return a}return s=we(o[t]||a[t],e)||we(o.appContext[t],e),!s&&r?a:s}}function we(t,e){return t&&(t[e]||t[(0,i.camelize)(e)]||t[(0,i.capitalize)((0,i.camelize)(e))])}const Se=Symbol(void 0),Ee=Symbol(void 0),Me=Symbol(void 0),Ae=Symbol(void 0),Ce=[];let Te=null;function ke(t=!1){Ce.push(Te=t?null:[])}function Oe(){Ce.pop(),Te=Ce[Ce.length-1]||null}let Pe,Ie=1;function Ne(t){Ie+=t}function De(t,e,n,r,o){return t=Ue(t,e,n,r,o,!0),t.dynamicChildren=Te||i.EMPTY_ARR,Oe(),0<Ie&&Te&&Te.push(t),t}function Le(t){return!!t&&!0===t.__v_isVNode}function Re(t,e){return t.type===e.type&&t.key===e.key}function Be(t){Pe=t}const je="__vInternal",Fe=({key:t})=>null!=t?t:null,ze=({ref:t})=>null!=t?(0,i.isString)(t)||(0,r.dq)(t)||(0,i.isFunction)(t)?{i:j,r:t}:t:null,Ue=Ge;function Ge(t,e=null,n=null,o=0,a=null,s=!1){if(Le(t=t&&t!==ye?t:Me))return u=Ve(t,e,!0),n&&Ke(u,n),u;if(On(t)&&(t=t.__vccOpts),e){let{class:t,style:n}=e=(0,r.X3)(e)||je in e?(0,i.extend)({},e):e;t&&!(0,i.isString)(t)&&(e.class=(0,i.normalizeClass)(t)),(0,i.isObject)(n)&&((0,r.X3)(n)&&!(0,i.isArray)(n)&&(n=(0,i.extend)({},n)),e.style=(0,i.normalizeStyle)(n))}var u=(0,i.isString)(t)?1:t.__isSuspense?128:t.__isTeleport?64:(0,i.isObject)(t)?4:(0,i.isFunction)(t)?2:0;t={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Fe(e),ref:e&&ze(e),scopeId:F,slotScopeIds:null,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null};return Ke(t,n),128&u&&(({content:e,fallback:a}=function(t){var{shapeFlag:t,children:e}=t;let n,r;return r=32&t?(n=Q(e.default),Q(e.fallback)):(n=Q(e),qe(null)),{content:n,fallback:r}}(t)),t.ssContent=e,t.ssFallback=a),0<Ie&&!s&&Te&&(0<o||6&u)&&32!==o&&Te.push(t),t}function Ve(t,e,n=!1){var{props:r,ref:o,patchFlag:a,children:s}=t,r=e?Ze(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:r,key:r&&Fe(r),ref:e&&e.ref?n&&o?(0,i.isArray)(o)?o.concat(ze(e)):[o,ze(e)]:ze(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Se?-1===a?16:16|a:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ve(t.ssContent),ssFallback:t.ssFallback&&Ve(t.ssFallback),el:t.el,anchor:t.anchor}}function We(t=" ",e=0){return Ue(Ee,null,t,e)}function He(t,e){return t=Ue(Ae,null,t),t.staticCount=e,t}function Ye(t="",e=!1){return(e?(ke(),De):Ue)(Me,null,t)}function qe(t){return null==t||"boolean"==typeof t?Ue(Me):(0,i.isArray)(t)?Ue(Se,null,t):"object"==typeof t?null===t.el?t:Ve(t):Ue(Ee,null,String(t))}function Xe(t){return null===t.el?t:Ve(t)}function Ke(t,e){let n=0;var r,o=t["shapeFlag"];if(null==e)e=null;else if((0,i.isArray)(e))n=16;else if("object"==typeof e){if(1&o||64&o)return void((r=e.default)&&(r._c&&R(1),Ke(t,r()),r._c)&&R(-1));n=32,(r=e._)||je in e?3===r&&j&&(1024&j.vnode.patchFlag?(e._=2,t.patchFlag|=1024):e._=1):e._ctx=j}else(0,i.isFunction)(e)?(e={default:e,_ctx:j},n=32):(e=String(e),64&o?(n=16,e=[We(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ze(...t){var e=(0,i.extend)({},t[0]);for(let a=1;a<t.length;a++){var n,r,o=t[a];for(const t in o)"class"===t?e.class!==o.class&&(e.class=(0,i.normalizeClass)([e.class,o.class])):"style"===t?e.style=(0,i.normalizeStyle)([e.style,o.style]):(0,i.isOn)(t)?(n=e[t])!==(r=o[t])&&(e[t]=n?[].concat(n,o[t]):r):""!==t&&(e[t]=o[t])}return e}function $e(t,e){if(pn){let r=pn.provides;var n=pn.parent&&pn.parent.provides;(r=n===r?pn.provides=Object.create(n):r)[t]=e}}function Je(t,e,n=!1){var r=pn||j;if(r)return(r=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides)&&t in r?r[t]:1<arguments.length?n&&(0,i.isFunction)(e)?e():e:void 0}let Qe=!0;function tn(t,e,n=[],o=[],a=[],s=!1){var{mixins:u,extends:c,data:l,computed:h,methods:f,watch:d,provide:p,inject:g,components:m,directives:v,beforeMount:y,mounted:b,beforeUpdate:x,updated:_,activated:w,deactivated:S,beforeUnmount:E,unmounted:M,render:A,renderTracked:C,renderTriggered:T,errorCaptured:k,expose:O}=e;const P=t.proxy,I=t.ctx;var N=t.appContext.mixins;if(s&&A&&t.render===i.NOOP&&(t.render=A),s||(Qe=!1,en("beforeCreate","bc",e,t,N),Qe=!0,rn(t,N,n,o,a)),c&&tn(t,c,n,o,a,!0),u&&rn(t,u,n,o,a),g)if((0,i.isArray)(g))for(let r=0;r<g.length;r++){var D=g[r];I[D]=Je(D)}else for(const r in g){var L=g[r];(0,i.isObject)(L)?I[r]=Je(L.from||r,L.default,!0):I[r]=Je(L)}if(f)for(const r in f){var R=f[r];(0,i.isFunction)(R)&&(I[r]=R.bind(P))}if(s?l&&n.push(l):(n.length&&n.forEach((e=>on(t,e,P))),l&&on(t,l,P)),h)for(const r in h){var B=h[r];const t=Pn({get:(0,i.isFunction)(B)?B.bind(P,P):(0,i.isFunction)(B.get)?B.get.bind(P,P):i.NOOP,set:!(0,i.isFunction)(B)&&(0,i.isFunction)(B.set)?B.set.bind(P):i.NOOP});Object.defineProperty(I,r,{enumerable:!0,configurable:!0,get:()=>t.value,set:e=>t.value=e})}if(d&&o.push(d),!s&&o.length&&o.forEach((t=>{for(const e in t)!function t(e,n,r,o){const a=o.includes(".")?an(r,o):()=>r[o];if((0,i.isString)(e)){const t=n[e];(0,i.isFunction)(t)&&xt(a,t)}else if((0,i.isFunction)(e))xt(a,e.bind(r));else if((0,i.isObject)(e))if((0,i.isArray)(e))e.forEach((e=>t(e,n,r,o)));else{const t=(0,i.isFunction)(e.handler)?e.handler.bind(r):n[e.handler];(0,i.isFunction)(t)&&xt(a,t,e)}}(t[e],I,P,e)})),p&&a.push(p),!s&&a.length&&a.forEach((t=>{const e=(0,i.isFunction)(t)?t.call(P):t;Reflect.ownKeys(e).forEach((t=>{$e(t,e[t])}))})),s&&(m&&(0,i.extend)(t.components||(t.components=(0,i.extend)({},t.type.components)),m),v)&&(0,i.extend)(t.directives||(t.directives=(0,i.extend)({},t.type.directives)),v),s||en("created","c",e,t,N),y&&ct(y.bind(P)),b&&lt(b.bind(P)),x&&ht(x.bind(P)),_&&ft(_.bind(P)),w&&Dt(w.bind(P)),S&&Lt(S.bind(P)),k&&vt(k.bind(P)),C&&mt(C.bind(P)),T&&gt(T.bind(P)),E&&dt(E.bind(P)),M&&pt(M.bind(P)),(0,i.isArray)(O)&&!s)if(O.length){const e=t.exposed||(t.exposed=(0,r.WL)({}));O.forEach((t=>{e[t]=(0,r.Vh)(P,t)}))}else t.exposed||(t.exposed=i.EMPTY_OBJ)}function en(t,e,n,r,i){for(let o=0;o<i.length;o++)nn(t,e,i[o],r);nn(t,e,n,r)}function nn(t,e,n,r){var{extends:i,mixins:o}=n;n=n[t];if(i&&nn(t,e,i,r),o)for(let a=0;a<o.length;a++)nn(t,e,o[a],r);n&&u(n.bind(r.proxy),r,e)}function rn(t,e,n,r,i){for(let o=0;o<e.length;o++)tn(t,e[o],n,r,i,!0)}function on(t,e,n){Qe=!1,e=e.call(n,n),Qe=!0,(0,i.isObject)(e)&&(t.data===i.EMPTY_OBJ?t.data=(0,r.qj)(e):(0,i.extend)(t.data,e))}function an(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function sn(t,e,n){var r=n.appContext.config.optionMergeStrategies,{mixins:o,extends:a}=e;a&&sn(t,a,n),o&&o.forEach((e=>sn(t,e,n)));for(const s in e)r&&(0,i.hasOwn)(r,s)?t[s]=r[s](t[s],e[s],n.proxy,s):t[s]=e[s]}const un=t=>t?vn(t)?t.exposed||t.proxy:un(t.parent):null,cn=(0,i.extend)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>un(t.parent),$root:t=>un(t.root),$emit:t=>t.emit,$options:t=>{{var e=t,{__merged:n,mixins:r,extends:i}=t=e.type;if(n)return n;if(!(n=e.appContext.mixins).length&&!r&&!i)return t;const o={};return n.forEach((t=>sn(o,t,e))),sn(o,t,e),t.__merged=o}},$forceUpdate:t=>()=>E(t.update),$nextTick:t=>S.bind(t.proxy),$watch:t=>function(t,e,n){const r=this.proxy;return _t((0,i.isString)(t)?()=>r[t]:t.bind(r),e.bind(r),n,this)}.bind(t)}),ln={get({_:t},e){var{ctx:n,setupState:o,data:a,props:s,accessCache:u,type:c,appContext:l}=t;if("__v_skip"===e)return!0;if("$"!==e[0]){var h=u[e];if(void 0!==h)switch(h){case 0:return o[e];case 1:return a[e];case 3:return n[e];case 2:return s[e]}else{if(o!==i.EMPTY_OBJ&&(0,i.hasOwn)(o,e))return u[e]=0,o[e];if(a!==i.EMPTY_OBJ&&(0,i.hasOwn)(a,e))return u[e]=1,a[e];if((h=t.propsOptions[0])&&(0,i.hasOwn)(h,e))return u[e]=2,s[e];if(n!==i.EMPTY_OBJ&&(0,i.hasOwn)(n,e))return u[e]=3,n[e];Qe&&(u[e]=4)}}let f,d;return h=cn[e],h?("$attrs"===e&&(0,r.j)(t,"get",e),h(t)):(f=(f=c.__cssModules)&&f[e])||(n!==i.EMPTY_OBJ&&(0,i.hasOwn)(n,e)?(u[e]=3,n[e]):(d=l.config.globalProperties,(0,i.hasOwn)(d,e)?d[e]:void 0))},set({_:t},e,n){var{data:r,setupState:o,ctx:a}=t;if(o!==i.EMPTY_OBJ&&(0,i.hasOwn)(o,e))o[e]=n;else if(r!==i.EMPTY_OBJ&&(0,i.hasOwn)(r,e))r[e]=n;else if((0,i.hasOwn)(t.props,e))return!1;return!("$"===e[0]&&e.slice(1)in t||(a[e]=n,0))},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:a}},s){return void 0!==n[s]||t!==i.EMPTY_OBJ&&(0,i.hasOwn)(t,s)||e!==i.EMPTY_OBJ&&(0,i.hasOwn)(e,s)||(n=a[0])&&(0,i.hasOwn)(n,s)||(0,i.hasOwn)(r,s)||(0,i.hasOwn)(cn,s)||(0,i.hasOwn)(o.config.globalProperties,s)}},hn=(0,i.extend)({},ln,{get(t,e){if(e!==Symbol.unscopables)return ln.get(t,e,t)},has(t,e){return"_"!==e[0]&&!(0,i.isGloballyWhitelisted)(e)}}),fn=qt();let dn=0,pn=null;const gn=()=>pn||j,mn=t=>{pn=t};function vn(t){return 4&t.vnode.shapeFlag}let yn,bn=!1;function xn(t,e){(0,i.isFunction)(e)?t.render=e:(0,i.isObject)(e)&&(t.setupState=(0,r.WL)(e)),Sn(t)}const _n=()=>!yn;function wn(t){yn=t}function Sn(t){var e=t.type;t.render||(yn&&e.template&&!e.render&&(e.render=yn(e.template,{isCustomElement:t.appContext.config.isCustomElement,delimiters:e.delimiters})),t.render=e.render||i.NOOP,t.render._rc&&(t.withProxy=new Proxy(t.ctx,hn))),pn=t,(0,r.Jd)(),tn(t,e),(0,r.lk)(),pn=null}function En(t){return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e=>{t.exposed=(0,r.WL)(e)}}}function Mn(t,e=pn){e&&(e.effects||(e.effects=[])).push(t)}const An=/(?:^|[-_])(\w)/g,Cn=t=>t.replace(An,(t=>t.toUpperCase())).replace(/[-_]/g,"");function Tn(t){return(0,i.isFunction)(t)&&t.displayName||t.name}function kn(t,e,n=!1){let r=Tn(e);var i;return!(r=!r&&e.__file&&(i=e.__file.match(/([^/\\]+)\.\w+$/))?i[1]:r)&&t&&t.parent&&(i=t=>{for(const n in t)if(t[n]===e)return n},r=i(t.components||t.parent.type.components)||i(t.appContext.components)),r?Cn(r):n?"App":"Anonymous"}function On(t){return(0,i.isFunction)(t)&&"__vccOpts"in t}function Pn(t){return t=(0,r.Fl)(t),Mn(t.effect),t}function In(){return null}function Nn(){return null}function Dn(){var t=gn();return t.setupContext||(t.setupContext=En(t))}function Ln(t,e,n){var r=arguments.length;return 2===r?(0,i.isObject)(e)&&!(0,i.isArray)(e)?Le(e)?Ue(t,null,[e]):Ue(t,e):Ue(t,null,e):(3<r?n=Array.prototype.slice.call(arguments,2):3===r&&Le(n)&&(n=[n]),Ue(t,e,n))}const Rn=Symbol(""),Bn=()=>{var t=Je(Rn);return t||a("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),t};function jn(){}function Fn(t,e){let n;if((0,i.isArray)(t)||(0,i.isString)(t)){n=new Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=e(t[r],r)}else if("number"==typeof t){n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r+1,r)}else if((0,i.isObject)(t))if(t[Symbol.iterator])n=Array.from(t,e);else{var r=Object.keys(t);n=new Array(r.length);for(let i=0,a=r.length;i<a;i++){var o=r[i];n[i]=e(t[o],o,i)}}else n=[];return n}function zn(t){var e={};for(const n in t)e[(0,i.toHandlerKey)(n)]=t[n];return e}function Un(t,e){for(let r=0;r<e.length;r++){var n=e[r];if((0,i.isArray)(n))for(let e=0;e<n.length;e++)t[n[e].name]=n[e].fn;else n&&(t[n.name]=n.fn)}return t}const Gn="3.0.11",Vn=null},49963:function(t,e,n){"use strict";n.d(e,{P$:function(){return i.P$},sv:function(){return i.sv},HY:function(){return i.HY},Ob:function(){return i.Ob},qG:function(){return i.qG},n4:function(){return i.n4},lR:function(){return i.lR},xv:function(){return i.xv},$d:function(){return i.$d},KU:function(){return i.KU},_A:function(){return i._A},kC:function(){return i.kC},Ho:function(){return i.Ho},Fl:function(){return i.Fl},j4:function(){return i.j4},ry:function(){return i.ry},Eo:function(){return i.Eo},Us:function(){return i.Us},Nv:function(){return i.Nv},uE:function(){return i.uE},Uk:function(){return i.Uk},Wm:function(){return i.Wm},ZM:function(){return i.ZM},RC:function(){return i.RC},aZ:function(){return i.aZ},zX:function(){return i.zX},MW:function(){return i.MW},mW:function(){return i.mW},FN:function(){return i.FN},Q6:function(){return i.Q6},h:function(){return i.h},S3:function(){return i.S3},Mr:function(){return i.Mr},f3:function(){return i.f3},X3:function(){return i.X3},PG:function(){return i.PG},$y:function(){return i.$y},dq:function(){return i.dq},of:function(){return i.of},lA:function(){return i.lA},Xl:function(){return i.Xl},dG:function(){return i.dG},Y3:function(){return i.Y3},dl:function(){return i.dl},wF:function(){return i.wF},Jd:function(){return i.Jd},Xn:function(){return i.Xn},se:function(){return i.se},d1:function(){return i.d1},bv:function(){return i.bv},bT:function(){return i.bT},Yq:function(){return i.Yq},Ah:function(){return i.Ah},ic:function(){return i.ic},wg:function(){return i.wg},Cn:function(){return i.Cn},JJ:function(){return i.JJ},WL:function(){return i.WL},dD:function(){return i.dD},qb:function(){return i.qb},qj:function(){return i.qj},OT:function(){return i.OT},iH:function(){return i.iH},Y1:function(){return i.Y1},Ko:function(){return i.Ko},WI:function(){return i.WI},up:function(){return i.up},Q2:function(){return i.Q2},LL:function(){return i.LL},U2:function(){return i.U2},qZ:function(){return i.qZ},ec:function(){return i.ec},nK:function(){return i.nK},Um:function(){return i.Um},YS:function(){return i.YS},XI:function(){return i.XI},Uc:function(){return i.Uc},G:function(){return i.G},zw:function(){return i.zw},hR:function(){return i.hR},mx:function(){return i.mx},IU:function(){return i.IU},Vh:function(){return i.Vh},BK:function(){return i.BK},C3:function(){return i.C3},oR:function(){return i.oR},SU:function(){return i.SU},qp:function(){return i.qp},Zq:function(){return i.Zq},Y8:function(){return i.Y8},i8:function(){return i.i8},ZK:function(){return i.ZK},YP:function(){return i.YP},m0:function(){return i.m0},w5:function(){return i.w5},wy:function(){return i.wy},HX:function(){return i.HX},uT:function(){return O},W3:function(){return H},ri:function(){return wt},vr:function(){return St},ZB:function(){return _t},sY:function(){return xt},fb:function(){return A},sj:function(){return C},e8:function(){return Q},YZ:function(){return at},G2:function(){return et},bM:function(){return nt},nr:function(){return J},F8:function(){return dt},D2:function(){return ft},iM:function(){return lt}});var r=n(3577),i=n(66252),o=n(2262);const a="http://www.w3.org/2000/svg",s="undefined"!=typeof document?document:null;let u,c;const l={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{var e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>(e=e?s.createElementNS(a,t):s.createElement(t,n?{is:n}:void 0),"select"===t&&r&&null!=r.multiple&&e.setAttribute("multiple",r.multiple),e),createText:t=>s.createTextNode(t),createComment:t=>s.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>s.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){var e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r){var i=r?c=c||s.createElementNS(a,"svg"):u=u||s.createElement("div");i.innerHTML=t,r=i.firstChild;let o=r,h=o;for(;o;)h=o,l.insert(o,e,n),o=i.firstChild;return[r,h]}},h=/\s*!important$/;function f(t,e,n){var i;(0,r.isArray)(n)?n.forEach((n=>f(t,e,n))):e.startsWith("--")?t.setProperty(e,n):(i=function(t,e){var n=p[e];if(n)return n;var i=(0,r.camelize)(e);if("filter"!==i&&i in t)return p[e]=i;i=(0,r.capitalize)(i);for(let r=0;r<d.length;r++){var o=d[r]+i;if(o in t)return p[e]=o}return e}(t,e),h.test(n)?t.setProperty((0,r.hyphenate)(i),n.replace(h,""),"important"):t[i]=n)}const d=["Webkit","Moz","ms"],p={},g="http://www.w3.org/1999/xlink";let m=Date.now,v=!1,y=("undefined"!=typeof window&&(m()>document.createEvent("Event").timeStamp&&(m=()=>performance.now()),e=navigator.userAgent.match(/firefox\/(\d+)/i),v=!!(e&&Number(e[1])<=53)),0);const b=Promise.resolve(),x=()=>{y=0},_=()=>y||(b.then(x),y=m());function w(t,e,n,r){t.addEventListener(e,n,r)}function S(t,e,n,o,a=null){var s,u,c=t._vei||(t._vei={}),l=c[e];o&&l?l.value=o:([s,u]=function(t){let e;var n;if(E.test(t))for(e={};n=t.match(E);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0;return[(0,r.hyphenate)(t.slice(2)),e]}(e),o?w(t,s,c[e]=function(t,e){const n=t=>{var o=t.timeStamp||m();(v||o>=n.attached-1)&&(0,i.$d)(function(t,e){if((0,r.isArray)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=_(),n}(o,a),u):l&&(t.removeEventListener(s,l,u),c[e]=void 0))}const E=/(?:Once|Passive|Capture)$/,M=/^on[a-z]/;function A(t="$style"){var e=(0,i.FN)();return(e=e&&e.type.__cssModules)&&e[t]||r.EMPTY_OBJ}function C(t){const e=(0,i.FN)();if(e){const n=()=>function t(e,n){if(128&e.shapeFlag){const r=e.suspense;e=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push((()=>{t(r.activeBranch,n)}))}for(;e.component;)e=e.component.subTree;if(1&e.shapeFlag&&e.el){const t=e.el.style;for(const e in n)t.setProperty("--"+e,n[e])}else e.type===i.HY&&e.children.forEach((e=>t(e,n)))}(e.subTree,t(e.proxy));(0,i.bv)((()=>(0,i.m0)(n,{flush:"post"}))),(0,i.ic)(n)}}const T="transition",k="animation",O=(t,{slots:e})=>(0,i.h)(i.P$,I(t),e),P=(O.displayName="Transition",{name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String});function I(t){let{name:e="v",type:n,css:i=!0,duration:o,enterFromClass:a=e+"-enter-from",enterActiveClass:s=e+"-enter-active",enterToClass:u=e+"-enter-to",appearFromClass:c=a,appearActiveClass:l=s,appearToClass:h=u,leaveFromClass:f=e+"-leave-from",leaveActiveClass:d=e+"-leave-active",leaveToClass:p=e+"-leave-to"}=t;var g={};for(const r in t)r in P||(g[r]=t[r]);if(!i)return g;var m=null==(m=o)?null:(0,r.isObject)(m)?[N(m.enter),N(m.leave)]:[m=N(m),m];const v=m&&m[0],y=m&&m[1],{onBeforeEnter:b,onEnter:x,onEnterCancelled:_,onLeave:w,onLeaveCancelled:S,onBeforeAppear:E=b,onAppear:M=x,onAppearCancelled:A=_}=g,C=(t,e,n)=>{L(t,e?h:u),L(t,e?l:s),n&&n()},T=(t,e)=>{L(t,p),L(t,d),e&&e()};return m=t=>(e,r)=>{const i=t?M:x,o=()=>C(e,t,r);i&&i(e,o),R((()=>{L(e,t?c:a),D(e,t?h:u),i&&1<i.length||j(e,n,v,o)}))},(0,r.extend)(g,{onBeforeEnter(t){b&&b(t),D(t,a),D(t,s)},onBeforeAppear(t){E&&E(t),D(t,c),D(t,l)},onEnter:m(!1),onAppear:m(!0),onLeave(t,e){const r=()=>T(t,e);D(t,f),G(),D(t,d),R((()=>{L(t,f),D(t,p),w&&1<w.length||j(t,n,y,r)})),w&&w(t,r)},onEnterCancelled(t){C(t,!1),_&&_(t)},onAppearCancelled(t){C(t,!0),A&&A(t)},onLeaveCancelled(t){T(t),S&&S(t)}})}function N(t){return(0,r.toNumber)(t)}function D(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function L(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));var n=t["_vtc"];n&&(n.delete(e),n.size||(t._vtc=void 0))}function R(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}n=O.props=(0,r.extend)({},i.P$.props,P);let B=0;function j(t,e,n,r){const i=t._endId=++B,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:a,timeout:s,propCount:u}=F(t,e);if(!a)return r();const c=a+"end";let l=0;const h=()=>{t.removeEventListener(c,f),o()},f=e=>{e.target===t&&++l>=u&&h()};setTimeout((()=>{l<u&&h()}),s+1),t.addEventListener(c,f)}function F(t,e){const n=window.getComputedStyle(t);t=t=>(n[t]||"").split(", ");var r=t(T+"Delay"),i=t(T+"Duration"),o=(r=z(r,i),t(k+"Delay"));t=t(k+"Duration"),o=z(o,t);let a=null,s=0,u=0;return e===T?0<r&&(a=T,s=r,u=i.length):e===k?0<o&&(a=k,s=o,u=t.length):(s=Math.max(r,o),a=0<s?o<r?T:k:null,u=a?(a===T?i:t).length:0),e=a===T&&/\b(transform|all)(,|$)/.test(n[T+"Property"]),{type:a,timeout:s,propCount:u,hasTransform:e}}function z(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map(((e,n)=>U(e)+U(t[n]))))}function U(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function G(){document.body.offsetHeight}const V=new WeakMap,W=new WeakMap,H={name:"TransitionGroup",props:(0,r.extend)({},n,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=(0,i.FN)(),r=(0,i.Y8)();let a,s;return(0,i.ic)((()=>{if(a.length){const r=t.moveClass||`${t.name||"v"}-move`;var e;!function(t,e,n){const r=t.cloneNode();return t._vtc&&t._vtc.forEach((t=>{t.split(/\s+/).forEach((t=>t&&r.classList.remove(t)))})),n.split(/\s+/).forEach((t=>t&&r.classList.add(t))),r.style.display="none",t=1===e.nodeType?e:e.parentNode,t.appendChild(r),n=F(r).hasTransform,t.removeChild(r),n}(a[0].el,n.vnode.el,r)||(a.forEach(Y),a.forEach(q),e=a.filter(X),G(),e.forEach((t=>{const e=t.el;t=e.style,D(e,r),t.transform=t.webkitTransform=t.transitionDuration="";const n=e._moveCb=t=>{t&&t.target!==e||t&&!/transform$/.test(t.propertyName)||(e.removeEventListener("transitionend",n),e._moveCb=null,L(e,r))};e.addEventListener("transitionend",n)})))}})),()=>{var u=(0,o.IU)(t),c=I(u);u=u.tag||i.HY;a=s,s=e.default?(0,i.Q6)(e.default()):[];for(let t=0;t<s.length;t++){var l=s[t];null!=l.key&&(0,i.nK)(l,(0,i.U2)(l,c,r,n))}if(a)for(let t=0;t<a.length;t++){var h=a[t];(0,i.nK)(h,(0,i.U2)(h,c,r,n)),V.set(h,h.el.getBoundingClientRect())}return(0,i.Wm)(u,null,s)}}};function Y(t){t=t.el,t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function q(t){W.set(t,t.el.getBoundingClientRect())}function X(t){var e=V.get(t),n=W.get(t),r=e.left-n.left;e=e.top-n.top;if(r||e)return(n=t.el.style).transform=n.webkitTransform=`translate(${r}px,${e}px)`,n.transitionDuration="0s",t}const K=t=>{const e=t.props["onUpdate:modelValue"];return(0,r.isArray)(e)?t=>(0,r.invokeArrayFns)(e,t):e};function Z(t){t.target.composing=!0}function $(t){var e,n;t=t.target;t.composing&&(t.composing=!1,e="input",(n=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(n))}const J={created(t,{modifiers:{lazy:e,trim:n,number:i}},o){t._assign=K(o);const a=i||"number"===t.type;w(t,e?"change":"input",(e=>{if(!e.target.composing){let e=t.value;n?e=e.trim():a&&(e=(0,r.toNumber)(e)),t._assign(e)}})),n&&w(t,"change",(()=>{t.value=t.value.trim()})),e||(w(t,"compositionstart",Z),w(t,"compositionend",$),w(t,"change",$))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{trim:n,number:i}},o){if(t._assign=K(o),!t.composing){if(document.activeElement===t){if(n&&t.value.trim()===e)return;if((i||"number"===t.type)&&(0,r.toNumber)(t.value)===e)return}o=null==e?"":e,t.value!==o&&(t.value=o)}}},Q={created(t,e,n){t._assign=K(n),w(t,"change",(()=>{var e,n,i=t._modelValue,o=it(t),a=t.checked,s=t._assign;(0,r.isArray)(i)?(e=-1!==(n=(0,r.looseIndexOf)(i,o)),a&&!e?s(i.concat(o)):!a&&e&&((e=[...i]).splice(n,1),s(e))):(0,r.isSet)(i)?(n=new Set(i),a?n.add(o):n.delete(o),s(n)):s(ot(t,a))}))},mounted:tt,beforeUpdate(t,e,n){t._assign=K(n),tt(t,e,n)}};function tt(t,{value:e,oldValue:n},i){t._modelValue=e,(0,r.isArray)(e)?t.checked=-1<(0,r.looseIndexOf)(e,i.props.value):(0,r.isSet)(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=(0,r.looseEqual)(e,ot(t,!0)))}const et={created(t,{value:e},n){t.checked=(0,r.looseEqual)(e,n.props.value),t._assign=K(n),w(t,"change",(()=>{t._assign(it(t))}))},beforeUpdate(t,{value:e,oldValue:n},i){t._assign=K(i),e!==n&&(t.checked=(0,r.looseEqual)(e,i.props.value))}},nt={created(t,{value:e,modifiers:{number:n}},i){const o=(0,r.isSet)(e);w(t,"change",(()=>{var e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>n?(0,r.toNumber)(it(t)):it(t)));t._assign(t.multiple?o?new Set(e):e:e[0])})),t._assign=K(i)},mounted(t,{value:e}){rt(t,e)},beforeUpdate(t,e,n){t._assign=K(n)},updated(t,{value:e}){rt(t,e)}};function rt(t,e){var n=t.multiple;if(!n||(0,r.isArray)(e)||(0,r.isSet)(e)){for(let a=0,s=t.options.length;a<s;a++){var i=t.options[a],o=it(i);if(n)(0,r.isArray)(e)?i.selected=-1<(0,r.looseIndexOf)(e,o):i.selected=e.has(o);else if((0,r.looseEqual)(it(i),e))return void(t.selectedIndex=a)}n||(t.selectedIndex=-1)}}function it(t){return"_value"in t?t._value:t.value}function ot(t,e){var n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const at={created(t,e,n){st(t,e,n,null,"created")},mounted(t,e,n){st(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){st(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){st(t,e,n,r,"updated")}};function st(t,e,n,r,i){let o;switch(t.tagName){case"SELECT":o=nt;break;case"TEXTAREA":o=J;break;default:switch(n.props&&n.props.type){case"checkbox":o=Q;break;case"radio":o=et;break;default:o=J}}i=o[i],i&&i(t,e,n,r)}const ut=["ctrl","shift","alt","meta"],ct={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>ut.some((n=>t[n+"Key"]&&!e.includes(n)))},lt=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){var i=ct[e[t]];if(i&&i(n,e))return}return t(n,...r)},ht={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ft=(t,e)=>n=>{if("key"in n){const i=(0,r.hyphenate)(n.key);if(e.some((t=>t===i||ht[t]===i)))return t(n)}},dt={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):pt(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),pt(t,!0),r.enter(t)):r.leave(t,(()=>{pt(t,!1)})):pt(t,e))},beforeUnmount(t,{value:e}){pt(t,e)}};function pt(t,e){t.style.display=e?t._vod:"none"}const gt=(0,r.extend)({patchProp:(t,e,n,i,o=!1,a,s,u,c)=>{switch(e){case"class":h=t,null==(x=i)&&(x=""),(l=o)?h.setAttribute("class",x):((l=h._vtc)&&(x=(x?[x,...l]:[...l]).join(" ")),h.className=x);break;case"style":var l=t,h=n,d=i,p=l.style;if(d)if((0,r.isString)(d))h!==d&&(x=p.display,p.cssText=d,"_vod"in l)&&(p.display=x);else{for(const t in d)f(p,t,d[t]);if(h&&!(0,r.isString)(h))for(const t in h)null==d[t]&&f(p,t,"")}else l.removeAttribute("style");break;default:(0,r.isOn)(e)?(0,r.isModelListener)(e)||S(t,e,0,i,s):function(t,e,n,i){return i?"innerHTML"===e||!!(e in t&&M.test(e)&&(0,r.isFunction)(n)):"spellcheck"===e||"draggable"===e||"form"===e||"list"===e&&"INPUT"===t.tagName||"type"===e&&"TEXTAREA"===t.tagName||M.test(e)&&(0,r.isString)(n)?void 0:e in t}(t,e,i,o)?function(t,e,n,r,i,o,a){if("innerHTML"===e||"textContent"===e)r&&a(r,i,o),t[e]=null==n?"":n;else if("value"===e&&"PROGRESS"!==t.tagName)a=null==(t._value=n)?"":n,t.value!==a&&(t.value=a);else{if(""===n||null==n){if(r=typeof t[e],""===n&&"boolean"==r)return t[e]=!0;if(null==n&&"string"==r)return t[e]="",t.removeAttribute(e);if("number"==r)return t[e]=0,t.removeAttribute(e)}try{t[e]=n}catch(t){}}}(t,e,i,a,s,u,c):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),m=t,v=e,y=i,(b=o)&&v.startsWith("xlink:")?null==y?m.removeAttributeNS(g,v.slice(6,v.length)):m.setAttributeNS(g,v,y):(b=(0,r.isSpecialBooleanAttr)(v),null==y||b&&!1===y?m.removeAttribute(v):m.setAttribute(v,b?"":y)))}var m,v,y,b,x},forcePatchProp:(t,e)=>"value"===e},l);let mt,vt=!1;function yt(){return mt=mt||(0,i.Us)(gt)}function bt(){return mt=vt?mt:(0,i.Eo)(gt),vt=!0,mt}const xt=(...t)=>{yt().render(...t)},_t=(...t)=>{bt().hydrate(...t)},wt=(...t)=>{const e=yt().createApp(...t),n=e["mount"];return e.mount=t=>{var i;t=Et(t);if(t)return i=e._component,(0,r.isFunction)(i)||i.render||i.template||(i.template=t.innerHTML),t.innerHTML="",i=n(t,!1,t instanceof SVGElement),t instanceof Element&&(t.removeAttribute("v-cloak"),t.setAttribute("data-v-app","")),i},e},St=(...t)=>{t=bt().createApp(...t);const e=t["mount"];return t.mount=t=>{if(t=Et(t),t)return e(t,!0,t instanceof SVGElement)},t};function Et(t){return(0,r.isString)(t)?document.querySelector(t):t}},3577:function(t,e,n){"use strict";function r(t,e){const n=Object.create(null);var r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}n.r(e),n.d(e,{EMPTY_ARR:function(){return R},EMPTY_OBJ:function(){return L},NO:function(){return j},NOOP:function(){return B},PatchFlagNames:function(){return i},babelParserDefaultPlugins:function(){return D},camelize:function(){return ut},capitalize:function(){return ht},def:function(){return gt},escapeHtml:function(){return C},escapeHtmlComment:function(){return k},extend:function(){return G},generateCodeFrame:function(){return u},getGlobalThis:function(){return yt},hasChanged:function(){return dt},hasOwn:function(){return H},hyphenate:function(){return lt},invokeArrayFns:function(){return pt},isArray:function(){return Y},isBooleanAttr:function(){return l},isDate:function(){return K},isFunction:function(){return Z},isGloballyWhitelisted:function(){return a},isHTMLTag:function(){return S},isIntegerKey:function(){return ot},isKnownAttr:function(){return m},isMap:function(){return q},isModelListener:function(){return U},isNoUnitNumericStyleProp:function(){return g},isObject:function(){return Q},isOn:function(){return z},isPlainObject:function(){return it},isPromise:function(){return tt},isReservedProp:function(){return at},isSSRSafeAttrName:function(){return d},isSVGTag:function(){return E},isSet:function(){return X},isSpecialBooleanAttr:function(){return c},isString:function(){return $},isSymbol:function(){return J},isVoidTag:function(){return M},looseEqual:function(){return O},looseIndexOf:function(){return P},makeMap:function(){return r},normalizeClass:function(){return w},normalizeStyle:function(){return v},objectToString:function(){return et},parseStringStyle:function(){return x},propsToAttrMap:function(){return p},remove:function(){return V},slotFlagsText:function(){return o},stringifyStyle:function(){return _},toDisplayString:function(){return I},toHandlerKey:function(){return ft},toNumber:function(){return mt},toRawType:function(){return rt},toTypeString:function(){return nt}});const i={[1]:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"HYDRATE_EVENTS",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT","-1":"HOISTED","-2":"BAIL"},o={[1]:"STABLE",2:"DYNAMIC",3:"FORWARDED"},a=r("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt"),s=2;function u(t,e=0,n=t.length){var r=t.split(/\r?\n/);let i=0;var o,a,u,c=[];for(let l=0;l<r.length;l++)if((i+=r[l].length+1)>=e){for(let t=l-s;t<=l+s||n>i;t++)t<0||t>=r.length||(o=t+1,c.push(""+o+" ".repeat(Math.max(3-String(o).length,0))+"|  "+r[t]),o=r[t].length,t===l?(u=e-(i-o)+1,a=Math.max(1,n>i?o-u:n-e),c.push("   |  "+" ".repeat(u)+"^".repeat(a))):t>l&&(n>i&&(u=Math.max(Math.min(n-i,o),1),c.push("   |  "+"^".repeat(u))),i+=o+1));break}return c.join("\n")}e="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly";const c=r(e),l=r(e+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected"),h=/[>/="'\u0009\u000a\u000c\u0020]/,f={};function d(t){var e;return f.hasOwnProperty(t)?f[t]:(e=h.test(t),f[t]=!e)}const p={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},g=r("animation-iteration-count,border-image-outset,border-image-slice,border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-miterlimit,stroke-opacity,stroke-width"),m=r("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap");function v(t){if(Y(t)){var e={};for(let i=0;i<t.length;i++){var n=t[i],r=v($(n)?x(n):n);if(r)for(const t in r)e[t]=r[t]}return e}if(Q(t))return t}const y=/;(?![^(]*\))/g,b=/:(.+)/;function x(t){const e={};return t.split(y).forEach((t=>{t&&1<(t=t.split(b)).length&&(e[t[0].trim()]=t[1].trim())})),e}function _(t){let e="";if(t)for(const i in t){var n=t[i],r=i.startsWith("--")?i:lt(i);($(n)||"number"==typeof n&&g(r))&&(e+=r+`:${n};`)}return e}function w(t){let e="";if($(t))e=t;else if(Y(t))for(let r=0;r<t.length;r++){var n=w(t[r]);n&&(e+=n+" ")}else if(Q(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const S=r("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot"),E=r("svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view"),M=r("area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr"),A=/["'&<>]/;function C(t){var e=""+t;t=A.exec(e);if(!t)return e;let n,r,i="",o=0;for(r=t.index;r<e.length;r++){switch(e.charCodeAt(r)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}o!==r&&(i+=e.substring(o,r)),o=r+1,i+=n}return o!==r?i+e.substring(o,r):i}const T=/^-?>|<!--|-->|--!>|<!-$/g;function k(t){return t.replace(T,"")}function O(t,e){if(t===e)return!0;var n=K(t),r=K(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=Y(t),r=Y(e),n||r)return!(!n||!r)&&function(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=O(t[r],e[r]);return n}(t,e);if(n=Q(t),r=Q(e),n||r){if(!n||!r)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t){var i=t.hasOwnProperty(n),o=e.hasOwnProperty(n);if(i&&!o||!i&&o||!O(t[n],e[n]))return!1}}return String(t)===String(e)}function P(t,e){return t.findIndex((t=>O(t,e)))}const I=t=>null==t?"":Q(t)?JSON.stringify(t,N,2):String(t),N=(t,e)=>q(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[e+" =>"]=n,t)),{})}:X(e)?{[`Set(${e.size})`]:[...e.values()]}:!Q(e)||Y(e)||it(e)?e:String(e),D=["bigInt","optionalChaining","nullishCoalescingOperator"],L={},R=[],B=()=>{},j=()=>!1,F=/^on[^a-z]/,z=t=>F.test(t),U=t=>t.startsWith("onUpdate:"),G=Object.assign,V=(t,e)=>{e=t.indexOf(e),-1<e&&t.splice(e,1)},W=Object.prototype.hasOwnProperty,H=(t,e)=>W.call(t,e),Y=Array.isArray,q=t=>"[object Map]"===nt(t),X=t=>"[object Set]"===nt(t),K=t=>t instanceof Date,Z=t=>"function"==typeof t,$=t=>"string"==typeof t,J=t=>"symbol"==typeof t,Q=t=>null!==t&&"object"==typeof t,tt=t=>Q(t)&&Z(t.then)&&Z(t.catch),et=Object.prototype.toString,nt=t=>et.call(t),rt=t=>nt(t).slice(8,-1),it=t=>"[object Object]"===nt(t),ot=t=>$(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,at=r(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted");e=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))};const st=/-(\w)/g,ut=e((t=>t.replace(st,((t,e)=>e?e.toUpperCase():"")))),ct=/\B([A-Z])/g,lt=e((t=>t.replace(ct,"-$1").toLowerCase())),ht=e((t=>t.charAt(0).toUpperCase()+t.slice(1))),ft=e((t=>t?"on"+ht(t):"")),dt=(t,e)=>t!==e&&(t==t||e==e),pt=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},gt=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},mt=t=>{var e=parseFloat(t);return isNaN(e)?t:e};let vt;const yt=()=>vt=vt||("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{})},49469:function(t,e){"use strict";var n;(e.UX||(e.UX={})).TextureCompressionBC="texture-compression-bc",(n=e.OB||(e.OB={})).ClampToEdge="clamp-to-edge",n.Repeat="repeat",n.MirrorRepeat="mirror-repeat",(n=e.$l||(e.$l={})).UniformBuffer="uniform-buffer",n.StorageBuffer="storage-buffer",n.ReadonlyStorageBuffer="readonly-storage-buffer",n.Sampler="sampler",n.ComparisonSampler="comparison-sampler",n.SampledTexture="sampled-texture",n.ReadonlyStorageTexture="readonly-storage-texture",n.WriteonlyStorageTexture="writeonly-storage-texture",(n=e.zi||(e.zi={})).Zero="zero",n.One="one",n.SrcColor="src-color",n.OneMinusSrcColor="one-minus-src-color",n.SrcAlpha="src-alpha",n.OneMinusSrcAlpha="one-minus-src-alpha",n.DstColor="dst-color",n.OneMinusDstColor="one-minus-dst-color",n.DstAlpha="dst-alpha",n.OneMinusDstAlpha="one-minus-dst-alpha",n.SrcAlphaSaturated="src-alpha-saturated",n.BlendColor="blend-color",n.OneMinusBlendColor="one-minus-blend-color",(n=e.db||(e.db={})).Add="add",n.Subtract="subtract",n.ReverseSubtract="reverse-subtract",n.Min="min",n.Max="max",(n=e.wb||(e.wb={})).Never="never",n.Less="less",n.Equal="equal",n.LessEqual="less-equal",n.Greater="greater",n.NotEqual="not-equal",n.GreaterEqual="greater-equal",n.Always="always",(n=e.Wf||(e.Wf={})).None="none",n.Front="front",n.Back="back",(n=e.X9||(e.X9={})).Nearest="nearest",n.Linear="linear",(n=e.zX||(e.zX={})).CCW="ccw",n.CW="cw",(n=e.iD||(e.iD={})).Uint16="uint16",n.Uint32="uint32",(n=e.V||(e.V={})).Vertex="vertex",n.Instance="instance",(e.Ws||(e.Ws={})).Load="load",(n=e.YV||(e.YV={})).PointList="point-list",n.LineList="line-list",n.LineStrip="line-strip",n.TriangleList="triangle-list",n.TriangleStrip="triangle-strip",(n=e.xS||(e.xS={})).Keep="keep",n.Zero="zero",n.Replace="replace",n.Invert="invert",n.IncrementClamp="increment-clamp",n.DecrementClamp="decrement-clamp",n.IncrementWrap="increment-wrap",n.DecrementWrap="decrement-wrap",(n=e.EG||(e.EG={})).Store="store",n.Clear="clear",(n=e.kd||(e.kd={})).E1d="1d",n.E2d="2d",n.E3d="3d",(n=e.EV||(e.EV={})).R8Unorm="r8unorm",n.R8Snorm="r8snorm",n.R8Uint="r8uint",n.R8Sint="r8sint",n.R16Uint="r16uint",n.R16Sint="r16sint",n.R16Float="r16float",n.RG8Unorm="rg8unorm",n.RG8Snorm="rg8snorm",n.RG8Uint="rg8uint",n.RG8Sint="rg8sint",n.R32Uint="r32uint",n.R32Sint="r32sint",n.R32Float="r32float",n.RG16Uint="rg16uint",n.RG16Sint="rg16sint",n.RG16Float="rg16float",n.RGBA8Unorm="rgba8unorm",n.RGBA8UnormSRGB="rgba8unorm-srgb",n.RGBA8Snorm="rgba8snorm",n.RGBA8Uint="rgba8uint",n.RGBA8Sint="rgba8sint",n.BGRA8Unorm="bgra8unorm",n.BGRA8UnormSRGB="bgra8unorm-srgb",n.RGB10A2Unorm="rgb10a2unorm",n.RG11B10Float="rg11b10float",n.RG32Uint="rg32uint",n.RG32Sint="rg32sint",n.RG32Float="rg32float",n.RGBA16Uint="rgba16uint",n.RGBA16Sint="rgba16sint",n.RGBA16Float="rgba16float",n.RGBA32Uint="rgba32uint",n.RGBA32Sint="rgba32sint",n.RGBA32Float="rgba32float",n.Depth32Float="depth32float",n.Depth24Plus="depth24plus",n.Depth24PlusStencil8="depth24plus-stencil8",(n=e.Ek||(e.Ek={})).Float="float",n.Sint="sint",n.Uint="uint",(n=e.p_||(e.p_={})).E1d="1d",n.E2d="2d",n.E2dArray="2d-array",n.Cube="cube",n.CubeArray="cube-array",n.E3d="3d",(n=e.gB||(e.gB={})).Uchar2="uchar2",n.Uchar4="uchar4",n.Char2="char2",n.Char4="char4",n.Uchar2Norm="uchar2norm",n.Uchar4Norm="uchar4norm",n.Char2Norm="char2norm",n.Char4Norm="char4norm",n.Ushort2="ushort2",n.Ushort4="ushort4",n.Short2="short2",n.Short4="short4",n.Ushort2Norm="ushort2norm",n.Ushort4Norm="ushort4norm",n.Short2Norm="short2norm",n.Short4Norm="short4norm",n.Half2="half2",n.Half4="half4",n.Float="float",n.Float2="float2",n.Float3="float3",n.Float4="float4",n.Uint="uint",n.Uint2="uint2",n.Uint3="uint3",n.Uint4="uint4",n.Int="int",n.Int2="int2",n.Int3="int3",n.Int4="int4",(n=e.H7||(e.H7={})).All="all",n.StencilOnly="stencil-only",n.DepthOnly="depth-only",(n=e.mj||(e.mj={})).Error="error",n.Warning="warning",n.Info="info",(e.xL||(e.xL={})).Occlusion="occlusion",(n=e.FB||(e.FB={}))[n.MapRead=1]="MapRead",n[n.MapWrite=2]="MapWrite",n[n.CopySrc=4]="CopySrc",n[n.CopyDst=8]="CopyDst",n[n.Index=16]="Index",n[n.Vertex=32]="Vertex",n[n.Uniform=64]="Uniform",n[n.Storage=128]="Storage",n[n.Indirect=256]="Indirect",n[n.QueryResolve=512]="QueryResolve",(n=e.Yw||(e.Yw={}))[n.Red=1]="Red",n[n.Green=2]="Green",n[n.Blue=4]="Blue",n[n.Alpha=8]="Alpha",n[n.All=15]="All",(n=e.$X||(e.$X={}))[n.Vertex=1]="Vertex",n[n.Fragment=2]="Fragment",n[n.Compute=4]="Compute",(n=e.v2||(e.v2={}))[n.CopySrc=1]="CopySrc",n[n.CopyDst=2]="CopyDst",n[n.Sampled=4]="Sampled",n[n.Storage=8]="Storage",n[n.OutputAttachment=16]="OutputAttachment",(n=e.gc||(e.gc={}))[n.Read=1]="Read",n[n.Write=2]="Write"},9669:function(t,e,n){t.exports=n(51609)},55448:function(t,e,n){"use strict";var r=n(64867),i=n(36026),o=n(4372),a=n(15327),s=n(94097),u=n(84109),c=n(67985),l=n(77874),h=n(82648),f=n(60644),d=n(90205);t.exports=function(t){return new Promise((function(e,n){var p,g=t.data,m=t.headers,v=t.responseType;function y(){t.cancelToken&&t.cancelToken.unsubscribe(p),t.signal&&t.signal.removeEventListener("abort",p)}r.isFormData(g)&&r.isStandardBrowserEnv()&&delete m["Content-Type"];var b=new XMLHttpRequest,x=(t.auth&&(x=t.auth.username||"",w=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"",m.Authorization="Basic "+btoa(x+":"+w)),s(t.baseURL,t.url));function _(){var r;b&&(r="getAllResponseHeaders"in b?u(b.getAllResponseHeaders()):null,r={data:v&&"text"!==v&&"json"!==v?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:t,request:b},i((function(t){e(t),y()}),(function(t){n(t),y()}),r),b=null)}b.open(t.method.toUpperCase(),a(x,t.params,t.paramsSerializer),!0),b.timeout=t.timeout,"onloadend"in b?b.onloadend=_:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(_)},b.onabort=function(){b&&(n(new h("Request aborted",h.ECONNABORTED,t,b)),b=null)},b.onerror=function(){n(new h("Network Error",h.ERR_NETWORK,t,b,b)),b=null},b.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",r=t.transitional||l;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new h(e,r.clarifyTimeoutError?h.ETIMEDOUT:h.ECONNABORTED,t,b)),b=null},r.isStandardBrowserEnv()&&(w=(t.withCredentials||c(x))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0)&&(m[t.xsrfHeaderName]=w),"setRequestHeader"in b&&r.forEach(m,(function(t,e){void 0===g&&"content-type"===e.toLowerCase()?delete m[e]:b.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(b.withCredentials=!!t.withCredentials),v&&"json"!==v&&(b.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&b.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(p=function(t){b&&(n(!t||t.type?new f:t),b.abort(),b=null)},t.cancelToken&&t.cancelToken.subscribe(p),t.signal)&&(t.signal.aborted?p():t.signal.addEventListener("abort",p));g=g||null;var w=d(x);w&&-1===["http","https","file"].indexOf(w)?n(new h("Unsupported protocol "+w+":",h.ERR_BAD_REQUEST,t)):b.send(g)}))}},51609:function(t,e,n){"use strict";var r=n(64867),i=n(91849),o=n(30321),a=n(47185),s=function t(e){var n=new o(e),s=i(o.prototype.request,n);return r.extend(s,o.prototype,n),r.extend(s,n),s.create=function(n){return t(a(e,n))},s}(n(45546));s.Axios=o,s.CanceledError=n(60644),s.CancelToken=n(14972),s.isCancel=n(26502),s.VERSION=n(97288).version,s.toFormData=n(47675),s.AxiosError=n(82648),s.Cancel=s.CanceledError,s.all=function(t){return Promise.all(t)},s.spread=n(8713),s.isAxiosError=n(16268),t.exports=s,t.exports.default=s},14972:function(t,e,n){"use strict";var r=n(60644);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");this.promise=new Promise((function(t){e=t}));var e,n=this;this.promise.then((function(t){if(n._listeners){for(var e=n._listeners.length,r=0;r<e;r++)n._listeners[r](t);n._listeners=null}})),this.promise.then=function(t){var e;t=new Promise((function(t){n.subscribe(t),e=t})).then(t);return t.cancel=function(){n.unsubscribe(e)},t},t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},i.prototype.unsubscribe=function(t){this._listeners&&-1!==(t=this._listeners.indexOf(t))&&this._listeners.splice(t,1)},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},60644:function(t,e,n){"use strict";var r=n(82648);function i(t){r.call(this,null==t?"canceled":t,r.ERR_CANCELED),this.name="CanceledError"}n(64867).inherits(i,r,{__CANCEL__:!0}),t.exports=i},26502:function(t){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},30321:function(t,e,n){"use strict";var r=n(64867),i=n(15327),o=n(80782),a=n(13572),s=n(47185),u=n(94097),c=n(54875),l=c.validators;function h(t){this.defaults=t,this.interceptors={request:new o,response:new o}}h.prototype.request=function(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";t=e.transitional;var n,r=(void 0!==t&&c.assertOptions(t,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1),[]),i=!0,o=(this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,r.unshift(t.fulfilled,t.rejected))})),[]);if(this.interceptors.response.forEach((function(t){o.push(t.fulfilled,t.rejected)})),i){for(var u=e;r.length;){var h=r.shift(),f=r.shift();try{u=h(u)}catch(t){f(t);break}}try{n=a(u)}catch(t){return Promise.reject(t)}for(;o.length;)n=n.then(o.shift(),o.shift())}else{var d=[a,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(o),n=Promise.resolve(e);d.length;)n=n.then(d.shift(),d.shift())}return n},h.prototype.getUri=function(t){t=s(this.defaults,t);var e=u(t.baseURL,t.url);return i(e,t.params,t.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(t){h.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(s(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}h.prototype[t]=e(),h.prototype[t+"Form"]=e(!0)})),t.exports=h},82648:function(t,e,n){"use strict";var r=n(64867);function i(t,e,n,r,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var o=i.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(t){a[t]={value:t}})),Object.defineProperties(i,a),Object.defineProperty(o,"isAxiosError",{value:!0}),i.from=function(t,e,n,a,s,u){var c=Object.create(o);return r.toFlatObject(t,c,(function(t){return t!==Error.prototype})),i.call(c,t.message,e,n,a,s),c.name=t.name,u&&Object.assign(c,u),c},t.exports=i},80782:function(t,e,n){"use strict";var r=n(64867);function i(){this.handlers=[]}i.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},94097:function(t,e,n){"use strict";var r=n(91793),i=n(7303);t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},13572:function(t,e,n){"use strict";var r=n(64867),i=n(18527),o=n(26502),a=n(45546),s=n(60644);function u(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new s}t.exports=function(t){return u(t),t.headers=t.headers||{},t.data=i.call(t,t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return u(t),e.data=i.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(u(t),e&&e.response&&(e.response.data=i.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},47185:function(t,e,n){"use strict";var r=n(64867);t.exports=function(t,e){e=e||{};var n={};function i(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function o(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(t[n],e[n])}function a(t){if(!r.isUndefined(e[t]))return i(void 0,e[t])}function s(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(void 0,e[n])}function u(n){return n in e?i(t[n],e[n]):n in t?i(void 0,t[n]):void 0}var c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return r.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=c[t]||o,i=e(t);r.isUndefined(i)&&e!==u||(n[t]=i)})),n}},36026:function(t,e,n){"use strict";var r=n(82648);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}},18527:function(t,e,n){"use strict";var r=n(64867),i=n(45546);t.exports=function(t,e,n){var o=this||i;return r.forEach(n,(function(n){t=n.call(o,t,e)})),t}},45546:function(t,e,n){"use strict";var r=n(34155),i=n(64867),o=n(16016),a=n(82648),s=n(77874),u=n(47675),c={"Content-Type":"application/x-www-form-urlencoded"};function l(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var h,f={transitional:s,adapter:h="undefined"!=typeof XMLHttpRequest||void 0!==r&&"[object process]"===Object.prototype.toString.call(r)?n(55448):h,transformRequest:[function(t,e){if(o(e,"Accept"),o(e,"Content-Type"),!(i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t))){if(i.isArrayBufferView(t))return t.buffer;if(i.isURLSearchParams(t))return l(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var n=i.isObject(t),r=e&&e["Content-Type"];if((a=i.isFileList(t))||n&&"multipart/form-data"===r)return s=this.env&&this.env.FormData,u(a?{"files[]":t}:t,s&&new s);if(n||"application/json"===r){l(e,"application/json");var a=t,s=void 0;n=void 0;if(i.isString(a))try{return(s||JSON.parse)(a),i.trim(a)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(a)}}return t}],transformResponse:[function(t){var e=this.transitional||f.transitional,n=e&&e.silentJSONParsing;e=e&&e.forcedJSONParsing,n=!n&&"json"===this.responseType;if(n||e&&i.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(n){if("SyntaxError"===t.name)throw a.from(t,a.ERR_BAD_RESPONSE,this,null,this.response);throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(91623)},validateStatus:function(t){return 200<=t&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(t){f.headers[t]={}})),i.forEach(["post","put","patch"],(function(t){f.headers[t]=i.merge(c)})),t.exports=f},77874:function(t){"use strict";t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},97288:function(t){t.exports={version:"0.27.2"}},91849:function(t){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},15327:function(t,e,n){"use strict";var r=n(64867);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){var o;return e&&(n=n?n(e):r.isURLSearchParams(e)?e.toString():(o=[],r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),o.push(i(e)+"="+i(t))})))})),o.join("&")))&&(-1!==(e=t.indexOf("#"))&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+n),t}},7303:function(t){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},4372:function(t,e,n){"use strict";var r=n(64867);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){return t=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)")),t?decodeURIComponent(t[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},91793:function(t){"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}},16268:function(t,e,n){"use strict";var r=n(64867);t.exports=function(t){return r.isObject(t)&&!0===t.isAxiosError}},67985:function(t,e,n){"use strict";var r,i,o,a=n(64867);function s(t){return i&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}t.exports=a.isStandardBrowserEnv()?(i=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),r=s(window.location.href),function(t){return t=a.isString(t)?s(t):t,t.protocol===r.protocol&&t.host===r.host}):function(){return!0}},16016:function(t,e,n){"use strict";var r=n(64867);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},91623:function(t){t.exports=null},84109:function(t,e,n){"use strict";var r=n(64867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o={};return t&&r.forEach(t.split("\n"),(function(t){n=t.indexOf(":"),e=r.trim(t.substr(0,n)).toLowerCase(),n=r.trim(t.substr(n+1)),!e||o[e]&&0<=i.indexOf(e)||(o[e]="set-cookie"===e?(o[e]||[]).concat([n]):o[e]?o[e]+", "+n:n)})),o}},90205:function(t){"use strict";t.exports=function(t){return t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t),t&&t[1]||""}},8713:function(t){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},47675:function(t,e,n){"use strict";var r=n(48764).Buffer,i=n(64867);t.exports=function(t,e){e=e||new FormData;var n=[];function o(t){return null===t?"":i.isDate(t)?t.toISOString():i.isArrayBuffer(t)||i.isTypedArray(t)?"function"==typeof Blob?new Blob([t]):r.from(t):t}return function t(r,a){if(i.isPlainObject(r)||i.isArray(r)){if(-1!==n.indexOf(r))throw Error("Circular reference detected in "+a);n.push(r),i.forEach(r,(function(n,r){if(!i.isUndefined(n)){var s=a?a+"."+r:r;if(n&&!a&&"object"==typeof n)if(i.endsWith(r,"{}"))n=JSON.stringify(n);else if(i.endsWith(r,"[]")&&(r=i.toArray(n)))return void r.forEach((function(t){i.isUndefined(t)||e.append(s,o(t))}));t(n,s)}})),n.pop()}else e.append(a,o(r))}(t),e}},54875:function(t,e,n){"use strict";var r=n(97288).version,i=n(82648),o={},a=(["object","boolean","number","function","string","symbol"].forEach((function(t,e){o[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}})),{});o.transitional=function(t,e,n){function o(t,e){return"[Axios v"+r+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,r,s){if(!1===t)throw new i(o(r," has been removed"+(e?" in "+e:"")),i.ERR_DEPRECATED);return e&&!a[r]&&(a[r]=!0),!t||t(n,r,s)}},t.exports={assertOptions:function(t,e,n){if("object"!=typeof t)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(t),o=r.length;0<o--;){var a=r[o],s=e[a];if(s){var u=t[a];s=void 0===u||s(u,a,t);if(!0!==s)throw new i("option "+a+" must be "+s,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+a,i.ERR_BAD_OPTION)}},validators:o}},64867:function(t,e,n){"use strict";var r,i=n(91849),o=Object.prototype.toString,a=(r=Object.create(null),function(t){return t=o.call(t),r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function s(t){return t=t.toLowerCase(),function(e){return a(e)===t}}function u(t){return Array.isArray(t)}function c(t){return void 0===t}var l=s("ArrayBuffer");function h(t){return null!==t&&"object"==typeof t}function f(t){return"object"===a(t)&&(null===(t=Object.getPrototypeOf(t))||t===Object.prototype)}n=s("Date");var d=s("File"),p=s("Blob"),g=s("FileList");function m(t){return"[object Function]"===o.call(t)}var v,y=s("URLSearchParams");function b(t,e){if(null!=t)if(u(t="object"!=typeof t?[t]:t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}v="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),t.exports={isArray:u,isArrayBuffer:l,isBuffer:function(t){return null!==t&&!c(t)&&null!==t.constructor&&!c(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){var e="[object FormData]";return t&&("function"==typeof FormData&&t instanceof FormData||o.call(t)===e||m(t.toString)&&t.toString()===e)},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&l(t.buffer)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:h,isPlainObject:f,isUndefined:c,isDate:n,isFile:d,isBlob:p,isFunction:m,isStream:function(t){return h(t)&&m(t.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:b,merge:function t(){var e={};function n(n,r){f(e[r])&&f(n)?e[r]=t(e[r],n):f(n)?e[r]=t({},n):u(n)?e[r]=n.slice():e[r]=n}for(var r=0,i=arguments.length;r<i;r++)b(arguments[r],n);return e},extend:function(t,e,n){return b(e,(function(e,r){t[r]=n&&"function"==typeof e?i(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)?t.slice(1):t},inherits:function(t,e,n,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)},toFlatObject:function(t,e,n){var r,i,o,a={};e=e||{};do{for(i=(r=Object.getOwnPropertyNames(t)).length;0<i--;)a[o=r[i]]||(e[o]=t[o],a[o]=!0)}while((t=Object.getPrototypeOf(t))&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:a,kindOfTest:s,endsWith:function(t,e,n){return t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length,-1!==(t=t.indexOf(e,n))&&t===n},toArray:function(t){if(!t)return null;var e=t.length;if(c(e))return null;for(var n=new Array(e);0<e--;)n[e]=t[e];return n},isTypedArray:function(t){return v&&t instanceof v},isFileList:g}},79742:function(t,e){"use strict";e.byteLength=function(t){t=u(t);var e=t[0];t=t[1];return 3*(e+t)/4-t},e.toByteArray=function(t){var e,n,o=u(t),a=o[0],s=(o=o[1],new i(function(t,e){return 3*(t+e)/4-e}(a,o))),c=0,l=0<o?a-4:a;for(n=0;n<l;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],s[c++]=e>>16&255,s[c++]=e>>8&255,s[c++]=255&e;return 2===o&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,s[c++]=255&e),1===o&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,s[c++]=e>>8&255,s[c++]=255&e),s},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(function(t,e,r){for(var i,o=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(function(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}(i));return o.join("")}(t,a,s<a+16383?s:a+16383));return 1==i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2==i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function u(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");return t=t.indexOf("="),e=(t=-1===t?e:t)===e?0:4-t%4,[t,e]}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},9668:function(t,e,n){"use strict";const r=n(58478)["Buffer"],i=Symbol.for("BufferList");function o(t){if(!(this instanceof o))return new o(t);o._init.call(this,t)}o._init=function(t){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},o.prototype._new=function(t){return new o(t)},o.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let r=0;r<this._bufs.length;r++){var n=e+this._bufs[r].length;if(t<n||r===this._bufs.length-1)return[r,t-e];e=n}},o.prototype._reverseOffset=function(t){var e=t[0];let n=t[1];for(let r=0;r<e;r++)n+=this._bufs[r].length;return n},o.prototype.get=function(t){if(!(t>this.length||t<0))return t=this._offset(t),this._bufs[t[0]][t[1]]},o.prototype.slice=function(t,e){return"number"==typeof t&&t<0&&(t+=this.length),"number"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},o.prototype.copy=function(t,e,n,i){if(("number"!=typeof i||i>this.length)&&(i=this.length),(n="number"!=typeof n||n<0?0:n)>=this.length)return t||r.alloc(0);if(i<=0)return t||r.alloc(0);var o=!!t,a=this._offset(n),s=i-n;let u=s,c=o&&e||0,l=a[1];if(0===n&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:r.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,c),c+=this._bufs[e].length;return t}if(u<=this._bufs[a[0]].length-l)return o?this._bufs[a[0]].copy(t,e,l,l+u):this._bufs[a[0]].slice(l,l+u);o||(t=r.allocUnsafe(s));for(let r=a[0];r<this._bufs.length;r++){var h=this._bufs[r].length-l;if(!(u>h)){this._bufs[r].copy(t,c,l,l+u),c+=h;break}this._bufs[r].copy(t,c,l),c+=h,u-=h,l=l&&0}return t.length>c?t.slice(0,c):t},o.prototype.shallowSlice=function(t,e){var n;return e="number"!=typeof e?this.length:e,(t=t||0)<0&&(t+=this.length),e<0&&(e+=this.length),t===e?this._new():(t=this._offset(t),e=this._offset(e),n=this._bufs.slice(t[0],e[0]+1),0===e[1]?n.pop():n[n.length-1]=n[n.length-1].slice(0,e[1]),0!==t[1]&&(n[0]=n[0].slice(t[1])),this._new(n))},o.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},o.prototype.consume=function(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0))for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){var t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},o.prototype.append=function(t){if(null!=t)if(t.buffer)this._appendBuffer(r.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"==typeof t&&(t=t.toString()),this._appendBuffer(r.from(t));return this},o.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},o.prototype.indexOf=function(t,e,n){if(void 0===n&&"string"==typeof e&&(n=e,e=void 0),"function"==typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof t?t=r.from([t]):"string"==typeof t?t=r.from(t,n):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=r.from(t.buffer,t.byteOffset,t.byteLength):r.isBuffer(t)||(t=r.from(t)),e=Number(e||0),(e=(e=isNaN(e)?0:e)<0?this.length+e:e)<0&&(e=0),0===t.length)return e>this.length?this.length:e;n=this._offset(e);let i=n[0],o=n[1];for(;i<this._bufs.length;i++){for(var a=this._bufs[i];o<a.length;)if(a.length-o>=t.length){var s=a.indexOf(t,o);if(-1!==s)return this._reverseOffset([i,s]);o=a.length-t.length+1}else{if(s=this._reverseOffset([i,o]),this._match(s,t))return s;o++}o=0}return-1},o.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let n=0;n<e.length;n++)if(this.get(t+n)!==e[n])return!1;return!0};{const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)!function(e){null===t[e]?o.prototype[e]=function(t,n){return this.slice(t,t+n)[e](0,n)}:o.prototype[e]=function(n=0){return this.slice(n,n+t[e])[e](0)}}(e)}o.prototype._isBufferList=function(t){return t instanceof o||o.isBufferList(t)},o.isBufferList=function(t){return null!=t&&t[i]},t.exports=o},10022:function(t,e,n){"use strict";const r=n(88473).Duplex;var i=n(35717);const o=n(9668);function a(t){if(!(this instanceof a))return new a(t);if("function"==typeof t){this._callback=t;const e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",(function(t){t.on("error",e)})),this.on("unpipe",(function(t){t.removeListener("error",e)})),t=null}o._init.call(this,t),r.call(this)}i(a,r),Object.assign(a.prototype,o.prototype),a.prototype._new=function(t){return new a(t)},a.prototype._write=function(t,e,n){this._appendBuffer(t),"function"==typeof n&&n()},a.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},a.prototype.end=function(t){r.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},a.prototype._destroy=function(t,e){this._bufs.length=0,this.length=0,e(t)},a.prototype._isBufferList=function(t){return t instanceof a||t instanceof o||a.isBufferList(t)},a.isBufferList=o.isBufferList,t.exports=a,t.exports.BufferListStream=a,t.exports.BufferList=o},58478:function(t,e,n){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var r=n(79742),i=n(80645),o=(n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,e.Buffer=s,e.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},e.INSPECT_MAX_BYTES=50,2147483647);function a(t){if(o<t)throw new RangeError('The value "'+t+'" is invalid for option "size"');return t=new Uint8Array(t),Object.setPrototypeOf(t,s.prototype),t}function s(t,e,n){if("number"!=typeof t)return u(t,e,n);if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}function u(t,e,n){if("string"==typeof t){var r=t,i=e;if(s.isEncoding(i="string"==typeof i&&""!==i?i:"utf8"))return o=0|p(r,i),u=a(o),(r=u.write(r,i))!==o?u.slice(0,r):u;throw new TypeError("Unknown encoding: "+i)}var o;if(ArrayBuffer.isView(t))return I(o=t,Uint8Array)?f((r=new Uint8Array(o)).buffer,r.byteOffset,r.byteLength):h(o);if(null!=t){if(I(t,ArrayBuffer)||t&&I(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(I(t,SharedArrayBuffer)||t&&I(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var u=t.valueOf&&t.valueOf();if(null!=u&&u!==t)return s.from(u,e,n);if(i=function(t){var e,n;return s.isBuffer(t)?(e=0|d(t.length),0!==(n=a(e)).length&&t.copy(n,0,0,e),n):void 0!==t.length?"number"!=typeof t.length||N(t.length)?a(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t),i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,n)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return c(t),a(t<0?0:0|d(t))}function h(t){for(var e=t.length<0?0:0|d(t.length),n=a(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');return t=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(t,s.prototype),t}function d(t){if(o<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function p(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||I(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return k(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return O(t).length;default:if(i)return r?-1:k(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){var i,o=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":var a=this,s=e,u=n,c=a.length;(!u||u<0||c<u)&&(u=c);for(var l="",h=s=!s||s<0?0:s;h<u;++h)l+=D[a[h]];return l;case"utf8":case"utf-8":return _(this,e,n);case"ascii":var f=this,d=(c=e,n),p="";d=Math.min(f.length,d);for(var g=c;g<d;++g)p+=String.fromCharCode(127&f[g]);return p;case"latin1":case"binary":var m=this,v=(s=e,n),y="";v=Math.min(m.length,v);for(var b=s;b<v;++b)y+=String.fromCharCode(m[b]);return y;case"base64":return x=this,i=n,0===(w=e)&&i===x.length?r.fromByteArray(x):r.fromByteArray(x.slice(w,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var x=e,w=n,S=this.slice(x,w),E="",M=0;M<S.length-1;M+=2)E+=String.fromCharCode(S[M]+256*S[M+1]);return E;default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=N(n=+n)?i?0:t.length-1:n)<0?t.length+n:n)>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var o=1,a=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a/=o=2,s/=2,n/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i)for(var c=-1,l=n;l<a;l++)if(u(t,l)===u(e,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===s)return c*o}else-1!==c&&(l-=l-c),c=-1;else for(l=n=a<n+s?a-s:n;0<=l;l--){for(var h=!0,f=0;f<s;f++)if(u(t,l+f)!==u(e,f)){h=!1;break}if(h)return l}return-1}function b(t,e,n,r){return P(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return P(function(t,e){for(var n,r,i=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i.push(n%256),i.push(r);return i}(e,t.length-n),t,n,r)}function _(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,h=239<c?4:223<c?3:191<c?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&127<(u=(31&c)<<6|63&o)&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&2047<(u=(15&c)<<12|(63&o)<<6|63&a)&&(u<55296||57343<u)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)&&u<1114112&&(l=u)}null===l?(l=65533,h=1):65535<l&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}var f=r,d=f.length;if(d<=w)return String.fromCharCode.apply(String,f);for(var p="",g=0;g<d;)p+=String.fromCharCode.apply(String,f.slice(g,g+=w));return p}e.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=u,Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,n){return c(t),t<=0||void 0===e?a(t):"string"==typeof n?a(t).fill(e,n):a(t).fill(e)},s.allocUnsafe=l,s.allocUnsafeSlow=l,s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(I(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),I(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;for(var n=s.allocUnsafe(e),r=0,i=0;i<t.length;++i){var o=t[i];if(I(o,Uint8Array))r+o.length>n.length?s.from(o).copy(n,r):Uint8Array.prototype.set.call(n,o,r);else{if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r)}r+=o.length}return n},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},s.prototype.toLocaleString=s.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?_(this,0,t):g.apply(this,arguments)},s.prototype.equals=function(t){if(s.isBuffer(t))return this===t||0===s.compare(this,t);throw new TypeError("Argument must be a Buffer")},s.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim();return this.length>n&&(t+=" ... "),"<Buffer "+t+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(t,e,n,r,i){if(I(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(e=void 0===e?0:e)<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),u=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),h=0;h<u;++h)if(c[h]!==l[h]){o=c[h],a=l[h];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||i<n)&&(n=i),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,a,s,u=!1;;)switch(r){case"hex":var c=this,l=t,h=e,f=n,d=(h=Number(h)||0,c.length-h);(!f||d<(f=Number(f)))&&(f=d),(d=l.length)/2<f&&(f=d/2);for(var p=0;p<f;++p){var g=parseInt(l.substr(2*p,2),16);if(N(g))return p;c[h+p]=g}return p;case"utf8":case"utf-8":return d=e,s=n,P(k(t,(a=this).length-d),a,d,s);case"ascii":case"latin1":case"binary":return b(this,t,e,n);case"base64":return a=this,s=e,o=n,P(O(t),a,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function S(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function E(t,e,n,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function A(t,e,n,r,o){return e=+e,n>>>=0,o||M(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function C(t,e,n,r,o){return e=+e,n>>>=0,o||M(t,0,n,8),i.write(t,e,n,r,52,8),n+8}s.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),n=this.subarray(t,e);return Object.setPrototypeOf(n,s.prototype),n},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||S(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||S(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||S(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||S(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||S(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||S(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||S(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||S(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||S(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return t>>>=0,e||S(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){return t>>>=0,e||S(t,2,this.length),e=this[t]|this[t+1]<<8,32768&e?4294901760|e:e},s.prototype.readInt16BE=function(t,e){return t>>>=0,e||S(t,2,this.length),e=this[t+1]|this[t]<<8,32768&e?4294901760|e:e},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||S(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||S(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return t>>>=0,e||S(t,4,this.length),i.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||S(t,4,this.length),i.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||S(t,8,this.length),i.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||S(t,8,this.length),i.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||E(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||E(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeIntLE=function(t,e,n,r){t=+t,e>>>=0,r||E(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,a=0;for(this[e]=255&t;++i<n&&(o*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/o>>0)-a&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){t=+t,e>>>=0,r||E(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,a=0;for(this[e+i]=255&t;0<=--i&&(o*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/o>>0)-a&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,1,127,-128),this[e]=255&(t=t<0?255+t+1:t),e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,2147483647,-2147483648),this[e]=(t=t<0?4294967295+t+1:t)>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeFloatLE=function(t,e,n){return A(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return A(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return C(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return C(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i=(r=t.length-e<r-n?t.length-e+n:r)-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i;1===t.length&&(i=t.charCodeAt(0),"utf8"===r&&i<128||"latin1"===r)&&(t=i)}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");var o;if(!(n<=e))if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(o=e;o<n;++o)this[o]=t;else{var a=s.isBuffer(t)?t:s.from(t,r),u=a.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%u]}return this};var T=/[^+/0-9A-Za-z-_]/g;function k(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=t.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if(--e<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function O(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function P(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function I(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function N(t){return t!=t}var D=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}()},48764:function(t,e,n){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const r=n(79742),i=n(80645);n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,e.Buffer=s,e.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');return t=new Uint8Array(t),Object.setPrototypeOf(t,s.prototype),t}function s(t,e,n){if("number"!=typeof t)return u(t,e,n);if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}function u(t,e,n){if("string"==typeof t){var r=t,i=e;if("string"==typeof i&&""!==i||(i="utf8"),!s.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var o=0|p(r,i);let n=a(o);return r=n.write(r,i),r!==o&&(n=n.slice(0,r)),n}if(ArrayBuffer.isView(t))return z(i=t,Uint8Array)?f((o=new Uint8Array(i)).buffer,o.byteOffset,o.byteLength):h(i);if(null!=t){if(z(t,ArrayBuffer)||t&&z(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(z(t,SharedArrayBuffer)||t&&z(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');if(r=t.valueOf&&t.valueOf(),null!=r&&r!==t)return s.from(r,e,n);var u=function(t){var e,n;return s.isBuffer(t)?(e=0|d(t.length),0!==(n=a(e)).length&&t.copy(n,0,0,e),n):void 0!==t.length?"number"!=typeof t.length||U(t.length)?a(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(u)return u;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,n)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return c(t),a(t<0?0:0|d(t))}function h(t){var e=t.length<0?0:0|d(t.length),n=a(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,s.prototype),r}function d(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function p(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||z(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(i)return r?-1:B(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){let i=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":{var o=this,a=e,s=n,u=o.length;(!a||a<0)&&(a=0),(!s||s<0||u<s)&&(s=u);let t="";for(let e=a;e<s;++e)t+=G[o[e]];return t}case"utf8":case"utf-8":return _(this,e,n);case"ascii":{var c=this;u=e;var l=n;let t="";l=Math.min(c.length,l);for(let e=u;e<l;++e)t+=String.fromCharCode(127&c[e]);return t}case"latin1":case"binary":{var h=this;a=e;var f=n;let t="";f=Math.min(h.length,f);for(let e=a;e<f;++e)t+=String.fromCharCode(h[e]);return t}case"base64":return p=this,m=n,0===(g=e)&&m===p.length?r.fromByteArray(p):r.fromByteArray(p.slice(g,m));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":{p=this,g=e,m=n;var d=p.slice(g,m);let t="";for(let e=0;e<d.length-1;e+=2)t+=String.fromCharCode(d[e]+256*d[e+1]);return t}default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}var p,g,m}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=U(n=+n)?i?0:t.length-1:n)<0?t.length+n:n)>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){let o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){let r=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===u)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+u>s&&(n=s-u),o=n;0<=o;o--){let n=!0;for(let r=0;r<u;r++)if(c(t,o+r)!==c(e,r)){n=!1;break}if(n)return o}return-1}function b(t,e,n,r){return F(function(t){var e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return F(function(t,e){var n,r,i=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i.push(n%256),i.push(r);return i}(e,t.length-n),t,n,r)}function _(t,e,n){n=Math.min(t.length,n);var r=[];let i=e;for(;i<n;){var o=t[i];let e=null,a=239<o?4:223<o?3:191<o?2:1;if(i+a<=n){let n,r,s,u;switch(a){case 1:o<128&&(e=o);break;case 2:128==(192&(n=t[i+1]))&&127<(u=(31&o)<<6|63&n)&&(e=u);break;case 3:n=t[i+1],r=t[i+2],128==(192&n)&&128==(192&r)&&2047<(u=(15&o)<<12|(63&n)<<6|63&r)&&(u<55296||57343<u)&&(e=u);break;case 4:n=t[i+1],r=t[i+2],s=t[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&65535<(u=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&s)&&u<1114112&&(e=u)}}null===e?(e=65533,a=1):65535<e&&(e-=65536,r.push(e>>>10&1023|55296),e=56320|1023&e),r.push(e),i+=a}{var a=r,s=a.length;if(s<=w)return String.fromCharCode.apply(String,a);let t="",e=0;for(;e<s;)t+=String.fromCharCode.apply(String,a.slice(e,e+=w));return t}}e.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=u,Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,n){return c(t),t<=0||void 0===e?a(t):"string"==typeof n?a(t).fill(e,n):a(t).fill(e)},s.allocUnsafe=l,s.allocUnsafeSlow=l,s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(z(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),z(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(z(e,Uint8Array))i+e.length>r.length?(e=s.isBuffer(e)?e:s.from(e)).copy(r,i):Uint8Array.prototype.set.call(r,e,i);else{if(!s.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},s.prototype.toLocaleString=s.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?_(this,0,t):g.apply(this,arguments)},s.prototype.equals=function(t){if(s.isBuffer(t))return this===t||0===s.compare(this,t);throw new TypeError("Argument must be a Buffer")},s.prototype.inspect=function(){let t="";var n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(t,e,n,r,i){if(z(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(e=void 0===e?0:e)<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;let o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0);var u=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n);for(let s=0;s<u;++s)if(c[s]!==l[s]){o=c[s],a=l[s];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i,o,a,s=this.length-e;if((void 0===n||s<n)&&(n=s),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";let u=!1;for(;;)switch(r){case"hex":{var c=this,l=t,h=e,f=n;h=Number(h)||0;var d=c.length-h;let r;for((!f||d<(f=Number(f)))&&(f=d),(d=l.length)/2<f&&(f=d/2),r=0;r<f;++r){var p=parseInt(l.substr(2*r,2),16);if(U(p))return r;c[h+r]=p}return r}case"utf8":case"utf-8":return d=e,a=n,F(B(t,(o=this).length-d),o,d,a);case"ascii":case"latin1":case"binary":return b(this,t,e,n);case"base64":return o=this,a=e,i=n,F(j(t),o,a,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const w=4096;function S(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function E(t,e,n,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r,i){return N(e,r,i,t,n,7),r=Number(e&BigInt(4294967295)),t[n++]=r,t[n++]=r>>=8,t[n++]=r>>=8,t[n++]=r>>=8,i=Number(e>>BigInt(32)&BigInt(4294967295)),t[n++]=i,t[n++]=i>>=8,t[n++]=i>>=8,t[n++]=i>>=8,n}function A(t,e,n,r,i){return N(e,r,i,t,n,7),r=Number(e&BigInt(4294967295)),t[n+7]=r,t[n+6]=r>>=8,t[n+5]=r>>=8,t[n+4]=r>>=8,i=Number(e>>BigInt(32)&BigInt(4294967295)),t[n+3]=i,t[n+2]=i>>=8,t[n+1]=i>>=8,t[n]=i>>=8,n+8}function C(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function T(t,e,n,r,o){return e=+e,n>>>=0,o||C(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function k(t,e,n,r,o){return e=+e,n>>>=0,o||C(t,0,n,8),i.write(t,e,n,r,52,8),n+8}s.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),n=this.subarray(t,e);return Object.setPrototypeOf(n,s.prototype),n},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||S(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||S(t,e,this.length);let r=this[t+--e],i=1;for(;0<e&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||S(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||S(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||S(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||S(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||S(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=V((function(t){D(t>>>=0,"offset");var e=this[t],n=this[t+7];void 0!==e&&void 0!==n||L(t,this.length-8),e=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,t=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(e)+(BigInt(t)<<BigInt(32))})),s.prototype.readBigUInt64BE=V((function(t){D(t>>>=0,"offset");var e=this[t],n=this[t+7];void 0!==e&&void 0!==n||L(t,this.length-8),e=e*2**24+65536*this[++t]+256*this[++t]+this[++t],t=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(e)<<BigInt(32))+BigInt(t)})),s.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||S(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||S(t,e,this.length);let r=e,i=1,o=this[t+--r];for(;0<r&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return t>>>=0,e||S(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){return t>>>=0,e||S(t,2,this.length),e=this[t]|this[t+1]<<8,32768&e?4294901760|e:e},s.prototype.readInt16BE=function(t,e){return t>>>=0,e||S(t,2,this.length),e=this[t+1]|this[t]<<8,32768&e?4294901760|e:e},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||S(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||S(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=V((function(t){D(t>>>=0,"offset");var e=this[t],n=this[t+7];void 0!==e&&void 0!==n||L(t,this.length-8),n=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),s.prototype.readBigInt64BE=V((function(t){D(t>>>=0,"offset");var e=this[t],n=this[t+7];void 0!==e&&void 0!==n||L(t,this.length-8),e=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(e)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),s.prototype.readFloatLE=function(t,e){return t>>>=0,e||S(t,4,this.length),i.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||S(t,4,this.length),i.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||S(t,8,this.length),i.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||S(t,8,this.length),i.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||E(this,t,e,n,Math.pow(2,8*n)-1,0);let i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||E(this,t,e,n,Math.pow(2,8*n)-1,0);let i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigUInt64LE=V((function(t,e=0){return M(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeBigUInt64BE=V((function(t,e=0){return A(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeIntLE=function(t,e,n,r){t=+t,e>>>=0,r||E(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);let i=0,o=1,a=0;for(this[e]=255&t;++i<n&&(o*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/o>>0)-a&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){t=+t,e>>>=0,r||E(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);let i=n-1,o=1,a=0;for(this[e+i]=255&t;0<=--i&&(o*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/o>>0)-a&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,1,127,-128),this[e]=255&(t=t<0?255+t+1:t),e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,2147483647,-2147483648),this[e]=(t=t<0?4294967295+t+1:t)>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigInt64LE=V((function(t,e=0){return M(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeBigInt64BE=V((function(t,e=0){return A(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeFloatLE=function(t,e,n){return T(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return T(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return k(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return k(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i=(r=t.length-e<r-n?t.length-e+n:r)-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i;1===t.length&&(i=t.charCodeAt(0),"utf8"===r&&i<128||"latin1"===r)&&(t=i)}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(!(n<=e)){let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(i=e;i<n;++i)this[i]=t;else{var o=s.isBuffer(t)?t:s.from(t,r),a=o.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=o[i%a]}}return this};const O={};function P(t,e,n){O[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=this.name+` [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return this.name+` [${t}]: `+this.message}}}function I(t){let e="",n=t.length;for(var r="-"===t[0]?1:0;n>=4+r;n-=3)e="_"+t.slice(n-3,n)+e;return""+t.slice(0,n)+e}function N(t,e,n,r,i,o){if(n<t||t<e){var a="bigint"==typeof e?"n":"";let r;throw r=3<o?0===e||e===BigInt(0)?`>= 0${a} and < 2${a} ** `+8*(o+1)+a:`>= -(2${a} ** ${8*(o+1)-1}${a}) and < 2 ** `+(8*(o+1)-1)+a:`>= ${e}${a} and <= `+n+a,new O.ERR_OUT_OF_RANGE("value",r,t)}e=r,n=o,D(a=i,"offset"),void 0!==e[a]&&void 0!==e[a+n]||L(a,e.length-(n+1))}function D(t,e){if("number"!=typeof t)throw new O.ERR_INVALID_ARG_TYPE(e,"number",t)}function L(t,e,n){if(Math.floor(t)!==t)throw D(t,n),new O.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new O.ERR_BUFFER_OUT_OF_BOUNDS;throw new O.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= `+e,t)}P("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?t+" is outside of buffer bounds":"Attempt to access memory outside buffer bounds"}),RangeError),P("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type `+typeof e}),TypeError),P("ERR_OUT_OF_RANGE",(function(t,e,n){t=`The value of "${t}" is out of range.`;let r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=I(String(n)):"bigint"==typeof n&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=I(r)),r+="n"),t+` It must be ${e}. Received `+r}),RangeError);const R=/[^+/0-9A-Za-z-_]/g;function B(t,e){let n;e=e||1/0;var r=t.length;let i=null;var o=[];for(let a=0;a<r;++a){if(55295<(n=t.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if(--e<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function z(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function U(t){return t!=t}const G=function(){var t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){var n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function V(t){return"undefined"==typeof BigInt?W:t}function W(){throw new Error("BigInt not supported")}},48168:function(t,e,n){var r,i=n(8874),o={};for(r in i)i.hasOwnProperty(r)&&(o[i[r]]=r);var a,s=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(a in s)if(s.hasOwnProperty(a)){if(!("channels"in s[a]))throw new Error("missing channels property: "+a);if(!("labels"in s[a]))throw new Error("missing channel labels property: "+a);if(s[a].labels.length!==s[a].channels)throw new Error("channel and label counts mismatch: "+a);var u=s[a].channels,c=s[a].labels;delete s[a].channels,delete s[a].labels,Object.defineProperty(s[a],"channels",{value:u}),Object.defineProperty(s[a],"labels",{value:c})}s.rgb.hsl=function(t){var e,n=t[0]/255,r=t[1]/255,i=(t=t[2]/255,Math.min(n,r,t)),o=Math.max(n,r,t),a=o-i;return o===i?e=0:n===o?e=(r-t)/a:r===o?e=2+(t-n)/a:t===o&&(e=4+(n-r)/a),(e=Math.min(60*e,360))<0&&(e+=360),t=(i+o)/2,[e,100*(o===i?0:t<=.5?a/(o+i):a/(2-o-i)),100*t]},s.rgb.hsv=function(t){function e(t){return(c-t)/6/l+.5}var n,r,i,o,a,s=t[0]/255,u=t[1]/255,c=(t=t[2]/255,Math.max(s,u,t)),l=c-Math.min(s,u,t);return 0==l?o=a=0:(a=l/c,n=e(s),r=e(u),i=e(t),s===c?o=i-r:u===c?o=1/3+n-i:t===c&&(o=2/3+r-n),o<0?o+=1:1<o&&--o),[360*o,100*a,100*c]},s.rgb.hwb=function(t){var e=t[0],n=t[1],r=t[2];return[s.rgb.hsl(t)[0],1/255*Math.min(e,Math.min(n,r))*100,100*(1-1/255*Math.max(e,Math.max(n,r)))]},s.rgb.cmyk=function(t){var e=t[0]/255,n=t[1]/255,r=(t=t[2]/255,Math.min(1-e,1-n,1-t));return[100*((1-e-r)/(1-r)||0),100*((1-n-r)/(1-r)||0),100*((1-t-r)/(1-r)||0),100*r]},s.rgb.keyword=function(t){var e=o[t];if(e)return e;var n,r,a,s,u=1/0;for(r in i)i.hasOwnProperty(r)&&(s=i[r],a=t,(a=Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2)+Math.pow(a[2]-s[2],2))<u)&&(u=a,n=r);return n},s.keyword.rgb=function(t){return i[t]},s.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255;t=t[2]/255;return[100*(.4124*(e=.04045<e?Math.pow((.055+e)/1.055,2.4):e/12.92)+.3576*(n=.04045<n?Math.pow((.055+n)/1.055,2.4):n/12.92)+.1805*(t=.04045<t?Math.pow((.055+t)/1.055,2.4):t/12.92)),100*(.2126*e+.7152*n+.0722*t),100*(.0193*e+.1192*n+.9505*t)]},s.rgb.lab=function(t){t=s.rgb.xyz(t);var e=t[0],n=t[1];t=t[2];return n/=100,t/=108.883,e=.008856<(e/=95.047)?Math.pow(e,1/3):7.787*e+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(.008856<t?Math.pow(t,1/3):7.787*t+16/116))]},s.hsl.rgb=function(t){var e,n,r=t[0]/360,i=t[1]/100;t=t[2]/100;if(0==i)return[n=255*t,n,n];for(var o,a=2*t-(o=t<.5?t*(1+i):t+i-t*i),s=[0,0,0],u=0;u<3;u++)(e=r+1/3*-(u-1))<0&&e++,1<e&&e--,s[u]=255*(n=6*e<1?a+6*(o-a)*e:2*e<1?o:3*e<2?a+(o-a)*(2/3-e)*6:a);return s},s.hsl.hsv=function(t){var e=t[0],n=t[1]/100,r=(t=t[2]/100,n),i=Math.max(t,.01);return n*=(t*=2)<=1?t:2-t,r*=i<=1?i:2-i,[e,100*(0==t?2*r/(i+r):2*n/(t+n)),(t+n)/2*100]},s.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=(t=Math.floor(e)%6,e=e-Math.floor(e),255*r*(1-n)),o=255*r*(1-n*e),a=255*r*(1-n*(1-e));switch(r*=255,t){case 0:return[r,a,i];case 1:return[o,r,i];case 2:return[i,r,a];case 3:return[i,o,r];case 4:return[a,i,r];case 5:return[r,i,o]}},s.hsv.hsl=function(t){var e=t[0],n=t[1]/100,r=(t=t[2]/100,Math.max(t,.01)),i=(t=(2-n)*t,(2-n)*r);n*=r;return[e,100*((n/=i<=1?i:2-i)||0),100*(t/=2)]},s.hwb.rgb=function(t){var e,n,r,i,o,a=t[0]/360,s=t[1]/100,u=(t=t[2]/100,s+t);switch(1<u&&(s/=u,t/=u),a=6*a-(u=Math.floor(6*a)),n=s+(a=0!=(1&u)?1-a:a)*((e=1-t)-s),u){default:case 6:case 0:r=e,i=n,o=s;break;case 1:r=n,i=e,o=s;break;case 2:r=s,i=e,o=n;break;case 3:r=s,i=n,o=e;break;case 4:r=n,i=s,o=e;break;case 5:r=e,i=s,o=n}return[255*r,255*i,255*o]},s.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100;t=t[3]/100;return[255*(1-Math.min(1,e*(1-t)+t)),255*(1-Math.min(1,n*(1-t)+t)),255*(1-Math.min(1,r*(1-t)+t))]},s.xyz.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=(t=t[2]/100,3.2406*e+-1.5372*n+-.4986*t),i=-.9689*e+1.8758*n+.0415*t;e=.0557*e+-.204*n+1.057*t;return r=.0031308<r?1.055*Math.pow(r,1/2.4)-.055:12.92*r,i=.0031308<i?1.055*Math.pow(i,1/2.4)-.055:12.92*i,e=.0031308<e?1.055*Math.pow(e,1/2.4)-.055:12.92*e,[255*Math.min(Math.max(0,r),1),255*Math.min(Math.max(0,i),1),255*Math.min(Math.max(0,e),1)]},s.xyz.lab=function(t){var e=t[0],n=t[1];t=t[2];return n/=100,t/=108.883,e=.008856<(e/=95.047)?Math.pow(e,1/3):7.787*e+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(.008856<t?Math.pow(t,1/3):7.787*t+16/116))]},s.lab.xyz=function(t){var e=(t[0]+16)/116,n=t[1]/500+e,r=(t=e-t[2]/200,Math.pow(e,3)),i=Math.pow(n,3),o=Math.pow(t,3);return e=.008856<r?r:(e-16/116)/7.787,n=.008856<i?i:(n-16/116)/7.787,t=.008856<o?o:(t-16/116)/7.787,[n*=95.047,e*=100,t*=108.883]},s.lab.lch=function(t){var e=t[0],n=t[1],r=(t=t[2],360*Math.atan2(t,n)/2/Math.PI);return r<0&&(r+=360),[e,Math.sqrt(n*n+t*t),r]},s.lch.lab=function(t){var e=t[0],n=t[1];t=t[2]/360*2*Math.PI;return[e,n*Math.cos(t),n*Math.sin(t)]},s.rgb.ansi16=function(t){var e=t[0],n=t[1],r=t[2],i=1 in arguments?arguments[1]:s.rgb.hsv(t)[2];return 0===(i=Math.round(i/50))?30:(r=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(e/255)),2===i&&(r+=60),r)},s.hsv.ansi16=function(t){return s.rgb.ansi16(s.hsv.rgb(t),t[2])},s.rgb.ansi256=function(t){var e=t[0],n=t[1];t=t[2];return e===n&&n===t?e<8?16:248<e?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(t/255*5)},s.ansi16.rgb=function(t){var e=t%10;return 0===e||7===e?(50<t&&(e+=3.5),[e=e/10.5*255,e,e]):[(1&e)*(t=.5*(1+~~(50<t)))*255,(e>>1&1)*t*255,(e>>2&1)*t*255]},s.ansi256.rgb=function(t){var e;return 232<=t?[e=10*(t-232)+8,e,e]:(t-=16,[Math.floor(t/36)/5*255,Math.floor((e=t%36)/6)/5*255,e%6/5*255])},s.rgb.hex=function(t){return t=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase(),"000000".substring(t.length)+t},s.hex.rgb=function(t){var e;t=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);return t?(e=t[0],3===t[0].length&&(e=e.split("").map((function(t){return t+t})).join("")),[(t=parseInt(e,16))>>16&255,t>>8&255,255&t]):[0,0,0]},s.rgb.hcg=function(t){var e=t[0]/255,n=t[1]/255,r=(t=t[2]/255,Math.max(Math.max(e,n),t)),i=Math.min(Math.min(e,n),t),o=r-i;i=o<1?i/(1-o):0,r=o<=0?0:r===e?(n-t)/o%6:r===n?2+(t-e)/o:4+(e-n)/o+4;return[360*(r=r/6%1),100*o,100*i]},s.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=1,i=0;r=n<.5?2*e*n:2*e*(1-n);return[t[0],100*r,100*(i=r<1?(n-.5*r)/(1-r):i)]},s.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100;e*=n,n=e<1?(n-e)/(1-e):0;return[t[0],100*e,100*n]},s.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100;t=t[2]/100;if(0==n)return[255*t,255*t,255*t];var r=[0,0,0],i=(e=e%1*6,e%1),o=1-i;switch(Math.floor(e)){case 0:r[0]=1,r[1]=i,r[2]=0;break;case 1:r[0]=o,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=i;break;case 3:r[0]=0,r[1]=o,r[2]=1;break;case 4:r[0]=i,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=o}return[255*(n*r[0]+(e=(1-n)*t)),255*(n*r[1]+e),255*(n*r[2]+e)]},s.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);e=0<n?e/n:0;return[t[0],100*e,100*n]},s.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return 0<n&&n<.5?r=e/(2*n):.5<=n&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},s.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},s.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100;e=n-e,n=e<1?(n-e)/(1-e):0;return[t[0],100*e,100*n]},s.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},s.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},s.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},s.gray.hsl=s.gray.hsv=function(t){return[0,0,t[0]]},s.gray.hwb=function(t){return[0,100,t[0]]},s.gray.cmyk=function(t){return[0,0,0,t[0]]},s.gray.lab=function(t){return[t[0],0,0]},s.gray.hex=function(t){return t=255&Math.round(t[0]/100*255),t=((t<<16)+(t<<8)+t).toString(16).toUpperCase(),"000000".substring(t.length)+t},s.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},12085:function(t,e,n){var r=n(48168),i=n(4111),o={};function a(t){function e(e){return null==e?e:(1<arguments.length&&(e=Array.prototype.slice.call(arguments)),t(e))}return"conversion"in t&&(e.conversion=t.conversion),e}function s(t){function e(e){if(null==e)return e;1<arguments.length&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n}return"conversion"in t&&(e.conversion=t.conversion),e}Object.keys(r).forEach((function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:r[t].channels}),Object.defineProperty(o[t],"labels",{value:r[t].labels});var e=i(t);Object.keys(e).forEach((function(n){var r=e[n];o[t][n]=s(r),o[t][n].raw=a(r)}))})),t.exports=o},4111:function(t,e,n){var r=n(48168);function i(t){var e=function(){for(var t={},e=Object.keys(r),n=e.length,i=0;i<n;i++)t[e[i]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var i=n.pop(),o=Object.keys(r[i]),a=o.length,s=0;s<a;s++){var u=o[s],c=e[u];-1===c.distance&&(c.distance=e[i].distance+1,c.parent=i,n.unshift(u))}return e}function o(t,e){for(var n=[e[t].parent,t],i=r[e[t].parent][t],o=e[t].parent;e[o].parent;)n.unshift(e[o].parent),i=function(t,e){return function(n){return e(t(n))}}(r[e[o].parent][o],i),o=e[o].parent;return i.conversion=n,i}t.exports=function(t){for(var e=i(t),n={},r=Object.keys(e),a=r.length,s=0;s<a;s++){var u=r[s];null!==e[u].parent&&(n[u]=o(u,e))}return n}},8874:function(t){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(t,e,n){var r,i=n(8874),o=n(86851),a={};for(r in i)i.hasOwnProperty(r)&&(a[i[r]]=r);var s=t.exports={to:{},get:{}};function u(t,e,n){return Math.min(Math.max(e,t),n)}function c(t){return t=t.toString(16).toUpperCase(),t.length<2?"0"+t:t}s.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=s.get.hsl(t),n="hsl";break;case"hwb":e=s.get.hwb(t),n="hwb";break;default:e=s.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},s.get.rgb=function(t){if(!t)return null;var e,n,r,o=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=e[2],e=e[1],n=0;n<3;n++){var a=2*n;o[n]=parseInt(e.slice(a,2+a),16)}r&&(o[3]=parseInt(r,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(r=(e=e[1])[3],n=0;n<3;n++)o[n]=parseInt(e[n]+e[n],16);r&&(o[3]=parseInt(r+r,16)/255)}else{if(e=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/))for(n=0;n<3;n++)o[n]=parseInt(e[n+1],0);else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=t.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(o=i[e[1]])?(o[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(e[n+1]))}e[4]&&(o[3]=parseFloat(e[4]))}for(n=0;n<3;n++)o[n]=u(o[n],0,255);return o[3]=u(o[3],0,1),o},s.get.hsl=function(t){var e;return(t=t&&t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/))?(e=parseFloat(t[4]),[(parseFloat(t[1])+360)%360,u(parseFloat(t[2]),0,100),u(parseFloat(t[3]),0,100),u(isNaN(e)?1:e,0,1)]):null},s.get.hwb=function(t){var e;return(t=t&&t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/))?(e=parseFloat(t[4]),[(parseFloat(t[1])%360+360)%360,u(parseFloat(t[2]),0,100),u(parseFloat(t[3]),0,100),u(isNaN(e)?1:e,0,1)]):null},s.to.hex=function(){var t=o(arguments);return"#"+c(t[0])+c(t[1])+c(t[2])+(t[3]<1?c(Math.round(255*t[3])):"")},s.to.rgb=function(){var t=o(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},s.to.rgb.percent=function(){var t=o(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},s.to.hsl=function(){var t=o(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},s.to.hwb=function(){var t=o(arguments),e="";return 4<=t.length&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},s.to.keyword=function(t){return a[t.slice(0,3)]}},6767:function(t,e,n){"use strict";var r=n(19818),i=n(12085),o=[].slice,a=["keyword","gray","hex"],s={},u=(Object.keys(i).forEach((function(t){s[o.call(i[t].labels).sort().join("")]=t})),{});function c(t,e){if(!(this instanceof c))return new c(t,e);if((e=e&&e in a?null:e)&&!(e in i))throw new Error("Unknown model: "+e);if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof c)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var n=r.get(t);if(null===n)throw new Error("Unable to parse color from string: "+t);this.model=n.model,l=i[this.model].channels,this.color=n.value.slice(0,l),this.valpha="number"==typeof n.value[l]?n.value[l]:1}else if(t.length){this.model=e||"rgb";var l=i[this.model].channels;n=o.call(t,0,l);this.color=f(n,l),this.valpha="number"==typeof t[l]?t[l]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{if(this.valpha=1,e=Object.keys(t),"alpha"in t&&(e.splice(e.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0),n=e.sort().join(""),!(n in s))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=s[n];for(var h=i[this.model].labels,d=[],p=0;p<h.length;p++)d.push(t[h[p]]);this.color=f(d)}if(u[this.model])for(l=i[this.model].channels,p=0;p<l;p++){var g=u[this.model][p];g&&(this.color[p]=g(this.color[p]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function l(t,e,n){return(t=Array.isArray(t)?t:[t]).forEach((function(t){(u[t]||(u[t]=[]))[e]=n})),t=t[0],function(r){var i;return arguments.length?(n&&(r=n(r)),(i=this[t]()).color[e]=r):(i=this[t]().color[e],n&&(i=n(i))),i}}function h(t){return function(e){return Math.max(0,Math.min(t,e))}}function f(t,e){for(var n=0;n<e;n++)"number"!=typeof t[n]&&(t[n]=0);return t}c.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in r.to?this:this.rgb();t=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return r.to[e.model](t)},percentString:function(t){return t=this.rgb().round("number"==typeof t?t:1),t=1===t.valpha?t.color:t.color.concat(this.valpha),r.to.rgb.percent(t)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=i[this.model].channels,n=i[this.model].labels,r=0;r<e;r++)t[n[r]]=this.color[r];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new c(this.color.map((e=t,function(t){return Number(t.toFixed(e))})).concat(this.valpha),this.model);var e},alpha:function(t){return arguments.length?new c(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:l("rgb",0,h(255)),green:l("rgb",1,h(255)),blue:l("rgb",2,h(255)),hue:l(["hsl","hsv","hsl","hwb","hcg"],0,(function(t){return(t%360+360)%360})),saturationl:l("hsl",1,h(100)),lightness:l("hsl",2,h(100)),saturationv:l("hsv",1,h(100)),value:l("hsv",2,h(100)),chroma:l("hcg",1,h(100)),gray:l("hcg",2,h(100)),white:l("hwb",1,h(100)),wblack:l("hwb",2,h(100)),cyan:l("cmyk",0,h(100)),magenta:l("cmyk",1,h(100)),yellow:l("cmyk",2,h(100)),black:l("cmyk",3,h(100)),x:l("xyz",0,h(100)),y:l("xyz",1,h(100)),z:l("xyz",2,h(100)),l:l("lab",0,h(100)),a:l("lab",1),b:l("lab",2),keyword:function(t){return arguments.length?new c(t):i[this.model].keyword(this.color)},hex:function(t){return arguments.length?new c(t):r.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((.055+r)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity();t=t.luminosity();return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)},level:function(t){return t=this.contrast(t),7.1<=t?"AAA":4.5<=t?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color;t=.3*t[0]+.59*t[1]+.11*t[2];return c.rgb(t,t,t)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),n=e.color[0];return e.color[0]=(n=(n+t)%360)<0?360+n:n,e},mix:function(t,e){var n,r,i,o;if(t&&t.rgb)return n=t.rgb(),r=this.rgb(),o=1-(i=(1+((i=2*(e=void 0===e?.5:e)-1)*(o=n.alpha()-r.alpha())==-1?i:(i+o)/(1+i*o)))/2),c.rgb(i*n.red()+o*r.red(),i*n.green()+o*r.green(),i*n.blue()+o*r.blue(),n.alpha()*e+r.alpha()*(1-e));throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t)}},Object.keys(i).forEach((function(t){var e;-1===a.indexOf(t)&&(e=i[t].channels,c.prototype[t]=function(){var n,r;return this.model===t?new c(this):arguments.length?new c(arguments,t):(n="number"==typeof arguments[e]?e:this.valpha,new c((r=i[this.model][t].raw(this.color),(Array.isArray(r)?r:[r]).concat(n)),t))},c[t]=function(n){return new c(n="number"==typeof n?f(o.call(arguments),e):n,t)})})),t.exports=c},13099:function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},96077:function(t,e,n){var r=n(70111);t.exports=function(t){if(r(t)||null===t)return t;throw TypeError("Can't set "+String(t)+" as a prototype")}},31530:function(t,e,n){"use strict";var r=n(28710).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},25787:function(t){t.exports=function(t,e,n){if(t instanceof e)return t;throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}},19670:function(t,e,n){var r=n(70111);t.exports=function(t){if(r(t))return t;throw TypeError(String(t)+" is not an object")}},24019:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},90260:function(t,e,n){"use strict";function r(t){return!!u(t)&&(t=l(t),c(A,t)||c(C,t))}var i,o=n(24019),a=n(19781),s=n(17854),u=n(70111),c=n(86656),l=n(70648),h=n(68880),f=n(31320),d=n(3070).f,p=n(79518),g=n(27674),m=n(5112),v=(n=n(69711),s.Int8Array),y=v&&v.prototype,b=s.Uint8ClampedArray,x=(b=b&&b.prototype,v&&p(v)),_=y&&p(y),w=Object.prototype,S=w.isPrototypeOf,E=(m=m("toStringTag"),n("TYPED_ARRAY_TAG")),M=o&&!!g&&"Opera"!==l(s.opera),A=(n=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8}),C={BigInt64Array:8,BigUint64Array:8};for(i in A)s[i]||(M=!1);if((!M||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},M))for(i in A)s[i]&&g(s[i],x);if((!M||!_||_===w)&&(_=x.prototype,M))for(i in A)s[i]&&g(s[i].prototype,_);if(M&&p(b)!==_&&g(b,_),a&&!c(_,m))for(i in n=!0,d(_,m,{get:function(){return u(this)?this[E]:void 0}}),A)s[i]&&h(s[i],E,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:n&&E,aTypedArray:function(t){if(r(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(g){if(S.call(x,t))return t}else for(var e in A)if(c(A,i)&&(e=s[e],e&&(t===e||S.call(e,t))))return t;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n){if(a){if(n)for(var r in A)r=s[r],r&&c(r.prototype,t)&&delete r.prototype[t];_[t]&&!n||f(_,t,!n&&M&&y[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(a){if(g){if(n)for(r in A)(i=s[r])&&c(i,t)&&delete i[t];if(x[t]&&!n)return;try{return f(x,t,!n&&M&&v[t]||e)}catch(t){}}for(r in A)!(i=s[r])||i[t]&&!n||f(i,t,e)}},isView:function(t){return!!u(t)&&("DataView"===(t=l(t))||c(A,t)||c(C,t))},isTypedArray:r,TypedArray:x,TypedArrayPrototype:_}},13331:function(t,e,n){"use strict";function r(t){return[255&t]}function i(t){return[255&t,t>>8&255]}function o(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function a(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function s(t){return z(t,23,4)}function u(t){return z(t,52,8)}function c(t,e){A(t[N],e,{get:function(){return k(this)[e]}})}function l(t,e,n,r){if(n=_(n),t=k(t),n+e>t.byteLength)throw F(D);var i=k(t.buffer).bytes;n+=t.byteOffset,t=i.slice(n,n+e);return r?t:t.reverse()}function h(t,e,n,r,i,o){if(n=_(n),t=k(t),n+e>t.byteLength)throw F(D);for(var a=k(t.buffer).bytes,s=n+t.byteOffset,u=r(+i),c=0;c<e;c++)a[s+c]=u[o?c:e-c-1]}var f=n(17854),d=n(19781),p=n(24019),g=n(68880),m=n(12248),v=n(47293),y=n(25787),b=n(99958),x=n(17466),_=n(57067),w=n(11179),S=n(79518),E=n(27674),M=n(8006).f,A=n(3070).f,C=n(21285),T=n(58003),k=(n=n(29909),n.get),O=n.set,P="ArrayBuffer",I="DataView",N="prototype",D="Wrong index",L=f[P],R=L,B=f[I],j=(n=B&&B[N],Object.prototype),F=f.RangeError,z=w.pack,U=w.unpack;if(p){if(!v((function(){L(1)}))||!v((function(){new L(-1)}))||v((function(){return new L,new L(1.5),new L(NaN),L.name!=P}))){f=(R=function(t){return y(this,R),new L(_(t))})[N]=L[N];for(var G,V=M(L),W=0;V.length>W;)(G=V[W++])in R||g(R,G,L[G]);f.constructor=R}E&&S(n)!==j&&E(n,j);w=new B(new R(2));var H=n.setInt8;w.setInt8(0,2147483648),w.setInt8(1,2147483649),!w.getInt8(0)&&w.getInt8(1)||m(n,{setInt8:function(t,e){H.call(this,t,e<<24>>24)},setUint8:function(t,e){H.call(this,t,e<<24>>24)}},{unsafe:!0})}else R=function(t){y(this,R,P),t=_(t),O(this,{bytes:C.call(new Array(t),0),byteLength:t}),d||(this.byteLength=t)},B=function(t,e,n){y(this,B,I),y(t,R,I);var r=k(t).byteLength;e=b(e);if(e<0||r<e)throw F("Wrong offset");if(r<e+(n=void 0===n?r-e:x(n)))throw F("Wrong length");O(this,{buffer:t,byteLength:n,byteOffset:e}),d||(this.buffer=t,this.byteLength=n,this.byteOffset=e)},d&&(c(R,"byteLength"),c(B,"buffer"),c(B,"byteLength"),c(B,"byteOffset")),m(B[N],{getInt8:function(t){return l(this,1,t)[0]<<24>>24},getUint8:function(t){return l(this,1,t)[0]},getInt16:function(t){return t=l(this,2,t,1<arguments.length?arguments[1]:void 0),(t[1]<<8|t[0])<<16>>16},getUint16:function(t){return t=l(this,2,t,1<arguments.length?arguments[1]:void 0),t[1]<<8|t[0]},getInt32:function(t){return a(l(this,4,t,1<arguments.length?arguments[1]:void 0))},getUint32:function(t){return a(l(this,4,t,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(t){return U(l(this,4,t,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(t){return U(l(this,8,t,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(t,e){h(this,1,t,r,e)},setUint8:function(t,e){h(this,1,t,r,e)},setInt16:function(t,e){h(this,2,t,i,e,2<arguments.length?arguments[2]:void 0)},setUint16:function(t,e){h(this,2,t,i,e,2<arguments.length?arguments[2]:void 0)},setInt32:function(t,e){h(this,4,t,o,e,2<arguments.length?arguments[2]:void 0)},setUint32:function(t,e){h(this,4,t,o,e,2<arguments.length?arguments[2]:void 0)},setFloat32:function(t,e){h(this,4,t,s,e,2<arguments.length?arguments[2]:void 0)},setFloat64:function(t,e){h(this,8,t,u,e,2<arguments.length?arguments[2]:void 0)}});T(R,P),T(B,I),t.exports={ArrayBuffer:R,DataView:B}},21285:function(t,e,n){"use strict";var r=n(47908),i=n(51400),o=n(17466);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(1<a?arguments[1]:void 0,n),u=(a=2<a?arguments[2]:void 0,void 0===a?n:i(a,n));s<u;)e[s++]=t;return e}},41318:function(t,e,n){function r(t){return function(e,n,r){var s,u=i(e),c=o(u.length),l=a(r,c);if(t&&n!=n){for(;l<c;)if((s=u[l++])!=s)return!0}else for(;l<c;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}var i=n(45656),o=n(17466),a=n(51400);t.exports={includes:r(!0),indexOf:r(!1)}},42092:function(t,e,n){function r(t){var e=1==t,n=2==t,r=3==t,l=4==t,h=6==t,f=7==t,d=5==t||h;return function(p,g,m,v){for(var y,b,x=a(p),_=o(x),w=i(g,m,3),S=s(_.length),E=0,M=(g=v||u,e?g(p,S):n||f?g(p,0):void 0);E<S;E++)if((d||E in _)&&(b=w(y=_[E],E,x),t))if(e)M[E]=b;else if(b)switch(t){case 3:return!0;case 5:return y;case 6:return E;case 2:c.call(M,y)}else switch(t){case 4:return!1;case 7:c.call(M,y)}return h?-1:r||l?l:M}}var i=n(49974),o=n(68361),a=n(47908),s=n(17466),u=n(65417),c=[].push;t.exports={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6),filterOut:r(7)}},9341:function(t,e,n){"use strict";var r=n(47293);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},53671:function(t,e,n){function r(t){return function(e,n,r,u){i(n);var c=o(e),l=a(c),h=s(c.length),f=t?h-1:0,d=t?-1:1;if(r<2)for(;;){if(f in l){u=l[f],f+=d;break}if(f+=d,t?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?0<=f:f<h;f+=d)f in l&&(u=n(u,l[f],f,c));return u}}var i=n(13099),o=n(47908),a=n(68361),s=n(17466);t.exports={left:r(!1),right:r(!0)}},65417:function(t,e,n){var r=n(70111),i=n(43157),o=n(5112)("species");t.exports=function(t,e){var n;return new(void 0===(n=i(t)&&("function"==typeof(n=t.constructor)&&(n===Array||i(n.prototype))||r(n)&&null===(n=n[o]))?void 0:n)?Array:n)(0===e?0:e)}},17072:function(t,e,n){var r=n(5112)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},84326:function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},70648:function(t,e,n){var r=n(51694),i=n(84326),o=n(5112)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=Object(t),o))?e:a?i(t):"Object"==(e=i(t))&&"function"==typeof t.callee?"Arguments":e}},99920:function(t,e,n){var r=n(86656),i=n(53887),o=n(31236),a=n(3070);t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},49920:function(t,e,n){n=n(47293),t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},68880:function(t,e,n){var r=n(19781),i=n(3070),o=n(79114);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},79114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},19781:function(t,e,n){n=n(47293),t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},80317:function(t,e,n){var r=n(17854),i=(n=n(70111),r.document),o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},35268:function(t,e,n){var r=n(84326);n=n(17854);t.exports="process"==r(n.process)},88113:function(t,e,n){n=n(35005),t.exports=n("navigator","userAgent")||""},7392:function(t,e,n){var r,i,o=n(17854);n=n(88113),o=o.process,o=o&&o.versions,o=o&&o.v8;o?i=(r=o.split("."))[0]+r[1]:n&&(!(r=n.match(/Edge\/(\d+)/))||74<=r[1])&&(r=n.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},80748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},82109:function(t,e,n){var r=n(17854),i=n(31236).f,o=n(68880),a=n(31320),s=n(83505),u=n(99920),c=n(54705);t.exports=function(t,e){var n,l,h,f=t.target,d=t.global,p=t.stat,g=d?r:p?r[f]||s(f,{}):(r[f]||{}).prototype;if(g)for(n in e){if(l=e[n],h=t.noTargetGet?(h=i(g,n))&&h.value:g[n],!c(d?n:f+(p?".":"#")+n,t.forced)&&void 0!==h){if(typeof l==typeof h)continue;u(l,h)}(t.sham||h&&h.sham)&&o(l,"sham",!0),a(g,n,l,t)}}},47293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},27007:function(t,e,n){"use strict";n(74916);var r=n(31320),i=n(47293),o=n(5112),a=n(68880),s=o("species"),u=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),c="$0"==="a".replace(/./,"$0"),l=(n=o("replace"),!!/./[n]&&""===/./[n]("a","$0")),h=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)},t="ab".split(t);return 2!==t.length||"a"!==t[0]||"b"!==t[1]}));t.exports=function(t,e,n,f){var d,p,g=o(t),m=!i((function(){var e={};return e[g]=function(){return 7},7!=""[t](e)})),v=m&&!i((function(){var e=!1,n=/a/;return"split"===t&&((n={constructor:{}}).constructor[s]=function(){return n},n.flags="",n[g]=/./[g]),n.exec=function(){return e=!0,null},n[g](""),!e}));m&&v&&("replace"!==t||u&&c&&!l)&&("split"!==t||h)||(d=/./[g],n=(v=n(g,""[t],(function(t,e,n,r,i){return e.exec===RegExp.prototype.exec?m&&!i?{done:!0,value:d.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:l}))[0],p=v[1],r(String.prototype,t,n),r(RegExp.prototype,g,2==e?function(t,e){return p.call(t,this,e)}:function(t){return p.call(t,this)})),f&&a(RegExp.prototype[g],"sham",!0)}},49974:function(t,e,n){var r=n(13099);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},35005:function(t,e,n){function r(t){return"function"==typeof t?t:void 0}var i=n(40857),o=n(17854);t.exports=function(t,e){return arguments.length<2?r(i[t])||r(o[t]):i[t]&&i[t][e]||o[t]&&o[t][e]}},71246:function(t,e,n){var r=n(70648),i=n(97497),o=n(5112)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},10647:function(t,e,n){var r=n(47908),i=Math.floor,o="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,u,c,l){var h=n+t.length,f=u.length,d=s;return void 0!==c&&(c=r(c),d=a),o.call(l,d,(function(r,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(h);case"<":a=c[o.slice(1,-1)];break;default:var s,l=+o;if(0==l)return r;if(f<l)return 0!==(s=i(l/10))&&s<=f?void 0===u[s-1]?o.charAt(1):u[s-1]+o.charAt(1):r;a=u[l-1]}return void 0===a?"":a}))}},17854:function(t,e,n){function r(t){return t&&t.Math==Math&&t}t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},86656:function(t,e,n){var r=n(47908),i={}.hasOwnProperty;t.exports=function(t,e){return i.call(r(t),e)}},3501:function(t){t.exports={}},60490:function(t,e,n){n=n(35005),t.exports=n("document","documentElement")},64664:function(t,e,n){var r=n(19781),i=n(47293),o=n(80317);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},11179:function(t){var e=Math.abs,n=Math.pow,r=Math.floor,i=Math.log,o=Math.LN2;t.exports={pack:function(t,a,s){var u,c,l,h=new Array(s),f=8*s-a-1,d=(s=(1<<f)-1,s>>1),p=23===a?n(2,-24)-n(2,-77):0,g=t<0||0===t&&1/t<0?1:0,m=0;for((t=e(t))!=t||t===1/0?(c=t!=t?1:0,u=s):(u=r(i(t)/o),t*(l=n(2,-u))<1&&(u--,l*=2),2<=(t+=1<=u+d?p/l:p*n(2,1-d))*l&&(u++,l/=2),s<=u+d?(c=0,u=s):1<=u+d?(c=(t*l-1)*n(2,a),u+=d):(c=t*n(2,d-1)*n(2,a),u=0));8<=a;h[m++]=255&c,c/=256,a-=8);for(u=u<<a|c,f+=a;0<f;h[m++]=255&u,u/=256,f-=8);return h[--m]|=128*g,h},unpack:function(t,e){var r,i=t.length,o=8*i-e-1,a=(1<<o)-1,s=a>>1,u=o-7,c=i-1,l=(o=t[c--],127&o);for(o>>=7;0<u;l=256*l+t[c],c--,u-=8);for(r=l&(1<<-u)-1,l>>=-u,u+=e;0<u;r=256*r+t[c],c--,u-=8);if(0===l)l=1-s;else{if(l===a)return r?NaN:o?-1/0:1/0;r+=n(2,e),l-=s}return(o?-1:1)*r*n(2,l-e)}}},68361:function(t,e,n){var r=n(47293),i=n(84326),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},79587:function(t,e,n){var r=n(70111),i=n(27674);t.exports=function(t,e,n){return i&&"function"==typeof(e=e.constructor)&&e!==n&&r(e=e.prototype)&&e!==n.prototype&&i(t,e),t}},42788:function(t,e,n){n=n(5465);var r=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(t){return r.call(t)}),t.exports=n.inspectSource},29909:function(t,e,n){var r,i,o,a,s,u,c,l,h=n(68536),f=n(17854),d=n(70111),p=n(68880),g=n(86656),m=n(5465),v=n(6200),y=(n=n(3501),"Object already initialized");f=f.WeakMap;c=h?(r=m.state||(m.state=new f),i=r.get,o=r.has,a=r.set,s=function(t,e){if(o.call(r,t))throw new TypeError(y);return e.facade=t,a.call(r,t,e),e},u=function(t){return i.call(r,t)||{}},function(t){return o.call(r,t)}):(n[l=v("state")]=!0,s=function(t,e){if(g(t,l))throw new TypeError(y);return e.facade=t,p(t,l,e),e},u=function(t){return g(t,l)?t[l]:{}},function(t){return g(t,l)}),t.exports={set:s,get:u,has:c,enforce:function(t){return c(t)?u(t):s(t,{})},getterFor:function(t){return function(e){if(d(e)&&(e=u(e)).type===t)return e;throw TypeError("Incompatible receiver, "+t+" required")}}}},97659:function(t,e,n){var r=n(5112),i=n(97497),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},43157:function(t,e,n){var r=n(84326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},54705:function(t,e,n){function r(t,e){return(t=s[a(t)])==c||t!=u&&("function"==typeof e?i(e):!!e)}var i=n(47293),o=/#|\.prototype\./,a=r.normalize=function(t){return String(t).replace(o,".").toLowerCase()},s=r.data={},u=r.NATIVE="N",c=r.POLYFILL="P";t.exports=r},70111:function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},31913:function(t){t.exports=!1},97497:function(t){t.exports={}},30133:function(t,e,n){var r=n(35268),i=n(7392);n=n(47293);t.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!Symbol.sham&&(r?38===i:37<i&&i<41)}))},68536:function(t,e,n){var r=n(17854);n=n(42788),r=r.WeakMap;t.exports="function"==typeof r&&/native code/.test(n(r))},70030:function(t,e,n){function r(){}var i,o=n(19670),a=n(36048),s=n(80748),u=n(3501),c=n(60490),l=n(80317),h=(n=n(6200),"prototype"),f="script",d=n("IE_PROTO"),p=function(t){return"<"+f+">"+t+"</"+f+">"},g=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(t){}g=i?((t=i).write(p("")),t.close(),e=t.parentWindow.Object,t=null,e):(t=l("iframe"),e="java"+f+":",t.style.display="none",c.appendChild(t),t.src=String(e),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var t,e,n=s.length;n--;)delete g[h][s[n]];return g()};u[d]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(r[h]=o(t),n=new r,r[h]=null,n[d]=t):n=g(),void 0===e?n:a(n,e)}},36048:function(t,e,n){var r=n(19781),i=n(3070),o=n(19670),a=n(81956);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),s=r.length,u=0;u<s;)i.f(t,n=r[u++],e[n]);return t}},3070:function(t,e,n){var r=n(19781),i=n(64664),o=n(19670),a=n(57593),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},31236:function(t,e,n){var r=n(19781),i=n(55296),o=n(79114),a=n(45656),s=n(57593),u=n(86656),c=n(64664),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(t){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},8006:function(t,e,n){var r=n(16324),i=n(80748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},25181:function(t,e){e.f=Object.getOwnPropertySymbols},79518:function(t,e,n){var r=n(86656),i=n(47908),o=n(6200),a=(n=n(49920),o("IE_PROTO")),s=Object.prototype;t.exports=n?Object.getPrototypeOf:function(t){return t=i(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},16324:function(t,e,n){var r=n(86656),i=n(45656),o=n(41318).indexOf,a=n(3501);t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;e.length>u;)!r(s,n=e[u++])||~o(c,n)||c.push(n);return c}},81956:function(t,e,n){var r=n(16324),i=n(80748);t.exports=Object.keys||function(t){return r(t,i)}},55296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){return t=r(this,t),!!t&&t.enumerable}:n},27674:function(t,e,n){var r=n(19670),i=n(96077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(n){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},53887:function(t,e,n){var r=n(35005),i=n(8006),o=n(25181),a=n(19670);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},40857:function(t,e,n){n=n(17854),t.exports=n},12248:function(t,e,n){var r=n(31320);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},31320:function(t,e,n){var r=n(17854),i=n(68880),o=n(86656),a=n(83505),s=n(42788),u=(n=n(29909),n.get),c=n.enforce,l=String(String).split("String");(t.exports=function(t,e,n,s){var u,h=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable;s=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),(u=c(n)).source||(u.source=l.join("string"==typeof e?e:""))),t===r?f?t[e]=n:a(e,n):(h?!s&&t[e]&&(f=!0):delete t[e],f?t[e]=n:i(t,e,n))})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},97651:function(t,e,n){var r=n(84326),i=n(22261);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){if(n=n.call(t,e),"object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},22261:function(t,e,n){"use strict";var r,i,o=n(67066),a=n(52999),s=(n=n(72309),RegExp.prototype.exec),u=n("native-string-replace",String.prototype.replace),c=(n=s,r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=a.UNSUPPORTED_Y||a.BROKEN_CARET,h=void 0!==/()??/.exec("")[1];t.exports=n=c||h||l?function(t){var e,n,r,i,a=this,f=l&&a.sticky,d=o.call(a),p=a.source,g=0,m=t;return f&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),m=String(t).slice(a.lastIndex),0<a.lastIndex&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,g++),n=new RegExp("^(?:"+p+")",d)),h&&(n=new RegExp("^"+p+"$(?!\\s)",d)),c&&(e=a.lastIndex),r=s.call(f?n:a,m),f?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:c&&r&&(a.lastIndex=a.global?r.index+r[0].length:e),h&&r&&1<r.length&&u.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}:n},67066:function(t,e,n){"use strict";var r=n(19670);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},52999:function(t,e,n){"use strict";function r(t,e){return RegExp(t,e)}n=n(47293),e.UNSUPPORTED_Y=n((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},84488:function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},83505:function(t,e,n){var r=n(17854),i=n(68880);t.exports=function(e,n){try{i(r,e,n)}catch(t){r[e]=n}return n}},96340:function(t,e,n){"use strict";var r=n(35005),i=n(3070),o=n(5112),a=n(19781),s=o("species");t.exports=function(t){t=r(t);var e=i.f;a&&t&&!t[s]&&e(t,s,{configurable:!0,get:function(){return this}})}},58003:function(t,e,n){var r=n(3070).f,i=n(86656),o=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},6200:function(t,e,n){var r=n(72309),i=n(69711),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},5465:function(t,e,n){var r=n(17854),i=(n=n(83505),"__core-js_shared__");r=r[i]||n(i,{});t.exports=r},72309:function(t,e,n){var r=n(31913),i=n(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.11.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},28710:function(t,e,n){function r(t){return function(e,n){e=String(o(e)),n=i(n);var r,a=e.length;return n<0||a<=n?t?"":void 0:(r=e.charCodeAt(n))<55296||56319<r||n+1===a||(a=e.charCodeAt(n+1))<56320||57343<a?t?e.charAt(n):r:t?e.slice(n,n+2):a-56320+(r-55296<<10)+65536}}var i=n(99958),o=n(84488);t.exports={codeAt:r(!1),charAt:r(!0)}},51400:function(t,e,n){var r=n(99958),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},57067:function(t,e,n){var r=n(99958),i=n(17466);t.exports=function(t){if(void 0===t)return 0;t=r(t);var e=i(t);if(t!==e)throw RangeError("Wrong length or index");return e}},45656:function(t,e,n){var r=n(68361),i=n(84488);t.exports=function(t){return r(i(t))}},99958:function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?n:e)(t)}},17466:function(t,e,n){var r=n(99958),i=Math.min;t.exports=function(t){return 0<t?i(r(t),9007199254740991):0}},47908:function(t,e,n){var r=n(84488);t.exports=function(t){return Object(r(t))}},84590:function(t,e,n){var r=n(73002);t.exports=function(t,e){if(t=r(t),t%e)throw RangeError("Wrong offset");return t}},73002:function(t,e,n){var r=n(99958);t.exports=function(t){if(t=r(t),t<0)throw RangeError("The argument can't be less than 0");return t}},57593:function(t,e,n){var r=n(70111);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t))||"function"==typeof(n=t.valueOf)&&!r(i=n.call(t))||!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},51694:function(t,e,n){var r={};r[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(r)},19843:function(t,e,n){"use strict";function r(t,e){for(var n=0,r=e.length,i=new(q(t))(r);n<r;)i[n]=e[n++];return i}function i(t,e){B(t,e,{get:function(){return L(this)[e]}})}function o(t){return t instanceof U||"ArrayBuffer"==(t=S(t))||"SharedArrayBuffer"==t}function a(t,e){return X(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)}function s(t,e){return a(t,e=_(e,!0))?m(2,t[e]):j(t,e)}function u(t,e,n){return!(a(t,e=_(e,!0))&&E(n)&&w(n,"value"))||w(n,"get")||w(n,"set")||n.configurable||w(n,"writable")&&!n.writable||w(n,"enumerable")&&!n.enumerable?B(t,e,n):(t[e]=n.value,t)}var c=n(82109),l=n(17854),h=n(19781),f=n(63832),d=n(90260),p=n(13331),g=n(25787),m=n(79114),v=n(68880),y=n(17466),b=n(57067),x=n(84590),_=n(57593),w=n(86656),S=n(70648),E=n(70111),M=n(70030),A=n(27674),C=n(8006).f,T=n(97321),k=n(42092).forEach,O=n(96340),P=n(3070),I=n(31236),N=n(29909),D=n(79587),L=N.get,R=N.set,B=P.f,j=I.f,F=Math.round,z=l.RangeError,U=p.ArrayBuffer,G=p.DataView,V=d.NATIVE_ARRAY_BUFFER_VIEWS,W=d.TYPED_ARRAY_TAG,H=d.TypedArray,Y=d.TypedArrayPrototype,q=d.aTypedArrayConstructor,X=d.isTypedArray,K="BYTES_PER_ELEMENT",Z="Wrong length";h?(V||(I.f=s,P.f=u,i(Y,"buffer"),i(Y,"byteOffset"),i(Y,"byteLength"),i(Y,"length")),c({target:"Object",stat:!0,forced:!V},{getOwnPropertyDescriptor:s,defineProperty:u}),t.exports=function(t,e,n){function i(t,e){B(t,e,{get:function(){var t=this,n=e;return(t=L(t)).view[u](n*a+t.byteOffset,!0)},set:function(t){var r=this,i=e;r=L(r),n&&(t=(t=F(t))<0?0:255<t?255:255&t),r.view[h](i*a+r.byteOffset,t,!0)},enumerable:!0})}var a=t.match(/\d+$/)[0]/8,s=t+(n?"Clamped":"")+"Array",u="get"+t,h="set"+t,d=l[s],p=d,m=(t=p&&p.prototype,{});V?f&&(p=e((function(t,e,n,i){return g(t,p,s),D(E(e)?o(e)?void 0!==i?new d(e,x(n,a),i):void 0!==n?new d(e,x(n,a)):new d(e):X(e)?r(p,e):T.call(p,e):new d(b(e)),t,p)})),A&&A(p,H),k(C(d),(function(t){t in p||v(p,t,d[t])})),p.prototype=t):(p=e((function(t,e,n,u){g(t,p,s);var c,l,h=0,f=0;if(E(e)){if(!o(e))return X(e)?r(p,e):T.call(p,e);var d=e;f=x(n,a),n=e.byteLength;if(void 0===u){if(n%a)throw z(Z);if((c=n-f)<0)throw z(Z)}else if(n<(c=y(u)*a)+f)throw z(Z);l=c/a}else l=b(e),d=new U(c=l*a);for(R(t,{buffer:d,byteOffset:f,byteLength:c,length:l,view:new G(d)});h<l;)i(t,h++)})),A&&A(p,H),t=p.prototype=M(Y)),t.constructor!==p&&v(t,"constructor",p),W&&v(t,W,s),c({global:!0,forced:(m[s]=p)!=d,sham:!V},m),K in p||v(p,K,a),K in t||v(t,K,a),O(s)}):t.exports=function(){}},63832:function(t,e,n){var r=n(17854),i=n(47293),o=n(17072),a=(n=n(90260).NATIVE_ARRAY_BUFFER_VIEWS,r.ArrayBuffer),s=r.Int8Array;t.exports=!n||!i((function(){s(1)}))||!i((function(){new s(-1)}))||!o((function(t){new s,new s(null),new s(1.5),new s(t)}),!0)||i((function(){return 1!==new s(new a(2),1,void 0).length}))},97321:function(t,e,n){var r=n(47908),i=n(17466),o=n(71246),a=n(97659),s=n(49974),u=n(90260).aTypedArrayConstructor;t.exports=function(t){var e,n,c,l,h,f,d=r(t),p=arguments.length,g=1<p?arguments[1]:void 0,m=void 0!==g,v=o(d);if(null!=v&&!a(v))for(f=(h=v.call(d)).next,d=[];!(l=f.call(h)).done;)d.push(l.value);for(m&&2<p&&(g=s(g,arguments[2],2)),n=i(d.length),c=new(u(this))(n),e=0;e<n;e++)c[e]=m?g(d[e],e):d[e];return c}},69711:function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+n).toString(36)}},43307:function(t,e,n){n=n(30133),t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(t,e,n){var r=n(17854),i=n(72309),o=n(86656),a=n(69711),s=n(30133),u=(n=n(43307),i("wks")),c=r.Symbol,l=n?c:c&&c.withoutSetter||a;t.exports=function(t){return o(u,t)&&(s||"string"==typeof u[t])||(s&&o(c,t)?u[t]=c[t]:u[t]=l("Symbol."+t)),u[t]}},85827:function(t,e,n){"use strict";var r=n(82109),i=n(53671).left,o=n(9341),a=n(7392);n=n(35268);r({target:"Array",proto:!0,forced:!o("reduce")||!n&&79<a&&a<83},{reduce:function(t){return i(this,t,arguments.length,1<arguments.length?arguments[1]:void 0)}})},74916:function(t,e,n){"use strict";var r=n(82109);n=n(22261);r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},15306:function(t,e,n){"use strict";var r=n(27007),i=n(19670),o=n(17466),a=n(99958),s=n(84488),u=n(31530),c=n(10647),l=n(97651),h=Math.max,f=Math.min;r("replace",2,(function(t,e,n,r){var d=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=r.REPLACE_KEEPS_$0,g=d?"$":"$0";return[function(n,r){var i=s(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!d&&p||"string"==typeof r&&-1===r.indexOf(g)){var s=n(e,t,this,r);if(s.done)return s.value}for(var m,v=i(t),y=String(this),b="function"==typeof r,x=(b||(r=String(r)),v.global),_=(x&&(m=v.unicode,v.lastIndex=0),[]);null!==(A=l(v,y))&&(_.push(A),x);)""===String(A[0])&&(v.lastIndex=u(y,o(v.lastIndex),m));for(var w,S="",E=0,M=0;M<_.length;M++){for(var A=_[M],C=String(A[0]),T=h(f(a(A.index),y.length),0),k=[],O=1;O<A.length;O++)k.push(void 0===(w=A[O])?w:String(w));var P=A.groups,I=b?(I=[C].concat(k,T,y),void 0!==P&&I.push(P),String(r.apply(void 0,I))):c(C,y,T,k,P,r);E<=T&&(S+=y.slice(E,T)+I,E=T+C.length)}return S+y.slice(E)}]}))},82472:function(t,e,n){n(19843)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},31969:function(t,e,n){"use strict";n.r(e),n.d(e,{BRIDGE_GRAPH_NAME:function(){return a},GraphType:function(){return c},HierarchyNodeType:function(){return l},InclusionType:function(){return u},LAYOUT_CONFIG:function(){return r},NodeType:function(){return s},ROOT_NAME:function(){return o},buildGraph:function(){return Wo},flatGraph:function(){return Ho},getEdges:function(){return Yo},mergeConfig:function(){return i}});const r={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function i(t={},e=r){e=JSON.parse(JSON.stringify(e));var n=(null==(n=null==t?void 0:t.graph)?void 0:n.meta)||{},i=(null==(i=null==t?void 0:t.subScene)?void 0:i.meta)||{},o=(null==(o=null==t?void 0:t.nodeSize)?void 0:o.meta)||{},a=(t=(null==(t=null==t?void 0:t.nodeSize)?void 0:t.node)||{},e.nodeSize.bridge);return{graph:{meta:Object.assign(e.graph.meta,n)},subScene:{meta:Object.assign(e.subScene.meta,i)},nodeSize:{meta:Object.assign(e.nodeSize.meta,o),node:Object.assign(e.nodeSize.node,t),bridge:a}}}const o="◬ROOT◬",a="◬BRIDGE_GRAPH◬";(e=s=s||{})[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE",(e=u=u||{})[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED",(e=c=c||{})[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE",(e=l=l||{})[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES";var s,u,c,l;e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function h(t,e){return t(e={exports:{}},e.exports),e.exports}function f(t,e){for(var n=t.length;n--;)if(d(t[n][0],e))return n;return-1}var d=function(t,e){return t===e||t!=t&&e!=e},p=Array.prototype.splice;function g(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function m(t,e){return t=null==t?void 0:t[e],T(e=t)&&!P(e)&&(k(e)?R:D).test(N(e))?t:void 0}g.prototype.clear=function(){this.__data__=[],this.size=0},g.prototype.delete=function(t){var e=this.__data__;t=f(e,t);return!(t<0||(t==e.length-1?e.pop():p.call(e,t,1),--this.size,0))},g.prototype.get=function(t){var e=this.__data__;t=f(e,t);return t<0?void 0:e[t][1]},g.prototype.has=function(t){return-1<f(this.__data__,t)},g.prototype.set=function(t,e){var n=this.__data__,r=f(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var v=g,y="object"==typeof e&&e&&e.Object===Object&&e,b=(n="object"==typeof self&&self&&self.Object===Object&&self,y||n||Function("return this")()),x=(e=b.Symbol,n=Object.prototype,n.hasOwnProperty),_=n.toString,w=e?e.toStringTag:void 0,S=function(t){var e=x.call(t,w),n=t[w];try{var r=!(t[w]=void 0)}catch(t){}var i=_.call(t);return r&&(e?t[w]=n:delete t[w]),i},E=Object.prototype.toString,M=function(t){return E.call(t)},A=e?e.toStringTag:void 0,C=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(A&&A in Object(t)?S:M)(t)},T=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},k=function(t){return!!T(t)&&("[object Function]"==(t=C(t))||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t)},O=(n=b["__core-js_shared__"],(n=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+n:""),P=function(t){return!!O&&O in t},I=Function.prototype.toString,N=function(t){if(null!=t){try{return I.call(t)}catch(t){}try{return t+""}catch(t){}}return""},D=/^\[object .+?Constructor\]$/,L=(n=Function.prototype,Object.prototype),R=(n=n.toString,L=L.hasOwnProperty,RegExp("^"+n.call(L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$")),B=m(b,"Map"),j=m(Object,"create"),F=Object.prototype.hasOwnProperty,z=Object.prototype.hasOwnProperty;function U(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function G(t,e){return t=t.__data__,W(e)?t["string"==typeof e?"string":"hash"]:t.map}U.prototype.clear=function(){this.__data__=j?j(null):{},this.size=0},U.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},U.prototype.get=function(t){var e,n=this.__data__;return j?"__lodash_hash_undefined__"===(e=n[t])?void 0:e:F.call(n,t)?n[t]:void 0},U.prototype.has=function(t){var e=this.__data__;return j?void 0!==e[t]:z.call(e,t)},U.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=j&&void 0===e?"__lodash_hash_undefined__":e,this};var V=U,W=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};function H(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}H.prototype.clear=function(){this.size=0,this.__data__={hash:new V,map:new(B||v),string:new V}},H.prototype.delete=function(t){return t=G(this,t).delete(t),this.size-=t?1:0,t},H.prototype.get=function(t){return G(this,t).get(t)},H.prototype.has=function(t){return G(this,t).has(t)},H.prototype.set=function(t,e){var n=G(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var Y=H;function q(t){t=this.__data__=new v(t),this.size=t.size}function X(t,e,n,r){var i=!n;n=n||{};for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),(i?at:ut)(n,s,u)}return n}function K(t){return lt(t)&&"[object Arguments]"==C(t)}function Z(){return!1}function $(t){return function(e){return t(e)}}function J(t,e){return function(n){return t(e(n))}}function Q(){return[]}function tt(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function et(t,e,n){return e=e(t),pt(t)?e:tt(e,n(t))}function nt(t){var e=new t.constructor(t.byteLength);return new oe(e).set(new oe(t)),e}q.prototype.clear=function(){this.__data__=new v,this.size=0},q.prototype.delete=function(t){var e=this.__data__;t=e.delete(t);return this.size=e.size,t},q.prototype.get=function(t){return this.__data__.get(t)},q.prototype.has=function(t){return this.__data__.has(t)},q.prototype.set=function(t,e){var n=this.__data__;if(n instanceof v){var r=n.__data__;if(!B||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Y(r)}return n.set(t,e),this.size=n.size,this};var rt=q,it=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},ot=function(){try{var t=m(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),at=function(t,e,n){"__proto__"==e&&ot?ot(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},st=Object.prototype.hasOwnProperty,ut=function(t,e,n){var r=t[e];st.call(t,e)&&d(r,n)&&(void 0!==n||e in t)||at(t,e,n)},ct=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},lt=function(t){return null!=t&&"object"==typeof t},ht=(n=Object.prototype,n.hasOwnProperty),ft=n.propertyIsEnumerable,dt=K(function(){return arguments}())?K:function(t){return lt(t)&&ht.call(t,"callee")&&!ft.call(t,"callee")},pt=Array.isArray,gt=h((function(t,e){e=e&&!e.nodeType&&e;var n=e&&t&&!t.nodeType&&t;n=n&&n.exports===e?b.Buffer:void 0,e=(n?n.isBuffer:void 0)||Z;t.exports=e})),mt=/^(?:0|[1-9]\d*)$/,vt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&mt.test(t))&&-1<t&&t%1==0&&t<e},yt=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991},bt={},xt=(L=(bt["[object Float32Array]"]=bt["[object Float64Array]"]=bt["[object Int8Array]"]=bt["[object Int16Array]"]=bt["[object Int32Array]"]=bt["[object Uint8Array]"]=bt["[object Uint8ClampedArray]"]=bt["[object Uint16Array]"]=bt["[object Uint32Array]"]=!0,bt["[object Arguments]"]=bt["[object Array]"]=bt["[object ArrayBuffer]"]=bt["[object Boolean]"]=bt["[object DataView]"]=bt["[object Date]"]=bt["[object Error]"]=bt["[object Function]"]=bt["[object Map]"]=bt["[object Number]"]=bt["[object Object]"]=bt["[object RegExp]"]=bt["[object Set]"]=bt["[object String]"]=bt["[object WeakMap]"]=!1,h((function(t,e){e=e&&!e.nodeType&&e;var n=e&&t&&!t.nodeType&&t,r=n&&n.exports===e&&y.process;e=function(){try{return n&&n.require&&n.require("util").types||r&&r.binding&&r.binding("util")}catch(t){}}();t.exports=e}))),n=L&&L.isTypedArray,n?$(n):function(t){return lt(t)&&yt(t.length)&&!!bt[C(t)]}),_t=Object.prototype.hasOwnProperty,wt=function(t,e){var n,r=pt(t),i=!r&&dt(t),o=!r&&!i&&gt(t),a=!r&&!i&&!o&&xt(t),s=r||i||o||a,u=s?ct(t.length,String):[],c=u.length;for(n in t)!e&&!_t.call(t,n)||s&&("length"==n||o&&("offset"==n||"parent"==n)||a&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||vt(n,c))||u.push(n);return u},St=Object.prototype,Et=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||St)},Mt=J(Object.keys,Object),At=Object.prototype.hasOwnProperty,Ct=function(t){if(!Et(t))return Mt(t);var e,n=[];for(e in Object(t))At.call(t,e)&&"constructor"!=e&&n.push(e);return n},Tt=function(t){return null!=t&&yt(t.length)&&!k(t)},kt=function(t){return(Tt(t)?wt:Ct)(t)},Ot=function(t,e){return t&&X(e,kt(e),t)},Pt=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},It=Object.prototype.hasOwnProperty,Nt=function(t){if(Tt(t))return wt(t,!0);var e=t;if(!T(e))return Pt(e);var n,r=Et(e),i=[];for(n in e)("constructor"!=n||!r&&It.call(e,n))&&i.push(n);return i},Dt=function(t,e){return t&&X(e,Nt(e),t)},Lt=h((function(t,e){e=e&&!e.nodeType&&e;var n=e&&t&&!t.nodeType&&t,r=(n=n&&n.exports===e?b.Buffer:void 0,n?n.allocUnsafe:void 0);t.exports=function(t,e){return e?t.slice():(e=t.length,e=r?r(e):new t.constructor(e),t.copy(e),e)}})),Rt=function(t,e){var n=-1,r=t.length;for(e=e||Array(r);++n<r;)e[n]=t[n];return e},Bt=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o},jt=Object.prototype.propertyIsEnumerable,Ft=Object.getOwnPropertySymbols,zt=Ft?function(t){return null==t?[]:(t=Object(t),Bt(Ft(t),(function(e){return jt.call(t,e)})))}:Q,Ut=function(t,e){return X(t,zt(t),e)},Gt=J(Object.getPrototypeOf,Object),Vt=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)tt(e,zt(t)),t=Gt(t);return e}:Q,Wt=function(t,e){return X(t,Vt(t),e)},Ht=function(t){return et(t,kt,zt)},Yt=function(t){return et(t,Nt,Vt)},qt=(n=m(b,"DataView"),m(b,"Promise")),Xt=m(b,"Set"),Kt=m(b,"WeakMap"),Zt=N(n),$t=N(B),Jt=N(qt),Qt=N(Xt),te=N(Kt),ee=C,ne=ee=n&&"[object DataView]"!=ee(new n(new ArrayBuffer(1)))||B&&"[object Map]"!=ee(new B)||qt&&"[object Promise]"!=ee(qt.resolve())||Xt&&"[object Set]"!=ee(new Xt)||Kt&&"[object WeakMap]"!=ee(new Kt)?function(t){var e=C(t);t="[object Object]"==e?t.constructor:void 0,t=t?N(t):"";if(t)switch(t){case Zt:return"[object DataView]";case $t:return"[object Map]";case Jt:return"[object Promise]";case Qt:return"[object Set]";case te:return"[object WeakMap]"}return e}:ee,re=Object.prototype.hasOwnProperty,ie=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&re.call(t,"index")&&(n.index=t.index,n.input=t.input),n},oe=b.Uint8Array,ae=/\w*$/,se=(n=e?e.prototype:void 0,n?n.valueOf:void 0),ue=function(t,e){return e=e?nt(t.buffer):t.buffer,new t.constructor(e,t.byteOffset,t.length)},ce=function(t,e,n){var r,i=t.constructor;switch(e){case"[object ArrayBuffer]":return nt(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":var o=t,a=n;return a=n?nt(o.buffer):o.buffer,new o.constructor(a,o.byteOffset,o.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ue(t,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return(o=new(a=t).constructor(a.source,ae.exec(a))).lastIndex=a.lastIndex,o;case"[object Set]":return new i;case"[object Symbol]":return r=t,se?Object(se.call(r)):{}}},le=Object.create,he=function(t){return T(t)?le?le(t):(fe.prototype=t,t=new fe,fe.prototype=void 0,t):{}};function fe(){}function de(t,e,n,r,i,o){var a,s=1&e,u=2&e,c=4&e;if(void 0===(a=n?i?n(t,r,i,o):n(t):a)){if(!T(t))return t;if(r=pt(t),r){if(a=ie(t),!s)return Rt(t,a)}else{var l=ne(t),h="[object Function]"==l||"[object GeneratorFunction]"==l;if(gt(t))return Lt(t,s);if("[object Object]"==l||"[object Arguments]"==l||h&&!i){if(a=u||h?{}:be(t),!s)return u?Wt(t,Dt(a,t)):Ut(t,Ot(a,t))}else{if(!we[l])return i?t:{};a=ce(t,l,s)}}if(h=(o=o||new rt).get(t),h)return h;o.set(t,a),_e(t)?t.forEach((function(r){a.add(de(r,e,n,r,t,o))})):xe(t)&&t.forEach((function(r,i){a.set(i,de(r,e,n,i,t,o))}));var f=r?void 0:(c?u?Yt:Ht:u?Nt:kt)(t);it(f||t,(function(r,i){f&&(r=t[i=r]),ut(a,i,de(r,e,n,i,t,o))}))}return a}function pe(t){return function(){return t}}function ge(t){return"function"==typeof t?t:Ae}function me(t,e){return(pt(t)?it:Me)(t,ge(e))}function ve(t,e){var n=[];return Me(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}var ye,be=function(t){return"function"!=typeof t.constructor||Et(t)?{}:he(Gt(t))},xe=(qt=L&&L.isMap,qt?$(qt):function(t){return lt(t)&&"[object Map]"==ne(t)}),_e=(Kt=L&&L.isSet,Kt?$(Kt):function(t){return lt(t)&&"[object Set]"==ne(t)}),we={},Se=(we["[object Arguments]"]=we["[object Array]"]=we["[object ArrayBuffer]"]=we["[object DataView]"]=we["[object Boolean]"]=we["[object Date]"]=we["[object Float32Array]"]=we["[object Float64Array]"]=we["[object Int8Array]"]=we["[object Int16Array]"]=we["[object Int32Array]"]=we["[object Map]"]=we["[object Number]"]=we["[object Object]"]=we["[object RegExp]"]=we["[object Set]"]=we["[object String]"]=we["[object Symbol]"]=we["[object Uint8Array]"]=we["[object Uint8ClampedArray]"]=we["[object Uint16Array]"]=we["[object Uint32Array]"]=!0,we["[object Error]"]=we["[object Function]"]=we["[object WeakMap]"]=!1,function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[++r];if(!1===e(i[s],s,i))break}return t}),Ee=function(t,e){return t&&Se(t,e,kt)},Me=(ye=Ee,function(t,e){if(null!=t){if(!Tt(t))return ye(t,e);for(var n=t.length,r=-1,i=Object(t);++r<n&&!1!==e(i[r],r,i););}return t}),Ae=function(t){return t};ee=me;function Ce(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Y;++e<n;)this.add(t[e])}function Te(t,e){return t.has(e)}function ke(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&s<u))return!1;u=o.get(t);var c=o.get(e);if(u&&c)return u==e&&c==t;var l=-1,h=!0,f=2&n?new Be:void 0;for(o.set(t,e),o.set(e,t);++l<s;){var d,p=t[l],g=e[l];if(void 0!==(d=r?a?r(g,p,l,e,t,o):r(p,g,l,t,e,o):d)){if(d)continue;h=!1;break}if(f){if(!function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}(e,(function(t,e){return!Te(f,e)&&(p===t||i(p,t,n,r,o))&&f.push(e)}))){h=!1;break}}else if(p!==g&&!i(p,g,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function Oe(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Pe(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function Ie(t,e,n,r,i,o){var a=pt(t),s=pt(e),u=a?"[object Array]":ne(t),c=(s=s?"[object Array]":ne(e),"[object Object]"==(u="[object Arguments]"==u?"[object Object]":u)),l="[object Object]"==(s="[object Arguments]"==s?"[object Object]":s);if((s=u==s)&&gt(t)){if(!gt(e))return!1;c=!(a=!0)}if(s&&!c){if(o=o||new rt,a||xt(t))return ke(t,e,n,r,i,o);var h=t,f=e;a=u;var p=n,g=r,m=i,v=o;switch(a){case"[object DataView]":if(h.byteLength!=f.byteLength||h.byteOffset!=f.byteOffset)return!1;h=h.buffer,f=f.buffer;case"[object ArrayBuffer]":return!(h.byteLength!=f.byteLength||!m(new oe(h),new oe(f)));case"[object Boolean]":case"[object Date]":case"[object Number]":return d(+h,+f);case"[object Error]":return h.name==f.name&&h.message==f.message;case"[object RegExp]":case"[object String]":return h==f+"";case"[object Map]":var y=Oe;case"[object Set]":if(y=y||Pe,h.size!=f.size&&!(1&p))return!1;var b=v.get(h);return b?b==f:(p|=2,v.set(h,f),b=ke(y(h),y(f),p,g,m,v),v.delete(h),b);case"[object Symbol]":if(je)return je.call(h)==je.call(f)}return!1}return 1&n||(u=c&&ze.call(t,"__wrapped__"),a=l&&ze.call(e,"__wrapped__"),!u&&!a)?!!s&&function(t,e,n,r,i,o){var a=1&n,s=Ht(t),u=s.length;if(u!=Ht(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:Fe.call(e,l)))return!1}var h=o.get(t),f=o.get(e);if(h&&f)return h==e&&f==t;var d=!0;o.set(t,e),o.set(e,t);for(var p=a;++c<u;){var g,m=t[l=s[c]],v=e[l];if(!(void 0===(g=r?a?r(v,m,l,e,t,o):r(m,v,l,t,e,o):g)?m===v||i(m,v,n,r,o):g)){d=!1;break}p=p||"constructor"==l}return d&&!p&&(h=t.constructor)!=(f=e.constructor)&&"constructor"in t&&"constructor"in e&&!("function"==typeof h&&h instanceof h&&"function"==typeof f&&f instanceof f)&&(d=!1),o.delete(t),o.delete(e),d}(t,e,n,r,i,o=o||new rt):i(u?t.value():t,a?e.value():e,n,r,o=o||new rt)}function Ne(t,e,n,r,i){return t===e||(null==t||null==e||!lt(t)&&!lt(e)?t!=t&&e!=e:Ie(t,e,n,r,Ne,i))}function De(t){return t==t&&!T(t)}function Le(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}function Re(t,e){var n;return!pt(t)&&(!("number"!=(n=typeof t)&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ge(t))||We.test(t)||!Ve.test(t)||null!=e&&t in Object(e))}Ce.prototype.add=Ce.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ce.prototype.has=function(t){return this.__data__.has(t)};var Be=Ce,je=(n=e?e.prototype:void 0,n?n.valueOf:void 0),Fe=Object.prototype.hasOwnProperty,ze=Object.prototype.hasOwnProperty,Ue=function(t){var e=function(t){for(var e=kt(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,De(i)]}return e}(t);return 1==e.length&&e[0][2]?Le(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],c=t[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var h,f=new rt;if(!(void 0===(h=r?r(c,l,u,t,e,f):h)?Ne(l,c,3,r,f):h))return!1}}return!0}(n,t,e)}},Ge=function(t){return"symbol"==typeof t||lt(t)&&"[object Symbol]"==C(t)},Ve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,We=/^\w*$/;function He(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=t.apply(this,r),n.cache=o.set(i,r)||o,r)}return n.cache=new(He.Cache||Y),n}function Ye(t){return null==t?"":En(t)}function qe(t,e){return null!=t&&kn(t,e,Tn)}function Xe(t){return function(e){return null==e?void 0:e[t]}}function Ke(t){return"function"==typeof t?t:null==t?Ae:"object"==typeof t?pt(t)?On(t[0],t[1]):Ue(t):Pn(t)}function Ze(t,e){return(pt(t)?Bt:ve)(t,Ke(e))}function $e(t,e){return null!=t&&In.call(t,e)}function Je(t,e){return null!=t&&kn(t,e,$e)}function Qe(t){return void 0===t}function tn(t,e){return(pt(t)?wn:Dn)(t,Ke(e))}function en(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function nn(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function rn(t,e,n){var r=pt(t)?en:nn,i=arguments.length<3;return r(t,Ke(e),n,i,Me)}function on(t){var e;return null==t?0:Tt(t)?"string"==typeof(e=t)||!pt(e)&&lt(e)&&"[object String]"==C(e)?(Bn(e=t)?Un:Ln)(e):t.length:"[object Map]"==(e=ne(t))||"[object Set]"==e?t.size:Ct(t).length}function an(t){return pt(t)||dt(t)||!!(Gn&&t&&t[Gn])}function sn(t,e,n,r,i){var o=-1,a=t.length;for(n=n||an,i=i||[];++o<a;){var s=t[o];0<e&&n(s)?1<e?sn(s,e-1,n,r,i):tt(i,s):r||(i[i.length]=s)}return i}function un(t,e,n){return e=Wn(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Wn(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),Vn(t,this,s)}}function cn(t,e){return Yn(un(t,e,Ae),t+"")}function ln(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function hn(t){return t!=t}function fn(t,e){return!(null==t||!t.length)&&-1<qn(t,e,0)}function dn(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function pn(t){return null==t?[]:(t=kt(e=t),wn(t,(function(t){return e[t]})));var e}He.Cache=Y;var gn,mn,vn,yn,bn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xn=/\\(\\)?/g,_n=(gn=(qt=He((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(bn,(function(t,n,r,i){e.push(r?i.replace(xn,"$1"):n||t)})),e}),(function(t){return 500===gn.size&&gn.clear(),t}))).cache,qt),wn=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},Sn=(L=e?e.prototype:void 0,L?L.toString:void 0),En=function t(e){var n;return"string"==typeof e?e:pt(e)?wn(e,t)+"":Ge(e)?Sn?Sn.call(e):"":"0"==(n=e+"")&&1/e==-1/0?"-0":n},Mn=function(t,e){return pt(t)?t:Re(t,e)?[t]:_n(Ye(t))},An=function(t){var e;return"string"==typeof t||Ge(t)?t:"0"==(e=t+"")&&1/t==-1/0?"-0":e},Cn=function(t,e){for(var n=0,r=(e=Mn(e,t)).length;null!=t&&n<r;)t=t[An(e[n++])];return n&&n==r?t:void 0},Tn=function(t,e){return null!=t&&e in Object(t)},kn=function(t,e,n){for(var r=-1,i=(e=Mn(e,t)).length,o=!1;++r<i;){var a=An(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&yt(i)&&vt(a,i)&&(pt(t)||dt(t))},On=function(t,e){return Re(t)&&De(e)?Le(An(t),e):function(n){var r=function(t,e,n){return t=null==t?void 0:Cn(t,e),void 0===t?n:t}(n,t);return void 0===r&&r===e?qe(n,t):Ne(e,r,3)}},Pn=function(t){return Re(t)?Xe(An(t)):(e=t,function(t){return Cn(t,e)});var e},In=Object.prototype.hasOwnProperty,Nn=Object.prototype.hasOwnProperty,Dn=function(t,e){var n=-1,r=Tt(t)?Array(t.length):[];return Me(t,(function(t,i,o){r[++n]=e(t,i,o)})),r},Ln=Xe("length"),Rn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Bn=function(t){return Rn.test(t)},jn=(Kt="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",qt="[^\\ud800-\\udfff]",L="(?:\\ud83c[\\udde6-\\uddff]){2}","[\\ud800-\\udbff][\\udc00-\\udfff]"),Fn="(?:"+Kt+"|"+n+")?",zn=(Fn="[\\ufe0e\\ufe0f]?"+Fn+"(?:\\u200d(?:"+[qt,L,jn].join("|")+")[\\ufe0e\\ufe0f]?"+Fn+")*",qt="(?:"+[qt+Kt+"?",Kt,L,jn,"[\\ud800-\\udfff]"].join("|")+")",RegExp(n+"(?="+n+")|"+qt+Fn,"g")),Un=function(t){for(var e=zn.lastIndex=0;zn.test(t);)++e;return e},Gn=e?e.isConcatSpreadable:void 0,Vn=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Wn=Math.max,Hn=(Kt=ot?function(t,e){return ot(t,"toString",{configurable:!0,enumerable:!1,value:pe(e),writable:!0})}:Ae,Date.now),Yn=(mn=Kt,yn=vn=0,function(){var t=Hn(),e=16-(t-yn);if(yn=t,0<e){if(800<=++vn)return arguments[0]}else vn=0;return mn.apply(void 0,arguments)}),qn=function(t,e,n){if(e!=e)return ln(t,hn,n);for(var r=t,i=e,o=n-1,a=r.length;++o<a;)if(r[o]===i)return o;return-1},Xn=Xt&&1/Pe(new Xt([,-0]))[1]==1/0?function(t){return new Xt(t)}:function(){},Kn=function(t){return lt(t)&&Tt(t)};L=cn((function(t){var e=sn(t,1,Kn,!0),n=void 0,r=void 0,i=-1,o=fn,a=e.length,s=!0,u=[],c=u;if(r)s=!1,o=dn;else if(200<=a){if(t=n?null:Xn(e),t)return Pe(t);s=!1,o=Te,c=new Be}else c=n?[]:u;t:for(;++i<a;){var l=e[i],h=n?n(l):l;l=r||0!==l?l:0;if(s&&h==h){for(var f=c.length;f--;)if(c[f]===h)continue t;n&&c.push(h),u.push(l)}else o(c,h,r)||(c!==u&&c.push(h),u.push(l))}return u}));try{Gr={clone:function(t){return de(t,4)},constant:pe,each:ee,filter:Ze,has:Je,isArray:pt,isEmpty:function(t){if(null!=t){if(Tt(t)&&(pt(t)||"string"==typeof t||"function"==typeof t.splice||gt(t)||xt(t)||dt(t)))return!t.length;var e,n=ne(t);if("[object Map]"==n||"[object Set]"==n)return!t.size;if(Et(t))return!Ct(t).length;for(e in t)if(Nn.call(t,e))return!1}return!0},isFunction:k,isUndefined:Qe,keys:kt,map:tn,reduce:rn,size:on,transform:function(t,e,n){var r,i=pt(t),o=i||gt(t)||xt(t);return e=Ke(e),null==n&&(r=t&&t.constructor,n=o?i?new r:[]:T(t)&&k(r)?he(Gt(t)):{}),(o?it:Ee)(t,(function(t,r,i){return e(n,t,r,i)})),n},union:L,values:pn}}catch(r){}var Zn=Gr=Gr||window._,$n=Jn;function Jn(t){this._isDirected=!Zn.has(t,"directed")||t.directed,this._isMultigraph=!!Zn.has(t,"multigraph")&&t.multigraph,this._isCompound=!!Zn.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=Zn.constant(void 0),this._defaultEdgeLabelFn=Zn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function Qn(t,e){t[e]?t[e]++:t[e]=1}function tr(t,e){--t[e]||delete t[e]}function er(t,e,n,r){return e=""+e,n=""+n,!t&&n<e&&(t=e,e=n,n=t),e+""+n+""+(Zn.isUndefined(r)?"\0":r)}function nr(t,e){return er(t,e.v,e.w,e.name)}Jn.prototype._nodeCount=0,Jn.prototype._edgeCount=0,Jn.prototype.isDirected=function(){return this._isDirected},Jn.prototype.isMultigraph=function(){return this._isMultigraph},Jn.prototype.isCompound=function(){return this._isCompound},Jn.prototype.setGraph=function(t){return this._label=t,this},Jn.prototype.graph=function(){return this._label},Jn.prototype.setDefaultNodeLabel=function(t){return Zn.isFunction(t)||(t=Zn.constant(t)),this._defaultNodeLabelFn=t,this},Jn.prototype.nodeCount=function(){return this._nodeCount},Jn.prototype.nodes=function(){return Zn.keys(this._nodes)},Jn.prototype.sources=function(){var t=this;return Zn.filter(this.nodes(),(function(e){return Zn.isEmpty(t._in[e])}))},Jn.prototype.sinks=function(){var t=this;return Zn.filter(this.nodes(),(function(e){return Zn.isEmpty(t._out[e])}))},Jn.prototype.setNodes=function(t,e){var n=arguments,r=this;return Zn.each(t,(function(t){1<n.length?r.setNode(t,e):r.setNode(t)})),this},Jn.prototype.setNode=function(t,e){return Zn.has(this._nodes,t)?1<arguments.length&&(this._nodes[t]=e):(this._nodes[t]=1<arguments.length?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount),this},Jn.prototype.node=function(t){return this._nodes[t]},Jn.prototype.hasNode=function(t){return Zn.has(this._nodes,t)},Jn.prototype.removeNode=function(t){var e,n=this;return Zn.has(this._nodes,t)&&(e=function(t){n.removeEdge(n._edgeObjs[t])},delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],Zn.each(this.children(t),(function(t){n.setParent(t)})),delete this._children[t]),Zn.each(Zn.keys(this._in[t]),e),delete this._in[t],delete this._preds[t],Zn.each(Zn.keys(this._out[t]),e),delete this._out[t],delete this._sucs[t],--this._nodeCount),this},Jn.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Zn.isUndefined(e))e="\0";else{for(var n=e+="";!Zn.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},Jn.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},Jn.prototype.parent=function(t){if(this._isCompound&&(t=this._parent[t],"\0"!==t))return t},Jn.prototype.children=function(t){var e;return Zn.isUndefined(t)&&(t="\0"),this._isCompound?(e=this._children[t])?Zn.keys(e):void 0:"\0"===t?this.nodes():this.hasNode(t)?[]:void 0},Jn.prototype.predecessors=function(t){if(t=this._preds[t],t)return Zn.keys(t)},Jn.prototype.successors=function(t){if(t=this._sucs[t],t)return Zn.keys(t)},Jn.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return Zn.union(e,this.successors(t))},Jn.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},Jn.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound}),n=(e.setGraph(this.graph()),this),r=(Zn.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),Zn.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))})),{});return this._isCompound&&Zn.each(e.nodes(),(function(t){e.setParent(t,function t(i){var o=n.parent(i);return void 0===o||e.hasNode(o)?r[i]=o:o in r?r[o]:t(o)}(t))})),e},Jn.prototype.setDefaultEdgeLabel=function(t){return Zn.isFunction(t)||(t=Zn.constant(t)),this._defaultEdgeLabelFn=t,this},Jn.prototype.edgeCount=function(){return this._edgeCount},Jn.prototype.edges=function(){return Zn.values(this._edgeObjs)},Jn.prototype.setPath=function(t,e){var n=this,r=arguments;return Zn.reduce(t,(function(t,i){return 1<r.length?n.setEdge(t,i,e):n.setEdge(t,i),i})),this},Jn.prototype.setEdge=function(){var t,e=!1,n=arguments[0];"object"==typeof n&&null!==n&&"v"in n?(o=n.v,a=n.w,t=n.name,2===arguments.length&&(r=arguments[1],e=!0)):(o=n,a=arguments[1],t=arguments[3],2<arguments.length&&(r=arguments[2],e=!0)),o=""+o,a=""+a,Zn.isUndefined(t)||(t=""+t),n=er(this._isDirected,o,a,t);if(Zn.has(this._edgeLabels,n))e&&(this._edgeLabels[n]=r);else{if(!Zn.isUndefined(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(o),this.setNode(a),this._edgeLabels[n]=e?r:this._defaultEdgeLabelFn(o,a,t),e=this._isDirected,r=""+(r=o),i=""+(i=a),!e&&i<r&&(e=r,r=i,i=e),e={v:r,w:i},(i=t)&&(e.name=i);var r,i=e,o=i.v,a=i.w;Object.freeze(i),this._edgeObjs[n]=i,Qn(this._preds[a],o),Qn(this._sucs[o],a),this._in[a][n]=i,this._out[o][n]=i,this._edgeCount++}return this},Jn.prototype.edge=function(t,e,n){return t=1===arguments.length?nr(this._isDirected,t):er(this._isDirected,t,e,n),this._edgeLabels[t]},Jn.prototype.hasEdge=function(t,e,n){return t=1===arguments.length?nr(this._isDirected,t):er(this._isDirected,t,e,n),Zn.has(this._edgeLabels,t)},Jn.prototype.removeEdge=function(t,e,n){n=1===arguments.length?nr(this._isDirected,arguments[0]):er(this._isDirected,t,e,n);var r=this._edgeObjs[n];return r&&(t=r.v,e=r.w,delete this._edgeLabels[n],delete this._edgeObjs[n],tr(this._preds[e],t),tr(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this},Jn.prototype.inEdges=function(t,e){t=this._in[t];if(t)return t=Zn.values(t),e?Zn.filter(t,(function(t){return t.v===e})):t},Jn.prototype.outEdges=function(t,e){t=this._out[t];if(t)return t=Zn.values(t),e?Zn.filter(t,(function(t){return t.w===e})):t},Jn.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))},jn={Graph:$n,version:"2.1.8"},n={write:function(t){var e,n,r={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:(n=t,Zn.map(n.nodes(),(function(t){var e=n.node(t),r=n.parent(t);t={v:t};return Zn.isUndefined(e)||(t.value=e),Zn.isUndefined(r)||(t.parent=r),t}))),edges:(e=t,Zn.map(e.edges(),(function(t){var n=e.edge(t),r={v:t.v,w:t.w};return Zn.isUndefined(t.name)||(r.name=t.name),Zn.isUndefined(n)||(r.value=n),r})))};return Zn.isUndefined(t.graph())||(r.value=Zn.clone(t.graph())),r},read:function(t){var e=new $n(t.options).setGraph(t.value);return Zn.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),Zn.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}};var rr=ir;function ir(){this._arr=[],this._keyIndices={}}function or(t,e,n,r){var i=t,o=String(e),a=n||sr,s=r||function(e){return t.outEdges(e)};function u(t){var e=t.v!==c?t.v:t.w,n=h[e],r=a(t),i=l.distance+r;if(r<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+r);i<n.distance&&(n.distance=i,n.predecessor=c,f.decrease(e,i))}var c,l,h={},f=new rr;for(i.nodes().forEach((function(t){var e=t===o?0:Number.POSITIVE_INFINITY;h[t]={distance:e},f.add(t,e)}));0<f.size()&&(c=f.removeMin(),(l=h[c]).distance!==Number.POSITIVE_INFINITY);)s(c).forEach(u);return h}function ar(t){var e=0,n=[],r={},i=[];return t.nodes().forEach((function(o){Zn.has(r,o)||function o(a){var s=r[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach((function(t){Zn.has(r,t)?r[t].onStack&&(s.lowlink=Math.min(s.lowlink,r[t].index)):(o(t),s.lowlink=Math.min(s.lowlink,r[t].lowlink))})),s.lowlink===s.index){for(var u,c=[];u=n.pop(),r[u].onStack=!1,c.push(u),a!==u;);i.push(c)}}(o)})),i}ir.prototype.size=function(){return this._arr.length},ir.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},ir.prototype.has=function(t){return Zn.has(this._keyIndices,t)},ir.prototype.priority=function(t){if(t=this._keyIndices[t],void 0!==t)return this._arr[t].priority},ir.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},ir.prototype.add=function(t,e){var n,r,i=this._keyIndices;return t=String(t),!Zn.has(i,t)&&(r=(n=this._arr).length,i[t]=r,n.push({key:t,priority:e}),this._decrease(r),!0)},ir.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},ir.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},ir.prototype._heapify=function(t){var e=this._arr,n=2*t,r=1+n,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,(i=r<e.length&&e[r].priority<e[i].priority?r:i)!==t)&&(this._swap(t,i),this._heapify(i))},ir.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},ir.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e};var sr=Zn.constant(1),ur=Zn.constant(1),cr=lr;function lr(t){var e={},n={},r=[];if(Zn.each(t.sinks(),(function i(o){if(Zn.has(n,o))throw new hr;Zn.has(e,o)||(n[o]=!0,e[o]=!0,Zn.each(t.predecessors(o),i),delete n[o],r.push(o))})),Zn.size(e)!==t.nodeCount())throw new hr;return r}function hr(){}function fr(t,e,n){Zn.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],o={};return Zn.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,n,r,i,o,a){Zn.has(i,n)||(i[n]=!0,r||a.push(n),Zn.each(o(n),(function(n){t(e,n,r,i,o,a)})),r&&a.push(n))}(t,e,"post"===n,o,r,i)})),i}(lr.CycleException=hr).prototype=new Error,qt={Graph:jn.Graph,json:n,alg:{components:function(t){var e,n={},r=[];function i(r){Zn.has(n,r)||(n[r]=!0,e.push(r),Zn.each(t.successors(r),i),Zn.each(t.predecessors(r),i))}return Zn.each(t.nodes(),(function(t){e=[],i(t),e.length&&r.push(e)})),r},dijkstra:or,dijkstraAll:function(t,e,n){return Zn.transform(t.nodes(),(function(r,i){r[i]=or(t,i,e,n)}),{})},findCycles:function(t){return Zn.filter(ar(t),(function(e){return 1<e.length||1===e.length&&t.hasEdge(e[0],e[0])}))},floydWarshall:function(t,e,n){return r=e||ur,i=n||function(e){return t.outEdges(e)},o={},(a=t.nodes()).forEach((function(t){o[t]={},o[t][t]={distance:0},a.forEach((function(e){t!==e&&(o[t][e]={distance:Number.POSITIVE_INFINITY})})),i(t).forEach((function(e){var n=e.v===t?e.w:e.v;e=r(e);o[t][n]={distance:e,predecessor:t}}))})),a.forEach((function(t){var e=o[t];a.forEach((function(n){var r=o[n];a.forEach((function(n){var i=r[t],o=e[n];n=r[n],i=i.distance+o.distance;i<n.distance&&(n.distance=i,n.predecessor=o.predecessor)}))}))})),o;var r,i,o,a},isAcyclic:function(t){try{cr(t)}catch(t){if(t instanceof cr.CycleException)return!1;throw t}return!0},postorder:function(t,e){return fr(t,e,"post")},preorder:function(t,e){return fr(t,e,"pre")},prim:function(t,e){var n,r=new $n,i={},o=new rr;function a(t){var r=t.v===n?t.w:t.v,a=o.priority(r);void 0!==a&&(t=e(t))<a&&(i[r]=n,o.decrease(r,t))}if(0!==t.nodeCount()){Zn.each(t.nodes(),(function(t){o.add(t,Number.POSITIVE_INFINITY),r.setNode(t)})),o.decrease(t.nodes()[0],0);for(var s=!1;0<o.size();){if(n=o.removeMin(),Zn.has(i,n))r.setEdge(n,i[n]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(n).forEach(a)}}return r},tarjan:ar,topsort:cr},version:jn.version};try{So=qt}catch(r){}function dr(t,e,n){var r;return!!T(n)&&!!("number"==(r=typeof e)?Tt(n)&&vt(e,n.length):"string"==r&&e in n)&&d(n[e],t)}function pr(t){return t?1/0===(t=Nr(t))||-1/0===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function gr(t,e,n){var r,i=Object(t);return Tt(t)||(r=Ke(e),t=kt(t),e=function(t){return r(i[t],t,i)}),-1<(e=Er(t,e,n))?i[r?t[e]:e]:void 0}function mr(t){return null!=t&&t.length?sn(t,1):[]}function vr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o,a,s=t[r],u=e(s);null!=u&&(void 0===o?u==u&&!Ge(u):n(u,o))&&(o=u,a=s)}return a}function yr(t,e){return e<t}function br(t,e,n,r,i){t!==e&&Se(e,(function(o,a){var s,u,c,l,h,f,d,p,g,m,v,y,b;i=i||new rt,T(o)?(u=e,l=n,h=br,f=r,d=i,v=zr(s=t,c=a),y=zr(u,c),(b=d.get(y))||((u=void 0===(b=f?f(v,y,c+"",s,u,d):void 0))&&(g=!(p=pt(y))&&gt(y),m=!p&&!g&&xt(y),b=y,p||g||m?b=pt(v)?v:Kn(v)?Rt(v):g?Lt(y,!(u=!1)):m?ue(y,!(u=!1)):[]:Fr(y)||dt(y)?dt(b=v)?b=Ur(v):T(v)&&!k(v)||(b=be(y)):u=!1),u&&(d.set(y,b),h(b,y,l,f,d),d.delete(y))),Lr(s,c,b)):(p=r?r(zr(t,a),o,a+"",t,e,i):void 0,Lr(t,a,p=void 0===p?o:p))}),Nt)}function xr(t,e){return t<e}function _r(t,e){for(var n=t,r=e,i=function(e,n){return qe(t,n)},o=-1,a=r.length,s={};++o<a;){var u=r[o],c=Cn(n,u);i(c,u)&&Vr(s,Mn(u,n),c)}return s}function wr(t,e,n){n&&"number"!=typeof n&&dr(t,e,n)&&(e=n=void 0),t=pr(t),void 0===e?(e=t,t=0):e=pr(e),n=void 0===n?t<e?1:-1:pr(n);for(var r=t,i=n,o=void 0,a=-1,s=Hr(Wr((e-r)/(i||1)),0),u=Array(s);s--;)u[o?s:++a]=r,r+=i;return u}function Sr(t,e,n){e=e.length?wn(e,(function(t){return pt(t)?function(e){return Cn(e,1===t.length?t[0]:t)}:t})):[Ae];var r=-1,i=(e=wn(e,$(Ke)),Dn(t,(function(t,n,i){return{criteria:wn(e,(function(e){return e(t)})),index:++r,value:t}}))),o=(t=function(t,e){for(var r=n,i=-1,o=t.criteria,a=e.criteria,s=o.length,u=r.length;++i<s;){var c=Yr(o[i],a[i]);if(c)return u<=i?c:c*("desc"==r[i]?-1:1)}return t.index-e.index},i.length);for(i.sort(t);o--;)i[o]=i[o].value;return i}Fn=So=So||window.graphlib;var Er,Mr,Ar=Object.prototype,Cr=Ar.hasOwnProperty,Tr=(e=cn((function(t,e){t=Object(t);var n=-1,r=e.length,i=2<r?e[2]:void 0;for(i&&dr(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=Nt(o),s=-1,u=a.length;++s<u;){var c=a[s],l=t[c];(void 0===l||d(l,Ar[c])&&!Cr.call(t,c))&&(t[c]=o[c])}return t})),/^\s+|\s+$/g),kr=/^[-+]0x[0-9a-f]+$/i,Or=/^0b[01]+$/i,Pr=/^0o[0-7]+$/i,Ir=parseInt,Nr=function(t){if("number"==typeof t)return t;if(Ge(t))return NaN;if(T(t)&&(e="function"==typeof t.valueOf?t.valueOf():t,t=T(e)?e+"":e),"string"!=typeof t)return 0===t?t:+t;t=t.replace(Tr,"");var e=Or.test(t);return e||Pr.test(t)?Ir(t.slice(2),e?2:8):kr.test(t)?NaN:+t},Dr=Math.max,Lr=(Er=function(t,e,n){var r,i=null==t?0:t.length;return i?((r=null!=n&&(n=pr(n),r=n%1,n==n)?r?n-r:n:0)<0&&(r=Dr(i+r,0)),ln(t,Ke(e),r)):-1},function(t,e,n){(void 0===n||d(t[e],n))&&(void 0!==n||e in t)||at(t,e,n)}),Rr=(Kt=Function.prototype,L=Object.prototype,Kt.toString),Br=L.hasOwnProperty,jr=Rr.call(Object),Fr=function(t){return!(!lt(t)||"[object Object]"!=C(t))&&(null===(t=Gt(t))||"function"==typeof(t=Br.call(t,"constructor")&&t.constructor)&&t instanceof t&&Rr.call(t)==jr)},zr=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},Ur=function(t){return X(t,Nt(t))},Gr=(Mr=function(t,e,n){br(t,e,n)},cn((function(t,e){var n=-1,r=e.length,i=1<r?e[r-1]:void 0,o=2<r?e[2]:void 0;i=3<Mr.length&&"function"==typeof i?(r--,i):void 0;for(o&&dr(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var a=e[n];a&&Mr(t,a,n)}return t}))),Vr=function(t,e,n,r){if(T(t))for(var i=-1,o=(e=Mn(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u,c=An(e[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;i!=a&&(u=s[c],void 0===(l=r?r(u,c,s):void 0))&&(l=T(u)?u:vt(e[i+1])?[]:{}),ut(s,c,l),s=s[c]}return t},Wr=(jn=Yn(un(n=function(t,e){return null==t?{}:_r(t,e)},void 0,mr),n+""),Math.ceil),Hr=Math.max,Yr=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Ge(t),a=void 0!==e,s=null===e,u=e==e,c=Ge(e);if(!s&&!c&&!o&&e<t||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0},qr=(qt=cn((function(t,e){var n;return null==t?[]:(1<(n=e.length)&&dr(t,e[0],e[1])?e=[]:2<n&&dr(e[0],e[1],e[2])&&(e=[e[0]]),Sr(t,sn(e,1),[]))})),0);try{Xr={cloneDeep:function(t){return de(t,5)},constant:pe,defaults:e,each:ee,filter:Ze,find:gr,flatten:mr,forEach:me,forIn:function(t,e){return null==t?t:Se(t,ge(e),Nt)},has:Je,isUndefined:Qe,last:function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},map:tn,mapValues:function(t,e){var n={};return e=Ke(e),Ee(t,(function(t,r,i){at(n,r,e(t,r,i))})),n},max:function(t){return t&&t.length?vr(t,Ae,yr):void 0},merge:Gr,min:function(t){return t&&t.length?vr(t,Ae,xr):void 0},minBy:function(t,e){return t&&t.length?vr(t,Ke(e),xr):void 0},now:function(){return b.Date.now()},pick:jn,range:wr,reduce:rn,sortBy:qt,uniqueId:function(t){var e=++qr;return Ye(t)+e},values:pn,zipObject:function(t,e){for(var n=t||[],r=e||[],i=ut,o=-1,a=n.length,s=r.length,u={};++o<a;){var c=o<s?r[o]:void 0;i(u,n[o],c)}return u}}}catch(r){}var Xr,Kr=Xr=Xr||window._,Zr=$r;function $r(){var t={};t._next=t._prev=t,this._sentinel=t}function Jr(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function Qr(t,e){if("_next"!==t&&"_prev"!==t)return e}$r.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return Jr(e),e},$r.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&Jr(t),t._next=e._next,e._next._prev=t,(e._next=t)._prev=e},$r.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,Qr)),n=n._prev;return"["+t.join(", ")+"]"};var ti=Fn.Graph,ei=Kr.constant(1);function ni(t,e,n,r,i){var o=i?[]:void 0;return Kr.forEach(t.inEdges(r.v),(function(r){var a=t.edge(r),s=t.node(r.v);i&&o.push({v:r.v,w:r.w}),s.out-=a,ri(e,n,s)})),Kr.forEach(t.outEdges(r.v),(function(r){var i=t.edge(r);r=r.w,r=t.node(r);r.in-=i,ri(e,n,r)})),t.removeNode(r.v),o}function ri(t,e,n){(n.out?n.in?t[n.out-n.in+e]:t[t.length-1]:t[0]).enqueue(n)}var ii=function(t){var e,n,r,i,o,a,s,u,c,l,h,f,d,p="greedy"===t.graph().acyclicer?(d=o=t,p=function(t){return d.edge(t).weight},o.nodeCount()<=1?[]:(a=o,s=p||ei,u=new ti,l=c=0,Kr.forEach(a.nodes(),(function(t){u.setNode(t,{v:t,in:0,out:0})})),Kr.forEach(a.edges(),(function(t){var e=u.edge(t.v,t.w)||0,n=s(t);u.setEdge(t.v,t.w,e+n),l=Math.max(l,u.node(t.v).out+=n),c=Math.max(c,u.node(t.w).in+=n)})),h=Kr.range(l+c+3).map((function(){return new Zr})),f=c+1,Kr.forEach(u.nodes(),(function(t){ri(h,f,u.node(t))})),a=function(t,e,n){for(var r,i=[],o=e[e.length-1],a=e[0];t.nodeCount();){for(;r=a.dequeue();)ni(t,e,n,r);for(;r=o.dequeue();)ni(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;0<s;--s)if(r=e[s].dequeue()){i=i.concat(ni(t,e,n,r,!0));break}}return i}((p={graph:u,buckets:h,zeroIdx:f}).graph,p.buckets,p.zeroIdx),Kr.flatten(Kr.map(a,(function(t){return o.outEdges(t.v,t.w)})),!0))):(e=t,n=[],r={},i={},Kr.forEach(e.nodes(),(function t(o){Kr.has(i,o)||(i[o]=!0,r[o]=!0,Kr.forEach(e.outEdges(o),(function(e){Kr.has(r,e.w)?n.push(e):t(e.w)})),delete r[o])})),n);Kr.forEach(p,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,Kr.uniqueId("rev"))}))},oi=function(t){Kr.forEach(t.edges(),(function(e){var n,r=t.edge(e);r.reversed&&(t.removeEdge(e),n=r.forwardName,delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n))}))},ai=Fn.Graph,si={addDummyNode:ui,simplify:function(t){var e=(new ai).setGraph(t.graph());return Kr.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),Kr.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e},asNonCompoundGraph:function(t){var e=new ai({multigraph:t.isMultigraph()}).setGraph(t.graph());return Kr.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),Kr.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=Kr.map(t.nodes(),(function(e){var n={};return Kr.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return Kr.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=Kr.map(t.nodes(),(function(e){var n={};return Kr.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return Kr.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r=t.x,i=t.y,o=e.x-r,a=(e=e.y-i,t.width/2);t=t.height/2;if(o||e)return t=Math.abs(e)*a>Math.abs(o)*t?(n=(t=e<0?-t:t)*o/e,t):(n=a=o<0?-a:a)*e/o,{x:r+n,y:i+t};throw new Error("Not possible to find intersection inside of the rectangle")},buildLayerMatrix:function(t){var e=Kr.map(Kr.range(ci(t)+1),(function(){return[]}));return Kr.forEach(t.nodes(),(function(n){var r=t.node(n),i=r.rank;Kr.isUndefined(i)||(e[i][r.order]=n)})),e},normalizeRanks:function(t){var e=Kr.min(Kr.map(t.nodes(),(function(e){return t.node(e).rank})));Kr.forEach(t.nodes(),(function(n){n=t.node(n),Kr.has(n,"rank")&&(n.rank-=e)}))},removeEmptyRanks:function(t){var e=Kr.min(Kr.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[],r=(Kr.forEach(t.nodes(),(function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)})),0),i=t.graph().nodeRankFactor;Kr.forEach(n,(function(e,n){Kr.isUndefined(e)&&n%i!=0?--r:r&&Kr.forEach(e,(function(e){t.node(e).rank+=r}))}))},addBorderNode:function(t,e,n,r){var i={width:0,height:0};return 4<=arguments.length&&(i.rank=n,i.order=r),ui(t,"border",i,e)},maxRank:ci,partition:function(t,e){var n={lhs:[],rhs:[]};return Kr.forEach(t,(function(t){(e(t)?n.lhs:n.rhs).push(t)})),n},time:function(t,e){return Kr.now(),e()},notime:function(t,e){return e()}};function ui(t,e,n,r){for(var i;i=Kr.uniqueId(r),t.hasNode(i););return n.dummy=e,t.setNode(i,n),i}function ci(t){return Kr.max(Kr.map(t.nodes(),(function(e){if(e=t.node(e).rank,!Kr.isUndefined(e))return e})))}function li(t){var e={};Kr.forEach(t.sources(),(function n(r){var i=t.node(r);return Kr.has(e,r)?i.rank:(e[r]=!0,r=Kr.min(Kr.map(t.outEdges(r),(function(e){return n(e.w)-t.edge(e).minlen}))),r!==Number.POSITIVE_INFINITY&&null!=r||(r=0),i.rank=r)}))}function hi(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var fi=function(t){t.graph().dummyChains=[],Kr.forEach(t.edges(),(function(e){var n,r,i,o=t,a=e,s=a.v,u=o.node(s).rank,c=(e=a.w,o.node(e).rank),l=a.name,h=o.edge(a),f=h.labelRank;if(c!==u+1){for(o.removeEdge(a),i=0,++u;u<c;++i,++u)h.points=[],n=si.addDummyNode(o,"edge",r={width:0,height:0,edgeLabel:h,edgeObj:a,rank:u},"_d"),u===f&&(r.width=h.width,r.height=h.height,r.dummy="edge-label",r.labelpos=h.labelpos),o.setEdge(s,n,{weight:h.weight},l),0===i&&o.graph().dummyChains.push(n),s=n;o.setEdge(s,e,{weight:h.weight},l)}}))},di=function(t){Kr.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),r=t.node(e=n)}))},pi=Fn.Graph,gi=hi,mi=function(t){var e,n=new pi({directed:!1}),r=t.nodes()[0],i=t.nodeCount();for(n.setNode(r,{});function(t,e){return Kr.forEach(t.nodes(),(function n(r){Kr.forEach(e.nodeEdges(r),(function(i){var o=i.v;o=r===o?i.w:o;t.hasNode(o)||gi(e,i)||(t.setNode(o,{}),t.setEdge(r,o,{}),n(o))}))})),t.nodeCount()}(n,t)<i;)e=function(t,e){return Kr.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return gi(e,n)}))}(n,t),e=n.hasNode(e.v)?gi(t,e):-gi(t,e),function(t,e,n){Kr.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}(n,t,e);return n},vi=hi,yi=li,bi=Fn.alg.preorder,xi=Fn.alg.postorder,_i=si.simplify,wi=Si;function Si(t){t=_i(t),yi(t);var e,n=mi(t);for(Ai(n),Ei(n,t);e=Ci(n);)ki(n,t,e,Ti(n,t,e))}function Ei(t,e){var n=(n=xi(t,t.nodes())).slice(0,n.length-1);Kr.forEach(n,(function(n){var r,i,o;i=e,o=(r=t).node(n).parent,r.edge(n,o).cutvalue=Mi(r,i,n)}))}function Mi(t,e,n){var r=t.node(n).parent,i=!0,o=e.edge(n,r),a=0;return o||(i=!1,o=e.edge(r,n)),a=o.weight,Kr.forEach(e.nodeEdges(n),(function(o){var s=o.v===n,u=s?o.w:o.v;u!==r&&(s=s===i,o=e.edge(o).weight,a+=s?o:-o,t.hasEdge(n,u))&&(o=t.edge(n,u).cutvalue,a+=s?-o:o)})),a}function Ai(t,e){arguments.length<2&&(e=t.nodes()[0]),function t(e,n,r,i,o){var a=r,s=e.node(i);return n[i]=!0,Kr.forEach(e.neighbors(i),(function(o){Kr.has(n,o)||(r=t(e,n,r,o,i))})),s.low=a,s.lim=r++,o?s.parent=o:delete s.parent,r}(t,{},1,e)}function Ci(t){return Kr.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function Ti(t,e,n){var r=n.v,i=n.w,o=(n=(e.hasEdge(r,i)||(r=n.w,i=n.v),t.node(r)),r=t.node(i),n),a=!1;n.lim>r.lim&&(o=r,a=!0),i=Kr.filter(e.edges(),(function(e){return a===Oi(0,t.node(e.v),o)&&a!==Oi(0,t.node(e.w),o)}));return Kr.minBy(i,(function(t){return vi(e,t)}))}function ki(t,e,n,r){var i,o,a=n.v;n=n.w;t.removeEdge(a,n),t.setEdge(r.v,r.w,{}),Ai(t),Ei(t,e),i=t,o=e,a=Kr.find(i.nodes(),(function(t){return!o.node(t).parent})),a=(a=bi(i,a)).slice(1),Kr.forEach(a,(function(t){var e=i.node(t).parent,n=o.edge(t,e),r=!1;n||(n=o.edge(e,t),r=!0),o.node(t).rank=o.node(e).rank+(r?n.minlen:-n.minlen)}))}function Oi(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}Si.initLowLimValues=Ai,Si.initCutValues=Ei,Si.calcCutValue=Mi,Si.leaveEdge=Ci,Si.enterEdge=Ti,Si.exchangeEdges=ki;var Pi=li,Ii=Pi;function Ni(t){wi(t)}function Di(t){e=t,n={},r=0,Kr.forEach(e.children(),(function t(i){var o=r;Kr.forEach(e.children(i),t),n[i]={low:o,lim:r++}}));var e,n,r,i=n;Kr.forEach(t.graph().dummyChains,(function(e){for(var n,r=t.node(e).edgeObj,o=function(t,e,n,r){for(var i,o=[],a=[],s=Math.min(e[n].low,e[r].low),u=Math.max(e[n].lim,e[r].lim),c=n;c=t.parent(c),o.push(c),c&&(e[c].low>s||u>e[c].lim););for(i=c,c=r;(c=t.parent(c))!==i;)a.push(c);return{path:o.concat(a.reverse()),lca:i}}(t,i,r.v,r.w),a=o.path,s=o.lca,u=0,c=a[u],l=!0;e!==r.w;){if(n=t.node(e),l){for(;(c=a[u])!==s&&t.node(c).maxRank<n.rank;)u++;c===s&&(l=!1)}if(!l){for(;u<a.length-1&&t.node(c=a[u+1]).minRank<=n.rank;)u++;c=a[u]}t.setParent(e,c),e=t.successors(e)[0]}}))}var Li=function(t){var e,n,r,i=si.addDummyNode(t,"root",{},"_root"),o=(e=t,n={},Kr.forEach(e.children(),(function(t){!function t(r,i){var o=e.children(r);o&&o.length&&Kr.forEach(o,(function(e){t(e,i+1)})),n[r]=i}(t,1)})),n),a=Kr.max(Kr.values(o))-1,s=2*a+1,u=(t.graph().nestingRoot=i,Kr.forEach(t.edges(),(function(e){t.edge(e).minlen*=s})),r=t,Kr.reduce(r.edges(),(function(t,e){return t+r.edge(e).weight}),0)+1);Kr.forEach(t.children(),(function(e){!function t(e,n,r,i,o,a,s){var u,c,l,h=e.children(s);h.length?(u=si.addBorderNode(e,"_bt"),c=si.addBorderNode(e,"_bb"),l=e.node(s),e.setParent(u,s),l.borderTop=u,e.setParent(c,s),l.borderBottom=c,Kr.forEach(h,(function(l){t(e,n,r,i,o,a,l);var h=e.node(l),f=h.borderTop||l,d=(l=h.borderBottom||l,h=h.borderTop?i:2*i,f!==l?1:o-a[s]+1);e.setEdge(u,f,{weight:h,minlen:d,nestingEdge:!0}),e.setEdge(l,c,{weight:h,minlen:d,nestingEdge:!0})})),e.parent(s)||e.setEdge(n,u,{weight:0,minlen:o+a[s]})):s!==n&&e.setEdge(n,s,{weight:0,minlen:r})}(t,i,s,u,a,o,e)})),t.graph().nodeRankFactor=s},Ri=function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,Kr.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))};function Bi(t,e,n,r,i,o){var a=i[e][o-1];n=si.addDummyNode(t,"border",{width:0,height:0,rank:o,borderType:e},n);i[e][o]=n,t.setParent(n,r),a&&t.setEdge(a,n,{weight:1})}var ji=function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||zi(t)},Fi=function(t){var e,n,r=t.graph().rankdir.toLowerCase();"bt"!==r&&"rl"!==r||(e=t,Kr.forEach(e.nodes(),(function(t){Gi(e.node(t))})),Kr.forEach(e.edges(),(function(t){t=e.edge(t),Kr.forEach(t.points,Gi),Kr.has(t,"y")&&Gi(t)}))),"lr"!==r&&"rl"!==r||(n=t,Kr.forEach(n.nodes(),(function(t){Vi(n.node(t))})),Kr.forEach(n.edges(),(function(t){t=n.edge(t),Kr.forEach(t.points,Vi),Kr.has(t,"x")&&Vi(t)})),zi(t))};function zi(t){Kr.forEach(t.nodes(),(function(e){Ui(t.node(e))})),Kr.forEach(t.edges(),(function(e){Ui(t.edge(e))}))}function Ui(t){var e=t.width;t.width=t.height,t.height=e}function Gi(t){t.y=-t.y}function Vi(t){var e=t.x;t.x=t.y,t.y=e}var Wi=function(t){var e={},n=Kr.filter(t.nodes(),(function(e){return!t.children(e).length})),r=Kr.max(Kr.map(n,(function(e){return t.node(e).rank}))),i=Kr.map(Kr.range(r+1),(function(){return[]}));return r=Kr.sortBy(n,(function(e){return t.node(e).rank})),Kr.forEach(r,(function n(r){var o;Kr.has(e,r)||(e[r]=!0,o=t.node(r),i[o.rank].push(r),Kr.forEach(t.successors(r),n))})),i},Hi=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=function(t,e,n){for(var r=Kr.zipObject(n,Kr.map(n,(function(t,e){return e}))),i=(e=Kr.flatten(Kr.map(e,(function(e){return Kr.sortBy(Kr.map(t.outEdges(e),(function(e){return{pos:r[e.w],weight:t.edge(e).weight}})),"pos")})),!0),1);i<n.length;)i<<=1;var o=2*i-1,a=(--i,Kr.map(new Array(o),(function(){return 0}))),s=0;return Kr.forEach(e.forEach((function(t){var e=t.pos+i;a[e]+=t.weight;for(var n=0;0<e;)e%2&&(n+=a[e+1]),a[e=e-1>>1]+=t.weight;s+=t.weight*n}))),s}(t,e[r-1],e[r]);return n},Yi=function(t,e){return Kr.map(e,(function(e){var n=t.inEdges(e);return n.length?{v:e,barycenter:(n=Kr.reduce(n,(function(e,n){var r=t.edge(n);n=t.node(n.v);return{sum:e.sum+r.weight*n.order,weight:e.weight+r.weight}}),{sum:0,weight:0})).sum/n.weight,weight:n.weight}:{v:e}}))},qi=function(t,e){var n={},r=(Kr.forEach(t,(function(t,e){e=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e},Kr.isUndefined(t.barycenter)||(e.barycenter=t.barycenter,e.weight=t.weight)})),Kr.forEach(e.edges(),(function(t){var e=n[t.v],r=n[t.w];Kr.isUndefined(e)||Kr.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))})),Kr.filter(n,(function(t){return!t.indegree}))),i=[];function o(t){return function(e){var n,r,i;e.merged||(Kr.isUndefined(e.barycenter)||Kr.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(i=r=0,(n=t).weight&&(r+=n.barycenter*n.weight,i+=n.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),n.vs=e.vs.concat(n.vs),n.barycenter=r/i,n.weight=i,n.i=Math.min(e.i,n.i),e.merged=!0)}}for(;r.length;){var a=r.pop();i.push(a),Kr.forEach(a.in.reverse(),o(a)),Kr.forEach(a.out,function(t){return function(e){e.in.push(t),0==--e.indegree&&r.push(e)}}(a))}return Kr.map(Kr.filter(i,(function(t){return!t.merged})),(function(t){return Kr.pick(t,["vs","i","barycenter","weight"])}))},Xi=function(t,e){t=si.partition(t,(function(t){return Kr.has(t,"barycenter")}));var n,r=t.lhs,i=Kr.sortBy(t.rhs,(function(t){return-t.i})),o=[],a=0,s=0,u=0;r.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),u=Ki(o,i,u),Kr.forEach(r,(function(t){u+=t.vs.length,o.push(t.vs),a+=t.barycenter*t.weight,s+=t.weight,u=Ki(o,i,u)})),t={vs:Kr.flatten(o,!0)};return s&&(t.barycenter=a/s,t.weight=s),t};function Ki(t,e,n){for(var r;e.length&&(r=Kr.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}function Zi(t,e,n,r){var i,o,a=t.children(e),s=(e=t.node(e))?e.borderLeft:void 0,u=e?e.borderRight:void 0,c={};s&&(a=Kr.filter(a,(function(t){return t!==s&&t!==u}))),e=Yi(t,a),Kr.forEach(e,(function(e){var i;t.children(e.v).length&&(i=Zi(t,e.v,n,r),c[e.v]=i,Kr.has(i,"barycenter"))&&(Kr.isUndefined(e.barycenter)?(e.barycenter=i.barycenter,e.weight=i.weight):(e.barycenter=(e.barycenter*e.weight+i.barycenter*i.weight)/(e.weight+i.weight),e.weight+=i.weight))})),a=qi(e,n),i=c,Kr.forEach(a,(function(t){t.vs=Kr.flatten(t.vs.map((function(t){return i[t]?i[t].vs:t})),!0)})),e=Xi(a,r);return s&&(e.vs=Kr.flatten([s,e.vs,u],!0),t.predecessors(s).length)&&(a=t.node(t.predecessors(s)[0]),o=t.node(t.predecessors(u)[0]),Kr.has(e,"barycenter")||(e.barycenter=0,e.weight=0),e.barycenter=(e.barycenter*e.weight+a.order+o.order)/(e.weight+2),e.weight+=2),e}function $i(t,e,n){var r=function(t){for(var e;t.hasNode(e=Kr.uniqueId("_root")););return e}(t),i=new to({compound:!0}).setGraph({root:r}).setDefaultNodeLabel((function(e){return t.node(e)}));return Kr.forEach(t.nodes(),(function(o){var a=t.node(o),s=t.parent(o);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||r),Kr.forEach(t[n](o),(function(e){var n=e.v===o?e.w:e.v,r=i.edge(n,o);r=Kr.isUndefined(r)?0:r.weight;i.setEdge(n,o,{weight:t.edge(e).weight+r})})),Kr.has(a,"minRank"))&&i.setNode(o,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]})})),i}function Ji(t,e,n){var r,i={};Kr.forEach(n,(function(n){for(var o,a,s=t.parent(n);s;){if((o=t.parent(s))?(a=i[o],i[o]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=o}}))}function Qi(t){var e=si.maxRank(t),n=no(t,Kr.range(1,e+1),"inEdges"),r=no(t,Kr.range(e-1,-1,-1),"outEdges");ro(t,Wi(t));for(var i,o=Number.POSITIVE_INFINITY,a=0,s=0;s<4;++a,++s){(function(t,e){var n=new eo;Kr.forEach(t,(function(t){var r=t.graph().root;r=Zi(t,r,n,e);Kr.forEach(r.vs,(function(e,n){t.node(e).order=n})),Ji(t,n,r.vs)}))})(a%2?n:r,2<=a%4);var u=si.buildLayerMatrix(t),c=Hi(t,u);c<o&&(s=0,i=Kr.cloneDeep(u),o=c)}ro(t,i)}var to=Fn.Graph,eo=Fn.Graph;function no(t,e,n){return Kr.map(e,(function(e){return $i(t,e,n)}))}function ro(t,e){Kr.forEach(e,(function(e){Kr.forEach(e,(function(e,n){t.node(e).order=n}))}))}var io=Fn.Graph;function oo(t,e,n){n<e&&(r=e,e=n,n=r);var r=t[e];r||(t[e]=r={}),r[n]=!0}var ao=function(t){var e,n,r,i,o,a=si.buildLayerMatrix(t),s=Kr.merge((i=t,o={},Kr.reduce(a,(function(t,e){var n=0,r=0,a=t.length,s=Kr.last(e);return Kr.forEach(e,(function(t,u){var c=function(t,e){if(t.node(e).dummy)return Kr.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(i,t),l=c?i.node(c).order:a;!c&&t!==s||(Kr.forEach(e.slice(r,u+1),(function(t){Kr.forEach(i.predecessors(t),(function(e){var r=i.node(e),a=r.order;!(a<n||l<a)||r.dummy&&i.node(t).dummy||oo(o,e,t)}))})),r=u+1,n=l)})),e})),o),(n=t,r={},Kr.reduce(a,(function(t,e){var r,i=-1,o=0;return Kr.forEach(e,(function(a,s){"border"===n.node(a).dummy&&(a=n.predecessors(a)).length&&(r=n.node(a[0]).order,c(e,o,s,i,r),o=s,i=r),c(e,o,e.length,r,t.length)})),e})),r)),u={};function c(t,e,i,o,a){var s;Kr.forEach(Kr.range(e,i),(function(e){s=t[e],n.node(s).dummy&&Kr.forEach(n.predecessors(s),(function(t){var e=n.node(t);e.dummy&&(e.order<o||e.order>a)&&oo(r,t,s)}))}))}Kr.forEach(["u","d"],(function(n){e="u"===n?a:Kr.values(a).reverse(),Kr.forEach(["l","r"],(function(r){"r"===r&&(e=Kr.map(e,(function(t){return Kr.values(t).reverse()})));var i,o,a,c,l,h,f,d,p,g,m=("u"===n?t.predecessors:t.successors).bind(t),v=(m=(v=e,h=s,f=m,d={},p={},g={},Kr.forEach(v,(function(t){Kr.forEach(t,(function(t,e){g[p[d[t]=t]=t]=e}))})),Kr.forEach(v,(function(t){var e=-1;Kr.forEach(t,(function(t){var n=f(t);if(n.length)for(var r=((n=Kr.sortBy(n,(function(t){return g[t]}))).length-1)/2,i=Math.floor(r),o=Math.ceil(r);i<=o;++i){var a=n[i];p[t]===t&&e<g[a]&&!function(t,e,n){var r;return n<e&&(r=e,e=n,n=r),Kr.has(t[e],n)}(h,t,a)&&(p[a]=t,p[t]=d[t]=d[a],e=g[a])}}))})),{root:d,align:p}),i=t,v=e,o=m.root,m=m.align,a={},c=function(t,e,n,r){var i,o,a,s=new io,u=t.graph(),c=(i=u.nodesep,o=u.edgesep,a=r,function(t,e,n){var r,s=t.node(e),u=t.node(n);e=0;if(e+=s.width/2,Kr.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":r=-s.width/2;break;case"r":r=s.width/2}if(r&&(e+=a?r:-r),r=0,e=(e=(e+=(s.dummy?o:i)/2)+(u.dummy?o:i)/2)+u.width/2,Kr.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":r=u.width/2;break;case"r":r=-u.width/2}return r&&(e+=a?r:-r),r=0,e});return Kr.forEach(e,(function(e){var r;Kr.forEach(e,(function(e){var i,o,a=n[e];s.setNode(a),r&&(i=n[r],o=s.edge(i,a),s.setEdge(i,a,Math.max(c(t,e,r),o||0))),r=e}))})),s}(i,v,o,v="r"===r),l=v?"borderLeft":"borderRight",y((function(t){a[t]=c.inEdges(t).reduce((function(t,e){return Math.max(t,a[e.v]+c.edge(e))}),0)}),c.predecessors.bind(c)),y((function(t){var e=c.outEdges(t).reduce((function(t,e){return Math.min(t,a[e.w]-c.edge(e))}),Number.POSITIVE_INFINITY),n=i.node(t);e!==Number.POSITIVE_INFINITY&&n.borderType!==l&&(a[t]=Math.max(a[t],e))}),c.successors.bind(c)),Kr.forEach(m,(function(t){a[t]=a[o[t]]})),a);function y(t,e){for(var n=c.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}"r"===r&&(v=Kr.mapValues(v,(function(t){return-t}))),u[n+r]=v}))})),l=t;var l,h,f,d,p,g,m,v=Kr.minBy(Kr.values(u),(function(t){var e=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return Kr.forIn(t,(function(t,r){r=l.node(r).width/2,e=Math.max(t+r,e),n=Math.min(t-r,n)})),e-n}));return d=u,p=v,v=Kr.values(p),g=Kr.min(v),m=Kr.max(v),Kr.forEach(["u","d"],(function(t){Kr.forEach(["l","r"],(function(e){var n,r,i=t+e,o=d[i];o!==p&&(r=Kr.values(o),n="l"===e?g-Kr.min(r):m-Kr.max(r))&&(d[i]=Kr.mapValues(o,(function(t){return t+n})))}))})),h=u,f=t.graph().align,Kr.mapValues(h.ul,(function(t,e){return f?h[f.toLowerCase()][e]:((e=Kr.sortBy(Kr.map(h,e)))[1]+e[2])/2}))},so=si.normalizeRanks,uo=si.removeEmptyRanks,co=si,lo=Fn.Graph,ho=["nodesep","edgesep","ranksep","marginx","marginy"],fo={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},po=["acyclicer","ranker","rankdir","align"],go=["width","height"],mo={width:0,height:0},vo=["minlen","weight","width","height","labeloffset"],yo={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},bo=["labelpos"];function xo(t,e){return Kr.mapValues(Kr.pick(t,e),Number)}function _o(t){var e={};return Kr.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}var wo=Fn.Graph,So={graphlib:Fn,layout:function(t,e){var n=e&&e.debugTiming?co.time:co.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return e=t,n=new lo({multigraph:!0,compound:!0}),r=_o(e.graph()),n.setGraph(Kr.merge({},fo,xo(r,ho),Kr.pick(r,po))),Kr.forEach(e.nodes(),(function(t){var r=_o(e.node(t));n.setNode(t,Kr.defaults(xo(r,go),mo)),n.setParent(t,e.parent(t))})),Kr.forEach(e.edges(),(function(t){var r=_o(e.edge(t));n.setEdge(t,Kr.merge({},yo,xo(r,vo),Kr.pick(r,bo)))})),n;var e,n,r}));n("  runLayout",(function(){var t,r;t=e,(r=n)("    makeSpaceForEdgeLabels",(function(){var e,n;(n=(e=t).graph()).ranksep/=2,Kr.forEach(e.edges(),(function(t){t=e.edge(t),t.minlen*=2,"c"!==t.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?t.width+=t.labeloffset:t.height+=t.labeloffset)}))})),r("    removeSelfEdges",(function(){var e;e=t,Kr.forEach(e.edges(),(function(t){var n;t.v===t.w&&((n=e.node(t.v)).selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t))}))})),r("    acyclic",(function(){ii(t)})),r("    nestingGraph.run",(function(){Li(t)})),r("    rank",(function(){var e,n=co.asNonCompoundGraph(t);switch(n.graph().ranker){case"network-simplex":Ni(n);break;case"tight-tree":Pi(e=n),mi(e);break;case"longest-path":Ii(n);break;default:Ni(n)}})),r("    injectEdgeLabelProxies",(function(){var e;e=t,Kr.forEach(e.edges(),(function(t){var n=e.edge(t);n.width&&n.height&&(n=e.node(t.v),n={rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t},co.addDummyNode(e,"edge-proxy",n,"_ep"))}))})),r("    removeEmptyRanks",(function(){uo(t)})),r("    nestingGraph.cleanup",(function(){Ri(t)})),r("    normalizeRanks",(function(){so(t)})),r("    assignRankMinMax",(function(){var e,n;e=t,n=0,Kr.forEach(e.nodes(),(function(t){t=e.node(t),t.borderTop&&(t.minRank=e.node(t.borderTop).rank,t.maxRank=e.node(t.borderBottom).rank,n=Kr.max(n,t.maxRank))})),e.graph().maxRank=n})),r("    removeEdgeLabelProxies",(function(){var e;e=t,Kr.forEach(e.nodes(),(function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))})),r("    normalize.run",(function(){fi(t)})),r("    parentDummyChains",(function(){Di(t)})),r("    addBorderSegments",(function(){var e;e=t,Kr.forEach(e.children(),(function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Kr.forEach(r,t),Kr.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)Bi(e,"borderLeft","_bl",n,i,o),Bi(e,"borderRight","_br",n,i,o)}}))})),r("    order",(function(){Qi(t)})),r("    insertSelfEdges",(function(){var e,n;e=t,n=co.buildLayerMatrix(e),Kr.forEach(n,(function(t){var n=0;Kr.forEach(t,(function(t,r){var i=e.node(t);i.order=r+n,Kr.forEach(i.selfEdges,(function(t){co.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:i.rank,order:r+ ++n,e:t.e,label:t.label},"_se")})),delete i.selfEdges}))}))})),r("    adjustCoordinateSystem",(function(){ji(t)})),r("    position",(function(){var e,n,r,i,o;e=t,n=e=si.asNonCompoundGraph(e),r=si.buildLayerMatrix(n),i=n.graph().ranksep,o=0,Kr.forEach(r,(function(t){var e=Kr.max(Kr.map(t,(function(t){return n.node(t).height})));Kr.forEach(t,(function(t){n.node(t).y=o+e/2})),o+=e+i})),Kr.forEach(ao(e),(function(t,n){e.node(n).x=t}))})),r("    positionSelfEdges",(function(){var e;e=t,Kr.forEach(e.nodes(),(function(t){var n,r,i,o,a=e.node(t);"selfedge"===a.dummy&&(n=(o=e.node(a.e.v)).x+o.width/2,r=o.y,i=a.x-n,o=o.height/2,e.setEdge(a.e,a.label),e.removeNode(t),a.label.points=[{x:n+2*i/3,y:r-o},{x:n+5*i/6,y:r-o},{x:n+i,y:r},{x:n+5*i/6,y:r+o},{x:n+2*i/3,y:r+o}],a.label.x=a.x,a.label.y=a.y)}))})),r("    removeBorderNodes",(function(){var e;e=t,Kr.forEach(e.nodes(),(function(t){var n,r,i,o;e.children(t).length&&(t=e.node(t),n=e.node(t.borderTop),r=e.node(t.borderBottom),i=e.node(Kr.last(t.borderLeft)),o=e.node(Kr.last(t.borderRight)),t.width=Math.abs(o.x-i.x),t.height=Math.abs(r.y-n.y),t.x=i.x+t.width/2,t.y=n.y+t.height/2)})),Kr.forEach(e.nodes(),(function(t){"border"===e.node(t).dummy&&e.removeNode(t)}))})),r("    normalize.undo",(function(){di(t)})),r("    fixupEdgeLabelCoords",(function(){var e;e=t,Kr.forEach(e.edges(),(function(t){var n=e.edge(t);if(Kr.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))})),r("    undoCoordinateSystem",(function(){Fi(t)})),r("    translateGraph",(function(){function e(t){var e=t.x,n=t.y,s=t.width;t=t.height;r=Math.min(r,e-s/2),i=Math.max(i,e+s/2),o=Math.min(o,n-t/2),a=Math.max(a,n+t/2)}var n,r,i,o,a,s,u,c;n=t,r=Number.POSITIVE_INFINITY,i=0,o=Number.POSITIVE_INFINITY,a=0,s=n.graph(),u=s.marginx||0,c=s.marginy||0,Kr.forEach(n.nodes(),(function(t){e(n.node(t))})),Kr.forEach(n.edges(),(function(t){t=n.edge(t),Kr.has(t,"x")&&e(t)})),r-=u,o-=c,Kr.forEach(n.nodes(),(function(t){t=n.node(t),t.x-=r,t.y-=o})),Kr.forEach(n.edges(),(function(t){t=n.edge(t),Kr.forEach(t.points,(function(t){t.x-=r,t.y-=o})),Kr.has(t,"x")&&(t.x-=r),Kr.has(t,"y")&&(t.y-=o)})),s.width=i-r+u,s.height=a-o+c})),r("    assignNodeIntersects",(function(){var e;e=t,Kr.forEach(e.edges(),(function(t){var n,r=e.edge(t),i=e.node(t.v),o=(t=e.node(t.w),r.points?(n=r.points[0],r.points[r.points.length-1]):(r.points=[],n=t,i));r.points.unshift(co.intersectRect(i,n)),r.points.push(co.intersectRect(t,o))}))})),r("    reversePoints",(function(){var e;e=t,Kr.forEach(e.edges(),(function(t){t=e.edge(t),t.reversed&&t.points.reverse()}))})),r("    acyclic.undo",(function(){oi(t)}))})),n("  updateInputGraph",(function(){var n,r;n=t,r=e,Kr.forEach(n.nodes(),(function(t){var e=n.node(t),i=r.node(t);e&&(e.x=i.x,e.y=i.y,r.children(t).length)&&(e.width=i.width,e.height=i.height)})),Kr.forEach(n.edges(),(function(t){var e=n.edge(t);t=r.edge(t);e.points=t.points,Kr.has(t,"x")&&(e.x=t.x,e.y=t.y)})),n.graph().width=r.graph().width,n.graph().height=r.graph().height}))}))},debug:{debugOrdering:function(t){var e=si.buildLayerMatrix(t),n=new wo({compound:!0,multigraph:!0}).setGraph({});return Kr.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),Kr.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),Kr.forEach(e,(function(t,e){n.setNode("layer"+e,{rank:"same"}),Kr.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}},util:{time:si.time,notime:si.notime},version:"0.8.5"},Eo=So.graphlib,Mo=So.layout;class Ao{constructor(t){this.cardinality=1,this.include=u.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=s.NODE,this.name=t.name,this.attr=t.attr||{},this.inputs=t.inputs,this.path=t.path||[],this.width=t.width,this.height=t.height}}class Co{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function To(t){const e=new Co;return t.nodes.map((t=>new Ao(t))).forEach((t=>{(e.nodes[t.name]=t).inputs.forEach((n=>{var r,i;r=e,i=t,n.name!==i.name&&r.edges.push(Object.assign(Object.assign({},n.attr),{v:n.name,w:i.name}))}))})),e}class ko{constructor(t,e={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=u.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=s.META,this.path=[],this.name=t,this.metaGraph=No(t,c.META,e)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map((t=>this.metaGraph.node(t)))}leaves(){let t,e=[],n=[this];for(;n.length;){var r=n.shift();r.isGroupNode?(t=r.metaGraph).nodes().forEach((e=>n.push(t.node(e)))):e.push(r.name)}return e}}class Oo{constructor(t,e){this.v=t,this.w=e,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(t,e){this.baseEdgeList.push(t)}}function Po(t,e={}){return new ko(t,e)}function Io(t,e){return new Oo(t,e)}function No(t,e,n){n=n||{};var r=new Eo.Graph(n);return r.setGraph({name:t,rankdir:n.rankdir,type:e,align:n.align}),r}class Do{constructor(t={}){this.graphOptions=t,this.index={},this.graphOptions.compound=!0,this.root=Po(o,this.graphOptions),this.index[o]=this.root}getNodeMap(){return this.index}node(t){return this.index[t]}setNode(t,e){this.index[t]=e}getBridgeGraph(t){var e=this.index[t];if(!e)throw Error("Could not find node in hierarchy: "+t);if(!("metaGraph"in e))return null;var n=e;if(n.bridgeGraph)return n.bridgeGraph;const r=No(a,c.BRIDGE,this.graphOptions);return n.bridgeGraph=r,e.parentNode&&"metaGraph"in e.parentNode&&[(n=e.parentNode).metaGraph,this.getBridgeGraph(n.name)].forEach((e=>{e.edges().filter((e=>e.v===t||e.w===t)).forEach((n=>{const i=n.w===t;e.edge(n).baseEdgeList.forEach((e=>{var[o,a]=i?[e.w,n.v]:[e.v,n.w],o=(o=this.getChildName(t,o),{v:i?a:o,w:i?o:a});let s=r.edge(o);s||((s=Io(o.v,o.w)).inbound=i,r.setEdge(o.v,o.w,s)),s.addBaseEdge(e,this)}))}))})),r}getChildName(t,e){let n=this.index[e];for(;n;){if(n.parentNode&&n.parentNode.name===t)return n.name;n=n.parentNode}throw Error("Could not find immediate child for descendant: "+e)}getPredecessors(t){var e=this.index[t];if(e)return this.getOneWayEdges(e,!0);throw Error("Could not find node with name: "+t)}getSuccessors(t){var e=this.index[t];if(e)return this.getOneWayEdges(e,!1);throw Error("Could not find node with name: "+t)}getOneWayEdges(t,e){var n,r,i=[];return t.parentNode&&t.parentNode.isGroupNode&&(n=(r=t.parentNode).metaGraph,r=this.getBridgeGraph(r.name),Lo(n,t,e,i),Lo(r,t,e,i)),i}}function Lo(t,e,n,r){(n?t.inEdges(e.name):t.outEdges(e.name)).forEach((e=>{e=t.edge(e),r.push(e)}))}class Ro{constructor(t){this.hierarchy=t,this.index={},this.hasSubHierarchy={},this.root=new Fo(this.hierarchy.root,this.hierarchy.graphOptions),this.index[t.root.name]=this.root,this.buildSubHierarchy(t.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(t){if(!(t in this.hasSubHierarchy)){this.hasSubHierarchy[t]=!0;var e=this.index[t];if(e.node.type===s.META){const n=e,r=n.node.metaGraph,i=n.coreGraph,o=(r.nodes().forEach((t=>{var e=this.getOrCreateRenderNodeByName(t);i.setNode(t,e)})),r.edges().forEach((t=>{var e=r.edge(t);e=new jo(e);i.setEdge(t.v,t.w,e)})),n.node.parentNode);if(o){const e=this.getRenderNodeByName(o.name),n=(t,...e)=>e.concat([t?"IN":"OUT"]).join("~~"),a=this.hierarchy.getBridgeGraph(t);a.edges().forEach((c=>{const l=a.edge(c),h=!!r.node(c.w),[f,d]=h?[c.w,c.v]:[c.v,c.w],p=n=>(n=h?{v:n,w:t}:{v:t,w:n},e.coreGraph.edge(n));let g=p(d);g=g||p(n(h,d,o.name));var m,v=n(h,t),y=n(h,d,t);if(!i.node(y)){let t=i.node(v);if(!t){const e={name:v,type:s.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:u.UNSPECIFIED,inbound:h,attr:{}};t=new Bo(e),this.index[v]=t,i.setNode(v,t)}const e={name:y,type:s.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:u.UNSPECIFIED,inbound:h,attr:{}};m=new Bo(e),this.index[y]=m,i.setNode(y,m),i.setParent(y,v),t.node.cardinality++}c=new jo(l),c.adjoiningMetaEdge=g,h?i.setEdge(y,f,c):i.setEdge(f,y,c)}))}}}}getOrCreateRenderNodeByName(t){var e;return t?t in this.index?this.index[t]:(e=this.getNodeByName(t))?(this.index[t]=e.isGroupNode?new Fo(e,this.hierarchy.graphOptions):new Bo(e),this.index[t]):null:null}getRenderNodeByName(t){return this.index[t]}getNodeByName(t){return this.hierarchy.node(t)}}class Bo{constructor(t){this.node=t,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=t.width||0,this.height=t.height||0,this.displayName=t.name,this.attr=t.attr}}class jo{constructor(t){this.metaEdge=t,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class Fo extends Bo{constructor(t,e){super(t),t=t.metaGraph.graph(),e.compound=!0,this.coreGraph=No(t.name,c.CORE,e)}}function zo(t,e){if(t.node.isGroupNode){var n=t,r=e;const o=i(r);n.coreGraph.nodes().map((t=>n.coreGraph.node(t))).forEach((t=>{var{height:e,width:n}=t;switch(t.node.type){case s.NODE:Object.assign(t,o.nodeSize.node),t.height=e||o.nodeSize.node.height,t.width=n||o.nodeSize.node.width;break;case s.BRIDGE:Object.assign(t,o.nodeSize.bridge);break;case s.META:t.expanded?zo(t,r):(Object.assign(t,o.nodeSize.meta),t.height=o.nodeSize.meta.height,t.width=o.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+t.node.type)}if(!t.expanded){const e=t.attr;var[i,a=!1]=[t,r&&(0===t.node.type&&!(null==(i=null==(i=null==r?void 0:r.nodeSize)?void 0:i.meta)||!i.width)||1===t.node.type&&(!(null==(i=null==(i=null==r?void 0:r.nodeSize)?void 0:i.node)||!i.width)||!!e.width)||2===t.node.type&&!(null==(i=null==(i=null==r?void 0:r.nodeSize)?void 0:i.bridge)||!i.width))];if(i.coreBox.width=i.width,i.coreBox.height=i.height,!a){const t=(""+i.displayName).length;i.width=Math.max(i.coreBox.width,3*t)}}}))}if(t.node.type===s.META){var o=(e=i(e)).subScene.meta,{nodeSep:e,rankSep:a,edgeSep:u,align:c}=(Object.assign(t,o),e.graph.meta),l={nodesep:e,ranksep:a,edgesep:u,align:c};Object.assign(t.coreBox,function(t){var{ranksep:e,nodesep:n,edgesep:r,align:i}=l;Object.assign(t.graph(),{ranksep:e,nodesep:n,edgesep:r,align:i});const o=[];if(t.nodes().forEach((e=>{t.node(e).node.type!==s.BRIDGE&&o.push(e)})),!o.length)return{width:0,height:0};Mo(t);let a=1/0,u=1/0,c=-1/0,h=-1/0;return o.forEach((e=>{e=t.node(e);var n=.5*e.width,r=e.x-n;n=e.x+n,a=r<a?r:a,c=n>c?n:c,r=.5*e.height,n=e.y-r,e=e.y+r;u=n<u?n:u,h=e>h?e:h})),t.edges().forEach((e=>{e=t.edge(e);var n=t.node(e.metaEdge.v),r=t.node(e.metaEdge.w);if(3===e.points.length&&function(t){let e=Uo(t[0],t[1]);for(let r=1;r<t.length-1;r++){var n=Uo(t[r],t[r+1]);if(1<Math.abs(n-e))return;e=n}return 1}(e.points)){if(null!=n){const t=n.expanded?n.x:Go(n);e.points[0].x=t}if(null!=r){const t=r.expanded?r.x:Go(r);e.points[2].x=t}e.points=[e.points[0],e.points[1]]}var i=e.points[e.points.length-2];null!=r&&(e.points[e.points.length-1]=Vo(i,r)),i=e.points[1];null!=n&&(e.points[0]=Vo(i,n)),e.points.forEach((t=>{a=t.x<a?t.x:a,c=t.x>c?t.x:c,u=t.y<u?t.y:u,h=t.y>h?t.y:h}))})),t.nodes().forEach((e=>{e=t.node(e),e.x-=a,e.y-=u})),t.edges().forEach((e=>{t.edge(e).points.forEach((t=>{t.x-=a,t.y-=u}))})),{width:c-a,height:h-u}}(t.coreGraph));let n=0;0<t.coreGraph.nodeCount()&&n++,e=n<=1?0:n,t.coreBox.width+=e+e,t.coreBox.height=o.labelHeight+t.coreBox.height,t.width=t.coreBox.width+o.paddingLeft+o.paddingRight,t.height=t.paddingTop+t.coreBox.height+t.paddingBottom}}function Uo(t,e){var n=e.x-t.x;e=e.y-t.y;return 180*Math.atan(e/n)/Math.PI}function Go(t){return t.expanded?t.x:t.x-t.width/2+0+t.coreBox.width/2}function Vo(t,e){var n=e.expanded?e.x:Go(e),r=e.y,i=t.x-n;t=t.y-r;let o,a,s=(e.expanded?e:e.coreBox).width,u=(e.expanded?e:e.coreBox).height;return a=Math.abs(t)*s/2>Math.abs(i)*u/2?(t<0&&(u=-u),o=0==t?0:u/2*i/t,u/2):(i<0&&(s=-s),o=s/2,0==i?0:s/2*t/i),{x:n+o,y:r+a}}function Wo(t,e,n){var i=t.nodes.filter(((t,e,n)=>n.findIndex((e=>e.id===t.id))!==e)).map((t=>t.id));if(i.length)throw new Error("Duplicated ids found: "+i.join(", "));var o,a;i=function(t){const e={nodes:[]},n=t.compound,r=Object.keys(n||{}),i=new Map,o=(t,e=[])=>{if(i.has(t))return i.get(t);for(let i=0;i<r.length;i++){var a=r[i];if(n&&-1!==n[a].indexOf(t))return e.unshift(a),o(a,e)}return 0===e.length&&i.set(t,e),e};return t.nodes.forEach((n=>{var r,i=n.id,a=[...o(i),i],s=(r=i,t.edges.filter((t=>t.w===r)).map((t=>({name:t.v}))));e.nodes.push({name:i,path:a,inputs:s,width:n.width,height:n.height,attr:Object.assign({},n)})})),e}(t),t=function(t,e){const n=(t,e)=>{for(var n of e.values())if(n.includes(t))return!0;return!1},r=(t,e=[])=>{if(0===Object.keys(t).length)return[...new Set(e)];var i,o,a=new Map(Object.keys(t).map((e=>[e,t[e]]))),s={};for([i,o]of a)n(i,a)?s[i]=o:e=e.concat(i,o);return r(s,e)};return r(t).filter((t=>e.includes(t)))}(t.compound||{},(null==e?void 0:e.expanded)||[]),o={rankDirection:(null==(o=null==(o=null==n?void 0:n.graph)?void 0:o.meta)?void 0:o.rankDir)||(null==e?void 0:e.rankDirection)||r.graph.meta.rankDir,align:(null==(e=null==(o=null==n?void 0:n.graph)?void 0:o.meta)?void 0:e.align)||r.graph.meta.align},i=function(t,e){var n,r,{rankDirection:e,align:i}=e;e=new Do({rankdir:e,align:i});n=e,r=t,Object.keys(r.nodes).forEach((t=>{var e=r.nodes[t],i=e.path;let o=n.root;o.depth=Math.max(i.length,o.depth);for(let r=0;r<i.length&&(o.depth=Math.max(o.depth,i.length-r),o.cardinality+=e.cardinality,r!==i.length-1);r++){const t=i[r];let a=n.node(t);a||((a=Po(t,n.graphOptions)).path=e.path.slice(0,r+1),a.parentNode=o,n.setNode(t,a),o.metaGraph.setNode(t,a)),o=a}n.setNode(e.name,e),(e.parentNode=o).metaGraph.setNode(e.name,e)}));{var o=e,a=t;const n=o.getNodeMap();let r,i;const s=(t,e)=>{let n=0;for(;t;)e[n++]=t.name,t=t.parentNode;return n-1};a.edges.forEach((t=>{r=[],i=[];let e=s(a.nodes[t.v],r),u=s(a.nodes[t.w],i);for(;r[e]===i[u];)if(e--,u--,e<0||u<0)throw Error("No difference found between ancestor paths.");var c=n[r[e+1]],l=r[e],h=i[u];let f=c.metaGraph.edge(l,h);f||(f=Io(l,h),c.metaGraph.setEdge(l,h,f)),f.addBaseEdge(t,o)}))}return e}(To(i),o),e=new Ro(i);return a=e,t.forEach((t=>{var e=a.getRenderInfoNodes().find((e=>e.displayName===t)),n=(e=e&&e.node&&e.node.name||"",a.getRenderNodeByName(e));if(!n)throw new Error("No nodes found: "+e);n.expanded=!0,a.buildSubHierarchy(e)})),zo(e.root,n),function t(e){const n=e.coreGraph.nodes().map((t=>e.coreGraph.node(t)));return Object.assign(Object.assign({},qo(e)),{expanded:e.expanded,nodes:e.expanded?(r=n,r.map((e=>(e.node.type===s.META?t:qo)(e)))):[],edges:e.expanded?Xo(e):[]});var r}(e.root)}function Ho(t,e=!1){const n=JSON.parse(JSON.stringify(t)),r={nodes:[n],edges:[...n.edges]};return n.nodes.forEach((function t(e){0!==e.type&&1!==e.type||r.nodes.push(e),0===e.type&&(r.edges=r.edges.concat(e.edges)),Array.isArray(e.nodes)&&e.nodes.forEach(t)})),e&&r.nodes.forEach((t=>{var e=r.nodes.find((e=>e.id===t.parentNodeName));if(e){const n=e.x-e.width/2+e.paddingLeft,r=e.y-e.height/2+e.labelHeight+e.paddingTop;e.id!==o&&(t.x+=n,t.y+=r),0===t.type&&t.edges.forEach((e=>{e.points.forEach((e=>{e.x+=t.x-t.width/2+t.paddingLeft,e.y+=t.y-t.height/2+t.labelHeight+t.paddingTop}))}))}})),r}function Yo(t,e,n,r){var i;let a=[];const s=(null==(i=n.find((e=>e.id===t)))?void 0:i.path)||[],u=(null==(i=n.find((t=>t.id===e)))?void 0:i.path)||[],c=[o,...s].slice(0,s.length).reverse(),l=[o,...u].slice(0,u.length);return c.forEach((i=>{var o=n.find((t=>t.id===i));a=a.concat(o.edges.filter((n=>n.baseEdgeList.some((n=>n.v===((null==r?void 0:r.v)||t)&&n.w===((null==r?void 0:r.w)||e))))))})),l.filter((t=>!c.includes(t))).forEach((i=>{var o=n.find((t=>t.id===i));a=a.concat(o.edges.filter((n=>n.baseEdgeList.some((n=>n.v===((null==r?void 0:r.v)||t)&&n.w===((null==r?void 0:r.w)||e))))))})),a}function qo(t){return{id:t.node.name,name:t.node.name,type:t.node.type,cardinality:t.node.cardinality,attr:t.attr,parentNodeName:t.node.parentNode?t.node.parentNode.name:null,coreBox:Object.assign({},t.coreBox),x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius,labelHeight:t.labelHeight,labelOffset:t.labelOffset,outboxWidth:t.outboxWidth,paddingLeft:t.paddingLeft,paddingTop:t.paddingTop,paddingRight:t.paddingRight,paddingBottom:t.paddingBottom,path:t.node.path}}function Xo(t){return t.coreGraph.edges().map((e=>({renderInfoEdge:t.coreGraph.edge(e),edge:e}))).filter((({renderInfoEdge:t})=>t.metaEdge)).map((({edge:e,renderInfoEdge:n})=>{r=t,s=(i=n).points.map((t=>Object.assign({},t))),i.adjoiningMetaEdge&&(o=i.adjoiningMetaEdge.points,o=(i=i.metaEdge.inbound)?o[o.length-1]:o[0],i=s[i?0:s.length-1],u=r.x-r.width/2,a=r.y-r.height/2,u=o.x-u,o=o.y-a,a=-r.paddingLeft,r=-(r.paddingTop+r.labelHeight),i.x=u+a,i.y=o+r);var r,i,o,a,s,u=s;return{adjoiningEdge:n.adjoiningMetaEdge?{w:n.adjoiningMetaEdge.metaEdge.w,v:n.adjoiningMetaEdge.metaEdge.v}:null,inbound:n.metaEdge.inbound,w:e.w,v:e.v,points:u,weight:n.weight,baseEdgeList:n.metaEdge.baseEdgeList,parentNodeName:t.node.name}}))}},27484:function(t){t.exports=function(){"use strict";var t="millisecond",e="second",n="minute",r="hour",i="day",o="week",a="month",s="quarter",u="year",c="date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},d=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},p={s:d,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+d(r,2,"0")+":"+d(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,a),o=n-i<0,s=e.clone().add(r+(o?-1:1),a);return+(-(r+(n-i)/(o?i-s:s-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(l){return{M:a,y:u,w:o,d:i,D:c,h:r,m:n,s:e,ms:t,Q:s}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g="en",m={},v=(m[g]=f,function(t){return t instanceof _}),y=function(t,e,n){var r;if(!t)return g;if("string"==typeof t)m[t]&&(r=t),e&&(m[t]=e,r=t);else{var i=t.name;m[i]=t,r=i}return!n&&r&&(g=r),r||!n&&g},b=function(t,e){if(v(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},x=p,_=(x.l=y,x.i=v,x.w=function(t,e){return b(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})},function(){function f(t){this.$L=y(t.locale,null,!0),this.parse(t)}var d=f.prototype;return d.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(x.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return x},d.isValid=function(){return!("Invalid Date"===this.$d.toString())},d.isSame=function(t,e){var n=b(t);return this.startOf(e)<=n&&n<=this.endOf(e)},d.isAfter=function(t,e){return b(t)<this.startOf(e)},d.isBefore=function(t,e){return this.endOf(e)<b(t)},d.$g=function(t,e,n){return x.u(t)?this[e]:this.set(n,t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,s){var l=this,h=!!x.u(s)||s,f=x.p(t),d=function(t,e){var n=x.w(l.$u?Date.UTC(l.$y,e,t):new Date(l.$y,e,t),l);return h?n:n.endOf(i)},p=function(t,e){return x.w(l.toDate()[t].apply(l.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(e)),l)},g=this.$W,m=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(f){case u:return h?d(1,0):d(31,11);case a:return h?d(1,m):d(0,m+1);case o:var b=this.$locale().weekStart||0,_=(g<b?g+7:g)-b;return d(h?v-_:v+(6-_),m);case i:case c:return p(y+"Hours",0);case r:return p(y+"Minutes",1);case n:return p(y+"Seconds",2);case e:return p(y+"Milliseconds",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(o,s){var l,h=x.p(o),f="set"+(this.$u?"UTC":""),d=(l={},l[i]=f+"Date",l[c]=f+"Date",l[a]=f+"Month",l[u]=f+"FullYear",l[r]=f+"Hours",l[n]=f+"Minutes",l[e]=f+"Seconds",l[t]=f+"Milliseconds",l)[h],p=h===i?this.$D+(s-this.$W):s;if(h===a||h===u){var g=this.clone().set(c,1);g.$d[d](p),g.init(),this.$d=g.set(c,Math.min(this.$D,g.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},d.set=function(t,e){return this.clone().$set(t,e)},d.get=function(t){return this[x.p(t)]()},d.add=function(t,s){var c,l=this;t=Number(t);var h=x.p(s),f=function(e){var n=b(l);return x.w(n.date(n.date()+Math.round(e*t)),l)};if(h===a)return this.set(a,this.$M+t);if(h===u)return this.set(u,this.$y+t);if(h===i)return f(1);if(h===o)return f(7);var d=(c={},c[n]=6e4,c[r]=36e5,c[e]=1e3,c)[h]||1,p=this.$d.getTime()+t*d;return x.w(p,this)},d.subtract=function(t,e){return this.add(-1*t,e)},d.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=x.z(this),i=this.$locale(),o=this.$H,a=this.$m,s=this.$M,u=i.weekdays,c=i.months,l=function(t,r,i,o){return t&&(t[r]||t(e,n))||i[r].substr(0,o)},f=function(t){return x.s(o%12||12,t,"0")},d=i.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:x.s(s+1,2,"0"),MMM:l(i.monthsShort,s,c,3),MMMM:l(c,s),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:l(i.weekdaysMin,this.$W,u,2),ddd:l(i.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:x.s(o,2,"0"),h:f(1),hh:f(2),a:d(o,a,!0),A:d(o,a,!1),m:String(a),mm:x.s(a,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:r};return n.replace(h,(function(t,e){return e||p[t]||r.replace(":","")}))},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(t,c,l){var h,f=x.p(c),d=b(t),p=6e4*(d.utcOffset()-this.utcOffset()),g=this-d,m=x.m(this,d);return m=(h={},h[u]=m/12,h[a]=m,h[s]=m/3,h[o]=(g-p)/6048e5,h[i]=(g-p)/864e5,h[r]=g/36e5,h[n]=g/6e4,h[e]=g/1e3,h)[f]||g,l?m:x.a(m)},d.daysInMonth=function(){return this.endOf(a).$D},d.$locale=function(){return m[this.$L]},d.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=y(t,e,!0);return r&&(n.$L=r),n},d.clone=function(){return x.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},f}()),w=_.prototype;return b.prototype=w,[["$ms",t],["$s",e],["$m",n],["$H",r],["$W",i],["$M",a],["$y",u],["$D",c]].forEach((function(t){w[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),b.extend=function(t,e){return t.$i||(t(e,_,b),t.$i=!0),b},b.locale=y,b.isDayjs=v,b.unix=function(t){return b(1e3*t)},b.en=m[g],b.Ls=m,b.p={},b}()},20296:function(t){function e(t,e,n){var r,i,o,a,s;function u(){var c=Date.now()-a;c<e&&0<=c?r=setTimeout(u,e-c):(r=null,n||(s=t.apply(o,i),o=i=null))}function c(){o=this,i=arguments,a=Date.now();var c=n&&!r;return r=r||setTimeout(u,e),c&&(s=t.apply(o,i),o=i=null),s}return null==e&&(e=100),c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(s=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},c}t.exports=e.debounce=e},11227:function(t,e,n){var r=n(34155);e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");let t=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(t++,"%c"===e)&&(r=t)})),e.splice(r,0,n)}},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&void 0!==r&&"env"in r&&(t={NODE_ENV:"production",BASE_URL:""}.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(n){}}(),e.destroy=(()=>{let t=!1;return()=>{t=t||!0}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(82447)(e),n=t.exports.formatters,n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},82447:function(t,e,n){t.exports=function(t){function e(t){let n,i=null;function o(...t){if(o.enabled){const a=o;var r=Number(new Date),i=r-(n||r);a.diff=i,a.prev=n,a.curr=r,n=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((n,r)=>{if("%%"===n)return"%";s++;var i;r=e.formatters[r];return"function"==typeof r&&(i=t[s],n=r.call(a,i),t.splice(s,1),s--),n})),e.formatArgs.call(a,t),(a.log||e.log).apply(a,t)}}return o.namespace=t,o.useColors=e.useColors(),o.color=e.selectColor(t),o.extend=r,o.destroy=e.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null===i?e.enabled(t):i,set:t=>{i=t}}),"function"==typeof e.init&&e.init(o),o}function r(t,n){return n=e(this.namespace+(void 0===n?":":n)+t),n.log=this.log,n}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return((e.debug=e).default=e).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){var t=[...e.names.map(i),...e.skips.map(i).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.names=[],e.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(57824),e.destroy=function(){},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},25981:function(t,e,n){function r(t,e){t._corked?t.once("uncork",e):e()}function i(t,e){return function(n){var r;n?(r=t,n="premature close"===n.message?null:n,r._autoDestroy&&r.destroy(n)):e&&!t._ended&&t.end()}}function o(){}function a(t,e,n){if(!(this instanceof a))return new a(t,e,n);c.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!n||!1!==n.autoDestroy,this._forwardDestroy=!n||!1!==n.destroy,this._forwardEnd=!n||!1!==n.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)}var s=n(48764).Buffer,u=n(34155),c=n(88473),l=n(12840),h=n(35717),f=n(31852),d=s.from&&s.from!==Uint8Array.from?s.from([0]):new s([0]);h(a,c.Duplex),a.obj=function(t,e,n){return(n=n||{}).objectMode=!0,n.highWaterMark=16,new a(t,e,n)},a.prototype.cork=function(){1==++this._corked&&this.emit("cork")},a.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},a.prototype.setWritable=function(t){var e,n,r;this._unwrite&&this._unwrite(),this.destroyed?t&&t.destroy&&t.destroy():null===t||!1===t?this.end():(n=l(t,{writable:!0,readable:!1},i(e=this,this._forwardEnd)),r=function(){var t=e._ondrain;e._ondrain=null,t&&t()},this._unwrite&&u.nextTick(r),this._writable=t,this._writable.on("drain",r),this._unwrite=function(){e._writable.removeListener("drain",r),n()},this.uncork())},a.prototype.setReadable=function(t){var e,n,r,o;this._unread&&this._unread(),this.destroyed?t&&t.destroy&&t.destroy():null===t||!1===t?(this.push(null),this.resume()):(n=l(t,{writable:!1,readable:!0},i(e=this)),r=function(){e._forward()},o=function(){e.push(null)},this._drained=!0,this._readable=t,this._readable2=t._readableState?t:new c.Readable({objectMode:!0,highWaterMark:16}).wrap(t),this._readable2.on("readable",r),this._readable2.on("end",o),this._unread=function(){e._readable2.removeListener("readable",r),e._readable2.removeListener("end",o),n()},this._forward())},a.prototype._read=function(){this._drained=!0,this._forward()},a.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var t;for(this._forwarding=!0;this._drained&&null!==(t=f(this._readable2));)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}},a.prototype.destroy=function(t,e){if(e=e||o,this.destroyed)return e(null);this.destroyed=!0;var n=this;u.nextTick((function(){n._destroy(t),e(null)}))},a.prototype._destroy=function(t){var e;t&&(e=this._ondrain,this._ondrain=null,e?e(t):this.emit("error",t)),this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable)&&this._writable.destroy&&this._writable.destroy(),this.emit("close")},a.prototype._write=function(t,e,n){if(!this.destroyed)return this._corked?r(this,this._write.bind(this,t,e,n)):t===d?this._finish(n):this._writable?void(!1===this._writable.write(t)?this._ondrain=n:this.destroyed||n()):n()},a.prototype._finish=function(t){var e=this;this.emit("preend"),r(this,(function(){var n,i;n=e._forwardEnd&&e._writable,i=function(){!1===e._writableState.prefinished&&(e._writableState.prefinished=!0),e.emit("prefinish"),r(e,t)},!n||n._writableState&&n._writableState.finished?i():n._writableState?n.end(i):(n.end(),i())}))},a.prototype.end=function(t,e,n){return"function"==typeof t?this.end(null,null,t):"function"==typeof e?this.end(t,null,e):(this._ended=!0,t&&this.write(t),this._writableState.ending||this._writableState.destroyed||this.write(d),c.Writable.prototype.end.call(this,n))},t.exports=a},91247:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(46722),i=n(73566),o=n(29812),a=n(39272);n=n(52796);function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}i=s(i);var u=s(n);const c=new Map;let l;function h(t,e){let n=[];return Array.isArray(e.arg)?n=e.arg:n.push(e.arg),function(r,i){var o=e.instance.popperRef;const a=r.target;r=null==i?void 0:i.target,i=!e||!e.instance;var s=!a||!r,u=t.contains(a)||t.contains(r),c=t===a,l=n.length&&n.some((t=>null==t?void 0:t.contains(a)))||n.length&&n.includes(r);o=o&&(o.contains(a)||o.contains(r));i||s||u||c||l||o||e.value()}}i.default||(r.on(document,"mousedown",(t=>l=t)),r.on(document,"mouseup",(t=>{for(var{documentHandler:e}of c.values())e(t,l)}))),n={beforeMount(t,e){c.set(t,{documentHandler:h(t,e),bindingFn:e.value})},updated(t,e){c.set(t,{documentHandler:h(t,e),bindingFn:e.value})},unmounted(t){c.delete(t)}},i={beforeMount(t,e){let n,i=null;const o=()=>e.value&&e.value(),a=()=>{Date.now()-n<100&&o(),clearInterval(i),i=null};r.on(t,"mousedown",(t=>{0===t.button&&(n=Date.now(),r.once(document,"mouseup",a),clearInterval(i),i=setInterval(o,100))}))}};const f="_trap-focus-children",d=[],p=t=>{var e,n,r,i;0!==d.length&&0<(e=d[d.length-1][f]).length&&t.code===a.EVENT_CODE.tab&&(1===e.length?(t.preventDefault(),document.activeElement!==e[0]&&e[0].focus()):(n=t.shiftKey,r=t.target===e[0],i=t.target===e[e.length-1],r&&n&&(t.preventDefault(),e[e.length-1].focus()),i&&!n&&(t.preventDefault(),e[0].focus())))};var g={beforeMount(t){t[f]=a.obtainAllFocusableElements(t),d.push(t),d.length<=1&&r.on(document,"keydown",p)},updated(t){o.nextTick((()=>{t[f]=a.obtainAllFocusableElements(t)}))},unmounted(){d.shift(),0===d.length&&r.off(document,"keydown",p)}};const m="undefined"!=typeof navigator&&-1<navigator.userAgent.toLowerCase().indexOf("firefox");var v={beforeMount(t,e){var n;n=e.value,t&&t.addEventListener&&(e=function(t){var e=u.default(t);n&&n.apply(this,[t,e])},m?t.addEventListener("DOMMouseScroll",e):t.onmousewheel=e)}};e.ClickOutside=n,e.Mousewheel=v,e.RepeatClick=i,e.TrapFocus=g},78597:function(t,e,n){"use strict";var r=n(29812),i=n(35450),o=r.defineComponent({name:"ElCarouselItem",props:{name:{type:String,default:""},label:{type:[String,Number],default:""}},setup(t){const e=r.getCurrentInstance(),n=(e.uid,r.reactive({hover:!1,translate:0,scale:1,active:!1,ready:!1,inStage:!1,animating:!1})),o=r.inject("injectCarouselScope"),a=r.computed((()=>o.direction));var s=r.computed((()=>{var t=("vertical"===a.value?"translateY":"translateX")+`(${n.translate}px) scale(${n.scale})`;return i.autoprefixer({transform:t})}));const u=(t,e,r)=>{var i,s=o.type,u=o.items.value.length;"card"!==s&&void 0!==r&&(n.animating=t===e||t===r),t!==e&&2<u&&o.loop&&(r=t,t=0===(i=e)&&r===u-1?-1:i===u-1&&0===r?u:r<i-1&&u/2<=i-r?u+1:i+1<r&&u/2<=r-i?-2:r),"card"===s?(a.value,n.inStage=Math.round(Math.abs(t-e))<=1,n.active=t===e,n.translate=(u=t,i=e,r=o.offsetWidth.value,n.inStage?r*(1.17*(u-i)+1)/4:u<i?-1.83*r/4:3.83*r/4),n.scale=n.active?1:.83):(n.active=t===e,s="vertical"===a.value,n.translate=(u=t,r=e,t=s,o[t?"offsetHeight":"offsetWidth"].value*(u-r))),n.ready=!0};return r.onMounted((()=>{o.addItem&&o.addItem(Object.assign(Object.assign(Object.assign({uid:e.uid},t),r.toRefs(n)),{translateItem:u}))})),r.onUnmounted((()=>{o.removeItem&&o.removeItem(e.uid)})),{data:n,itemStyle:s,translateItem:u,type:o.type,handleItemClick:function(){var t;o&&"card"===o.type&&(t=o.items.value.map((t=>t.uid)).indexOf(e.uid),o.setActiveItem(t))}}}});const a={key:0,class:"el-carousel__mask"};o.render=function(t,e,n,i,o,s){return r.withDirectives((r.openBlock(),r.createBlock("div",{class:["el-carousel__item",{"is-active":t.data.active,"el-carousel__item--card":"card"===t.type,"is-in-stage":t.data.inStage,"is-hover":t.data.hover,"is-animating":t.data.animating}],style:t.itemStyle,onClick:e[1]||(e[1]=(...e)=>t.handleItemClick&&t.handleItemClick(...e))},["card"===t.type?r.withDirectives((r.openBlock(),r.createBlock("div",a,null,512)),[[r.vShow,!t.data.active]]):r.createCommentVNode("v-if",!0),r.renderSlot(t.$slots,"default")],6)),[[r.vShow,t.data.ready]])},o.__file="packages/carousel/src/item.vue",o.install=t=>{t.component(o.name,o)},e.Z=o},60078:function(t,e,n){"use strict";var r=n(29812),i=n(23493),o=n(62406);function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=a(i),u=r.defineComponent({name:"ElCarousel",props:{initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,default:""},indicator:{type:Boolean,default:!0},arrow:{type:String,default:"hover"},type:{type:String,default:""},loop:{type:Boolean,default:!0},direction:{type:String,default:"horizontal",validator(t){return["horizontal","vertical"].includes(t)}},pauseOnHover:{type:Boolean,default:!0}},emits:["change"],setup(t,{emit:e}){const n=r.reactive({activeIndex:-1,containerWidth:0,timer:null,hover:!1}),i=r.ref(null),a=r.ref([]),u=r.ref(0),c=r.ref(0);var l=r.computed((()=>"never"!==t.arrow&&"vertical"!==t.direction));const h=r.computed((()=>a.value.some((t=>0<t.label.toString().length))));var f=r.computed((()=>{var e=["el-carousel","el-carousel--"+t.direction];return"card"===t.type&&e.push("el-carousel--card"),e})),d=r.computed((()=>{var e=["el-carousel__indicators","el-carousel__indicators--"+t.direction];return h.value&&e.push("el-carousel__indicators--labels"),"outside"!==t.indicatorPosition&&"card"!==t.type||e.push("el-carousel__indicators--outside"),e})),p=s.default((t=>{y(t)}),300,{trailing:!0}),g=s.default((e=>{"hover"===t.trigger&&e!==n.activeIndex&&(n.activeIndex=e)}),300);function m(){n.timer&&(clearInterval(n.timer),n.timer=null)}function v(){t.interval<=0||!t.autoplay||n.timer||(n.timer=setInterval((()=>{n.activeIndex<a.value.length-1?n.activeIndex=n.activeIndex+1:t.loop&&(n.activeIndex=0)}),t.interval))}function y(e){var r,i;"string"==typeof e&&0<(r=a.value.filter((t=>t.name===e))).length&&(e=a.value.indexOf(r[0])),e=Number(e),isNaN(e)||e!==Math.floor(e)||(r=a.value.length,i=n.activeIndex,n.activeIndex=e<0?t.loop?r-1:0:r<=e?t.loop?0:r-1:e,i===n.activeIndex&&b(i))}function b(t){a.value.forEach(((e,r)=>{e.translateItem(r,n.activeIndex,t)}))}function x(){y(n.activeIndex+1)}return r.watch((()=>n.activeIndex),((t,n)=>{b(n),-1<n&&e("change",t,n)})),r.watch((()=>t.autoplay),(t=>{(t?v:m)()})),r.watch((()=>t.loop),(()=>{y(n.activeIndex)})),r.onMounted((()=>{r.nextTick((()=>{o.addResizeListener(i.value,b),i.value&&(u.value=i.value.offsetWidth,c.value=i.value.offsetHeight),t.initialIndex<a.value.length&&0<=t.initialIndex&&(n.activeIndex=t.initialIndex),v()}))})),r.onBeforeUnmount((()=>{i.value&&o.removeResizeListener(i.value,b),m()})),r.provide("injectCarouselScope",{direction:t.direction,offsetWidth:u,offsetHeight:c,type:t.type,items:a,loop:t.loop,addItem:function(t){a.value.push(t)},removeItem:function(t){var e=a.value.findIndex((e=>e.uid===t));-1!==e&&(a.value.splice(e,1),n.activeIndex===e)&&x()},setActiveItem:y}),{data:n,props:t,items:a,arrowDisplay:l,carouselClasses:f,indicatorsClasses:d,hasLabel:h,handleMouseEnter:function(){n.hover=!0,t.pauseOnHover&&m()},handleMouseLeave:function(){n.hover=!1,v()},handleIndicatorClick:function(t){n.activeIndex=t},throttledArrowClick:p,throttledIndicatorHover:g,handleButtonEnter:function(e){"vertical"!==t.direction&&a.value.forEach(((t,n)=>{var r,i;e===(r=t,i=a.value.length,n===i-1&&r.inStage&&a.value[0].active||r.inStage&&a.value[n+1]&&a.value[n+1].active?"left":!!(0===n&&r.inStage&&a.value[i-1].active||r.inStage&&a.value[n-1]&&a.value[n-1].active)&&"right")&&(t.hover=!0)}))},handleButtonLeave:function(){"vertical"!==t.direction&&a.value.forEach((t=>{t.hover=!1}))},prev:function(){y(n.activeIndex-1)},next:x,setActiveItem:y,root:i}}});const c=r.createVNode("i",{class:"el-icon-arrow-left"},null,-1),l=r.createVNode("i",{class:"el-icon-arrow-right"},null,-1),h={class:"el-carousel__button"},f={key:0};u.render=function(t,e,n,i,o,a){return r.openBlock(),r.createBlock("div",{ref:"root",class:t.carouselClasses,onMouseenter:e[7]||(e[7]=r.withModifiers(((...e)=>t.handleMouseEnter&&t.handleMouseEnter(...e)),["stop"])),onMouseleave:e[8]||(e[8]=r.withModifiers(((...e)=>t.handleMouseLeave&&t.handleMouseLeave(...e)),["stop"]))},[r.createVNode("div",{class:"el-carousel__container",style:{height:t.height}},[t.arrowDisplay?(r.openBlock(),r.createBlock(r.Transition,{key:0,name:"carousel-arrow-left"},{default:r.withCtx((()=>[r.withDirectives(r.createVNode("button",{type:"button",class:"el-carousel__arrow el-carousel__arrow--left",onMouseenter:e[1]||(e[1]=e=>t.handleButtonEnter("left")),onMouseleave:e[2]||(e[2]=(...e)=>t.handleButtonLeave&&t.handleButtonLeave(...e)),onClick:e[3]||(e[3]=r.withModifiers((e=>t.throttledArrowClick(t.data.activeIndex-1)),["stop"]))},[c],544),[[r.vShow,("always"===t.arrow||t.data.hover)&&(t.props.loop||0<t.data.activeIndex)]])])),_:1})):r.createCommentVNode("v-if",!0),t.arrowDisplay?(r.openBlock(),r.createBlock(r.Transition,{key:1,name:"carousel-arrow-right"},{default:r.withCtx((()=>[r.withDirectives(r.createVNode("button",{type:"button",class:"el-carousel__arrow el-carousel__arrow--right",onMouseenter:e[4]||(e[4]=e=>t.handleButtonEnter("right")),onMouseleave:e[5]||(e[5]=(...e)=>t.handleButtonLeave&&t.handleButtonLeave(...e)),onClick:e[6]||(e[6]=r.withModifiers((e=>t.throttledArrowClick(t.data.activeIndex+1)),["stop"]))},[l],544),[[r.vShow,("always"===t.arrow||t.data.hover)&&(t.props.loop||t.data.activeIndex<t.items.length-1)]])])),_:1})):r.createCommentVNode("v-if",!0),r.renderSlot(t.$slots,"default")],4),"none"!==t.indicatorPosition?(r.openBlock(),r.createBlock("ul",{key:0,class:t.indicatorsClasses},[(r.openBlock(!0),r.createBlock(r.Fragment,null,r.renderList(t.items,((e,n)=>(r.openBlock(),r.createBlock("li",{key:n,class:["el-carousel__indicator","el-carousel__indicator--"+t.direction,{"is-active":n===t.data.activeIndex}],onMouseenter:e=>t.throttledIndicatorHover(n),onClick:r.withModifiers((e=>t.handleIndicatorClick(n)),["stop"])},[r.createVNode("button",h,[t.hasLabel?(r.openBlock(),r.createBlock("span",f,r.toDisplayString(e.label),1)):r.createCommentVNode("v-if",!0)])],42,["onMouseenter","onClick"])))),128))],2)):r.createCommentVNode("v-if",!0)],34)},u.__file="packages/carousel/src/main.vue",u.install=t=>{t.component(u.name,u)},e.Z=u},78456:function(t,e,n){"use strict";var r=n(29812),i=r.defineComponent({name:"ElIcon",props:{name:{type:String,default:""}}});i.render=function(t,e,n,i,o,a){return r.openBlock(),r.createBlock("i",{class:"el-icon-"+t.name},null,2)},i.__file="packages/icon/src/index.vue",i.install=t=>{t.component(i.name,i)},e.Z=i},3050:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(29812),i=n(35450),o=n(46722),a=n(39272),s=n(27993);const u={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},c=i.isFirefox()?"DOMMouseScroll":"mousewheel";n=r.defineComponent({name:"ElImageViewer",props:{urlList:{type:Array,default:[]},zIndex:{type:Number,default:2e3},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1}},emits:["close","switch"],setup(t,{emit:e}){let n,l=null,h=null;const f=r.ref(!0),d=r.ref(t.initialIndex),p=r.ref(null),g=r.ref(null),m=r.ref(u.CONTAIN);let v=r.ref({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1});var y=r.computed((()=>{var e=t["urlList"];return e.length<=1}));const b=r.computed((()=>0===d.value)),x=r.computed((()=>0===d.value));var _=r.computed((()=>t.urlList[d.value])),w=r.computed((()=>{var{scale:t,deg:e,offsetX:n,offsetY:r,enableTransition:i}=v.value,t={transform:`scale(${t}) rotate(${e}deg)`,transition:i?"transform .3s":"",marginLeft:n+"px",marginTop:r+"px"};return m.value.name===u.CONTAIN.name&&(t.maxWidth=t.maxHeight="100%"),t}));function S(){o.off(document,"keydown",l),o.off(document,c,h),l=null,h=null,e("close")}function E(){v.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function M(){if(!f.value){var t=Object.keys(u),e=Object.values(u);const n=m.value.name;e=(e.findIndex((t=>t.name===n))+1)%t.length,m.value=u[t[e]],E()}}function A(){var e;b.value&&!t.infinite||(e=t.urlList.length,d.value=(d.value-1+e)%e)}function C(){var e;x.value&&!t.infinite||(e=t.urlList.length,d.value=(d.value+1)%e)}function T(t,e={}){if(!f.value){var{zoomRate:n,rotateDeg:r,enableTransition:e}=Object.assign({zoomRate:.2,rotateDeg:90,enableTransition:!0},e);switch(t){case"zoomOut":.2<v.value.scale&&(v.value.scale=parseFloat((v.value.scale-n).toFixed(3)));break;case"zoomIn":v.value.scale=parseFloat((v.value.scale+n).toFixed(3));break;case"clocelise":v.value.deg+=r;break;case"anticlocelise":v.value.deg-=r}v.value.enableTransition=e}}return r.watch(_,(()=>{r.nextTick((()=>{g.value.complete||(f.value=!0)}))})),r.watch(d,(t=>{E(),e("switch",t)})),r.onMounted((()=>{var t,e;l=i.rafThrottle((t=>{switch(t.code){case a.EVENT_CODE.esc:S();break;case a.EVENT_CODE.space:M();break;case a.EVENT_CODE.left:A();break;case a.EVENT_CODE.up:T("zoomIn");break;case a.EVENT_CODE.right:C();break;case a.EVENT_CODE.down:T("zoomOut")}})),h=i.rafThrottle((t=>{T(0<(t.wheelDelta||-t.detail)?"zoomIn":"zoomOut",{zoomRate:.015,enableTransition:!1})})),o.on(document,"keydown",l),o.on(document,c,h),null!=(e=null==(t=p.value)?void 0:t.focus)&&e.call(t)})),{index:d,wrapper:p,img:g,isSingle:y,isFirst:b,isLast:x,currentImg:_,imgStyle:w,mode:m,handleActions:T,prev:A,next:C,hide:S,toggleMode:M,handleImgLoad:function(){f.value=!1},handleImgError:function(t){f.value=!1,t.target.alt=s.t("el.image.error")},handleMouseDown:function(t){if(!f.value&&0===t.button){const{offsetX:e,offsetY:r}=v.value,a=t.pageX,s=t.pageY;n=i.rafThrottle((t=>{v.value=Object.assign(Object.assign({},v.value),{offsetX:e+t.pageX-a,offsetY:r+t.pageY-s})})),o.on(document,"mousemove",n),o.on(document,"mouseup",(()=>{o.off(document,"mousemove",n)})),t.preventDefault()}}}}});const l=r.createVNode("i",{class:"el-icon-close"},null,-1),h=r.createVNode("i",{class:"el-icon-arrow-left"},null,-1),f=r.createVNode("i",{class:"el-icon-arrow-right"},null,-1),d={class:"el-image-viewer__btn el-image-viewer__actions"},p={class:"el-image-viewer__actions__inner"},g=r.createVNode("i",{class:"el-image-viewer__actions__divider"},null,-1),m=r.createVNode("i",{class:"el-image-viewer__actions__divider"},null,-1),v={class:"el-image-viewer__canvas"};n.render=function(t,e,n,i,o,a){return r.openBlock(),r.createBlock(r.Transition,{name:"viewer-fade"},{default:r.withCtx((()=>[r.createVNode("div",{ref:"wrapper",tabindex:-1,class:"el-image-viewer__wrapper",style:{zIndex:t.zIndex}},[r.createVNode("div",{class:"el-image-viewer__mask",onClick:e[1]||(e[1]=r.withModifiers((e=>t.hideOnClickModal&&t.hide()),["self"]))}),r.createCommentVNode(" CLOSE "),r.createVNode("span",{class:"el-image-viewer__btn el-image-viewer__close",onClick:e[2]||(e[2]=(...e)=>t.hide&&t.hide(...e))},[l]),r.createCommentVNode(" ARROW "),t.isSingle?r.createCommentVNode("v-if",!0):(r.openBlock(),r.createBlock(r.Fragment,{key:0},[r.createVNode("span",{class:["el-image-viewer__btn el-image-viewer__prev",{"is-disabled":!t.infinite&&t.isFirst}],onClick:e[3]||(e[3]=(...e)=>t.prev&&t.prev(...e))},[h],2),r.createVNode("span",{class:["el-image-viewer__btn el-image-viewer__next",{"is-disabled":!t.infinite&&t.isLast}],onClick:e[4]||(e[4]=(...e)=>t.next&&t.next(...e))},[f],2)],64)),r.createCommentVNode(" ACTIONS "),r.createVNode("div",d,[r.createVNode("div",p,[r.createVNode("i",{class:"el-icon-zoom-out",onClick:e[5]||(e[5]=e=>t.handleActions("zoomOut"))}),r.createVNode("i",{class:"el-icon-zoom-in",onClick:e[6]||(e[6]=e=>t.handleActions("zoomIn"))}),g,r.createVNode("i",{class:t.mode.icon,onClick:e[7]||(e[7]=(...e)=>t.toggleMode&&t.toggleMode(...e))},null,2),m,r.createVNode("i",{class:"el-icon-refresh-left",onClick:e[8]||(e[8]=e=>t.handleActions("anticlocelise"))}),r.createVNode("i",{class:"el-icon-refresh-right",onClick:e[9]||(e[9]=e=>t.handleActions("clocelise"))})])]),r.createCommentVNode(" CANVAS "),r.createVNode("div",v,[(r.openBlock(!0),r.createBlock(r.Fragment,null,r.renderList(t.urlList,((n,i)=>r.withDirectives((r.openBlock(),r.createBlock("img",{ref:"img",key:n,src:n,style:t.imgStyle,class:"el-image-viewer__img",onLoad:e[10]||(e[10]=(...e)=>t.handleImgLoad&&t.handleImgLoad(...e)),onError:e[11]||(e[11]=(...e)=>t.handleImgError&&t.handleImgError(...e)),onMousedown:e[12]||(e[12]=(...e)=>t.handleMouseDown&&t.handleMouseDown(...e))},null,44,["src"])),[[r.vShow,i===t.index]]))),128))])],4)])),_:1})},n.__file="packages/image-viewer/src/index.vue",n.install=t=>{t.component(Image.name,Image)},e.default=n},73721:function(t,e,n){"use strict";var r=n(29812),i=n(23493),o=n(33676),a=n(73566),s=n(46722),u=n(27993);n=n(3050);function c(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=c(i),h=c(a);const f=()=>void 0!==document.documentElement.style.objectFit,d={NONE:"none",CONTAIN:"contain",COVER:"cover",FILL:"fill",SCALE_DOWN:"scale-down"};let p="";var g=r.defineComponent({name:"ElImage",components:{ImageViewer:c(n).default},inheritAttrs:!1,props:{appendToBody:{type:Boolean,default:!1},hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:[String,Object],default:null},previewSrcList:{type:Array,default:()=>[]},zIndex:{type:Number,default:2e3}},emits:["error"],setup(t,{emit:e}){const n=o.useAttrs(),i=r.ref(!1),a=r.ref(!0),c=r.ref(0),g=r.ref(0),m=r.ref(!1),v=r.ref(null);let y=null,b=null;var x=r.computed((()=>{var e=t["fit"];if(h.default||!e)return{};if(f())return{"object-fit":e};var n=c.value,r=g.value;if(!v.value)return{};var{clientWidth:i,clientHeight:o}=v.value;if(!(n&&r&&i&&o))return{};var a=n/r,s=i/o;switch(e=e===d.SCALE_DOWN?n<i&&r<o?d.NONE:d.CONTAIN:e){case d.NONE:return{width:"auto",height:"auto"};case d.CONTAIN:return a<s?{width:"auto"}:{height:"auto"};case d.COVER:return a<s?{height:"auto"}:{width:"auto"};default:return{}}})),_=r.computed((()=>{var e=t["fit"];return!h.default&&!f()&&e!==d.FILL}));const w=r.computed((()=>{var e=t["previewSrcList"];return Array.isArray(e)&&0<e.length}));var S=r.computed((()=>{var{src:e,previewSrcList:n}=t;let r=0;return n=n.indexOf(e),0<=n?n:r}));const E=()=>{if(!h.default){const e=n.value,r=(a.value=!0,i.value=!1,new Image);r.onload=t=>{return e=r,c.value=e.width,g.value=e.height,a.value=!1,void(i.value=!1);var e},r.onerror=M,Object.keys(e).forEach((t=>{var n;"onload"!==t.toLowerCase()&&(n=e[t],r.setAttribute(t,n))})),r.src=t.src}};function M(t){a.value=!1,i.value=!0,e("error",t)}function A(){s.isInContainer(v.value,y)&&(E(),T())}function C(){var e,n;!h.default&&(e=t.scrollContainer,y=(n=e)&&1===n.nodeType?e:"string"==typeof e&&""!==e?document.querySelector(e):s.getScrollContainer(v.value))&&(b=l.default(A,200),s.on(y,"scroll",b),setTimeout((()=>A()),100))}function T(){!h.default&&y&&b&&(s.off(y,"scroll",b),y=null,b=null)}return r.watch((()=>t.src),(()=>{E()})),r.onMounted((()=>{t.lazy?r.nextTick(C):E()})),r.onBeforeUnmount((()=>{t.lazy&&T()})),{attrs:n,loading:a,hasLoadError:i,showViewer:m,imgWidth:c,imgHeight:g,imageStyle:x,alignCenter:_,preview:w,imageIndex:S,clickHandler:function(){w.value&&(p=document.body.style.overflow,document.body.style.overflow="hidden",m.value=!0)},closeViewer:function(){document.body.style.overflow=p,m.value=!1},container:v,handleError:M,t:u.t}}});const m=r.createVNode("div",{class:"el-image__placeholder"},null,-1),v={class:"el-image__error"};g.render=function(t,e,n,i,o,a){var s=r.resolveComponent("image-viewer");return r.openBlock(),r.createBlock("div",{ref:"container",class:["el-image",t.$attrs.class],style:t.$attrs.style},[t.loading?r.renderSlot(t.$slots,"placeholder",{key:0},(()=>[m])):t.hasLoadError?r.renderSlot(t.$slots,"error",{key:1},(()=>[r.createVNode("div",v,r.toDisplayString(t.t("el.image.error")),1)])):(r.openBlock(),r.createBlock("img",r.mergeProps({key:2,class:"el-image__inner"},t.attrs,{src:t.src,style:t.imageStyle,class:{"el-image__inner--center":t.alignCenter,"el-image__preview":t.preview},onClick:e[1]||(e[1]=(...e)=>t.clickHandler&&t.clickHandler(...e))}),null,16,["src"])),(r.openBlock(),r.createBlock(r.Teleport,{to:"body",disabled:!t.appendToBody},[t.preview?(r.openBlock(),r.createBlock(r.Fragment,{key:0},[t.showViewer?(r.openBlock(),r.createBlock(s,{key:0,"z-index":t.zIndex,"initial-index":t.imageIndex,"url-list":t.previewSrcList,"hide-on-click-modal":t.hideOnClickModal,onClose:t.closeViewer},null,8,["z-index","initial-index","url-list","hide-on-click-modal","onClose"])):r.createCommentVNode("v-if",!0)],2112)):r.createCommentVNode("v-if",!0)],8,["disabled"]))],6)},g.__file="packages/image/src/index.vue",g.install=t=>{t.component(g.name,g)},e.Z=g},10816:function(t,e,n){"use strict";var r=n(29812);n=n(18782);function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=r.defineComponent({name:"ElMenuItem",componentName:"ElMenuItem",components:{ElTooltip:i(n).default},props:{index:{default:null,validator:t=>"string"==typeof t||null===t},route:[String,Object],disabled:Boolean},emits:["click"],setup(t,{emit:e,slots:n}){const i=r.getCurrentInstance(),o=r.inject("rootMenu"),{parentMenu:a,paddingStyle:s,indexPath:u}=function(t,e){const n=r.inject("rootMenu");var i=r.computed((()=>{let n=t.parent;for(var r=[e];"ElMenu"!==n.type.name;)n.props.index&&r.unshift(n.props.index),n=n.parent;return r}));return{parentMenu:r.computed((()=>{let e=t.parent;for(;e&&-1===["ElMenu","ElSubmenu"].indexOf(e.type.name);)e=e.parent;return e})),paddingStyle:r.computed((()=>{let e=t.parent;if("vertical"!==n.props.mode)return{};let r=20;if(n.props.collapse)r=20;else for(;e&&"ElMenu"!==e.type.name;)"ElSubmenu"===e.type.name&&(r+=20),e=e.parent;return{paddingLeft:r+"px"}})),indexPath:i}}(i,t.index),{addSubMenu:c,removeSubMenu:l}=r.inject("subMenu:"+a.value.uid),h=r.computed((()=>t.index===o.activeIndex.value)),f=r.computed((()=>o.hoverBackground.value)),d=r.computed((()=>o.props.backgroundColor||"")),p=r.computed((()=>o.props.activeTextColor||"")),g=r.computed((()=>o.props.textColor||"")),m=r.computed((()=>o.props.mode)),v=r.computed((()=>"ElMenu"!==a.value.type.name));var y=r.computed((()=>{var t={color:(h.value?p:g).value,borderBottomColor:""};return"horizontal"!==m.value||v.value||(t.borderBottomColor=h.value?o.props.activeTextColor?p.value:"":"transparent"),t}));return r.onMounted((()=>{c({index:t.index,indexPath:u,active:h}),o.methods.addMenuItem({index:t.index,indexPath:u,active:h})})),r.onBeforeUnmount((()=>{l({index:t.index,indexPath:u,active:h}),o.methods.removeMenuItem({index:t.index,indexPath:u,active:h})})),{parentMenu:a,rootMenu:o,slots:n,paddingStyle:s,itemStyle:y,backgroundColor:d,active:h,handleClick:()=>{t.disabled||(o.rootMenuEmit("menuItem:item-click",{index:t.index,indexPath:u,route:t.route}),e("click",{index:t.index,indexPath:u.value}))},onMouseEnter:()=>{"horizontal"===m.value&&!o.props.backgroundColor||(i.vnode.el.style.backgroundColor=f.value)},onMouseLeave:()=>{"horizontal"===m.value&&!o.props.backgroundColor||(i.vnode.el.style.backgroundColor=d.value)}}}});const a={style:{position:"absolute",left:"0",top:"0",height:"100%",width:"100%",display:"inline-block","box-sizing":"border-box",padding:"0 20px"}};o.render=function(t,e,n,i,o,s){var u=r.resolveComponent("el-tooltip");return r.openBlock(),r.createBlock("li",{class:["el-menu-item",{"is-active":t.active,"is-disabled":t.disabled}],role:"menuitem",tabindex:"-1",style:[t.paddingStyle,t.itemStyle,{backgroundColor:t.backgroundColor}],onClick:e[1]||(e[1]=(...e)=>t.handleClick&&t.handleClick(...e)),onMouseenter:e[2]||(e[2]=(...e)=>t.onMouseEnter&&t.onMouseEnter(...e)),onFocus:e[3]||(e[3]=(...e)=>t.onMouseEnter&&t.onMouseEnter(...e)),onBlur:e[4]||(e[4]=(...e)=>t.onMouseLeave&&t.onMouseLeave(...e)),onMouseleave:e[5]||(e[5]=(...e)=>t.onMouseLeave&&t.onMouseLeave(...e))},["ElMenu"===t.parentMenu.type.name&&t.rootMenu.props.collapse&&t.slots.title?(r.openBlock(),r.createBlock(u,{key:0,effect:"dark",placement:"right"},{content:r.withCtx((()=>[r.renderSlot(t.$slots,"title")])),default:r.withCtx((()=>[r.createVNode("div",a,[r.renderSlot(t.$slots,"default")])])),_:3})):(r.openBlock(),r.createBlock(r.Fragment,{key:1},[r.renderSlot(t.$slots,"default"),r.renderSlot(t.$slots,"title")],64))],38)},o.__file="packages/menu/src/menuItem.vue",o.install=t=>{t.component(o.name,o)},e.Z=o},23558:function(t,e,n){"use strict";var r=n(29812),i=n(29652),o=n(45562),a=n(46722);function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=s(i),c=s(o);n=r.defineComponent({name:"ElMenuCollapseTransition",setup(){return{on:{beforeEnter(t){t.style.opacity=.2},enter(t,e){a.addClass(t,"el-opacity-transition"),t.style.opacity=1,e()},afterEnter(t){a.removeClass(t,"el-opacity-transition"),t.style.opacity=""},beforeLeave(t){t.dataset||(t.dataset={}),a.hasClass(t,"el-menu--collapse")?(a.removeClass(t,"el-menu--collapse"),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth,a.addClass(t,"el-menu--collapse")):(a.addClass(t,"el-menu--collapse"),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth,a.removeClass(t,"el-menu--collapse")),t.style.width=t.scrollWidth+"px",t.style.overflow="hidden"},leave(t){a.addClass(t,"horizontal-collapse-transition"),t.style.width=t.dataset.scrollWidth+"px"}}}}});function l(t=""){var e=r.ref("");return t&&(e.value=function(t,e=.2){let{red:n,green:r,blue:i}=function(t){let e=t.replace("#","");if(/^[0-9a-fA-F]{3}$/.test(e)){var n=e.split("");for(let t=2;0<=t;t--)n.splice(t,0,n[t]);e=n.join("")}return/^[0-9a-fA-F]{6}$/.test(e)?{red:parseInt(e.slice(0,2),16),green:parseInt(e.slice(2,4),16),blue:parseInt(e.slice(4,6),16)}:{red:255,green:255,blue:255}}(t);return 0<e?(n*=1-e,r*=1-e,i*=1-e):(n+=(255-n)*e,r+=(255-r)*e,i+=(255-i)*e),`rgb(${Math.round(n)}, ${Math.round(r)}, ${Math.round(i)})`}(t)),e}n.render=function(t,e,n,i,o,a){return r.openBlock(),r.createBlock(r.Transition,r.mergeProps({mode:"out-in"},r.toHandlers(t.on)),{default:r.withCtx((()=>[r.renderSlot(t.$slots,"default")])),_:3},16)},n.__file="packages/menu/src/menu-collapse-transition.vue";var h=r.defineComponent({name:"ElMenu",componentName:"ElMenu",components:{ElMenuCollapseTransition:n},props:{mode:{type:String,default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:Array,uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,default:"hover"},collapse:Boolean,backgroundColor:{type:String},textColor:{type:String},activeTextColor:{type:String},collapseTransition:{type:Boolean,default:!0}},emits:["close","open","select"],setup(t,e){const n=r.ref(t.defaultOpeneds&&!t.collapse?t.defaultOpeneds.slice(0):[]),i=r.getCurrentInstance(),o=r.ref(t.defaultActive),a=r.ref({}),s=r.ref({}),h=r.ref(!1),f=u.default(),d=i.appContext.config.globalProperties.$router;var p=l(t.backgroundColor),g=r.computed((()=>"horizontal"===t.mode||"vertical"===t.mode&&t.collapse));const m=()=>{var e=o.value;e=a.value[e];e&&"horizontal"!==t.mode&&!t.collapse&&e.indexPath.forEach((t=>{var e=s.value[t];e&&b(t,null==e?void 0:e.indexPath)}))};var v=t=>{s.value[t.index]=t},y=t=>{delete s.value[t.index]};const b=(e,i)=>{n.value.includes(e)||(t.uniqueOpened&&(n.value=n.value.filter((t=>-1!==(r.isRef(i)?i.value:i).indexOf(t)))),n.value.push(e))},x=t=>{t=n.value.indexOf(t),-1!==t&&n.value.splice(t,1)},_=t=>{var{index:t,indexPath:r}=t;n.value.includes(t)?(x(t),e.emit("close",t,r.value)):(b(t,r),e.emit("open",t,r.value))},w=r=>{var{index:i,indexPath:a}=r,s=null!==r.index;const u=o.value;if(s&&(o.value=r.index),e.emit("select",i,a.value,r),"horizontal"!==t.mode&&!t.collapse||(n.value=[]),t.router&&d&&s){i=r,a=t=>{o.value=u,t&&t.name},s=i.route||i.index;try{null!==d&&void 0!==d&&d.push(s,(()=>null),a)}catch(r){}}},S=e=>{var n=a.value;e=n[e]||n[o.value]||n[t.defaultActive];e?(o.value=e.index,m()):h.value?h.value=!1:o.value=null};return r.watch((()=>t.defaultActive),(t=>{a.value[t]||(o.value=""),S(t)})),r.watch(a.value,(()=>{S()})),r.watch((()=>t.collapse),((e,r)=>{e!==r&&(h.value=!0),e&&(n.value=[]),f.emit("rootMenu:toggle-collapse",Boolean(t.collapse))})),r.provide("rootMenu",{props:t,openedMenus:n,items:a,submenus:s,hoverBackground:p,activeIndex:o,isMenuPopup:g,methods:{addMenuItem:t=>{a.value[t.index]=t},removeMenuItem:t=>{delete a.value[t.index]},addSubMenu:v,removeSubMenu:y,openMenu:b,closeMenu:x},rootMenuEmit:f.emit,rootMenuOn:f.on}),r.provide("subMenu:"+i.uid,{addSubMenu:v,removeSubMenu:y}),r.onMounted((()=>{m(),f.on("menuItem:item-click",w),f.on("submenu:submenu-click",_),"horizontal"===t.mode&&new c.default(i.vnode.el)})),{hoverBackground:p,isMenuPopup:g,props:t,open:t=>{const e=s.value[t.toString()]["indexPath"];e.forEach((t=>b(t,e)))},close:t=>{x(t)}}}});h.render=function(t,e,n,i,o,a){var s=r.resolveComponent("el-menu-collapse-transition");return t.props.collapseTransition?(r.openBlock(),r.createBlock(s,{key:0},{default:r.withCtx((()=>[(r.openBlock(),r.createBlock("ul",{key:+t.props.collapse,role:"menubar",style:{backgroundColor:t.props.backgroundColor||""},class:{"el-menu":!0,"el-menu--horizontal":"horizontal"===t.mode,"el-menu--collapse":t.props.collapse}},[r.renderSlot(t.$slots,"default")],6))])),_:3})):(r.openBlock(),r.createBlock("ul",{key:+t.props.collapse,role:"menubar",style:{backgroundColor:t.props.backgroundColor||""},class:{"el-menu":!0,"el-menu--horizontal":"horizontal"===t.mode,"el-menu--collapse":t.props.collapse}},[r.renderSlot(t.$slots,"default")],6))},h.__file="packages/menu/src/menu.vue",h.install=t=>{t.component(h.name,h)},e.Z=h},82815:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(29812),i=n(31617),o=n(47050),a=n(94750),s=n(35450),u=n(19169),c=n(46722),l=n(91247);function h(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var f=h(i),d=h(u);function p(t,e){return r.computed((()=>{var n;return Object.assign(Object.assign({placement:t.placement},t.popperOptions),{modifiers:function(t,e=[]){var{arrow:t,arrowOffset:n,offset:r,gpuAcceleration:i}=t,r=[{name:"offset",options:{offset:[0,null!=r?r:12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{gpuAcceleration:i,adaptive:i}}];return t&&r.push({name:"arrow",options:{element:t,padding:null!=n?n:5}}),r.push(...e),r}({arrow:e.arrow.value,arrowOffset:t.arrowOffset,offset:t.offset,gpuAcceleration:t.gpuAcceleration},null==(n=t.popperOptions)?void 0:n.modifiers)})}))}function g(t,{emit:e}){var n=r.ref(null);const i=r.ref(null),o=r.ref(null);var u="el-popper-"+s.generateId();let c=null,l=null,h=null,f=!1;const g=()=>t.manualMode||"manual"===t.trigger,m=r.ref({zIndex:d.default.nextZIndex()}),v=p(t,{arrow:n}),y=r.reactive({visible:!!t.visible}),b=r.computed({get(){return!t.disabled&&(s.isBool(t.visible)?t:y).visible},set(n){g()||(s.isBool(t.visible)?e("update:visible",n):y.visible=n)}});function x(){0<t.autoClose&&(h=window.setTimeout((()=>{_()}),t.autoClose)),b.value=!0}function _(){b.value=!1}function w(){clearTimeout(l),clearTimeout(h)}const S=()=>{g()||t.disabled||(w(),0===t.showAfter?x():l=window.setTimeout((()=>{x()}),t.showAfter))},E=()=>{g()||(w(),0<t.hideAfter?h=window.setTimeout((()=>{M()}),t.hideAfter):M())},M=()=>{_(),t.disabled&&C(!0)};function A(){var t;s.$(b)&&(t=s.$(i),t=s.isHTMLElement(t)?t:t.$el,(c=a.createPopper(t,s.$(o),s.$(v))).update())}function C(t){!c||s.$(b)&&!t||T()}function T(){var t;null!=(t=null===c||void 0===c?void 0:c.destroy)&&t.call(c),c=null}const k={};if(!g()){const e=()=>{(s.$(b)?E:S)()},n=t=>{switch(t.stopPropagation(),t.type){case"click":f?f=!1:e();break;case"mouseenter":S();break;case"mouseleave":E();break;case"focus":f=!0,S();break;case"blur":f=!1,E()}},r={click:["onClick"],hover:["onMouseenter","onMouseleave"],focus:["onFocus","onBlur"]};var O=t=>{r[t].forEach((t=>{k[t]=n}))};s.isArray(t.trigger)?Object.values(t.trigger).forEach(O):O(t.trigger)}return r.watch(v,(t=>{c&&(c.setOptions(t),c.update())})),r.watch(b,(function(t){t&&(m.value.zIndex=d.default.nextZIndex(),A())})),{update:function(){s.$(b)&&(c?c.update():A())},doDestroy:C,show:S,hide:E,onPopperMouseEnter:function(){t.enterable&&"click"!==t.trigger&&clearTimeout(h)},onPopperMouseLeave:function(){var e=t["trigger"];s.isString(e)&&("click"===e||"focus"===e)||1===e.length&&("click"===e[0]||"focus"===e[0])||E()},onAfterEnter:()=>{e("after-enter")},onAfterLeave:()=>{T(),e("after-leave")},onBeforeEnter:()=>{e("before-enter")},onBeforeLeave:()=>{e("before-leave")},initializePopper:A,isManualMode:g,arrowRef:n,events:k,popperId:u,popperInstance:c,popperRef:o,popperStyle:m,triggerRef:i,visibility:b}}(n=e.Effect||(e.Effect={})).DARK="dark",n.LIGHT="light",i={arrowOffset:{type:Number,default:5},appendToBody:{type:Boolean,default:!0},autoClose:{type:Number,default:0},boundariesPadding:{type:Number,default:0},content:{type:String,default:""},class:{type:String,default:""},style:Object,hideAfter:{type:Number,default:200},cutoff:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},effect:{type:String,default:e.Effect.DARK},enterable:{type:Boolean,default:!0},manualMode:{type:Boolean,default:!1},showAfter:{type:Number,default:0},offset:{type:Number,default:12},placement:{type:String,default:"bottom"},popperClass:{type:String,default:""},pure:{type:Boolean,default:!1},popperOptions:{type:Object,default:()=>null},showArrow:{type:Boolean,default:!0},strategy:{type:String,default:"fixed"},transition:{type:String,default:"el-fade-in-linear"},trigger:{type:[String,Array],default:"hover"},visible:{type:Boolean,default:void 0},stopPopperMouseEvent:{type:Boolean,default:!0},gpuAcceleration:{type:Boolean,default:!0}};const m=()=>{};function v(t,e){const{effect:n,name:i,stopPopperMouseEvent:a,popperClass:s,popperStyle:u,popperRef:l,pure:h,popperId:f,visibility:d,onMouseenter:p,onMouseleave:g,onAfterEnter:v,onAfterLeave:y,onBeforeEnter:b,onBeforeLeave:x}=t,_=[s,"el-popper","is-"+n,h?"is-pure":""],w=a?c.stop:m;return r.createVNode(r.Transition,{name:i,onAfterEnter:v,onAfterLeave:y,onBeforeEnter:b,onBeforeLeave:x},{default:r.withCtx((()=>[r.withDirectives(r.createVNode("div",{"aria-hidden":String(!d),class:_,style:null!==u&&void 0!==u?u:{},id:f,ref:null!==l&&void 0!==l?l:"popperRef",role:"tooltip",onMouseenter:p,onMouseleave:g,onClick:c.stop,onMousedown:w,onMouseup:w},e,o.PatchFlags.CLASS|o.PatchFlags.STYLE|o.PatchFlags.PROPS|o.PatchFlags.HYDRATE_EVENTS,["aria-hidden","onMouseenter","onMouseleave","onMousedown","onMouseup","onClick","id"]),[[r.vShow,d]])]))},o.PatchFlags.PROPS,["name","onAfterEnter","onAfterLeave","onBeforeEnter","onBeforeLeave"])}function y(t,e){return t=o.getFirstValidNode(t,1),t||f.default("renderTrigger","trigger expects single rooted node"),r.cloneVNode(t,e,!0)}function b(t){return t?(r.openBlock(),r.createBlock("div",{ref:"arrowRef",class:"el-popper__arrow","data-popper-arrow":""},null,o.PatchFlags.NEED_PATCH)):(r.openBlock(),r.createBlock(r.Comment,null,""))}var x=r.defineComponent({name:"ElPopper",props:i,emits:["update:visible","after-enter","after-leave","before-enter","before-leave"],setup(t,e){e.slots.trigger||f.default("ElPopper","Trigger must be provided");const n=g(t,e);return t=()=>n.doDestroy(!0),r.onMounted(n.initializePopper),r.onBeforeUnmount(t),r.onActivated(n.initializePopper),r.onDeactivated(t),n},render(){var{$slots:t,appendToBody:e,class:n,style:i,effect:a,hide:s,onPopperMouseEnter:u,onPopperMouseLeave:c,onAfterEnter:h,onAfterLeave:f,onBeforeEnter:d,onBeforeLeave:p,popperClass:g,popperId:m,popperStyle:x,pure:_,showArrow:w,transition:S,visibility:E,stopPopperMouseEvent:M}=this,A=this.isManualMode(),w=b(w),a=v({effect:a,name:S,popperClass:g,popperId:m,popperStyle:x,pure:_,stopPopperMouseEvent:M,onMouseenter:u,onMouseleave:c,onAfterEnter:h,onAfterLeave:f,onBeforeEnter:d,onBeforeLeave:p,visibility:E},[r.renderSlot(t,"default",{},(()=>[r.toDisplayString(this.content)])),w]),g=null==(S=t.trigger)?void 0:S.call(t),x=Object.assign({ariaDescribedby:m,class:n,style:i,ref:"triggerRef"},this.events),_=A?y(g,x):r.withDirectives(y(g,x),[[l.ClickOutside,s]]);return o.renderBlock(r.Fragment,null,[_,r.createVNode(r.Teleport,{to:"body",disabled:!e},[a],o.PatchFlags.PROPS,["disabled"])])}});x.__file="packages/popper/src/index.vue",x.install=t=>{t.component(x.name,x)},u=x;e.default=u,e.defaultProps=i,e.renderArrow=b,e.renderPopper=v,e.renderTrigger=y,e.usePopper=g},18782:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(29812),i=n(82815),o=n(92532),a=n(31617),s=n(47050);function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c=u(i),l=u(a),h=r.defineComponent({name:"ElTooltip",components:{ElPopper:c.default},props:Object.assign(Object.assign({},i.defaultProps),{manual:{type:Boolean,default:!1},modelValue:{type:Boolean,validator:t=>"boolean"==typeof t,default:void 0},openDelay:{type:Number,default:0},visibleArrow:{type:Boolean,default:!0},tabindex:{type:Number,default:0}}),emits:[o.UPDATE_MODEL_EVENT],setup(t,e){t.manual&&void 0===t.modelValue&&l.default("[ElTooltip]","You need to pass a v-model to el-tooltip when `manual` is true");const n=r.ref(null);return{popper:n,onUpdateVisible:t=>{e.emit(o.UPDATE_MODEL_EVENT,t)},updatePopper:()=>n.value.update()}},render(){const{$slots:t,content:e,manual:n,openDelay:o,onUpdateVisible:a,showAfter:u,visibleArrow:h,modelValue:f,tabindex:d}=this,p=()=>{l.default("[ElTooltip]","you need to provide a valid default slot.")};return r.h(c.default,Object.assign(Object.assign({},Object.keys(i.defaultProps).reduce(((t,e)=>Object.assign(Object.assign({},t),{[e]:this[e]})),{})),{ref:"popper",manualMode:n,showAfter:o||u,showArrow:h,visible:f,"onUpdate:visible":a}),{default:()=>t.content?t.content():e,trigger:()=>{var e;if(t.default)return(e=s.getFirstValidNode(t.default(),1))||p(),r.cloneVNode(e,{tabindex:d},!0);p()}})}});h.install=t=>{t.component(h.name,h)},n=h;e.default=n},33676:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(29812),i=n(35450),o=n(46722),a=n(16311),s=n(31617),u=n(39272);n=n(73566);function c(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=c(a),h=c(s);const f=["class","style"],d=/^on[A-Z]/,p=[];c(n).default||o.on(document,"keydown",(t=>{0!==p.length&&t.code===u.EVENT_CODE.esc&&(t.stopPropagation(),p[p.length-1].handleClose())})),e.useAttrs=(t={})=>{const{excludeListeners:e=!1,excludeKeys:n=[]}=t,o=r.getCurrentInstance(),a=r.shallowRef({}),s=n.concat(f);return o.attrs=r.reactive(o.attrs),r.watchEffect((()=>{var t=i.entries(o.attrs).reduce(((t,[n,r])=>(s.includes(n)||e&&d.test(n)||(t[n]=r),t)),{});a.value=t})),a},e.useEvents=(t,e)=>{r.watch(t,(n=>{n?e.forEach((({name:e,handler:n})=>{o.on(t.value,e,n)})):e.forEach((({name:e,handler:n})=>{o.off(t.value,e,n)}))}))},e.useFocus=t=>({focus:()=>{var e,n;null!=(n=null==(e=t.value)?void 0:e.focus)&&n.call(e)}}),e.useLockScreen=t=>{r.isRef(t)||h.default("[useLockScreen]","You need to pass a ref param to this function");let e,n=!1,i="0",a=0;r.onUnmounted((()=>{s()}));const s=()=>{o.removeClass(document.body,"el-popup-parent--hidden"),n&&(document.body.style.paddingRight=i)};r.watch(t,(t=>{var r;t?((n=!o.hasClass(document.body,"el-popup-parent--hidden"))&&(i=document.body.style.paddingRight,a=parseInt(o.getStyle(document.body,"paddingRight"),10)),e=l.default(),t=document.documentElement.clientHeight<document.body.scrollHeight,r=o.getStyle(document.body,"overflowY"),0<e&&(t||"scroll"===r)&&n&&(document.body.style.paddingRight=a+e+"px"),o.addClass(document.body,"el-popup-parent--hidden")):s()}))},e.useMigrating=function(){r.onMounted((()=>{r.getCurrentInstance()}));const t=function(){return{props:{},events:{}}};return{getMigratingConfig:t}},e.useModal=(t,e)=>{r.watch((()=>e.value),(e=>{e?p.push(t):p.splice(p.findIndex((e=>e===t)),1)}))},e.usePreventGlobal=(t,e,n)=>{const i=t=>{n(t)&&t.stopImmediatePropagation()};r.watch((()=>t.value),(t=>{t?o.on(document,e,i,!0):o.off(document,e,i,!0)}),{immediate:!0})},e.useRestoreActive=(t,e)=>{let n;r.watch((()=>t.value),(t=>{var i;t?(n=document.activeElement,r.isRef(e)&&null!=(i=(t=e.value).focus)&&i.call(t)):n.focus()}))},e.useThrottleRender=function(t,e=0){if(0===e)return t;const n=r.ref(!1);let i=0;const o=()=>{i&&clearTimeout(i),i=window.setTimeout((()=>{n.value=t.value}),e)};return r.onMounted(o),r.watch((()=>t.value),(t=>{t?o():n.value=t})),n}},27993:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(92372);n=n(27484);function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}r=i(r);var o=i(n);let a=r.default,s=null;n=t=>{s=t};r=(...t)=>{if(s)return s(...t);var[t,e]=t,n=t.split(".");let r=a;for(let a=0,s=n.length;a<s;a++){var i=n[a];i=r[i];if(a===s-1){var o=i,u=e;return o&&u?o.replace(/\{(\w+)\}/g,((t,e)=>u[e])):o}if(!i)return"";r=i}return""};var u=t=>{(a=t||a).name&&o.default.locale(a.name)};e.default={use:u,t:r,i18n:n},e.i18n=n,e.t=r,e.use=u},92372:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:""},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}}},39272:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=t=>"fixed"!==getComputedStyle(t).position&&null!==t.offsetParent,r=t=>{if(0<t.tabIndex||0===t.tabIndex&&null!==t.getAttribute("tabIndex"))return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&"ignore"!==t.rel;case"INPUT":return!("hidden"===t.type||"file"===t.type);case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},i=t=>{var e;return!!r(t)&&(o.IgnoreUtilFocusChanges=!0,null!=(e=t.focus)&&e.call(t),o.IgnoreUtilFocusChanges=!1,document.activeElement===t)},o={IgnoreUtilFocusChanges:!1,focusFirstDescendant:function(t){for(let n=0;n<t.childNodes.length;n++){var e=t.childNodes[n];if(i(e)||this.focusFirstDescendant(e))return!0}return!1},focusLastDescendant:function(t){for(let n=t.childNodes.length-1;0<=n;n--){var e=t.childNodes[n];if(i(e)||this.focusLastDescendant(e))return!0}return!1}};e.EVENT_CODE={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace"},e.attemptFocus=i,e.default=o,e.isFocusable=r,e.isVisible=n,e.obtainAllFocusableElements=t=>Array.from(t.querySelectorAll('a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])')).filter(r).filter(n),e.triggerEvent=function(t,e,...n){let r;r=e.includes("mouse")||e.includes("click")?"MouseEvents":e.includes("key")?"KeyboardEvent":"HTMLEvents";var i=document.createEvent(r);return i.initEvent(e,...n),t.dispatchEvent(i),t}},40544:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let n={};e.getConfig=t=>n[t],e.setConfig=t=>{n=t}},92532:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHANGE_EVENT="change",e.INPUT_EVENT="input",e.UPDATE_MODEL_EVENT="update:modelValue",e.VALIDATE_STATE_MAP={validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}},46722:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(73566),i=n(35450);function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=o(r);function s(t,e,n,r=!1){t&&e&&n&&t.addEventListener(e,n,r)}function u(t,e,n,r=!1){t&&e&&n&&t.removeEventListener(e,n,r)}function c(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):-1<(" "+t.className+" ").indexOf(" "+e+" ")}const l=function(t,e){if(!a.default){if(!t||!e)return null;"float"===(e=i.camelize(e))&&(e="cssFloat");try{var n,r=t.style[e];return r||((n=document.defaultView.getComputedStyle(t,""))?n[e]:"")}catch(n){return t.style[e]}}};function h(t,e,n){t&&e&&(i.isObject(e)?Object.keys(e).forEach((n=>{h(t,n,e[n])})):(e=i.camelize(e),t.style[e]=n))}const f=(t,e)=>{if(!a.default)return l(t,null==e?"overflow":e?"overflow-y":"overflow-x").match(/(scroll|auto)/)},d=t=>{let e=0,n=t;for(;n;)e+=n.offsetTop,n=n.offsetParent;return e};e.addClass=function(t,e){if(t){let i=t.className;var n=(e||"").split(" ");for(let e=0,o=n.length;e<o;e++){var r=n[e];r&&(t.classList?t.classList.add(r):c(t,r)||(i+=" "+r))}t.classList||(t.className=i)}},e.getOffsetTop=d,e.getOffsetTopDistance=(t,e)=>Math.abs(d(t)-d(e)),e.getScrollContainer=(t,e)=>{if(!a.default){let n=t;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(f(n,e))return n;n=n.parentNode}return n}},e.getStyle=l,e.hasClass=c,e.isInContainer=(t,e)=>{if(a.default||!t||!e)return!1;let n;return t=t.getBoundingClientRect(),n=[window,document,document.documentElement,null,void 0].includes(e)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:e.getBoundingClientRect(),t.top<n.bottom&&t.bottom>n.top&&t.right>n.left&&t.left<n.right},e.isScroll=f,e.off=u,e.on=s,e.once=function(t,e,n){function r(...i){n&&n.apply(this,i),u(t,e,r)}s(t,e,r)},e.removeClass=function(t,e){if(t&&e){var n=e.split(" ");let i=" "+t.className+" ";for(let e=0,o=n.length;e<o;e++){var r=n[e];r&&(t.classList?t.classList.remove(r):c(t,r)&&(i=i.replace(" "+r+" "," ")))}t.classList||(t.className=(i||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,""))}},e.removeStyle=function(t,e){t&&e&&(i.isObject(e)?Object.keys(e).forEach((e=>{h(t,e,"")})):h(t,e,""))},e.setStyle=h,e.stop=t=>t.stopPropagation()},31617:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{constructor(t){super(t),this.name="ElementPlusError"}}e.default=(t,e)=>{throw new n(`[${t}] `+e)},e.warn=function(t,e){}},73566:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="undefined"==typeof window;e.default=n},45562:function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(25759));e.default=class{constructor(t){this.domNode=t,this.init()}init(){var t=this.domNode.childNodes;[].filter.call(t,(t=>1===t.nodeType)).forEach((t=>{new i.default(t)}))}}},25759:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(39272);function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=i(n(27980));e.default=class{constructor(t){this.domNode=t,this.submenu=null,this.submenu=null,this.init()}init(){this.domNode.setAttribute("tabindex","0");var t=this.domNode.querySelector(".el-menu");t&&(this.submenu=new o.default(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",(t=>{let e=!1;switch(t.code){case r.EVENT_CODE.down:r.triggerEvent(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),e=!0;break;case r.EVENT_CODE.up:r.triggerEvent(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),e=!0;break;case r.EVENT_CODE.tab:r.triggerEvent(t.currentTarget,"mouseleave");break;case r.EVENT_CODE.enter:case r.EVENT_CODE.space:e=!0,t.currentTarget.click()}e&&t.preventDefault()}))}}},27980:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(39272);e.default=class{constructor(t,e){this.parent=t,this.domNode=e,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,(e=>{e.addEventListener("keydown",(e=>{let n=!1;switch(e.code){case r.EVENT_CODE.down:this.gotoSubIndex(this.subIndex+1),n=!0;break;case r.EVENT_CODE.up:this.gotoSubIndex(this.subIndex-1),n=!0;break;case r.EVENT_CODE.tab:r.triggerEvent(t,"mouseleave");break;case r.EVENT_CODE.enter:case r.EVENT_CODE.space:n=!0,e.currentTarget.click()}return n&&(e.preventDefault(),e.stopPropagation()),!1}))}))}}},19169:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(73566),i=n(40544),o=n(46722),a=n(39272);function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=s(r);const c=t=>{t.preventDefault(),t.stopPropagation()},l=()=>{null!==g&&void 0!==g&&g.doOnModalClick()};let h,f=!1;function d(){if(!u.default){let t=g.modalDom;return t?f=!0:(f=!1,t=document.createElement("div"),g.modalDom=t,o.on(t,"touchmove",c),o.on(t,"click",l)),t}}const p={},g={modalFade:!0,modalDom:void 0,zIndex:h,getInstance:function(t){return p[t]},register:function(t,e){t&&e&&(p[t]=e)},deregister:function(t){t&&(p[t]=null,delete p[t])},nextZIndex:function(){return++g.zIndex},modalStack:[],doOnModalClick:function(){var t=g.modalStack[g.modalStack.length-1];t&&(t=g.getInstance(t.id))&&t.closeOnClickModal.value&&t.close()},openModal:function(t,e,n,r,i){if(!u.default&&t&&void 0!==e){this.modalFade=i;var a=this.modalStack;for(let e=0,n=a.length;e<n;e++)if(a[e].id===t)return;const s=d();o.addClass(s,"v-modal"),this.modalFade&&!f&&o.addClass(s,"v-modal-enter"),r&&r.trim().split(/\s+/).forEach((t=>o.addClass(s,t))),setTimeout((()=>{o.removeClass(s,"v-modal-enter")}),200),(n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode:document.body).appendChild(s),e&&(s.style.zIndex=String(e)),s.tabIndex=0,s.style.display="",this.modalStack.push({id:t,zIndex:e,modalClass:r})}},closeModal:function(t){const e=this.modalStack,n=d();if(0<e.length){var r=e[e.length-1];if(r.id===t)r.modalClass&&r.modalClass.trim().split(/\s+/).forEach((t=>o.removeClass(n,t))),e.pop(),0<e.length&&(n.style.zIndex=e[e.length-1].zIndex);else for(let n=e.length-1;0<=n;n--)if(e[n].id===t){e.splice(n,1);break}}0===e.length&&(this.modalFade&&o.addClass(n,"v-modal-leave"),setTimeout((()=>{0===e.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",g.modalDom=void 0),o.removeClass(n,"v-modal-leave")}),200))}};Object.defineProperty(g,"zIndex",{configurable:!0,get(){return h=void 0===h?i.getConfig("zIndex")||2e3:h},set(t){h=t}}),u.default||o.on(window,"keydown",(function(t){t.code===a.EVENT_CODE.esc&&(t=function(){if(!u.default&&0<g.modalStack.length){var t=g.modalStack[g.modalStack.length-1];if(t)return g.getInstance(t.id)}}())&&t.closeOnPressEscape.value&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())})),e.default=g},62406:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(91033);n=n(73566);function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=i(r),a=i(n);function s(t){for(const n of t){var e=n.target.__resizeListeners__||[];e.length&&e.forEach((t=>{t()}))}}e.addResizeListener=function(t,e){!a.default&&t&&(t.__resizeListeners__||(t.__resizeListeners__=[],t.__ro__=new o.default(s),t.__ro__.observe(t)),t.__resizeListeners__.push(e))},e.removeResizeListener=function(t,e){t&&t.__resizeListeners__&&(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||t.__ro__.disconnect())}},16311:function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(73566));let o;e.default=function(){var t,e,n;return i.default?0:(void 0===o&&((t=document.createElement("div")).className="el-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t),e=t.offsetWidth,t.style.overflow="scroll",(n=document.createElement("div")).style.width="100%",t.appendChild(n),n=n.offsetWidth,t.parentNode.removeChild(t),o=e-n),o)}},35450:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(29812),i=n(3577),o=n(73566);function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}n(31617);var s=a(o);n=i.hyphenate;const u=t=>"number"==typeof t;Object.defineProperty(e,"isVNode",{enumerable:!0,get:function(){return r.isVNode}}),Object.defineProperty(e,"camelize",{enumerable:!0,get:function(){return i.camelize}}),Object.defineProperty(e,"capitalize",{enumerable:!0,get:function(){return i.capitalize}}),Object.defineProperty(e,"extend",{enumerable:!0,get:function(){return i.extend}}),Object.defineProperty(e,"hasOwn",{enumerable:!0,get:function(){return i.hasOwn}}),Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return i.isArray}}),Object.defineProperty(e,"isObject",{enumerable:!0,get:function(){return i.isObject}}),Object.defineProperty(e,"isString",{enumerable:!0,get:function(){return i.isString}}),Object.defineProperty(e,"looseEqual",{enumerable:!0,get:function(){return i.looseEqual}}),e.$=function(t){return t.value},e.SCOPE="Util",e.addUnit=function(t){return i.isString(t)?t:u(t)?t+"px":""},e.arrayFind=function(t,e){return t.find(e)},e.arrayFindIndex=function(t,e){return t.findIndex(e)},e.arrayFlat=function t(e){return e.reduce(((e,n)=>(n=Array.isArray(n)?t(n):n,e.concat(n))),[])},e.autoprefixer=function(t){const e=["ms-","webkit-"];return["transform","transition","animation"].forEach((n=>{const r=t[n];n&&r&&e.forEach((e=>{t[e+n]=r}))})),t},e.clearTimer=t=>{clearTimeout(t.value),t.value=null},e.coerceTruthyValueToArray=t=>t||0===t?Array.isArray(t)?t:[t]:[],e.deduplicate=function(t){return Array.from(new Set(t))},e.entries=function(t){return Object.keys(t).map((e=>[e,t[e]]))},e.escapeRegexpString=(t="")=>String(t).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),e.generateId=()=>Math.floor(1e4*Math.random()),e.getPropByPath=function(t,e,n){let r=t;var i=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");let o=0;for(o;o<i.length-1&&(r||n);o++){var a=i[o];if(!(a in r)){if(n)throw new Error("please transfer a valid prop path to form item!");break}r=r[a]}return{o:r,k:i[o],v:null===r||void 0===r?void 0:r[i[o]]}},e.getRandomInt=function(t){return Math.floor(Math.random()*Math.floor(t))},e.getValueByPath=(t,e="")=>{let n=t;return e.split(".").map((t=>{n=null===n||void 0===n?void 0:n[t]})),n},e.isBool=t=>"boolean"==typeof t,e.isEdge=function(){return!s.default&&-1<navigator.userAgent.indexOf("Edge")},e.isEmpty=function(t){return!!(!t&&0!==t||i.isArray(t)&&!t.length||i.isObject(t)&&!Object.keys(t).length)},e.isFirefox=function(){return!s.default&&!!window.navigator.userAgent.match(/firefox/i)},e.isHTMLElement=t=>i.toRawType(t).startsWith("HTML"),e.isIE=function(){return!s.default&&!isNaN(Number(document.documentMode))},e.isNumber=u,e.isUndefined=function(t){return void 0===t},e.kebabCase=n,e.rafThrottle=function(t){let e=!1;return function(...n){e||(e=!0,window.requestAnimationFrame((()=>{t.apply(this,n),e=!1})))}},e.toObject=function(t){var e={};for(let n=0;n<t.length;n++)t[n]&&i.extend(e,t[n]);return e},e.useGlobalConfig=function(){var t=r.getCurrentInstance();return"$ELEMENT"in t.proxy?t.proxy.$ELEMENT:{}}},47050:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(29812);(n=e.PatchFlags||(e.PatchFlags={}))[n.TEXT=1]="TEXT",n[n.CLASS=2]="CLASS",n[n.STYLE=4]="STYLE",n[n.PROPS=8]="PROPS",n[n.FULL_PROPS=16]="FULL_PROPS",n[n.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",n[n.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",n[n.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",n[n.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",n[n.NEED_PATCH=512]="NEED_PATCH",n[n.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",n[n.HOISTED=-1]="HOISTED",n[n.BAIL=-2]="BAIL";const i=t=>t.type===r.Fragment,o=t=>t.type===r.Comment,a=t=>"template"===t.type;function s(t,e){if(!o(t))return i(t)||a(t)?0<e?u(t.children,e-1):void 0:t}const u=(t,e=3)=>Array.isArray(t)?s(t[0],e):s(t,e);function c(t,e,n,i,o){return r.openBlock(),r.createBlock(t,e,n,i,o)}e.getFirstValidNode=u,e.isComment=o,e.isFragment=i,e.isTemplate=a,e.isText=t=>t.type===r.Text,e.isValidElementNode=t=>!(i(t)||o(t)),e.renderBlock=c,e.renderIf=function(t,e,n,i,o,a){return t?c(e,n,i,o,a):r.createCommentVNode("v-if",!0)}},12840:function(t,e,n){function r(){}function i(t,e,n){if("function"==typeof e)return i(t,null,e);function s(){t.writable||u()}function u(){b=!1,y||n.call(t)}function c(){y=!1,b||n.call(t)}function l(e){n.call(t,e?new Error("exited with error code: "+e):null)}function h(e){n.call(t,e)}function f(){o.nextTick(d)}function d(){return x||(!y||v&&v.ended&&!v.destroyed)&&(!b||m&&m.ended&&!m.destroyed)?void 0:n.call(t,new Error("premature close"))}function p(){t.req.on("finish",u)}e=e||{},n=a(n||r);var g,m=t._writableState,v=t._readableState,y=e.readable||!1!==e.readable&&t.readable,b=e.writable||!1!==e.writable&&t.writable,x=!1;return(g=t).setHeader&&"function"==typeof g.abort?(t.on("complete",u),t.on("abort",f),t.req?p():t.on("request",p)):b&&!m&&(t.on("end",s),t.on("close",s)),(g=t).stdio&&Array.isArray(g.stdio)&&3===g.stdio.length&&t.on("exit",l),t.on("end",c),t.on("finish",u),!1!==e.error&&t.on("error",h),t.on("close",f),function(){x=!0,t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",p),t.req&&t.req.removeListener("finish",u),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("exit",l),t.removeListener("end",c),t.removeListener("error",h),t.removeListener("close",f)}}var o=n(34155),a=n(30778);t.exports=i},17187:function(t){"use strict";var e="object"==typeof Reflect?Reflect:null,n=e&&"function"==typeof e.apply?e.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},r=e&&"function"==typeof e.ownKeys?e.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)},i=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}var a,s,u;p(t,e,o,{once:!0}),"error"!==e&&(s=i,u={once:!0},"function"==typeof(a=t).on)&&p(a,"error",s,u)}))},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function c(t,e,n,r){var i,o;return s(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener||n),i=t._events),o=i[e]),void 0===o?(o=i[e]=n,++t._eventsCount):("function"==typeof o?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),0<(i=u(t))&&o.length>i&&!o.warned&&(o.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=t,r.type=e,r.count=o.length,console)&&console.warn),t}function l(t,e,n){return t={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},e=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(t),e.listener=n,t.wrapFn=e}function h(t,e,n){if(t=t._events,void 0===t)return[];if(t=t[e],void 0===t)return[];if("function"==typeof t)return n?[t.listener||t]:[t];if(n){for(var r=t,i=new Array(r.length),o=0;o<i.length;++o)i[o]=r[o].listener||r[o];return i}return d(t,t.length)}function f(t){var e=this._events;if(void 0!==e){if(e=e[t],"function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function d(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function p(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){if((a=0<e.length?e[0]:a)instanceof Error)throw a;throw i=new Error("Unhandled error."+(a?" ("+a.message+")":"")),i.context=a,i}var a=o[t];if(void 0===a)return!1;if("function"==typeof a)n(a,this,e);else{var s=a.length,u=d(a,s);for(r=0;r<s;++r)n(u[r],this,e)}return!0},o.prototype.on=o.prototype.addListener=function(t,e){return c(this,t,e,!1)},o.prototype.prependListener=function(t,e){return c(this,t,e,!0)},o.prototype.once=function(t,e){return s(e),this.on(t,l(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,l(this,t,e)),this},o.prototype.off=o.prototype.removeListener=function(t,e){var n,r,i,o,a;if(s(e),void 0!==(r=this._events)&&void 0!==(n=r[t]))if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;if(0===i)n.shift();else{for(var u=n,c=i;c+1<u.length;c++)u[c]=u[c+1];u.pop()}1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.removeAllListeners=function(t){var e,n=this._events;if(void 0!==n)if(void 0===n.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]);else if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(o=e.length-1;0<=o;o--)this.removeListener(t,e[o]);return this},o.prototype.listeners=function(t){return h(this,t,!0)},o.prototype.rawListeners=function(t){return h(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}},49685:function(t,e,n){"use strict";n.r(e),n.d(e,{EPSILON:function(){return r},ARRAY_TYPE:function(){return i},RANDOM:function(){return o},setMatrixArrayType:function(){return a},toRadian:function(){return u},equals:function(){return c}});var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;function a(t){i=t}var s=Math.PI/180;function u(t){return t*s}function c(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},92906:function(t,e,n){"use strict";n.r(e),n.d(e,{glMatrix:function(){return a},mat2:function(){return r},mat2d:function(){return i},mat3:function(){return it},mat4:function(){return ot},quat:function(){return at},quat2:function(){return o},vec2:function(){return Yt},vec3:function(){return qt},vec4:function(){return Xt}});var r={},i=(n.r(r),n.d(r,{LDU:function(){return E},add:function(){return M},adjoint:function(){return g},clone:function(){return u},copy:function(){return c},create:function(){return s},determinant:function(){return m},equals:function(){return T},exactEquals:function(){return C},frob:function(){return S},fromRotation:function(){return x},fromScaling:function(){return _},fromValues:function(){return h},identity:function(){return l},invert:function(){return p},mul:function(){return P},multiply:function(){return v},multiplyScalar:function(){return k},multiplyScalarAndAdd:function(){return O},rotate:function(){return y},scale:function(){return b},set:function(){return f},str:function(){return w},sub:function(){return I},subtract:function(){return A},transpose:function(){return d}}),{}),o=(n.r(i),n.d(i,{add:function(){return Z},clone:function(){return D},copy:function(){return L},create:function(){return N},determinant:function(){return z},equals:function(){return et},exactEquals:function(){return tt},frob:function(){return K},fromRotation:function(){return H},fromScaling:function(){return Y},fromTranslation:function(){return q},fromValues:function(){return B},identity:function(){return R},invert:function(){return F},mul:function(){return nt},multiply:function(){return U},multiplyScalar:function(){return J},multiplyScalarAndAdd:function(){return Q},rotate:function(){return G},scale:function(){return V},set:function(){return j},str:function(){return X},sub:function(){return rt},subtract:function(){return $},translate:function(){return W}}),{}),a=(n.r(o),n.d(o,{add:function(){return Ot},clone:function(){return ut},conjugate:function(){return Bt},copy:function(){return gt},create:function(){return st},dot:function(){return Dt},equals:function(){return Ht},exactEquals:function(){return Wt},fromMat4:function(){return pt},fromRotation:function(){return dt},fromRotationTranslation:function(){return ht},fromRotationTranslationValues:function(){return lt},fromTranslation:function(){return ft},fromValues:function(){return ct},getDual:function(){return bt},getReal:function(){return yt},getTranslation:function(){return wt},identity:function(){return mt},invert:function(){return Rt},len:function(){return Ft},length:function(){return jt},lerp:function(){return Lt},mul:function(){return It},multiply:function(){return Pt},normalize:function(){return Gt},rotateAroundAxis:function(){return kt},rotateByQuatAppend:function(){return Ct},rotateByQuatPrepend:function(){return Tt},rotateX:function(){return Et},rotateY:function(){return Mt},rotateZ:function(){return At},scale:function(){return Nt},set:function(){return vt},setDual:function(){return _t},setReal:function(){return xt},sqrLen:function(){return Ut},squaredLength:function(){return zt},str:function(){return Vt},translate:function(){return St}}),n(49685));function s(){var t=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function u(t){var e=new a.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function h(t,e,n,r){var i=new a.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function f(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function d(t,e){var n;return t===e?(n=e[1],t[1]=e[2],t[2]=n):(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3]),t}function p(t,e){var n=e[0],r=e[1],i=e[2],o=(e=e[3],n*e-i*r);return o?(t[0]=e*(o=1/o),t[1]=-r*o,t[2]=-i*o,t[3]=n*o,t):null}function g(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function m(t){return t[0]*t[3]-t[2]*t[1]}function v(t,e,n){var r=e[0],i=e[1],o=e[2],a=(e=e[3],n[0]),s=n[1],u=n[2];n=n[3];return t[0]=r*a+o*s,t[1]=i*a+e*s,t[2]=r*u+o*n,t[3]=i*u+e*n,t}function y(t,e,n){var r=e[0],i=e[1],o=e[2],a=(e=e[3],Math.sin(n));n=Math.cos(n);return t[0]=r*n+o*a,t[1]=i*n+e*a,t[2]=r*-a+o*n,t[3]=i*-a+e*n,t}function b(t,e,n){var r=e[0],i=e[1],o=e[2],a=(e=e[3],n[0]);n=n[1];return t[0]=r*a,t[1]=i*a,t[2]=o*n,t[3]=e*n,t}function x(t,e){var n=Math.sin(e);e=Math.cos(e);return t[0]=e,t[1]=n,t[2]=-n,t[3]=e,t}function _(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function w(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function S(t){return Math.hypot(t[0],t[1],t[2],t[3])}function E(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function M(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function A(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function C(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function T(t,e){var n=t[0],r=t[1],i=t[2],o=(t=t[3],e[0]),s=e[1],u=e[2];e=e[3];return Math.abs(n-o)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(t-e)<=a.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}function k(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function O(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}var P=v,I=A;function N(){var t=new a.ARRAY_TYPE(6);return a.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function D(t){var e=new a.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function L(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function R(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function B(t,e,n,r,i,o){var s=new a.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=i,s[5]=o,s}function j(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function F(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=(e=e[5],n*o-r*i);return s?(t[0]=o*(s=1/s),t[1]=-r*s,t[2]=-i*s,t[3]=n*s,t[4]=(i*e-o*a)*s,t[5]=(r*a-n*e)*s,t):null}function z(t){return t[0]*t[3]-t[1]*t[2]}function U(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=(e=e[5],n[0]),c=n[1],l=n[2],h=n[3],f=n[4];n=n[5];return t[0]=r*u+o*c,t[1]=i*u+a*c,t[2]=r*l+o*h,t[3]=i*l+a*h,t[4]=r*f+o*n+s,t[5]=i*f+a*n+e,t}function G(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=(e=e[5],Math.sin(n));n=Math.cos(n);return t[0]=r*n+o*u,t[1]=i*n+a*u,t[2]=r*-u+o*n,t[3]=i*-u+a*n,t[4]=s,t[5]=e,t}function V(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=(e=e[5],n[0]);n=n[1];return t[0]=r*u,t[1]=i*u,t[2]=o*n,t[3]=a*n,t[4]=s,t[5]=e,t}function W(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=(e=e[5],n[0]);n=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*u+o*n+s,t[5]=i*u+a*n+e,t}function H(t,e){var n=Math.sin(e);e=Math.cos(e);return t[0]=e,t[1]=n,t[2]=-n,t[3]=e,t[4]=0,t[5]=0,t}function Y(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function q(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function X(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function K(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function Z(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function $(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function J(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function Q(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function tt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function et(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],u=(t=t[5],e[0]),c=e[1],l=e[2],h=e[3],f=e[4];e=e[5];return Math.abs(n-u)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-l)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-h)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-f)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(t-e)<=a.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}var nt=U,rt=$,it=n(35600),ot=n(85975),at=n(32945);function st(){var t=new a.ARRAY_TYPE(8);return a.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function ut(t){var e=new a.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function ct(t,e,n,r,i,o,s,u){var c=new a.ARRAY_TYPE(8);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=s,c[7]=u,c}function lt(t,e,n,r,i,o,s){var u=new a.ARRAY_TYPE(8);u[0]=t,u[1]=e,u[2]=n,u[3]=r,i*=.5,o*=.5,s*=.5;return u[4]=i*r+o*n-s*e,u[5]=o*r+s*t-i*n,u[6]=s*r+i*e-o*t,u[7]=-i*t-o*e-s*n,u}function ht(t,e,n){var r=.5*n[0],i=.5*n[1],o=(n=.5*n[2],e[0]),a=e[1],s=e[2];e=e[3];return t[0]=o,t[1]=a,t[2]=s,t[3]=e,t[4]=r*e+i*s-n*a,t[5]=i*e+n*o-r*s,t[6]=n*e+r*a-i*o,t[7]=-r*o-i*a-n*s,t}function ft(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function dt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function pt(t,e){var n=at.create(),r=(ot.getRotation(n,e),new a.ARRAY_TYPE(3));return ot.getTranslation(r,e),ht(t,n,r),t}function gt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function mt(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function vt(t,e,n,r,i,o,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t}var yt=at.copy;function bt(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var xt=at.copy;function _t(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function wt(t,e){var n=e[4],r=e[5],i=e[6],o=e[7],a=-e[0],s=-e[1],u=-e[2];e=e[3];return t[0]=2*(n*e+o*a+r*u-i*s),t[1]=2*(r*e+o*s+i*a-n*u),t[2]=2*(i*e+o*u+n*s-r*a),t}function St(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=.5*n[0],u=.5*n[1],c=(n=.5*n[2],e[4]),l=e[5],h=e[6];e=e[7];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=a*s+i*n-o*u+c,t[5]=a*u+o*s-r*n+l,t[6]=a*n+r*u-i*s+h,t[7]=-r*s-i*u-o*n+e,t}function Et(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=s*a+l*r+u*o-c*i,f=u*a+l*i+c*r-s*o,d=c*a+l*o+s*i-u*r;l=l*a-s*r-u*i-c*o;return at.rotateX(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+l*r+f*o-d*i,t[5]=f*a+l*i+d*r-h*o,t[6]=d*a+l*o+h*i-f*r,t[7]=l*a-h*r-f*i-d*o,t}function Mt(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=s*a+l*r+u*o-c*i,f=u*a+l*i+c*r-s*o,d=c*a+l*o+s*i-u*r;l=l*a-s*r-u*i-c*o;return at.rotateY(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+l*r+f*o-d*i,t[5]=f*a+l*i+d*r-h*o,t[6]=d*a+l*o+h*i-f*r,t[7]=l*a-h*r-f*i-d*o,t}function At(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=s*a+l*r+u*o-c*i,f=u*a+l*i+c*r-s*o,d=c*a+l*o+s*i-u*r;l=l*a-s*r-u*i-c*o;return at.rotateZ(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+l*r+f*o-d*i,t[5]=f*a+l*i+d*r-h*o,t[6]=d*a+l*o+h*i-f*r,t[7]=l*a-h*r-f*i-d*o,t}function Ct(t,e,n){var r=n[0],i=n[1],o=n[2],a=(n=n[3],e[0]),s=e[1],u=e[2],c=e[3];return t[0]=a*n+c*r+s*o-u*i,t[1]=s*n+c*i+u*r-a*o,t[2]=u*n+c*o+a*i-s*r,t[3]=c*n-a*r-s*i-u*o,a=e[4],s=e[5],u=e[6],c=e[7],t[4]=a*n+c*r+s*o-u*i,t[5]=s*n+c*i+u*r-a*o,t[6]=u*n+c*o+a*i-s*r,t[7]=c*n-a*r-s*i-u*o,t}function Tt(t,e,n){var r=e[0],i=e[1],o=e[2],a=(e=e[3],n[0]),s=n[1],u=n[2],c=n[3];return t[0]=r*c+e*a+i*u-o*s,t[1]=i*c+e*s+o*a-r*u,t[2]=o*c+e*u+r*s-i*a,t[3]=e*c-r*a-i*s-o*u,a=n[4],s=n[5],u=n[6],c=n[7],t[4]=r*c+e*a+i*u-o*s,t[5]=i*c+e*s+o*a-r*u,t[6]=o*c+e*u+r*s-i*a,t[7]=e*c-r*a-i*s-o*u,t}function kt(t,e,n,r){var i,o,s,u,c,l;return Math.abs(r)<a.EPSILON?gt(t,e):(c=Math.hypot(n[0],n[1],n[2]),r*=.5,i=(s=Math.sin(r))*n[0]/c,o=s*n[1]/c,s=s*n[2]/c,n=Math.cos(r),c=e[0],r=e[1],l=e[2],u=e[3],t[0]=c*n+u*i+r*s-l*o,t[1]=r*n+u*o+l*i-c*s,t[2]=l*n+u*s+c*o-r*i,t[3]=u*n-c*i-r*o-l*s,u=e[4],c=e[5],r=e[6],l=e[7],t[4]=u*n+l*i+c*s-r*o,t[5]=c*n+l*o+r*i-u*s,t[6]=r*n+l*s+u*o-c*i,t[7]=l*n-u*i-c*o-r*s,t)}function Ot(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function Pt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[4],u=n[5],c=n[6],l=n[7],h=e[4],f=e[5],d=e[6],p=(e=e[7],n[0]),g=n[1],m=n[2];n=n[3];return t[0]=r*n+a*p+i*m-o*g,t[1]=i*n+a*g+o*p-r*m,t[2]=o*n+a*m+r*g-i*p,t[3]=a*n-r*p-i*g-o*m,t[4]=r*l+a*s+i*c-o*u+h*n+e*p+f*m-d*g,t[5]=i*l+a*u+o*s-r*c+f*n+e*g+d*p-h*m,t[6]=o*l+a*c+r*u-i*s+d*n+e*m+h*g-f*p,t[7]=a*l-r*s-i*u-o*c+e*n-h*p-f*g-d*m,t}var It=Pt;function Nt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var Dt=at.dot;function Lt(t,e,n,r){var i=1-r;return Dt(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function Rt(t,e){var n=zt(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Bt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var jt=at.length,Ft=jt,zt=at.squaredLength,Ut=zt;function Gt(t,e){var n,r,i,o,a,s,u,c,l=zt(e);return 0<l&&(l=Math.sqrt(l),n=e[0]/l,r=e[1]/l,i=e[2]/l,o=e[3]/l,c=n*(a=e[4])+r*(s=e[5])+i*(u=e[6])+o*(e=e[7]),t[0]=n,t[1]=r,t[2]=i,t[3]=o,t[4]=(a-n*c)/l,t[5]=(s-r*c)/l,t[6]=(u-i*c)/l,t[7]=(e-o*c)/l),t}function Vt(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Wt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function Ht(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=(t=t[7],e[0]),h=e[1],f=e[2],d=e[3],p=e[4],g=e[5],m=e[6];e=e[7];return Math.abs(n-l)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-f)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-d)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-p)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-g)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-m)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(t-e)<=a.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}var Yt=n(31437),qt=n(77160),Xt=n(98333)},35600:function(t,e,n){"use strict";n.r(e),n.d(e,{create:function(){return i},fromMat4:function(){return o},clone:function(){return a},copy:function(){return s},fromValues:function(){return u},set:function(){return c},identity:function(){return l},transpose:function(){return h},invert:function(){return f},adjoint:function(){return d},determinant:function(){return p},multiply:function(){return g},translate:function(){return m},rotate:function(){return v},scale:function(){return y},fromTranslation:function(){return b},fromRotation:function(){return x},fromScaling:function(){return _},fromMat2d:function(){return w},fromQuat:function(){return S},normalFromMat4:function(){return E},projection:function(){return M},str:function(){return A},frob:function(){return C},add:function(){return T},subtract:function(){return k},multiplyScalar:function(){return O},multiplyScalarAndAdd:function(){return P},exactEquals:function(){return I},equals:function(){return N},mul:function(){return D},sub:function(){return L}});var r=n(49685);function i(){var t=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function a(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function u(t,e,n,i,o,a,s,u,c){var l=new r.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=i,l[4]=o,l[5]=a,l[6]=s,l[7]=u,l[8]=c,l}function c(t,e,n,r,i,o,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function h(t,e){var n,r,i;return t===e?(n=e[1],r=e[2],i=e[5],t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i):(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]),t}function f(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=(e=e[8],e*a-s*c),h=-e*o+s*u,f=c*o-a*u,d=n*l+r*h+i*f;return d?(t[0]=l*(d=1/d),t[1]=(-e*r+i*c)*d,t[2]=(s*r-i*a)*d,t[3]=h*d,t[4]=(e*n-i*u)*d,t[5]=(-s*n+i*o)*d,t[6]=f*d,t[7]=(-c*n+r*u)*d,t[8]=(a*n-r*o)*d,t):null}function d(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7];e=e[8];return t[0]=a*e-s*c,t[1]=i*c-r*e,t[2]=r*s-i*a,t[3]=s*u-o*e,t[4]=n*e-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t}function p(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7];t=t[8];return e*(t*o-a*u)+n*(-t*i+a*s)+r*(u*i-o*s)}function g(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=(e=e[8],n[0]),f=n[1],d=n[2],p=n[3],g=n[4],m=n[5],v=n[6],y=n[7];n=n[8];return t[0]=h*r+f*a+d*c,t[1]=h*i+f*s+d*l,t[2]=h*o+f*u+d*e,t[3]=p*r+g*a+m*c,t[4]=p*i+g*s+m*l,t[5]=p*o+g*u+m*e,t[6]=v*r+y*a+n*c,t[7]=v*i+y*s+n*l,t[8]=v*o+y*u+n*e,t}function m(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=(e=e[8],n[0]);n=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h*r+n*a+c,t[7]=h*i+n*s+l,t[8]=h*o+n*u+e,t}function v(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=(e=e[8],Math.sin(n));n=Math.cos(n);return t[0]=n*r+h*a,t[1]=n*i+h*s,t[2]=n*o+h*u,t[3]=n*a-h*r,t[4]=n*s-h*i,t[5]=n*u-h*o,t[6]=c,t[7]=l,t[8]=e,t}function y(t,e,n){var r=n[0];n=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function b(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function x(t,e){var n=Math.sin(e);e=Math.cos(e);return t[0]=e,t[1]=n,t[2]=0,t[3]=-n,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function _(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function w(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function S(t,e){var n=e[0],r=e[1],i=e[2],o=(e=e[3],n+n),a=r+r,s=i+i,u=(n=n*o,r*o),c=(r=r*a,i*o),l=i*a;i*=s,o*=e,a*=e,e*=s;return t[0]=1-r-i,t[3]=u-e,t[6]=c+a,t[1]=u+e,t[4]=1-n-i,t[7]=l-o,t[2]=c-a,t[5]=l+o,t[8]=1-n-r,t}function E(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],p=e[12],g=e[13],m=e[14],v=(e=e[15],n*s-r*a),y=n*u-i*a,b=n*c-o*a,x=r*u-i*s,_=r*c-o*s,w=i*c-o*u,S=l*g-h*p,E=l*m-f*p,M=(l=l*e-d*p,h*m-f*g);h=h*e-d*g,f=f*e-d*m,d=v*f-y*h+b*M+x*l-_*E+w*S;return d?(t[0]=(s*f-u*h+c*M)*(d=1/d),t[1]=(u*l-a*f-c*E)*d,t[2]=(a*h-s*l+c*S)*d,t[3]=(i*h-r*f-o*M)*d,t[4]=(n*f-i*l+o*E)*d,t[5]=(r*l-n*h-o*S)*d,t[6]=(g*w-m*_+e*x)*d,t[7]=(m*b-p*w-e*y)*d,t[8]=(p*_-g*b+e*v)*d,t):null}function M(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function A(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function C(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function T(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function k(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function O(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function P(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function I(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function N(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=(t=t[8],e[0]),f=e[1],d=e[2],p=e[3],g=e[4],m=e[5],v=e[6],y=e[7];e=e[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-p)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(s-g)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-m)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-v)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(l-y)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}var D=g,L=k},85975:function(t,e,n){"use strict";n.r(e),n.d(e,{create:function(){return i},clone:function(){return o},copy:function(){return a},fromValues:function(){return s},set:function(){return u},identity:function(){return c},transpose:function(){return l},invert:function(){return h},adjoint:function(){return f},determinant:function(){return d},multiply:function(){return p},translate:function(){return g},scale:function(){return m},rotate:function(){return v},rotateX:function(){return y},rotateY:function(){return b},rotateZ:function(){return x},fromTranslation:function(){return _},fromScaling:function(){return w},fromRotation:function(){return S},fromXRotation:function(){return E},fromYRotation:function(){return M},fromZRotation:function(){return A},fromRotationTranslation:function(){return C},fromQuat2:function(){return T},getTranslation:function(){return k},getScaling:function(){return O},getRotation:function(){return P},fromRotationTranslationScale:function(){return I},fromRotationTranslationScaleOrigin:function(){return N},fromQuat:function(){return D},frustum:function(){return L},perspectiveNO:function(){return R},perspective:function(){return B},perspectiveZO:function(){return j},perspectiveFromFieldOfView:function(){return F},orthoNO:function(){return z},ortho:function(){return U},orthoZO:function(){return G},lookAt:function(){return V},targetTo:function(){return W},str:function(){return H},frob:function(){return Y},add:function(){return q},subtract:function(){return X},multiplyScalar:function(){return K},multiplyScalarAndAdd:function(){return Z},exactEquals:function(){return $},equals:function(){return J},mul:function(){return Q},sub:function(){return tt}});var r=n(49685);function i(){var t=new r.ARRAY_TYPE(16);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function o(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function s(t,e,n,i,o,a,s,u,c,l,h,f,d,p,g,m){var v=new r.ARRAY_TYPE(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=i,v[4]=o,v[5]=a,v[6]=s,v[7]=u,v[8]=c,v[9]=l,v[10]=h,v[11]=f,v[12]=d,v[13]=p,v[14]=g,v[15]=m,v}function u(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,g,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=h,t[11]=f,t[12]=d,t[13]=p,t[14]=g,t[15]=m,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t,e){var n,r,i,o,a,s;return t===e?(n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]),t}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],p=e[12],g=e[13],m=e[14],v=(e=e[15],n*s-r*a),y=n*u-i*a,b=n*c-o*a,x=r*u-i*s,_=r*c-o*s,w=i*c-o*u,S=l*g-h*p,E=l*m-f*p,M=l*e-d*p,A=h*m-f*g,C=h*e-d*g,T=f*e-d*m,k=v*T-y*C+b*A+x*M-_*E+w*S;return k?(t[0]=(s*T-u*C+c*A)*(k=1/k),t[1]=(i*C-r*T-o*A)*k,t[2]=(g*w-m*_+e*x)*k,t[3]=(f*_-h*w-d*x)*k,t[4]=(u*M-a*T-c*E)*k,t[5]=(n*T-i*M+o*E)*k,t[6]=(m*b-p*w-e*y)*k,t[7]=(l*w-f*b+d*y)*k,t[8]=(a*C-s*M+c*S)*k,t[9]=(r*M-n*C-o*S)*k,t[10]=(p*_-g*b+e*v)*k,t[11]=(h*b-l*_-d*v)*k,t[12]=(s*E-a*A-u*S)*k,t[13]=(n*A-r*E+i*S)*k,t[14]=(g*y-p*x-m*v)*k,t[15]=(l*x-h*y+f*v)*k,t):null}function f(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],p=e[12],g=e[13],m=e[14];e=e[15];return t[0]=s*(f*e-d*m)-h*(u*e-c*m)+g*(u*d-c*f),t[1]=-(r*(f*e-d*m)-h*(i*e-o*m)+g*(i*d-o*f)),t[2]=r*(u*e-c*m)-s*(i*e-o*m)+g*(i*c-o*u),t[3]=-(r*(u*d-c*f)-s*(i*d-o*f)+h*(i*c-o*u)),t[4]=-(a*(f*e-d*m)-l*(u*e-c*m)+p*(u*d-c*f)),t[5]=n*(f*e-d*m)-l*(i*e-o*m)+p*(i*d-o*f),t[6]=-(n*(u*e-c*m)-a*(i*e-o*m)+p*(i*c-o*u)),t[7]=n*(u*d-c*f)-a*(i*d-o*f)+l*(i*c-o*u),t[8]=a*(h*e-d*g)-l*(s*e-c*g)+p*(s*d-c*h),t[9]=-(n*(h*e-d*g)-l*(r*e-o*g)+p*(r*d-o*h)),t[10]=n*(s*e-c*g)-a*(r*e-o*g)+p*(r*c-o*s),t[11]=-(n*(s*d-c*h)-a*(r*d-o*h)+l*(r*c-o*s)),t[12]=-(a*(h*m-f*g)-l*(s*m-u*g)+p*(s*f-u*h)),t[13]=n*(h*m-f*g)-l*(r*m-i*g)+p*(r*f-i*h),t[14]=-(n*(s*m-u*g)-a*(r*m-i*g)+p*(r*u-i*s)),t[15]=n*(s*f-u*h)-a*(r*f-i*h)+l*(r*u-i*s),t}function d(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],p=t[13],g=t[14];t=t[15];return(e*a-n*o)*(h*t-f*g)-(e*s-r*o)*(l*t-f*p)+(e*u-i*o)*(l*g-h*p)+(n*s-r*a)*(c*t-f*d)-(n*u-i*a)*(c*g-h*d)+(r*u-i*s)*(c*p-l*d)}function p(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],p=e[11],g=e[12],m=e[13],v=e[14],y=(e=e[15],n[0]),b=n[1],x=n[2],_=n[3];return t[0]=y*r+b*s+x*h+_*g,t[1]=y*i+b*u+x*f+_*m,t[2]=y*o+b*c+x*d+_*v,t[3]=y*a+b*l+x*p+_*e,y=n[4],b=n[5],x=n[6],_=n[7],t[4]=y*r+b*s+x*h+_*g,t[5]=y*i+b*u+x*f+_*m,t[6]=y*o+b*c+x*d+_*v,t[7]=y*a+b*l+x*p+_*e,y=n[8],b=n[9],x=n[10],_=n[11],t[8]=y*r+b*s+x*h+_*g,t[9]=y*i+b*u+x*f+_*m,t[10]=y*o+b*c+x*d+_*v,t[11]=y*a+b*l+x*p+_*e,y=n[12],b=n[13],x=n[14],_=n[15],t[12]=y*r+b*s+x*h+_*g,t[13]=y*i+b*u+x*f+_*m,t[14]=y*o+b*c+x*d+_*v,t[15]=y*a+b*l+x*p+_*e,t}function g(t,e,n){var r,i,o,a,s,u,c,l,h,f,d,p,g=n[0],m=n[1];n=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*n+e[12],t[13]=e[1]*g+e[5]*m+e[9]*n+e[13],t[14]=e[2]*g+e[6]*m+e[10]*n+e[14],t[15]=e[3]*g+e[7]*m+e[11]*n+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=r*g+s*m+h*n+e[12],t[13]=i*g+u*m+f*n+e[13],t[14]=o*g+c*m+d*n+e[14],t[15]=a*g+l*m+p*n+e[15]),t}function m(t,e,n){var r=n[0],i=n[1];n=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function v(t,e,n,i){var o,a,s,u,c,l,h,f,d,p,g,m,v,y,b,x,_,w,S,E,M=i[0],A=i[1],C=(i=i[2],Math.hypot(M,A,i));return C<r.EPSILON?null:(M*=C=1/C,A*=C,i*=C,C=Math.sin(n),n=Math.cos(n),a=e[0],s=e[1],u=e[2],c=e[3],l=e[4],h=e[5],f=e[6],d=e[7],p=e[8],g=e[9],m=e[10],v=e[11],b=M*A*(o=1-n)-i*C,x=A*A*o+n,_=i*A*o+M*C,w=M*i*o+A*C,S=A*i*o-M*C,E=i*i*o+n,t[0]=a*(n=M*M*o+n)+l*(y=A*M*o+i*C)+p*(i=i*M*o-A*C),t[1]=s*n+h*y+g*i,t[2]=u*n+f*y+m*i,t[3]=c*n+d*y+v*i,t[4]=a*b+l*x+p*_,t[5]=s*b+h*x+g*_,t[6]=u*b+f*x+m*_,t[7]=c*b+d*x+v*_,t[8]=a*w+l*S+p*E,t[9]=s*w+h*S+g*E,t[10]=u*w+f*S+m*E,t[11]=c*w+d*S+v*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function y(t,e,n){var r=Math.sin(n),i=(n=Math.cos(n),e[4]),o=e[5],a=e[6],s=e[7],u=e[8],c=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*n+u*r,t[5]=o*n+c*r,t[6]=a*n+l*r,t[7]=s*n+h*r,t[8]=u*n-i*r,t[9]=c*n-o*r,t[10]=l*n-a*r,t[11]=h*n-s*r,t}function b(t,e,n){var r=Math.sin(n),i=(n=Math.cos(n),e[0]),o=e[1],a=e[2],s=e[3],u=e[8],c=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n-u*r,t[1]=o*n-c*r,t[2]=a*n-l*r,t[3]=s*n-h*r,t[8]=i*r+u*n,t[9]=o*r+c*n,t[10]=a*r+l*n,t[11]=s*r+h*n,t}function x(t,e,n){var r=Math.sin(n),i=(n=Math.cos(n),e[0]),o=e[1],a=e[2],s=e[3],u=e[4],c=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n+u*r,t[1]=o*n+c*r,t[2]=a*n+l*r,t[3]=s*n+h*r,t[4]=u*n-i*r,t[5]=c*n-o*r,t[6]=l*n-a*r,t[7]=h*n-s*r,t}function _(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function w(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,e,n){var i,o=n[0],a=n[1],s=(n=n[2],Math.hypot(o,a,n));return s<r.EPSILON?null:(o*=s=1/s,a*=s,n*=s,s=Math.sin(e),e=Math.cos(e),t[0]=o*o*(i=1-e)+e,t[1]=a*o*i+n*s,t[2]=n*o*i-a*s,t[3]=0,t[4]=o*a*i-n*s,t[5]=a*a*i+e,t[6]=n*a*i+o*s,t[7]=0,t[8]=o*n*i+a*s,t[9]=a*n*i-o*s,t[10]=n*n*i+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function E(t,e){var n=Math.sin(e);e=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,e){var n=Math.sin(e);e=Math.cos(e);return t[0]=e,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,e){var n=Math.sin(e);e=Math.cos(e);return t[0]=e,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,e,n){var r=e[0],i=e[1],o=e[2],a=(e=e[3],r+r),s=i+i,u=o+o,c=r*a,l=r*s,h=(r=r*u,i*s);i*=u,o*=u,a*=e,s*=e,e*=u;return t[0]=1-(h+o),t[1]=l+e,t[2]=r-s,t[3]=0,t[4]=l-e,t[5]=1-(c+o),t[6]=i+a,t[7]=0,t[8]=r+s,t[9]=i-a,t[10]=1-(c+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function T(t,e){var n=new r.ARRAY_TYPE(3),i=-e[0],o=-e[1],a=-e[2],s=e[3],u=e[4],c=e[5],l=e[6],h=e[7],f=i*i+o*o+a*a+s*s;return 0<f?(n[0]=2*(u*s+h*i+c*a-l*o)/f,n[1]=2*(c*s+h*o+l*i-u*a)/f,n[2]=2*(l*s+h*a+u*o-c*i)/f):(n[0]=2*(u*s+h*i+c*a-l*o),n[1]=2*(c*s+h*o+l*i-u*a),n[2]=2*(l*s+h*a+u*o-c*i)),C(t,e,n),t}function k(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function O(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9];e=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,c,e),t}function P(t,e){var n=new r.ARRAY_TYPE(3),i=(O(n,e),1/n[0]),o=1/n[1],a=(n=1/n[2],e[0]*i),s=e[1]*o,u=e[2]*n,c=e[4]*i,l=e[5]*o,h=e[6]*n,f=(i=e[8]*i,o=e[9]*o,e=e[10]*n,n=a+l+e,0);return 0<n?(f=2*Math.sqrt(1+n),t[3]=.25*f,t[0]=(h-o)/f,t[1]=(i-u)/f,t[2]=(s-c)/f):l<a&&e<a?(f=2*Math.sqrt(1+a-l-e),t[3]=(h-o)/f,t[0]=.25*f,t[1]=(s+c)/f,t[2]=(i+u)/f):e<l?(f=2*Math.sqrt(1+l-a-e),t[3]=(i-u)/f,t[0]=(s+c)/f,t[1]=.25*f,t[2]=(h+o)/f):(f=2*Math.sqrt(1+e-a-l),t[3]=(s-c)/f,t[0]=(i+u)/f,t[1]=(h+o)/f,t[2]=.25*f),t}function I(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=(e=e[3],i+i),u=o+o,c=a+a,l=i*s,h=i*u,f=(i=i*c,o*u),d=(o=o*c,a=a*c,s=e*s,u=e*u,e=e*c,c=r[0],r[1]);r=r[2];return t[0]=(1-(f+a))*c,t[1]=(h+e)*c,t[2]=(i-u)*c,t[3]=0,t[4]=(h-e)*d,t[5]=(1-(l+a))*d,t[6]=(o+s)*d,t[7]=0,t[8]=(i+u)*r,t[9]=(o-s)*r,t[10]=(1-(l+f))*r,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function N(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=(e=e[3],o+o),c=a+a,l=s+s,h=o*u,f=o*c,d=(o=o*l,a*c),p=(a=a*l,s=s*l,u=e*u,c=e*c,e=e*l,l=r[0],r[1]),g=(r=r[2],i[0]),m=i[1],v=(i=i[2],(1-(d+s))*l),y=(f+e)*l;l*=o-c,f=(f-e)*p,e=(1-(h+s))*p,s=(a+u)*p,p=(o+c)*r,o=(a-u)*r,c=(1-(h+d))*r;return t[0]=v,t[1]=y,t[2]=l,t[3]=0,t[4]=f,t[5]=e,t[6]=s,t[7]=0,t[8]=p,t[9]=o,t[10]=c,t[11]=0,t[12]=n[0]+g-(v*g+f*m+p*i),t[13]=n[1]+m-(y*g+e*m+o*i),t[14]=n[2]+i-(l*g+s*m+c*i),t[15]=1,t}function D(t,e){var n=e[0],r=e[1],i=e[2],o=(e=e[3],n+n),a=r+r,s=i+i,u=(n=n*o,r*o),c=(r=r*a,i*o),l=i*a;i*=s,o*=e,a*=e,e*=s;return t[0]=1-r-i,t[1]=u+e,t[2]=c-a,t[3]=0,t[4]=u-e,t[5]=1-n-i,t[6]=l+o,t[7]=0,t[8]=c+a,t[9]=l-o,t[10]=1-n-r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function R(t,e,n,r,i){return e=1/Math.tan(e/2),t[0]=e/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(n=1/(r-i)),t[14]=2*i*r*n):(t[10]=-1,t[14]=-2*r),t}var B=R;function j(t,e,n,r,i){return e=1/Math.tan(e/2),t[0]=e/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=i*(n=1/(r-i)),t[14]=i*r*n):(t[10]=-1,t[14]=-r),t}function F(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=(e=Math.tan(e.rightDegrees*Math.PI/180),2/(a+e)),u=2/(i+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(a-e)*s*.5,t[9]=(i-o)*u*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function z(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}var U=z;function G(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i);a=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=o*a,t[15]=1,t}function V(t,e,n,i){var o,a,s,u,l=e[0],h=e[1],f=(e=e[2],i[0]),d=i[1],p=(i=i[2],n[0]),g=n[1];n=n[2];return Math.abs(l-p)<r.EPSILON&&Math.abs(h-g)<r.EPSILON&&Math.abs(e-n)<r.EPSILON?c(t):(p=l-p,g=h-g,n=e-n,o=d*(n*=u=1/Math.hypot(p,g,n))-i*(g*=u),i=i*(p*=u)-f*n,f=f*g-d*p,(u=Math.hypot(o,i,f))?(o*=u=1/u,i*=u,f*=u):f=i=o=0,d=g*f-n*i,a=n*o-p*f,s=p*i-g*o,(u=Math.hypot(d,a,s))?(d*=u=1/u,a*=u,s*=u):s=a=d=0,t[0]=o,t[1]=d,t[2]=p,t[3]=0,t[4]=i,t[5]=a,t[6]=g,t[7]=0,t[8]=f,t[9]=s,t[10]=n,t[11]=0,t[12]=-(o*l+i*h+f*e),t[13]=-(d*l+a*h+s*e),t[14]=-(p*l+g*h+n*e),t[15]=1,t)}function W(t,e,n,r){var i=e[0],o=e[1],a=(e=e[2],r[0]),s=r[1],u=(r=r[2],i-n[0]),c=o-n[1],l=(n=e-n[2],u*u+c*c+n*n),h=(0<l&&(u*=l=1/Math.sqrt(l),c*=l,n*=l),s*n-r*c);r=r*u-a*n,a=a*c-s*u;return 0<(l=h*h+r*r+a*a)&&(h*=l=1/Math.sqrt(l),r*=l,a*=l),t[0]=h,t[1]=r,t[2]=a,t[3]=0,t[4]=c*a-n*r,t[5]=n*h-u*a,t[6]=u*r-c*h,t[7]=0,t[8]=u,t[9]=c,t[10]=n,t[11]=0,t[12]=i,t[13]=o,t[14]=e,t[15]=1,t}function H(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Y(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function q(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function X(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function K(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Z(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function $(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function J(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],p=t[11],g=t[12],m=t[13],v=t[14],y=(t=t[15],e[0]),b=e[1],x=e[2],_=e[3],w=e[4],S=e[5],E=e[6],M=e[7],A=e[8],C=e[9],T=e[10],k=e[11],O=e[12],P=e[13],I=e[14];e=e[15];return Math.abs(n-y)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-b)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-_)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-w)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(u-S)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-E)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(l-M)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(h-A)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(f-C)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(d-T)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(p-k)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(g-O)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(m-P)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(v-I)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}var Q=p,tt=X},32945:function(t,e,n){"use strict";n.r(e),n.d(e,{create:function(){return o},identity:function(){return a},setAxisAngle:function(){return s},getAxisAngle:function(){return u},getAngle:function(){return c},multiply:function(){return l},rotateX:function(){return h},rotateY:function(){return f},rotateZ:function(){return d},calculateW:function(){return p},exp:function(){return g},ln:function(){return m},pow:function(){return v},slerp:function(){return y},random:function(){return b},invert:function(){return x},conjugate:function(){return _},fromMat3:function(){return w},fromEuler:function(){return S},str:function(){return E},clone:function(){return P},fromValues:function(){return I},copy:function(){return N},set:function(){return D},add:function(){return L},mul:function(){return R},scale:function(){return B},dot:function(){return j},lerp:function(){return F},length:function(){return z},len:function(){return U},squaredLength:function(){return G},sqrLen:function(){return V},normalize:function(){return W},exactEquals:function(){return H},equals:function(){return Y},rotationTo:function(){return q},sqlerp:function(){return X},setAxes:function(){return K}});var r=n(49685),i=(e=n(35600),n(77160));n=n(98333);function o(){var t=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function a(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function s(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function u(t,e){var n=2*Math.acos(e[3]),i=Math.sin(n/2);return i>r.EPSILON?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n}function c(t,e){return t=j(t,e),Math.acos(2*t*t-1)}function l(t,e,n){var r=e[0],i=e[1],o=e[2],a=(e=e[3],n[0]),s=n[1],u=n[2];n=n[3];return t[0]=r*n+e*a+i*u-o*s,t[1]=i*n+e*s+o*a-r*u,t[2]=o*n+e*u+r*s-i*a,t[3]=e*n-r*a-i*s-o*u,t}function h(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=(e=e[3],Math.sin(n));n=Math.cos(n);return t[0]=r*n+e*a,t[1]=i*n+o*a,t[2]=o*n-i*a,t[3]=e*n-r*a,t}function f(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=(e=e[3],Math.sin(n));n=Math.cos(n);return t[0]=r*n-o*a,t[1]=i*n+e*a,t[2]=o*n+r*a,t[3]=e*n-i*a,t}function d(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=(e=e[3],Math.sin(n));n=Math.cos(n);return t[0]=r*n+i*a,t[1]=i*n-r*a,t[2]=o*n+e*a,t[3]=e*n-o*a,t}function p(t,e){var n=e[0],r=e[1];e=e[2];return t[0]=n,t[1]=r,t[2]=e,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-e*e)),t}function g(t,e){var n=e[0],r=e[1],i=e[2],o=(e=e[3],Math.sqrt(n*n+r*r+i*i)),a=(e=Math.exp(e),0<o?e*Math.sin(o)/o:0);return t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=e*Math.cos(o),t}function m(t,e){var n=e[0],r=e[1],i=e[2],o=(e=e[3],Math.sqrt(n*n+r*r+i*i));o=0<o?Math.atan2(o,e)/o:0;return t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=.5*Math.log(n*n+r*r+i*i+e*e),t}function v(t,e,n){return m(t,e),B(t,t,n),g(t,t),t}function y(t,e,n,i){var o,a,s=e[0],u=e[1],c=e[2],l=(e=e[3],n[0]),h=n[1],f=n[2],d=(n=n[3],s*l+u*h+c*f+e*n);return d<0&&(d=-d,l=-l,h=-h,f=-f,n=-n),d=1-d>r.EPSILON?(d=Math.acos(d),o=Math.sin(d),a=Math.sin((1-i)*d)/o,Math.sin(i*d)/o):(a=1-i,i),t[0]=a*s+d*l,t[1]=a*u+d*h,t[2]=a*c+d*f,t[3]=a*e+d*n,t}function b(t){var e=r.RANDOM(),n=r.RANDOM(),i=r.RANDOM(),o=Math.sqrt(1-e);e=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=e*Math.sin(2*Math.PI*i),t[3]=e*Math.cos(2*Math.PI*i),t}function x(t,e){var n=e[0],r=e[1],i=e[2],o=(e=e[3],n*n+r*r+i*i+e*e);o=o?1/o:0;return t[0]=-n*o,t[1]=-r*o,t[2]=-i*o,t[3]=e*o,t}function _(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function w(t,e){var n,r,i,o=e[0]+e[4]+e[8];return 0<o?(i=Math.sqrt(o+1),t[3]=.5*i,t[0]=(e[5]-e[7])*(i=.5/i),t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i):(e[4]>e[o=0]&&(o=1),n=((o=e[8]>e[3*o+o]?2:o)+1)%3,r=(o+2)%3,i=Math.sqrt(e[3*o+o]-e[3*n+n]-e[3*r+r]+1),t[o]=.5*i,t[3]=(e[3*n+r]-e[3*r+n])*(i=.5/i),t[n]=(e[3*n+o]+e[3*o+n])*i,t[r]=(e[3*r+o]+e[3*o+r])*i),t}function S(t,e,n,r){var i=.5*Math.PI/180,o=(i=(e*=i,n*=i,r*=i,Math.sin(e)),e=Math.cos(e),Math.sin(n)),a=(n=Math.cos(n),Math.sin(r));r=Math.cos(r);return t[0]=i*n*r-e*o*a,t[1]=e*o*r+i*n*a,t[2]=e*n*a-i*o*r,t[3]=e*n*r+i*o*a,t}function E(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var M,A,C,T,k,O,P=n.clone,I=n.fromValues,N=n.copy,D=n.set,L=n.add,R=l,B=n.scale,j=n.dot,F=n.lerp,z=n.length,U=z,G=n.squaredLength,V=G,W=n.normalize,H=n.exactEquals,Y=n.equals,q=(M=i.create(),A=i.fromValues(1,0,0),C=i.fromValues(0,1,0),function(t,e,n){var r=i.dot(e,n);return r<-.999999?(i.cross(M,A,e),i.len(M)<1e-6&&i.cross(M,C,e),i.normalize(M,M),s(t,M,Math.PI),t):.999999<r?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(i.cross(M,e,n),t[0]=M[0],t[1]=M[1],t[2]=M[2],t[3]=1+r,W(t,t))}),X=(T=o(),k=o(),function(t,e,n,r,i,o){return y(T,e,i,o),y(k,n,r,o),y(t,T,k,2*o*(1-o)),t}),K=(O=e.create(),function(t,e,n,r){return O[0]=n[0],O[3]=n[1],O[6]=n[2],O[1]=r[0],O[4]=r[1],O[7]=r[2],O[2]=-e[0],O[5]=-e[1],O[8]=-e[2],W(t,w(t,O))})},31437:function(t,e,n){"use strict";n.r(e),n.d(e,{create:function(){return i},clone:function(){return o},fromValues:function(){return a},copy:function(){return s},set:function(){return u},add:function(){return c},subtract:function(){return l},multiply:function(){return h},divide:function(){return f},ceil:function(){return d},floor:function(){return p},min:function(){return g},max:function(){return m},round:function(){return v},scale:function(){return y},scaleAndAdd:function(){return b},distance:function(){return x},squaredDistance:function(){return _},length:function(){return w},squaredLength:function(){return S},negate:function(){return E},inverse:function(){return M},normalize:function(){return A},dot:function(){return C},cross:function(){return T},lerp:function(){return k},random:function(){return O},transformMat2:function(){return P},transformMat2d:function(){return I},transformMat3:function(){return N},transformMat4:function(){return D},rotate:function(){return L},angle:function(){return R},zero:function(){return B},str:function(){return j},exactEquals:function(){return F},equals:function(){return z},len:function(){return G},sub:function(){return V},mul:function(){return W},div:function(){return H},dist:function(){return Y},sqrDist:function(){return q},sqrLen:function(){return X},forEach:function(){return K}});var r=n(49685);function i(){var t=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function a(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function s(t,e){return t[0]=e[0],t[1]=e[1],t}function u(t,e,n){return t[0]=e,t[1]=n,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function g(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function v(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function y(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function x(t,e){var n=e[0]-t[0];e=e[1]-t[1];return Math.hypot(n,e)}function _(t,e){var n=e[0]-t[0];e=e[1]-t[1];return n*n+e*e}function w(t){var e=t[0];t=t[1];return Math.hypot(e,t)}function S(t){var e=t[0];t=t[1];return e*e+t*t}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t}function M(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function A(t,e){var n=e[0],r=e[1];n=n*n+r*r;return 0<n&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t}function C(t,e){return t[0]*e[0]+t[1]*e[1]}function T(t,e,n){return e=e[0]*n[1]-e[1]*n[0],t[0]=t[1]=0,t[2]=e,t}function k(t,e,n,r){var i=e[0];e=e[1];return t[0]=i+r*(n[0]-i),t[1]=e+r*(n[1]-e),t}function O(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function P(t,e,n){var r=e[0];e=e[1];return t[0]=n[0]*r+n[2]*e,t[1]=n[1]*r+n[3]*e,t}function I(t,e,n){var r=e[0];e=e[1];return t[0]=n[0]*r+n[2]*e+n[4],t[1]=n[1]*r+n[3]*e+n[5],t}function N(t,e,n){var r=e[0];e=e[1];return t[0]=n[0]*r+n[3]*e+n[6],t[1]=n[1]*r+n[4]*e+n[7],t}function D(t,e,n){var r=e[0];e=e[1];return t[0]=n[0]*r+n[4]*e+n[12],t[1]=n[1]*r+n[5]*e+n[13],t}function L(t,e,n,r){var i=e[0]-n[0],o=(e=e[1]-n[1],Math.sin(r));r=Math.cos(r);return t[0]=i*r-e*o+n[0],t[1]=i*o+e*r+n[1],t}function R(t,e){var n=t[0],r=(t=t[1],e[0]),i=(e=e[1],Math.sqrt(n*n+t*t)*Math.sqrt(r*r+e*e));return Math.acos(Math.min(Math.max(i&&(n*r+t*e)/i,-1),1))}function B(t){return t[0]=0,t[1]=0,t}function j(t){return"vec2("+t[0]+", "+t[1]+")"}function F(t,e){return t[0]===e[0]&&t[1]===e[1]}function z(t,e){var n=t[0],i=(t=t[1],e[0]);e=e[1];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}var U,G=w,V=l,W=h,H=f,Y=x,q=_,X=S,K=(U=i(),function(t,e,n,r,i,o){var a,s;for(e=e||2,n=n||0,s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)U[0]=t[a],U[1]=t[a+1],i(U,U,o),t[a]=U[0],t[a+1]=U[1];return t})},77160:function(t,e,n){"use strict";n.r(e),n.d(e,{create:function(){return i},clone:function(){return o},length:function(){return a},fromValues:function(){return s},copy:function(){return u},set:function(){return c},add:function(){return l},subtract:function(){return h},multiply:function(){return f},divide:function(){return d},ceil:function(){return p},floor:function(){return g},min:function(){return m},max:function(){return v},round:function(){return y},scale:function(){return b},scaleAndAdd:function(){return x},distance:function(){return _},squaredDistance:function(){return w},squaredLength:function(){return S},negate:function(){return E},inverse:function(){return M},normalize:function(){return A},dot:function(){return C},cross:function(){return T},lerp:function(){return k},hermite:function(){return O},bezier:function(){return P},random:function(){return I},transformMat4:function(){return N},transformMat3:function(){return D},transformQuat:function(){return L},rotateX:function(){return R},rotateY:function(){return B},rotateZ:function(){return j},angle:function(){return F},zero:function(){return z},str:function(){return U},exactEquals:function(){return G},equals:function(){return V},sub:function(){return H},mul:function(){return Y},div:function(){return q},dist:function(){return X},sqrDist:function(){return K},len:function(){return Z},sqrLen:function(){return $},forEach:function(){return J}});var r=n(49685);function i(){var t=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(t){var e=t[0],n=t[1];t=t[2];return Math.hypot(e,n,t)}function s(t,e,n){var i=new r.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function l(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function h(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function f(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function d(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function g(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function m(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function v(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function y(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function b(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function x(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1];e=e[2]-t[2];return Math.hypot(n,r,e)}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1];e=e[2]-t[2];return n*n+r*r+e*e}function S(t){var e=t[0],n=t[1];t=t[2];return e*e+n*n+t*t}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function M(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function A(t,e){var n=e[0],r=e[1],i=e[2];n=n*n+r*r+i*i;return 0<n&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function C(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function T(t,e,n){var r=e[0],i=e[1],o=(e=e[2],n[0]),a=n[1];n=n[2];return t[0]=i*n-e*a,t[1]=e*o-r*n,t[2]=r*a-i*o,t}function k(t,e,n,r){var i=e[0],o=e[1];e=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=e+r*(n[2]-e),t}function O(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1);a*=3-2*o;return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*a,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*a,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*a,t}function P(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a;s*=3*o,a*=3*u,u*=o;return t[0]=e[0]*c+n[0]*s+r[0]*a+i[0]*u,t[1]=e[1]*c+n[1]*s+r[1]*a+i[1]*u,t[2]=e[2]*c+n[2]*s+r[2]*a+i[2]*u,t}function I(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t}function N(t,e,n){var r=e[0],i=e[1],o=(e=e[2],n[3]*r+n[7]*i+n[11]*e+n[15]);return t[0]=(n[0]*r+n[4]*i+n[8]*e+n[12])/(o=o||1),t[1]=(n[1]*r+n[5]*i+n[9]*e+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*e+n[14])/o,t}function D(t,e,n){var r=e[0],i=e[1];e=e[2];return t[0]=r*n[0]+i*n[3]+e*n[6],t[1]=r*n[1]+i*n[4]+e*n[7],t[2]=r*n[2]+i*n[5]+e*n[8],t}function L(t,e,n){var r=n[0],i=n[1],o=n[2],a=(n=n[3],e[0]),s=e[1],u=(e=e[2],i*e-o*s),c=o*a-r*e,l=r*s-i*a,h=i*l-o*c;o=o*u-r*l,r=r*c-i*u,i=2*n;return c*=i,l*=i,o*=2,r*=2,t[0]=a+(u*=i)+(h*=2),t[1]=s+c+o,t[2]=e+l+r,t}function R(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function B(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function j(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function F(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];n=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),r=n&&C(t,e)/n;return Math.acos(Math.min(Math.max(r,-1),1))}function z(t){return t[0]=0,t[1]=0,t[2]=0,t}function U(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function G(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function V(t,e){var n=t[0],i=t[1],o=(t=t[2],e[0]),a=e[1];e=e[2];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}var W,H=h,Y=f,q=d,X=_,K=w,Z=a,$=S,J=(W=i(),function(t,e,n,r,i,o){var a,s;for(e=e||3,n=n||0,s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)W[0]=t[a],W[1]=t[a+1],W[2]=t[a+2],i(W,W,o),t[a]=W[0],t[a+1]=W[1],t[a+2]=W[2];return t})},98333:function(t,e,n){"use strict";n.r(e),n.d(e,{create:function(){return i},clone:function(){return o},fromValues:function(){return a},copy:function(){return s},set:function(){return u},add:function(){return c},subtract:function(){return l},multiply:function(){return h},divide:function(){return f},ceil:function(){return d},floor:function(){return p},min:function(){return g},max:function(){return m},round:function(){return v},scale:function(){return y},scaleAndAdd:function(){return b},distance:function(){return x},squaredDistance:function(){return _},length:function(){return w},squaredLength:function(){return S},negate:function(){return E},inverse:function(){return M},normalize:function(){return A},dot:function(){return C},cross:function(){return T},lerp:function(){return k},random:function(){return O},transformMat4:function(){return P},transformQuat:function(){return I},zero:function(){return N},str:function(){return D},exactEquals:function(){return L},equals:function(){return R},sub:function(){return j},mul:function(){return F},div:function(){return z},dist:function(){return U},sqrDist:function(){return G},len:function(){return V},sqrLen:function(){return W},forEach:function(){return H}});var r=n(49685);function i(){var t=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function o(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(t,e,n,i){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function g(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function v(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function y(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];e=e[3]-t[3];return Math.hypot(n,r,i,e)}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];e=e[3]-t[3];return n*n+r*r+i*i+e*e}function w(t){var e=t[0],n=t[1],r=t[2];t=t[3];return Math.hypot(e,n,r,t)}function S(t){var e=t[0],n=t[1],r=t[2];t=t[3];return e*e+n*n+r*r+t*t}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function M(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function A(t,e){var n=e[0],r=e[1],i=e[2],o=(e=e[3],n*n+r*r+i*i+e*e);return 0<o&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=e*o,t}function C(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function T(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=(n=n[2]*r[3]-n[3]*r[2],r=e[0],e[1]),l=e[2];e=e[3];return t[0]=c*n-l*u+e*s,t[1]=-r*n+l*a-e*o,t[2]=r*u-c*a+e*i,t[3]=-r*s+c*o-l*i,t}function k(t,e,n,r){var i=e[0],o=e[1],a=e[2];e=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=e+r*(n[3]-e),t}function O(t,e){var n,i,o,a,s,u;for(e=e||1;1<=(s=(n=2*r.RANDOM()-1)*n+(i=2*r.RANDOM()-1)*i););for(;1<=(u=(o=2*r.RANDOM()-1)*o+(a=2*r.RANDOM()-1)*a););var c=Math.sqrt((1-s)/u);return t[0]=e*n,t[1]=e*i,t[2]=e*o*c,t[3]=e*a*c,t}function P(t,e,n){var r=e[0],i=e[1],o=e[2];e=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*e,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*e,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*e,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*e,t}function I(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=(n=n[3],n*r+s*o-u*i),l=n*i+u*r-a*o,h=n*o+a*i-s*r;r=-a*r-s*i-u*o;return t[0]=c*n+r*-a+l*-u-h*-s,t[1]=l*n+r*-s+h*-a-c*-u,t[2]=h*n+r*-u+c*-s-l*-a,t[3]=e[3],t}function N(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function D(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function L(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function R(t,e){var n=t[0],i=t[1],o=t[2],a=(t=t[3],e[0]),s=e[1],u=e[2];e=e[3];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}var B,j=l,F=h,z=f,U=x,G=_,V=w,W=S,H=(B=i(),function(t,e,n,r,i,o){var a,s;for(e=e||4,n=n||0,s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)B[0]=t[a],B[1]=t[a+1],B[2]=t[a+2],B[3]=t[a+3],i(B,B,o),t[a]=B[0],t[a+1]=B[1],t[a+2]=B[2],t[a+3]=B[3];return t})},89550:function(t){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}},62189:function(t){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}},76057:function(t){t.exports=function(t){var e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}},3492:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t}},61589:function(t){t.exports=function(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t}},77741:function(t){t.exports=function(t,e,n){return e=e[0]*n[1]-e[1]*n[0],t[0]=t[1]=0,t[2]=e,t}},80278:function(t,e,n){t.exports=n(27953)},27953:function(t){t.exports=function(t,e){var n=e[0]-t[0];e=e[1]-t[1];return Math.sqrt(n*n+e*e)}},49973:function(t,e,n){t.exports=n(6773)},6773:function(t){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}},56601:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]}},89936:function(t){t.exports=1e-6},51232:function(t,e,n){t.exports=function(t,e){var n=t[0],i=(t=t[1],e[0]);e=e[1];return Math.abs(n-i)<=r*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};var r=n(89936)},39546:function(t){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},67744:function(t){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}},49002:function(t,e,n){t.exports=function(t,e,n,i,o,a){var s,u;for(e=e||2,n=n||0,u=i?Math.min(i*e+n,t.length):t.length,s=n;s<u;s+=e)r[0]=t[s],r[1]=t[s+1],o(r,r,a),t[s]=r[0],t[s+1]=r[1];return t};var r=n(61589)()},69878:function(t){t.exports=function(t,e){var n=new Float32Array(2);return n[0]=t,n[1]=e,n}},32644:function(t,e,n){t.exports={EPSILON:n(89936),create:n(61589),clone:n(76057),fromValues:n(69878),copy:n(3492),set:n(68854),equals:n(51232),exactEquals:n(39546),add:n(89550),subtract:n(43650),sub:n(45222),multiply:n(79920),mul:n(23113),divide:n(6773),div:n(49973),inverse:n(83793),min:n(20676),max:n(97899),rotate:n(48677),floor:n(67744),ceil:n(62189),round:n(57074),scale:n(47838),scaleAndAdd:n(21066),distance:n(27953),dist:n(80278),squaredDistance:n(14290),sqrDist:n(79569),length:n(37781),len:n(8123),squaredLength:n(26791),sqrLen:n(1791),negate:n(90549),normalize:n(36820),dot:n(56601),cross:n(77741),lerp:n(20577),random:n(85773),transformMat2:n(904),transformMat2d:n(60736),transformMat3:n(60221),transformMat4:n(37674),forEach:n(49002),limit:n(82418)}},83793:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}},8123:function(t,e,n){t.exports=n(37781)},37781:function(t){t.exports=function(t){var e=t[0];t=t[1];return Math.sqrt(e*e+t*t)}},20577:function(t){t.exports=function(t,e,n,r){var i=e[0];e=e[1];return t[0]=i+r*(n[0]-i),t[1]=e+r*(n[1]-e),t}},82418:function(t){t.exports=function(t,e,n){var r=e[0]*e[0]+e[1]*e[1];return n*n<r?(r=Math.sqrt(r),t[0]=e[0]/r*n,t[1]=e[1]/r*n):(t[0]=e[0],t[1]=e[1]),t}},97899:function(t){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},20676:function(t){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}},23113:function(t,e,n){t.exports=n(79920)},79920:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}},90549:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},36820:function(t){t.exports=function(t,e){var n=e[0],r=e[1];n=n*n+r*r;return 0<n&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}},85773:function(t){t.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}},48677:function(t){t.exports=function(t,e,n){var r=Math.cos(n),i=(n=Math.sin(n),e[0]);e=e[1];return t[0]=i*r-e*n,t[1]=i*n+e*r,t}},57074:function(t){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}},47838:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}},21066:function(t){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}},68854:function(t){t.exports=function(t,e,n){return t[0]=e,t[1]=n,t}},79569:function(t,e,n){t.exports=n(14290)},1791:function(t,e,n){t.exports=n(26791)},14290:function(t){t.exports=function(t,e){var n=e[0]-t[0];e=e[1]-t[1];return n*n+e*e}},26791:function(t){t.exports=function(t){var e=t[0];t=t[1];return e*e+t*t}},45222:function(t,e,n){t.exports=n(43650)},43650:function(t){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}},904:function(t){t.exports=function(t,e,n){var r=e[0];e=e[1];return t[0]=n[0]*r+n[2]*e,t[1]=n[1]*r+n[3]*e,t}},60736:function(t){t.exports=function(t,e,n){var r=e[0];e=e[1];return t[0]=n[0]*r+n[2]*e+n[4],t[1]=n[1]*r+n[3]*e+n[5],t}},60221:function(t){t.exports=function(t,e,n){var r=e[0];e=e[1];return t[0]=n[0]*r+n[3]*e+n[6],t[1]=n[1]*r+n[4]*e+n[7],t}},37674:function(t){t.exports=function(t,e,n){var r=e[0];e=e[1];return t[0]=n[0]*r+n[4]*e+n[12],t[1]=n[1]*r+n[5]*e+n[13],t}},80645:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1;i=t[e+h];for(h+=f,o=i&(1<<-l)-1,i>>=-l,l+=s;0<l;o=256*o+t[e+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;0<l;a=256*a+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(i?-1:1);a+=Math.pow(2,r),o-=c}return(i?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u=8*o-i-1,c=(1<<u)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1;o=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(r=Math.pow(2,-a))<1&&(a--,r*=2),2<=(e+=1<=a+l?h/r:h*Math.pow(2,1-l))*r&&(a++,r/=2),c<=a+l?(s=0,a=c):1<=a+l?(s=(e*r-1)*Math.pow(2,i),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));8<=i;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;t[n+f]=255&a,f+=d,a/=256,u-=8);t[n+f-d]|=128*o}},35717:function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){var n;e&&(t.super_=e,(n=function(){}).prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t)}},38186:function(t){var e=[],n=[];function r(t,r){if(r=r||{},void 0===t)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var i,o=!0===r.prepend?"prepend":"append",a=(r=void 0!==r.container?r.container:document.querySelector("head"),e.indexOf(r));return-1===a&&(a=e.push(r)-1,n[a]={}),void 0!==n[a]&&void 0!==n[a][o]?i=n[a][o]:(i=n[a][o]=((a=document.createElement("style")).setAttribute("type","text/css"),a),"prepend"==o?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),i.styleSheet?i.styleSheet.cssText+=t:i.textContent+=t,i}t.exports=r,t.exports.insertCss=r},7375:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Symbol.for("INJECTION");function r(t,e,r,i){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i&&!Reflect.hasMetadata(n,this,e)&&Reflect.defineMetadata(n,r(),this,e),Reflect.hasMetadata(n,this,e)?Reflect.getMetadata(n,this,e):r()},set:function(t){Reflect.defineMetadata(n,t,this,e)}})}e.makePropertyInjectDecorator=function(t,e){return function(n){return function(i,o){r(i,o,(function(){return t.get(n)}),e)}}},e.makePropertyInjectNamedDecorator=function(t,e){return function(n,i){return function(o,a){r(o,a,(function(){return t.getNamed(n,i)}),e)}}},e.makePropertyInjectTaggedDecorator=function(t,e){return function(n,i,o){return function(a,s){r(a,s,(function(){return t.getTagged(n,i,o)}),e)}}},e.makePropertyMultiInjectDecorator=function(t,e){return function(n){return function(i,o){r(i,o,(function(){return t.getAll(n)}),e)}}}},84879:function(t,e,n){"use strict";var r=n(7375);e.Z=function(t,e){return{lazyInject:r.makePropertyInjectDecorator(t,e=void 0===e||e),lazyInjectNamed:r.makePropertyInjectNamedDecorator(t,e),lazyInjectTagged:r.makePropertyInjectTaggedDecorator(t,e),lazyMultiInject:r.makePropertyMultiInjectDecorator(t,e)}}},99934:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var r=n(16674),i=n(6867);function o(t,e,n,i,o){var a={},s="number"==typeof o;o=void 0!==o&&s?o.toString():n;if(s&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);if(s=(a=Reflect.hasOwnMetadata(t,e)?Reflect.getMetadata(t,e):a)[o],Array.isArray(s))for(var u=0,c=s;u<c.length;u++){var l=c[u];if(l.key===i.key)throw new Error(r.DUPLICATED_METADATA+" "+l.key.toString())}else s=[];s.push(i),a[o]=s,Reflect.defineMetadata(t,a,e)}function a(t,e){Reflect.decorate(t,e)}e.tagParameter=function(t,e,n,r){o(i.TAGGED,t,e,r,n)},e.tagProperty=function(t,e,n){o(i.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){var r,i;"number"==typeof n?a([(r=n,i=t,function(t,e){i(t,e,r)})],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}},5744:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var r=n(16674),i=n(6867),o=n(47738),a=n(99934);function s(t){this._cb=t}s.prototype.unwrap=function(){return this._cb()},e.LazyServiceIdentifer=s,e.inject=function(t){return function(e,n,s){if(void 0===t)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(e.name));var u=new o.Metadata(i.INJECT_TAG,t);"number"==typeof s?a.tagParameter(e,n,s,u):a.tagProperty(e,n,u)}}},64315:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var r=n(16674),i=n(6867);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,t))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(i.PARAM_TYPES,e,t),t}}},71693:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var r=n(6867),i=n(47738),o=n(99934);e.multiInject=function(t){return function(e,n,a){var s=new i.Metadata(r.MULTI_INJECT_TAG,t);"number"==typeof a?o.tagParameter(e,n,a,s):o.tagProperty(e,n,s)}}},38085:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var r=n(6867),i=n(47738),o=n(99934);e.named=function(t){return function(e,n,a){var s=new i.Metadata(r.NAMED_TAG,t);"number"==typeof a?o.tagParameter(e,n,a,s):o.tagProperty(e,n,s)}}},6515:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var r=n(6867),i=n(47738),o=n(99934);e.optional=function(){return function(t,e,n){var a=new i.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(t,e,n,a):o.tagProperty(t,e,a)}}},7014:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var r=n(16674),i=n(6867),o=n(47738);e.postConstruct=function(){return function(t,e,n){if(e=new o.Metadata(i.POST_CONSTRUCT,e),Reflect.hasOwnMetadata(i.POST_CONSTRUCT,t.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,e,t.constructor)}}},32052:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var r=n(47738),i=n(99934);e.tagged=function(t,e){return function(n,o,a){var s=new r.Metadata(t,e);"number"==typeof a?i.tagParameter(n,o,a,s):i.tagProperty(n,o,s)}}},55638:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var r=n(6867),i=n(47738),o=n(99934);e.targetName=function(t){return function(e,n,a){var s=new i.Metadata(r.NAME_TAG,t);o.tagParameter(e,n,a,s)}}},86757:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var r=n(6867),i=n(47738),o=n(99934);e.unmanaged=function(){return function(t,e,n){var a=new i.Metadata(r.UNMANAGED_TAG,!0);o.tagParameter(t,e,n,a)}}},44290:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var r=n(28421),i=n(37791);function o(t,e){this.id=i.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}o.prototype.clone=function(){var t=new o(this.serviceIdentifier,this.scope);return t.activated=t.scope===r.BindingScopeEnum.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e.Binding=o},23184:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0,e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},16674:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0,e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},6867:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NON_CUSTOM_TAG_KEYS=e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct",e.NON_CUSTOM_TAG_KEYS=[e.INJECT_TAG,e.MULTI_INJECT_TAG,e.NAME_TAG,e.UNMANAGED_TAG,e.NAMED_TAG,e.OPTIONAL_TAG]},51389:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var u=[a,s];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,(u=i?[2&u[0],i.value]:u)[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3]))o.label=u[1];else if(6===u[0]&&o.label<i[1])o.label=i[1],i=u;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(u)}}u=e.call(t,o)}catch(s){u=[6,s],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},o=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},a=(Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0,n(44290)),s=n(16674),u=n(28421),c=n(6867),l=n(51377),h=n(86311),f=n(31927),d=n(51860),p=n(37791),g=n(55800),m=n(85700),v=n(80175);function y(t){if(this._appliedMiddleware=[],t=t||{},"object"!=typeof t)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=u.BindingScopeEnum.Transient;else if(t.defaultScope!==u.BindingScopeEnum.Singleton&&t.defaultScope!==u.BindingScopeEnum.Transient&&t.defaultScope!==u.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new v.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new l.MetadataReader}y.merge=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=new y,a=(t=o([t,e],n).map((function(t){return h.getBindingDictionary(t)})),h.getBindingDictionary(i));return t.forEach((function(t){var e;e=a,t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))})),i},y.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},y.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,void 0,void 0,(function(){var e,n,r,o,a;return i(this,(function(i){switch(i.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},y.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){function n(t){return t.moduleId===r}var r;r=e.id,t._bindingDictionary.removeByCondition(n)}))},y.prototype.bind=function(t){var e=this.options.defaultScope||u.BindingScopeEnum.Transient;e=new a.Binding(t,e);return this._bindingDictionary.add(t,e),new d.BindingToSyntax(e)},y.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},y.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(s.CANNOT_UNBIND+" "+g.getServiceIdentifierAsString(e))}},y.prototype.unbindAll=function(){this._bindingDictionary=new v.Lookup},y.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent?this.parent.isBound(t):e},y.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,c.NAMED_TAG,e)},y.prototype.isBoundTagged=function(t,e,n){var r,i,o=!1;return this._bindingDictionary.hasKey(t)&&(r=this._bindingDictionary.get(t),i=h.createMockRequest(this,t,e,n),o=r.some((function(t){return t.constraint(i)}))),!o&&this.parent?this.parent.isBoundTagged(t,e,n):o},y.prototype.snapshot=function(){this._snapshots.push(m.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},y.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},y.prototype.createChild=function(t){return t=new y(t||this.options),t.parent=this,t},y.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._appliedMiddleware=this._appliedMiddleware.concat(t);var n=this._middleware||this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},y.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},y.prototype.get=function(t){return this._get(!1,!1,u.TargetTypeEnum.Variable,t)},y.prototype.getTagged=function(t,e,n){return this._get(!1,!1,u.TargetTypeEnum.Variable,t,e,n)},y.prototype.getNamed=function(t,e){return this.getTagged(t,c.NAMED_TAG,e)},y.prototype.getAll=function(t){return this._get(!0,!0,u.TargetTypeEnum.Variable,t)},y.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,u.TargetTypeEnum.Variable,t,e,n)},y.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,c.NAMED_TAG,e)},y.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),this._appliedMiddleware.forEach((function(t){e.applyMiddleware(t)})),e.get(t)},y.prototype._getContainerModuleHelpersFactory=function(){function t(t,e){t._binding.moduleId=e}var e=this;return function(n){return{bindFunction:function(n){return n=e.bind.bind(e)(n),t(n,i),n},isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:(r=i=n,function(n){return n=e.rebind.bind(e)(n),t(n,r),n}),unbindFunction:function(t){e.unbind.bind(e)(t)}};var r,i}},y.prototype._get=function(t,e,n,r,i,o){var a=null;t={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(null==(a=this._middleware(t)))throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(t);return a},y.prototype._planAndResolve=function(){var t=this;return function(e){var n=h.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);n=e.contextInterceptor(n);return f.resolve(n)}},e.Container=y},33244:function(t,e,n){"use strict";function r(t){this.id=i.id(),this.registry=t}Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var i=n(37791);e.ContainerModule=function(t){this.id=i.id(),this.registry=t},e.AsyncContainerModule=r},85700:function(t,e){"use strict";function n(){}Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0,n.of=function(t,e){var r=new n;return r.bindings=t,r.middleware=e,r},e.ContainerSnapshot=n},80175:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var r=n(16674);function i(){this._map=new Map}i.prototype.getMap=function(){return this._map},i.prototype.add=function(t,e){if(null==t)throw new Error(r.NULL_ARGUMENT);if(null==e)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},i.prototype.get=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);if(t=this._map.get(t),void 0!==t)return t;throw new Error(r.KEY_NOT_FOUND)},i.prototype.remove=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(r.KEY_NOT_FOUND)},i.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,r){n=n.filter((function(e){return!t(e)})),0<n.length?e._map.set(r,n):e._map.delete(r)}))},i.prototype.hasKey=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);return this._map.has(t)},i.prototype.clone=function(){var t=new i;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,e.clone())}))})),t},i.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},e.Lookup=i},86700:function(t,e,n){"use strict";e.f3=e.t6=e.b2=e.W2=void 0,n(6867);var r=n(51389),i=(Object.defineProperty(e,"W2",{enumerable:!0,get:function(){return r.Container}}),n(28421),n(33244),n(64315)),o=(Object.defineProperty(e,"b2",{enumerable:!0,get:function(){return i.injectable}}),n(32052),n(38085)),a=(Object.defineProperty(e,"t6",{enumerable:!0,get:function(){return o.named}}),n(5744));Object.defineProperty(e,"f3",{enumerable:!0,get:function(){return a.inject}}),n(6515),n(86757),n(71693),n(55638),n(7014),n(51377),n(37791),n(99934),n(80758),n(55800),n(70600)},95228:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var r=n(37791);function i(t){this.id=r.id(),this.container=t}i.prototype.addPlan=function(t){this.plan=t},i.prototype.setCurrentRequest=function(t){this.currentRequest=t},e.Context=i},47738:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(6867);function i(t,e){this.key=t,this.value=e}i.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e.Metadata=i},51377:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var r=n(6867);function i(){}i.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,t)||{}}},i.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(r.TAGGED_PROP,t)||[]},e.MetadataReader=i},55314:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0,e.Plan=function(t,e){this.parentContext=t,this.rootRequest=e}},86311:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var r=n(23184),i=n(16674),o=n(28421),a=n(6867),s=n(85265),u=n(55800),c=n(95228),l=n(47738),h=n(55314),f=n(6e3),d=n(6748),p=n(18924);function g(t){return t._bindingDictionary}function m(t,e,n,o,a){var s=v(n.container,a.serviceIdentifier),c=[];return s.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),s=v(n.container,a.serviceIdentifier)),c=e?s:s.filter((function(t){var e=new d.Request(t.serviceIdentifier,n,o,t,a);return t.constraint(e)})),function(t,e,n,o){switch(e.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return;throw a=u.getServiceIdentifierAsString(t),s=i.NOT_REGISTERED,s=(s+=u.listMetadataForTarget(a,n))+u.listRegisteredBindingsForServiceIdentifier(o,a,v),new Error(s);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return;case r.BindingCount.MultipleBindingsAvailable:default:var a,s;if(n.isArray())return;throw a=u.getServiceIdentifierAsString(t),s=i.AMBIGUOUS_MATCH+" "+a,s+=u.listRegisteredBindingsForServiceIdentifier(o,a,v),new Error(s)}}(a.serviceIdentifier,c,a,n.container),c}function v(t,e){var n=[],r=g(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=v(t.parent,e)),n}e.getBindingDictionary=g,e.plan=function(t,e,n,r,g,v,y,b){void 0===b&&(b=!1);e=new c.Context(e);var x,_=(_=g,x="",n=n?a.MULTI_INJECT_TAG:a.INJECT_TAG,n=new l.Metadata(n,_),r=new p.Target(r,x,_,n),void 0!==v&&(x=new l.Metadata(v,y),r.metadata.push(x)),r);try{return function t(e,n,r,a,s,u){var c,l;null===s?(c=m(e,n,a,null,u),l=new d.Request(r,a,null,c,u),r=new h.Plan(a,l),a.addPlan(r)):(c=m(e,n,a,s,u),l=s.addChildRequest(u.serviceIdentifier,c,u)),c.forEach((function(n){var r=null;if(u.isArray())r=l.addChildRequest(n.serviceIdentifier,n,u);else{if(n.cache)return;r=l}if(n.type===o.BindingTypeEnum.Instance&&null!==n.implementationType){var s=f.getDependencies(e,n.implementationType);if(!a.container.options.skipBaseClassChecks){var c=f.getBaseClassDependencyCount(e,n.implementationType);if(s.length<c)throw c=i.ARGUMENTS_LENGTH_MISMATCH(f.getFunctionName(n.implementationType)),new Error(c)}s.forEach((function(n){t(e,!1,n.serviceIdentifier,a,r,n)}))}}))}(t,b,g,e,null,_),e}catch(t){throw s.isStackOverflowExeption(t)&&e.plan&&u.circularDependencyToException(e.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,r){return n=new p.Target(o.TargetTypeEnum.Variable,"",e,new l.Metadata(n,r)),r=new c.Context(t),new d.Request(e,r,null,[],n)}},88460:function(t,e){"use strict";function n(t){this.str=t}Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0,n.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},n.prototype.endsWith=function(t){t=t.split("").reverse().join("");var e=this.str.split("").reverse().join("");return this.startsWith.call({str:e},t)},n.prototype.contains=function(t){return-1!==this.str.indexOf(t)},n.prototype.equals=function(t){return this.str===t},n.prototype.value=function(){return this.str},e.QueryableString=n},6e3:function(t,e,n){"use strict";var r=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},i=(Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0,n(5744)),o=n(16674),a=n(28421),s=n(6867),u=n(55800),c=(Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return u.getFunctionName}}),n(18924));function l(t,e,n,s){var u=t.getConstructorMetadata(n),l=u.compilerGeneratedMetadata;if(void 0===l)throw f=o.MISSING_INJECTABLE_ANNOTATION+" "+e+".",new Error(f);var f=u.userGeneratedMetadata,d=(u=Object.keys(f),0===n.length&&0<u.length),p=u.length>n.length;s=function(t,e,n,r,s){for(var u=[],l=0;l<s;l++){var f=function(t,e,n,r,s){s=s[t.toString()]||[];var u=h(s),l=!0!==u.unmanaged,f=(r=r[t],u.inject||u.multiInject);if((r=f||r)instanceof i.LazyServiceIdentifer&&(r=r.unwrap()),l){f=r===Object,l=r===Function;var d=void 0===r;f=f||l||d;if(!e&&f)throw l=o.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".",new Error(l);return d=new c.Target(a.TargetTypeEnum.ConstructorArgument,u.targetName,r),d.metadata=s,d}return null}(l,t,e,n,r);null!==f&&u.push(f)}return u}(s,e,l,f,(d||p?u:n).length),e=function t(e,n){for(var i=e.getPropertiesMetadata(n),o=[],s=Object.keys(i),u=0,l=s;u<l.length;u++){var f=l[u],d=i[f],p=h(i[f]);f=p.targetName||f,p=p.inject||p.multiInject,f=new c.Target(a.TargetTypeEnum.ClassProperty,f,p);f.metadata=d,o.push(f)}return s=Object.getPrototypeOf(n.prototype).constructor,s!==Object&&(n=t(e,s),o=r(r([],o),n)),o}(t,n);return r(r([],s),e)}function h(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[s.INJECT_TAG],multiInject:e[s.MULTI_INJECT_TAG],targetName:e[s.NAME_TAG],unmanaged:e[s.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return l(t,u.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,n){var r,i;n=Object.getPrototypeOf(n.prototype).constructor;return n!==Object?(r=(i=l(e,u.getFunctionName(n),n,!0)).map((function(t){return t.metadata.filter((function(t){return t.key===s.UNMANAGED_TAG}))})),r=[].concat.apply([],r).length,0<(i=i.length-r)?i:t(e,n)):0}},6748:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var r=n(37791);function i(t,e,n,i,o){this.id=r.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}i.prototype.addChildRequest=function(t,e,n){return t=new i(t,this.parentContext,this,e,n),this.childRequests.push(t),t},e.Request=i},18924:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var r=n(6867),i=n(37791),o=n(47738),a=n(88460);function s(t,e,n,s){this.id=i.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array,t=null,"string"==typeof s?t=new o.Metadata(r.NAMED_TAG,s):s instanceof o.Metadata&&(t=s),null!==t&&this.metadata.push(t)}s.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++)if(n[e].key===t)return!0;return!1},s.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},s.prototype.matchesArray=function(t){return this.matchesTag(r.MULTI_INJECT_TAG)(t)},s.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},s.prototype.isTagged=function(){return this.metadata.some((function(t){return r.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))}))},s.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},s.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===r.NAMED_TAG}))[0]:null},s.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return r.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))})):null},s.prototype.matchesNamedTag=function(t){return this.matchesTag(r.NAMED_TAG)(t)},s.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,i=e.metadata;r<i.length;r++){var o=i[r];if(o.key===t&&o.value===n)return!0}return!1}},e.Target=s},52279:function(t,e,n){"use strict";var r=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},i=(Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0,n(16674)),o=n(28421),a=n(6867);e.resolveInstance=function(t,e,n){var s,u,c=null,l=(e=(c=0<e.length?(l=e.filter((function(t){return null!==t.target&&t.target.type===o.TargetTypeEnum.ConstructorArgument})).map(n),c=new(t.bind.apply(t,r([void 0],l))),s=c,l=n,u=(n=(n=e).filter((function(t){return null!==t.target&&t.target.type===o.TargetTypeEnum.ClassProperty}))).map(l),n.forEach((function(t,e){t=t.target.name.value(),e=u[e],s[t]=e})),s):new t,t),c);if(Reflect.hasMetadata(a.POST_CONSTRUCT,e)){n=Reflect.getMetadata(a.POST_CONSTRUCT,e);try{l[n.value]()}catch(t){throw new Error(i.POST_CONSTRUCT_ERROR(e.name,t.message))}}return c}},31927:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var r=n(16674),i=n(28421),o=n(85265),a=n(55800),s=n(52279),u=function(t,e,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},c=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,o=e.childRequests,l=e.target&&e.target.isArray(),h=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(l&&h)return o.map((function(e){return c(t)(e)}));if(l=null,!e.target.isOptional()||0!==n.length){var f,d=n[0];h=d.scope===i.BindingScopeEnum.Singleton,n=d.scope===i.BindingScopeEnum.Request;if(h&&d.activated)return d.cache;if(n&&null!==t&&t.has(d.id))return t.get(d.id);if(d.type===i.BindingTypeEnum.ConstantValue)l=d.cache,d.activated=!0;else if(d.type===i.BindingTypeEnum.Function)l=d.cache,d.activated=!0;else if(d.type===i.BindingTypeEnum.Constructor)l=d.implementationType;else if(d.type===i.BindingTypeEnum.DynamicValue&&null!==d.dynamicValue)l=u("toDynamicValue",d.serviceIdentifier,(function(){return d.dynamicValue(e.parentContext)}));else if(d.type===i.BindingTypeEnum.Factory&&null!==d.factory)l=u("toFactory",d.serviceIdentifier,(function(){return d.factory(e.parentContext)}));else if(d.type===i.BindingTypeEnum.Provider&&null!==d.provider)l=u("toProvider",d.serviceIdentifier,(function(){return d.provider(e.parentContext)}));else{if(d.type!==i.BindingTypeEnum.Instance||null===d.implementationType)throw f=a.getServiceIdentifierAsString(e.serviceIdentifier),new Error(r.INVALID_BINDING_TYPE+" "+f);l=s.resolveInstance(d.implementationType,o,c(t))}return"function"==typeof d.onActivation&&(l=d.onActivation(e.parentContext,l)),h&&(d.cache=l,d.activated=!0),n&&null!==t&&!t.has(d.id)&&t.set(d.id,l),l}}};e.resolve=function(t){return c(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},83366:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var r=n(28421),i=n(71325);function o(t){this._binding=t}o.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},o.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},o.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},e.BindingInSyntax=o},99812:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var r=n(83366),i=n(51811),o=n(98370);function a(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(t)}a.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},a.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},a.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},a.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},a.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},a.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},a.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},a.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},a.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},a.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},a.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},a.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},a.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},a.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},a.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},a.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},a.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},a.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},a.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e.BindingInWhenOnSyntax=a},51811:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var r=n(98370);function i(t){this._binding=t}i.prototype.onActivation=function(t){return this._binding.onActivation=t,new r.BindingWhenSyntax(this._binding)},e.BindingOnSyntax=i},51860:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var r=n(16674),i=n(28421),o=n(99812),a=n(71325);function s(t){this._binding=t}s.prototype.to=function(t){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=t,new o.BindingInWhenOnSyntax(this._binding)},s.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},s.prototype.toConstantValue=function(t){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},s.prototype.toDynamicValue=function(t){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},s.prototype.toConstructor=function(t){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=t,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},s.prototype.toFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=t,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},s.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(r.INVALID_FUNCTION_BINDING);return t=this.toConstantValue(t),this._binding.type=i.BindingTypeEnum.Function,this._binding.scope=i.BindingScopeEnum.Singleton,t},s.prototype.toAutoFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},s.prototype.toProvider=function(t){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=t,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},s.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},e.BindingToSyntax=s},71325:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var r=n(51811),i=n(98370);function o(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}o.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},o.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},o.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},o.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},o.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},o.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},o.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},o.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},o.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},o.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},o.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},o.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},o.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},o.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},o.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},o.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e.BindingWhenOnSyntax=o},98370:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var r=n(51811),i=n(80758);function o(t){this._binding=t}o.prototype.when=function(t){return this._binding.constraint=t,new r.BindingOnSyntax(this._binding)},o.prototype.whenTargetNamed=function(t){return this._binding.constraint=i.namedConstraint(t),new r.BindingOnSyntax(this._binding)},o.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new r.BindingOnSyntax(this._binding)},o.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=i.taggedConstraint(t)(e),new r.BindingOnSyntax(this._binding)},o.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return i.typeConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},o.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return i.namedConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},o.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return i.taggedConstraint(t)(e)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},o.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},o.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},o.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},o.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},o.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},o.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},o.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},o.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},e.BindingWhenSyntax=o},80758:function(t,e,n){"use strict";function r(t,e){return null!==(t=t.parentRequest)&&(!!e(t)||r(t,e))}function i(t){return function(e){function n(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)}return n.metaData=new a.Metadata(t,e),n}}Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var o=n(6867),a=n(47738);e.traverseAncerstors=r,n=(e.taggedConstraint=i)(o.NAMED_TAG);e.namedConstraint=n,e.typeConstraint=function(t){return function(e){var n=null;return null!==e&&(n=e.bindings[0],"string"==typeof t?n.serviceIdentifier===t:(n=e.bindings[0].implementationType,t===n))}}},70600:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0,e.multiBindToService=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}},85265:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var r=n(16674);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===r.STACK_OVERFLOW}},37791:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var n=0;e.id=function(){return n++}},55800:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var r=n(16674);function i(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function o(t){return function t(e,n){void 0===n&&(n=[]);var r=i(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\x3e ")}function a(t){var e;return t.name||((e=(t=t.toString()).match(/^function\s*([^\s(]+)/))?e[1]:"Anonymous function: "+t)}e.getServiceIdentifierAsString=i,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var r="";return 0!==(n=n(t,e)).length&&(r="\nRegistered bindings:",n.forEach((function(t){var e="Object";null!==t.implementationType&&(e=a(t.implementationType)),r=r+"\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)}))),r},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){var n;if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(e,e.serviceIdentifier))throw n=o(e),new Error(r.CIRCULAR_DEPENDENCY+" "+n);t(e)}))},e.listMetadataForTarget=function(t,e){var n,r;return e.isTagged()||e.isNamed()?(n="",r=e.getNamedTag(),e=e.getCustomTags(),null!==r&&(n+=r.toString()+"\n"),null!==e&&e.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n):" "+t},e.getFunctionName=a},62705:function(t,e,n){n=n(55639).Symbol,t.exports=n},44239:function(t,e,n){var r=n(62705),i=n(89607),o=n(2333),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(a&&a in Object(t)?i:o)(t)}},27561:function(t,e,n){var r=n(67990),i=/^\s+/;t.exports=function(t){return t&&t.slice(0,r(t)+1).replace(i,"")}},31957:function(t,e,n){n="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,t.exports=n},89607:function(t,e,n){n=n(62705);var r=Object.prototype,i=r.hasOwnProperty,o=r.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,a),n=t[a];try{var r=!(t[a]=void 0)}catch(t){}var s=o.call(t);return r&&(e?t[a]=n:delete t[a]),s}},2333:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},55639:function(t,e,n){n=n(31957);var r="object"==typeof self&&self&&self.Object===Object&&self;n=n||r||Function("return this")();t.exports=n},67990:function(t){var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},23279:function(t,e,n){var r=n(13218),i=n(7771),o=n(14841),a=Math.max,s=Math.min;t.exports=function(t,e,n){var u,c,l,h,f,d,p=0,g=!1,m=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=u,r=c;return u=c=void 0,p=e,h=t.apply(r,n)}function b(t){var n=t-d;return void 0===d||e<=n||n<0||m&&l<=t-p}function x(){var t,n=i();if(b(n))return _(n);f=setTimeout(x,(t=e-(n-d),m?s(t,l-(n-p)):t))}function _(t){return f=void 0,v&&u?y(t):(u=c=void 0,h)}function w(){var t=i(),n=b(t);if(u=arguments,c=this,d=t,n){if(void 0===f)return p=t=d,f=setTimeout(x,e),g?y(t):h;if(m)return clearTimeout(f),f=setTimeout(x,e),y(d)}return void 0===f&&(f=setTimeout(x,e)),h}return e=o(e)||0,r(n)&&(g=!!n.leading,m="maxWait"in n,l=m?a(o(n.maxWait)||0,e):l,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==f&&clearTimeout(f),u=d=c=f=void(p=0)},w.flush=function(){return void 0===f?h:_(i())},w}},13218:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},37005:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},33448:function(t,e,n){var r=n(44239),i=n(37005);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},7771:function(t,e,n){var r=n(55639);t.exports=function(){return r.Date.now()}},23493:function(t,e,n){var r=n(23279),i=n(13218);t.exports=function(t,e,n){var o=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(t,e,{leading:o,maxWait:e,trailing:a})}},14841:function(t,e,n){var r=n(27561),i=n(13218),o=n(33448),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)&&(e="function"==typeof t.valueOf?t.valueOf():t,t=i(e)?e+"":e),"string"!=typeof t)return 0===t?t:+t;t=r(t);var e=s.test(t);return e||u.test(t)?c(t.slice(2),e?2:8):a.test(t)?NaN:+t}},29652:function(t,e,n){"use strict";function r(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r&&r.push(n)||t.set(e,[n])},off:function(e,n){e=t.get(e),e&&e.splice(e.indexOf(n)>>>0,1)},emit:function(e,n){(t.get(e)||[]).slice().map((function(t){t(n)})),(t.get("*")||[]).slice().map((function(t){t(e,n)}))}}}n.r(e),n.d(e,{default:function(){return r}})},70023:function(t,e,n){"use strict";n.r(e),n.d(e,{AbstractMatrix:function(){return b},CHO:function(){return K},CholeskyDecomposition:function(){return K},EVD:function(){return q},EigenvalueDecomposition:function(){return q},LU:function(){return R},LuDecomposition:function(){return R},Matrix:function(){return _},MatrixColumnSelectionView:function(){return M},MatrixColumnView:function(){return E},MatrixFlipColumnView:function(){return A},MatrixFlipRowView:function(){return C},MatrixRowSelectionView:function(){return k},MatrixRowView:function(){return T},MatrixSelectionView:function(){return O},MatrixSubView:function(){return P},MatrixTransposeView:function(){return I},NIPALS:function(){return Z},Nipals:function(){return Z},QR:function(){return j},QrDecomposition:function(){return j},SVD:function(){return F},SingularValueDecomposition:function(){return F},WrapperMatrix1D:function(){return N},WrapperMatrix2D:function(){return D},correlation:function(){return Y},covariance:function(){return H},default:function(){return _},determinant:function(){return G},inverse:function(){return z},linearDependencies:function(){return V},pseudoInverse:function(){return W},solve:function(){return U},wrap:function(){return L}});const r=Object.prototype.toString;function i(t){return r.call(t).endsWith("Array]")}function o(t,e){var n;e=1<arguments.length&&void 0!==e?e:{};if(!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==e.output){if(!i(e.output))throw new TypeError("output option must be an array if specified");n=e.output}else n=new Array(t.length);var r=function(t,e){if(e=1<arguments.length&&void 0!==e?e:{},!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=void 0===(n=e.fromIndex)?0:n,r=(e=e.toIndex,void 0===e?t.length:e);if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(r<=n||r>t.length||!Number.isInteger(r))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[n],a=n+1;a<r;a++)t[a]<o&&(o=t[a]);return o}(t),o=function(t,e){if(e=1<arguments.length&&void 0!==e?e:{},!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=void 0===(n=e.fromIndex)?0:n,r=(e=e.toIndex,void 0===e?t.length:e);if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(r<=n||r>t.length||!Number.isInteger(r))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[n],a=n+1;a<r;a++)t[a]>o&&(o=t[a]);return o}(t);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=e.min,s=void 0===a?e.autoMinMax?r:0:a;a=e.max,e=void 0===a?e.autoMinMax?o:1:a;if(e<=s)throw new RangeError("min option must be smaller than max option");for(var u=(e-s)/(o-r),c=0;c<t.length;c++)n[c]=(t[c]-r)*u+s}const a=" ".repeat(2),s=" ".repeat(4);function u(t,e={}){var{maxRows:e=15,maxColumns:n=10,maxNumSize:r=8}=e;return`${t.constructor.name} {\n${a}[\n${s}${function(t,e,n,r){var{rows:i,columns:o}=t,a=Math.min(i,e),u=Math.min(o,n),c=[];for(let s=0;s<a;s++){var l=[];for(let e=0;e<u;e++)l.push(function(t,e){var n=String(t);return n.length<=e?n.padEnd(e," "):(n=t.toPrecision(e-2),n.length<=e?n:(n=t.toExponential(e-2),t=n.indexOf("e"),t=n.slice(t),n.slice(0,e-t.length)+t))}(t.get(s,e),r));c.push(""+l.join(" "))}return u!==o&&(c[c.length-1]+=` ... ${o-n} more columns`),a!==i&&c.push(`... ${i-e} more rows`),c.join("\n"+s)}(t,e,n,r)}\n${a}]\n${a}rows: ${t.rows}\n${a}columns: ${t.columns}\n}`}function c(t,e,n){if(n=n?t.rows:t.rows-1,e<0||n<e)throw new RangeError("Row index out of range")}function l(t,e,n){if(n=n?t.columns:t.columns-1,e<0||n<e)throw new RangeError("Column index out of range")}function h(t,e){if((e=e.to1DArray?e.to1DArray():e).length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function f(t,e){if((e=e.to1DArray?e.to1DArray():e).length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function d(t,e){if(!i(e))throw new TypeError("row indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.rows)throw new RangeError("row indices are out of range")}function p(t,e){if(!i(e))throw new TypeError("column indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.columns)throw new RangeError("column indices are out of range")}function g(t,e,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(v("startRow",e),v("endRow",n),v("startColumn",r),v("endColumn",i),n<e||i<r||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function m(t,e=0){var n=[];for(let r=0;r<t;r++)n.push(e);return n}function v(t,e){if("number"!=typeof e)throw new TypeError(t+" must be a number")}function y(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}class b{static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");var r=new _(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)r.set(i,t,n[i*e+t]);return r}static rowVector(t){var e=new _(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){var e=new _(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new _(t,e)}static ones(t,e){return new _(t,e).fill(1)}static rand(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");var{random:r=Math.random}=n,i=new _(t,e);for(let o=0;o<t;o++)for(let t=0;t<e;t++)i.set(o,t,r());return i}static randInt(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");var{min:r=0,max:n=1e3,random:i=Math.random}=n;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(n))throw new TypeError("max must be an integer");if(n<=r)throw new RangeError("min must be smaller than max");var o=n-r,a=new _(t,e);for(let u=0;u<t;u++)for(let t=0;t<e;t++){var s=r+Math.round(i()*o);a.set(u,t,s)}return a}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);var r=Math.min(t,e),i=this.zeros(t,e);for(let o=0;o<r;o++)i.set(o,o,n);return i}static diag(t,e,n){var r=t.length,i=(void 0===e&&(e=r),void 0===n&&(n=e),Math.min(r,e,n)),o=this.zeros(e,n);for(let a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);var n=t.rows,r=t.columns,i=new _(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.min(t.get(o,n),e.get(o,n)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);var n=t.rows,r=t.columns,i=new this(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.max(t.get(o,n),e.get(o,n)));return i}static checkMatrix(t){return b.isMatrix(t)?t:new _(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){var t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){var t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;for(;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);t++}return r}isReducedEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;for(;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);for(let n=e+1;n<this.rows;n++)0!==this.get(t,n)&&(r=!1);t++}return r}echelonForm(){var t=this.clone();let e=0,n=0;for(;e<t.rows&&n<t.columns;){let o=e;for(let r=e;r<t.rows;r++)t.get(r,n)>t.get(o,n)&&(o=r);if(0!==t.get(o,n)){t.swapRows(e,o);var r=t.get(e,n);for(let i=n;i<t.columns;i++)t.set(e,i,t.get(e,i)/r);for(let r=e+1;r<t.rows;r++){var i=t.get(r,n)/t.get(e,n);t.set(r,n,0);for(let o=n+1;o<t.columns;o++)t.set(r,o,t.get(r,o)-t.get(e,o)*i)}e++}n++}return t}reducedEchelonForm(){var t=this.echelonForm(),e=t.columns,n=t.rows;let r=n-1;for(;0<=r;){if(0!==t.maxRow(r)){let a=0,s=!1;for(;a<n&&!1===s;)1===t.get(r,a)?s=!0:a++;for(let n=0;n<r;n++){var i=t.get(n,a);for(let s=a;s<e;s++){var o=t.get(n,s)-i*t.get(r,s);t.set(n,s,o)}}}r--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");var{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");var r=new _(this.rows*e,this.columns*n);for(let i=0;i<e;i++)for(let t=0;t<n;t++)r.setSubMatrix(this,this.rows*i,this.columns*t);return r}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){c(this,t);var e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return _.rowVector(this.getRow(t))}setRow(t,e){c(this,t),e=h(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){c(this,t),c(this,e);for(let r=0;r<this.columns;r++){var n=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,n)}return this}getColumn(t){l(this,t);var e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return _.columnVector(this.getColumn(t))}setColumn(t,e){l(this,t),e=f(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){l(this,t),l(this,e);for(let r=0;r<this.rows;r++){var n=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,n)}return this}addRowVector(t){t=h(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=h(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=h(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=h(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){c(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){l(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":var e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e[t]&&(e[t]=this.get(t,n));return e;case"column":var n=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.get(t,e)>n[e]&&(n[e]=this.get(t,e));return n;case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}default:throw new Error("invalid option: "+t)}}maxIndex(){y(this);let t=this.get(0,0);var e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":var e=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e[t]&&(e[t]=this.get(t,n));return e;case"column":var n=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.get(t,e)<n[e]&&(n[e]=this.get(t,e));return n;case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}default:throw new Error("invalid option: "+t)}}minIndex(){y(this);let t=this.get(0,0);var e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){if(c(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){c(this,t),y(this);let e=this.get(t,0);var n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){if(c(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){c(this,t),y(this);let e=this.get(t,0);var n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){if(l(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){l(this,t),y(this);let e=this.get(0,t);var n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){if(l(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){l(this,t),y(this);let e=this.get(0,t);var n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){var t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){let e=0;if("max"===t)return this.max();if("frobenius"!==t)throw new RangeError("unknown norm type: "+t);for(let n=0;n<this.rows;n++)for(let t=0;t<this.columns;t++)e+=this.get(n,t)*this.get(n,t);return Math.sqrt(e)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){b.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=_.checkMatrix(t);var e=this.rows,n=this.columns,r=t.columns,i=new _(e,r),o=new Float64Array(n);for(let a=0;a<r;a++){for(let e=0;e<n;e++)o[e]=t.get(e,a);for(let t=0;t<e;t++){let e=0;for(let r=0;r<n;r++)e+=this.get(t,r)*o[r];i.set(t,a,e)}}return i}strassen2x2(t){t=_.checkMatrix(t);var e=new _(2,2),n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=(t=t.get(1,1),(n+u)*(r+t)),l=(a+u)*r,h=n*(o-t),f=u*(s-r),d=(n+i)*t,p=h+d,g=l+f;l=c-l+h+(a-n)*(r+o);return e.set(0,0,c+f-d+(i-u)*(s+t)),e.set(0,1,p),e.set(1,0,g),e.set(1,1,l),e}strassen3x3(t){t=_.checkMatrix(t);var e=new _(3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),g=t.get(1,1),m=t.get(1,2),v=t.get(2,0),y=t.get(2,1),b=(t=t.get(2,2),(n-o)*(-f+g)),x=(-n+o+a)*(h-f+g),w=(o+a)*(-h+f),S=n*h,E=(-n+u+c)*(h-d+m),M=(-n+u)*(d-m),A=(u+c)*(-h+d),C=(-i+c+l)*(g+v-y),T=(i-l)*(g-y),k=i*v,O=(c+l)*(-v+y),P=(-i+a+s)*(m+v-t),I=(i-s)*(m-t),N=(a+s)*(-v+t),D=(n+r+i-o-a-c-l)*g+x+w+S+C+k+O;n=S+E+A+(n+r+i-a-s-u-c)*m+k+P+N,i=b+a*(-h+f+p-g-m-v+t)+x+S+k+P+I,a=b+x+w+S+s*y,b=k+P+I+N+o*d,x=S+E+M+c*(-h+d+p-g-m-v+y)+C+T+k,w=C+T+k+O+u*f,s=S+E+M+A+l*t;return e.set(0,0,S+k+r*p),e.set(0,1,D),e.set(0,2,n),e.set(1,0,i),e.set(1,1,a),e.set(1,2,b),e.set(2,0,x),e.set(2,1,w),e.set(2,2,s),e}mmulStrassen(t){t=_.checkMatrix(t);var e=this.clone(),n=e.rows,r=e.columns,i=t.rows,o=t.columns;function a(t,e,n){var r=t.rows,i=t.columns;if(r===e&&i===n)return t;{let r=b.zeros(e,n);return r=r.setSubMatrix(t,0,0)}}return n=Math.max(n,i),i=Math.max(r,o),function t(e,n,r,i){if(r<=512||i<=512)return e.mmul(n);r%2==1&&i%2==1?(e=a(e,r+1,i+1),n=a(n,r+1,i+1)):r%2==1?(e=a(e,r+1,i),n=a(n,r+1,i)):i%2==1&&(e=a(e,r,i+1),n=a(n,r,i+1));var o=parseInt(e.rows/2,10),s=parseInt(e.columns/2,10),u=e.subMatrix(0,o-1,0,s-1),c=n.subMatrix(0,o-1,0,s-1),l=e.subMatrix(0,o-1,s,e.columns-1),h=n.subMatrix(0,o-1,s,n.columns-1),f=e.subMatrix(o,e.rows-1,0,s-1),d=n.subMatrix(o,n.rows-1,0,s-1),p=(e=e.subMatrix(o,e.rows-1,s,e.columns-1),n=n.subMatrix(o,n.rows-1,s,n.columns-1),t(b.add(u,e),b.add(c,n),o,s)),g=t(b.add(f,e),c,o,s),m=t(u,b.sub(h,n),o,s),v=t(e,b.sub(d,c),o,s),y=t(b.add(u,l),n,o,s);f=t(b.sub(f,u),b.add(c,h),o,s),u=t(b.sub(l,e),b.add(d,n),o,s),c=b.add(p,v),c.sub(y),c.add(u),h=b.add(m,y),l=b.add(g,v),e=b.sub(p,g);e.add(m),e.add(f);let x=b.zeros(2*c.rows,2*c.columns);return(x=(x=(x=(x=x.setSubMatrix(c,0,0)).setSubMatrix(h,c.rows,0)).setSubMatrix(l,0,c.columns)).setSubMatrix(e,c.rows,c.columns)).subMatrix(0,r-1,0,i-1)}(a(e,n,i),t=a(t,n,i),n,i)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");var{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(n<=e)throw new RangeError("min must be smaller than max");var r=new _(this.rows,this.columns);for(let a=0;a<this.rows;a++){var i=this.getRow(a);0<i.length&&o(i,{min:e,max:n,output:i}),r.setRow(a,i)}return r}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");var{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(n<=e)throw new RangeError("min must be smaller than max");var r=new _(this.rows,this.columns);for(let a=0;a<this.columns;a++){var i=this.getColumn(a);i.length&&o(i,{min:e,max:n,output:i}),r.setColumn(a,i)}return r}flipRows(){var t=Math.ceil(this.columns/2);for(let r=0;r<this.rows;r++)for(let i=0;i<t;i++){var e=this.get(r,i),n=this.get(r,this.columns-1-i);this.set(r,i,n),this.set(r,this.columns-1-i,e)}return this}flipColumns(){var t=Math.ceil(this.rows/2);for(let r=0;r<this.columns;r++)for(let i=0;i<t;i++){var e=this.get(i,r),n=this.get(this.rows-1-i,r);this.set(i,r,n),this.set(this.rows-1-i,r,e)}return this}kroneckerProduct(t){t=_.checkMatrix(t);var e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new _(e*r,n*i);for(let a=0;a<e;a++)for(let e=0;e<n;e++)for(let n=0;n<r;n++)for(let s=0;s<i;s++)o.set(r*a+n,i*e+s,this.get(a,e)*t.get(n,s));return o}kroneckerSum(t){var e,n;if(t=_.checkMatrix(t),this.isSquare()&&t.isSquare())return n=this.rows,e=t.rows,e=this.kroneckerProduct(_.eye(e,e)),n=_.eye(n,n).kroneckerProduct(t),e.add(n);throw new Error("Kronecker Sum needs two Square Matrices")}transpose(){var t=new _(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=x){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=x){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){g(this,t,e,n,r);var i=new _(e-t+1,r-n+1);for(let o=t;o<=e;o++)for(let e=n;e<=r;e++)i.set(o-t,e-n,this.get(o,e));return i}subMatrixRow(t,e,n){if((n=void 0===n?this.columns-1:n)<(e=void 0===e?0:e)||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");var r=new _(t.length,n-e+1);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError("Row index out of range: "+t[i]);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if((n=void 0===n?this.rows-1:n)<(e=void 0===e?0:e)||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");var r=new _(n-e+1,t.length);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError("Column index out of range: "+t[i]);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){if(!(t=_.checkMatrix(t)).isEmpty()){g(this,e,e+t.rows-1,n,n+t.columns-1);for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)this.set(e+r,n+i,t.get(r,i))}return this}selection(t,e){d(this,t),p(this,e);var n=new _(t.length,e.length);for(let o=0;o<t.length;o++){var r=t[o];for(let t=0;t<e.length;t++){var i=e[t];n.set(o,t,this.get(r,i))}}return n}trace(){var t=Math.min(this.rows,this.columns);let e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){var t=new _(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}sum(t){switch(t){case"row":var e=this,n=m(e.rows);for(let t=0;t<e.rows;++t)for(let r=0;r<e.columns;++r)n[t]+=e.get(t,r);return n;case"column":var r=this,i=m(r.columns);for(let t=0;t<r.rows;++t)for(let e=0;e<r.columns;++e)i[e]+=r.get(t,e);return i;case void 0:{var o=this;let t=0;for(let e=0;e<o.rows;e++)for(let n=0;n<o.columns;n++)t+=o.get(e,n);return t}default:throw new Error("invalid option: "+t)}}product(t){switch(t){case"row":var e=this,n=m(e.rows,1);for(let t=0;t<e.rows;++t)for(let r=0;r<e.columns;++r)n[t]*=e.get(t,r);return n;case"column":var r=this,i=m(r.columns,1);for(let t=0;t<r.rows;++t)for(let e=0;e<r.columns;++e)i[e]*=r.get(t,e);return i;case void 0:{var o=this;let t=1;for(let e=0;e<o.rows;e++)for(let n=0;n<o.columns;n++)t*=o.get(e,n);return t}default:throw new Error("invalid option: "+t)}}mean(t){var e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: "+t)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");var{unbiased:n=!0,mean:r=this.mean(t)}=e;if("boolean"!=typeof n)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(i(r)){var o,a=this,s=n,u=r,c=a.rows,l=a.columns,h=[];for(let t=0;t<c;t++){let e=0,n=0;for(let r=0;r<l;r++)o=a.get(t,r)-u[t],e+=o,n+=o*o;h.push(s?(n-e*e/l)/(l-1):(n-e*e/l)/l)}return h}throw new TypeError("mean must be an array");case"column":if(i(r)){var f,d=this,p=n,g=r,m=d.rows,v=d.columns,y=[];for(let t=0;t<v;t++){let e=0,n=0;for(let r=0;r<m;r++)f=d.get(r,t)-g[t],e+=f,n+=f*f;y.push(p?(n-e*e/m)/(m-1):(n-e*e/m)/m)}return y}throw new TypeError("mean must be an array");case void 0:if("number"!=typeof r)throw new TypeError("mean must be a number");{var b,x=this,_=n,w=r,S=x.rows,E=x.columns,M=S*E;let t=0,e=0;for(let n=0;n<S;n++)for(let r=0;r<E;r++)b=x.get(n,r)-w,t+=b,e+=b*b;return _?(e-t*t/M)/(M-1):(e-t*t/M)/M}default:throw new Error("invalid option: "+t)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);var n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(let r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");var{center:n=this.mean(t)}=e;switch(t){case"row":if(!i(n))throw new TypeError("center must be an array");var r=this,o=n;for(let t=0;t<r.rows;t++)for(let e=0;e<r.columns;e++)r.set(t,e,r.get(t,e)-o[t]);return this;case"column":if(!i(n))throw new TypeError("center must be an array");var a=this,s=n;for(let t=0;t<a.rows;t++)for(let e=0;e<a.columns;e++)a.set(t,e,a.get(t,e)-s[e]);return this;case void 0:if("number"!=typeof n)throw new TypeError("center must be a number");var u=this,c=n;for(let t=0;t<u.rows;t++)for(let e=0;e<u.columns;e++)u.set(t,e,u.get(t,e)-c);return this;default:throw new Error("invalid option: "+t)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":if(void 0===n)n=function(t){var e=[];for(let n=0;n<t.rows;n++){let r=0;for(let e=0;e<t.columns;e++)r+=Math.pow(t.get(n,e),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}(this);else if(!i(n))throw new TypeError("scale must be an array");var r=this,o=n;for(let t=0;t<r.rows;t++)for(let e=0;e<r.columns;e++)r.set(t,e,r.get(t,e)/o[t]);return this;case"column":if(void 0===n)n=function(t){var e=[];for(let n=0;n<t.columns;n++){let r=0;for(let e=0;e<t.rows;e++)r+=Math.pow(t.get(e,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}(this);else if(!i(n))throw new TypeError("scale must be an array");var a=this,s=n;for(let t=0;t<a.rows;t++)for(let e=0;e<a.columns;e++)a.set(t,e,a.get(t,e)/s[e]);return this;case void 0:if(void 0===n)n=function(t){var e=t.size-1;let n=0;for(let r=0;r<t.columns;r++)for(let i=0;i<t.rows;i++)n+=Math.pow(t.get(i,r),2)/e;return Math.sqrt(n)}(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");var u=this,c=n;for(let t=0;t<u.rows;t++)for(let e=0;e<u.columns;e++)u.set(t,e,u.get(t,e)/c);return this;default:throw new Error("invalid option: "+t)}}toString(t){return u(this,t)}}function x(t,e){return t-e}b.prototype.klass="Matrix","undefined"!=typeof Symbol&&(b.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return u(this)}),b.random=b.rand,b.randomInt=b.randInt,b.diagonal=b.diag,b.prototype.diagonal=b.prototype.diag,b.identity=b.eye,b.prototype.negate=b.prototype.neg,b.prototype.tensorProduct=b.prototype.kroneckerProduct;class _ extends b{constructor(t,e){if(super(),_.isMatrix(t))return t.clone();if(Number.isInteger(t)&&0<=t){if(this.data=[],!(Number.isInteger(e)&&0<=e))throw new TypeError("nColumns must be a positive integer");for(let n=0;n<t;n++)this.data.push(new Float64Array(e))}else{if(!i(t))throw new TypeError("First argument must be a positive number or an array");var n=t;if("number"!=typeof(e=(t=n.length)?n[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<t;r++){if(n[r].length!==e)throw new RangeError("Inconsistent array dimensions");if(!n[r].every((t=>"number"==typeof t)))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(n[r]))}}this.rows=t,this.columns=e}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){return c(this,t),this.data.splice(t,1),--this.rows,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),c(this,t,!0),e=Float64Array.from(h(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){l(this,t);for(let n=0;n<this.rows;n++){var e=new Float64Array(this.columns-1);for(let r=0;r<t;r++)e[r]=this.data[n][r];for(let r=t+1;r<this.columns;r++)e[r-1]=this.data[n][r];this.data[n]=e}return--this.columns,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),l(this,t,!0),e=f(this,e);for(let r=0;r<this.rows;r++){var n=new Float64Array(this.columns+1);let i=0;for(;i<t;i++)n[i]=this.data[r][i];for(n[i++]=e[r];i<this.columns+1;i++)n[i]=this.data[r][i-1];this.data[r]=n}return this.columns+=1,this}}var w;n=b,w=_,n.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},n.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},n.prototype.addM=function(t){if(t=w.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},n.add=function(t,e){return new w(t).add(e)},n.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},n.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},n.prototype.subM=function(t){if(t=w.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},n.sub=function(t,e){return new w(t).sub(e)},n.prototype.subtract=n.prototype.sub,n.prototype.subtractS=n.prototype.subS,n.prototype.subtractM=n.prototype.subM,n.subtract=n.sub,n.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},n.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},n.prototype.mulM=function(t){if(t=w.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},n.mul=function(t,e){return new w(t).mul(e)},n.prototype.multiply=n.prototype.mul,n.prototype.multiplyS=n.prototype.mulS,n.prototype.multiplyM=n.prototype.mulM,n.multiply=n.mul,n.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},n.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},n.prototype.divM=function(t){if(t=w.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},n.div=function(t,e){return new w(t).div(e)},n.prototype.divide=n.prototype.div,n.prototype.divideS=n.prototype.divS,n.prototype.divideM=n.prototype.divM,n.divide=n.div,n.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},n.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},n.prototype.modM=function(t){if(t=w.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},n.mod=function(t,e){return new w(t).mod(e)},n.prototype.modulus=n.prototype.mod,n.prototype.modulusS=n.prototype.modS,n.prototype.modulusM=n.prototype.modM,n.modulus=n.mod,n.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},n.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},n.prototype.andM=function(t){if(t=w.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},n.and=function(t,e){return new w(t).and(e)},n.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},n.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},n.prototype.orM=function(t){if(t=w.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},n.or=function(t,e){return new w(t).or(e)},n.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},n.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},n.prototype.xorM=function(t){if(t=w.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},n.xor=function(t,e){return new w(t).xor(e)},n.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},n.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},n.prototype.leftShiftM=function(t){if(t=w.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},n.leftShift=function(t,e){return new w(t).leftShift(e)},n.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},n.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},n.prototype.signPropagatingRightShiftM=function(t){if(t=w.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},n.signPropagatingRightShift=function(t,e){return new w(t).signPropagatingRightShift(e)},n.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},n.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},n.prototype.rightShiftM=function(t){if(t=w.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},n.rightShift=function(t,e){return new w(t).rightShift(e)},n.prototype.zeroFillRightShift=n.prototype.rightShift,n.prototype.zeroFillRightShiftS=n.prototype.rightShiftS,n.prototype.zeroFillRightShiftM=n.prototype.rightShiftM,n.zeroFillRightShift=n.rightShift,n.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},n.not=function(t){return new w(t).not()},n.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},n.abs=function(t){return new w(t).abs()},n.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},n.acos=function(t){return new w(t).acos()},n.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},n.acosh=function(t){return new w(t).acosh()},n.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},n.asin=function(t){return new w(t).asin()},n.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},n.asinh=function(t){return new w(t).asinh()},n.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},n.atan=function(t){return new w(t).atan()},n.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},n.atanh=function(t){return new w(t).atanh()},n.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},n.cbrt=function(t){return new w(t).cbrt()},n.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},n.ceil=function(t){return new w(t).ceil()},n.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},n.clz32=function(t){return new w(t).clz32()},n.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},n.cos=function(t){return new w(t).cos()},n.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},n.cosh=function(t){return new w(t).cosh()},n.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},n.exp=function(t){return new w(t).exp()},n.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},n.expm1=function(t){return new w(t).expm1()},n.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},n.floor=function(t){return new w(t).floor()},n.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},n.fround=function(t){return new w(t).fround()},n.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},n.log=function(t){return new w(t).log()},n.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},n.log1p=function(t){return new w(t).log1p()},n.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},n.log10=function(t){return new w(t).log10()},n.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},n.log2=function(t){return new w(t).log2()},n.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},n.round=function(t){return new w(t).round()},n.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},n.sign=function(t){return new w(t).sign()},n.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},n.sin=function(t){return new w(t).sin()},n.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},n.sinh=function(t){return new w(t).sinh()},n.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},n.sqrt=function(t){return new w(t).sqrt()},n.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},n.tan=function(t){return new w(t).tan()},n.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},n.tanh=function(t){return new w(t).tanh()},n.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},n.trunc=function(t){return new w(t).trunc()},n.pow=function(t,e){return new w(t).pow(e)},n.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},n.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},n.prototype.powM=function(t){if(t=w.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this};class S extends b{constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}}class E extends S{constructor(t,e){l(t,e),super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}class M extends S{constructor(t,e){p(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,n){return this.matrix.set(t,this.columnIndices[e],n),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class A extends S{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}class C extends S{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class T extends S{constructor(t,e){c(t,e),super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}class k extends S{constructor(t,e){d(t,e),super(t,e.length,t.columns),this.rowIndices=e}set(t,e,n){return this.matrix.set(this.rowIndices[t],e,n),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class O extends S{constructor(t,e,n){d(t,e),p(t,n),super(t,e.length,n.length),this.rowIndices=e,this.columnIndices=n}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class P extends S{constructor(t,e,n,r,i){g(t,e,n,r,i),super(t,n-e+1,i-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}class I extends S{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}class N extends b{constructor(t,e={}){var{rows:e=1}=e;if(t.length%e!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=e,this.columns=t.length/e,this.data=t}set(t,e,n){return t=this._calculateIndex(t,e),this.data[t]=n,this}get(t,e){return t=this._calculateIndex(t,e),this.data[t]}_calculateIndex(t,e){return t*this.columns+e}}class D extends b{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}}function L(t,e){if(i(t))return t[0]&&i(t[0])?new D(t):new N(t,e);throw new Error("the argument is not an array")}class R{constructor(t){var e,n,r=(t=D.checkMatrix(t)).clone(),i=r.rows,o=r.columns,a=new Float64Array(i);let s,u,c,l,h,f,d,p=1;for(s=0;s<i;s++)a[s]=s;for(e=new Float64Array(i),u=0;u<o;u++){for(s=0;s<i;s++)e[s]=r.get(s,u);for(s=0;s<i;s++){for(n=Math.min(s,u),h=0,c=0;c<n;c++)h+=r.get(s,c)*e[c];e[s]-=h,r.set(s,u,e[s])}for(l=u,s=u+1;s<i;s++)Math.abs(e[s])>Math.abs(e[l])&&(l=s);if(l!==u){for(c=0;c<o;c++)f=r.get(l,c),r.set(l,c,r.get(u,c)),r.set(u,c,f);d=a[l],a[l]=a[u],a[u]=d,p=-p}if(u<i&&0!==r.get(u,u))for(s=u+1;s<i;s++)r.set(s,u,r.get(s,u)/r.get(u,u))}this.LU=r,this.pivotVector=a,this.pivotSign=p}isSingular(){var t=this.LU,e=t.columns;for(let n=0;n<e;n++)if(0===t.get(n,n))return!0;return!1}solve(t){t=_.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n=t.columns,r=t.subMatrixRow(this.pivotVector,0,n-1),i=e.columns;let o,a,s;for(s=0;s<i;s++)for(o=s+1;o<i;o++)for(a=0;a<n;a++)r.set(o,a,r.get(o,a)-r.get(s,a)*e.get(o,s));for(s=i-1;0<=s;s--){for(a=0;a<n;a++)r.set(s,a,r.get(s,a)/e.get(s,s));for(o=0;o<s;o++)for(a=0;a<n;a++)r.set(o,a,r.get(o,a)-r.get(s,a)*e.get(o,s))}return r}get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign;var n=t.columns;for(let r=0;r<n;r++)e*=t.get(r,r);return e}get lowerTriangularMatrix(){var t=this.LU,e=t.rows,n=t.columns,r=new _(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i>e?r.set(i,e,t.get(i,e)):i===e?r.set(i,e,1):r.set(i,e,0);return r}get upperTriangularMatrix(){var t=this.LU,e=t.rows,n=t.columns,r=new _(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i<=e?r.set(i,e,t.get(i,e)):r.set(i,e,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function B(t,e){let n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}class j{constructor(t){var e=(t=D.checkMatrix(t)).clone(),n=t.rows,r=t.columns,i=new Float64Array(r);let o,a,s,u;for(s=0;s<r;s++){let t=0;for(o=s;o<n;o++)t=B(t,e.get(o,s));if(0!==t){for(e.get(s,s)<0&&(t=-t),o=s;o<n;o++)e.set(o,s,e.get(o,s)/t);for(e.set(s,s,e.get(s,s)+1),a=s+1;a<r;a++){for(u=0,o=s;o<n;o++)u+=e.get(o,s)*e.get(o,a);for(u=-u/e.get(s,s),o=s;o<n;o++)e.set(o,a,e.get(o,a)+u*e.get(o,s))}}i[s]=-t}this.QR=e,this.Rdiag=i}solve(t){t=_.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r=t.columns,i=t.clone(),o=e.columns;let a,s,u,c;for(u=0;u<o;u++)for(s=0;s<r;s++){for(c=0,a=u;a<n;a++)c+=e.get(a,u)*i.get(a,s);for(c=-c/e.get(u,u),a=u;a<n;a++)i.set(a,s,i.get(a,s)+c*e.get(a,u))}for(u=o-1;0<=u;u--){for(s=0;s<r;s++)i.set(u,s,i.get(u,s)/this.Rdiag[u]);for(a=0;a<u;a++)for(s=0;s<r;s++)i.set(a,s,i.get(a,s)-i.get(u,s)*e.get(a,u))}return i.subMatrix(0,o-1,0,r-1)}isFullRank(){var t=this.QR.columns;for(let e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){var t=this.QR,e=t.columns,n=new _(e,e);let r,i;for(r=0;r<e;r++)for(i=0;i<e;i++)r<i?n.set(r,i,t.get(r,i)):r===i?n.set(r,i,this.Rdiag[r]):n.set(r,i,0);return n}get orthogonalMatrix(){var t=this.QR,e=t.rows,n=t.columns,r=new _(e,n);let i,o,a,s;for(a=n-1;0<=a;a--){for(i=0;i<e;i++)r.set(i,a,0);for(r.set(a,a,1),o=a;o<n;o++)if(0!==t.get(a,a)){for(s=0,i=a;i<e;i++)s+=t.get(i,a)*r.get(i,o);for(s=-s/t.get(a,a),i=a;i<e;i++)r.set(i,o,r.get(i,o)+s*t.get(i,a))}}return r}}class F{constructor(t,e={}){if((t=D.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");let n=t.rows,r=t.columns;var{computeLeftSingularVectors:e=!0,computeRightSingularVectors:i=!0,autoTranspose:o=!1}=e;let a,s=Boolean(e),u=Boolean(i),c=!1;n<r&&o?(a=t.transpose(),n=a.rows,r=a.columns,c=!0,e=s,s=u,u=e):a=t.clone();var l=Math.min(n,r),h=Math.min(n+1,r),f=new Float64Array(h);let d=new _(n,l),p=new _(r,r);var g=new Float64Array(r),m=new Float64Array(n),v=new Float64Array(h);for(let _=0;_<h;_++)v[_]=_;var y=Math.min(n-1,r),b=Math.max(0,Math.min(r-2,n)),x=Math.max(y,b);for(let _=0;_<x;_++){if(_<y){f[_]=0;for(let t=_;t<n;t++)f[_]=B(f[_],a.get(t,_));if(0!==f[_]){a.get(_,_)<0&&(f[_]=-f[_]);for(let t=_;t<n;t++)a.set(t,_,a.get(t,_)/f[_]);a.set(_,_,a.get(_,_)+1)}f[_]=-f[_]}for(let t=_+1;t<r;t++){if(_<y&&0!==f[_]){let e=0;for(let r=_;r<n;r++)e+=a.get(r,_)*a.get(r,t);e=-e/a.get(_,_);for(let r=_;r<n;r++)a.set(r,t,a.get(r,t)+e*a.get(r,_))}g[t]=a.get(_,t)}if(s&&_<y)for(let t=_;t<n;t++)d.set(t,_,a.get(t,_));if(_<b){g[_]=0;for(let t=_+1;t<r;t++)g[_]=B(g[_],g[t]);if(0!==g[_]){g[_+1]<0&&(g[_]=0-g[_]);for(let t=_+1;t<r;t++)g[t]/=g[_];g[_+1]+=1}if(g[_]=-g[_],_+1<n&&0!==g[_]){for(let t=_+1;t<n;t++)m[t]=0;for(let t=_+1;t<n;t++)for(let e=_+1;e<r;e++)m[t]+=g[e]*a.get(t,e);for(let t=_+1;t<r;t++){var w=-g[t]/g[_+1];for(let e=_+1;e<n;e++)a.set(e,t,a.get(e,t)+w*m[e])}}if(u)for(let t=_+1;t<r;t++)p.set(t,_,g[t])}}let S=Math.min(r,n+1);if(y<r&&(f[y]=a.get(y,y)),n<S&&(f[S-1]=0),b+1<S&&(g[b]=a.get(b,S-1)),g[S-1]=0,s){for(let t=y;t<l;t++){for(let e=0;e<n;e++)d.set(e,t,0);d.set(t,t,1)}for(let t=y-1;0<=t;t--)if(0!==f[t]){for(let e=t+1;e<l;e++){let r=0;for(let i=t;i<n;i++)r+=d.get(i,t)*d.get(i,e);r=-r/d.get(t,t);for(let i=t;i<n;i++)d.set(i,e,d.get(i,e)+r*d.get(i,t))}for(let e=t;e<n;e++)d.set(e,t,-d.get(e,t));d.set(t,t,1+d.get(t,t));for(let e=0;e<t-1;e++)d.set(e,t,0)}else{for(let e=0;e<n;e++)d.set(e,t,0);d.set(t,t,1)}}if(u)for(let _=r-1;0<=_;_--){if(_<b&&0!==g[_])for(let t=_+1;t<r;t++){let e=0;for(let n=_+1;n<r;n++)e+=p.get(n,_)*p.get(n,t);e=-e/p.get(_+1,_);for(let n=_+1;n<r;n++)p.set(n,t,p.get(n,t)+e*p.get(n,_))}for(let t=0;t<r;t++)p.set(t,_,0);p.set(_,_,1)}var E=S-1;let M=0;for(var A=Number.EPSILON;0<S;){let t,e;for(t=S-2;-1<=t&&-1!==t;t--){var C=Number.MIN_VALUE+A*Math.abs(f[t]+Math.abs(f[t+1]));if(Math.abs(g[t])<=C||Number.isNaN(g[t])){g[t]=0;break}}if(t===S-2)e=4;else{let n;for(n=S-1;n>=t&&n!==t;n--){var T=(n!==S?Math.abs(g[n]):0)+(n!==t+1?Math.abs(g[n-1]):0);if(Math.abs(f[n])<=A*T){f[n]=0;break}}n===t?e=3:n===S-1?e=1:(e=2,t=n)}switch(t++,e){case 1:{let e=g[S-2];g[S-2]=0;for(let n=S-2;n>=t;n--){var k=B(f[n],e),O=f[n]/k,P=e/k;if(f[n]=k,n!==t&&(e=-P*g[n-1],g[n-1]=O*g[n-1]),u)for(let t=0;t<r;t++)k=O*p.get(t,n)+P*p.get(t,S-1),p.set(t,S-1,-P*p.get(t,n)+O*p.get(t,S-1)),p.set(t,n,k)}break}case 2:{let e=g[t-1];g[t-1]=0;for(let r=t;r<S;r++){var I=B(f[r],e),N=f[r]/I,L=e/I;if(f[r]=I,e=-L*g[r],g[r]=N*g[r],s)for(let e=0;e<n;e++)I=N*d.get(e,r)+L*d.get(e,t-1),d.set(e,t-1,-L*d.get(e,r)+N*d.get(e,t-1)),d.set(e,r,I)}break}case 3:{var R=Math.max(Math.abs(f[S-1]),Math.abs(f[S-2]),Math.abs(g[S-2]),Math.abs(f[t]),Math.abs(g[t])),j=f[S-1]/R,F=f[S-2]/R,z=g[S-2]/R,U=f[t]/R;R=g[t]/R,F=((F+j)*(F-j)+z*z)/2,z=j*z*(j*z);let e=0,i=(U+j)*(U-j)+(e=0==F&&0==z?e:z/(F+(e=F<0?0-Math.sqrt(F*F+z):Math.sqrt(F*F+z)))),o=U*R;for(let a=t;a<S-1;a++){let e=B(i,o),c=(0===e&&(e=Number.MIN_VALUE),i/e),l=o/e;if(a!==t&&(g[a-1]=e),i=c*f[a]+l*g[a],g[a]=c*g[a]-l*f[a],o=l*f[a+1],f[a+1]=c*f[a+1],u)for(let t=0;t<r;t++)e=c*p.get(t,a)+l*p.get(t,a+1),p.set(t,a+1,-l*p.get(t,a)+c*p.get(t,a+1)),p.set(t,a,e);if(0===(e=B(i,o))&&(e=Number.MIN_VALUE),c=i/e,l=o/e,f[a]=e,i=c*g[a]+l*f[a+1],f[a+1]=-l*g[a]+c*f[a+1],o=l*g[a+1],g[a+1]=c*g[a+1],s&&a<n-1)for(let t=0;t<n;t++)e=c*d.get(t,a)+l*d.get(t,a+1),d.set(t,a+1,-l*d.get(t,a)+c*d.get(t,a+1)),d.set(t,a,e)}g[S-2]=i,M+=1;break}case 4:if(f[t]<=0&&(f[t]=f[t]<0?-f[t]:0,u))for(let e=0;e<=E;e++)p.set(e,t,-p.get(e,t));for(;t<E&&!(f[t]>=f[t+1]);){let e=f[t];if(f[t]=f[t+1],f[t+1]=e,u&&t<r-1)for(let n=0;n<r;n++)e=p.get(n,t+1),p.set(n,t+1,p.get(n,t)),p.set(n,t,e);if(s&&t<n-1)for(let r=0;r<n;r++)e=d.get(r,t+1),d.set(r,t+1,d.get(r,t)),d.set(r,t,e);t++}M=0,S--}}c&&(i=p,p=d,d=i),this.m=n,this.n=r,this.s=f,this.U=d,this.V=p}solve(t){var e=this.threshold,n=this.s.length,r=_.zeros(n,n);for(let l=0;l<n;l++)Math.abs(this.s[l])<=e?r.set(l,l,0):r.set(l,l,1/this.s[l]);var i=this.U,o=this.rightSingularVectors,a=o.mmul(r),s=o.rows,u=i.rows,c=_.zeros(s,u);for(let l=0;l<s;l++)for(let t=0;t<u;t++){let e=0;for(let r=0;r<n;r++)e+=a.get(l,r)*i.get(t,r);c.set(l,t,e)}return c.mmul(t)}solveForDiagonal(t){return this.solve(_.diag(t))}inverse(){var t=this.V,e=this.threshold,n=t.rows,r=t.columns,i=new _(n,this.s.length);for(let c=0;c<n;c++)for(let n=0;n<r;n++)Math.abs(this.s[n])>e&&i.set(c,n,t.get(c,n)/this.s[n]);var o=this.U,a=o.rows,s=o.columns,u=new _(n,a);for(let c=0;c<n;c++)for(let t=0;t<a;t++){let e=0;for(let n=0;n<s;n++)e+=i.get(c,n)*o.get(t,n);u.set(c,t,e)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON;let e=0;var n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return _.diag(this.s)}}function z(t,e=!1){return t=D.checkMatrix(t),e?new F(t).inverse():U(t,_.eye(t.rows))}function U(t,e,n=!1){return t=D.checkMatrix(t),e=D.checkMatrix(e),new(n?F:t.isSquare()?R:j)(t).solve(e)}function G(t){if((t=_.checkMatrix(t)).isSquare()){if(0===t.columns)return 1;let i,o,a,s;var e,n,r;return 2===t.columns?(i=t.get(0,0),o=t.get(0,1),a=t.get(1,0),s=t.get(1,1),i*s-o*a):3===t.columns?(e=new O(t,[1,2],[1,2]),n=new O(t,[1,2],[0,2]),r=new O(t,[1,2],[0,1]),i=t.get(0,0),o=t.get(0,1),a=t.get(0,2),i*G(e)-o*G(n)+a*G(r)):new R(t).determinant}throw Error("determinant can only be calculated for a square matrix")}function V(t,e={}){var{thresholdValue:n=1e-9,thresholdError:r=1e-9}=e,i=(t=_.checkMatrix(t)).rows,o=new _(i,i);for(let c=0;c<i;c++){var a=_.columnVector(t.getRow(c)),s=t.subMatrixRow(function(t,e){var n=[];for(let r=0;r<t;r++)r!==e&&n.push(r);return n}(i,c)).transpose(),u=new F(s).solve(a);a=_.sub(a,s.mmul(u)).abs().max();o.setRow(c,function(t,e,n,r=1e-9,i=1e-9){if(i<t)return new Array(e.rows+1).fill(0);var o=e.addRow(n,[0]);for(let a=0;a<o.rows;a++)Math.abs(o.get(a,0))<r&&o.set(a,0,0);return o.to1DArray()}(a,u,c,n,r))}return o}function W(t,e=Number.EPSILON){if((t=_.checkMatrix(t)).isEmpty())return t.transpose();t=new F(t,{autoTranspose:!0});var n=t.leftSingularVectors,r=t.rightSingularVectors,i=t.diagonal;for(let o=0;o<i.length;o++)Math.abs(i[o])>e?i[o]=1/i[o]:i[o]=0;return r.mmul(_.diag(i).mmul(n.transpose()))}function H(t,e=t,n={}){t=new _(t);let r=!1;if("object"!=typeof e||_.isMatrix(e)||i(e)?e=new _(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");var{center:n=!0}=n,o=(n&&(t=t.center("column"),r||(e=e.center("column"))),t.transpose().mmul(e));for(let i=0;i<o.rows;i++)for(let e=0;e<o.columns;e++)o.set(i,e,o.get(i,e)*(1/(t.rows-1)));return o}function Y(t,e=t,n={}){t=new _(t);let r=!1;if("object"!=typeof e||_.isMatrix(e)||i(e)?e=new _(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");var{center:n=!0,scale:o=!0}=n,a=(n&&(t.center("column"),r||e.center("column")),o&&(t.scale("column"),r||e.scale("column")),t.standardDeviation("column",{unbiased:!0})),s=r?a:e.standardDeviation("column",{unbiased:!0}),u=t.transpose().mmul(e);for(let i=0;i<u.rows;i++)for(let e=0;e<u.columns;e++)u.set(i,e,u.get(i,e)*(1/(a[i]*s[e]))*(1/(t.rows-1)));return u}class q{constructor(t,e={}){var{assumeSymmetric:e=!1}=e;if(!(t=D.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");var n=t.columns,r=new _(n,n),i=new Float64Array(n),o=new Float64Array(n),a=t;let s,u,c=!1;if(c=!!e||t.isSymmetric()){for(s=0;s<n;s++)for(u=0;u<n;u++)r.set(s,u,a.get(s,u));{var l=n,h=o,f=i,d=r;let t,e,a,s,u,c,p,g;for(u=0;u<l;u++)f[u]=d.get(l-1,u);for(s=l-1;0<s;s--){for(g=0,a=0,c=0;c<s;c++)g+=Math.abs(f[c]);if(0===g)for(h[s]=f[s-1],u=0;u<s;u++)f[u]=d.get(s-1,u),d.set(s,u,0),d.set(u,s,0);else{for(c=0;c<s;c++)f[c]/=g,a+=f[c]*f[c];for(t=f[s-1],e=Math.sqrt(a),0<t&&(e=-e),h[s]=g*e,a-=t*e,f[s-1]=t-e,u=0;u<s;u++)h[u]=0;for(u=0;u<s;u++){for(t=f[u],d.set(u,s,t),e=h[u]+d.get(u,u)*t,c=u+1;c<=s-1;c++)e+=d.get(c,u)*f[c],h[c]+=d.get(c,u)*t;h[u]=e}for(t=0,u=0;u<s;u++)h[u]/=a,t+=h[u]*f[u];for(p=t/(a+a),u=0;u<s;u++)h[u]-=p*f[u];for(u=0;u<s;u++){for(t=f[u],e=h[u],c=u;c<=s-1;c++)d.set(c,u,d.get(c,u)-(t*h[c]+e*f[c]));f[u]=d.get(s-1,u),d.set(s,u,0)}}f[s]=a}for(s=0;s<l-1;s++){if(d.set(l-1,s,d.get(s,s)),d.set(s,s,1),0!==(a=f[s+1])){for(c=0;c<=s;c++)f[c]=d.get(c,s+1)/a;for(u=0;u<=s;u++){for(e=0,c=0;c<=s;c++)e+=d.get(c,s+1)*d.get(c,u);for(c=0;c<=s;c++)d.set(c,u,d.get(c,u)-e*f[c])}}for(c=0;c<=s;c++)d.set(c,s+1,0)}for(u=0;u<l;u++)f[u]=d.get(l-1,u),d.set(l-1,u,0);d.set(l-1,l-1,1),h[0]=0}{var p=n,g=o,m=i,v=r;let t,e,a,s,u,c,l,h,f,d,y,b,x,_,w,S,E;for(a=1;a<p;a++)g[a-1]=g[a];let M=g[p-1]=0,A=0,C=Number.EPSILON;for(c=0;c<p;c++){for(A=Math.max(A,Math.abs(m[c])+Math.abs(g[c])),l=c;l<p&&!(Math.abs(g[l])<=C*A);)l++;if(l>c){E=0;do{for(E+=1,t=m[c],h=(m[c+1]-t)/(2*g[c]),f=B(h,1),h<0&&(f=-f),m[c]=g[c]/(h+f),m[c+1]=g[c]*(h+f),d=m[c+1],e=t-m[c],a=c+2;a<p;a++)m[a]-=e;for(M+=e,h=m[l],y=1,b=y,x=y,_=g[c+1],w=0,S=0,a=l-1;a>=c;a--)for(x=b,b=y,S=w,t=y*g[a],e=y*h,f=B(h,g[a]),g[a+1]=w*f,w=g[a]/f,y=h/f,h=y*m[a]-w*t,m[a+1]=e+w*(y*t+w*m[a]),u=0;u<p;u++)e=v.get(u,a+1),v.set(u,a+1,w*v.get(u,a)+y*e),v.set(u,a,y*v.get(u,a)-w*e)}while(h=-w*S*x*_*g[c]/d,g[c]=w*h,m[c]=y*h,Math.abs(g[c])>C*A)}m[c]=m[c]+M,g[c]=0}for(a=0;a<p-1;a++){for(u=a,h=m[a],s=a+1;s<p;s++)m[s]<h&&(u=s,h=m[s]);if(u!==a)for(m[u]=m[a],m[a]=h,s=0;s<p;s++)h=v.get(s,a),v.set(s,a,v.get(s,u)),v.set(s,u,h)}}}else{var y=new _(n,n);e=new Float64Array(n);for(u=0;u<n;u++)for(s=0;s<n;s++)y.set(s,u,a.get(s,u));{var b=n,x=y,w=e,S=r;let t,i,o,a,s,u,c,l=b-1;for(u=1;u<=l-1;u++){for(c=0,a=u;a<=l;a++)c+=Math.abs(x.get(a,u-1));if(0!==c){for(o=0,a=l;a>=u;a--)w[a]=x.get(a,u-1)/c,o+=w[a]*w[a];for(i=Math.sqrt(o),0<w[u]&&(i=-i),o-=w[u]*i,w[u]=w[u]-i,s=u;s<b;s++){for(t=0,a=l;a>=u;a--)t+=w[a]*x.get(a,s);for(t/=o,a=u;a<=l;a++)x.set(a,s,x.get(a,s)-t*w[a])}for(a=0;a<=l;a++){for(t=0,s=l;s>=u;s--)t+=w[s]*x.get(a,s);for(t/=o,s=u;s<=l;s++)x.set(a,s,x.get(a,s)-t*w[s])}w[u]=c*w[u],x.set(u,u-1,c*i)}}for(a=0;a<b;a++)for(s=0;s<b;s++)S.set(a,s,a===s?1:0);for(u=l-1;1<=u;u--)if(0!==x.get(u,u-1)){for(a=u+1;a<=l;a++)w[a]=x.get(a,u-1);for(s=u;s<=l;s++){for(i=0,a=u;a<=l;a++)i+=w[a]*S.get(a,s);for(i=i/w[u]/x.get(u,u-1),a=u;a<=l;a++)S.set(a,s,S.get(a,s)+i*w[a])}}}{var E=n,M=o,A=i,C=r,T=y;let t,e,a,s,u,c,l,h,f,d,p,g,m,v,b,x=E-1,_=E-1,w=Number.EPSILON,S=0,k=0,O=0,P=0,I=0,N=0,D=0,L=0;for(t=0;t<E;t++)for((t<0||t>_)&&(A[t]=T.get(t,t),M[t]=0),e=Math.max(t-1,0);e<E;e++)k+=Math.abs(T.get(t,e));for(;0<=x;){for(s=x;0<s&&(0===(N=Math.abs(T.get(s-1,s-1))+Math.abs(T.get(s,s)))&&(N=k),!(Math.abs(T.get(s,s-1))<w*N));)s--;if(s===x)T.set(x,x,T.get(x,x)+S),A[x]=T.get(x,x),M[x]=0,x--,L=0;else if(s===x-1){if(l=T.get(x,x-1)*T.get(x-1,x),O=(T.get(x-1,x-1)-T.get(x,x))/2,P=O*O+l,D=Math.sqrt(Math.abs(P)),T.set(x,x,T.get(x,x)+S),T.set(x-1,x-1,T.get(x-1,x-1)+S),h=T.get(x,x),0<=P){for(D=0<=O?O+D:O-D,A[x-1]=h+D,A[x]=A[x-1],0!==D&&(A[x]=h-l/D),M[x-1]=0,M[x]=0,h=T.get(x,x-1),N=Math.abs(h)+Math.abs(D),O=h/N,P=D/N,I=Math.sqrt(O*O+P*P),O/=I,P/=I,e=x-1;e<E;e++)D=T.get(x-1,e),T.set(x-1,e,P*D+O*T.get(x,e)),T.set(x,e,P*T.get(x,e)-O*D);for(t=0;t<=x;t++)D=T.get(t,x-1),T.set(t,x-1,P*D+O*T.get(t,x)),T.set(t,x,P*T.get(t,x)-O*D);for(t=0;t<=_;t++)D=C.get(t,x-1),C.set(t,x-1,P*D+O*C.get(t,x)),C.set(t,x,P*C.get(t,x)-O*D)}else A[x-1]=h+O,A[x]=h+O,M[x-1]=D,M[x]=-D;x-=2,L=0}else{if(h=T.get(x,x),f=0,l=0,s<x&&(f=T.get(x-1,x-1),l=T.get(x,x-1)*T.get(x-1,x)),10===L){for(S+=h,t=0;t<=x;t++)T.set(t,t,T.get(t,t)-h);N=Math.abs(T.get(x,x-1))+Math.abs(T.get(x-1,x-2)),h=f=.75*N,l=-.4375*N*N}if(30===L&&0<(N=(N=(f-h)/2)*N+l)){for(N=Math.sqrt(N),f<h&&(N=-N),N=h-l/((f-h)/2+N),t=0;t<=x;t++)T.set(t,t,T.get(t,t)-N);S+=N,h=f=l=.964}for(L+=1,u=x-2;u>=s&&(D=T.get(u,u),I=h-D,N=f-D,O=(I*N-l)/T.get(u+1,u)+T.get(u,u+1),P=T.get(u+1,u+1)-D-I-N,I=T.get(u+2,u+1),N=Math.abs(O)+Math.abs(P)+Math.abs(I),O/=N,P/=N,I/=N,u!==s)&&!(Math.abs(T.get(u,u-1))*(Math.abs(P)+Math.abs(I))<w*(Math.abs(O)*(Math.abs(T.get(u-1,u-1))+Math.abs(D)+Math.abs(T.get(u+1,u+1)))));)u--;for(t=u+2;t<=x;t++)T.set(t,t-2,0),t>u+2&&T.set(t,t-3,0);for(a=u;a<=x-1&&(v=a!==x-1,a!==u&&(O=T.get(a,a-1),P=T.get(a+1,a-1),I=v?T.get(a+2,a-1):0,0!==(h=Math.abs(O)+Math.abs(P)+Math.abs(I)))&&(O/=h,P/=h,I/=h),0!==h);a++)if(N=Math.sqrt(O*O+P*P+I*I),0!==(N=O<0?-N:N)){for(a!==u?T.set(a,a-1,-N*h):s!==u&&T.set(a,a-1,-T.get(a,a-1)),O+=N,h=O/N,f=P/N,D=I/N,P/=O,I/=O,e=a;e<E;e++)O=T.get(a,e)+P*T.get(a+1,e),v&&(O+=I*T.get(a+2,e),T.set(a+2,e,T.get(a+2,e)-O*D)),T.set(a,e,T.get(a,e)-O*h),T.set(a+1,e,T.get(a+1,e)-O*f);for(t=0;t<=Math.min(x,a+3);t++)O=h*T.get(t,a)+f*T.get(t,a+1),v&&(O+=D*T.get(t,a+2),T.set(t,a+2,T.get(t,a+2)-O*I)),T.set(t,a,T.get(t,a)-O),T.set(t,a+1,T.get(t,a+1)-O*P);for(t=0;t<=_;t++)O=h*C.get(t,a)+f*C.get(t,a+1),v&&(O+=D*C.get(t,a+2),C.set(t,a+2,C.get(t,a+2)-O*I)),C.set(t,a,C.get(t,a)-O),C.set(t,a+1,C.get(t,a+1)-O*P)}}}if(0!==k){for(x=E-1;0<=x;x--)if(O=A[x],0===(P=M[x]))for(s=x,T.set(x,x,1),t=x-1;0<=t;t--){for(l=T.get(t,t)-O,I=0,e=s;e<=x;e++)I+=T.get(t,e)*T.get(e,x);if(M[t]<0)D=l,N=I;else if(s=t,0===M[t]?T.set(t,x,0!==l?-I/l:-I/(w*k)):(h=T.get(t,t+1),f=T.get(t+1,t),P=(A[t]-O)*(A[t]-O)+M[t]*M[t],c=(h*N-D*I)/P,T.set(t,x,c),T.set(t+1,x,Math.abs(h)>Math.abs(D)?(-I-l*c)/h:(-N-f*c)/D)),c=Math.abs(T.get(t,x)),1<w*c*c)for(e=t;e<=x;e++)T.set(e,x,T.get(e,x)/c)}else if(P<0)for(s=x-1,Math.abs(T.get(x,x-1))>Math.abs(T.get(x-1,x))?(T.set(x-1,x-1,P/T.get(x,x-1)),T.set(x-1,x,-(T.get(x,x)-O)/T.get(x,x-1))):(b=X(0,-T.get(x-1,x),T.get(x-1,x-1)-O,P),T.set(x-1,x-1,b[0]),T.set(x-1,x,b[1])),T.set(x,x-1,0),T.set(x,x,1),t=x-2;0<=t;t--){for(d=0,p=0,e=s;e<=x;e++)d+=T.get(t,e)*T.get(e,x-1),p+=T.get(t,e)*T.get(e,x);if(l=T.get(t,t)-O,M[t]<0)D=l,I=d,N=p;else if(s=t,0===M[t]?(b=X(-d,-p,l,P),T.set(t,x-1,b[0]),T.set(t,x,b[1])):(h=T.get(t,t+1),f=T.get(t+1,t),g=(A[t]-O)*(A[t]-O)+M[t]*M[t]-P*P,m=2*(A[t]-O)*P,0===g&&0==m&&(g=w*k*(Math.abs(l)+Math.abs(P)+Math.abs(h)+Math.abs(f)+Math.abs(D))),b=X(h*I-D*d+P*p,h*N-D*p-P*d,g,m),T.set(t,x-1,b[0]),T.set(t,x,b[1]),Math.abs(h)>Math.abs(D)+Math.abs(P)?(T.set(t+1,x-1,(-d-l*T.get(t,x-1)+P*T.get(t,x))/h),T.set(t+1,x,(-p-l*T.get(t,x)-P*T.get(t,x-1))/h)):(b=X(-I-f*T.get(t,x-1),-N-f*T.get(t,x),D,P),T.set(t+1,x-1,b[0]),T.set(t+1,x,b[1]))),c=Math.max(Math.abs(T.get(t,x-1)),Math.abs(T.get(t,x))),1<w*c*c)for(e=t;e<=x;e++)T.set(e,x-1,T.get(e,x-1)/c),T.set(e,x,T.get(e,x)/c)}for(t=0;t<E;t++)if(t<0||t>_)for(e=t;e<E;e++)C.set(t,e,T.get(t,e));for(e=E-1;0<=e;e--)for(t=0;t<=_;t++){for(D=0,a=0;a<=Math.min(e,_);a++)D+=C.get(t,a)*T.get(a,e);C.set(t,e,D)}}}}this.n=n,this.e=o,this.d=i,this.V=r}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){var t=this.n,e=this.e,n=this.d,r=new _(t,t);let i,o;for(i=0;i<t;i++){for(o=0;o<t;o++)r.set(i,o,0);r.set(i,i,n[i]),0<e[i]?r.set(i,i+1,e[i]):e[i]<0&&r.set(i,i-1,e[i])}return r}}function X(t,e,n,r){let i,o;return Math.abs(n)>Math.abs(r)?(i=r/n,o=n+i*r,[(t+i*e)/o,(e-i*t)/o]):(i=n/r,o=r+i*n,[(i*t+e)/o,(i*e-t)/o])}class K{constructor(t){if(!(t=D.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var e=t,n=e.rows,r=new _(n,n);let i,o,a,s=!0;for(o=0;o<n;o++){let t=0;for(a=0;a<o;a++){let n=0;for(i=0;i<a;i++)n+=r.get(a,i)*r.get(o,i);n=(e.get(o,a)-n)/r.get(a,a),r.set(o,a,n),t+=n*n}for(t=e.get(o,o)-t,s&=0<t,r.set(o,o,Math.sqrt(Math.max(t,0))),a=o+1;a<n;a++)r.set(o,a,0)}this.L=r,this.positiveDefinite=Boolean(s)}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=D.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");var r=t.columns,i=t.clone();let o,a,s;for(s=0;s<n;s++)for(a=0;a<r;a++){for(o=0;o<s;o++)i.set(s,a,i.get(s,a)-i.get(o,a)*e.get(s,o));i.set(s,a,i.get(s,a)/e.get(s,s))}for(s=n-1;0<=s;s--)for(a=0;a<r;a++){for(o=s+1;o<n;o++)i.set(s,a,i.get(s,a)-i.get(o,a)*e.get(o,s));i.set(s,a,i.get(s,a)/e.get(s,s))}return i}get lowerTriangularMatrix(){return this.L}}class Z{constructor(t,e={}){t=D.checkMatrix(t);let n=e["Y"];var{scaleScores:e=!1,maxIterations:r=1e3,terminationCriteria:o=1e-10}=e;let a;if(n){if((n=i(n)&&"number"==typeof n[0]?_.columnVector(n):D.checkMatrix(n)).rows!==t.rows)throw new Error("Y should have the same number of rows as X");a=n.getColumnVector(0)}else a=t.getColumnVector(0);let s,u,c,l,h=1;for(let i=0;i<r&&h>o;i++)c=(c=t.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0))).div(c.norm()),s=t.mmul(c).div(c.transpose().mmul(c).get(0,0)),0<i&&(h=s.clone().sub(l).pow(2).sum()),l=s.clone(),a=n?(u=(u=n.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0))).div(u.norm()),n.mmul(u).div(u.transpose().mmul(u).get(0,0))):s;if(n){let e=t.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0));e=e.div(e.norm());var f=t.clone().sub(s.clone().mmul(e.transpose())),d=a.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),p=n.clone().sub(s.clone().mulS(d.get(0,0)).mmul(u.transpose()));this.t=s,this.p=e.transpose(),this.w=c.transpose(),this.q=u,this.u=a,this.s=s.transpose().mmul(s),this.xResidual=f,this.yResidual=p,this.betas=d}else this.w=c.transpose(),this.s=s.transpose().mmul(s).sqrt(),this.t=e?s.clone().div(this.s.get(0,0)):s,this.xResidual=t.sub(s.mmul(c.transpose()))}}},9990:function(t,e,n){var r=n(48764).Buffer;const i=t.exports;i.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},i.codes={};for(const u in i.types){var o=i.types[u];i.codes[o]=u}i.CMD_SHIFT=4,i.CMD_MASK=240,i.DUP_MASK=8,i.QOS_MASK=3,i.QOS_SHIFT=1,i.RETAIN_MASK=1,i.VARBYTEINT_MASK=127,i.VARBYTEINT_FIN_MASK=128,i.VARBYTEINT_MAX=268435455,i.SESSIONPRESENT_MASK=1,i.SESSIONPRESENT_HEADER=r.from([i.SESSIONPRESENT_MASK]),i.CONNACK_HEADER=r.from([i.codes.connack<<i.CMD_SHIFT]),i.USERNAME_MASK=128,i.PASSWORD_MASK=64,i.WILL_RETAIN_MASK=32,i.WILL_QOS_MASK=24,i.WILL_QOS_SHIFT=3,i.WILL_FLAG_MASK=4,i.CLEAN_SESSION_MASK=2,i.CONNECT_HEADER=r.from([i.codes.connect<<i.CMD_SHIFT]),i.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},i.propertiesCodes={};for(const u in i.properties){var a=i.properties[u];i.propertiesCodes[a]=u}function s(t){return[0,1,2].map((e=>[0,1].map((n=>[0,1].map((o=>{var a=r.alloc(1);return a.writeUInt8(i.codes[t]<<i.CMD_SHIFT|(n?i.DUP_MASK:0)|e<<i.QOS_SHIFT|o,0,!0),a}))))))}i.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},i.PUBLISH_HEADER=s("publish"),i.SUBSCRIBE_HEADER=s("subscribe"),i.SUBSCRIBE_OPTIONS_QOS_MASK=3,i.SUBSCRIBE_OPTIONS_NL_MASK=1,i.SUBSCRIBE_OPTIONS_NL_SHIFT=2,i.SUBSCRIBE_OPTIONS_RAP_MASK=1,i.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,i.SUBSCRIBE_OPTIONS_RH_MASK=3,i.SUBSCRIBE_OPTIONS_RH_SHIFT=4,i.SUBSCRIBE_OPTIONS_RH=[0,16,32],i.SUBSCRIBE_OPTIONS_NL=4,i.SUBSCRIBE_OPTIONS_RAP=8,i.SUBSCRIBE_OPTIONS_QOS=[0,1,2],i.UNSUBSCRIBE_HEADER=s("unsubscribe"),i.ACKS={unsuback:s("unsuback"),puback:s("puback"),pubcomp:s("pubcomp"),pubrel:s("pubrel"),pubrec:s("pubrec")},i.SUBACK_HEADER=r.from([i.codes.suback<<i.CMD_SHIFT]),i.VERSION3=r.from([3]),i.VERSION4=r.from([4]),i.VERSION5=r.from([5]),i.VERSION131=r.from([131]),i.VERSION132=r.from([132]),i.QOS=[0,1,2].map((t=>r.from([t]))),i.EMPTY={pingreq:r.from([i.codes.pingreq<<4,0]),pingresp:r.from([i.codes.pingresp<<4,0]),disconnect:r.from([i.codes.disconnect<<4,0])}},27721:function(t,e,n){var r=n(48764).Buffer;const i=n(19371);n=n(17187);class o extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(t){return this._array[this._i++]=t,!0}concat(){let t=0;var e=new Array(this._array.length),n=this._array;let i,o=0;for(i=0;i<n.length&&void 0!==n[i];i++)"string"!=typeof n[i]?e[i]=n[i].length:e[i]=r.byteLength(n[i]),t+=e[i];var a=r.allocUnsafe(t);for(i=0;i<n.length&&void 0!==n[i];i++)"string"!=typeof n[i]?n[i].copy(a,o):a.write(n[i],o),o+=e[i];return a}}t.exports=function(t,e){var n=new o;return i(t,n,e),n.concat()}},21772:function(t,e,n){e.parser=n(65322).parser,e.generate=n(27721),e.writeToStream=n(19371)},83903:function(t,e,n){var r=n(48764).Buffer;const i={},o=r.isBuffer(r.from([1,2]).subarray(0,1));function a(t){var e=r.allocUnsafe(2);return e.writeUInt8(t>>8,0),e.writeUInt8(255&t,1),e}t.exports={cache:i,generateCache:function(){for(let t=0;t<65536;t++)i[t]=a(t)},generateNumber:a,genBufVariableByteInt:function(t){let e=0,n=0;for(var i=r.allocUnsafe(4);e=t%128|0,0<(t=t/128|0)&&(e|=128),i.writeUInt8(e,n++),0<t&&n<4;);return 0<t&&(n=0),o?i.subarray(0,n):i.slice(0,n)},generate4ByteBuffer:function(t){var e=r.allocUnsafe(4);return e.writeUInt32BE(t,0),e}}},89695:function(t){t.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},65322:function(t,e,n){const r=n(10022);var i=n(17187);const o=n(89695),a=n(9990),s=n(11227)("mqtt-packet:parser");class u extends i{constructor(){super(),this.parser=this.constructor.parser}static parser(t){return this instanceof u?(this.settings=t||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new u).parser(t)}_resetState(){s("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new o,this.error=null,this._list=r(),this._stateCounter=0}parse(t){for(this.error&&this._resetState(),this._list.append(t),s("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||0<this._list.length)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,s("parse: state complete. _stateCounter is now: %d",this._stateCounter),s("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return s("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){var t=this._list.readUInt8(0);return this.packet.cmd=a.types[t>>a.CMD_SHIFT],this.packet.retain=0!=(t&a.RETAIN_MASK),this.packet.qos=t>>a.QOS_SHIFT&a.QOS_MASK,this.packet.dup=0!=(t&a.DUP_MASK),s("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){var t=this._parseVarByteNum(!0);return t&&(this.packet.length=t.value,this._list.consume(t.bytes)),s("_parseLength %d",t.value),!!t}_parsePayload(){s("_parsePayload: payload %O",this._list);let t=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}t=!0}return s("_parsePayload complete result: %s",t),t}_parseConnect(){s("_parseConnect");var t={},e=this.packet,n=this._parseString();if(null===n)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==n&&"MQIsdp"!==n)return this._emitError(new Error("Invalid protocolId"));if(e.protocolId=n,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(e.protocolVersion=this._list.readUInt8(this._pos),128<=e.protocolVersion&&(e.bridgeMode=!0,e.protocolVersion=e.protocolVersion-128),3!==e.protocolVersion&&4!==e.protocolVersion&&5!==e.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(t.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,t.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,t.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK,t.will&&(e.will={},e.will.retain=0!=(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),e.will.qos=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT),e.clean=0!=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK),this._pos++,e.keepalive=this._parseNum(),-1===e.keepalive)return this._emitError(new Error("Packet too short"));5===e.protocolVersion&&(n=this._parseProperties(),Object.getOwnPropertyNames(n).length)&&(e.properties=n);n=this._parseString();if(null===n)return this._emitError(new Error("Packet too short"));if(e.clientId=n,s("_parseConnect: packet.clientId: %s",e.clientId),t.will){if(5===e.protocolVersion&&(n=this._parseProperties(),Object.getOwnPropertyNames(n).length)&&(e.will.properties=n),null===(n=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(e.will.topic=n,s("_parseConnect: packet.will.topic: %s",e.will.topic),null===(n=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));e.will.payload=n,s("_parseConnect: packet.will.paylaod: %s",e.will.payload)}if(t.username){if(null===(n=this._parseString()))return this._emitError(new Error("Cannot parse username"));e.username=n,s("_parseConnect: packet.username: %s",e.username)}if(t.password){if(null===(n=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));e.password=n}return this.settings=e,s("_parseConnect: complete"),e}_parseConnack(){s("_parseConnack");var t,e=this.packet;if(this._list.length<1)return null;if(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&a.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)2<=this._list.length?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(-1===e.returnCode||-1===e.reasonCode)return this._emitError(new Error("Cannot parse return code"));5===this.settings.protocolVersion&&(t=this._parseProperties(),Object.getOwnPropertyNames(t).length)&&(e.properties=t),s("_parseConnack: complete")}_parsePublish(){s("_parsePublish");var t,e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));0<e.qos&&!this._parseMessageId()||(5===this.settings.protocolVersion&&(t=this._parseProperties(),Object.getOwnPropertyNames(t).length)&&(e.properties=t),e.payload=this._list.slice(this._pos,e.length),s("_parsePublish: payload from buffer list: %o",e.payload))}_parseSubscribe(){s("_parseSubscribe");var t,e,n,r,i,o,u=this.packet;if(1!==u.qos)return this._emitError(new Error("Wrong subscribe header"));if(u.subscriptions=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(o=this._parseProperties(),Object.getOwnPropertyNames(o).length)&&(u.properties=o);this._pos<u.length;){if(null===(i=this._parseString()))return this._emitError(new Error("Cannot parse topic"));if(this._pos>=u.length)return this._emitError(new Error("Malformed Subscribe Payload"));t=(e=this._parseByte())&a.SUBSCRIBE_OPTIONS_QOS_MASK,r=0!=(e>>a.SUBSCRIBE_OPTIONS_NL_SHIFT&a.SUBSCRIBE_OPTIONS_NL_MASK),n=0!=(e>>a.SUBSCRIBE_OPTIONS_RAP_SHIFT&a.SUBSCRIBE_OPTIONS_RAP_MASK),e=e>>a.SUBSCRIBE_OPTIONS_RH_SHIFT&a.SUBSCRIBE_OPTIONS_RH_MASK,i={topic:i,qos:t},5===this.settings.protocolVersion?(i.nl=r,i.rap=n,i.rh=e):this.settings.bridgeMode&&(i.rh=0,i.rap=!0,i.nl=!0),s("_parseSubscribe: push subscription `%s` to subscription",i),u.subscriptions.push(i)}}_parseSuback(){s("_parseSuback");var t,e=this.packet;if(this.packet.granted=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(t=this._parseProperties(),Object.getOwnPropertyNames(t).length)&&(e.properties=t);this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}_parseUnsubscribe(){s("_parseUnsubscribe");var t,e=this.packet;if(e.unsubscriptions=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(t=this._parseProperties(),Object.getOwnPropertyNames(t).length)&&(e.properties=t);this._pos<e.length;){var n=this._parseString();if(null===n)return this._emitError(new Error("Cannot parse topic"));s("_parseUnsubscribe: push topic `%s` to unsubscriptions",n),e.unsubscriptions.push(n)}}_parseUnsuback(){s("_parseUnsuback");var t=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){var e=this._parseProperties();for(Object.getOwnPropertyNames(e).length&&(t.properties=e),t.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){s("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);var t,e=this.packet;return this._parseMessageId(),5===this.settings.protocolVersion&&(2<e.length?(e.reasonCode=this._parseByte(),s("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)):e.reasonCode=0,3<e.length)&&(t=this._parseProperties(),Object.getOwnPropertyNames(t).length)&&(e.properties=t),!0}_parseDisconnect(){var t,e=this.packet;return s("_parseDisconnect"),5===this.settings.protocolVersion&&(0<this._list.length?e.reasonCode=this._parseByte():e.reasonCode=0,t=this._parseProperties(),Object.getOwnPropertyNames(t).length)&&(e.properties=t),s("_parseDisconnect result: true"),!0}_parseAuth(){s("_parseAuth");var t=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));t.reasonCode=this._parseByte();var e=this._parseProperties();return Object.getOwnPropertyNames(e).length&&(t.properties=e),s("_parseAuth: result: true"),!0}_parseMessageId(){var t=this.packet;return t.messageId=this._parseNum(),null===t.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(s("_parseMessageId: packet.messageId %d",t.messageId),!0)}_parseString(t){var e=this._parseNum(),n=e+this._pos;return-1===e||n>this._list.length||n>this.packet.length?null:(n=this._list.toString("utf8",this._pos,n),this._pos+=e,s("_parseString: result: %s",n),n)}_parseStringPair(){return s("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){var t=this._parseNum(),e=t+this._pos;return-1===t||e>this._list.length||e>this.packet.length?null:(e=this._list.slice(this._pos,e),this._pos+=t,s("_parseBuffer: result: %o",e),e)}_parseNum(){var t;return this._list.length-this._pos<2?-1:(t=this._list.readUInt16BE(this._pos),this._pos+=2,s("_parseNum: result: %s",t),t)}_parse4ByteNum(){var t;return this._list.length-this._pos<4?-1:(t=this._list.readUInt32BE(this._pos),this._pos+=4,s("_parse4ByteNum: result: %s",t),t)}_parseVarByteNum(t){var e;s("_parseVarByteNum");let n=0,r=1,i=0,o=!1;for(var u=this._pos||0;n<4&&u+n<this._list.length;){if(e=this._list.readUInt8(u+n++),i+=r*(e&a.VARBYTEINT_MASK),r*=128,0==(e&a.VARBYTEINT_FIN_MASK)){o=!0;break}if(this._list.length<=n)break}return!o&&4===n&&this._list.length>=n&&this._emitError(new Error("Invalid variable byte integer")),u&&(this._pos+=n),o=!!o&&(t?{bytes:n,value:i}:i),s("_parseVarByteNum: result: %o",o),o}_parseByte(){let t;return this._pos<this._list.length&&(t=this._list.readUInt8(this._pos),this._pos++),s("_parseByte: result: %o",t),t}_parseByType(t){switch(s("_parseByType: type: %s",t),t){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){s("_parseProperties");for(var t=this._parseVarByteNum(),e=this._pos+t,n={};this._pos<e;){var r=this._parseByte();if(!r)return this._emitError(new Error("Cannot parse property code type")),!1;var i,o;r=a.propertiesCodes[r];if(!r)return this._emitError(new Error("Unknown property")),!1;"userProperties"===r?(n[r]||(n[r]=Object.create(null)),i=this._parseByType(a.propertiesTypes[r]),n[r][i.name]?(Array.isArray(n[r][i.name])||(o=n[r][i.name],n[r][i.name]=[o]),n[r][i.name].push(i.value)):n[r][i.name]=i.value):n[r]?(Array.isArray(n[r])||(n[r]=[n[r]]),n[r].push(this._parseByType(a.propertiesTypes[r]))):n[r]=this._parseByType(a.propertiesTypes[r])}return n}_newPacket(){return s("_newPacket"),this.packet&&(this._list.consume(this.packet.length),s("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),s("_newPacket: new packet"),this.packet=new o,!(this._pos=0)}_emitError(t){s("_emitError"),this.error=t,this.emit("error",t)}}t.exports=u},19371:function(t,e,n){var r=n(48764).Buffer;const i=n(9990),o=r.allocUnsafe(0),a=r.from([0]);var s=n(83903);const u=n(88212).nextTick,c=n(11227)("mqtt-packet:writeToStream"),l=s.cache,h=s.generateNumber,f=s.generateCache,d=s.genBufVariableByteInt,p=s.generate4ByteBuffer;let g=S,m=!0;function v(t,e,n){switch(c("generate called"),e.cork&&(e.cork(),u(y,e)),m&&(m=!1,f()),c("generate: packet.cmd: %s",t.cmd),t.cmd){case"connect":{var s=t,l=e,h=(s=s||{},s.protocolId||"MQTT");let n=s.protocolVersion||4;var d=s.will;let o=s.clean;var p=s.keepalive||0,v=s.clientId||"",b=s.username,w=s.password,S=s.properties;void 0===o&&(o=!0);let a=0;if(!h||"string"!=typeof h&&!r.isBuffer(h))return l.emit("error",new Error("Invalid protocolId")),!1;if(a+=h.length+2,3!==n&&4!==n&&5!==n)return l.emit("error",new Error("Invalid protocol version")),!1;if(a+=1,("string"==typeof v||r.isBuffer(v))&&(v||4<=n)&&(v||o))a+=r.byteLength(v)+2;else{if(n<4)return l.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(0==+o)return l.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof p||p<0||65535<p||p%1!=0)return l.emit("error",new Error("Invalid keepalive")),!1;if(a+=2,a+=1,5===n){var E=A(l,S);if(!E)return!1;a+=E.length}if(d){if("object"!=typeof d)return l.emit("error",new Error("Invalid will")),!1;if(!d.topic||"string"!=typeof d.topic)return l.emit("error",new Error("Invalid will topic")),!1;if(a=a+(r.byteLength(d.topic)+2)+2,d.payload){if(!(0<=d.payload.length))return l.emit("error",new Error("Invalid will payload")),!1;"string"==typeof d.payload?a+=r.byteLength(d.payload):a+=d.payload.length}var T={};if(5===n){if(!(T=A(l,d.properties)))return!1;a+=T.length}}let u=!1;if(null!=b){if(!P(b))return l.emit("error",new Error("Invalid username")),!1;u=!0,a+=r.byteLength(b)+2}if(null!=w){if(!u)return l.emit("error",new Error("Username is required to use password")),!1;if(!P(w))return l.emit("error",new Error("Invalid password")),!1;a+=O(w)+2}return l.write(i.CONNECT_HEADER),x(l,a),M(l,h),s.bridgeMode&&(n+=128),l.write(131===n?i.VERSION131:132===n?i.VERSION132:4===n?i.VERSION4:5===n?i.VERSION5:i.VERSION3),S=0,S=(S=(S=(S=(S=(S|=null!=b?i.USERNAME_MASK:0)|(null!=w?i.PASSWORD_MASK:0))|(d&&d.retain?i.WILL_RETAIN_MASK:0))|(d&&d.qos?d.qos<<i.WILL_QOS_SHIFT:0))|(d?i.WILL_FLAG_MASK:0))|(o?i.CLEAN_SESSION_MASK:0),l.write(r.from([S])),g(l,p),5===n&&E.write(),M(l,v),d&&(5===n&&T.write(),_(l,d.topic),M(l,d.payload)),null!=b&&M(l,b),null!=w&&M(l,w),!0}case"connack":{h=t,s=e,S=n,S=S?S.protocolVersion:4,h=h||{},p=5===S?h.reasonCode:h.returnCode,E=h.properties;let o=2;if("number"!=typeof p)return s.emit("error",new Error("Invalid return code")),!1;let u=null;if(5===S){if(!(u=A(s,E)))return!1;o+=u.length}return s.write(i.CONNACK_HEADER),x(s,o),s.write(h.sessionPresent?i.SESSIONPRESENT_HEADER:a),s.write(r.from([p])),null!=u&&u.write(),!0}case"publish":{v=t,T=e,d=n,c("publish: packet: %o",v);d=d?d.protocolVersion:4,v=v||{},b=v.qos||0,l=v.retain?i.RETAIN_MASK:0,w=v.topic;var k=v.payload||o,I=v.messageId,N=v.properties;let a=0;if("string"==typeof w)a+=r.byteLength(w)+2;else{if(!r.isBuffer(w))return T.emit("error",new Error("Invalid topic")),!1;a+=w.length+2}if(r.isBuffer(k)?a+=k.length:a+=r.byteLength(k),b&&"number"!=typeof I)return T.emit("error",new Error("Invalid messageId")),!1;b&&(a+=2);let s=null;if(5===d){if(!(s=A(T,N)))return!1;a+=s.length}return T.write(i.PUBLISH_HEADER[b][v.dup?1:0][l?1:0]),x(T,a),g(T,O(w)),T.write(w),0<b&&g(T,I),null!=s&&s.write(),c("publish: payload: %o",k),T.write(k)}case"puback":case"pubrec":case"pubrel":case"pubcomp":{N=t,I=e,k=n;var D=k?k.protocolVersion:4,L=(N=N||{},N.cmd||"puback"),R=N.messageId,B=N.dup&&"pubrel"===L?i.DUP_MASK:0;let o=0;var j=N.reasonCode;N=N.properties;let a=5===D?3:2;if("pubrel"===L&&(o=1),"number"!=typeof R)return I.emit("error",new Error("Invalid messageId")),!1;let s=null;if(5===D&&"object"==typeof N){if(!(s=C(I,N,k,a)))return!1;a+=s.length}return I.write(i.ACKS[L][o][B][0]),x(I,a),g(I,R),5===D&&I.write(r.from([j])),null!==s&&s.write(),!0}case"subscribe":{L=t;var F=e;B=n,c("subscribe: packet: ");var z=B?B.protocolVersion:4,U=(B=L||{},L=B.dup?i.DUP_MASK:0,R=B.messageId,B.subscriptions);B=B.properties;let o=0;if("number"!=typeof R)return F.emit("error",new Error("Invalid messageId")),!1;o+=2;let a=null;if(5===z){if(!(a=A(F,B)))return!1;o+=a.length}if("object"!=typeof U||!U.length)return F.emit("error",new Error("Invalid subscriptions")),!1;for(let t=0;t<U.length;t+=1){var G=U[t].topic,V=U[t].qos;if("string"!=typeof G)return F.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof V)return F.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===z){if("boolean"!=typeof(U[t].nl||!1))return F.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(U[t].rap||!1))return F.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;if(V=U[t].rh||0,"number"!=typeof V||2<V)return F.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}o+=r.byteLength(G)+2+1}c("subscribe: writing to stream: %o",i.SUBSCRIBE_HEADER),F.write(i.SUBSCRIBE_HEADER[1][L?1:0][0]),x(F,o),g(F,R),null!==a&&a.write();let s=!0;for(const t of U){var W=t.topic,H=t.qos,Y=+t.nl,q=+t.rap,X=t.rh;let e;_(F,W),e=i.SUBSCRIBE_OPTIONS_QOS[H],5===z&&(e=(e=(e|=Y?i.SUBSCRIBE_OPTIONS_NL:0)|(q?i.SUBSCRIBE_OPTIONS_RAP:0))|(X?i.SUBSCRIBE_OPTIONS_RH[X]:0)),s=F.write(r.from([e]))}return s}case"suback":{D=t;var K=e;j=n;var Z=j?j.protocolVersion:4,$=(D=D||{},D.messageId),J=D.granted;D=D.properties;let o=0;if("number"!=typeof $)return K.emit("error",new Error("Invalid messageId")),!1;if(o+=2,"object"!=typeof J||!J.length)return K.emit("error",new Error("Invalid qos vector")),!1;for(let t=0;t<J.length;t+=1){if("number"!=typeof J[t])return K.emit("error",new Error("Invalid qos vector")),!1;o+=1}let a=null;if(5===Z){if(!(a=C(K,D,j,o)))return!1;o+=a.length}return K.write(i.SUBACK_HEADER),x(K,o),g(K,$),null!==a&&a.write(),K.write(r.from(J))}case"unsubscribe":{Z=t;var Q=e;$=n;$=$?$.protocolVersion:4,Z=Z||{};var tt=Z.messageId,et=Z.dup?i.DUP_MASK:0,nt=Z.unsubscriptions;Z=Z.properties;let o=0;if("number"!=typeof tt)return Q.emit("error",new Error("Invalid messageId")),!1;if(o+=2,"object"!=typeof nt||!nt.length)return Q.emit("error",new Error("Invalid unsubscriptions")),!1;for(let t=0;t<nt.length;t+=1){if("string"!=typeof nt[t])return Q.emit("error",new Error("Invalid unsubscriptions")),!1;o+=r.byteLength(nt[t])+2}let a=null;if(5===$){if(!(a=A(Q,Z)))return!1;o+=a.length}Q.write(i.UNSUBSCRIBE_HEADER[1][et?1:0][0]),x(Q,o),g(Q,tt),null!==a&&a.write();let s=!0;for(let t=0;t<nt.length;t++)s=_(Q,nt[t]);return s}case"unsuback":{et=t;var rt=e;tt=n;var it=tt?tt.protocolVersion:4,ot=(et=et||{},et.messageId),at=et.dup?i.DUP_MASK:0,st=et.granted,ut=et.properties;et=et.cmd;let o=2;if("number"!=typeof ot)return rt.emit("error",new Error("Invalid messageId")),!1;if(5===it){if("object"!=typeof st||!st.length)return rt.emit("error",new Error("Invalid qos vector")),!1;for(let t=0;t<st.length;t+=1){if("number"!=typeof st[t])return rt.emit("error",new Error("Invalid qos vector")),!1;o+=1}}let a=null;if(5===it){if(!(a=C(rt,ut,tt,o)))return!1;o+=a.length}return rt.write(i.ACKS[et][0][at][0]),x(rt,o),g(rt,ot),null!==a&&a.write(),5===it&&rt.write(r.from(st)),!0}case"pingreq":case"pingresp":return ut=t,e.write(i.EMPTY[ut.cmd]);case"disconnect":{at=t,ot=e,it=n;var ct=it?it.protocolVersion:4,lt=(at=at||{},at.reasonCode);at=at.properties;let o=5===ct?1:0,a=null;if(5===ct){if(!(a=C(ot,at,it,o)))return!1;o+=a.length}return ot.write(r.from([i.codes.disconnect<<4])),x(ot,o),5===ct&&ot.write(r.from([lt])),null!==a&&a.write(),!0}case"auth":ct=t,lt=e;var ht=n,ft=ht?ht.protocolVersion:4,dt=(ct=ct||{}).reasonCode,pt=(ct=ct.properties,5===ft?1:0);return 5!==ft&&lt.emit("error",new Error("Invalid mqtt version for auth packet")),!!(ft=C(lt,ct,ht,pt))&&(pt+=ft.length,lt.write(r.from([i.codes.auth<<4])),x(lt,pt),lt.write(r.from([dt])),null!==ft&&ft.write(),!0);default:return e.emit("error",new Error("Unknown command")),!1}}function y(t){t.uncork()}Object.defineProperty(v,"cacheNumbers",{get(){return g===S},set(t){g=t?(l&&0!==Object.keys(l).length||(m=!0),S):(m=!1,E)}});const b={};function x(t,e){if(e>i.VARBYTEINT_MAX)t.emit("error",new Error("Invalid variable byte integer: "+e));else{let n=b[e];n||(n=d(e),e<16384&&(b[e]=n)),c("writeVarByteInt: writing to stream: %o",n),t.write(n)}}function _(t,e){var n=r.byteLength(e);return g(t,n),c("writeString: %s",e),t.write(e,"utf8")}function w(t,e,n){_(t,e),_(t,n)}function S(t,e){return c("writeNumberCached: number: %d",e),c("writeNumberCached: %o",l[e]),t.write(l[e])}function E(t,e){return e=h(e),c("writeNumberGenerated: %o",e),t.write(e)}function M(t,e){"string"==typeof e?_(t,e):e?(g(t,e.length),t.write(e)):g(t,0)}function A(t,e){if("object"!=typeof e||null!=e.length)return{length:1,write(){k(t,{},0)}};let n=0;function o(e,n){let o=0;switch(i.propertiesTypes[e]){case"byte":if("boolean"!=typeof n)return t.emit("error",new Error(`Invalid ${e}: `+n)),!1;o+=2;break;case"int8":if("number"!=typeof n||n<0||255<n)return t.emit("error",new Error(`Invalid ${e}: `+n)),!1;o+=2;break;case"binary":if(n&&null===n)return t.emit("error",new Error(`Invalid ${e}: `+n)),!1;o+=1+r.byteLength(n)+2;break;case"int16":if("number"!=typeof n||n<0||65535<n)return t.emit("error",new Error(`Invalid ${e}: `+n)),!1;o+=3;break;case"int32":if("number"!=typeof n||n<0||4294967295<n)return t.emit("error",new Error(`Invalid ${e}: `+n)),!1;o+=5;break;case"var":if("number"!=typeof n||n<0||268435455<n)return t.emit("error",new Error(`Invalid ${e}: `+n)),!1;o+=1+r.byteLength(d(n));break;case"string":if("string"!=typeof n)return t.emit("error",new Error(`Invalid ${e}: `+n)),!1;o+=3+r.byteLength(n.toString());break;case"pair":if("object"!=typeof n)return t.emit("error",new Error(`Invalid ${e}: `+n)),!1;o+=Object.getOwnPropertyNames(n).reduce(((t,e)=>{var i=n[e];return Array.isArray(i)?t+=i.reduce(((t,n)=>t+(3+r.byteLength(e.toString())+2+r.byteLength(n.toString()))),0):t+=3+r.byteLength(e.toString())+2+r.byteLength(n[e].toString()),t}),0);break;default:return t.emit("error",new Error(`Invalid property ${e}: `+n)),!1}return o}if(e)for(const r in e){let t=0,i=0;var a=e[r];if(Array.isArray(a))for(let e=0;e<a.length;e++){if(!(i=o(r,a[e])))return!1;t+=i}else{if(!(i=o(r,a)))return!1;t=i}if(!t)return!1;n+=t}return{length:r.byteLength(d(n))+n,write(){k(t,e,n)}}}function C(t,e,n,r){var i=["reasonString","userProperties"],o=n&&n.properties&&n.properties.maximumPacketSize?n.properties.maximumPacketSize:0;let a=A(t,e);if(o)for(;r+a.length>o;){var s=i.shift();if(!s||!e[s])return!1;delete e[s],a=A(t,e)}return a}function T(t,e,n){var o,a;switch(i.propertiesTypes[e]){case"byte":t.write(r.from([i.properties[e]])),t.write(r.from([+n]));break;case"int8":t.write(r.from([i.properties[e]])),t.write(r.from([n]));break;case"binary":t.write(r.from([i.properties[e]])),M(t,n);break;case"int16":t.write(r.from([i.properties[e]])),g(t,n);break;case"int32":t.write(r.from([i.properties[e]])),o=t,a=n,a=p(a),c("write4ByteNumber: %o",a),o.write(a);break;case"var":t.write(r.from([i.properties[e]])),x(t,n);break;case"string":t.write(r.from([i.properties[e]])),_(t,n);break;case"pair":Object.getOwnPropertyNames(n).forEach((o=>{var a=n[o];Array.isArray(a)?a.forEach((n=>{t.write(r.from([i.properties[e]])),w(t,o.toString(),n.toString())})):(t.write(r.from([i.properties[e]])),w(t,o.toString(),a.toString()))}));break;default:t.emit("error",new Error(`Invalid property ${e} value: `+n))}}function k(t,e,n){x(t,n);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&null!==e[i]){var r=e[i];if(Array.isArray(r))for(let e=0;e<r.length;e++)T(t,i,r[e]);else T(t,i,r)}}function O(t){return t?t instanceof r?t.length:r.byteLength(t):0}function P(t){return"string"==typeof t||t instanceof r}t.exports=v},41455:function(t,e,n){"use strict";var r=n(34155),i=n(17187).EventEmitter,o=n(77431),a=n(21772),s=n(88473).Writable,u=n(35717),c=n(45408),l=n(4028),h=n(47529),f=n(11227)("mqttjs:client"),d=r?r.nextTick:function(t){setTimeout(t,0)},p=n.g.setImmediate||function(t){d(t)},g={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},m=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],v={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function y(t,e,n){f("sendPacket :: packet: %O",e),f("sendPacket :: emitting `packetsend`"),t.emit("packetsend",e),f("sendPacket :: writing to stream"),e=a.writeToStream(e,t.stream,t.options),f("sendPacket :: writeToStream result %s",e),!e&&n?(f("sendPacket :: handle events on `drain` once through callback."),t.stream.once("drain",n)):n&&(f("sendPacket :: invoking cb"),n())}function b(t,e,n,r){f("storeAndSend :: store packet with cmd %s to outgoingStore",e.cmd),t.outgoingStore.put(e,(function(i){if(i)return n&&n(i);r(),y(t,e,n)}))}function x(t){f("nop ::",t)}function _(t,e){var n,r=this;if(!(this instanceof _))return new _(t,e);for(n in this.options=e||{},g)void 0===this.options[n]?this.options[n]=g[n]:this.options[n]=e[n];f("MqttClient :: options.protocol",e.protocol),f("MqttClient :: options.protocolVersion",e.protocolVersion),f("MqttClient :: options.username",e.username),f("MqttClient :: options.keepalive",e.keepalive),f("MqttClient :: options.reconnectPeriod",e.reconnectPeriod),f("MqttClient :: options.rejectUnauthorized",e.rejectUnauthorized),this.options.clientId="string"==typeof e.clientId?e.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),f("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===e.protocolVersion&&e.customHandleAcks?e.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=t,this.outgoingStore=e.outgoingStore||new o,this.incomingStore=e.incomingStore||new o,this.queueQoSZero=void 0===e.queueQoSZero||e.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this._firstConnection=!0,this.on("connect",(function(){var t=this.queue;f("connect :: sending queued packets"),function e(){var n,i=t.shift();f("deliver :: entry %o",i),i&&(n=i.packet,f("deliver :: call _sendPacket for %o",n),r._sendPacket(n,(function(t){i.cb&&i.cb(t),e()})))}()})),this.on("close",(function(){f("close :: connected set to `false`"),this.connected=!1,f("close :: clearing connackTimer"),clearTimeout(this.connackTimer),f("close :: clearing ping timer"),null!==r.pingTimer&&(r.pingTimer.clear(),r.pingTimer=null),f("close :: calling _setupReconnect"),this._setupReconnect()})),i.call(this),f("MqttClient :: setting up stream"),this._setupStream()}u(_,i),_.prototype._setupStream=function(){var t=this,e=new s,n=a.parser(this.options),r=null,i=[];function o(){var t;i.length?d(u):(t=r,r=null,t())}function u(){f("work :: getting next packet in queue");var e=i.shift();e?(f("work :: packet pulled from queue"),t._handlePacket(e,o)):(f("work :: no packets in queue"),e=r,r=null,f("work :: done flag is %s",!!e),e&&e())}if(f("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),f("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),n.on("packet",(function(t){f("parser :: on packet push to packets array."),i.push(t)})),e._write=function(t,e,i){r=i,f("writable stream :: parsing buffer"),n.parse(t),u()},f("_setupStream :: pipe stream to writable stream"),this.stream.pipe(e),this.stream.on("error",(function(e){f("streamErrorHandler :: error",e.message),m.includes(e.code)?(f("streamErrorHandler :: emitting error"),t.emit("error",e)):x(e)})),this.stream.on("close",(function(){var e;f("(%s)stream :: on close",t.options.clientId),(e=t.outgoing)&&(f("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(e).forEach((function(t){e[t].volatile&&"function"==typeof e[t].cb&&(e[t].cb(new Error("Connection closed")),delete e[t])}))),f("stream: emit close to MqttClient"),t.emit("close")})),f("_setupStream: sending packet `connect`"),(e=Object.create(this.options)).cmd="connect",y(this,e),n.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return t.end((()=>this.emit("error",new Error("Packet has no Authentication Method")))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&y(this,h({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout((function(){f("!!connectTimeout hit!! Calling _cleanUp with force `true`"),t._cleanUp(!0)}),this.options.connectTimeout)},_.prototype._handlePacket=function(t,e){var n=this.options;if(5===n.protocolVersion&&n.properties&&n.properties.maximumPacketSize&&n.properties.maximumPacketSize<t.length)return this.emit("error",new Error("exceeding packets size "+t.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(f("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",t),t.cmd){case"publish":this._handlePublish(t,e);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(t),e();break;case"pubrel":this._handlePubrel(t,e);break;case"connack":this._handleConnack(t),e();break;case"pingresp":this._handlePingresp(t),e();break;case"disconnect":this._handleDisconnect(t),e()}},_.prototype._checkDisconnecting=function(t){return this.disconnecting&&(t?t(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},_.prototype.publish=function(t,e,n,r){f("publish :: message `%s` to topic `%s`",e,t);var i,o=this.options;if("function"==typeof n&&(r=n,n=null),n=h({qos:0,retain:!1,dup:!1},n),!this._checkDisconnecting(r))switch(i={cmd:"publish",topic:t,payload:e,qos:n.qos,retain:n.retain,messageId:this._nextId(),dup:n.dup},5===o.protocolVersion&&(i.properties=n.properties,!o.properties&&i.properties&&i.properties.topicAlias||n.properties&&o.properties&&(n.properties.topicAlias&&o.properties.topicAliasMaximum&&n.properties.topicAlias>o.properties.topicAliasMaximum||!o.properties.topicAliasMaximum&&n.properties.topicAlias))&&delete i.properties.topicAlias,f("publish :: qos",n.qos),n.qos){case 1:case 2:this.outgoing[i.messageId]={volatile:!1,cb:r||x},this._storeProcessing?(f("_storeProcessing enabled"),this._packetIdsDuringStoreProcessing[i.messageId]=!1,this._storePacket(i,void 0,n.cbStorePut)):(f("MqttClient:publish: packet cmd: %s",i.cmd),this._sendPacket(i,void 0,n.cbStorePut));break;default:this._storeProcessing?(f("_storeProcessing enabled"),this._storePacket(i,r,n.cbStorePut)):(f("MqttClient:publish: packet cmd: %s",i.cmd),this._sendPacket(i,r,n.cbStorePut))}return this},_.prototype.subscribe=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r,i=[],o=t.shift(),a=o.resubscribe,s=t.pop()||x,u=t.pop(),c=this,d=this.options.protocolVersion;return delete o.resubscribe,"string"==typeof o&&(o=[o]),"function"!=typeof s&&(u=s,s=x),null!==(n=l.validateTopics(o))?(p(s,new Error("Invalid topic "+n)),this):this._checkDisconnecting(s)?(f("subscribe: discconecting true"),this):(n={qos:0},5===d&&(n.nl=!1,n.rap=!1,n.rh=0),u=h(n,u),Array.isArray(o)?o.forEach((function(t){f("subscribe: array topic %s",t),(!c._resubscribeTopics.hasOwnProperty(t)||c._resubscribeTopics[t].qos<u.qos||a)&&(t={topic:t,qos:u.qos},5===d&&(t.nl=u.nl,t.rap=u.rap,t.rh=u.rh,t.properties=u.properties),f("subscribe: pushing topic `%s` and qos `%s` to subs list",t.topic,t.qos),i.push(t))})):Object.keys(o).forEach((function(t){var e;f("subscribe: object topic %s",t),(!c._resubscribeTopics.hasOwnProperty(t)||c._resubscribeTopics[t].qos<o[t].qos||a)&&(e={topic:t,qos:o[t].qos},5===d&&(e.nl=o[t].nl,e.rap=o[t].rap,e.rh=o[t].rh,e.properties=u.properties),f("subscribe: pushing `%s` to subs list",e),i.push(e))})),n={cmd:"subscribe",subscriptions:i,qos:1,retain:!1,dup:!1,messageId:this._nextId()},u.properties&&(n.properties=u.properties),i.length?(this.options.resubscribe&&(f("subscribe :: resubscribe true"),r=[],i.forEach((function(t){var e;0<c.options.reconnectPeriod&&(e={qos:t.qos},5===d&&(e.nl=t.nl||!1,e.rap=t.rap||!1,e.rh=t.rh||0,e.properties=t.properties),c._resubscribeTopics[t.topic]=e,r.push(t.topic))})),c.messageIdToTopic[n.messageId]=r),this.outgoing[n.messageId]={volatile:!0,cb:function(t,e){if(!t)for(var n=e.granted,r=0;r<n.length;r+=1)i[r].qos=n[r];s(t,i)}},f("subscribe :: call _sendPacket"),this._sendPacket(n),this):void s(null,[]))},_.prototype.unsubscribe=function(){for(var t={cmd:"unsubscribe",qos:1,messageId:this._nextId()},e=this,n=new Array(arguments.length),r=0;r<arguments.length;r++)n[r]=arguments[r];var i=n.shift(),o=n.pop()||x,a=n.pop();return"string"==typeof i&&(i=[i]),"function"!=typeof o&&(a=o,o=x),this._checkDisconnecting(o)||("string"==typeof i?t.unsubscriptions=[i]:Array.isArray(i)&&(t.unsubscriptions=i),this.options.resubscribe&&t.unsubscriptions.forEach((function(t){delete e._resubscribeTopics[t]})),"object"==typeof a&&a.properties&&(t.properties=a.properties),this.outgoing[t.messageId]={volatile:!0,cb:o},f("unsubscribe: call _sendPacket"),this._sendPacket(t)),this},_.prototype.end=function(t,e,n){var r=this;function i(){f("end :: (%s) :: finish :: calling _cleanUp with force %s",r.options.clientId,t),r._cleanUp(t,(()=>{f("end :: finish :: calling process.nextTick on closeStores"),d(function(){f("end :: closeStores: closing incoming and outgoing stores"),r.disconnected=!0,r.incomingStore.close((function(t){r.outgoingStore.close((function(e){f("end :: closeStores: emitting end"),r.emit("end"),n&&(e=t||e,f("end :: closeStores: invoking callback with args"),n(e))}))})),r._deferredReconnect&&r._deferredReconnect()}.bind(r))}),e)}return f("end :: (%s)",this.options.clientId),null!=t&&"boolean"==typeof t||(n=e||x,e=t,t=!1,"object"!=typeof e&&(n=e,e=null,"function"!=typeof n)&&(n=x)),"object"!=typeof e&&(n=e,e=null),f("end :: cb? %s",!!n),n=n||x,this.disconnecting?n():(this._clearReconnect(),this.disconnecting=!0,!t&&0<Object.keys(this.outgoing).length?(f("end :: (%s) :: calling finish in 10ms once outgoing is empty",r.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,i,10))):(f("end :: (%s) :: immediately calling finish",r.options.clientId),i())),this},_.prototype.removeOutgoingMessage=function(t){var e=this.outgoing[t]?this.outgoing[t].cb:null;return delete this.outgoing[t],this.outgoingStore.del({messageId:t},(function(){e(new Error("Message removed"))})),this},_.prototype.reconnect=function(t){function e(){t?(n.options.incomingStore=t.incomingStore,n.options.outgoingStore=t.outgoingStore):(n.options.incomingStore=null,n.options.outgoingStore=null),n.incomingStore=n.options.incomingStore||new o,n.outgoingStore=n.options.outgoingStore||new o,n.disconnecting=!1,n.disconnected=!1,n._deferredReconnect=null,n._reconnect()}f("client reconnect");var n=this;return this.disconnecting&&!this.disconnected?this._deferredReconnect=e:e(),this},_.prototype._reconnect=function(){f("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end((()=>{this._setupStream()})),f("client already connected. disconnecting first.")):(f("_reconnect: calling _setupStream"),this._setupStream())},_.prototype._setupReconnect=function(){var t=this;!t.disconnecting&&!t.reconnectTimer&&0<t.options.reconnectPeriod?(this.reconnecting||(f("_setupReconnect :: emit `offline` state"),this.emit("offline"),f("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),f("_setupReconnect :: setting reconnectTimer for %d ms",t.options.reconnectPeriod),t.reconnectTimer=setInterval((function(){f("reconnectTimer :: reconnect triggered!"),t._reconnect()}),t.options.reconnectPeriod)):f("_setupReconnect :: doing nothing...")},_.prototype._clearReconnect=function(){f("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},_.prototype._cleanUp=function(t,e){var n,r=arguments[2];e&&(f("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",e)),f("_cleanUp :: forced? %s",t),t?(0===this.options.reconnectPeriod&&this.options.clean&&(n=this.outgoing)&&(f("flush: queue exists? %b",!!n),Object.keys(n).forEach((function(t){"function"==typeof n[t].cb&&(n[t].cb(new Error("Connection closed")),delete n[t])}))),f("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy()):(t=h({cmd:"disconnect"},r),f("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(t,p.bind(null,this.stream.end.bind(this.stream)))),this.disconnecting||(f("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(f("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),e&&!this.connected&&(f("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",e),e())},_.prototype._sendPacket=function(t,e,n){if(f("_sendPacket :: (%s) ::  start",this.options.clientId),n=n||x,this.connected){switch(this._shiftPingInterval(),t.cmd){case"publish":break;case"pubrel":return void b(this,t,e,n);default:return void y(this,t,e)}switch(t.qos){case 2:case 1:b(this,t,e,n);break;default:y(this,t,e)}f("_sendPacket :: (%s) ::  end",this.options.clientId)}else f("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(t,e,n)},_.prototype._storePacket=function(t,e,n){f("_storePacket :: packet: %o",t),f("_storePacket :: cb? %s",!!e),n=n||x,0===(t.qos||0)&&this.queueQoSZero||"publish"!==t.cmd?this.queue.push({packet:t,cb:e}):0<t.qos?(e=this.outgoing[t.messageId]?this.outgoing[t.messageId].cb:null,this.outgoingStore.put(t,(function(t){if(t)return e&&e(t);n()}))):e&&e(new Error("No connection to broker"))},_.prototype._setupPingTimer=function(){f("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);var t=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=c((function(){t._checkPing()}),1e3*this.options.keepalive))},_.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},_.prototype._checkPing=function(){f("_checkPing :: checking ping..."),this.pingResp?(f("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(f("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},_.prototype._handlePingresp=function(){this.pingResp=!0},_.prototype._handleConnack=function(t){f("_handleConnack");var e=this.options,n=5===e.protocolVersion?t.reasonCode:t.returnCode;clearTimeout(this.connackTimer),t.properties&&(t.properties.topicAliasMaximum&&(e.properties||(e.properties={}),e.properties.topicAliasMaximum=t.properties.topicAliasMaximum),t.properties.serverKeepAlive&&e.keepalive&&(e.keepalive=t.properties.serverKeepAlive,this._shiftPingInterval()),t.properties.maximumPacketSize)&&(e.properties||(e.properties={}),e.properties.maximumPacketSize=t.properties.maximumPacketSize),0===n?(this.reconnecting=!1,this._onConnect(t)):0<n&&((e=new Error("Connection refused: "+v[n])).code=n,this.emit("error",e))},_.prototype._handlePublish=function(t,e){f("_handlePublish: packet %o",t),e=void 0!==e?e:x;var n=t.topic.toString(),r=t.payload,i=t.qos,o=t.messageId,a=this,s=this.options,u=[0,16,128,131,135,144,145,151,153];switch(f("_handlePublish: qos %d",i),i){case 2:s.customHandleAcks(n,r,t,(function(n,r){return n instanceof Error||(r=n,n=null),n?a.emit("error",n):-1===u.indexOf(r)?a.emit("error",new Error("Wrong reason code for pubrec")):void(r?a._sendPacket({cmd:"pubrec",messageId:o,reasonCode:r},e):a.incomingStore.put(t,(function(){a._sendPacket({cmd:"pubrec",messageId:o},e)})))}));break;case 1:s.customHandleAcks(n,r,t,(function(i,s){return i instanceof Error||(s=i,i=null),i?a.emit("error",i):-1===u.indexOf(s)?a.emit("error",new Error("Wrong reason code for puback")):(s||a.emit("message",n,r,t),void a.handleMessage(t,(function(t){if(t)return e&&e(t);a._sendPacket({cmd:"puback",messageId:o,reasonCode:s},e)})))}));break;case 0:this.emit("message",n,r,t),this.handleMessage(t,e);break;default:f("_handlePublish: unknown QoS. Doing nothing.")}},_.prototype.handleMessage=function(t,e){e()},_.prototype._handleAck=function(t){var e,n=t.messageId,r=t.cmd,i=this.outgoing[n]?this.outgoing[n].cb:null,o=this;if(i){switch(f("_handleAck :: packet type",r),r){case"pubcomp":case"puback":var a=t.reasonCode;a&&0<a&&16!==a&&((e=new Error("Publish error: "+v[a])).code=a,i(e,t)),delete this.outgoing[n],this.outgoingStore.del(t,i);break;case"pubrec":a={cmd:"pubrel",qos:2,messageId:n};var s=t.reasonCode;s&&0<s&&16!==s?((e=new Error("Publish error: "+v[s])).code=s,i(e,t)):this._sendPacket(a);break;case"suback":delete this.outgoing[n];for(var u,c=0;c<t.granted.length;c++)0!=(128&t.granted[c])&&(u=this.messageIdToTopic[n])&&u.forEach((function(t){delete o._resubscribeTopics[t]}));i(null,t);break;case"unsuback":delete this.outgoing[n],i(null);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else f("_handleAck :: Server sent an ack in error. Ignoring.")},_.prototype._handlePubrel=function(t,e){f("handling pubrel packet"),e=void 0!==e?e:x;var n=t.messageId,r=this,i={cmd:"pubcomp",messageId:n};r.incomingStore.get(t,(function(t,n){t?r._sendPacket(i,e):(r.emit("message",n.topic,n.payload,n),r.handleMessage(n,(function(t){if(t)return e(t);r.incomingStore.del(n,x),r._sendPacket(i,e)})))}))},_.prototype._handleDisconnect=function(t){this.emit("disconnect",t)},_.prototype._nextId=function(){var t=this.nextId++;return 65536===this.nextId&&(this.nextId=1),t},_.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},_.prototype._resubscribe=function(t){f("_resubscribe");var e=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!t.sessionPresent)&&0<e.length)if(this.options.resubscribe)if(5===this.options.protocolVersion){f("_resubscribe: protocolVersion 5");for(var n=0;n<e.length;n++){var r={};r[e[n]]=this._resubscribeTopics[e[n]],r.resubscribe=!0,this.subscribe(r,{properties:r[e[n]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},_.prototype._onConnect=function(t){var e;this.disconnected?this.emit("connect",t):((e=this)._setupPingTimer(),this._resubscribe(t),this.connected=!0,function n(){var r=e.outgoingStore.createStream();function i(){e._storeProcessing=!1,e._packetIdsDuringStoreProcessing={}}function o(){r.destroy(),r=null,i()}e.once("close",o),r.on("error",(function(t){i(),e.removeListener("close",o),e.emit("error",t)})),r.on("end",(function(){var r,a=!0;for(r in e._packetIdsDuringStoreProcessing)if(!e._packetIdsDuringStoreProcessing[r]){a=!1;break}a?(i(),e.removeListener("close",o),e.emit("connect",t)):n()})),function t(){var n,i;r&&(e._storeProcessing=!0,(n=r.read(1))?e._packetIdsDuringStoreProcessing[n.messageId]?t():e.disconnecting||e.reconnectTimer?r.destroy&&r.destroy():(i=e.outgoing[n.messageId]?e.outgoing[n.messageId].cb:null,e.outgoing[n.messageId]={volatile:!1,cb:function(e,n){i&&i(e,n),t()}},e._packetIdsDuringStoreProcessing[n.messageId]=!0,e._sendPacket(n)):r.once("readable",t))}()}())},t.exports=_},36191:function(t,e,n){"use strict";var r,i,o,a=n(48764).Buffer,s=n(88473).Transform,u=n(25981),c=!1;t.exports=function(t,e){var n,l,h,f;if(e.hostname=e.hostname||e.host,e.hostname)return n="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt",(l=e).hostname||(l.hostname="localhost"),l.path||(l.path="/"),l.wsOptions||(l.wsOptions={}),l=t,h="alis"===(t=e).protocol?"wss":"ws",f=h+"://"+t.hostname+t.path,t.port&&80!==t.port&&443!==t.port&&(f=h+"://"+t.hostname+":"+t.port+t.path),h=f="function"==typeof t.transformWsUrl?t.transformWsUrl(f,t,l):f,(r=e.my).connectSocket({url:h,protocols:n}),(t=new s)._write=function(t,e,n){r.sendSocketMessage({data:t.buffer,success:function(){n()},fail:function(){n(new Error)}})},t._flush=function(t){r.closeSocket({success:function(){t()}})},i=t,o=u.obj(),c||(c=!0,r.onSocketOpen((function(){o.setReadable(i),o.setWritable(i),o.emit("connect")})),r.onSocketMessage((function(t){var e,n;"string"==typeof t.data?(e=a.from(t.data,"base64"),i.push(e)):((n=new FileReader).addEventListener("load",(function(){var t=(t=n.result)instanceof ArrayBuffer?a.from(t):a.from(t,"utf8");i.push(t)})),n.readAsArrayBuffer(t.data))})),r.onSocketClose((function(){o.end(),o.destroy()})),r.onSocketError((function(t){o.destroy(t)}))),o;throw new Error("Could not determine host. Specify host manually.")}},31616:function(t,e,n){"use strict";var r=n(34155),i=n(41455),o=n(77431),a=n(8575),s=n(47529),u=n(11227)("mqttjs"),c={};function l(t,e){if(u("connecting to an MQTT broker..."),"object"!=typeof t||e||(e=t,t=null),e=e||{},t){if(t=a.parse(t,!0),null!=t.port&&(t.port=Number(t.port)),null===(e=s(t,e)).protocol)throw new Error("Missing protocol");e.protocol=e.protocol.replace(/:$/,"")}var n;if((t=e).auth&&((r=t.auth.match(/^(.+):(.+)$/))?(t.username=r[1],t.password=r[2]):t.username=t.auth),e.query&&"string"==typeof e.query.clientId&&(e.clientId=e.query.clientId),e.cert&&e.key){if(!e.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(e.protocol))switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;case"wx":e.protocol="wxs";break;case"ali":e.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+e.protocol+'"!')}}if(c[e.protocol]||(n=-1!==["mqtts","wss"].indexOf(e.protocol),e.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((function(t,e){return(!n||e%2!=0)&&"function"==typeof c[t]}))[0]),!1===e.clean&&!e.clientId)throw new Error("Missing clientId for unclean clients");e.protocol&&(e.defaultProtocol=e.protocol);var r=new i((function(t){return e.servers&&(t._reconnectCount&&t._reconnectCount!==e.servers.length||(t._reconnectCount=0),e.host=e.servers[t._reconnectCount].host,e.port=e.servers[t._reconnectCount].port,e.protocol=e.servers[t._reconnectCount].protocol||e.defaultProtocol,e.hostname=e.host,t._reconnectCount++),u("calling streambuilder for",e.protocol),c[e.protocol](t,e)}),e);return r.on("error",(function(){})),r}void 0!==r&&"browser"!==r.title||"function"!=typeof n?(c.mqtt=n(71849),c.tcp=n(71849),c.ssl=n(85473),c.tls=n(85473),c.mqtts=n(85473)):(c.wx=n(18098),c.wxs=n(18098),c.ali=n(36191),c.alis=n(36191)),c.ws=n(26908),c.wss=n(26908),t.exports=l,t.exports.connect=l,t.exports.MqttClient=i,t.exports.Store=o},71849:function(t,e,n){"use strict";var r=n(87294),i=n(11227)("mqttjs:tcp");t.exports=function(t,e){var n;return e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost",n=e.port,e=e.hostname,i("port %d and host %s",n,e),r.createConnection(n,e)}},85473:function(t,e,n){"use strict";var r=n(95036),i=n(11227)("mqttjs:tls");t.exports=function(t,e){var n;function o(r){e.rejectUnauthorized&&t.emit("error",r),n.end()}return e.port=e.port||8883,e.host=e.hostname||e.host||"localhost",e.servername=e.host,e.rejectUnauthorized=!1!==e.rejectUnauthorized,delete e.path,i("port %d host %s rejectUnauthorized %b",e.port,e.host,e.rejectUnauthorized),(n=r.connect(e)).on("secureConnect",(function(){e.rejectUnauthorized&&!n.authorized?n.emit("error",new Error("TLS not authorized")):n.removeListener("error",o)})),n.on("error",o),n}},26908:function(t,e,n){"use strict";var r=n(34155),i=n(48764).Buffer;const o=n(15124),a=n(11227)("mqttjs:ws"),s=n(25981),u=n(88473).Transform;let c=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];const l=void 0!==r&&"browser"===r.title||"function"==typeof n;function h(t,e){let n=t.protocol+"://"+t.hostname+":"+t.port+t.path;return"function"==typeof t.transformWsUrl?t.transformWsUrl(n,t,e):n}function f(t){let e=t;return t.hostname||(e.hostname="localhost"),t.port||("wss"===t.protocol?e.port=443:e.port=80),t.path||(e.path="/"),t.wsOptions||(e.wsOptions={}),l||"wss"!==t.protocol||c.forEach((function(n){t.hasOwnProperty(n)&&!t.wsOptions.hasOwnProperty(n)&&(e.wsOptions[n]=t[n])})),e}function d(t,e){a("streamBuilder");e=f(e),t=h(e,t);var n,r,i=(n=t,r=e,a("createWebSocket"),a("protocol: "+r.protocolId+" "+r.protocolVersion),i="MQIsdp"===r.protocolId&&3===r.protocolVersion?"mqttv3.1":"mqtt",a("creating new Websocket for url: "+n+" and protocol: "+i),n=new o(n,[i],r.wsOptions));let s=o.createWebSocketStream(i,e.wsOptions);return s.url=t,i.on("close",(()=>{s.destroy()})),s}function p(t,e){let n;var r;a("browserStreamBuilder");const o=function(t){if((t=f(t)).hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var e=new URL(document.URL);t.hostname=e.hostname,t.port||(t.port=e.port)}return void 0===t.objectMode&&(t.objectMode=!(!0===t.binary||void 0===t.binary)),t}(e).browserBufferSize||524288,c=e.browserBufferTimeout||1e3,l=!e.objectMode;r="MQIsdp"===(g=e).protocolId&&3===g.protocolVersion?"mqttv3.1":"mqtt",g=h(g,t),(t=new WebSocket(g,[r])).binaryType="arraybuffer";let d=t,p=function(t,e,n){return t=new u({objectModeMode:t.objectMode}),t._write=e,t._flush=n,t}(e,(function t(e,n,r){d.bufferedAmount>o&&setTimeout(t,c,e,n,r),l&&"string"==typeof e&&(e=i.from(e,"utf8"));try{d.send(e)}catch(t){return r(t)}r()}),(function(t){d.close(),t()}));e.objectMode||(p._writev=x),p.on("close",(()=>{d.close()}));var g=void 0!==d.addEventListener;function m(){n.setReadable(p),n.setWritable(p),n.emit("connect")}function v(){n.end(),n.destroy()}function y(t){n.destroy(t)}function b(t){let e=t.data;e=e instanceof ArrayBuffer?i.from(e):i.from(e,"utf8"),p.push(e)}function x(t,e){var n=new Array(t.length);for(let r=0;r<t.length;r++)"string"==typeof t[r].chunk?n[r]=i.from(t[r],"utf8"):n[r]=t[r].chunk;this._write(i.concat(n),"binary",e)}return d.readyState===d.OPEN?n=p:(n=n=s(void 0,void 0,e),e.objectMode||(n._writev=x),g?d.addEventListener("open",m):d.onopen=m),n.socket=d,g?(d.addEventListener("close",v),d.addEventListener("error",y),d.addEventListener("message",b)):(d.onclose=v,d.onerror=y,d.onmessage=b),n}t.exports=l?p:d},18098:function(t,e,n){"use strict";var r,i,o,a=n(48764).Buffer,s=n(88473).Transform,u=n(25981);t.exports=function(t,e){var n,c,l,h;if(e.hostname=e.hostname||e.host,e.hostname)return n="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt",(c=e).hostname||(c.hostname="localhost"),c.path||(c.path="/"),c.wsOptions||(c.wsOptions={}),c=t,e="wxs"===(t=e).protocol?"wss":"ws",l=e+"://"+t.hostname+t.path,t.port&&80!==t.port&&443!==t.port&&(l=e+"://"+t.hostname+":"+t.port+t.path),e=l="function"==typeof t.transformWsUrl?t.transformWsUrl(l,t,c):l,r=wx.connectSocket({url:e,protocols:[n]}),(t=new s)._write=function(t,e,n){r.send({data:t.buffer,success:function(){n()},fail:function(t){n(new Error(t))}})},t._flush=function(t){r.close({success:function(){t()}})},i=t,(o=u.obj())._destroy=function(t,e){r.close({success:function(){e&&e(t)}})},h=o.destroy,o.destroy=function(){o.destroy=h;var t=this;setTimeout((function(){r.close({fail:function(){t._destroy(new Error)}})}),0)}.bind(o),r.onOpen((function(){o.setReadable(i),o.setWritable(i),o.emit("connect")})),r.onMessage((function(t){t=(t=t.data)instanceof ArrayBuffer?a.from(t):a.from(t,"utf8"),i.push(t)})),r.onClose((function(){o.end(),o.destroy()})),r.onError((function(t){o.destroy(new Error(t.errMsg))})),o;throw new Error("Could not determine host. Specify host manually.")}},77431:function(t,e,n){"use strict";var r=n(47529),i=n(88473).Readable,o={objectMode:!0},a={clean:!0};function s(t){if(!(this instanceof s))return new s(t);this.options=t||{},this.options=r(a,t),this._inflights=new Map}s.prototype.put=function(t,e){return this._inflights.set(t.messageId,t),e&&e(),this},s.prototype.createStream=function(){var t=new i(o),e=!1,n=[],r=0;return this._inflights.forEach((function(t,e){n.push(t)})),t._read=function(){!e&&r<n.length?this.push(n[r++]):this.push(null)},t.destroy=function(){var t;e||(t=this,e=!0,setTimeout((function(){t.emit("close")}),0))},t},s.prototype.del=function(t,e){return(t=this._inflights.get(t.messageId))?(this._inflights.delete(t.messageId),e(null,t)):e&&e(new Error("missing packet")),this},s.prototype.get=function(t,e){return(t=this._inflights.get(t.messageId))?e(null,t):e&&e(new Error("missing packet")),this},s.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},t.exports=s},4028:function(t){"use strict";t.exports={validateTopics:function(t){if(0===t.length)return"empty_topic_list";for(var e=0;e<t.length;e++)if(!function(t){for(var e=t.split("/"),n=0;n<e.length;n++)if("+"!==e[n]){if("#"===e[n])return n===e.length-1;if(-1!==e[n].indexOf("+")||-1!==e[n].indexOf("#"))return}return 1}(t[e]))return t[e];return null}}},15124:function(t){"use strict";t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},57824:function(t){var e=864e5;function n(t,e,n,r){return e=1.5*n<=e,Math.round(t/n)+" "+r+(e?"s":"")}t.exports=function(t,r){r=r||{};var i=typeof t;if(!("string"==i&&0<t.length)){if("number"==i&&isFinite(t))return(r.long?function(t){var r=Math.abs(t);return e<=r?n(t,r,e,"day"):36e5<=r?n(t,r,36e5,"hour"):6e4<=r?n(t,r,6e4,"minute"):1e3<=r?n(t,r,1e3,"second"):t+" ms"}:function(t){var n=Math.abs(t);return e<=n?Math.round(t/e)+"d":36e5<=n?Math.round(t/36e5)+"h":6e4<=n?Math.round(t/6e4)+"m":1e3<=n?Math.round(t/1e3)+"s":t+"ms"})(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}if(i=t,!(100<(i=String(i)).length)&&(i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i),i)){var o=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*e;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*o;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*o;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}},84245:function(t){t.exports=function(t){var e=t;if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var n=["on","fire","off"],r=0;r<n.length;++r)if(e.hasOwnProperty(n[r]))throw new Error("Subject cannot be eventified, since it already has property '"+n[r]+"'");i=t,o=Object.create(null);var i,o,a={on:function(t,e,n){if("function"!=typeof e)throw new Error("callback is expected to be a function");return(o[t]||(o[t]=[])).push({callback:e,ctx:n}),i},off:function(t,e){var n=void 0===t;if(n)o=Object.create(null);else if(o[t])if("function"!=typeof e)delete o[t];else for(var r=o[t],a=0;a<r.length;++a)r[a].callback===e&&r.splice(a,1);return i},fire:function(t){var e,n=o[t];if(n){1<arguments.length&&(e=Array.prototype.splice.call(arguments,1));for(var r=0;r<n.length;++r){var a=n[r];a.callback.apply(a.ctx,e)}}return i}};return t.on=a.on,t.off=a.off,t.fire=a.fire,t}},16505:function(t,e,n){t.exports=function(t,e){if(!t)throw new Error("Graph structure cannot be undefined");var o=(e&&e.createSimulator||n(45818))(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var a=19<t.version?function(e){return e=t.getLinks(e),e?1+e.size/3:1}:function(e){return e=t.getLinks(e),e?1+e.length/3:1};e&&"function"==typeof e.nodeMass&&(a=e.nodeMass);var s=new Map,u={},c=0,l=o.settings.springTransform||i,h=(c=0,t.forEachNode((function(t){m(t.id),c+=1})),t.forEachLink(v),t.on("changed",g),!1),f={step:function(){if(0===c)return d(!0),!0;var t=o.step();return f.lastMove=t,f.fire("step"),t=t/c<=.01,d(t),t},getNodePosition:function(t){return b(t).pos},setNodePosition:function(t){var e=b(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(t){if(t=u[t],t)return{from:t.from.pos,to:t.to.pos}},getGraphRect:function(){return o.getBBox()},forEachBody:p,pinNode:function(t,e){b(t.id).isPinned=!!e},isNodePinned:function(t){return b(t.id).isPinned},dispose:function(){t.off("changed",g),f.fire("disposed")},getBody:function(t){return s.get(t)},getSpring:function(e,n){var r;if(void 0===n)r="object"!=typeof e?e:e.id;else{if(e=t.hasLink(e,n),!e)return;r=e.id}return u[r]},getForceVectorLength:function(){var t=0,e=0;return p((function(n){t+=Math.abs(n.force.x),e+=Math.abs(n.force.y)})),Math.sqrt(t*t+e*e)},simulator:o,graph:t,lastMove:0};return r(f),f;function d(t){h!==t&&(h=t,f.fire("stable",t))}function p(t){s.forEach(t)}function g(e){for(var n=0;n<e.length;++n){var r,i,a,l,h=e[n];"add"===h.changeType?(h.node&&m(h.node.id),h.link&&v(h.link)):"remove"===h.changeType&&(h.node&&(r=h.node,i=void 0,r=r.id,i=s.get(r))&&(s.delete(r),o.removeBody(i)),h.link)&&(l=a=i=r=void 0,r=h.link,i=u[r.id])&&(a=t.getNode(r.fromId),l=t.getNode(r.toId),a&&y(a.id),l&&y(l.id),delete u[r.id],o.removeSpring(i))}c=t.getNodesCount()}function m(e){var n=s.get(e);if(!n){var r=t.getNode(e);if(!r)throw new Error("initBody() was called with unknown node id");var i,a=r.position;a||(i=function(t){var e=[];if(t.links)for(var n=Math.min(t.links.length,2),r=0;r<n;++r){var i=t.links[r];i=i.fromId!==t.id?s.get(i.fromId):s.get(i.toId);i&&i.pos&&e.push(i)}return e}(r),a=o.getBestNewBodyPosition(i)),(n=o.addBodyAt(a)).id=e,s.set(e,n),y(e),(i=r)&&(i.isPinned||i.data&&i.data.isPinned)&&(n.isPinned=!0)}}function v(t){y(t.fromId),y(t.toId);var e=s.get(t.fromId),n=s.get(t.toId);e=o.addSpring(e,n,t.length);l(t,e),u[t.id]=e}function y(t){var e=s.get(t);if(e.mass=a(t),Number.isNaN(e.mass))throw new Error("Node mass should be a number")}function b(t){var e=s.get(t);return e||(m(t),e=s.get(t)),e}},t.exports.simulator=n(45818);var r=n(84245);function i(){}},15189:function(t,e,n){const r=n(16422);t.exports=function(t){return function(e,n){var i=n&&n.indent||0,o=(n=n&&void 0!==n.join?n.join:"\n",Array(i+1).join(" ")),a=[];for(let c=0;c<t;++c){var s=r(c),u=0===c?"":o;a.push(u+e.replace(/{var}/g,s))}return a.join(n)}}},30891:function(t,e,n){t.exports=function(t){return t=i(t),new Function("bodies","settings","random",t)},t.exports.generateFunctionBody=i;const r=n(15189);function i(t){return t=r(t),`\n  var boundingBox = {\n    ${t("min_{var}: 0, max_{var}: 0,",{indent:4})}\n  };\n\n  return {\n    box: boundingBox,\n\n    update: updateBoundingBox,\n\n    reset: resetBoundingBox,\n\n    getBestNewPosition: function (neighbors) {\n      var ${t("base_{var} = 0",{join:", "})};\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          let neighborPos = neighbors[i].pos;\n          ${t("base_{var} += neighborPos.{var};",{indent:10})}\n        }\n\n        ${t("base_{var} /= neighbors.length;",{indent:8})}\n      } else {\n        ${t("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}\n      }\n\n      var springLength = settings.springLength;\n      return {\n        ${t("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n    if (i === 0) return; // No bodies - no borders.\n\n    ${t("var max_{var} = -Infinity;",{indent:4})}\n    ${t("var min_{var} = Infinity;",{indent:4})}\n\n    while(i--) {\n      // this is O(n), it could be done faster with quadtree, if we check the root node bounds\n      var bodyPos = bodies[i].pos;\n      ${t("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}\n      ${t("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}\n    }\n\n    ${t("boundingBox.min_{var} = min_{var};",{indent:4})}\n    ${t("boundingBox.max_{var} = max_{var};",{indent:4})}\n  }\n\n  function resetBoundingBox() {\n    ${t("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}\n  }\n`}},6410:function(t,e,n){const r=n(15189);function i(t,e){return`\n${a(t,e)}\n${o(t)}\nreturn {Body: Body, Vector: Vector};\n`}function o(t){t=r(t);var e=t("{var}",{join:", "});return`\nfunction Body(${e}) {\n  this.isPinned = false;\n  this.pos = new Vector(${e});\n  this.force = new Vector();\n  this.velocity = new Vector();\n  this.mass = 1;\n\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.reset = function() {\n  this.force.reset();\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.setPosition = function (${e}) {\n  ${t("this.pos.{var} = {var} || 0;",{indent:2})}\n};`}function a(t,e){t=r(t);let n="";return e&&(n=""+t("\n   var v{var};\nObject.defineProperty(this, '{var}', {\n  set: function(v) { \n    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');\n    v{var} = v; \n  },\n  get: function() { return v{var}; }\n});")),`function Vector(${t("{var}",{join:", "})}) {\n  ${n}\n    if (typeof arguments[0] === 'object') {\n      // could be another vector\n      let v = arguments[0];\n      ${t('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}\n      ${t("this.{var} = v.{var};",{indent:4})}\n    } else {\n      ${t('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}\n    }\n  }\n  \n  Vector.prototype.reset = function () {\n    ${t("this.{var} = ",{join:""})}0;\n  };`}t.exports=function(t,e){return t=i(t,e),e=new Function(t)().Body,e},t.exports.generateCreateBodyFunctionBody=i,t.exports.getVectorCode=a,t.exports.getBodyCode=o},36647:function(t,e,n){const r=n(15189);function i(t){return`\n  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');\n\n  return {\n    update: function(body) {\n      ${r(t)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}\n    }\n  };\n`}t.exports=function(t){return t=i(t),new Function("options",t)},t.exports.generateCreateDragForceFunctionBody=i},34079:function(t,e,n){const r=n(15189);function i(t){return t=r(t),`\n  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');\n  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');\n\n  return {\n    /**\n     * Updates forces acting on a spring\n     */\n    update: function (spring) {\n      var body1 = spring.from;\n      var body2 = spring.to;\n      var length = spring.length < 0 ? options.springLength : spring.length;\n      ${t("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}\n      var r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});\n\n      if (r === 0) {\n        ${t("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}\n        r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});\n      }\n\n      var d = r - length;\n      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;\n\n      ${t("body1.force.{var} += coefficient * d{var}",{indent:6})};\n      body1.springCount += 1;\n      body1.springLength += r;\n\n      ${t("body2.force.{var} -= coefficient * d{var}",{indent:6})};\n      body2.springCount += 1;\n      body2.springLength += r;\n    }\n  };\n`}t.exports=function(t){return t=i(t),new Function("options","random",t)},t.exports.generateCreateSpringForceFunctionBody=i},51763:function(t,e,n){const r=n(15189);function i(t){return t=r(t),`\n  var length = bodies.length;\n  if (length === 0) return 0;\n\n  ${t("var d{var} = 0, t{var} = 0;",{indent:2})}\n\n  for (var i = 0; i < length; ++i) {\n    var body = bodies[i];\n    if (body.isPinned) continue;\n\n    if (adaptiveTimeStepWeight && body.springCount) {\n      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);\n    }\n\n    var coeff = timeStep / body.mass;\n\n    ${t("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}\n    ${t("var v{var} = body.velocity.{var};",{indent:4})}\n    var v = Math.sqrt(${t("v{var} * v{var}",{join:" + "})});\n\n    if (v > 1) {\n      // We normalize it so that we move within timeStep range. \n      // for the case when v <= 1 - we let velocity to fade out.\n      ${t("body.velocity.{var} = v{var} / v;",{indent:6})}\n    }\n\n    ${t("d{var} = timeStep * body.velocity.{var};",{indent:4})}\n\n    ${t("body.pos.{var} += d{var};",{indent:4})}\n\n    ${t("t{var} += Math.abs(d{var});",{indent:4})}\n  }\n\n  return (${t("t{var} * t{var}",{join:" + "})})/length;\n`}t.exports=function(t){return t=i(t),new Function("bodies","timeStep","adaptiveTimeStepWeight",t)},t.exports.generateIntegratorFunctionBody=i},1584:function(t,e,n){const r=n(15189),i=n(16422);function o(t){var e=r(t);let n=Math.pow(2,t);return`\n${l()}\n${c(t)}\n${a(t)}\n${u(t)}\n${s(t)}\n\nfunction createQuadTree(options, random) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;\n\n  var gravity = options.gravity;\n  var updateQueue = [];\n  var insertStack = new InsertStack();\n  var theta = options.theta;\n\n  var nodesCache = [];\n  var currentInCache = 0;\n  var root = newNode();\n\n  return {\n    insertBodies: insertBodies,\n\n    /**\n     * Gets root node if it is present\n     */\n    getRoot: function() {\n      return root;\n    },\n\n    updateBodyForce: update,\n\n    options: function(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n\n  function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n    if (node) {\n${function(t){var e=[];for(let r=0;r<n;++r)e.push(`${t}quad${r} = null;`);return e.join("\n")}("      node.")}\n      node.body = null;\n      node.mass = ${e("node.mass_{var} = ",{join:""})}0;\n      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;\n    } else {\n      node = new QuadNode();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  }\n\n  function update(sourceBody) {\n    var queue = updateQueue;\n    var v;\n    ${e("var d{var};",{indent:4})}\n    var r; \n    ${e("var f{var} = 0;",{indent:4})}\n    var queueLength = 1;\n    var shiftIdx = 0;\n    var pushIdx = 1;\n\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx];\n      var body = node.body;\n\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = (body !== sourceBody);\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n        }\n\n        // This is standard gravitation force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        ${e("f{var} += v * d{var};",{indent:8})}\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Sorry about code duplication. I don't want to create many functions\n          // right away. Just want to see performance first.\n          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n        }\n        // If s / r < θ, treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n        if ((node.max_${i(0)} - node.min_${i(0)}) / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was made into square during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          ${e("f{var} += v * d{var};",{indent:10})}\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n\n          // I intentionally unfolded this loop, to save several CPU cycles.\n${function(){var t=Array(11).join(" "),e=[];for(let r=0;r<n;++r)e.push(t+`if (node.quad${r}) {`),e.push(t+`  queue[pushIdx] = node.quad${r};`),e.push(t+"  queueLength += 1;"),e.push(t+"  pushIdx += 1;"),e.push(t+"}");return e.join("\n")}()}\n        }\n      }\n    }\n\n    ${e("sourceBody.force.{var} += f{var};",{indent:4})}\n  }\n\n  function insertBodies(bodies) {\n    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}\n    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}\n    var i = bodies.length;\n\n    // To reduce quad tree depth we are looking for exact bounding box of all particles.\n    while (i--) {\n      var pos = bodies[i].pos;\n      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}\n      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}\n    }\n\n    // Makes the bounds square.\n    var maxSideLength = -Infinity;\n    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}\n\n    currentInCache = 0;\n    root = newNode();\n    ${e("root.min_{var} = {var}min;",{indent:4})}\n    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}\n\n    i = bodies.length - 1;\n    if (i >= 0) {\n      root.body = bodies[i];\n    }\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  }\n\n  function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop();\n      var node = stackItem.node;\n      var body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        ${e("var {var} = body.pos.{var};",{indent:8})}\n        node.mass += body.mass;\n        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}\n\n        // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n        var quadIdx = 0; // Assume we are in the 0's quad.\n        ${e("var min_{var} = node.min_{var};",{indent:8})}\n        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}\n\n${function(e){var n=[],r=Array(e+1).join(" ");for(let o=0;o<t;++o)n.push(r+`if (${i(o)} > max_${i(o)}) {`),n.push(r+`  quadIdx = quadIdx + ${Math.pow(2,o)};`),n.push(r+`  min_${i(o)} = max_${i(o)};`),n.push(r+`  max_${i(o)} = node.max_${i(o)};`),n.push(r+"}");return n.join("\n")}(8)}\n\n        var child = getChild(node, quadIdx);\n\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add\n          // subnode to it.\n          child = newNode();\n          ${e("child.min_{var} = min_{var};",{indent:10})}\n          ${e("child.max_{var} = max_{var};",{indent:10})}\n          child.body = body;\n\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not cary bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n          do {\n            var offset = random.nextDouble();\n            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}\n\n            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}\n            retriesCount -= 1;\n            // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        }\n        // Next iteration should subdivide node further.\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  }\n}\nreturn createQuadTree;\n\n`}function a(t){return t=r(t),`\n  function isSamePosition(point1, point2) {\n    ${t("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}\n  \n    return ${t("d{var} < 1e-8",{join:" && "})};\n  }  \n`}function s(t){var e=Math.pow(2,t);return`\nfunction setChild(node, idx, child) {\n  ${function(){var t=[];for(let r=0;r<e;++r){var n=0===r?"  ":"  else ";t.push(n+`if (idx === ${r}) node.quad${r} = child;`)}return t.join("\n")}()}\n}`}function u(t){return`function getChild(node, idx) {\n${function(){var e=[],n=Math.pow(2,t);for(let t=0;t<n;++t)e.push(`  if (idx === ${t}) return node.quad${t};`);return e.join("\n")}()}\n  return null;\n}`}function c(t){var e=r(t);let n=Math.pow(2,t);return`\nfunction QuadNode() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain bodies:\n  this.body = null;\n\n  // Child nodes are stored in quads. Each quad is presented by number:\n  // 0 | 1\n  // -----\n  // 2 | 3\n${function(t){var e=[];for(let r=0;r<n;++r)e.push(`${t}quad${r} = null;`);return e.join("\n")}("  this.")}\n\n  // Total mass of current node\n  this.mass = 0;\n\n  // Center of mass coordinates\n  ${e("this.mass_{var} = 0;",{indent:2})}\n\n  // bounding box coordinates\n  ${e("this.min_{var} = 0;",{indent:2})}\n  ${e("this.max_{var} = 0;",{indent:2})}\n}\n`}function l(){return"\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n"}t.exports=function(t){return t=o(t),new Function(t)()},t.exports.generateQuadTreeFunctionBody=o,t.exports.getInsertStackCode=l,t.exports.getQuadNodeCode=c,t.exports.isSamePosition=a,t.exports.getChildBodyCode=u,t.exports.setChildBodyCode=s},16422:function(t){t.exports=function(t){return 0===t?"x":1===t?"y":2===t?"z":"c"+(t+1)}},45818:function(t,e,n){t.exports=function(t){var e=n(68403),l=n(35510),h=n(84245);if(t){if(void 0!==t.springCoeff)throw new Error("springCoeff was renamed to springCoefficient");if(void 0!==t.dragCoeff)throw new Error("dragCoeff was renamed to dragCoefficient")}t=l(t,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1}),l=c[t.dimensions],l||(d=t.dimensions,l={Body:r(d,t.debug),createQuadTree:i(d),createBounds:o(d),createDragForce:a(d),createSpringForce:s(d),integrate:u(d)},c[d]=l);var f=l.Body,d=l.createQuadTree,p=l.createBounds,g=l.createDragForce,m=l.createSpringForce,v=l.integrate,y=(l=n(78712).random(42),[]),b=[],x=d(t,l),_=p(y,t,l),w=m(t,l),S=g(t),E=[],M=new Map,A=0;T("nbody",(function(){if(0!==y.length){x.insertBodies(y);for(var t=y.length;t--;){var e=y[t];e.isPinned||(e.reset(),x.updateBodyForce(e),S.update(e))}}})),T("spring",(function(){for(var t=b.length;t--;)w.update(b[t])})),d={bodies:y,quadTree:x,springs:b,settings:t,addForce:T,removeForce:function(t){var e=E.indexOf(M.get(t));e<0||(E.splice(e,1),M.delete(t))},getForces:function(){return M},step:function(){for(var e=0;e<E.length;++e)E[e](A);var n=v(y,t.timeStep,t.adaptiveTimeStepWeight);return A+=1,n},addBody:function(t){if(t)return y.push(t),t;throw new Error("Body is required")},addBodyAt:function(t){if(t)return t=new f(t),y.push(t),t;throw new Error("Body position is required")},removeBody:function(t){if(t&&(t=y.indexOf(t),!(t<0)))return y.splice(t,1),0===y.length&&_.reset(),!0},addSpring:function(t,n,r,i){if(t&&n)return t=new e(t,n,r="number"!=typeof r?-1:r,0<=i?i:-1),b.push(t),t;throw new Error("Cannot add null spring to force simulator")},getTotalMovement:function(){return 0},removeSpring:function(t){return t&&-1<(t=b.indexOf(t))?(b.splice(t,1),!0):void 0},getBestNewBodyPosition:function(t){return _.getBestNewPosition(t)},getBBox:C,getBoundingBox:C,invalidateBBox:function(){},gravity:function(e){return void 0!==e?(t.gravity=e,x.options({gravity:e}),this):t.gravity},theta:function(e){return void 0!==e?(t.theta=e,x.options({theta:e}),this):t.theta},random:l};return function(t,e){for(var n in t)!function(t,e,n){var r;t.hasOwnProperty(n)&&"function"!=typeof e[n]&&(r=Number.isFinite(t[n]),e[n]=r?function(r){if(void 0===r)return t[n];if(Number.isFinite(r))return t[n]=r,e;throw new Error("Value of "+n+" should be a valid number.")}:function(r){return void 0!==r?(t[n]=r,e):t[n]})}(t,e,n)}(t,d),h(d),d;function C(){return _.update(),_.box}function T(t,e){if(M.has(t))throw new Error("Force "+t+" is already added");M.set(t,e),E.push(e)}};var r=n(6410),i=n(1584),o=n(30891),a=n(36647),s=n(34079),u=n(51763),c={}},68403:function(t){t.exports=function(t,e,n,r){this.from=t,this.to=e,this.length=n,this.coefficient=r}},54736:function(t,e,n){t.exports=function(t){if("uniqueLinkId"in(t=t||{})&&(t.multigraph=t.uniqueLinkId),void 0===t.multigraph&&(t.multigraph=!1),"function"!=typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,n=new Map,u={},c=0,l=t.multigraph?function(t,e,n){var r=s(t,e),i=u.hasOwnProperty(r);return(i||M(t,e))&&(i||(u[r]=0),i="@"+ ++u[r],r=s(t+i,e+i)),new a(t,e,n,r)}:function(t,e,r){var i=s(t,e),o=n.get(i);return o?(o.data=r,o):new a(t,e,r,i)},h=[],f=A,d=A,p=A,g=A,m={version:20,addNode:b,addLink:function(t,e,r){p();var i=x(t)||b(t),a=x(e)||b(e),s=(r=l(t,e,r),n.has(r.id));return n.set(r.id,r),o(i,r),t!==e&&o(a,r),f(r,s?"update":"add"),g(),r},removeLink:function(t,e){return void 0!==e&&(t=M(t,e)),E(t)},removeNode:_,getNode:x,getNodeCount:w,getLinkCount:S,getEdgeCount:S,getLinksCount:S,getNodesCount:w,getLinks:function(t){return t=x(t),t?t.links:null},forEachNode:k,forEachLinkedNode:function(t,n,r){var i=x(t);if(i&&i.links&&"function"==typeof n)return(r?function(t,n,r){for(var i=t.values(),o=i.next();!o.done;){var a=o.value;if(a.fromId===n&&r(e.get(a.toId),a))return!0;o=i.next()}}:function(t,n,r){for(var i=t.values(),o=i.next();!o.done;){var a=o.value,s=a.fromId===n?a.toId:a.fromId;if(r(e.get(s),a))return!0;o=i.next()}})(i.links,t,n)},forEachLink:function(t){if("function"==typeof t)for(var e=n.values(),r=e.next();!r.done;){if(t(r.value))return!0;r=e.next()}},beginUpdate:p,endUpdate:g,clear:function(){p(),k((function(t){_(t.id)})),g()},hasLink:M,hasNode:x,getLink:M};return r(m),function(){var t=m.on;m.on=function(){return m.beginUpdate=p=C,m.endUpdate=g=T,f=v,d=y,(m.on=t).apply(m,arguments)}}(),m;function v(t,e){h.push({link:t,changeType:e})}function y(t,e){h.push({node:t,changeType:e})}function b(t,n){if(void 0===t)throw new Error("Invalid node identifier");p();var r=x(t);return r?(r.data=n,d(r,"update")):(r=new i(t,n),d(r,"add")),e.set(t,r),g(),r}function x(t){return e.get(t)}function _(t){var n=x(t);if(!n)return!1;p();var r=n.links;return r&&(r.forEach(E),n.links=null),e.delete(t),d(n,"remove"),g(),!0}function w(){return e.size}function S(){return n.size}function E(t){if(!t)return!1;if(!n.get(t.id))return!1;p(),n.delete(t.id);var e=x(t.fromId),r=x(t.toId);return e&&e.links.delete(t),r&&r.links.delete(t),f(t,"remove"),g(),!0}function M(t,e){if(void 0!==t&&void 0!==e)return n.get(s(t,e))}function A(){}function C(){c+=1}function T(){0===--c&&0<h.length&&(m.fire("changed",h),h.length=0)}function k(t){if("function"!=typeof t)throw new Error("Function is expected to iterate over graph nodes. You passed "+t);for(var n=e.values(),r=n.next();!r.done;){if(t(r.value))return!0;r=n.next()}}};var r=n(84245);function i(t,e){this.id=t,this.links=null,this.data=e}function o(t,e){t.links?t.links.add(e):t.links=new Set([e])}function a(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function s(t,e){return t.toString()+"👉 "+e.toString()}},35510:function(t){t.exports=function t(e,n){if(e=e||{},n)for(var r in n){var i,o;n.hasOwnProperty(r)&&(i=e.hasOwnProperty(r),o=typeof n[r],i&&typeof e[r]==o?"object"==o&&(e[r]=t(e[r],n[r])):e[r]=n[r])}return e}},78712:function(t){function e(t){return new n("number"==typeof t?t:+new Date)}function n(t){this.seed=t}function r(t){return Math.sqrt(2*Math.PI/t)*Math.pow(1/Math.E*(t+1/(12*t-1/(10*t))),t)}function i(){var t=this.seed;return(268435455&(this.seed=4294967295&(3042594569^(t=4251993797+(t=4294967295&(3550635116+(t=374761393+(t=4294967295&(3345072700^(t=t+2127912214+(t<<12)&4294967295)^t>>>19))+(t<<5)&4294967295)^t<<9))+(t<<3)&4294967295)^t>>>16)))/268435456}t.exports=e,t.exports.random=e,t.exports.randomIterator=function(t,n){var r=n||e();if("function"==typeof r.next)return{forEach:function(e){var n,i,o;for(n=t.length-1;0<n;--n)i=r.next(n+1),o=t[i],t[i]=t[n],t[n]=o,e(o);t.length&&e(t[0])},shuffle:function(){var e,n,i;for(e=t.length-1;0<e;--e)n=r.next(e+1),i=t[n],t[n]=t[e],t[e]=i;return t}};throw new Error("customRandom does not match expected API: next() function is missing")},n.prototype.next=function(t){return Math.floor(this.nextDouble()*t)},n.prototype.nextDouble=i,n.prototype.uniform=i,n.prototype.gaussian=function(){for(var t,e,n;e=2*this.nextDouble()-1,n=2*this.nextDouble()-1,t=e*e+n*n,1<=t||0===t;);return e*Math.sqrt(-2*Math.log(t)/t)},n.prototype.levy=function(){var t=Math.pow(r(2.5)*Math.sin(1.5*Math.PI/2)/(1.5*r(1.25)*Math.pow(2,.25)),1/1.5);return this.gaussian()*t/Math.pow(Math.abs(this.gaussian()),1/1.5)}},52796:function(t,e,n){t.exports=n(10643)},13264:function(t){"use strict";var e=!("undefined"==typeof window||!window.document||!window.document.createElement);e={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen,isInWorker:!e};t.exports=e},84518:function(t){var e,n,r,i,o,a,s,u,c,l,h,f,d,p,g,m=!1;function v(){var t,v,y,b;m||(m=!0,t=navigator.userAgent,v=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),y=/(Mac OS X)|(Windows)|(Linux)/.exec(t),f=/\b(iPhone|iP[ao]d)/.exec(t),d=/\b(iP[ao]d)/.exec(t),l=/Android/i.exec(t),p=/FBAN\/\w+;/i.exec(t),g=/Mobile/i.exec(t),h=!!/Win64/.exec(t),v?((e=v[1]?parseFloat(v[1]):v[5]?parseFloat(v[5]):NaN)&&document&&document.documentMode&&(e=document.documentMode),b=/(?:Trident\/(\d+.\d+))/.exec(t),a=b?parseFloat(b[1])+4:e,n=v[2]?parseFloat(v[2]):NaN,r=v[3]?parseFloat(v[3]):NaN,i=v[4]?parseFloat(v[4]):NaN,o=i&&(v=/(?:Chrome\/(\d+\.\d+))/.exec(t))&&v[1]?parseFloat(v[1]):NaN):e=n=r=o=i=NaN,y?(s=!!y[1]&&(!(b=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t))||parseFloat(b[1].replace("_","."))),u=!!y[2],c=!!y[3]):s=u=c=!1)}var y={ie:function(){return v(),e},ieCompatibilityMode:function(){return v(),e<a},ie64:function(){return y.ie()&&h},firefox:function(){return v(),n},opera:function(){return v(),r},webkit:function(){return v(),i},safari:function(){return y.webkit()},chrome:function(){return v(),o},windows:function(){return v(),u},osx:function(){return v(),s},linux:function(){return v(),c},iphone:function(){return v(),f},mobile:function(){return v(),f||d||l||g},nativeApp:function(){return v(),p},android:function(){return v(),l},ipad:function(){return v(),d}};t.exports=y},96534:function(t,e,n){"use strict";var r,i=n(13264);i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */),t.exports=function(t,e){var n,o;return!(!i.canUseDOM||e&&!("addEventListener"in document))&&((n=(e="on"+t)in document)||((o=document.createElement("div")).setAttribute(e,"return;"),n="function"==typeof o[e]),!n&&r&&"wheel"===t?document.implementation.hasFeature("Events.wheel","3.0"):n)}},10643:function(t,e,n){"use strict";var r=n(84518),i=n(96534);function o(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=10*e,i=10*n,"deltaY"in t&&(i=t.deltaY),((r="deltaX"in t?t.deltaX:r)||i)&&t.deltaMode&&(1==t.deltaMode?(r*=40,i*=40):(r*=800,i*=800)),{spinX:e=r&&!e?r<1?-1:1:e,spinY:n=i&&!n?i<1?-1:1:n,pixelX:r,pixelY:i}}o.getEventType=function(){return r.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},t.exports=o},30778:function(t,e,n){function r(t){function e(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))}return e.called=!1,e}function i(t){function e(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)}var n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}n=n(52479),t.exports=n(r),t.exports.strict=n(i),r.proto=r((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})}))},40582:function(t,e,n){var r=n(89550),i=n(68854),o=n(36820),a=n(43650),s=n(56601),u=[0,0];t.exports.x7=function(t,e,n,a,c){return r(t,n,a),o(t,t),i(e,-t[1],t[0]),i(u,-n[1],n[0]),c/s(e,u)},t.exports.mJ=function(t,e){return i(t,-e[1],e[0]),t},t.exports.o7=function(t,e,n){return a(t,e,n),o(t,t),t}},88212:function(t,e,n){"use strict";var r=n(34155);void 0===r||!r.version||0===r.version.indexOf("v0.")||0===r.version.indexOf("v1.")&&0!==r.version.indexOf("v1.8.")?t.exports={nextTick:function(t,e,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return r.nextTick(t);case 2:return r.nextTick((function(){t.call(null,e)}));case 3:return r.nextTick((function(){t.call(null,e,n)}));case 4:return r.nextTick((function(){t.call(null,e,n,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return r.nextTick((function(){t.apply(null,o)}))}}}:t.exports=r},34155:function(t){var e,n;t=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}try{e="function"==typeof setTimeout?setTimeout:r}catch(t){e=r}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}function o(n){if(e===setTimeout)return setTimeout(n,0);if((e===r||!e)&&setTimeout)return(e=setTimeout)(n,0);try{return e(n,0)}catch(t){try{return e.call(null,n,0)}catch(t){return e.call(this,n,0)}}}var a,s=[],u=!1,c=-1;function l(){u&&a&&(u=!1,a.length?s=a.concat(s):c=-1,s.length)&&h()}function h(){if(!u){for(var t=o(l),e=(u=!0,s.length);e;){for(a=s,s=[];++c<e;)a&&a[c].run();c=-1,e=s.length}a=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return(n=clearTimeout)(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function d(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new f(t,e)),1!==s.length||u||o(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=d,t.addListener=d,t.once=d,t.off=d,t.removeListener=d,t.removeAllListeners=d,t.emit=d,t.prependListener=d,t.prependOnceListener=d,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},62587:function(t){"use strict";t.exports=function(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"==typeof t&&0!==t.length){var o=/\+/g,a=(e=(t=t.split(e),1e3),r&&"number"==typeof r.maxKeys&&(e=r.maxKeys),t.length);0<e&&e<a&&(a=e);for(var s=0;s<a;++s){var u,c=t[s].replace(o,"%20"),l=c.indexOf(n);l=0<=l?(u=c.substr(0,l),c.substr(l+1)):(u=c,""),c=decodeURIComponent(u),l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(i,c)?Array.isArray(i[c])?i[c].push(l):i[c]=[i[c],l]:i[c]=l}}return i}},12361:function(t){"use strict";function e(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}t.exports=function(t,n,r,i){return n=n||"&",r=r||"=","object"==typeof(t=null===t?void 0:t)?Object.keys(t).map((function(i){var o=encodeURIComponent(e(i))+r;return Array.isArray(t[i])?t[i].map((function(t){return o+encodeURIComponent(e(t))})).join(n):o+encodeURIComponent(e(t[i]))})).join(n):i?encodeURIComponent(e(i))+r+encodeURIComponent(e(t)):""}},17673:function(t,e,n){"use strict";e.decode=e.parse=n(62587),e.encode=e.stringify=n(12361)},94281:function(t){"use strict";var e={};function n(t,n,r){var i=function(t){var e,r;function i(e,r,i){return t.call(this,"string"==typeof n?n:n(e,r,i))||this}return r=t,(e=i).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r,i}(r=r||Error);i.prototype.name=r.name,i.prototype.code=t,e[t]=i}function r(t,e){var n;return Array.isArray(t)?(n=t.length,t=t.map((function(t){return String(t)})),2<n?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])):"of ".concat(e," ").concat(String(t))}n("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(t,e,n){var i,o,a,s,u;return"string"==typeof e&&(s="not ",e.substr(!a||a<0?0:+a,s.length)===s)?(i="must not be",e=e.replace(/^not /,"")):i="must be",a=t,s=" argument",(void 0===u||u>a.length)&&(u=a.length),a=(a.substring(u-s.length,u)===s?"The ".concat(t," "):(u=(o="number"!=typeof o?0:o)+(a=".").length>(u=t).length||-1===u.indexOf(a,o)?"argument":"property",'The "'.concat(t,'" ').concat(u," "))).concat(i," ").concat(r(e,"type")),a+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.q=e},56753:function(t,e,n){"use strict";var r=n(34155),i=Object.keys||function(t){var e,n=[];for(e in t)n.push(e);return n},o=(t.exports=l,n(79481)),a=n(64229);n(35717)(l,o);for(var s=i(a.prototype),u=0;u<s.length;u++){var c=s[u];l.prototype[c]||(l.prototype[c]=a.prototype[c])}function l(t){if(!(this instanceof l))return new l(t);o.call(this,t),a.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen)&&(this.allowHalfOpen=!1,this.once("end",h))}function h(){this._writableState.ended||r.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},82725:function(t,e,n){"use strict";t.exports=i;var r=n(74605);function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}n(35717)(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},79481:function(t,e,n){"use strict";function r(t,e){return t.listeners(e).length}var i,o,a,s,u=n(34155),c=((t.exports=S).ReadableState=w,n(17187).EventEmitter,n(22503)),l=n(48764).Buffer,h=n.g.Uint8Array||function(){},f=(t=n(94616),t&&t.debuglog?t.debuglog("stream"):function(){}),d=n(57327),p=(t=n(61195),n(82457).getHighWaterMark),g=n(94281).q,m=g.ERR_INVALID_ARG_TYPE,v=g.ERR_STREAM_PUSH_AFTER_EOF,y=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,x=(n(35717)(S,c),t.errorOrDestroy),_=["error","close","destroy","pause","resume"];function w(t,e,r){i=i||n(56753),t=t||{},"boolean"!=typeof r&&(r=e instanceof i),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=p(this,t,"readableHighWaterMark",r),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(o=o||n(32553).s,this.decoder=new o(t.encoding),this.encoding=t.encoding)}function S(t){if(i=i||n(56753),!(this instanceof S))return new S(t);var e=this instanceof i;this._readableState=new w(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy)&&(this._destroy=t.destroy),c.call(this)}function E(t,e,n,r,i){f("readableAddChunk",e);var o,a,s,u,c=t._readableState;if(null===e)c.reading=!1,a=t,s=c,f("onEofChunk"),s.ended||(s.decoder&&(u=s.decoder.end())&&u.length&&(s.buffer.push(u),s.length+=s.objectMode?1:u.length),s.ended=!0,s.sync?T(a):(s.needReadable=!1,s.emittedReadable||(s.emittedReadable=!0,k(a))));else if(o=i?o:function(t,e){var n;return!function(t){return l.isBuffer(t)||t instanceof h}(e)&&"string"!=typeof e&&void 0!==e&&!t.objectMode&&(n=new m("chunk",["string","Buffer","Uint8Array"],e)),n}(c,e))x(t,o);else if(c.objectMode||e&&0<e.length)if("string"==typeof e||c.objectMode||Object.getPrototypeOf(e)===l.prototype||(u=e,e=l.from(u)),r)c.endEmitted?x(t,new b):M(t,c,e,!0);else if(c.ended)x(t,new v);else{if(c.destroyed)return!1;c.reading=!1,!c.decoder||n||(e=c.decoder.write(e),c.objectMode)||0!==e.length?M(t,c,e,!1):O(t,c)}else r||(c.reading=!1,O(t,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function M(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&T(t)),O(t,e)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),S.prototype.destroy=t.destroy,S.prototype._undestroy=t.undestroy,S.prototype._destroy=function(t,e){e(t)},S.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=l.from(t,e),e=""),n=!0),E(this,t,e,!1,n)},S.prototype.unshift=function(t){return E(this,t,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){for(var e=new(o=o||n(32553).s)(t),r=(this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding,this._readableState.buffer.head),i="";null!==r;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var A=1073741824;function C(t,e){var n;return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?(e.flowing&&e.length?e.buffer.head.data:e).length:(t>e.highWaterMark&&(e.highWaterMark=(A<=(n=t)?n=A:(n--,n=(n=(n=(n=(n|=n>>>1)|n>>>2)|n>>>4)|n>>>8)|n>>>16,n++),n)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function T(t){var e=t._readableState;f("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,u.nextTick(k,t))}function k(t){var e=t._readableState;f("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,L(t)}function O(t,e){e.readingMore||(e.readingMore=!0,u.nextTick(P,t,e))}function P(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var n=e.length;if(f("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function I(t){var e=t._readableState;e.readableListening=0<t.listenerCount("readable"),e.resumeScheduled&&!e.paused?e.flowing=!0:0<t.listenerCount("data")&&t.resume()}function N(t){f("readable nexttick read 0"),t.read(0)}function D(t,e){f("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),L(t),e.flowing&&!e.reading&&t.read(0)}function L(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){var n;return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n)}function B(t){var e=t._readableState;f("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,u.nextTick(j,e,t))}function j(t,e){f("endReadableNT",t.endEmitted,t.length),t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy&&(!(t=e._writableState)||t.autoDestroy&&t.finished)&&e.destroy())}function F(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}S.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e,n=this._readableState,r=t;return 0!==t&&(n.emittedReadable=!1),0===t&&n.needReadable&&((0!==n.highWaterMark?n.length>=n.highWaterMark:0<n.length)||n.ended)?(f("read: emitReadable",n.length,n.ended),(0===n.length&&n.ended?B:T)(this),null):0===(t=C(t,n))&&n.ended?(0===n.length&&B(this),null):(e=n.needReadable,f("need readable",e),(0===n.length||n.length-t<n.highWaterMark)&&f("length less than watermark",e=!0),n.ended||n.reading?f("reading or ended",e=!1):e&&(f("do read"),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,n.reading||(t=C(r,n))),null===(e=0<t?R(t,n):null)?(n.needReadable=n.length<=n.highWaterMark,t=0):(n.length-=t,n.awaitDrain=0),0===n.length&&(n.ended||(n.needReadable=!0),r!==t)&&n.ended&&B(this),null!==e&&this.emit("data",e),e)},S.prototype._read=function(t){x(this,new y("_read()"))},S.prototype.pipe=function(t,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}function o(e,r){f("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,f("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),t.removeListener("drain",c),t.removeListener("error",d),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",m),n.removeListener("data",h),l=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function a(){f("onend"),t.end()}i.pipesCount+=1,f("pipe count=%d opts=%j",i.pipesCount,e),e=e&&!1===e.end||t===u.stdout||t===u.stderr?m:a,i.endEmitted?u.nextTick(e):n.once("end",e),t.on("unpipe",o),s=n;var s,c=function(){var t=s._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&r(s,"data")&&(t.flowing=!0,L(s))},l=(t.on("drain",c),!1);function h(e){f("ondata"),e=t.write(e),f("dest.write",e),!1===e&&((1===i.pipesCount&&i.pipes===t||1<i.pipesCount&&-1!==F(i.pipes,t))&&!l&&(f("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function d(e){f("onerror",e),m(),t.removeListener("error",d),0===r(t,"error")&&x(t,e)}function p(){t.removeListener("finish",g),m()}function g(){f("onfinish"),t.removeListener("close",p),m()}function m(){f("unpipe"),n.unpipe(t)}return n.on("data",h),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",d),t.once("close",p),t.once("finish",g),t.emit("pipe",n),i.flowing||(f("pipe resume"),n.resume()),t},S.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0!==e.pipesCount)if(1===e.pipesCount)t&&t!==e.pipes||(t=t||e.pipes,e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n));else if(t){var r=F(e.pipes,t);-1!==r&&(e.pipes.splice(r,1),--e.pipesCount,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n))}else{var i=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<o;a++)i[a].emit("unpipe",this,{hasUnpiped:!1})}return this},S.prototype.addListener=S.prototype.on=function(t,e){e=c.prototype.on.call(this,t,e);var n=this._readableState;return"data"===t?(n.readableListening=0<this.listenerCount("readable"),!1!==n.flowing&&this.resume()):"readable"!==t||n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,f("on readable",n.length,n.reading),n.length?T(this):n.reading||u.nextTick(N,this)),e},S.prototype.removeListener=function(t,e){return e=c.prototype.removeListener.call(this,t,e),"readable"===t&&u.nextTick(I,this),e},S.prototype.removeAllListeners=function(t){var e=c.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||u.nextTick(I,this),e},S.prototype.resume=function(){var t,e,n=this._readableState;return n.flowing||(f("resume"),n.flowing=!n.readableListening,t=this,(e=n).resumeScheduled)||(e.resumeScheduled=!0,u.nextTick(D,t,e)),n.paused=!1,this},S.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(t){var e,n=this,r=this._readableState,i=!1;for(e in t.on("end",(function(){var t;f("wrapped end"),r.decoder&&!r.ended&&(t=r.decoder.end())&&t.length&&n.push(t),n.push(null)})),t.on("data",(function(e){f("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&!n.push(e)&&(i=!0,t.pause())})),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var o=0;o<_.length;o++)t.on(_[o],this.emit.bind(this,_[o]));return this._read=function(e){f("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return(a=void 0===a?n(45850):a)(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),S._fromList=R,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(t,e){return(s=void 0===s?n(15167):s)(S,t,e)})},74605:function(t,e,n){"use strict";t.exports=u;t=n(94281).q;var r=t.ERR_METHOD_NOT_IMPLEMENTED,i=t.ERR_MULTIPLE_CALLBACK,o=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=t.ERR_TRANSFORM_WITH_LENGTH_0,s=n(56753);function u(t){if(!(this instanceof u))return new u(t);s.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState,r=(n.transforming=!1,n.writecb);if(null===r)return this.emit("error",new i);n.writechunk=null,(n.writecb=null)!=e&&this.push(e),r(t),(n=this._readableState).reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush)&&(this._flush=t.flush),this.on("prefinish",c)}function c(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?l(this,null,null):this._flush((function(e,n){l(t,e,n)}))}function l(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new a;if(t._transformState.transforming)throw new o;t.push(null)}n(35717)(u,s),u.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},u.prototype._transform=function(t,e,n){n(new r("_transform()"))},u.prototype._write=function(t,e,n){var r=this._transformState;r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming&&(n=this._readableState,r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)},u.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},u.prototype._destroy=function(t,e){s.prototype._destroy.call(this,t,(function(t){e(t)}))}},64229:function(t,e,n){"use strict";var r,i=n(34155);function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){var n=e,r=t,i=void 0,o=n.entry;for(n.entry=null;o;){var a=o.callback;r.pendingcb--,a(i),o=o.next}r.corkedRequestsFree.next=n}}(t.exports=E).WritableState=S;t={deprecate:n(94927)};var a,s=n(22503),u=n(48764).Buffer,c=n.g.Uint8Array||function(){},l=n(61195),h=n(82457).getHighWaterMark,f=n(94281).q,d=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,m=f.ERR_STREAM_CANNOT_PIPE,v=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,b=f.ERR_STREAM_WRITE_AFTER_END,x=f.ERR_UNKNOWN_ENCODING,_=l.errorOrDestroy;function w(){}function S(t,e,a){r=r||n(56753),t=t||{},"boolean"!=typeof a&&(a=e instanceof r),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=h(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,a=(this.destroyed=!1)===t.decodeStrings,this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){var n=e,r=n._writableState,o=r.sync,a=r.writecb;if("function"!=typeof a)throw new g;var s,u,c,l,h=r;h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0,t?(h=n,u=o,c=t,l=a,--(s=r).pendingcb,u?(i.nextTick(l,c),i.nextTick(O,h,s),h._writableState.errorEmitted=!0,_(h,c)):(l(c),h._writableState.errorEmitted=!0,_(h,c),O(h,s))):((t=T(r)||n.destroyed)||r.corked||r.bufferProcessing||!r.bufferedRequest||C(n,r),o?i.nextTick(A,n,r,t,a):A(n,r,t,a))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}n(35717)(E,s),S.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e};try{Object.defineProperty(S.prototype,"buffer",{get:t.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}function E(t){var e=this instanceof(r=r||n(56753));if(!e&&!a.call(E,this))return new E(t);this._writableState=new S(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final)&&(this._final=t.final),s.call(this)}function M(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new v("write")):n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function A(t,e,n,r){var i;n||(n=t,0===(i=e).length&&i.needDrain&&(i.needDrain=!1,n.emit("drain"))),e.pendingcb--,r(),O(t,e)}function C(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){for(var r=e.bufferedRequestCount,i=new Array(r),a=(r=e.corkedRequestsFree,r.entry=n,0),s=!0;n;)(i[a]=n).isBuf||(s=!1),n=n.next,a+=1;i.allBuffers=s,M(t,e,!0,e.length,i,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,l=n.callback;if(M(t,e,!1,e.objectMode?1:u.length,u,c,l),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function T(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function k(t,e){t._final((function(n){e.pendingcb--,n&&_(t,n),e.prefinished=!0,t.emit("prefinish"),O(t,e)}))}function O(t,e){var n,r,o=T(e);return o&&(n=t,(r=e).prefinished||r.finalCalled||("function"!=typeof n._final||r.destroyed?(r.prefinished=!0,n.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,i.nextTick(k,n,r))),0===e.pendingcb)&&(e.finished=!0,t.emit("finish"),e.autoDestroy)&&(!(n=t._readableState)||n.autoDestroy&&n.endEmitted)&&t.destroy(),o}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(t){return!!a.call(this,t)||this===E&&t&&t._writableState instanceof S}})):a=function(t){return t instanceof this},E.prototype.pipe=function(){_(this,new m)},E.prototype.write=function(t,e,n){var r,o,a,s=this._writableState,l=!1,h=!s.objectMode&&(h=t,u.isBuffer(h)||h instanceof c);return h&&!u.isBuffer(t)&&(r=t,t=u.from(r)),"function"==typeof e&&(n=e,e=null),e=h?"buffer":e||s.defaultEncoding,"function"!=typeof n&&(n=w),s.ending?(r=this,o=n,a=new b,_(r,a),i.nextTick(o,a)):(h||function(t,e,n,r){var o;if(null===n?o=new y:"string"==typeof n||e.objectMode||(o=new d("chunk",["string","Buffer"],n)),!o)return 1;_(t,o),i.nextTick(r,o)}(this,s,t,n))&&(s.pendingcb++,l=function(t,e,n,r,i,o){n||(s=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,n)),e}(e,r,i),r!==s&&(n=!0,i="buffer",r=s));var a,s=e.objectMode?1:r.length,c=(e.length+=s,e.length<e.highWaterMark);return c||(e.needDrain=!0),e.writing||e.corked?(a=e.lastBufferedRequest,e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},a?a.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1):M(t,e,!1,s,r,i,o),c}(this,s,h,t,e,n)),l},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||C(this,t))},E.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase()))return this._writableState.defaultEncoding=t,this;throw new x(t)},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(t,e,n){n(new p("_write()"))},E.prototype._writev=null,E.prototype.end=function(t,e,n){var r=this._writableState;return"function"==typeof t?(n=t,e=t=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||(t=this,e=r,r=n,e.ending=!0,O(t,e),r&&(e.finished?i.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),E.prototype.destroy=l.destroy,E.prototype._undestroy=l.undestroy,E.prototype._destroy=function(t,e){e(t)}},45850:function(t,e,n){"use strict";var r,i=n(34155);function o(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}var a=n(8610),s=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),h=Symbol("lastPromise"),f=Symbol("handlePromise"),d=Symbol("stream");function p(t,e){return{value:t,done:e}}function g(t){var e,n=t[s];null!==n&&null!==(e=t[d].read())&&(t[h]=null,t[s]=null,t[u]=null,n(p(e,!1)))}n=Object.getPrototypeOf((function(){}));var m=Object.setPrototypeOf((o(r={get stream(){return this[d]},next:function(){var t=this,e=this[c];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise((function(e,n){i.nextTick((function(){t[c]?n(t[c]):e(p(void 0,!0))}))}));var n,r,o;e=this[h];if(e)n=new Promise((r=e,o=this,function(t,e){r.then((function(){o[l]?t(p(void 0,!0)):o[f](t,e)}),e)}));else{if(e=this[d].read(),null!==e)return Promise.resolve(p(e,!1));n=new Promise(this[f])}return this[h]=n}},Symbol.asyncIterator,(function(){return this})),o(r,"return",(function(){var t=this;return new Promise((function(e,n){t[d].destroy(null,(function(t){t?n(t):e(p(void 0,!0))}))}))})),r),n);t.exports=function(t){var e,n=Object.create(m,(o(e={},d,{value:t,writable:!0}),o(e,s,{value:null,writable:!0}),o(e,u,{value:null,writable:!0}),o(e,c,{value:null,writable:!0}),o(e,l,{value:t._readableState.endEmitted,writable:!0}),o(e,f,{value:function(t,e){var r=n[d].read();r?(n[h]=null,n[s]=null,n[u]=null,t(p(r,!1))):(n[s]=t,n[u]=e)},writable:!0}),e));return n[h]=null,a(t,(function(t){var e;t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code?(null!==(e=n[u])&&(n[h]=null,n[s]=null,n[u]=null,e(t)),n[c]=t):(null!==(e=n[s])&&(n[h]=null,n[s]=null,e(p(void 0,!(n[u]=null)))),n[l]=!0)})),t.on("readable",function(t){i.nextTick(g,t)}.bind(null,n)),n}},57327:function(t,e,n){"use strict";function r(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){var r,i;r=t,i=n[e],e in r?Object.defineProperty(r,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[e]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=n(48764).Buffer,s=n(52361).inspect,u=s&&s.custom||"inspect";t.exports=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}var e,n,r;return e=t,(n=[{key:"push",value:function(t){t={data:t,next:null},0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(t){t={data:t,next:this.head},0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){var t;if(0!==this.length)return t=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return a.alloc(0);for(var e,n,r=a.allocUnsafe(t>>>0),i=this.head,o=0;i;)e=i.data,n=o,a.prototype.copy.call(e,r,n),o+=i.data.length,i=i.next;return r}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,r=e.data;for(t-=r.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?r+=i:r+=i.slice(0,t),0===(t-=o)){o===i.length?(++n,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e).data=i.slice(o);break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(t){var e=a.allocUnsafe(t),n=this.head,r=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0===(t-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n).data=i.slice(o);break}++r}return this.length-=r,e}},{key:u,value:function(t,e){return s(this,i({},e,{depth:0,customInspect:!1}))}}])&&o(e.prototype,n),r&&o(e,r),t}()},61195:function(t,e,n){"use strict";var r=n(34155);function i(t,e){a(t,e),o(t)}function o(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function a(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(a,this,t)):r.nextTick(a,this,t)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?n._writableState?n._writableState.errorEmitted?r.nextTick(o,n):(n._writableState.errorEmitted=!0,r.nextTick(i,n,t)):r.nextTick(i,n,t):e?(r.nextTick(o,n),e(t)):r.nextTick(o,n)}))),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}},8610:function(t,e,n){"use strict";var r=n(94281).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,n,o){var a,s,u,c,l,h,f,d,p,g,m,v,y;return"function"==typeof n?t(e,null,n):(a=o||i,s=!1,o=function(){if(!s){s=!0;for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a.apply(this,e)}},u=(n=n||{}).readable||!1!==n.readable&&e.readable,c=n.writable||!1!==n.writable&&e.writable,l=function(){e.writable||f()},h=e._writableState&&e._writableState.finished,f=function(){h=!(c=!1),u||o.call(e)},d=e._readableState&&e._readableState.endEmitted,p=function(){d=!(u=!1),c||o.call(e)},g=function(t){o.call(e,t)},m=function(){var t;return u&&!d?(e._readableState&&e._readableState.ended||(t=new r),o.call(e,t)):c&&!h?(e._writableState&&e._writableState.ended||(t=new r),o.call(e,t)):void 0},v=function(){e.req.on("finish",f)},(y=e).setHeader&&"function"==typeof y.abort?(e.on("complete",f),e.on("abort",m),e.req?v():e.on("request",v)):c&&!e._writableState&&(e.on("end",l),e.on("close",l)),e.on("end",p),e.on("finish",f),!1!==n.error&&e.on("error",g),e.on("close",m),function(){e.removeListener("complete",f),e.removeListener("abort",m),e.removeListener("request",v),e.req&&e.req.removeListener("finish",f),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",f),e.removeListener("end",p),e.removeListener("error",g),e.removeListener("close",m)})}},15167:function(t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},59946:function(t,e,n){"use strict";var r,i=n(94281).q,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function u(t,e,i,o){s=o,u=!1;var s,u,c=!(o=function(){u||(u=!0,s.apply(void 0,arguments))}),l=(t.on("close",(function(){c=!0})),(r=void 0===r?n(8610):r)(t,{readable:e,writable:i},(function(t){if(t)return o(t);c=!0,o()})),!1);return function(e){var n;if(!c&&!l)return l=!0,(n=t).setHeader&&"function"==typeof n.abort?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function c(t){t()}function l(t,e){return t.pipe(e)}t.exports=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i,a=(r=e).length&&"function"==typeof r[r.length-1]?r.pop():s;if((e=Array.isArray(e[0])?e[0]:e).length<2)throw new o("streams");var h=e.map((function(t,n){var r=n<e.length-1;return u(t,r,0<n,(function(t){i=i||t,t&&h.forEach(c),r||(h.forEach(c),a(i))}))}));return e.reduce(l)}},82457:function(t,e,n){"use strict";var r=n(94281).q.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,n,i){a=i,o=n;var o,a=null!=e.highWaterMark?e.highWaterMark:a?e[o]:null;if(null==a)return t.objectMode?16:16384;if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new r(i?n:"highWaterMark",a);return Math.floor(a)}}},22503:function(t,e,n){t.exports=n(17187).EventEmitter},88473:function(t,e,n){(((e=t.exports=n(79481)).Stream=e).Readable=e).Writable=n(64229),e.Duplex=n(56753),e.Transform=n(74605),e.PassThrough=n(82725),e.finished=n(8610),e.pipeline=n(59946)},28660:function(t,e,n){var r,i=n(34155);
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */r={},function(){var t,e,o,a,s,u,c,l,h,f="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),d=P(r);function p(t,e,n){var r=h.get(t);if(x(r)){if(!n)return;r=new c,h.set(t,r)}if(t=r.get(e),x(t)){if(!n)return;t=new c,r.set(e,t)}return t}function g(t,e,n){return e=p(e,n,!1),!x(e)&&!!e.has(t)}function m(t,e,n){if(e=p(e,n,!1),!x(e))return e.get(t)}function v(t,e,n,r){p(n,r,!0).set(t,e)}function y(t,e){var n=[];t=p(t,e,!1);if(x(t))return n;for(var r,i,a=function(t){var e=T(t,o);if(A(e)&&(e=e.call(t),w(e)))return e;throw new TypeError}(t.keys()),s=0;;){var u=function(t){return t=t.next(),!t.done&&t}(a);if(!u)return n.length=s,n;u=u.value;try{n[s]=u}catch(t){try{i=void 0,(i=(r=a).return)&&i.call(r)}finally{throw t}}s++}}function b(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function x(t){return void 0===t}function _(t){return null===t}function w(t){return"object"==typeof t?null!==t:"function"==typeof t}function S(t,n){switch(b(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}n=3===n?"string":5===n?"number":"default";var r=T(t,e);if(void 0===r){var i=t;if("string"===(s="default"==n?"number":n)){if(s=i.toString,A(s)&&!w(a=s.call(i)))return a;var o=i.valueOf;if(A(o)&&!w(a=o.call(i)))return a}else{if(o=i.valueOf,A(o)&&!w(a=o.call(i)))return a;var a,s=i.toString;if(A(s)&&!w(a=s.call(i)))return a}throw new TypeError}if(o=r.call(t,n),w(o))throw new TypeError;return o}function E(t){return t=S(t,3),"symbol"==typeof t?t:""+t}function M(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function A(t){return"function"==typeof t}function C(t){return"function"==typeof t}function T(t,e){if(t=t[e],null!=t){if(A(t))return t;throw new TypeError}}function k(t){var e,n=Object.getPrototypeOf(t);return"function"!=typeof t||t===s||n!==s||null==(e=(e=t.prototype)&&Object.getPrototypeOf(e))||e===Object.prototype||"function"!=typeof(e=e.constructor)||e===t?n:e}function O(t){return t.__=void 0,delete t.__,t}function P(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===f.Reflect?f.Reflect=r:d=P(f.Reflect,d),f=d,t=Object.prototype.hasOwnProperty,d="function"==typeof Symbol,e=d&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=d&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",d="function"==typeof Object.create,u={__proto__:[]}instanceof Array,a={create:d?function(){return O(Object.create(null))}:u?function(){return O({__proto__:null})}:function(){return O({})},has:(d=!d&&!u)?function(e,n){return t.call(e,n)}:function(t,e){return e in t},get:d?function(e,n){return t.call(e,n)?e[n]:void 0}:function(t,e){return t[e]}},s=Object.getPrototypeOf(Function),c=(u="object"==typeof i&&"true"==={NODE_ENV:"production",BASE_URL:""}.REFLECT_METADATA_USE_MAP_POLYFILL)||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t,n=this._index;return 0<=n&&n<this._keys.length?(t=this._selector(this._keys[n],this._values[n]),n+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:t,done:!1}):{value:void 0,done:!0}},t.prototype.throw=function(t){throw 0<=this._index&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return 0<=this._index&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();function r(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(r.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),r.prototype.has=function(t){return 0<=this._find(t,!1)},r.prototype.get=function(t){return t=this._find(t,!1),0<=t?this._values[t]:void 0},r.prototype.set=function(t,e){return t=this._find(t,!0),this._values[t]=e,this},r.prototype.delete=function(e){var n=this._find(e,!1);if(0<=n){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},r.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},r.prototype.keys=function(){return new n(this._keys,this._values,i)},r.prototype.values=function(){return new n(this._keys,this._values,a)},r.prototype.entries=function(){return new n(this._keys,this._values,s)},r.prototype["@@iterator"]=function(){return this.entries()},r.prototype[o]=function(){return this.entries()},r.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},r;function i(t,e){return t}function a(t,e){return e}function s(t,e){return[t,e]}}():Map,l=u||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new c}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}():Set,h=new(u||"function"!=typeof WeakMap?function(){var e=16,n=a.create(),r=o();function i(){this._key=o()}return i.prototype.has=function(t){return t=s(t,!1),void 0!==t&&a.has(t,this._key)},i.prototype.get=function(t){return t=s(t,!1),void 0!==t?a.get(t,this._key):void 0},i.prototype.set=function(t,e){return s(t,!0)[this._key]=e,this},i.prototype.delete=function(t){return t=s(t,!1),void 0!==t&&delete t[this._key]},i.prototype.clear=function(){this._key=o()},i;function o(){for(var t;t="@@WeakMap@@"+function(){for(var t=function(t){return"function"!=typeof Uint8Array?u(new Array(t),t):"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):u(new Uint8Array(t),t)}(e),n=(t[6]=79&t[6]|64,t[8]=191&t[8]|128,""),r=0;r<e;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}(),a.has(n,t););return n[t]=!0,t}function s(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:a.create()})}return e[r]}function u(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}}():WeakMap),f("decorate",(function(t,e,n,r){if(x(n)){if(M(t)&&C(e))return function(t,e){for(var n=t.length-1;0<=n;--n){var r=(0,t[n])(e);if(!x(r)&&!_(r)){if(!C(r))throw new TypeError;e=r}}return e}(t,e)}else if(M(t)&&w(e)&&(w(r)||x(r)||_(r)))return _(r)&&(r=void 0),n=E(n),function(t,e,n,r){for(var i=t.length-1;0<=i;--i){var o=(0,t[i])(e,n,r);if(!x(o)&&!_(o)){if(!w(o))throw new TypeError;r=o}}return r}(t,e,n,r);throw new TypeError})),f("metadata",(function(t,e){return function(n,r){if(!w(n))throw new TypeError;if(!x(r)&&!function(t){switch(b(t)){case 3:case 4:return 1;default:return}}(r))throw new TypeError;v(t,e,n,r)}})),f("defineMetadata",(function(t,e,n,r){if(!w(n))throw new TypeError;return x(r)||(r=E(r)),v(t,e,n,r)})),f("hasMetadata",(function(t,e,n){if(!w(e))throw new TypeError;return x(n)||(n=E(n)),function t(e,n,r){var i=g(e,n,r);return!!i||(i=k(n),!_(i)&&t(e,i,r))}(t,e,n)})),f("hasOwnMetadata",(function(t,e,n){if(!w(e))throw new TypeError;return x(n)||(n=E(n)),g(t,e,n)})),f("getMetadata",(function(t,e,n){if(!w(e))throw new TypeError;return x(n)||(n=E(n)),function t(e,n,r){var i=g(e,n,r);return i?m(e,n,r):(i=k(n),_(i)?void 0:t(e,i,r))}(t,e,n)})),f("getOwnMetadata",(function(t,e,n){if(!w(e))throw new TypeError;return x(n)||(n=E(n)),m(t,e,n)})),f("getMetadataKeys",(function(t,e){if(!w(t))throw new TypeError;return x(e)||(e=E(e)),function t(e,n){var r=y(e,n);if(e=k(e),null===e)return r;if(e=t(e,n),e.length<=0)return r;if(r.length<=0)return e;for(var i=new l,o=[],a=0,s=r;a<s.length;a++){var u=s[a];i.has(u)||(i.add(u),o.push(u))}for(var c=0,h=e;c<h.length;c++)u=h[c],i.has(u)||(i.add(u),o.push(u));return o}(t,e)})),f("getOwnMetadataKeys",(function(t,e){if(!w(t))throw new TypeError;return x(e)||(e=E(e)),y(t,e)})),f("deleteMetadata",(function(t,e,n){if(!w(e))throw new TypeError;x(n)||(n=E(n));var r=p(e,n,!1);return!x(r)&&!!r.delete(t)&&(0<r.size||((t=h.get(e)).delete(n),0<t.size)||h.delete(e),!0)}))}()},81550:function(t){t.exports=function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t},n="\n";function r(t){return"undefined"!==typeof atob?atob(t):"base64:"+t}function i(t){var e=new Error("(regl) "+t);throw console.error(e),e}function o(t,e){t||i(e)}function a(t){return t?": "+t:""}function s(t,e,n){t in e||i("unknown parameter ("+t+")"+a(n)+". possible values: "+Object.keys(e).join())}function u(e,n){t(e)||i("invalid parameter type"+a(n)+". must be a typed array")}function c(t,e){switch(e){case"number":return"number"===typeof t;case"object":return"object"===typeof t;case"string":return"string"===typeof t;case"boolean":return"boolean"===typeof t;case"function":return"function"===typeof t;case"undefined":return"undefined"===typeof t;case"symbol":return"symbol"===typeof t}}function l(t,e,n){c(t,e)||i("invalid parameter type"+a(n)+". expected "+e+", got "+typeof t)}function h(t,e){t>=0&&(0|t)===t||i("invalid parameter type, ("+t+")"+a(e)+". must be a nonnegative integer")}function f(t,e,n){e.indexOf(t)<0&&i("invalid value"+a(n)+". must be one of: "+e)}var d=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function p(t){Object.keys(t).forEach((function(t){d.indexOf(t)<0&&i('invalid regl constructor argument "'+t+'". must be one of '+d)}))}function g(t,e){t+="";while(t.length<e)t=" "+t;return t}function m(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function v(t,e){this.number=t,this.line=e,this.errors=[]}function y(t,e,n){this.file=t,this.line=e,this.message=n}function b(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function x(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function _(t,e){var n=t.split("\n"),i=1,o=0,a={unknown:new m,0:new m};a.unknown.name=a[0].name=e||b(),a.unknown.lines.push(new v(0,""));for(var s=0;s<n.length;++s){var u=n[s],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(c)switch(c[1]){case"line":var l=/(\d+)(\s+\d+)?/.exec(c[2]);l&&(i=0|l[1],l[2]&&(o=0|l[2],o in a||(a[o]=new m)));break;case"define":var h=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);h&&(a[o].name=h[1]?r(h[2]):h[2]);break}a[o].lines.push(new v(i++,u))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function w(t){var e=[];return t.split("\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t);n?e.push(new y(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new y("unknown",0,t))}})),e}function S(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}function E(t,e,r,i,a){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(e),u=i===t.FRAGMENT_SHADER?"fragment":"vertex";P(r,"string",u+" shader source must be a string",a);var c=_(r,a),l=w(s);S(c,l),Object.keys(c).forEach((function(t){var e=c[t];if(e.hasErrors){var r=[""],i=[""];o("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(g(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+n,"color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(r){var i=r.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(a){var s=a[1];switch(i=a[2],s){case"assign":s="=";break}e=Math.max(t.line.indexOf(s,e),0)}else e=0;o(g("| ",6)),o(g("^^^",e+3)+n,"font-weight:bold"),o(g("| ",6)),o(i+n,"font-weight:bold")})),o(g("| ",6)+n)}else o(g(t.number,4)+"|  "),o(t.line+n,"color:red")})),"undefined"===typeof document||window.chrome?console.log(r.join("")):(i[0]=r.join("%c"),console.log.apply(console,i))}function o(t,e){r.push(t),i.push(e||"")}})),o.raise("Error compiling "+u+" shader, "+c[0].name)}}function M(t,e,r,i,a){if(!t.getProgramParameter(e,t.LINK_STATUS)){var s=t.getProgramInfoLog(e),u=_(r,a),c=_(i,a),l='Error linking program with vertex shader, "'+c[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!==typeof document?console.log("%c"+l+n+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(l+n+s),o.raise(l)}}function A(t){t._commandRef=b()}function C(t,e,n,r){function i(t){return t?r.id(t):0}function o(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}A(t),t._fragId=i(t.static.frag),t._vertId=i(t.static.vert);var a=t._uniformSet={};o(a,e.static),o(a,e.dynamic);var s=t._attributeSet={};o(s,n.static),o(s,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic}function T(t,e){var n=x();i(t+" in command "+(e||b())+("unknown"===n?"":" called from "+n))}function k(t,e,n){t||T(e,n||b())}function O(t,e,n,r){t in e||T("unknown parameter ("+t+")"+a(n)+". possible values: "+Object.keys(e).join(),r||b())}function P(t,e,n,r){c(t,e)||T("invalid parameter type"+a(n)+". expected "+e+", got "+typeof t,r||b())}function I(t){t()}function N(t,e,n){t.texture?f(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):f(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}var D=33071,L=9728,R=9984,B=9985,j=9986,F=9987,z=5122,U=5123,G=5124,V=5125,W=5126,H=32819,Y=32820,q=33635,X=34042,K=36193,Z={};function $(t,e){return t===Y||t===H||t===q?2:t===X?4:Z[t]*e}function J(t){return!(t&t-1)&&!!t}function Q(t,e,n){var r,i=e.width,a=e.height,s=e.channels;o(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),t.wrapS===D&&t.wrapT===D||o(J(i)&&J(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==i&&1!==a&&o(t.minFilter!==R&&t.minFilter!==j&&t.minFilter!==B&&t.minFilter!==F,"min filter requires mipmap"):(o(J(i)&&J(a),"texture must be a square power of 2 to support mipmapping"),o(e.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),e.type===W&&(n.extensions.indexOf("oes_texture_float_linear")<0&&o(t.minFilter===L&&t.magFilter===L,"filter not supported, must enable oes_texture_float_linear"),o(!t.genMipmaps,"mipmap generation not supported with float textures"));var u=e.images;for(r=0;r<16;++r)if(u[r]){var c=i>>r,l=a>>r;o(e.mipmask&1<<r,"missing mipmap data");var h=u[r];if(o(h.width===c&&h.height===l,"invalid shape for mip images"),o(h.format===e.format&&h.internalformat===e.internalformat&&h.type===e.type,"incompatible type for mip image"),h.compressed);else if(h.data){var f=Math.ceil($(h.type,s)*c/h.unpackAlignment)*h.unpackAlignment;o(h.data.byteLength===f*l,"invalid data for image, buffer size is inconsistent with image format")}else h.element||h.copy}else t.genMipmaps||o(0===(e.mipmask&1<<r),"extra mipmap data");e.compressed&&o(!t.genMipmaps,"mipmap generation for compressed images not supported")}function tt(t,e,n,r){var i=t.width,a=t.height,s=t.channels;o(i>0&&i<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),o(i===a,"cube map must be square"),o(e.wrapS===D&&e.wrapT===D,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var c=n[u];o(c.width===i&&c.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(o(!c.compressed,"can not generate mipmap for compressed textures"),o(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var l=c.images,h=0;h<16;++h){var f=l[h];if(f){var d=i>>h,p=a>>h;o(c.mipmask&1<<h,"missing mipmap data"),o(f.width===d&&f.height===p,"invalid shape for mip images"),o(f.format===t.format&&f.internalformat===t.internalformat&&f.type===t.type,"incompatible type for mip image"),f.compressed||(f.data?o(f.data.byteLength===d*p*Math.max($(f.type,s),f.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):f.element||f.copy)}}}}Z[5120]=Z[5121]=1,Z[z]=Z[U]=Z[K]=Z[q]=Z[H]=Z[Y]=2,Z[G]=Z[V]=Z[W]=Z[X]=4;var et=e(o,{optional:I,raise:i,commandRaise:T,command:k,parameter:s,commandParameter:O,constructor:p,type:l,commandType:P,isTypedArray:u,nni:h,oneOf:f,shaderError:E,linkError:M,callSite:x,saveCommandRef:A,saveDrawInfo:C,framebufferFormat:N,guessCommand:b,texture2D:Q,textureCube:tt}),nt=0,rt=0,it=5,ot=6;function at(t,e){this.id=nt++,this.type=t,this.data=e}function st(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ut(t){if(0===t.length)return[];var e=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&e===n&&('"'===e||"'"===e))return['"'+st(t.substr(1,t.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return ut(t.substr(0,r.index)).concat(ut(r[1])).concat(ut(t.substr(r.index+r[0].length)));var i=t.split(".");if(1===i.length)return['"'+st(t)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(ut(i[a]));return o}function ct(t){return"["+ut(t).join("][")+"]"}function lt(t,e){return new at(t,ct(e+""))}function ht(t){return"function"===typeof t&&!t._reglType||t instanceof at}function ft(t,e){return"function"===typeof t?new at(rt,t):"number"===typeof t||"boolean"===typeof t?new at(it,t):Array.isArray(t)?new at(ot,t.map(((t,n)=>ft(t,e+"["+n+"]")))):t instanceof at?t:void et(!1,"invalid option type in uniform "+e)}var dt={DynamicVariable:at,define:lt,isDynamic:ht,unbox:ft,accessor:ct},pt={next:"function"===typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"===typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},gt="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function mt(){var t={"":0},e=[""];return{id:function(n){var r=t[n];return r||(r=t[n]=e.length,e.push(n),r)},str:function(t){return e[t]}}}function vt(t,n,r){var i,o=document.createElement("canvas");function a(){var n=window.innerWidth,i=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,i=a.bottom-a.top}o.width=r*n,o.height=r*i,e(o.style,{width:n+"px",height:i+"px"})}function s(){i?i.disconnect():window.removeEventListener("resize",a),t.removeChild(o)}return e(o.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(o),t===document.body&&(o.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"===typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(a)})),i.observe(t)):window.addEventListener("resize",a,!1),a(),{canvas:o,onDestroy:s}}function yt(t,e){function n(n){try{return t.getContext(n,e)}catch(n){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function bt(t){return"string"===typeof t.nodeName&&"function"===typeof t.appendChild&&"function"===typeof t.getBoundingClientRect}function xt(t){return"function"===typeof t.drawArrays||"function"===typeof t.drawElements}function _t(t){return"string"===typeof t?t.split():(et(Array.isArray(t),"invalid extension array"),t)}function wt(t){return"string"===typeof t?(et("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function St(t){var e,n,r,i,o=t||{},a={},s=[],u=[],c="undefined"===typeof window?1:window.devicePixelRatio,l=!1,h=function(t){t&&et.raise(t)},f=function(){};if("string"===typeof o?(et("undefined"!==typeof document,"selector queries only supported in DOM enviroments"),e=document.querySelector(o),et(e,"invalid query string for element")):"object"===typeof o?bt(o)?e=o:xt(o)?(i=o,r=i.canvas):(et.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=wt(o.canvas):"container"in o&&(n=wt(o.container)),"attributes"in o&&(a=o.attributes,et.type(a,"object","invalid context attributes")),"extensions"in o&&(s=_t(o.extensions)),"optionalExtensions"in o&&(u=_t(o.optionalExtensions)),"onDone"in o&&(et.type(o.onDone,"function","invalid or missing onDone callback"),h=o.onDone),"profile"in o&&(l=!!o.profile),"pixelRatio"in o&&(c=+o.pixelRatio,et(c>0,"invalid pixel ratio"))):et.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?r=e:n=e),!i){if(!r){et("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");var d=vt(n||document.body,h,c);if(!d)return null;r=d.canvas,f=d.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0),i=yt(r,a)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:u,pixelRatio:c,profile:l,onDone:h,onDestroy:f}:(f(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Et(t,e){var n={};function r(e){et.type(e,"string","extension name must be string");var r,i=e.toLowerCase();try{r=n[i]=t.getExtension(i)}catch(e){}return!!r}for(var i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!r(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}function Mt(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}var At=5120,Ct=5121,Tt=5122,kt=5123,Ot=5124,Pt=5125,It=5126;function Nt(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}function Dt(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,e|=n,e|t>>1}function Lt(){var t=Mt(8,(function(){return[]}));function e(e){var n=Nt(e),r=t[Dt(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[Dt(e.byteLength)>>2].push(e)}function r(t,n){var r=null;switch(t){case At:r=new Int8Array(e(n),0,n);break;case Ct:r=new Uint8Array(e(n),0,n);break;case Tt:r=new Int16Array(e(2*n),0,n);break;case kt:r=new Uint16Array(e(2*n),0,n);break;case Ot:r=new Int32Array(e(4*n),0,n);break;case Pt:r=new Uint32Array(e(4*n),0,n);break;case It:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function i(t){n(t.buffer)}return{alloc:e,free:n,allocType:r,freeType:i}}var Rt=Lt(),Bt=(Rt.zero=Lt(),3408),jt=3410,Ft=3411,zt=3412,Ut=3413,Gt=3414,Vt=3415,Wt=33901,Ht=33902,Yt=3379,qt=3386,Xt=34921,Kt=36347,Zt=36348,$t=35661,Jt=35660,Qt=34930,te=36349,ee=34076,ne=34024,re=7936,ie=7937,oe=7938,ae=35724,se=34047,ue=36063,ce=34852,le=3553,he=34067,fe=34069,de=33984,pe=6408,ge=5126,me=5121,ve=36160,ye=36053,be=36064,xe=16384,_e=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(se));var r=1,i=1;e.webgl_draw_buffers&&(r=t.getParameter(ce),i=t.getParameter(ue));var o=!!e.oes_texture_float;if(o){var a=t.createTexture();t.bindTexture(le,a),t.texImage2D(le,0,pe,1,1,0,pe,ge,null);var s=t.createFramebuffer();if(t.bindFramebuffer(ve,s),t.framebufferTexture2D(ve,be,le,a,0),t.bindTexture(le,null),t.checkFramebufferStatus(ve)!==ye)o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(xe);var u=Rt.allocType(ge,4);t.readPixels(0,0,1,1,pe,ge,u),t.getError()?o=!1:(t.deleteFramebuffer(s),t.deleteTexture(a),o=1===u[0]),Rt.freeType(u)}}var c="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),l=!0;if(!c){var h=t.createTexture(),f=Rt.allocType(me,36);t.activeTexture(de),t.bindTexture(he,h),t.texImage2D(fe,0,pe,3,3,0,pe,me,f),Rt.freeType(f),t.bindTexture(he,null),t.deleteTexture(h),l=!t.getError()}return{colorBits:[t.getParameter(jt),t.getParameter(Ft),t.getParameter(zt),t.getParameter(Ut)],depthBits:t.getParameter(Gt),stencilBits:t.getParameter(Vt),subpixelBits:t.getParameter(Bt),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(Wt),lineWidthDims:t.getParameter(Ht),maxViewportDims:t.getParameter(qt),maxCombinedTextureUnits:t.getParameter($t),maxCubeMapSize:t.getParameter(ee),maxRenderbufferSize:t.getParameter(ne),maxTextureUnits:t.getParameter(Qt),maxTextureSize:t.getParameter(Yt),maxAttributes:t.getParameter(Xt),maxVertexUniforms:t.getParameter(Kt),maxVertexTextureUnits:t.getParameter(Jt),maxVaryingVectors:t.getParameter(Zt),maxFragmentUniforms:t.getParameter(te),glsl:t.getParameter(ae),renderer:t.getParameter(ie),vendor:t.getParameter(re),version:t.getParameter(oe),readFloat:o,npotTextureCube:l}};function we(e){return!!e&&"object"===typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"===typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}var Se=function(t){return Object.keys(t).map((function(e){return t[e]}))},Ee={shape:Oe,flatten:ke};function Me(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}function Ae(t,e,n,r){for(var i=0,o=0;o<e;++o)for(var a=t[o],s=0;s<n;++s)r[i++]=a[s]}function Ce(t,e,n,r,i,o){for(var a=o,s=0;s<e;++s)for(var u=t[s],c=0;c<n;++c)for(var l=u[c],h=0;h<r;++h)i[a++]=l[h]}function Te(t,e,n,r,i){for(var o=1,a=n+1;a<e.length;++a)o*=e[a];var s=e[n];if(e.length-n===4){var u=e[n+1],c=e[n+2],l=e[n+3];for(a=0;a<s;++a)Ce(t[a],u,c,l,r,i),i+=o}else for(a=0;a<s;++a)Te(t[a],e,n+1,r,i),i+=o}function ke(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;var a=r||Rt.allocType(n,i);switch(e.length){case 0:break;case 1:Me(t,e[0],a);break;case 2:Ae(t,e[0],e[1],a);break;case 3:Ce(t,e[0],e[1],e[2],a,0);break;default:Te(t,e,0,a,0)}return a}function Oe(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e}var Pe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ie={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ne={dynamic:35048,stream:35040,static:35044},De=Ee.flatten,Le=Ee.shape,Re=35044,Be=35040,je=5121,Fe=5126,ze=[];function Ue(t){return 0|Pe[Object.prototype.toString.call(t)]}function Ge(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function Ve(t,e,n,r,i,o,a){for(var s=0,u=0;u<n;++u)for(var c=0;c<r;++c)t[s++]=e[i*u+o*c+a]}function We(e,n,r,i){var o=0,a={};function s(t){this.id=o++,this.buffer=e.createBuffer(),this.type=t,this.usage=Re,this.byteLength=0,this.dimension=1,this.dtype=je,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){d(this)};var u=[];function c(t,e){var n=u.pop();return n||(n=new s(t)),n.bind(),f(n,e,Be,0,1,!1),n}function l(t){u.push(t)}function h(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function f(e,n,r,i,o,a){var s,u;if(e.usage=r,Array.isArray(n)){if(e.dtype=i||Fe,n.length>0)if(Array.isArray(n[0])){s=Le(n);for(var c=1,l=1;l<s.length;++l)c*=s[l];e.dimension=c,u=De(n,s,e.dtype),h(e,u,r),a?e.persistentData=u:Rt.freeType(u)}else if("number"===typeof n[0]){e.dimension=o;var f=Rt.allocType(e.dtype,n.length);Ge(f,n),h(e,f,r),a?e.persistentData=f:Rt.freeType(f)}else t(n[0])?(e.dimension=n[0].length,e.dtype=i||Ue(n[0])||Fe,u=De(n,[n.length,n[0].length],e.dtype),h(e,u,r),a?e.persistentData=u:Rt.freeType(u)):et.raise("invalid buffer data")}else if(t(n))e.dtype=i||Ue(n),e.dimension=o,h(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(we(n)){s=n.shape;var d=n.stride,p=n.offset,g=0,m=0,v=0,y=0;1===s.length?(g=s[0],m=1,v=d[0],y=0):2===s.length?(g=s[0],m=s[1],v=d[0],y=d[1]):et.raise("invalid shape"),e.dtype=i||Ue(n.data)||Fe,e.dimension=m;var b=Rt.allocType(e.dtype,g*m);Ve(b,n.data,g,m,v,y,p),h(e,b,r),a?e.persistentData=b:Rt.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=je,e.dimension=o,h(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):et.raise("invalid buffer data")}function d(t){n.bufferCount--,i(t);var r=t.buffer;et(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete a[t.id]}function p(i,o,u,c){n.bufferCount++;var l=new s(o);function h(n){var i=Re,o=null,a=0,s=0,u=1;return Array.isArray(n)||t(n)||we(n)||n instanceof ArrayBuffer?o=n:"number"===typeof n?a=0|n:n&&(et.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(et(null===o||Array.isArray(o)||t(o)||we(o),"invalid data for buffer"),o=n.data),"usage"in n&&(et.parameter(n.usage,Ne,"invalid buffer usage"),i=Ne[n.usage]),"type"in n&&(et.parameter(n.type,Ie,"invalid buffer type"),s=Ie[n.type]),"dimension"in n&&(et.type(n.dimension,"number","invalid dimension"),u=0|n.dimension),"length"in n&&(et.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),l.bind(),o?f(l,o,i,s,u,c):(a&&e.bufferData(l.type,a,i),l.dtype=s||je,l.usage=i,l.dimension=u,l.byteLength=a),r.profile&&(l.stats.size=l.byteLength*ze[l.dtype]),h}function p(t,n){et(n+t.byteLength<=l.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+l.byteLength),e.bufferSubData(l.type,n,t)}function g(e,n){var r,i=0|(n||0);if(l.bind(),t(e)||e instanceof ArrayBuffer)p(e,i);else if(Array.isArray(e)){if(e.length>0)if("number"===typeof e[0]){var o=Rt.allocType(l.dtype,e.length);Ge(o,e),p(o,i),Rt.freeType(o)}else if(Array.isArray(e[0])||t(e[0])){r=Le(e);var a=De(e,r,l.dtype);p(a,i),Rt.freeType(a)}else et.raise("invalid buffer data")}else if(we(e)){r=e.shape;var s=e.stride,u=0,c=0,f=0,d=0;1===r.length?(u=r[0],c=1,f=s[0],d=0):2===r.length?(u=r[0],c=r[1],f=s[0],d=s[1]):et.raise("invalid shape");var g=Array.isArray(e.data)?l.dtype:Ue(e.data),m=Rt.allocType(g,u*c);Ve(m,e.data,u,c,f,d,e.offset),p(m,i),Rt.freeType(m)}else et.raise("invalid data for buffer subdata");return h}return a[l.id]=l,u||h(i),h._reglType="buffer",h._buffer=l,h.subdata=g,r.profile&&(h.stats=l.stats),h.destroy=function(){d(l)},h}function g(){Se(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:p,createStream:c,destroyStream:l,clear:function(){Se(a).forEach(d),u.forEach(d)},getBuffer:function(t){return t&&t._buffer instanceof s?t._buffer:null},restore:g,_initBuffer:f}}ze[5120]=1,ze[5122]=2,ze[5124]=4,ze[5121]=1,ze[5123]=2,ze[5125]=4;var He={points:0,point:0,lines:1,line:1,triangles:ze[5126]=4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ye=0,qe=1,Xe=4,Ke=5120,Ze=5121,$e=5122,Je=5123,Qe=5124,tn=5125,en=34963,nn=35040,rn=35044;function on(e,n,r,i){var o={},a=0,s={uint8:Ze,uint16:Je};function u(t){this.id=a++,o[this.id]=this,this.buffer=t,this.primType=Xe,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=tn),u.prototype.bind=function(){this.buffer.bind()};var c=[];function l(t){var e=c.pop();return e||(e=new u(r.create(null,en,!0,!1)._buffer)),f(e,t,nn,-1,-1,0,0),e}function h(t){c.push(t)}function f(i,o,a,s,u,c,l){var h;if(i.buffer.bind(),o){var f=l;l||t(o)&&(!we(o)||t(o.data))||(f=n.oes_element_index_uint?tn:Je),r._initBuffer(i.buffer,o,a,f,3)}else e.bufferData(en,c,a),i.buffer.dtype=h||Ze,i.buffer.usage=a,i.buffer.dimension=3,i.buffer.byteLength=c;if(h=l,!l){switch(i.buffer.dtype){case Ze:case Ke:h=Ze;break;case Je:case $e:h=Je;break;case tn:case Qe:h=tn;break;default:et.raise("unsupported type for element array")}i.buffer.dtype=h}i.type=h,et(h!==tn||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var d=u;d<0&&(d=i.buffer.byteLength,h===Je?d>>=1:h===tn&&(d>>=2)),i.vertCount=d;var p=s;if(s<0){p=Xe;var g=i.buffer.dimension;1===g&&(p=Ye),2===g&&(p=qe),3===g&&(p=Xe)}i.primType=p}function d(t){i.elementsCount--,et(null!==t.buffer,"must not double destroy elements"),delete o[t.id],t.buffer.destroy(),t.buffer=null}function p(e,n){var o=r.create(null,en,!0),a=new u(o._buffer);function c(e){if(e)if("number"===typeof e)o(e),a.primType=Xe,a.vertCount=0|e,a.type=Ze;else{var n=null,r=rn,i=-1,u=-1,l=0,h=0;Array.isArray(e)||t(e)||we(e)?n=e:(et.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,et(Array.isArray(n)||t(n)||we(n),"invalid data for element buffer")),"usage"in e&&(et.parameter(e.usage,Ne,"invalid element buffer usage"),r=Ne[e.usage]),"primitive"in e&&(et.parameter(e.primitive,He,"invalid element buffer primitive"),i=He[e.primitive]),"count"in e&&(et("number"===typeof e.count&&e.count>=0,"invalid vertex count for elements"),u=0|e.count),"type"in e&&(et.parameter(e.type,s,"invalid buffer type"),h=s[e.type]),"length"in e?l=0|e.length:(l=u,h===Je||h===$e?l*=2:h!==tn&&h!==Qe||(l*=4))),f(a,n,r,i,u,l,h)}else o(),a.primType=Xe,a.vertCount=0,a.type=Ze;return c}return i.elementsCount++,c(e),c._reglType="elements",c._elements=a,c.subdata=function(t,e){return o.subdata(t,e),c},c.destroy=function(){d(a)},c}return{create:p,createStream:l,destroyStream:h,getElements:function(t){return"function"===typeof t&&t._elements instanceof u?t._elements:null},clear:function(){Se(o).forEach(d)}}}var an=new Float32Array(1),sn=new Uint32Array(an.buffer),un=5123;function cn(t){for(var e=Rt.allocType(un,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{an[0]=t[n];var r=sn[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)e[n]=i;else if(o<-14){var s=-14-o;e[n]=i+(a+1024>>s)}else e[n]=o>15?i+31744:i+(o+15<<10)+a}return e}function ln(e){return Array.isArray(e)||t(e)}var hn=function(t){return!(t&t-1)&&!!t},fn=34467,dn=3553,pn=34067,gn=34069,mn=6408,vn=6406,yn=6407,bn=6409,xn=6410,_n=32854,wn=32855,Sn=36194,En=32819,Mn=32820,An=33635,Cn=34042,Tn=6402,kn=34041,On=35904,Pn=35906,In=36193,Nn=33776,Dn=33777,Ln=33778,Rn=33779,Bn=35986,jn=35987,Fn=34798,zn=35840,Un=35841,Gn=35842,Vn=35843,Wn=36196,Hn=5121,Yn=5123,qn=5125,Xn=5126,Kn=10242,Zn=10243,$n=10497,Jn=33071,Qn=33648,tr=10240,er=10241,nr=9728,rr=9729,ir=9984,or=9985,ar=9986,sr=9987,ur=33170,cr=4352,lr=4353,hr=4354,fr=34046,dr=3317,pr=37440,gr=37441,mr=37443,vr=37444,yr=33984,br=[ir,ar,or,sr],xr=[0,bn,xn,yn,mn],_r={};function wr(t){return"[object "+t+"]"}_r[bn]=_r[vn]=_r[Tn]=1,_r[kn]=_r[xn]=2,_r[yn]=_r[On]=3,_r[mn]=_r[Pn]=4;var Sr=wr("HTMLCanvasElement"),Er=wr("OffscreenCanvas"),Mr=wr("CanvasRenderingContext2D"),Ar=wr("ImageBitmap"),Cr=wr("HTMLImageElement"),Tr=wr("HTMLVideoElement"),kr=Object.keys(Pe).concat([Sr,Er,Mr,Ar,Cr,Tr]),Or=[],Pr=(Or[Hn]=1,Or[Xn]=4,Or[In]=2,Or[Yn]=2,Or[qn]=4,[]);function Ir(t){return Array.isArray(t)&&(0===t.length||"number"===typeof t[0])}function Nr(t){if(!Array.isArray(t))return!1;var e=t.length;return!(0===e||!ln(t[0]))}function Dr(t){return Object.prototype.toString.call(t)}function Lr(t){return Dr(t)===Sr}function Rr(t){return Dr(t)===Er}function Br(t){return Dr(t)===Mr}function jr(t){return Dr(t)===Ar}function Fr(t){return Dr(t)===Cr}function zr(t){return Dr(t)===Tr}function Ur(t){if(!t)return!1;var e=Dr(t);return kr.indexOf(e)>=0||(Ir(t)||Nr(t)||we(t))}function Gr(t){return 0|Pe[Object.prototype.toString.call(t)]}function Vr(t,e){var n=e.length;switch(t.type){case Hn:case Yn:case qn:case Xn:var r=Rt.allocType(t.type,n);r.set(e),t.data=r;break;case In:t.data=cn(e);break;default:et.raise("unsupported texture type, must specify a typed array")}}function Wr(t,e){return Rt.allocType(t.type===In?Xn:t.type,e)}function Hr(t,e){t.type===In?(t.data=cn(e),Rt.freeType(e)):t.data=e}function Yr(t,e,n,r,i,o){for(var a=t.width,s=t.height,u=t.channels,c=a*s*u,l=Wr(t,c),h=0,f=0;f<s;++f)for(var d=0;d<a;++d)for(var p=0;p<u;++p)l[h++]=e[n*d+r*f+i*p+o];Hr(t,l)}function qr(t,e,n,r,i,o){var a;if(a="undefined"!==typeof Pr[t]?Pr[t]:_r[t]*Or[e],o&&(a*=6),i){var s=0,u=n;while(u>=1)s+=a*u*u,u/=2;return s}return a*n*r}function Xr(n,r,i,o,a,s,u){var c={"don't care":cr,"dont care":cr,nice:hr,fast:lr},l={repeat:$n,clamp:Jn,mirror:Qn},h={nearest:nr,linear:rr},f=e({mipmap:sr,"nearest mipmap nearest":ir,"linear mipmap nearest":or,"nearest mipmap linear":ar,"linear mipmap linear":sr},h),d={none:0,browser:vr},p={uint8:Hn,rgba4:En,rgb565:An,"rgb5 a1":Mn},g={alpha:vn,luminance:bn,"luminance alpha":xn,rgb:yn,rgba:mn,rgba4:_n,"rgb5 a1":wn,rgb565:Sn},m={};r.ext_srgb&&(g.srgb=On,g.srgba=Pn),r.oes_texture_float&&(p.float32=p.float=Xn),r.oes_texture_half_float&&(p["float16"]=p["half float"]=In),r.webgl_depth_texture&&(e(g,{depth:Tn,"depth stencil":kn}),e(p,{uint16:Yn,uint32:qn,"depth stencil":Cn})),r.webgl_compressed_texture_s3tc&&e(m,{"rgb s3tc dxt1":Nn,"rgba s3tc dxt1":Dn,"rgba s3tc dxt3":Ln,"rgba s3tc dxt5":Rn}),r.webgl_compressed_texture_atc&&e(m,{"rgb atc":Bn,"rgba atc explicit alpha":jn,"rgba atc interpolated alpha":Fn}),r.webgl_compressed_texture_pvrtc&&e(m,{"rgb pvrtc 4bppv1":zn,"rgb pvrtc 2bppv1":Un,"rgba pvrtc 4bppv1":Gn,"rgba pvrtc 2bppv1":Vn}),r.webgl_compressed_texture_etc1&&(m["rgb etc1"]=Wn);var v=Array.prototype.slice.call(n.getParameter(fn));Object.keys(m).forEach((function(t){var e=m[t];v.indexOf(e)>=0&&(g[t]=e)}));var y=Object.keys(g);i.textureFormats=y;var b=[];Object.keys(g).forEach((function(t){var e=g[t];b[e]=t}));var x=[];Object.keys(p).forEach((function(t){var e=p[t];x[e]=t}));var _=[];Object.keys(h).forEach((function(t){var e=h[t];_[e]=t}));var w=[];Object.keys(f).forEach((function(t){var e=f[t];w[e]=t}));var S=[];Object.keys(l).forEach((function(t){var e=l[t];S[e]=t}));var E=y.reduce((function(t,e){var n=g[e];return n===bn||n===vn||n===bn||n===xn||n===Tn||n===kn||r.ext_srgb&&(n===On||n===Pn)?t[n]=n:n===wn||e.indexOf("rgba")>=0?t[n]=mn:t[n]=yn,t}),{});function M(){this.internalformat=mn,this.format=mn,this.type=Hn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=vr,this.width=0,this.height=0,this.channels=0}function A(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function C(t,e){if("object"===typeof e&&e){if("premultiplyAlpha"in e&&(et.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(et.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(et.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(et.parameter(e.colorSpace,d,"invalid colorSpace"),t.colorSpace=d[e.colorSpace]),"type"in e){var n=e.type;et(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),et(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),et(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),et.parameter(n,p,"invalid texture type"),t.type=p[n]}var o=t.width,a=t.height,s=t.channels,u=!1;"shape"in e?(et(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),o=e.shape[0],a=e.shape[1],3===e.shape.length&&(s=e.shape[2],et(s>0&&s<=4,"invalid number of channels"),u=!0),et(o>=0&&o<=i.maxTextureSize,"invalid width"),et(a>=0&&a<=i.maxTextureSize,"invalid height")):("radius"in e&&(o=a=e.radius,et(o>=0&&o<=i.maxTextureSize,"invalid radius")),"width"in e&&(o=e.width,et(o>=0&&o<=i.maxTextureSize,"invalid width")),"height"in e&&(a=e.height,et(a>=0&&a<=i.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,et(s>0&&s<=4,"invalid number of channels"),u=!0)),t.width=0|o,t.height=0|a,t.channels=0|s;var c=!1;if("format"in e){var l=e.format;et(r.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),et.parameter(l,g,"invalid texture format");var h=t.internalformat=g[l];t.format=E[h],l in p&&("type"in e||(t.type=p[l])),l in m&&(t.compressed=!0),c=!0}!u&&c?t.channels=_r[t.format]:u&&!c?t.channels!==xr[t.format]&&(t.format=t.internalformat=xr[t.channels]):c&&u&&et(t.channels===_r[t.format],"number of channels inconsistent with specified format")}}function T(t){n.pixelStorei(pr,t.flipY),n.pixelStorei(gr,t.premultiplyAlpha),n.pixelStorei(mr,t.colorSpace),n.pixelStorei(dr,t.unpackAlignment)}function k(){M.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function O(e,n){var r=null;if(Ur(n)?r=n:n&&(et.type(n,"object","invalid pixel data type"),C(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),Ur(n.data)&&(r=n.data)),et(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){et(!r,"can not specify copy and data field for the same texture");var o=a.viewportWidth,s=a.viewportHeight;e.width=e.width||o-e.xOffset,e.height=e.height||s-e.yOffset,e.needsCopy=!0,et(e.xOffset>=0&&e.xOffset<o&&e.yOffset>=0&&e.yOffset<s&&e.width>0&&e.width<=o&&e.height>0&&e.height<=s,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||e.type!==Hn||(e.type=Gr(r));else if(Ir(r))e.channels=e.channels||4,Vr(e,r),e.alignment=1,e.needsFree=!0;else if(we(r)){var u=r.data;Array.isArray(u)||e.type!==Hn||(e.type=Gr(u));var c,l,h,f,d,p,g=r.shape,m=r.stride;3===g.length?(h=g[2],p=m[2]):(et(2===g.length,"invalid ndarray pixel data, must be 2 or 3D"),h=1,p=1),c=g[0],l=g[1],f=m[0],d=m[1],e.alignment=1,e.width=c,e.height=l,e.channels=h,e.format=e.internalformat=xr[h],e.needsFree=!0,Yr(e,u,f,d,p,r.offset)}else if(Lr(r)||Rr(r)||Br(r))Lr(r)||Rr(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(jr(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(Fr(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(zr(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(Nr(r)){var v=e.width||r[0].length,y=e.height||r.length,b=e.channels;b=ln(r[0][0])?b||r[0][0].length:b||1;for(var x=Ee.shape(r),_=1,w=0;w<x.length;++w)_*=x[w];var S=Wr(e,_);Ee.flatten(r,x,"",S),Hr(e,S),e.alignment=1,e.width=v,e.height=y,e.channels=b,e.format=e.internalformat=xr[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===Xn?et(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===In&&et(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function P(t,e,r){var i=t.element,a=t.data,s=t.internalformat,u=t.format,c=t.type,l=t.width,h=t.height;T(t),i?n.texImage2D(e,r,u,u,c,i):t.compressed?n.compressedTexImage2D(e,r,s,l,h,0,a):t.needsCopy?(o(),n.copyTexImage2D(e,r,u,t.xOffset,t.yOffset,l,h,0)):n.texImage2D(e,r,u,l,h,0,u,c,a||null)}function I(t,e,r,i,a){var s=t.element,u=t.data,c=t.internalformat,l=t.format,h=t.type,f=t.width,d=t.height;T(t),s?n.texSubImage2D(e,a,r,i,l,h,s):t.compressed?n.compressedTexSubImage2D(e,a,r,i,c,f,d,u):t.needsCopy?(o(),n.copyTexSubImage2D(e,a,r,i,t.xOffset,t.yOffset,f,d)):n.texSubImage2D(e,a,r,i,f,d,l,h,u)}var N=[];function D(){return N.pop()||new k}function L(t){t.needsFree&&Rt.freeType(t.data),k.call(t),N.push(t)}function R(){M.call(this),this.genMipmaps=!1,this.mipmapHint=cr,this.mipmask=0,this.images=Array(16)}function B(t,e,n){var r=t.images[0]=D();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function j(t,e){var n=null;if(Ur(e))n=t.images[0]=D(),A(n,t),O(n,e),t.mipmask=1;else if(C(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)n=t.images[i]=D(),A(n,t),n.width>>=i,n.height>>=i,O(n,r[i]),t.mipmask|=1<<i;else n=t.images[0]=D(),A(n,t),O(n,e),t.mipmask=1;A(t,t.images[0]),!t.compressed||t.internalformat!==Nn&&t.internalformat!==Dn&&t.internalformat!==Ln&&t.internalformat!==Rn||et(t.width%4===0&&t.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function F(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;P(n[r],e,r)}}var z=[];function U(){var t=z.pop()||new R;M.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function G(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&L(e[n]),e[n]=null;z.push(t)}function V(){this.minFilter=nr,this.magFilter=nr,this.wrapS=Jn,this.wrapT=Jn,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=cr}function W(t,e){if("min"in e){var n=e.min;et.parameter(n,f),t.minFilter=f[n],br.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;et.parameter(r,h),t.magFilter=h[r]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var s=e.wrap;"string"===typeof s?(et.parameter(s,l),o=a=l[s]):Array.isArray(s)&&(et.parameter(s[0],l),et.parameter(s[1],l),o=l[s[0]],a=l[s[1]])}else{if("wrapS"in e){var u=e.wrapS;et.parameter(u,l),o=l[u]}if("wrapT"in e){var d=e.wrapT;et.parameter(d,l),a=l[d]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var p=e.anisotropic;et("number"===typeof p&&p>=1&&p<=i.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var g=!1;switch(typeof e.mipmap){case"string":et.parameter(e.mipmap,c,"invalid mipmap hint"),t.mipmapHint=c[e.mipmap],t.genMipmaps=!0,g=!0;break;case"boolean":g=t.genMipmaps=e.mipmap;break;case"object":et(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,g=!0;break;default:et.raise("invalid mipmap type")}g&&!("min"in e)&&(t.minFilter=ir)}}function H(t,e){n.texParameteri(e,er,t.minFilter),n.texParameteri(e,tr,t.magFilter),n.texParameteri(e,Kn,t.wrapS),n.texParameteri(e,Zn,t.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(e,fr,t.anisotropic),t.genMipmaps&&(n.hint(ur,t.mipmapHint),n.generateMipmap(e))}var Y=0,q={},X=i.maxTextureUnits,K=Array(X).map((function(){return null}));function Z(t){M.call(this),this.mipmask=0,this.internalformat=mn,this.id=Y++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new V,u.profile&&(this.stats={size:0})}function $(t){n.activeTexture(yr),n.bindTexture(t.target,t.texture)}function J(){var t=K[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(dn,null)}function Q(t){var e=t.texture;et(e,"must not double destroy texture");var r=t.unit,i=t.target;r>=0&&(n.activeTexture(yr+r),n.bindTexture(i,null),K[r]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete q[t.id],s.textureCount--}function tt(t,e){var r=new Z(dn);function o(t,e){var n=r.texInfo;V.call(n);var a=U();return"number"===typeof t?B(a,0|t,"number"===typeof e?0|e:0|t):t?(et.type(t,"object","invalid arguments to regl.texture"),W(n,t),j(a,t)):B(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,A(r,a),et.texture2D(n,a,i),r.internalformat=a.internalformat,o.width=a.width,o.height=a.height,$(r),F(a,dn),H(n,dn),J(),G(a),u.profile&&(r.stats.size=qr(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),o.format=b[r.internalformat],o.type=x[r.type],o.mag=_[n.magFilter],o.min=w[n.minFilter],o.wrapS=S[n.wrapS],o.wrapT=S[n.wrapT],o}function a(t,e,n,i){et(!!t,"must specify image data");var a=0|e,s=0|n,u=0|i,c=D();return A(c,r),c.width=0,c.height=0,O(c,t),c.width=c.width||(r.width>>u)-a,c.height=c.height||(r.height>>u)-s,et(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),et(a>=0&&s>=0&&a+c.width<=r.width&&s+c.height<=r.height,"texture.subimage write out of bounds"),et(r.mipmask&1<<u,"missing mipmap data"),et(c.data||c.element||c.needsCopy,"missing image data"),$(r),I(c,dn,a,s,u),J(),L(c),o}function c(t,e){var i=0|t,a=0|e||i;if(i===r.width&&a===r.height)return o;o.width=r.width=i,o.height=r.height=a,$(r);for(var s=0;r.mipmask>>s;++s){var c=i>>s,l=a>>s;if(!c||!l)break;n.texImage2D(dn,s,r.format,c,l,0,r.format,r.type,null)}return J(),u.profile&&(r.stats.size=qr(r.internalformat,r.type,i,a,!1,!1)),o}return q[r.id]=r,s.textureCount++,o(t,e),o.subimage=a,o.resize=c,o._reglType="texture2d",o._texture=r,u.profile&&(o.stats=r.stats),o.destroy=function(){r.decRef()},o}function nt(t,e,r,o,a,c){var l=new Z(pn);q[l.id]=l,s.cubeCount++;var h=new Array(6);function f(t,e,n,r,o,a){var s,c=l.texInfo;for(V.call(c),s=0;s<6;++s)h[s]=U();if("number"!==typeof t&&t)if("object"===typeof t)if(e)j(h[0],t),j(h[1],e),j(h[2],n),j(h[3],r),j(h[4],o),j(h[5],a);else if(W(c,t),C(l,t),"faces"in t){var d=t.faces;for(et(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),s=0;s<6;++s)et("object"===typeof d[s]&&!!d[s],"invalid input for cube map face"),A(h[s],l),j(h[s],d[s])}else for(s=0;s<6;++s)j(h[s],t);else et.raise("invalid arguments to cube map");else{var p=0|t||1;for(s=0;s<6;++s)B(h[s],p,p)}for(A(l,h[0]),i.npotTextureCube||et(hn(l.width)&&hn(l.height),"your browser does not support non power or two texture dimensions"),c.genMipmaps?l.mipmask=(h[0].width<<1)-1:l.mipmask=h[0].mipmask,et.textureCube(l,c,h,i),l.internalformat=h[0].internalformat,f.width=h[0].width,f.height=h[0].height,$(l),s=0;s<6;++s)F(h[s],gn+s);for(H(c,pn),J(),u.profile&&(l.stats.size=qr(l.internalformat,l.type,f.width,f.height,c.genMipmaps,!0)),f.format=b[l.internalformat],f.type=x[l.type],f.mag=_[c.magFilter],f.min=w[c.minFilter],f.wrapS=S[c.wrapS],f.wrapT=S[c.wrapT],s=0;s<6;++s)G(h[s]);return f}function d(t,e,n,r,i){et(!!e,"must specify image data"),et("number"===typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|n,a=0|r,s=0|i,u=D();return A(u,l),u.width=0,u.height=0,O(u,e),u.width=u.width||(l.width>>s)-o,u.height=u.height||(l.height>>s)-a,et(l.type===u.type&&l.format===u.format&&l.internalformat===u.internalformat,"incompatible format for texture.subimage"),et(o>=0&&a>=0&&o+u.width<=l.width&&a+u.height<=l.height,"texture.subimage write out of bounds"),et(l.mipmask&1<<s,"missing mipmap data"),et(u.data||u.element||u.needsCopy,"missing image data"),$(l),I(u,gn+t,o,a,s),J(),L(u),f}function p(t){var e=0|t;if(e!==l.width){f.width=l.width=e,f.height=l.height=e,$(l);for(var r=0;r<6;++r)for(var i=0;l.mipmask>>i;++i)n.texImage2D(gn+r,i,l.format,e>>i,e>>i,0,l.format,l.type,null);return J(),u.profile&&(l.stats.size=qr(l.internalformat,l.type,f.width,f.height,!1,!0)),f}}return f(t,e,r,o,a,c),f.subimage=d,f.resize=p,f._reglType="textureCube",f._texture=l,u.profile&&(f.stats=l.stats),f.destroy=function(){l.decRef()},f}function rt(){for(var t=0;t<X;++t)n.activeTexture(yr+t),n.bindTexture(dn,null),K[t]=null;Se(q).forEach(Q),s.cubeCount=0,s.textureCount=0}function it(){for(var t=0;t<X;++t){var e=K[t];e&&(e.bindCount=0,e.unit=-1,K[t]=null)}Se(q).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!==(t.mipmask&1<<e))if(t.target===dn)n.texImage2D(dn,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)n.texImage2D(gn+r,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);H(t.texInfo,t.target)}))}function ot(){for(var t=0;t<X;++t){var e=K[t];e&&(e.bindCount=0,e.unit=-1,K[t]=null),n.activeTexture(yr+t),n.bindTexture(dn,null),n.bindTexture(pn,null)}}return e(Z.prototype,{bind:function(){var t=this;t.bindCount+=1;var e=t.unit;if(e<0){for(var r=0;r<X;++r){var i=K[r];if(i){if(i.bindCount>0)continue;i.unit=-1}K[r]=t,e=r;break}e>=X&&et.raise("insufficient number of texture units"),u.profile&&s.maxTextureUnits<e+1&&(s.maxTextureUnits=e+1),t.unit=e,n.activeTexture(yr+e),n.bindTexture(t.target,t.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Q(this)}}),u.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(q).forEach((function(e){t+=q[e].stats.size})),t}),{create2D:tt,createCube:nt,clear:rt,getTexture:function(t){return null},restore:it,refresh:ot}}Pr[_n]=2,Pr[wn]=2,Pr[Sn]=2,Pr[kn]=4,Pr[Nn]=.5,Pr[Dn]=.5,Pr[Ln]=1,Pr[Rn]=1,Pr[Bn]=.5,Pr[jn]=1,Pr[Fn]=1,Pr[zn]=.5,Pr[Un]=.25,Pr[Gn]=.5,Pr[Vn]=.25,Pr[Wn]=.5;var Kr=36161,Zr=32854,$r=32855,Jr=36194,Qr=33189,ti=36168,ei=34041,ni=35907,ri=34836,ii=34842,oi=34843,ai=[];function si(t,e,n){return ai[t]*e*n}ai[Zr]=2,ai[$r]=2,ai[Jr]=2,ai[Qr]=2,ai[ti]=1,ai[ei]=4,ai[ni]=4,ai[ri]=16,ai[ii]=8,ai[oi]=6;var ui=function(t,e,n,r,i){var o={rgba4:Zr,rgb565:Jr,"rgb5 a1":$r,depth:Qr,stencil:ti,"depth stencil":ei};e.ext_srgb&&(o["srgba"]=ni),e.ext_color_buffer_half_float&&(o["rgba16f"]=ii,o["rgb16f"]=oi),e.webgl_color_buffer_float&&(o["rgba32f"]=ri);var a=[];Object.keys(o).forEach((function(t){var e=o[t];a[e]=t}));var s=0,u={};function c(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=Zr,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function l(e){var n=e.renderbuffer;et(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(Kr,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete u[e.id],r.renderbufferCount--}function h(e,s){var l=new c(t.createRenderbuffer());function h(e,r){var s=0,u=0,c=Zr;if("object"===typeof e&&e){var f=e;if("shape"in f){var d=f.shape;et(Array.isArray(d)&&d.length>=2,"invalid renderbuffer shape"),s=0|d[0],u=0|d[1]}else"radius"in f&&(s=u=0|f.radius),"width"in f&&(s=0|f.width),"height"in f&&(u=0|f.height);"format"in f&&(et.parameter(f.format,o,"invalid renderbuffer format"),c=o[f.format])}else"number"===typeof e?(s=0|e,u="number"===typeof r?0|r:s):e?et.raise("invalid arguments to renderbuffer constructor"):s=u=1;if(et(s>0&&u>0&&s<=n.maxRenderbufferSize&&u<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==l.width||u!==l.height||c!==l.format)return h.width=l.width=s,h.height=l.height=u,l.format=c,t.bindRenderbuffer(Kr,l.renderbuffer),t.renderbufferStorage(Kr,c,s,u),et(0===t.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=si(l.format,l.width,l.height)),h.format=a[l.format],h}function f(e,r){var o=0|e,a=0|r||o;return o===l.width&&a===l.height||(et(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),h.width=l.width=o,h.height=l.height=a,t.bindRenderbuffer(Kr,l.renderbuffer),t.renderbufferStorage(Kr,l.format,o,a),et(0===t.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=si(l.format,l.width,l.height))),h}return u[l.id]=l,r.renderbufferCount++,h(e,s),h.resize=f,h._reglType="renderbuffer",h._renderbuffer=l,i.profile&&(h.stats=l.stats),h.destroy=function(){l.decRef()},h}function f(){Se(u).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(Kr,e.renderbuffer),t.renderbufferStorage(Kr,e.format,e.width,e.height)})),t.bindRenderbuffer(Kr,null)}return c.prototype.decRef=function(){--this.refCount<=0&&l(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(u).forEach((function(e){t+=u[e].stats.size})),t}),{create:h,clear:function(){Se(u).forEach(l)},restore:f}},ci=36160,li=36161,hi=3553,fi=34069,di=36064,pi=36096,gi=36128,mi=33306,vi=36053,yi=36054,bi=36055,xi=36057,_i=36061,wi=36193,Si=5121,Ei=5126,Mi=6407,Ai=6408,Ci=6402,Ti=[Mi,Ai],ki=[],Oi=(ki[Ai]=4,ki[Mi]=3,[]);Oi[Si]=1,Oi[Ei]=4,Oi[wi]=2;var Pi=33189,Ii=36168,Ni=34041,Di=[32854,32855,36194,35907,34842,34843,34836],Li={};function Ri(t,n,r,i,o,a){var s={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],c=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&c.push("srgba"),n.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&c.push("rgba32f");var l=["uint8"];function h(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,i=0;e?(r=e.width,i=e.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function f(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function d(t,e,n){if(t)if(t.texture){var r=t.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);et(i===e&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;et(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function p(e,n){n&&(n.texture?t.framebufferTexture2D(ci,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(ci,e,li,n.renderbuffer._renderbuffer.renderbuffer))}function g(t){var e=hi,n=null,r=null,i=t;"object"===typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),et.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,et(e===hi)):"textureCube"===o?(n=i,et(e>=fi&&e<fi+6,"invalid cube map target")):"renderbuffer"===o?(r=i,e=li):et.raise("invalid regl object for attachment"),new h(e,n,r)}function m(t,e,n,r,a){if(n){var s=i.create2D({width:t,height:e,format:r,type:a});return s._texture.refCount=0,new h(hi,s,null)}var u=o.create({width:t,height:e,format:r});return u._renderbuffer.refCount=0,new h(li,null,u)}function v(t){return t&&(t.texture||t.renderbuffer)}function y(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&l.push("half float","float16"),n.oes_texture_float&&l.push("float","float32");var b=0,x={};function _(){this.id=b++,x[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function w(t){t.colorAttachments.forEach(f),f(t.depthAttachment),f(t.stencilAttachment),f(t.depthStencilAttachment)}function S(e){var n=e.framebuffer;et(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,a.framebufferCount--,delete x[e.id]}function E(e){var n;t.bindFramebuffer(ci,e.framebuffer);var i=e.colorAttachments;for(n=0;n<i.length;++n)p(di+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(ci,di+n,hi,null,0);t.framebufferTexture2D(ci,mi,hi,null,0),t.framebufferTexture2D(ci,pi,hi,null,0),t.framebufferTexture2D(ci,gi,hi,null,0),p(pi,e.depthAttachment),p(gi,e.stencilAttachment),p(mi,e.depthStencilAttachment);var o=t.checkFramebufferStatus(ci);t.isContextLost()||o===vi||et.raise("framebuffer configuration not supported, status = "+Li[o]),t.bindFramebuffer(ci,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function M(t,i){var o=new _;function h(t,e){var i;et(s.next!==o,"can not update framebuffer which is currently in use");var a=0,f=0,p=!0,y=!0,b=null,x=!0,_="rgba",S="uint8",M=1,A=null,C=null,T=null,k=!1;if("number"===typeof t)a=0|t,f=0|e||a;else if(t){et.type(t,"object","invalid arguments for framebuffer");var O=t;if("shape"in O){var P=O.shape;et(Array.isArray(P)&&P.length>=2,"invalid shape for framebuffer"),a=P[0],f=P[1]}else"radius"in O&&(a=f=O.radius),"width"in O&&(a=O.width),"height"in O&&(f=O.height);("color"in O||"colors"in O)&&(b=O.color||O.colors,Array.isArray(b)&&et(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in O&&(M=0|O.colorCount,et(M>0,"invalid color buffer count")),"colorTexture"in O&&(x=!!O.colorTexture,_="rgba4"),"colorType"in O&&(S=O.colorType,x?(et(n.oes_texture_float||!("float"===S||"float32"===S),"you must enable OES_texture_float in order to use floating point framebuffer objects"),et(n.oes_texture_half_float||!("half float"===S||"float16"===S),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===S||"float16"===S?(et(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),_="rgba16f"):"float"!==S&&"float32"!==S||(et(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),_="rgba32f"),et.oneOf(S,l,"invalid color type")),"colorFormat"in O&&(_=O.colorFormat,u.indexOf(_)>=0?x=!0:c.indexOf(_)>=0?x=!1:x?et.oneOf(O.colorFormat,u,"invalid color format for texture"):et.oneOf(O.colorFormat,c,"invalid color format for renderbuffer"))),("depthTexture"in O||"depthStencilTexture"in O)&&(k=!(!O.depthTexture&&!O.depthStencilTexture),et(!k||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in O&&("boolean"===typeof O.depth?p=O.depth:(A=O.depth,y=!1)),"stencil"in O&&("boolean"===typeof O.stencil?y=O.stencil:(C=O.stencil,p=!1)),"depthStencil"in O&&("boolean"===typeof O.depthStencil?p=y=O.depthStencil:(T=O.depthStencil,p=!1,y=!1))}else a=f=1;var I=null,N=null,D=null,L=null;if(Array.isArray(b))I=b.map(g);else if(b)I=[g(b)];else for(I=new Array(M),i=0;i<M;++i)I[i]=m(a,f,x,_,S);et(n.webgl_draw_buffers||I.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),et(I.length<=r.maxColorAttachments,"too many color attachments, not supported"),a=a||I[0].width,f=f||I[0].height,A?N=g(A):p&&!y&&(N=m(a,f,k,"depth","uint32")),C?D=g(C):y&&!p&&(D=m(a,f,!1,"stencil","uint8")),T?L=g(T):!A&&!C&&y&&p&&(L=m(a,f,k,"depth stencil","depth stencil")),et(!!A+!!C+!!T<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var R=null;for(i=0;i<I.length;++i)if(d(I[i],a,f),et(!I[i]||I[i].texture&&Ti.indexOf(I[i].texture._texture.format)>=0||I[i].renderbuffer&&Di.indexOf(I[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),I[i]&&I[i].texture){var B=ki[I[i].texture._texture.format]*Oi[I[i].texture._texture.type];null===R?R=B:et(R===B,"all color attachments much have the same number of bits per pixel.")}return d(N,a,f),et(!N||N.texture&&N.texture._texture.format===Ci||N.renderbuffer&&N.renderbuffer._renderbuffer.format===Pi,"invalid depth attachment for framebuffer object"),d(D,a,f),et(!D||D.renderbuffer&&D.renderbuffer._renderbuffer.format===Ii,"invalid stencil attachment for framebuffer object"),d(L,a,f),et(!L||L.texture&&L.texture._texture.format===Ni||L.renderbuffer&&L.renderbuffer._renderbuffer.format===Ni,"invalid depth-stencil attachment for framebuffer object"),w(o),o.width=a,o.height=f,o.colorAttachments=I,o.depthAttachment=N,o.stencilAttachment=D,o.depthStencilAttachment=L,h.color=I.map(v),h.depth=v(N),h.stencil=v(D),h.depthStencil=v(L),h.width=o.width,h.height=o.height,E(o),h}function f(t,e){et(s.next!==o,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===o.width&&r===o.height)return h;for(var i=o.colorAttachments,a=0;a<i.length;++a)y(i[a],n,r);return y(o.depthAttachment,n,r),y(o.stencilAttachment,n,r),y(o.depthStencilAttachment,n,r),o.width=h.width=n,o.height=h.height=r,E(o),h}return a.framebufferCount++,h(t,i),e(h,{resize:f,_reglType:"framebuffer",_framebuffer:o,destroy:function(){S(o),w(o)},use:function(t){s.setFBO({framebuffer:h},t)}})}function A(t){var o=Array(6);function a(t){var r;et(o.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var c,h={color:null},f=0,d=null,p="rgba",g="uint8",m=1;if("number"===typeof t)f=0|t;else if(t){et.type(t,"object","invalid arguments for framebuffer");var v=t;if("shape"in v){var y=v.shape;et(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),et(y[0]===y[1],"cube framebuffer must be square"),f=y[0]}else"radius"in v&&(f=0|v.radius),"width"in v?(f=0|v.width,"height"in v&&et(v.height===f,"must be square")):"height"in v&&(f=0|v.height);("color"in v||"colors"in v)&&(d=v.color||v.colors,Array.isArray(d)&&et(1===d.length||n.webgl_draw_buffers,"multiple render targets not supported")),d||("colorCount"in v&&(m=0|v.colorCount,et(m>0,"invalid color buffer count")),"colorType"in v&&(et.oneOf(v.colorType,l,"invalid color type"),g=v.colorType),"colorFormat"in v&&(p=v.colorFormat,et.oneOf(v.colorFormat,u,"invalid color format for texture"))),"depth"in v&&(h.depth=v.depth),"stencil"in v&&(h.stencil=v.stencil),"depthStencil"in v&&(h.depthStencil=v.depthStencil)}else f=1;if(d)if(Array.isArray(d))for(c=[],r=0;r<d.length;++r)c[r]=d[r];else c=[d];else{c=Array(m);var b={radius:f,format:p,type:g};for(r=0;r<m;++r)c[r]=i.createCube(b)}for(h.color=Array(c.length),r=0;r<c.length;++r){var x=c[r];et("function"===typeof x&&"textureCube"===x._reglType,"invalid cube map"),f=f||x.width,et(x.width===f&&x.height===f,"invalid cube map shape"),h.color[r]={target:fi,data:c[r]}}for(r=0;r<6;++r){for(var _=0;_<c.length;++_)h.color[_].target=fi+r;r>0&&(h.depth=o[0].depth,h.stencil=o[0].stencil,h.depthStencil=o[0].depthStencil),o[r]?o[r](h):o[r]=M(h)}return e(a,{width:f,height:f,color:c})}function c(t){var e,n=0|t;if(et(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(e=0;e<i.length;++e)i[e].resize(n);for(e=0;e<6;++e)o[e].resize(n);return a.width=a.height=n,a}return a(t),e(a,{faces:o,resize:c,_reglType:"framebufferCube",destroy:function(){o.forEach((function(t){t.destroy()}))}})}function C(){s.cur=null,s.next=null,s.dirty=!0,Se(x).forEach((function(e){e.framebuffer=t.createFramebuffer(),E(e)}))}return e(s,{getFramebuffer:function(t){if("function"===typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof _)return e}return null},create:M,createCube:A,clear:function(){Se(x).forEach(S)},restore:C})}Li[vi]="complete",Li[yi]="incomplete attachment",Li[xi]="incomplete dimensions",Li[bi]="incomplete, missing attachment",Li[_i]="unsupported";var Bi=5126,ji=34962;function Fi(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Bi,this.offset=0,this.stride=0,this.divisor=0}function zi(e,n,r,i,o){for(var a=r.maxAttributes,s=new Array(a),u=0;u<a;++u)s[u]=new Fi;var c=0,l={},h={Record:Fi,scope:{},state:s,currentVAO:null,targetVAO:null,restore:d()?x:function(){},createVAO:_,getVAO:g,destroyBuffer:f,setVAO:d()?m:v,clear:d()?y:function(){}};function f(t){for(var n=0;n<s.length;++n){var r=s[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}}function d(){return n.oes_vertex_array_object}function p(){return n.angle_instanced_arrays}function g(t){return"function"===typeof t&&t._vao?t._vao:null}function m(t){if(t!==h.currentVAO){var e=d();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),h.currentVAO=t}}function v(t){if(t!==h.currentVAO){if(t)t.bindAttrs();else for(var n=p(),r=0;r<s.length;++r){var i=s[r];i.buffer?(e.enableVertexAttribArray(r),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}h.currentVAO=t}}function y(){Se(l).forEach((function(t){t.destroy()}))}function b(){this.id=++c,this.attributes=[];var t=d();this.vao=t?t.createVertexArrayOES():null,l[this.id]=this,this.buffers=[]}function x(){var t=d();t&&Se(l).forEach((function(t){t.refresh()}))}function _(e){var r=new b;function s(e){et(Array.isArray(e),"arguments to vertex array constructor must be an array"),et(e.length<a,"too many attributes"),et(e.length>0,"must specify at least one attribute");var i={},u=r.attributes;u.length=e.length;for(var c=0;c<e.length;++c){var l,h=e[c],f=u[c]=new Fi,d=h.data||h;if(Array.isArray(d)||t(d)||we(d))r.buffers[c]&&(l=r.buffers[c],t(d)&&l._buffer.byteLength>=d.byteLength?l.subdata(d):(l.destroy(),r.buffers[c]=null)),r.buffers[c]||(l=r.buffers[c]=o.create(h,ji,!1,!0)),f.buffer=o.getBuffer(l),f.size=0|f.buffer.dimension,f.normalized=!1,f.type=f.buffer.dtype,f.offset=0,f.stride=0,f.divisor=0,f.state=1,i[c]=1;else o.getBuffer(h)?(f.buffer=o.getBuffer(h),f.size=0|f.buffer.dimension,f.normalized=!1,f.type=f.buffer.dtype,f.offset=0,f.stride=0,f.divisor=0,f.state=1):o.getBuffer(h.buffer)?(f.buffer=o.getBuffer(h.buffer),f.size=0|(+h.size||f.buffer.dimension),f.normalized=!!h.normalized||!1,"type"in h?(et.parameter(h.type,Ie,"invalid buffer type"),f.type=Ie[h.type]):f.type=f.buffer.dtype,f.offset=0|(h.offset||0),f.stride=0|(h.stride||0),f.divisor=0|(h.divisor||0),f.state=1,et(f.size>=1&&f.size<=4,"size must be between 1 and 4"),et(f.offset>=0,"invalid offset"),et(f.stride>=0&&f.stride<=255,"stride must be between 0 and 255"),et(f.divisor>=0,"divisor must be positive"),et(!f.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in h?(et(c>0,"first attribute must not be a constant"),f.x=+h.x||0,f.y=+h.y||0,f.z=+h.z||0,f.w=+h.w||0,f.state=2):et(!1,"invalid attribute spec for location "+c)}for(var p=0;p<r.buffers.length;++p)!i[p]&&r.buffers[p]&&(r.buffers[p].destroy(),r.buffers[p]=null);return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){for(var t=0;t<r.buffers.length;++t)r.buffers[t]&&r.buffers[t].destroy();r.buffers.length=0,r.destroy()},s._vao=r,s._reglType="vao",s(e)}return b.prototype.bindAttrs=function(){for(var t=p(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(ji,i.buffer.buffer),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),t&&i.divisor&&t.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<a;++o)e.disableVertexAttribArray(o)},b.prototype.refresh=function(){var t=d();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=this)},b.prototype.destroy=function(){if(this.vao){var t=d();this===h.currentVAO&&(h.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}l[this.id]&&(delete l[this.id],i.vaoCount-=1)},h}var Ui=35632,Gi=35633,Vi=35718,Wi=35721;function Hi(t,n,r,i){var o={},a={};function s(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function u(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function c(e,r,i){var s=e===Ui?o:a,u=s[r];if(!u){var c=n.str(r);u=t.createShader(e),t.shaderSource(u,c),t.compileShader(u),et.shaderError(t,u,c,e,i),s[r]=u}return u}var l={},h=[],f=0;function d(t,e){this.id=f++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,r,o){var a,l,h=c(Ui,e.fragId),f=c(Gi,e.vertId),d=e.program=t.createProgram();if(t.attachShader(d,h),t.attachShader(d,f),o)for(a=0;a<o.length;++a){var p=o[a];t.bindAttribLocation(d,p[0],p[1])}t.linkProgram(d),et.linkError(t,d,n.str(e.fragId),n.str(e.vertId),r);var g=t.getProgramParameter(d,Vi);i.profile&&(e.stats.uniformsCount=g);var m=e.uniforms;for(a=0;a<g;++a)if(l=t.getActiveUniform(d,a),l)if(l.size>1)for(var v=0;v<l.size;++v){var y=l.name.replace("[0]","["+v+"]");u(m,new s(y,n.id(y),t.getUniformLocation(d,y),l))}else u(m,new s(l.name,n.id(l.name),t.getUniformLocation(d,l.name),l));var b=t.getProgramParameter(d,Wi);i.profile&&(e.stats.attributesCount=b);var x=e.attributes;for(a=0;a<b;++a)l=t.getActiveAttrib(d,a),l&&u(x,new s(l.name,n.id(l.name),t.getAttribLocation(d,l.name),l))}function g(){o={},a={};for(var t=0;t<h.length;++t)p(h[t],null,h[t].attributes.map((function(t){return[t.location,t.name]})))}return i.profile&&(r.getMaxUniformsCount=function(){var t=0;return h.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},r.getMaxAttributesCount=function(){var t=0;return h.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);Se(o).forEach(e),o={},Se(a).forEach(e),a={},h.forEach((function(e){t.deleteProgram(e.program)})),h.length=0,l={},r.shaderCount=0},program:function(n,i,s,u){et.command(n>=0,"missing vertex shader",s),et.command(i>=0,"missing fragment shader",s);var c=l[i];c||(c=l[i]={});var f=c[n];if(f&&(f.refCount++,!u))return f;var g=new d(i,n);return r.shaderCount++,p(g,s,u),f||(c[n]=g),h.push(g),e(g,{destroy:function(){if(g.refCount--,g.refCount<=0){t.deleteProgram(g.program);var e=h.indexOf(g);h.splice(e,1),r.shaderCount--}c[g.vertId].refCount<=0&&(t.deleteShader(a[g.vertId]),delete a[g.vertId],delete l[g.fragId][g.vertId]),Object.keys(l[g.fragId]).length||(t.deleteShader(o[g.fragId]),delete o[g.fragId],delete l[g.fragId])}})},restore:g,shader:c,frag:-1,vert:-1}}var Yi=6408,qi=5121,Xi=3333,Ki=5126;function Zi(e,n,r,i,o,a,s){function u(u){var c;null===n.next?(et(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=qi):(et(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(et(c===qi||c===Ki,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),c===Ki&&et(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):et(c===qi,"Reading from a framebuffer is only allowed for the type 'uint8'"));var l=0,h=0,f=i.framebufferWidth,d=i.framebufferHeight,p=null;t(u)?p=u:u&&(et.type(u,"object","invalid arguments to regl.read()"),l=0|u.x,h=0|u.y,et(l>=0&&l<i.framebufferWidth,"invalid x offset for regl.read"),et(h>=0&&h<i.framebufferHeight,"invalid y offset for regl.read"),f=0|(u.width||i.framebufferWidth-l),d=0|(u.height||i.framebufferHeight-h),p=u.data||null),p&&(c===qi?et(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):c===Ki&&et(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),et(f>0&&f+l<=i.framebufferWidth,"invalid width for read pixels"),et(d>0&&d+h<=i.framebufferHeight,"invalid height for read pixels"),r();var g=f*d*4;return p||(c===qi?p=new Uint8Array(g):c===Ki&&(p=p||new Float32Array(g))),et.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),et(p.byteLength>=g,"data buffer for regl.read() too small"),e.pixelStorei(Xi,4),e.readPixels(l,h,f,d,Yi,c,p),p}function c(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=u(t)})),e}function l(t){return t&&"framebuffer"in t?c(t):u(t)}return l}function $i(t){return Array.prototype.slice.call(t)}function Ji(t){return $i(t).join("")}function Qi(){var t=0,n=[],r=[];function i(e){for(var i=0;i<r.length;++i)if(r[i]===e)return n[i];var o="g"+t++;return n.push(o),r.push(e),o}function o(){var n=[];function r(){n.push.apply(n,$i(arguments))}var i=[];function o(){var e="v"+t++;return i.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,$i(arguments)),n.push(";")),e}return e(r,{def:o,toString:function(){return Ji([i.length>0?"var "+i.join(",")+";":"",Ji(n)])}})}function a(){var t=o(),n=o(),r=t.toString,i=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,$i(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}function s(){var t=Ji(arguments),n=a(),r=a(),i=n.toString,o=r.toString;return e(n,{then:function(){return n.apply(n,$i(arguments)),this},else:function(){return r.apply(r,$i(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),Ji(["if(",t,"){",i(),"}",e])}})}var u=o(),c={};function l(t,n){var r=[];function i(){var t="a"+r.length;return r.push(t),t}n=n||0;for(var o=0;o<n;++o)i();var s=a(),u=s.toString,l=c[t]=e(s,{arg:i,toString:function(){return Ji(["function(",r.join(),"){",u(),"}"])}});return l}function h(){var t=['"use strict";',u,"return {"];Object.keys(c).forEach((function(e){t.push('"',e,'":',c[e].toString(),",")})),t.push("}");var e=Ji(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),i=Function.apply(null,n.concat(e));return i.apply(null,r)}return{global:u,link:i,block:o,proc:l,scope:a,cond:s,compile:h}}var to="xyzw".split(""),eo=5121,no=1,ro=2,io=0,oo=1,ao=2,so=3,uo=4,co=5,lo=6,ho="dither",fo="blend.enable",po="blend.color",go="blend.equation",mo="blend.func",vo="depth.enable",yo="depth.func",bo="depth.range",xo="depth.mask",_o="colorMask",wo="cull.enable",So="cull.face",Eo="frontFace",Mo="lineWidth",Ao="polygonOffset.enable",Co="polygonOffset.offset",To="sample.alpha",ko="sample.enable",Oo="sample.coverage",Po="stencil.enable",Io="stencil.mask",No="stencil.func",Do="stencil.opFront",Lo="stencil.opBack",Ro="scissor.enable",Bo="scissor.box",jo="viewport",Fo="profile",zo="framebuffer",Uo="vert",Go="frag",Vo="elements",Wo="primitive",Ho="count",Yo="offset",qo="instances",Xo="vao",Ko="Width",Zo="Height",$o=zo+Ko,Jo=zo+Zo,Qo=jo+Ko,ta=jo+Zo,ea="drawingBuffer",na=ea+Ko,ra=ea+Zo,ia=[mo,go,No,Do,Lo,Oo,jo,Bo,Co],oa=34962,aa=34963,sa=3553,ua=34067,ca=2884,la=3042,ha=3024,fa=2960,da=2929,pa=3089,ga=32823,ma=32926,va=32928,ya=5126,ba=35664,xa=35665,_a=35666,wa=5124,Sa=35667,Ea=35668,Ma=35669,Aa=35670,Ca=35671,Ta=35672,ka=35673,Oa=35674,Pa=35675,Ia=35676,Na=35678,Da=35680,La=4,Ra=1028,Ba=1029,ja=2304,Fa=2305,za=32775,Ua=32776,Ga=519,Va=7680,Wa=0,Ha=1,Ya=32774,qa=513,Xa=36160,Ka=36064,Za={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},$a=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ja={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Qa={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ts={frag:35632,vert:35633},es={cw:ja,ccw:Fa};function ns(e){return Array.isArray(e)||t(e)||we(e)}function rs(t){return t.sort((function(t,e){return t===jo?-1:e===jo?1:t<e?-1:1}))}function is(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function os(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function as(t){return new is(!1,!1,!1,t)}function ss(t,e){var n=t.type;if(n===io){var r=t.data.length;return new is(!0,r>=1,r>=2,e)}if(n===uo){var i=t.data;return new is(i.thisDep,i.contextDep,i.propDep,e)}if(n===co)return new is(!1,!1,!1,e);if(n===lo){for(var o=!1,a=!1,s=!1,u=0;u<t.data.length;++u){var c=t.data[u];if(c.type===oo)s=!0;else if(c.type===ao)a=!0;else if(c.type===so)o=!0;else if(c.type===io){o=!0;var l=c.data;l>=1&&(a=!0),l>=2&&(s=!0)}else c.type===uo&&(o=o||c.data.thisDep,a=a||c.data.contextDep,s=s||c.data.propDep)}return new is(o,a,s,e)}return new is(n===so,n===ao,n===oo,e)}var us=new is(!1,!1,!1,(function(){}));function cs(t,n,r,i,o,a,s,u,c,l,h,f,d,p,g){var m=l.Record,v={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(v.min=za,v.max=Ua);var y=r.angle_instanced_arrays,b=r.webgl_draw_buffers,x={dirty:!0,profile:g.profile},_={},w=[],S={},E={};function M(t){return t.replace(".","_")}function A(t,e,n){var r=M(t);w.push(t),_[r]=x[r]=!!n,S[r]=e}function C(t,e,n){var r=M(t);w.push(t),Array.isArray(n)?(x[r]=n.slice(),_[r]=n.slice()):x[r]=_[r]=n,E[r]=e}A(ho,ha),A(fo,la),C(po,"blendColor",[0,0,0,0]),C(go,"blendEquationSeparate",[Ya,Ya]),C(mo,"blendFuncSeparate",[Ha,Wa,Ha,Wa]),A(vo,da,!0),C(yo,"depthFunc",qa),C(bo,"depthRange",[0,1]),C(xo,"depthMask",!0),C(_o,_o,[!0,!0,!0,!0]),A(wo,ca),C(So,"cullFace",Ba),C(Eo,Eo,Fa),C(Mo,Mo,1),A(Ao,ga),C(Co,"polygonOffset",[0,0]),A(To,ma),A(ko,va),C(Oo,"sampleCoverage",[1,!1]),A(Po,fa),C(Io,"stencilMask",-1),C(No,"stencilFunc",[Ga,0,-1]),C(Do,"stencilOpSeparate",[Ra,Va,Va,Va]),C(Lo,"stencilOpSeparate",[Ba,Va,Va,Va]),A(Ro,pa),C(Bo,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),C(jo,jo,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var T={gl:t,context:d,strings:n,next:_,current:x,draw:f,elements:a,buffer:o,shader:h,attributes:l.state,vao:l,uniforms:c,framebuffer:u,extensions:r,timer:p,isBufferArgs:ns},k={primTypes:He,compareFuncs:Ja,blendFuncs:Za,blendEquations:v,stencilOps:Qa,glTypes:Ie,orientationType:es};et.optional((function(){T.isArrayLike=ln})),b&&(k.backBuffer=[Ba],k.drawBuffer=Mt(i.maxDrawbuffers,(function(t){return 0===t?[0]:Mt(t,(function(t){return Ka+t}))})));var O=0;function P(){var t=Qi(),e=t.link,r=t.global;t.id=O++,t.batchId="0";var i=e(T),o=t.shared={props:"a0"};Object.keys(T).forEach((function(t){o[t]=r.def(i,".",t)})),et.optional((function(){t.CHECK=e(et),t.commandStr=et.guessCommand(),t.command=e(t.commandStr),t.assert=function(t,n,r){t("if(!(",n,"))",this.CHECK,".commandRaise(",e(r),",",this.command,");")},k.invalidBlendCombinations=$a}));var a=t.next={},s=t.current={};Object.keys(E).forEach((function(t){Array.isArray(x[t])&&(a[t]=r.def(o.next,".",t),s[t]=r.def(o.current,".",t))}));var u=t.constants={};Object.keys(k).forEach((function(t){u[t]=r.def(JSON.stringify(k[t]))})),t.invoke=function(n,r){switch(r.type){case io:var i=["this",o.context,o.props,t.batchId];return n.def(e(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case oo:return n.def(o.props,r.data);case ao:return n.def(o.context,r.data);case so:return n.def("this",r.data);case uo:return r.data.append(t,n),r.data.ref;case co:return r.data.toString();case lo:return r.data.map((function(e){return t.invoke(n,e)}))}},t.attribCache={};var c={};return t.scopeAttrib=function(t){var r=n.id(t);if(r in c)return c[r];var i=l.scope[r];i||(i=l.scope[r]=new m);var o=c[r]=e(i);return o},t}function I(t){var e,n=t.static,r=t.dynamic;if(Fo in n){var i=!!n[Fo];e=as((function(t,e){return i})),e.enable=i}else if(Fo in r){var o=r[Fo];e=ss(o,(function(t,e){return t.invoke(e,o)}))}return e}function N(t,e){var n=t.static,r=t.dynamic;if(zo in n){var i=n[zo];return i?(i=u.getFramebuffer(i),et.command(i,"invalid framebuffer object"),as((function(t,e){var n=t.link(i),r=t.shared;e.set(r.framebuffer,".next",n);var o=r.context;return e.set(o,"."+$o,n+".width"),e.set(o,"."+Jo,n+".height"),n}))):as((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+$o,r+"."+na),e.set(r,"."+Jo,r+"."+ra),"null"}))}if(zo in r){var o=r[zo];return ss(o,(function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer,a=e.def(i,".getFramebuffer(",n,")");et.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(i,".next",a);var s=r.context;return e.set(s,"."+$o,a+"?"+a+".width:"+s+"."+na),e.set(s,"."+Jo,a+"?"+a+".height:"+s+"."+ra),a}))}return null}function D(t,e,n){var r=t.static,i=t.dynamic;function o(t){if(t in r){var o=r[t];et.commandType(o,"object","invalid "+t,n.commandStr);var a,s,u=!0,c=0|o.x,l=0|o.y;return"width"in o?(a=0|o.width,et.command(a>=0,"invalid "+t,n.commandStr)):u=!1,"height"in o?(s=0|o.height,et.command(s>=0,"invalid "+t,n.commandStr)):u=!1,new is(!u&&e&&e.thisDep,!u&&e&&e.contextDep,!u&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in o||(r=e.def(n,".",$o,"-",c));var i=s;return"height"in o||(i=e.def(n,".",Jo,"-",l)),[c,l,r,i]}))}if(t in i){var h=i[t],f=ss(h,(function(e,n){var r=e.invoke(n,h);et.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var i=e.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",$o,"-",o,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",Jo,"-",a,")");return et.optional((function(){e.assert(n,s+">=0&&"+u+">=0","invalid "+t)})),[o,a,s,u]}));return e&&(f.thisDep=f.thisDep||e.thisDep,f.contextDep=f.contextDep||e.contextDep,f.propDep=f.propDep||e.propDep),f}return e?new is(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",$o),e.def(n,".",Jo)]})):null}var a=o(jo);if(a){var s=a;a=new is(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=s.append(t,e),r=t.shared.context;return e.set(r,"."+Qo,n[2]),e.set(r,"."+ta,n[3]),n}))}return{viewport:a,scissor_box:o(Bo)}}function L(t,e){var n=t.static,r="string"===typeof n[Go]&&"string"===typeof n[Uo];if(r){if(Object.keys(e.dynamic).length>0)return null;var i=e.static,o=Object.keys(i);if(o.length>0&&"number"===typeof i[o[0]]){for(var a=[],s=0;s<o.length;++s)et("number"===typeof i[o[s]],"must specify all vertex attribute locations when using vaos"),a.push([0|i[o[s]],o[s]]);return a}}return null}function R(t,e,r){var i=t.static,o=t.dynamic;function a(t){if(t in i){var e=n.id(i[t]);et.optional((function(){h.shader(ts[t],e,et.guessCommand())}));var r=as((function(){return e}));return r.id=e,r}if(t in o){var a=o[t];return ss(a,(function(e,n){var r=e.invoke(n,a),i=n.def(e.shared.strings,".id(",r,")");return et.optional((function(){n(e.shared.shader,".shader(",ts[t],",",i,",",e.command,");")})),i}))}return null}var s,u=a(Go),c=a(Uo),l=null;return os(u)&&os(c)?(l=h.program(c.id,u.id,null,r),s=as((function(t,e){return t.link(l)}))):s=new is(u&&u.thisDep||c&&c.thisDep,u&&u.contextDep||c&&c.contextDep,u&&u.propDep||c&&c.propDep,(function(t,e){var n,r,i=t.shared.shader;n=u?u.append(t,e):e.def(i,".",Go),r=c?c.append(t,e):e.def(i,".",Uo);var o=i+".program("+r+","+n;return et.optional((function(){o+=","+t.command})),e.def(o+")")})),{frag:u,vert:c,progVar:s,program:l}}function B(t,e){var n=t.static,r=t.dynamic;function i(){if(Vo in n){var t=n[Vo];ns(t)?t=a.getElements(a.create(t,!0)):t&&(t=a.getElements(t),et.command(t,"invalid elements",e.commandStr));var i=as((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return i.value=t,i}if(Vo in r){var o=r[Vo];return ss(o,(function(t,e){var n=t.shared,r=n.isBufferArgs,i=n.elements,a=t.invoke(e,o),s=e.def("null"),u=e.def(r,"(",a,")"),c=t.cond(u).then(s,"=",i,".createStream(",a,");").else(s,"=",i,".getElements(",a,");");return et.optional((function(){t.assert(c.else,"!"+a+"||"+s,"invalid elements")})),e.entry(c),e.exit(t.cond(u).then(i,".destroyStream(",s,");")),t.ELEMENTS=s,s}))}return null}var o=i();function s(){if(Wo in n){var t=n[Wo];return et.commandParameter(t,He,"invalid primitve",e.commandStr),as((function(e,n){return He[t]}))}if(Wo in r){var i=r[Wo];return ss(i,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,i);return et.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(He))})),e.def(n,"[",r,"]")}))}return o?os(o)?o.value?as((function(t,e){return e.def(t.ELEMENTS,".primType")})):as((function(){return La})):new is(o.thisDep,o.contextDep,o.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",La)})):null}function u(t,i){if(t in n){var a=0|n[t];return et.command(!i||a>=0,"invalid "+t,e.commandStr),as((function(t,e){return i&&(t.OFFSET=a),a}))}if(t in r){var s=r[t];return ss(s,(function(e,n){var r=e.invoke(n,s);return i&&(e.OFFSET=r,et.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}return i&&o?as((function(t,e){return t.OFFSET="0",0})):null}var c=u(Yo,!0);function l(){if(Ho in n){var t=0|n[Ho];return et.command("number"===typeof t&&t>=0,"invalid vertex count",e.commandStr),as((function(){return t}))}if(Ho in r){var i=r[Ho];return ss(i,(function(t,e){var n=t.invoke(e,i);return et.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(os(o)){if(o)return c?new is(c.thisDep,c.contextDep,c.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return et.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):as((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var a=as((function(){return-1}));return et.optional((function(){a.MISSING=!0})),a}var s=new is(o.thisDep||c.thisDep,o.contextDep||c.contextDep,o.propDep||c.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return et.optional((function(){s.DYNAMIC=!0})),s}return null}return{elements:o,primitive:s(),count:l(),instances:u(qo,!1),offset:c}}function j(t,e){var n=t.static,r=t.dynamic,o={};return w.forEach((function(t){var a=M(t);function s(e,i){if(t in n){var s=e(n[t]);o[a]=as((function(){return s}))}else if(t in r){var u=r[t];o[a]=ss(u,(function(t,e){return i(t,e,t.invoke(e,u))}))}}switch(t){case wo:case fo:case ho:case Po:case vo:case Ro:case Ao:case To:case ko:case xo:return s((function(n){return et.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return et.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case yo:return s((function(n){return et.commandParameter(n,Ja,"invalid "+t,e.commandStr),Ja[n]}),(function(e,n,r){var i=e.constants.compareFuncs;return et.optional((function(){e.assert(n,r+" in "+i,"invalid "+t+", must be one of "+Object.keys(Ja))})),n.def(i,"[",r,"]")}));case bo:return s((function(t){return et.command(ln(t)&&2===t.length&&"number"===typeof t[0]&&"number"===typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){et.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}));var r=e.def("+",n,"[0]"),i=e.def("+",n,"[1]");return[r,i]}));case mo:return s((function(t){et.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,i="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return et.commandParameter(n,Za,a+".srcRGB",e.commandStr),et.commandParameter(r,Za,a+".srcAlpha",e.commandStr),et.commandParameter(i,Za,a+".dstRGB",e.commandStr),et.commandParameter(o,Za,a+".dstAlpha",e.commandStr),et.command(-1===$a.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",e.commandStr),[Za[n],Za[i],Za[r],Za[o]]}),(function(e,n,r){var i=e.constants.blendFuncs;function o(o,a){var s=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return et.optional((function(){e.assert(n,s+" in "+i,"invalid "+t+"."+o+a+", must be one of "+Object.keys(Za))})),s}et.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=o("src","RGB"),s=o("dst","RGB");et.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var u=n.def(i,"[",a,"]"),c=n.def(i,"[",o("src","Alpha"),"]"),l=n.def(i,"[",s,"]"),h=n.def(i,"[",o("dst","Alpha"),"]");return[u,l,c,h]}));case go:return s((function(n){return"string"===typeof n?(et.commandParameter(n,v,"invalid "+t,e.commandStr),[v[n],v[n]]):"object"===typeof n?(et.commandParameter(n.rgb,v,t+".rgb",e.commandStr),et.commandParameter(n.alpha,v,t+".alpha",e.commandStr),[v[n.rgb],v[n.alpha]]):void et.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var i=e.constants.blendEquations,o=n.def(),a=n.def(),s=e.cond("typeof ",r,'==="string"');return et.optional((function(){function n(t,n,r){e.assert(t,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(v))}n(s.then,t,r),e.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(s.else,t+".rgb",r+".rgb"),n(s.else,t+".alpha",r+".alpha")})),s.then(o,"=",a,"=",i,"[",r,"];"),s.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]}));case po:return s((function(t){return et.command(ln(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),Mt(4,(function(e){return+t[e]}))}),(function(t,e,n){return et.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),Mt(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case Io:return s((function(t){return et.commandType(t,"number",a,e.commandStr),0|t}),(function(t,e,n){return et.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case No:return s((function(n){et.commandType(n,"object",a,e.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return et.commandParameter(r,Ja,t+".cmp",e.commandStr),et.commandType(i,"number",t+".ref",e.commandStr),et.commandType(o,"number",t+".mask",e.commandStr),[Ja[r],i,o]}),(function(t,e,n){var r=t.constants.compareFuncs;et.optional((function(){function i(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")}));var i=e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Va),o=e.def(n,".ref|0"),a=e.def('"mask" in ',n,"?",n,".mask|0:-1");return[i,o,a]}));case Do:case Lo:return s((function(n){et.commandType(n,"object",a,e.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return et.commandParameter(r,Qa,t+".fail",e.commandStr),et.commandParameter(i,Qa,t+".zfail",e.commandStr),et.commandParameter(o,Qa,t+".zpass",e.commandStr),[t===Lo?Ba:Ra,Qa[r],Qa[i],Qa[o]]}),(function(e,n,r){var i=e.constants.stencilOps;function o(o){return et.optional((function(){e.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+t+"."+o+", must be one of "+Object.keys(Qa))})),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",Va)}return et.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[t===Lo?Ba:Ra,o("fail"),o("zfail"),o("zpass")]}));case Co:return s((function(t){et.commandType(t,"object",a,e.commandStr);var n=0|t.factor,r=0|t.units;return et.commandType(n,"number",a+".factor",e.commandStr),et.commandType(r,"number",a+".units",e.commandStr),[n,r]}),(function(e,n,r){et.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var i=n.def(r,".factor|0"),o=n.def(r,".units|0");return[i,o]}));case So:return s((function(t){var n=0;return"front"===t?n=Ra:"back"===t&&(n=Ba),et.command(!!n,a,e.commandStr),n}),(function(t,e,n){return et.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',Ra,":",Ba)}));case Mo:return s((function(t){return et.command("number"===typeof t&&t>=i.lineWidthDims[0]&&t<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return et.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")})),n}));case Eo:return s((function(t){return et.commandParameter(t,es,a,e.commandStr),es[t]}),(function(t,e,n){return et.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?'+ja+":"+Fa)}));case _o:return s((function(t){return et.command(ln(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return et.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),Mt(4,(function(t){return"!!"+n+"["+t+"]"}))}));case Oo:return s((function(t){et.command("object"===typeof t&&t,a,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return et.command("number"===typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){et.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}));var r=e.def('"value" in ',n,"?+",n,".value:1"),i=e.def("!!",n,".invert");return[r,i]}))}})),o}function F(t,e){var n=t.static,r=t.dynamic,i={};return Object.keys(n).forEach((function(t){var r,o=n[t];if("number"===typeof o||"boolean"===typeof o)r=as((function(){return o}));else if("function"===typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=as((function(t){return t.link(o)})):"framebuffer"===a||"framebufferCube"===a?(et.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=as((function(t){return t.link(o.color[0])}))):et.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else ln(o)?r=as((function(e){var n=e.global.def("[",Mt(o.length,(function(n){return et.command("number"===typeof o[n]||"boolean"===typeof o[n],"invalid uniform "+t,e.commandStr),o[n]})),"]");return n})):et.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=o,i[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];i[t]=ss(e,(function(t,n){return t.invoke(n,e)}))})),i}function z(t,e){var r=t.static,i=t.dynamic,a={};return Object.keys(r).forEach((function(t){var i=r[t],s=n.id(t),u=new m;if(ns(i))u.state=no,u.buffer=o.getBuffer(o.create(i,oa,!1,!0)),u.type=0;else{var c=o.getBuffer(i);if(c)u.state=no,u.buffer=c,u.type=0;else if(et.command("object"===typeof i&&i,"invalid data for attribute "+t,e.commandStr),"constant"in i){var l=i.constant;u.buffer="null",u.state=ro,"number"===typeof l?u.x=l:(et.command(ln(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+t,e.commandStr),to.forEach((function(t,e){e<l.length&&(u[t]=l[e])})))}else{c=ns(i.buffer)?o.getBuffer(o.create(i.buffer,oa,!1,!0)):o.getBuffer(i.buffer),et.command(!!c,'missing buffer for attribute "'+t+'"',e.commandStr);var h=0|i.offset;et.command(h>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var f=0|i.stride;et.command(f>=0&&f<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var d=0|i.size;et.command(!("size"in i)||d>0&&d<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var p=!!i.normalized,g=0;"type"in i&&(et.commandParameter(i.type,Ie,"invalid type for attribute "+t,e.commandStr),g=Ie[i.type]);var v=0|i.divisor;"divisor"in i&&(et.command(0===v||y,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),et.command(v>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),et.optional((function(){var n=e.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach((function(e){et.command(r.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",n)}))})),u.buffer=c,u.state=no,u.size=d,u.normalized=p,u.type=g||c.dtype,u.offset=h,u.stride=f,u.divisor=v}}a[t]=as((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach((function(t){r[t]=u[t]})),u.buffer&&(r.buffer=t.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(i).forEach((function(t){var e=i[t];function n(n,r){var i=n.invoke(r,e),o=n.shared,a=n.constants,s=o.isBufferArgs,u=o.buffer;et.optional((function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+u+".getBuffer("+i+")||"+u+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+t+'"')}));var c={isStream:r.def(!1)},l=new m;l.state=no,Object.keys(l).forEach((function(t){c[t]=r.def(""+l[t])}));var h=c.buffer,f=c.type;function d(t){r(c[t],"=",i,".",t,"|0;")}return r("if(",s,"(",i,")){",c.isStream,"=true;",h,"=",u,".createStream(",oa,",",i,");",f,"=",h,".dtype;","}else{",h,"=",u,".getBuffer(",i,");","if(",h,"){",f,"=",h,".dtype;",'}else if("constant" in ',i,"){",c.state,"=",ro,";","if(typeof "+i+'.constant === "number"){',c[to[0]],"=",i,".constant;",to.slice(1).map((function(t){return c[t]})).join("="),"=0;","}else{",to.map((function(t,e){return c[t]+"="+i+".constant.length>"+e+"?"+i+".constant["+e+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",h,"=",u,".createStream(",oa,",",i,".buffer);","}else{",h,"=",u,".getBuffer(",i,".buffer);","}",f,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",h,".dtype;",c.normalized,"=!!",i,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),r("}}"),r.exit("if(",c.isStream,"){",u,".destroyStream(",h,");","}"),c}a[t]=ss(e,n)})),a}function U(t,e){var n=t.static,r=t.dynamic;if(Xo in n){var i=n[Xo];return null!==i&&null===l.getVAO(i)&&(i=l.createVAO(i)),as((function(t){return t.link(l.getVAO(i))}))}if(Xo in r){var o=r[Xo];return ss(o,(function(t,e){var n=t.invoke(e,o);return e.def(t.shared.vao+".getVAO("+n+")")}))}return null}function G(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=as((function(t,e){return"number"===typeof n||"boolean"===typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=ss(e,(function(t,n){return t.invoke(n,e)}))})),r}function V(t,e,n,i,o){var a=t.static,s=t.dynamic;et.optional((function(){var t=[zo,Uo,Go,Vo,Wo,Yo,Ho,qo,Fo,Xo].concat(w);function e(e){Object.keys(e).forEach((function(e){et.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',o.commandStr)}))}e(a),e(s)}));var u=L(t,e),c=N(t,o),h=D(t,c,o),f=B(t,o),d=j(t,o),p=R(t,o,u);function g(t){var e=h[t];e&&(d[t]=e)}g(jo),g(M(Bo));var m=Object.keys(d).length>0,v={framebuffer:c,draw:f,shader:p,state:d,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(v.profile=I(t,o),v.uniforms=F(n,o),v.drawVAO=v.scopeVAO=U(t,o),!v.drawVAO&&p.program&&!u&&r.angle_instanced_arrays){var y=!0,b=p.program.attributes.map((function(t){var n=e.static[t];return y=y&&!!n,n}));if(y&&b.length>0){var x=l.getVAO(l.createVAO(b));v.drawVAO=new is(null,null,null,(function(t,e){return t.link(x)})),v.useVAO=!0}}return u?v.useVAO=!0:v.attributes=z(e,o),v.context=G(i,o),v}function W(t,e,n){var r=t.shared,i=r.context,o=t.scope();Object.keys(n).forEach((function(r){e.save(i,"."+r);var a=n[r],s=a.append(t,e);Array.isArray(s)?o(i,".",r,"=[",s.join(),"];"):o(i,".",r,"=",s,";")})),e(o)}function H(t,e,n,r){var i,o=t.shared,a=o.gl,s=o.framebuffer;b&&(i=e.def(o.extensions,".webgl_draw_buffers"));var u,c=t.constants,l=c.drawBuffer,h=c.backBuffer;u=n?n.append(t,e):e.def(s,".next"),r||e("if(",u,"!==",s,".cur){"),e("if(",u,"){",a,".bindFramebuffer(",Xa,",",u,".framebuffer);"),b&&e(i,".drawBuffersWEBGL(",l,"[",u,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",Xa,",null);"),b&&e(i,".drawBuffersWEBGL(",h,");"),e("}",s,".cur=",u,";"),r||e("}")}function Y(t,e,n){var r=t.shared,i=r.gl,o=t.current,a=t.next,s=r.current,u=r.next,c=t.cond(s,".dirty");w.forEach((function(e){var r,l,h=M(e);if(!(h in n.state))if(h in a){r=a[h],l=o[h];var f=Mt(x[h].length,(function(t){return c.def(r,"[",t,"]")}));c(t.cond(f.map((function(t,e){return t+"!=="+l+"["+e+"]"})).join("||")).then(i,".",E[h],"(",f,");",f.map((function(t,e){return l+"["+e+"]="+t})).join(";"),";"))}else{r=c.def(u,".",h);var d=t.cond(r,"!==",s,".",h);c(d),h in S?d(t.cond(r).then(i,".enable(",S[h],");").else(i,".disable(",S[h],");"),s,".",h,"=",r,";"):d(i,".",E[h],"(",r,");",s,".",h,"=",r,";")}})),0===Object.keys(n.state).length&&c(s,".dirty=false;"),e(c)}function q(t,e,n,r){var i=t.shared,o=t.current,a=i.current,s=i.gl;rs(Object.keys(n)).forEach((function(i){var u=n[i];if(!r||r(u)){var c=u.append(t,e);if(S[i]){var l=S[i];os(u)?e(s,c?".enable(":".disable(",l,");"):e(t.cond(c).then(s,".enable(",l,");").else(s,".disable(",l,");")),e(a,".",i,"=",c,";")}else if(ln(c)){var h=o[i];e(s,".",E[i],"(",c,");",c.map((function(t,e){return h+"["+e+"]="+t})).join(";"),";")}else e(s,".",E[i],"(",c,");",a,".",i,"=",c,";")}}))}function X(t,e){y&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function K(t,e,n,r,i){var o,a,s,u=t.shared,c=t.stats,l=u.current,h=u.timer,f=n.profile;function d(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function g(t){o=e.def(),t(o,"=",d(),";"),"string"===typeof i?t(c,".count+=",i,";"):t(c,".count++;"),p&&(r?(a=e.def(),t(a,"=",h,".getNumPendingQueries();")):t(h,".beginQuery(",c,");"))}function m(t){t(c,".cpuTime+=",d(),"-",o,";"),p&&(r?t(h,".pushScopeStats(",a,",",h,".getNumPendingQueries(),",c,");"):t(h,".endQuery();"))}function v(t){var n=e.def(l,".profile");e(l,".profile=",t,";"),e.exit(l,".profile=",n,";")}if(f){if(os(f))return void(f.enable?(g(e),m(e.exit),v("true")):v("false"));s=f.append(t,e),v(s)}else s=e.def(l,".profile");var y=t.block();g(y),e("if(",s,"){",y,"}");var b=t.block();m(b),e.exit("if(",s,"){",b,"}")}function Z(t,e,n,r,i){var o=t.shared;function a(t){switch(t){case ba:case Sa:case Ca:return 2;case xa:case Ea:case Ta:return 3;case _a:case Ma:case ka:return 4;default:return 1}}function s(n,r,i){var a=o.gl,s=e.def(n,".location"),u=e.def(o.attributes,"[",s,"]"),c=i.state,l=i.buffer,h=[i.x,i.y,i.z,i.w],f=["buffer","normalized","offset","stride"];function d(){e("if(!",u,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,o=i.type;if(n=i.size?e.def(i.size,"||",r):r,e("if(",u,".type!==",o,"||",u,".size!==",n,"||",f.map((function(t){return u+"."+t+"!=="+i[t]})).join("||"),"){",a,".bindBuffer(",oa,",",l,".buffer);",a,".vertexAttribPointer(",[s,n,o,i.normalized,i.stride,i.offset],");",u,".type=",o,";",u,".size=",n,";",f.map((function(t){return u+"."+t+"="+i[t]+";"})).join(""),"}"),y){var c=i.divisor;e("if(",u,".divisor!==",c,"){",t.instancing,".vertexAttribDivisorANGLE(",[s,c],");",u,".divisor=",c,";}")}}function p(){e("if(",u,".buffer){",a,".disableVertexAttribArray(",s,");",u,".buffer=null;","}if(",to.map((function(t,e){return u+"."+t+"!=="+h[e]})).join("||"),"){",a,".vertexAttrib4f(",s,",",h,");",to.map((function(t,e){return u+"."+t+"="+h[e]+";"})).join(""),"}")}c===no?d():c===ro?p():(e("if(",c,"===",no,"){"),d(),e("}else{"),p(),e("}"))}r.forEach((function(r){var o,u=r.name,c=n.attributes[u];if(c){if(!i(c))return;o=c.append(t,e)}else{if(!i(us))return;var l=t.scopeAttrib(u);et.optional((function(){t.assert(e,l+".state","missing attribute "+u)})),o={},Object.keys(new m).forEach((function(t){o[t]=e.def(l,".",t)}))}s(t.link(r),a(r.info.type),o)}))}function $(t,e,r,i,o){for(var a,s=t.shared,u=s.gl,c=0;c<i.length;++c){var l,h=i[c],f=h.name,d=h.info.type,p=r.uniforms[f],g=t.link(h),m=g+".location";if(p){if(!o(p))continue;if(os(p)){var v=p.value;if(et.command(null!==v&&"undefined"!==typeof v,'missing uniform "'+f+'"',t.commandStr),d===Na||d===Da){et.command("function"===typeof v&&(d===Na&&("texture2d"===v._reglType||"framebuffer"===v._reglType)||d===Da&&("textureCube"===v._reglType||"framebufferCube"===v._reglType)),"invalid texture for uniform "+f,t.commandStr);var y=t.link(v._texture||v.color[0]._texture);e(u,".uniform1i(",m,",",y+".bind());"),e.exit(y,".unbind();")}else if(d===Oa||d===Pa||d===Ia){et.optional((function(){et.command(ln(v),"invalid matrix for uniform "+f,t.commandStr),et.command(d===Oa&&4===v.length||d===Pa&&9===v.length||d===Ia&&16===v.length,"invalid length for matrix uniform "+f,t.commandStr)}));var b=t.global.def("new Float32Array(["+Array.prototype.slice.call(v)+"])"),x=2;d===Pa?x=3:d===Ia&&(x=4),e(u,".uniformMatrix",x,"fv(",m,",false,",b,");")}else{switch(d){case ya:et.commandType(v,"number","uniform "+f,t.commandStr),a="1f";break;case ba:et.command(ln(v)&&2===v.length,"uniform "+f,t.commandStr),a="2f";break;case xa:et.command(ln(v)&&3===v.length,"uniform "+f,t.commandStr),a="3f";break;case _a:et.command(ln(v)&&4===v.length,"uniform "+f,t.commandStr),a="4f";break;case Aa:et.commandType(v,"boolean","uniform "+f,t.commandStr),a="1i";break;case wa:et.commandType(v,"number","uniform "+f,t.commandStr),a="1i";break;case Ca:et.command(ln(v)&&2===v.length,"uniform "+f,t.commandStr),a="2i";break;case Sa:et.command(ln(v)&&2===v.length,"uniform "+f,t.commandStr),a="2i";break;case Ta:et.command(ln(v)&&3===v.length,"uniform "+f,t.commandStr),a="3i";break;case Ea:et.command(ln(v)&&3===v.length,"uniform "+f,t.commandStr),a="3i";break;case ka:et.command(ln(v)&&4===v.length,"uniform "+f,t.commandStr),a="4i";break;case Ma:et.command(ln(v)&&4===v.length,"uniform "+f,t.commandStr),a="4i";break}e(u,".uniform",a,"(",m,",",ln(v)?Array.prototype.slice.call(v):v,");")}continue}l=p.append(t,e)}else{if(!o(us))continue;l=e.def(s.uniforms,"[",n.id(f),"]")}d===Na?(et(!Array.isArray(l),"must specify a scalar prop for textures"),e("if(",l,"&&",l,'._reglType==="framebuffer"){',l,"=",l,".color[0];","}")):d===Da&&(et(!Array.isArray(l),"must specify a scalar prop for cube maps"),e("if(",l,"&&",l,'._reglType==="framebufferCube"){',l,"=",l,".color[0];","}")),et.optional((function(){function n(n,r){t.assert(e,n,'bad data or missing for uniform "'+f+'".  '+r)}function r(t){et(!Array.isArray(l),"must not specify an array type for uniform"),n("typeof "+l+'==="'+t+'"',"invalid type, expected "+t)}function i(e,r){Array.isArray(l)?et(l.length===e,"must have length "+e):n(s.isArrayLike+"("+l+")&&"+l+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function o(e){et(!Array.isArray(l),"must not specify a value type"),n("typeof "+l+'==="function"&&'+l+'._reglType==="texture'+(e===sa?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(d){case wa:r("number");break;case Sa:i(2,"number");break;case Ea:i(3,"number");break;case Ma:i(4,"number");break;case ya:r("number");break;case ba:i(2,"number");break;case xa:i(3,"number");break;case _a:i(4,"number");break;case Aa:r("boolean");break;case Ca:i(2,"boolean");break;case Ta:i(3,"boolean");break;case ka:i(4,"boolean");break;case Oa:i(4,"number");break;case Pa:i(9,"number");break;case Ia:i(16,"number");break;case Na:o(sa);break;case Da:o(ua);break}}));var _=1;switch(d){case Na:case Da:var w=e.def(l,"._texture");e(u,".uniform1i(",m,",",w,".bind());"),e.exit(w,".unbind();");continue;case wa:case Aa:a="1i";break;case Sa:case Ca:a="2i",_=2;break;case Ea:case Ta:a="3i",_=3;break;case Ma:case ka:a="4i",_=4;break;case ya:a="1f";break;case ba:a="2f",_=2;break;case xa:a="3f",_=3;break;case _a:a="4f",_=4;break;case Oa:a="Matrix2fv";break;case Pa:a="Matrix3fv";break;case Ia:a="Matrix4fv";break}if(e(u,".uniform",a,"(",m,","),"M"===a.charAt(0)){var S=Math.pow(d-Oa+2,2),E=t.global.def("new Float32Array(",S,")");Array.isArray(l)?e("false,(",Mt(S,(function(t){return E+"["+t+"]="+l[t]})),",",E,")"):e("false,(Array.isArray(",l,")||",l," instanceof Float32Array)?",l,":(",Mt(S,(function(t){return E+"["+t+"]="+l+"["+t+"]"})),",",E,")")}else _>1?e(Mt(_,(function(t){return Array.isArray(l)?l[t]:l+"["+t+"]"}))):(et(!Array.isArray(l),"uniform value must not be an array"),e(l));e(");")}}function J(t,e,n,r){var i=t.shared,o=i.gl,a=i.draw,s=r.draw;function u(){var i,u=s.elements,c=e;return u?((u.contextDep&&r.contextDynamic||u.propDep)&&(c=n),i=u.append(t,c)):i=c.def(a,".",Vo),i&&c("if("+i+")"+o+".bindBuffer("+aa+","+i+".buffer.buffer);"),i}function c(){var i,o=s.count,u=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(u=n),i=o.append(t,u),et.optional((function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(u,i+">=0","missing vertex count")}))):(i=u.def(a,".",Ho),et.optional((function(){t.assert(u,i+">=0","missing vertex count")}))),i}var l=u();function h(i){var o=s[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(a,".",i)}var f,d,p=h(Wo),g=h(Yo),m=c();if("number"===typeof m){if(0===m)return}else n("if(",m,"){"),n.exit("}");y&&(f=h(qo),d=t.instancing);var v=l+".type",b=s.elements&&os(s.elements);function x(){function t(){n(d,".drawElementsInstancedANGLE(",[p,m,v,g+"<<(("+v+"-"+eo+")>>1)",f],");")}function e(){n(d,".drawArraysInstancedANGLE(",[p,g,m,f],");")}l?b?t():(n("if(",l,"){"),t(),n("}else{"),e(),n("}")):e()}function _(){function t(){n(o+".drawElements("+[p,m,v,g+"<<(("+v+"-"+eo+")>>1)"]+");")}function e(){n(o+".drawArrays("+[p,g,m]+");")}l?b?t():(n("if(",l,"){"),t(),n("}else{"),e(),n("}")):e()}y&&("number"!==typeof f||f>=0)?"string"===typeof f?(n("if(",f,">0){"),x(),n("}else if(",f,"<0){"),_(),n("}")):x():_()}function Q(t,e,n,r,i){var o=P(),a=o.proc("body",i);return et.optional((function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)})),y&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,n,r),o.compile().body}function tt(t,e,n,r){X(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),Z(t,e,n,r.attributes,(function(){return!0}))),$(t,e,n,r.uniforms,(function(){return!0})),J(t,e,e,n)}function nt(t,e){var n=t.proc("draw",1);X(t,n),W(t,n,e.context),H(t,n,e.framebuffer),Y(t,n,e),q(t,n,e.state),K(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)tt(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link((function(n){return Q(tt,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function rt(t,e,n,r){function i(){return!0}t.batchId="a1",X(t,e),Z(t,e,n,r.attributes,i),$(t,e,n,r.uniforms,i),J(t,e,e,n)}function it(t,e,n,r){X(t,e);var i=n.contextDep,o=e.def(),a="a0",s="a1",u=e.def();t.shared.props=u,t.batchId=o;var c=t.scope(),l=t.scope();function h(t){return t.contextDep&&i||t.propDep}function f(t){return!h(t)}if(e(c.entry,"for(",o,"=0;",o,"<",s,";++",o,"){",u,"=",a,"[",o,"];",l,"}",c.exit),n.needsContext&&W(t,l,n.context),n.needsFramebuffer&&H(t,l,n.framebuffer),q(t,l,n.state,h),n.profile&&h(n.profile)&&K(t,l,n,!1,!0),r)n.useVAO?n.drawVAO?h(n.drawVAO)?l(t.shared.vao,".setVAO(",n.drawVAO.append(t,l),");"):c(t.shared.vao,".setVAO(",n.drawVAO.append(t,c),");"):c(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(c(t.shared.vao,".setVAO(null);"),Z(t,c,n,r.attributes,f),Z(t,l,n,r.attributes,h)),$(t,c,n,r.uniforms,f),$(t,l,n,r.uniforms,h),J(t,c,l,n);else{var d=t.global.def("{}"),p=n.shader.progVar.append(t,l),g=l.def(p,".id"),m=l.def(d,"[",g,"]");l(t.shared.gl,".useProgram(",p,".program);","if(!",m,"){",m,"=",d,"[",g,"]=",t.link((function(e){return Q(rt,t,n,e,2)})),"(",p,");}",m,".call(this,a0[",o,"],",o,");")}}function ot(t,e){var n=t.proc("batch",2);t.batchId="0",X(t,n);var r=!1,i=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(W(t,n,e.context),i=!1);var o=e.framebuffer,a=!1;function s(t){return t.contextDep&&r||t.propDep}o?(o.propDep?r=a=!0:o.contextDep&&r&&(a=!0),a||H(t,n,o)):H(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),Y(t,n,e),q(t,n,e.state,(function(t){return!s(t)})),e.profile&&s(e.profile)||K(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=i,e.needsFramebuffer=a;var u=e.shader.progVar;if(u.contextDep&&r||u.propDep)it(t,n,e,null);else{var c=u.append(t,n);if(n(t.shared.gl,".useProgram(",c,".program);"),e.shader.program)it(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var l=t.global.def("{}"),h=n.def(c,".id"),f=n.def(l,"[",h,"]");n(t.cond(f).then(f,".call(this,a0,a1);").else(f,"=",l,"[",h,"]=",t.link((function(n){return Q(it,t,e,n,2)})),"(",c,");",f,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function at(t,e){var r=t.proc("scope",3);t.batchId="a2";var i=t.shared,o=i.current;function a(n){var o=e.shader[n];o&&r.set(i.shader,"."+n,o.append(t,r))}W(t,r,e.context),e.framebuffer&&e.framebuffer.append(t,r),rs(Object.keys(e.state)).forEach((function(n){var o=e.state[n],a=o.append(t,r);ln(a)?a.forEach((function(e,i){r.set(t.next[n],"["+i+"]",e)})):r.set(i.next,"."+n,a)})),K(t,r,e,!0,!0),[Vo,Yo,Ho,qo,Wo].forEach((function(n){var o=e.draw[n];o&&r.set(i.draw,"."+n,""+o.append(t,r))})),Object.keys(e.uniforms).forEach((function(o){var a=e.uniforms[o].append(t,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(i.uniforms,"["+n.id(o)+"]",a)})),Object.keys(e.attributes).forEach((function(n){var i=e.attributes[n].append(t,r),o=t.scopeAttrib(n);Object.keys(new m).forEach((function(t){r.set(o,"."+t,i[t])}))})),e.scopeVAO&&r.set(i.vao,".targetVAO",e.scopeVAO.append(t,r)),a(Uo),a(Go),Object.keys(e.state).length>0&&(r(o,".dirty=true;"),r.exit(o,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}function st(t){if("object"===typeof t&&!ln(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(dt.isDynamic(t[e[n]]))return!0;return!1}}function ut(t,e,n){var r=e.static[n];if(r&&st(r)){var i=t.global,o=Object.keys(r),a=!1,s=!1,u=!1,c=t.global.def("{}");o.forEach((function(e){var n=r[e];if(dt.isDynamic(n)){"function"===typeof n&&(n=r[e]=dt.unbox(n));var o=ss(n,null);a=a||o.thisDep,u=u||o.propDep,s=s||o.contextDep}else{switch(i(c,".",e,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(t.link(n));break}i(";")}})),e.dynamic[n]=new dt.DynamicVariable(uo,{thisDep:a,contextDep:s,propDep:u,ref:c,append:l}),delete e.static[n]}function l(t,e){o.forEach((function(n){var i=r[n];if(dt.isDynamic(i)){var o=t.invoke(e,i);e(c,".",n,"=",o,";")}}))}}function ct(t,n,r,i,o){var a=P();a.stats=a.link(o),Object.keys(n.static).forEach((function(t){ut(a,n,t)})),ia.forEach((function(e){ut(a,t,e)}));var s=V(t,n,r,i,a);return nt(a,s),at(a,s),ot(a,s),e(a.compile(),{destroy:function(){s.shader.program.destroy()}})}return{next:_,current:x,procs:function(){var t=P(),e=t.proc("poll"),n=t.proc("refresh"),o=t.block();e(o),n(o);var a,s=t.shared,u=s.gl,c=s.next,l=s.current;o(l,".dirty=false;"),H(t,e),H(t,n,null,!0),y&&(a=t.link(y)),r.oes_vertex_array_object&&n(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var h=0;h<i.maxAttributes;++h){var f=n.def(s.attributes,"[",h,"]"),d=t.cond(f,".buffer");d.then(u,".enableVertexAttribArray(",h,");",u,".bindBuffer(",oa,",",f,".buffer.buffer);",u,".vertexAttribPointer(",h,",",f,".size,",f,".type,",f,".normalized,",f,".stride,",f,".offset);").else(u,".disableVertexAttribArray(",h,");",u,".vertexAttrib4f(",h,",",f,".x,",f,".y,",f,".z,",f,".w);",f,".buffer=null;"),n(d),y&&n(a,".vertexAttribDivisorANGLE(",h,",",f,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(S).forEach((function(r){var i=S[r],a=o.def(c,".",r),s=t.block();s("if(",a,"){",u,".enable(",i,")}else{",u,".disable(",i,")}",l,".",r,"=",a,";"),n(s),e("if(",a,"!==",l,".",r,"){",s,"}")})),Object.keys(E).forEach((function(r){var i,a,s=E[r],h=x[r],f=t.block();if(f(u,".",s,"("),ln(h)){var d=h.length;i=t.global.def(c,".",r),a=t.global.def(l,".",r),f(Mt(d,(function(t){return i+"["+t+"]"})),");",Mt(d,(function(t){return a+"["+t+"]="+i+"["+t+"];"})).join("")),e("if(",Mt(d,(function(t){return i+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",f,"}")}else i=o.def(c,".",r),a=o.def(l,".",r),f(i,");",l,".",r,"=",i,";"),e("if(",i,"!==",a,"){",f,"}");n(f)})),t.compile()}(),compile:ct}}function ls(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var hs=34918,fs=34919,ds=35007,ps=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(){return n.pop()||e.ext_disjoint_timer_query.createQueryEXT()}function i(t){n.push(t)}var o=[];function a(t){var n=r();e.ext_disjoint_timer_query.beginQueryEXT(ds,n),o.push(n),d(o.length-1,o.length,t)}function s(){e.ext_disjoint_timer_query.endQueryEXT(ds)}function u(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var c=[];function l(){return c.pop()||new u}function h(t){c.push(t)}var f=[];function d(t,e,n){var r=l();r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,f.push(r)}var p=[],g=[];function m(){var t,n,r=o.length;if(0!==r){g.length=Math.max(g.length,r+1),p.length=Math.max(p.length,r+1),p[0]=0,g[0]=0;var a=0;for(t=0,n=0;n<o.length;++n){var s=o[n];e.ext_disjoint_timer_query.getQueryObjectEXT(s,fs)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(s,hs),i(s)):o[t++]=s,p[n+1]=a,g[n+1]=t}for(o.length=t,t=0,n=0;n<f.length;++n){var u=f[n],c=u.startQueryIndex,l=u.endQueryIndex;u.sum+=p[l]-p[c];var d=g[c],m=g[l];m===d?(u.stats.gpuTime+=u.sum/1e6,h(u)):(u.startQueryIndex=d,u.endQueryIndex=m,f[t++]=u)}f.length=t}}return{beginQuery:a,endQuery:s,pushScopeStats:d,update:m,getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}},gs=16384,ms=256,vs=1024,ys=34962,bs="webglcontextlost",xs="webglcontextrestored",_s=1,ws=2,Ss=3;function Es(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}function Ms(t){var n=St(t);if(!n)return null;var r=n.gl,i=r.getContextAttributes(),o=r.isContextLost(),a=Et(r,n);if(!a)return null;var s=mt(),u=ls(),c=a.extensions,l=ps(r,c),h=gt(),f=r.drawingBufferWidth,d=r.drawingBufferHeight,p={tick:0,time:0,viewportWidth:f,viewportHeight:d,framebufferWidth:f,framebufferHeight:d,drawingBufferWidth:f,drawingBufferHeight:d,pixelRatio:n.pixelRatio},g={},m={elements:null,primitive:4,count:-1,offset:0,instances:-1},v=_e(r,c),y=We(r,u,n,x),b=zi(r,c,v,u,y);function x(t){return b.destroyBuffer(t)}var _=on(r,c,y,u),w=Hi(r,s,u,n),S=Xr(r,c,v,(function(){A.procs.poll()}),p,u,n),E=ui(r,c,v,u,n),M=Ri(r,c,v,S,E,u),A=cs(r,s,c,v,y,_,S,M,g,b,w,m,p,l,n),C=Zi(r,M,A.procs.poll,p,i,c,v),T=A.next,k=r.canvas,O=[],P=[],I=[],N=[n.onDestroy],D=null;function L(){if(0===O.length)return l&&l.update(),void(D=null);D=pt.next(L),q();for(var t=O.length-1;t>=0;--t){var e=O[t];e&&e(p,null,0)}r.flush(),l&&l.update()}function R(){!D&&O.length>0&&(D=pt.next(L))}function B(){D&&(pt.cancel(L),D=null)}function j(t){t.preventDefault(),o=!0,B(),P.forEach((function(t){t()}))}function F(t){r.getError(),o=!1,a.restore(),w.restore(),y.restore(),S.restore(),E.restore(),M.restore(),b.restore(),l&&l.restore(),A.procs.refresh(),R(),I.forEach((function(t){t()}))}function z(){O.length=0,B(),k&&(k.removeEventListener(bs,j),k.removeEventListener(xs,F)),w.clear(),M.clear(),E.clear(),S.clear(),_.clear(),y.clear(),b.clear(),l&&l.clear(),N.forEach((function(t){t()}))}function U(t){function n(t){var n=e({},t);function r(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(r){n[t+"."+r]=e[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}function r(t,e){var n={},r={};return Object.keys(t).forEach((function(i){var o=t[i];if(dt.isDynamic(o))r[i]=dt.unbox(o,i);else{if(e&&Array.isArray(o))for(var a=0;a<o.length;++a)if(dt.isDynamic(o[a]))return void(r[i]=dt.unbox(o,i));n[i]=o}})),{dynamic:r,static:n}}et(!!t,"invalid args to regl({...})"),et.type(t,"object","invalid args to regl({...})");var i=r(t.context||{},!0),a=r(t.uniforms||{},!0),s=r(t.attributes||{},!1),u=r(n(t),!1),c={gpuTime:0,cpuTime:0,count:0},l=A.compile(u,s,a,i,c),h=l.draw,f=l.batch,d=l.scope,p=[];function g(t){while(p.length<t)p.push(null);return p}function m(t,e){var n;if(o&&et.raise("context lost"),"function"===typeof t)return d.call(this,null,t,0);if("function"===typeof e)if("number"===typeof t)for(n=0;n<t;++n)d.call(this,null,e,n);else{if(!Array.isArray(t))return d.call(this,t,e,0);for(n=0;n<t.length;++n)d.call(this,t[n],e,n)}else if("number"===typeof t){if(t>0)return f.call(this,g(0|t),0|t)}else{if(!Array.isArray(t))return h.call(this,t);if(t.length)return f.call(this,t,t.length)}}return e(m,{stats:c,destroy:function(){l.destroy()}})}k&&(k.addEventListener(bs,j,!1),k.addEventListener(xs,F,!1));var G=M.setFBO=U({framebuffer:dt.define.call(null,_s,"framebuffer")});function V(t,e){var n=0;A.procs.poll();var i=e.color;i&&(r.clearColor(+i[0]||0,+i[1]||0,+i[2]||0,+i[3]||0),n|=gs),"depth"in e&&(r.clearDepth(+e.depth),n|=ms),"stencil"in e&&(r.clearStencil(0|e.stencil),n|=vs),et(!!n,"called regl.clear with no buffer specified"),r.clear(n)}function W(t){if(et("object"===typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)G(e({framebuffer:t.framebuffer.faces[n]},t),V);else G(t,V);else V(null,t)}function H(t){function e(){var e=Es(O,t);function n(){var t=Es(O,n);O[t]=O[O.length-1],O.length-=1,O.length<=0&&B()}et(e>=0,"cannot cancel a frame twice"),O[e]=n}return et.type(t,"function","regl.frame() callback must be a function"),O.push(t),R(),{cancel:e}}function Y(){var t=T.viewport,e=T.scissor_box;t[0]=t[1]=e[0]=e[1]=0,p.viewportWidth=p.framebufferWidth=p.drawingBufferWidth=t[2]=e[2]=r.drawingBufferWidth,p.viewportHeight=p.framebufferHeight=p.drawingBufferHeight=t[3]=e[3]=r.drawingBufferHeight}function q(){p.tick+=1,p.time=K(),Y(),A.procs.poll()}function X(){S.refresh(),Y(),A.procs.refresh(),l&&l.update()}function K(){return(gt()-h)/1e3}function Z(t,e){var n;switch(et.type(e,"function","listener callback must be a function"),t){case"frame":return H(e);case"lost":n=P;break;case"restore":n=I;break;case"destroy":n=N;break;default:et.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}}X();var $=e(U,{clear:W,prop:dt.define.bind(null,_s),context:dt.define.bind(null,ws),this:dt.define.bind(null,Ss),draw:U({}),buffer:function(t){return y.create(t,ys,!1,!1)},elements:function(t){return _.create(t,!1)},texture:S.create2D,cube:S.createCube,renderbuffer:E.create,framebuffer:M.create,framebufferCube:M.createCube,vao:b.createVAO,attributes:i,frame:H,on:Z,limits:v,hasExtension:function(t){return v.extensions.indexOf(t.toLowerCase())>=0},read:C,destroy:z,_gl:r,_refresh:X,poll:function(){q(),l&&l.update()},now:K,stats:u});return n.onDone(null,$),$}return Ms}()},45408:function(t){"use strict";function e(t,e,n){var r=this;this._callback=t,this._args=n,this._interval=setInterval(t,e,this._args),this.reschedule=function(t){t=t||r._interval,r._interval&&clearInterval(r._interval),r._interval=setInterval(r._callback,t,r._args)},this.clear=function(){r._interval&&(clearInterval(r._interval),r._interval=void 0)},this.destroy=function(){r._interval&&clearInterval(r._interval),r._callback=void 0,r._interval=void 0,r._args=void 0}}t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");if(0<arguments.length)for(var t=new Array(arguments.length-2),n=0;n<t.length;n++)t[n]=arguments[n+2];return new e(arguments[0],arguments[1],t)}},91033:function(t,e,n){"use strict";n.r(e);var r="undefined"!=typeof Map?Map:(Object.defineProperty(i.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),i.prototype.get=function(t){return t=o(this.__entries__,t),t=this.__entries__[t],t&&t[1]},i.prototype.set=function(t,e){var n=o(this.__entries__,t);~n?this.__entries__[n][1]=e:this.__entries__.push([t,e])},i.prototype.delete=function(t){var e=this.__entries__;t=o(e,t);~t&&e.splice(t,1)},i.prototype.has=function(t){return!!~o(this.__entries__,t)},i.prototype.clear=function(){this.__entries__.splice(0)},i.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},i);function i(){this.__entries__=[]}function o(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}var a="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,s=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),u="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(s):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},c=2,l=["top","right","bottom","left","width","height","size","weight"],h="undefined"!=typeof MutationObserver,f=(d.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},d.prototype.removeObserver=function(t){var e=this.observers_;t=e.indexOf(t);~t&&e.splice(t,1),!e.length&&this.connected_&&this.disconnect_()},d.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},d.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),0<t.length},d.prototype.connect_=function(){a&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),h?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},d.prototype.disconnect_=function(){a&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},d.prototype.onTransitionEnd_=function(t){t=t.propertyName;var e=void 0===t?"":t;l.some((function(t){return!!~e.indexOf(t)}))&&this.refresh()},d.getInstance=function(){return this.instance_||(this.instance_=new d),this.instance_},d.instance_=null,d);function d(){function t(){o&&(o=!1,r()),a&&n()}function e(){u(t)}function n(){var t=Date.now();if(o){if(t-s<c)return;a=!0}else a=!(o=!0),setTimeout(e,i);s=t}var r,i,o,a,s;this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=(r=this.refresh.bind(this),a=o=!(i=20),s=0,n)}var p=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},g=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||s},m=w(0,0,0,0);function v(t){return parseFloat(t)||0}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+v(t["border-"+n+"-width"])}),0)}function b(t){var e,n,r,i,o,a,s=t.clientWidth,u=t.clientHeight;return s||u?(n=(e=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=t["padding-"+i];e[i]=v(o)}return e}(a=g(t).getComputedStyle(t))).left+e.right,r=e.top+e.bottom,i=v(a.width),o=v(a.height),"border-box"===a.boxSizing&&(Math.round(i+n)!==s&&(i-=y(a,"left","right")+n),Math.round(o+r)!==u)&&(o-=y(a,"top","bottom")+r),t!==g(t).document.documentElement&&(a=Math.round(i+n)-s,t=Math.round(o+r)-u,1!==Math.abs(a)&&(i-=a),1!==Math.abs(t))&&(o-=t),w(e.left,e.top,i,o)):m}var x="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof g(t).SVGGraphicsElement}:function(t){return t instanceof g(t).SVGElement&&"function"==typeof t.getBBox};function _(t){var e;return a?x(t)?w(0,0,(e=(e=t).getBBox()).width,e.height):b(t):m}function w(t,e,n,r){return{x:t,y:e,width:n,height:r}}E.prototype.isActive=function(){var t=_(this.target);return(this.contentRect_=t).width!==this.broadcastWidth||t.height!==this.broadcastHeight},E.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var S=E;function E(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=w(0,0,0,0),this.target=t}var M=function(t,e){n=e.x,r=e.y,o=e.width,e=e.height,i="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,i=Object.create(i.prototype),p(i,{x:n,y:r,width:o,height:e,top:r,right:n+o,bottom:e+r,left:n});var n,r,i,o=i;p(this,{target:t,contentRect:o})},A=(C.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof g(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new S(t)),this.controller_.addObserver(this),this.controller_.refresh())}},C.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof g(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},C.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},C.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},C.prototype.broadcastActive=function(){var t,e;this.hasActive()&&(t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new M(t.target,t.broadcastRect())})),this.callback_.call(t,e,t),this.clearActive())},C.prototype.clearActive=function(){this.activeObservations_.splice(0)},C.prototype.hasActive=function(){return 0<this.activeObservations_.length},C);function C(t,e,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}var T=new("undefined"!=typeof WeakMap?WeakMap:r),k=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=f.getInstance();e=new A(e,n,this);T.set(this,e)};["observe","unobserve","disconnect"].forEach((function(t){k.prototype[t]=function(){var e;return(e=T.get(this))[t].apply(e,arguments)}})),n=void 0!==s.ResizeObserver?s.ResizeObserver:k;e.default=n},86851:function(t,e,n){"use strict";var r=n(89594),i=Array.prototype.concat,o=Array.prototype.slice,a=t.exports=function(t){for(var e=[],n=0,a=t.length;n<a;n++){var s=t[n];r(s)?e=i.call(e,o.call(s)):e.push(s)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},89594:function(t){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||0<=t.length&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},31852:function(t){t.exports=function(t){var e=t._readableState;return e?e.objectMode||"number"==typeof t._duplexState?t.read():t.read(function(t){return t.buffer.length?(t.buffer.head?t.buffer.head.data:t.buffer[0]).length:t.length}(e)):null}},32553:function(t,e,n){"use strict";var r=n(40396).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"==typeof e||r.isEncoding!==i&&i(t))return e||t;throw new Error("Unknown encoding: "+t)}function a(t){var e;switch(this.encoding=o(t),this.encoding){case"utf16le":this.text=c,this.end=l,e=4;break;case"utf8":this.fillLast=u,e=4;break;case"base64":this.text=h,this.end=f,e=3;break;default:return this.write=d,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function u(t){var e,n=this.lastTotal-this.lastNeed,r=(e=this,128!=(192&(r=t)[0])?(e.lastNeed=0,"�"):1<e.lastNeed&&1<r.length?128!=(192&r[1])?(e.lastNeed=1,"�"):2<e.lastNeed&&2<r.length&&128!=(192&r[2])?(e.lastNeed=2,"�"):void 0:void 0);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,n,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);if(e=t.toString("utf16le",e),e){var n=e.charCodeAt(e.length-1);if(55296<=n&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],e.slice(0,-1)}return e}function l(t){var e;t=t&&t.length?this.write(t):"";return this.lastNeed?(e=this.lastTotal-this.lastNeed,t+this.lastChar.toString("utf16le",0,e)):t}function h(t,e){var n=(t.length-e)%3;return 0==n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function f(t){return t=t&&t.length?this.write(t):"",this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}(e.s=a).prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},a.prototype.end=function(t){return t=t&&t.length?this.write(t):"",this.lastNeed?t+"�":t},a.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(!(r<n)){var i=s(e[r]);if(0<=i)return 0<i&&(t.lastNeed=i-1),i;if(!(--r<n||-2===i)){if(0<=(i=s(e[r])))return 0<i&&(t.lastNeed=i-2),i;if(!(--r<n||-2===i)&&0<=(i=s(e[r])))return 0<i&&(2===i?i=0:t.lastNeed=i-3),i}}return 0}(this,t,e);return this.lastNeed?(this.lastTotal=n,n=t.length-(n-this.lastNeed),t.copy(this.lastChar,0,n),t.toString("utf8",e,n)):t.toString("utf8",e)},a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},40396:function(t,e,n){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=n(48764),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");return t=i(t),void 0!==e?"string"==typeof n?t.fill(e,n):t.fill(e):t.fill(0),t},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},5461:function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,{Z:function(){return r}})},44175:function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:function(){return r}})},86636:function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,{Z:function(){return r}})},76333:function(t,e,n){var r=n(89235).default;function i(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(n){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i,o,a,s;e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),r=new w(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return E()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n&&(n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}return r=h(r,e.iterator,n.arg),"throw"===r.type?(n.method="throw",n.arg=r.arg,n.delegate=null,f):(r=r.arg,r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,f):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f))}(n,a),n)){if(n===f)continue;return n}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(s="executing",n=h(i,o,a),"normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===f)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}o={};var m=(c(o,a,(function(){return this})),Object.getPrototypeOf),v=(m=m&&m(m(S([]))),m&&m!==n&&i.call(m,a)&&(o=m),g.prototype=d.prototype=Object.create(o));function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,a){function s(){return new e((function(n,s){!function n(o,a,s,u){var c;o=h(t[o],t,a);if("throw"!==o.type)return(a=(c=o.arg).value)&&"object"==r(a)&&i.call(a,"__await")?e.resolve(a.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(a).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,u)}));u(o.arg)}(o,a,n,s)}))}return n=n?n.then(s,s):s()}}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function S(t){if(t){var e,n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(n=function n(){for(;++e<t.length;)if(i.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=n}return{next:E}}function E(){return{value:void 0,done:!0}}return c(v,"constructor",p.prototype=g),c(g,"constructor",p),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){return t="function"==typeof t&&t.constructor,!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(v),t},e.awrap=function(t){return{__await:t}},y(b.prototype),c(b.prototype,s,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(v),c(v,u,"Generator"),c(v,a,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e,n=[];for(e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var a=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,_(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},89235:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},20523:function(t,e,n){n=n(76333)(),t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},31122:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(e=t,void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var t,r=i(e);return a(this,n?(t=i(this).constructor,Reflect.construct(r,arguments,t)):r.apply(this,arguments))}}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){var n;if(t)return"string"==typeof t?h(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Z:function(){return d}}),e=n(2212);var f="undefined"!=typeof window&&window.THREE?window.THREE:{LinearFilter:e.wem,Sprite:e.jyi,SpriteMaterial:e.xeV,Texture:e.xEZ},d=function(t){var e=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t);var n,i=s(a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"rgba(255, 255, 255, 1)",r=this,o=a;if(r instanceof o)return(r=i.call(this,new f.SpriteMaterial))._text="".concat(t),r._textHeight=e,r._color=n,r._backgroundColor=!1,r._padding=0,r._borderWidth=0,r._borderRadius=0,r._borderColor="white",r._strokeWidth=0,r._strokeColor="white",r._fontFace="Arial",r._fontSize=90,r._fontWeight="normal",r._canvas=document.createElement("canvas"),r._genCanvas(),r;throw new TypeError("Cannot call a class as a function")}return e=a,(t=[{key:"text",get:function(){return this._text},set:function(t){this._text=t,this._genCanvas()}},{key:"textHeight",get:function(){return this._textHeight},set:function(t){this._textHeight=t,this._genCanvas()}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this._genCanvas()}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._genCanvas()}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding=t,this._genCanvas()}},{key:"borderWidth",get:function(){return this._borderWidth},set:function(t){this._borderWidth=t,this._genCanvas()}},{key:"borderRadius",get:function(){return this._borderRadius},set:function(t){this._borderRadius=t,this._genCanvas()}},{key:"borderColor",get:function(){return this._borderColor},set:function(t){this._borderColor=t,this._genCanvas()}},{key:"fontFace",get:function(){return this._fontFace},set:function(t){this._fontFace=t,this._genCanvas()}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize=t,this._genCanvas()}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight=t,this._genCanvas()}},{key:"strokeWidth",get:function(){return this._strokeWidth},set:function(t){this._strokeWidth=t,this._genCanvas()}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(t){this._strokeColor=t,this._genCanvas()}},{key:"_genCanvas",value:function(){var t=this,e=this._canvas,n=e.getContext("2d"),r=Array.isArray(this.borderWidth)?this.borderWidth:[this.borderWidth,this.borderWidth],i=r.map((function(e){return e*t.fontSize*.1})),o=(Array.isArray(this.borderRadius)?this.borderRadius:[this.borderRadius,this.borderRadius,this.borderRadius,this.borderRadius]).map((function(e){return e*t.fontSize*.1})),a=Array.isArray(this.padding)?this.padding:[this.padding,this.padding],s=a.map((function(e){return e*t.fontSize*.1})),l=this.text.split("\n"),h="".concat(this.fontWeight," ").concat(this.fontSize,"px ").concat(this.fontFace),d=(n.font=h,Math.max.apply(Math,c(l.map((function(t){return n.measureText(t).width}))))),p=this.fontSize*l.length,g=(e.width=d+2*i[0]+2*s[0],e.height=p+2*i[1]+2*s[1],this.borderWidth&&(n.strokeStyle=this.borderColor,i[0]&&(p=i[0]/2,n.lineWidth=i[0],n.beginPath(),n.moveTo(p,o[0]),n.lineTo(p,e.height-o[3]),n.moveTo(e.width-p,o[1]),n.lineTo(e.width-p,e.height-o[2]),n.stroke()),i[1]&&(p=i[1]/2,n.lineWidth=i[1],n.beginPath(),n.moveTo(Math.max(i[0],o[0]),p),n.lineTo(e.width-Math.max(i[0],o[1]),p),n.moveTo(Math.max(i[0],o[3]),e.height-p),n.lineTo(e.width-Math.max(i[0],o[2]),e.height-p),n.stroke()),this.borderRadius)&&(m=(p=Math.max.apply(Math,c(i)))/2,n.lineWidth=p,n.beginPath(),[!!o[0]&&[o[0],m,m,o[0]],!!o[1]&&[e.width-o[1],e.width-m,m,o[1]],!!o[2]&&[e.width-o[2],e.width-m,e.height-m,e.height-o[2]],!!o[3]&&[o[3],m,e.height-m,e.height-o[3]]].filter((function(t){return t})).forEach((function(t){t=u(t,4);var e=t[0],r=t[1],i=t[2];t=t[3];n.moveTo(e,i),n.quadraticCurveTo(r,i,r,t)})),n.stroke()),this.backgroundColor&&(n.fillStyle=this.backgroundColor,this.borderRadius?(n.beginPath(),n.moveTo(i[0],o[0]),[[i[0],o[0],e.width-o[1],i[1],i[1],i[1]],[e.width-i[0],e.width-i[0],e.width-i[0],i[1],o[1],e.height-o[2]],[e.width-i[0],e.width-o[2],o[3],e.height-i[1],e.height-i[1],e.height-i[1]],[i[0],i[0],i[0],e.height-i[1],e.height-o[3],o[0]]].forEach((function(t){t=u(t,6);var e=t[0],r=t[1],i=t[2],o=t[3],a=t[4];t=t[5];n.quadraticCurveTo(e,o,r,a),n.lineTo(i,t)})),n.closePath(),n.fill()):n.fillRect(i[0],i[1],e.width-2*i[0],e.height-2*i[1])),n.translate.apply(n,c(i)),n.translate.apply(n,c(s)),n.font=h,n.fillStyle=this.color,n.textBaseline="bottom",0<this.strokeWidth),m=(p=(g&&(n.lineWidth=this.strokeWidth*this.fontSize/10,n.strokeStyle=this.strokeColor),l.forEach((function(e,r){var i=(d-n.measureText(e).width)/2;r=(r+1)*t.fontSize;g&&n.strokeText(e,i,r),n.fillText(e,i,r)})),this.material.map&&this.material.map.dispose(),this.material.map=new f.Texture(e)),p.minFilter=f.LinearFilter,p.needsUpdate=!0,this.textHeight*l.length+2*r[1]+2*a[1]);this.scale.set(m*e.width/e.height,m,0)}},{key:"clone",value:function(){return new this.constructor(this.text,this.textHeight,this.color).copy(this)}},{key:"copy",value:function(t){return f.Sprite.prototype.copy.call(this,t),this.color=t.color,this.backgroundColor=t.backgroundColor,this.padding=t.padding,this.borderWidth=t.borderWidth,this.borderColor=t.borderColor,this.fontFace=t.fontFace,this.fontSize=t.fontSize,this.fontWeight=t.fontWeight,this.strokeWidth=t.strokeWidth,this.strokeColor=t.strokeColor,this}}])&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(f.Sprite)},2212:function(t,e,n){"use strict";n.d(e,{Mig:function(){return au},_Li:function(){return f},ZzF:function(){return Ze},TlE:function(){return dr},u9r:function(){return Er},SUY:function(){return su},Ilk:function(){return Le},_3:function(){return vu},yj7:function(){return _s},m_w:function(){return yu},Ox3:function(){return ou},pBf:function(){return ce},a$l:function(){return mr},ZAu:function(){return ka},x12:function(){return cs},nls:function(){return rs},wem:function(){return nt},RsA:function(){return i},yGw:function(){return Mn},Kj0:function(){return Gr},vBJ:function(){return lr},YBo:function(){return Ps},iKG:function(){return bi},cPb:function(){return Zr},JOQ:function(){return ri},mXe:function(){return Es},_fP:function(){return Ye},iMs:function(){return du},xsS:function(){return Ba},jyz:function(){return Xr},Aip:function(){return bu},xo$:function(){return ks},$V:function(){return mu},jyi:function(){return es},xeV:function(){return Ua},QmN:function(){return o},xEZ:function(){return Ue},dpR:function(){return Js},Lcc:function(){return xu},rDY:function(){return qr},FM8:function(){return _e},Pa4:function(){return qe},dd2:function(){return Ve},CP7:function(){return Ra}});
/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const r="144",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,u=2,c=1,l=3,h=0,f=1,d=2,p=0,g=1,m=2,v=3,y=4,b=5,x=100,_=101,w=102,S=103,E=104,M=200,A=201,C=202,T=203,k=204,O=205,P=206,I=207,N=208,D=209,L=210,R=0,B=1,j=2,F=3,z=4,U=5,G=6,V=7,W=0,H=301,Y=302,q=303,X=304,K=306,Z=1e3,$=1001,J=1002,Q=1003,tt=1004,et=1005,nt=1006,rt=1007,it=1008,ot=1009,at=1010,st=1011,ut=1012,ct=1013,lt=1014,ht=1015,ft=1016,dt=1017,pt=1018,gt=1020,mt=1021,vt=1022,yt=1023,bt=1024,xt=1025,_t=1026,wt=1027,St=1028,Et=1029,Mt=1030,At=1031,Ct=1033,Tt=33776,kt=33777,Ot=33778,Pt=33779,It=35840,Nt=35841,Dt=35842,Lt=35843,Rt=36196,Bt=37492,jt=37496,Ft=37808,zt=37809,Ut=37810,Gt=37811,Vt=37812,Wt=37813,Ht=37814,Yt=37815,qt=37816,Xt=37817,Kt=37818,Zt=37819,$t=37820,Jt=37821,Qt=36492,te=3e3,ee=3001,ne=3201,re=0,ie=1,oe="srgb",ae="srgb-linear",se="300 es",ue=1035;class ce{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){var n;return void 0!==this._listeners&&void 0!==(n=this._listeners)[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){var n;void 0!==this._listeners&&void 0!==(t=this._listeners[t])&&-1!==(n=t.indexOf(e))&&t.splice(n,1)}dispatchEvent(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;var n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t);t.target=null}}}}const le=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],he=Math.PI/180,fe=180/Math.PI;function de(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(le[255&t]+le[t>>8&255]+le[t>>16&255]+le[t>>24&255]+"-"+le[255&e]+le[e>>8&255]+"-"+le[e>>16&15|64]+le[e>>24&255]+"-"+le[63&n|128]+le[n>>8&255]+"-"+le[n>>16&255]+le[n>>24&255]+le[255&r]+le[r>>8&255]+le[r>>16&255]+le[r>>24&255]).toLowerCase()}function pe(t,e,n){return Math.max(e,Math.min(n,t))}function ge(t,e){return(t%e+e)%e}function me(t,e,n){return(1-n)*t+n*e}function ve(t){return 0==(t&t-1)&&0!==t}function ye(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function be(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function xe(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}class _e{constructor(t=0,e=0){_e.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){var e=this.x,n=this.y;t=t.elements;return this.x=t[0]*e+t[3]*n+t[6],this.y=t[1]*e+t[4]*n+t[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){var e=this.x-t.x;t=this.y-t.y;return e*e+t*t}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){var n=Math.cos(e),r=(e=Math.sin(e),this.x-t.x),i=this.y-t.y;return this.x=r*n-i*e+t.x,this.y=r*e+i*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class we{constructor(){we.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,i,o,a,s,u){var c=this.elements;return c[0]=t,c[1]=r,c[2]=a,c[3]=e,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){var e=this.elements;t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){t=t.elements,e=e.elements;var n=this.elements,r=t[0],i=t[3],o=t[6],a=t[1],s=t[4],u=t[7],c=t[2],l=t[5],h=(t=t[8],e[0]),f=e[3],d=e[6],p=e[1],g=e[4],m=e[7],v=e[2],y=e[5];e=e[8];return n[0]=r*h+i*p+o*v,n[3]=r*f+i*g+o*y,n[6]=r*d+i*m+o*e,n[1]=a*h+s*p+u*v,n[4]=a*f+s*g+u*y,n[7]=a*d+s*m+u*e,n[2]=c*h+l*p+t*v,n[5]=c*f+l*g+t*y,n[8]=c*d+l*m+t*e,this}multiplyScalar(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7];t=t[8];return e*o*t-e*a*u-n*i*t+n*a*s+r*i*u-r*o*s}invert(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=c*o-a*u,h=a*s-c*i,f=u*i-o*s,d=e*l+n*h+r*f;return 0==d?this.set(0,0,0,0,0,0,0,0,0):(t[0]=l*(l=1/d),t[1]=(r*u-c*n)*l,t[2]=(a*n-r*o)*l,t[3]=h*l,t[4]=(c*e-r*s)*l,t[5]=(r*i-a*e)*l,t[6]=f*l,t[7]=(n*s-u*e)*l,t[8]=(o*e-n*i)*l,this)}transpose(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,a){var s=Math.cos(i);i=Math.sin(i);return this.set(n*s,n*i,-n*(s*o+i*a)+o+t,-r*i,r*s,-r*(-i*o+s*a)+a+e,0,0,1),this}scale(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){var e=Math.cos(t),n=(t=Math.sin(t),this.elements),r=n[0],i=n[3],o=n[6],a=n[1],s=n[4],u=n[7];return n[0]=e*r+t*a,n[3]=e*i+t*s,n[6]=e*o+t*u,n[1]=-t*r+e*a,n[4]=-t*i+e*s,n[7]=-t*o+e*u,this}translate(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){var e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function Se(t){for(let e=t.length-1;0<=e;--e)if(65535<=t[e])return 1}function Ee(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Me(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Ae(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Ce={srgb:{"srgb-linear":Me},"srgb-linear":{srgb:Ae}},Te={legacyMode:!0,get workingColorSpace(){return ae},set workingColorSpace(t){},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(Ce[e]&&void 0!==Ce[e][n])return e=Ce[e][n],t.r=e(t.r),t.g=e(t.g),t.b=e(t.b),t;throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},ke={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Oe={r:0,g:0,b:0},Pe={h:0,s:0,l:0},Ie={h:0,s:0,l:0};function Ne(t,e,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function De(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class Le{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=oe){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Te.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=ae){return this.r=t,this.g=e,this.b=n,Te.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=ae){return t=ge(t,1),e=pe(e,0,1),n=pe(n,0,1),0===e?this.r=this.g=this.b=n:(this.r=Ne(e=2*n-(n=n<=.5?n*(1+e):n+e-n*e),n,t+1/3),this.g=Ne(e,n,t),this.b=Ne(e,n,t-1/3)),Te.toWorkingColorSpace(this,r),this}setStyle(t,e=oe){function n(t){void 0!==t&&parseFloat(t)}if(u=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;var r,i,o,a=u[1],s=u[2];switch(a){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,Te.toWorkingColorSpace(this,e),n(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,Te.toWorkingColorSpace(this,e),n(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r=parseFloat(t[1])/360,i=parseFloat(t[2])/100,o=parseFloat(t[3])/100,n(t[4]),this.setHSL(r,i,o,e)}}else if(u=/^\#([A-Fa-f\d]+)$/.exec(t)){a=u[1];var u=a.length;if(3===u)return this.r=parseInt(a.charAt(0)+a.charAt(0),16)/255,this.g=parseInt(a.charAt(1)+a.charAt(1),16)/255,this.b=parseInt(a.charAt(2)+a.charAt(2),16)/255,Te.toWorkingColorSpace(this,e),this;if(6===u)return this.r=parseInt(a.charAt(0)+a.charAt(1),16)/255,this.g=parseInt(a.charAt(2)+a.charAt(3),16)/255,this.b=parseInt(a.charAt(4)+a.charAt(5),16)/255,Te.toWorkingColorSpace(this,e),this}return t&&0<t.length?this.setColorName(t,e):this}setColorName(t,e=oe){return t=ke[t.toLowerCase()],void 0!==t&&this.setHex(t,e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Me(t.r),this.g=Me(t.g),this.b=Me(t.b),this}copyLinearToSRGB(t){return this.r=Ae(t.r),this.g=Ae(t.g),this.b=Ae(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=oe){return Te.fromWorkingColorSpace(De(this,Oe),t),pe(255*Oe.r,0,255)<<16^pe(255*Oe.g,0,255)<<8^pe(255*Oe.b,0,255)<<0}getHexString(t=oe){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=ae){Te.fromWorkingColorSpace(De(this,Oe),e);var n=Oe.r,r=Oe.g,i=Oe.b,o=(e=Math.max(n,r,i),Math.min(n,r,i));let a,s;var u=(o+e)/2;if(o===e)a=0,s=0;else{var c=e-o;switch(s=u<=.5?c/(e+o):c/(2-e-o),e){case n:a=(r-i)/c+(r<i?6:0);break;case r:a=(i-n)/c+2;break;case i:a=(n-r)/c+4}a/=6}return t.h=a,t.s=s,t.l=u,t}getRGB(t,e=ae){return Te.fromWorkingColorSpace(De(this,Oe),e),t.r=Oe.r,t.g=Oe.g,t.b=Oe.b,t}getStyle(t=oe){return Te.fromWorkingColorSpace(De(this,Oe),t),t!==oe?`color(${t} ${Oe.r} ${Oe.g} ${Oe.b})`:`rgb(${255*Oe.r|0},${255*Oe.g|0},${255*Oe.b|0})`}offsetHSL(t,e,n){return this.getHSL(Pe),Pe.h+=t,Pe.s+=e,Pe.l+=n,this.setHSL(Pe.h,Pe.s,Pe.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Pe),t.getHSL(Ie);t=me(Pe.h,Ie.h,e);var n=me(Pe.s,Ie.s,e);e=me(Pe.l,Ie.l,e);return this.setHSL(t,n,e),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let Re;Le.NAMES=ke;class Be{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;var n;return 2048<(e=t instanceof HTMLCanvasElement?t:((Re=void 0===Re?Ee("canvas"):Re).width=t.width,Re.height=t.height,n=Re.getContext("2d"),t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),Re)).width||2048<e.height?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var e=Ee("canvas"),n=(e.width=t.width,e.height=t.height,e.getContext("2d")),r=(n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*Me(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){var o=t.data.slice(0);for(let t=0;t<o.length;t++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[t]=Math.floor(255*Me(o[t]/255)):o[t]=Me(o[t]);return{data:o,width:t.width,height:t.height}}return t}}class je{constructor(t=null){this.isSource=!0,this.uuid=de(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(Fe(r[e].image)):t.push(Fe(r[e]))}else t=Fe(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function Fe(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Be.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:{}}let ze=0;class Ue extends ce{constructor(t=Ue.DEFAULT_IMAGE,e=Ue.DEFAULT_MAPPING,n=$,r=$,i=nt,o=it,a=yt,s=ot,u=1,c=te){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ze++}),this.uuid=de(),this.name="",this.source=new je(t),this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=s,this.offset=new _e(0,0),this.repeat=new _e(1,1),this.center=new _e(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new we,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){var e,n=void 0===t||"string"==typeof t;return n||void 0===t.textures[this.uuid]?(e={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment},"{}"!==JSON.stringify(this.userData)&&(e.userData=this.userData),n||(t.textures[this.uuid]=e),e):t.textures[this.uuid]}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300===this.mapping){if(t.applyMatrix3(this.matrix),t.x<0||1<t.x)switch(this.wrapS){case Z:t.x=t.x-Math.floor(t.x);break;case $:t.x=t.x<0?0:1;break;case J:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||1<t.y)switch(this.wrapT){case Z:t.y=t.y-Math.floor(t.y);break;case $:t.y=t.y<0?0:1;break;case J:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}return t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}Ue.DEFAULT_IMAGE=null,Ue.DEFAULT_MAPPING=300;class Ge{constructor(t=0,e=0,n=0,r=1){Ge.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){var e=this.x,n=this.y,r=this.z,i=this.w;t=t.elements;return this.x=t[0]*e+t[4]*n+t[8]*r+t[12]*i,this.y=t[1]*e+t[5]*n+t[9]*r+t[13]*i,this.z=t[2]*e+t[6]*n+t[10]*r+t[14]*i,this.w=t[3]*e+t[7]*n+t[11]*r+t[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;t=t.elements;var o,a,s,u,c,l,h=t[0],f=t[4],d=t[8],p=t[1],g=t[5],m=t[9],v=t[2],y=t[6];t=t[10];if(Math.abs(f-p)<.01&&Math.abs(d-v)<.01&&Math.abs(m-y)<.01)Math.abs(f+p)<.1&&Math.abs(d+v)<.1&&Math.abs(m+y)<.1&&Math.abs(h+g+t-3)<.1?this.set(1,0,0,0):(e=Math.PI,s=(t+1)/2,u=(f+p)/4,c=(d+v)/4,l=(m+y)/4,(a=(g+1)/2)<(o=(h+1)/2)&&s<o?i=o<.01?(n=0,r=.707106781):(n=Math.sqrt(o),r=u/n,c/n):s<a?i=a<.01?(n=.707106781,r=0,.707106781):(r=Math.sqrt(a),n=u/r,l/r):s<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(s),n=c/i,r=l/i),this.set(n,r,i,e));else{let e=Math.sqrt((y-m)*(y-m)+(d-v)*(d-v)+(p-f)*(p-f));Math.abs(e)<.001&&(e=1),this.x=(y-m)/e,this.y=(d-v)/e,this.z=(p-f)/e,this.w=Math.acos((h+g+t-1)/2)}return this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ve extends ce{constructor(t,e,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Ge(0,0,t,e),this.scissorTest=!1,this.viewport=new Ge(0,0,t,e),t={width:t,height:e,depth:1},this.texture=new Ue(t,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:nt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;var e=Object.assign({},t.texture.image);return this.texture.source=new je(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class We extends Ue{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Q,this.minFilter=Q,this.wrapR=$,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class He extends Ue{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Q,this.minFilter=Q,this.wrapR=$,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ye{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,o,a){let s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3];n=i[o+0],r=i[o+1];var h=i[o+2];i=i[o+3];if(0===a)t[e+0]=s,t[e+1]=u,t[e+2]=c,t[e+3]=l;else if(1===a)t[e+0]=n,t[e+1]=r,t[e+2]=h,t[e+3]=i;else{if(l!==i||s!==n||u!==r||c!==h){let t=1-a;o=s*n+u*r+c*h+l*i;var f=0<=o?1:-1,d=1-o*o;o=(d>Number.EPSILON&&(d=Math.sqrt(d),o=Math.atan2(d,o*f),t=Math.sin(t*o)/d,a=Math.sin(a*o)/d),a*f);s=s*t+n*o,u=u*t+r*o,c=c*t+h*o,l=l*t+i*o,t===1-a&&(d=1/Math.sqrt(s*s+u*u+c*c+l*l),s*=d,u*=d,c*=d,l*=d)}t[e]=s,t[e+1]=u,t[e+2]=c,t[e+3]=l}}static multiplyQuaternionsFlat(t,e,n,r,i,o){var a=n[r],s=n[r+1],u=n[r+2],c=(n=n[r+3],r=i[o],i[o+1]),l=i[o+2];i=i[o+3];return t[e]=a*i+n*r+s*l-u*c,t[e+1]=s*i+n*c+u*r-a*l,t[e+2]=u*i+n*l+a*c-s*r,t[e+3]=n*i-a*r-s*c-u*l,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){var n=t._x,r=t._y,i=t._z,o=(t=t._order,Math.cos),a=Math.sin,s=o(n/2),u=o(r/2),c=o(i/2),l=a(n/2),h=a(r/2),f=a(i/2);switch(t){case"XYZ":this._x=l*u*c+s*h*f,this._y=s*h*c-l*u*f,this._z=s*u*f+l*h*c,this._w=s*u*c-l*h*f;break;case"YXZ":this._x=l*u*c+s*h*f,this._y=s*h*c-l*u*f,this._z=s*u*f-l*h*c,this._w=s*u*c+l*h*f;break;case"ZXY":this._x=l*u*c-s*h*f,this._y=s*h*c+l*u*f,this._z=s*u*f+l*h*c,this._w=s*u*c-l*h*f;break;case"ZYX":this._x=l*u*c-s*h*f,this._y=s*h*c+l*u*f,this._z=s*u*f-l*h*c,this._w=s*u*c+l*h*f;break;case"YZX":this._x=l*u*c+s*h*f,this._y=s*h*c+l*u*f,this._z=s*u*f-l*h*c,this._w=s*u*c-l*h*f;break;case"XZY":this._x=l*u*c-s*h*f,this._y=s*h*c-l*u*f,this._z=s*u*f+l*h*c,this._w=s*u*c+l*h*f}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){e/=2;var n=Math.sin(e);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(e),this._onChangeCallback(),this}setFromRotationMatrix(t){t=t.elements;var e=t[0],n=t[4],r=t[8],i=t[1],o=t[5],a=t[9],s=t[2],u=t[6],c=(t=t[10],e+o+t);return 0<c?(c=.5/Math.sqrt(c+1),this._w=.25/c,this._x=(u-a)*c,this._y=(r-s)*c,this._z=(i-n)*c):o<e&&t<e?(c=2*Math.sqrt(1+e-o-t),this._w=(u-a)/c,this._x=.25*c,this._y=(n+i)/c,this._z=(r+s)/c):t<o?(c=2*Math.sqrt(1+o-e-t),this._w=(r-s)/c,this._x=(n+i)/c,this._y=.25*c,this._z=(a+u)/c):(c=2*Math.sqrt(1+t-e-o),this._w=(i-n)/c,this._x=(r+s)/c,this._y=(a+u)/c,this._z=.25*c),this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=n,this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(pe(this.dot(t),-1,1)))}rotateTowards(t,e){var n=this.angleTo(t);return 0!==n&&(e=Math.min(1,e/n),this.slerp(t,e)),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){var n=t._x,r=t._y,i=t._z,o=(t=t._w,e._x),a=e._y,s=e._z;e=e._w;return this._x=n*e+t*o+r*s-i*a,this._y=r*e+t*a+i*o-n*s,this._z=i*e+t*s+n*a-r*o,this._w=t*e-n*o-r*a-i*s,this._onChangeCallback(),this}slerp(t,e){if(0!==e){if(1===e)return this.copy(t);var n,r,i=this._x,o=this._y,a=this._z,s=this._w;let u=s*t._w+i*t._x+o*t._y+a*t._z;u<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,u=-u):this.copy(t),1<=u?(this._w=s,this._x=i,this._y=o,this._z=a):((t=1-u*u)<=Number.EPSILON?(this._w=(n=1-e)*s+e*this._w,this._x=n*i+e*this._x,this._y=n*o+e*this._y,this._z=n*a+e*this._z,this.normalize()):(n=Math.sqrt(t),t=Math.atan2(n,u),r=Math.sin((1-e)*t)/n,e=Math.sin(e*t)/n,this._w=s*r+this._w*e,this._x=i*r+this._x*e,this._y=o*r+this._y*e,this._z=a*r+this._z*e),this._onChangeCallback())}return this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){var t=Math.random(),e=Math.sqrt(1-t),n=(t=Math.sqrt(t),2*Math.PI*Math.random()),r=2*Math.PI*Math.random();return this.set(e*Math.cos(n),t*Math.sin(r),t*Math.cos(r),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class qe{constructor(t=0,e=0,n=0){qe.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Ke.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Ke.setFromAxisAngle(t,e))}applyMatrix3(t){var e=this.x,n=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[3]*n+t[6]*r,this.y=t[1]*e+t[4]*n+t[7]*r,this.z=t[2]*e+t[5]*n+t[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){var e=this.x,n=this.y,r=this.z,i=(t=t.elements,1/(t[3]*e+t[7]*n+t[11]*r+t[15]));return this.x=(t[0]*e+t[4]*n+t[8]*r+t[12])*i,this.y=(t[1]*e+t[5]*n+t[9]*r+t[13])*i,this.z=(t[2]*e+t[6]*n+t[10]*r+t[14])*i,this}applyQuaternion(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=(t=t.w,t*e+o*r-a*n),u=t*n+a*e-i*r,c=t*r+i*n-o*e;e=-i*e-o*n-a*r;return this.x=s*t+e*-i+u*-a-c*-o,this.y=u*t+e*-o+c*-i-s*-a,this.z=c*t+e*-a+s*-o-u*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){var e=this.x,n=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[4]*n+t[8]*r,this.y=t[1]*e+t[5]*n+t[9]*r,this.z=t[2]*e+t[6]*n+t[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){var n=t.x,r=t.y,i=(t=t.z,e.x),o=e.y;e=e.z;return this.x=r*e-t*o,this.y=t*i-n*e,this.z=n*o-r*i,this}projectOnVector(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))}projectOnPlane(t){return Xe.copy(this).projectOnVector(t),this.sub(Xe)}reflect(t){return this.sub(Xe.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,Math.acos(pe(t,-1,1)))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){var e=this.x-t.x,n=this.y-t.y;t=this.z-t.z;return e*e+n*n+t*t}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length();t=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=t,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){var t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Xe=new qe,Ke=new Ye;class Ze{constructor(t=new qe(1/0,1/0,1/0),e=new qe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let l=0,h=t.length;l<h;l+=3){var s=t[l],u=t[l+1],c=t[l+2];s<e&&(e=s),u<n&&(n=u),c<r&&(r=c),s>i&&(i=s),u>o&&(o=u),c>a&&(a=c)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let l=0,h=t.count;l<h;l++){var s=t.getX(l),u=t.getY(l),c=t.getZ(l);s<e&&(e=s),u<n&&(n=u),c<r&&(r=c),s>i&&(i=s),u>o&&(o=u),c>a&&(a=c)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){return e=Je.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);var n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){var r=n.attributes.position;for(let e=0,n=r.count;e<n;e++)Je.fromBufferAttribute(r,e).applyMatrix4(t.matrixWorld),this.expandByPoint(Je)}else null===n.boundingBox&&n.computeBoundingBox(),Qe.copy(n.boundingBox),Qe.applyMatrix4(t.matrixWorld),this.union(Qe);var i=t.children;for(let o=0,a=i.length;o<a;o++)this.expandByObject(i[o],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Je),Je.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return n=0<t.normal.x?(e=t.normal.x*this.min.x,t.normal.x*this.max.x):(e=t.normal.x*this.max.x,t.normal.x*this.min.x),0<t.normal.y?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){return!this.isEmpty()&&(this.getCenter(sn),un.subVectors(this.max,sn),tn.subVectors(t.a,sn),en.subVectors(t.b,sn),nn.subVectors(t.c,sn),rn.subVectors(en,tn),on.subVectors(nn,en),an.subVectors(tn,nn),!!hn([0,-rn.z,rn.y,0,-on.z,on.y,0,-an.z,an.y,rn.z,0,-rn.x,on.z,0,-on.x,an.z,0,-an.x,-rn.y,rn.x,0,-on.y,on.x,0,-an.y,an.x,0],tn,en,nn,un))&&!!hn([1,0,0,0,1,0,0,0,1],tn,en,nn,un)&&(cn.crossVectors(rn,on),hn([cn.x,cn.y,cn.z],tn,en,nn,un))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Je.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(Je).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||($e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),$e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),$e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),$e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),$e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),$e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),$e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),$e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints($e)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const $e=[new qe,new qe,new qe,new qe,new qe,new qe,new qe,new qe],Je=new qe,Qe=new Ze,tn=new qe,en=new qe,nn=new qe,rn=new qe,on=new qe,an=new qe,sn=new qe,un=new qe,cn=new qe,ln=new qe;function hn(t,e,n,r,i){for(let c=0,l=t.length-3;c<=l;c+=3){ln.fromArray(t,c);var o=i.x*Math.abs(ln.x)+i.y*Math.abs(ln.y)+i.z*Math.abs(ln.z),a=e.dot(ln),s=n.dot(ln),u=r.dot(ln);if(Math.max(-Math.max(a,s,u),Math.min(a,s,u))>o)return!1}return!0}const fn=new Ze,dn=new qe,pn=new qe,gn=new qe;class mn{constructor(t=new qe,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){var n=this.center;void 0!==e?n.copy(e):fn.setFromPoints(t).getCenter(n);let r=0;for(let i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){var n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?t.makeEmpty():(t.set(this.center,this.center),t.expandByScalar(this.radius)),t}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){gn.subVectors(t,this.center);var e;t=gn.lengthSq();return t>this.radius*this.radius&&(e=.5*((t=Math.sqrt(t))-this.radius),this.center.add(gn.multiplyScalar(e/t)),this.radius+=e),this}union(t){return(!0===this.center.equals(t.center)?pn.set(0,0,1):pn.subVectors(t.center,this.center).normalize()).multiplyScalar(t.radius),this.expandByPoint(dn.copy(t.center).add(pn)),this.expandByPoint(dn.copy(t.center).sub(pn)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const vn=new qe,yn=new qe,bn=new qe,xn=new qe,_n=new qe,wn=new qe,Sn=new qe;class En{constructor(t=new qe,e=new qe(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,vn)),this}closestPointToPoint(t,e){return e.subVectors(t,this.origin),t=e.dot(this.direction),t<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){var e=vn.subVectors(t,this.origin).dot(this.direction);return(e<0?this.origin:(vn.copy(this.direction).multiplyScalar(e).add(this.origin),vn)).distanceToSquared(t)}distanceSqToSegment(t,e,n,r){yn.copy(t).add(e).multiplyScalar(.5),bn.copy(e).sub(t).normalize(),xn.copy(this.origin).sub(yn);t=.5*t.distanceTo(e),e=-this.direction.dot(bn);var i=xn.dot(this.direction),o=-xn.dot(bn),a=xn.lengthSq(),s=Math.abs(1-e*e);let u,c,l,h;return l=0<s?(u=e*o-i,c=e*i-o,h=t*s,0<=u?c>=-h?c<=h?(s=1/s,u*=s,c*=s,u*(u+e*c+2*i)+c*(e*u+c+2*o)+a):(c=t,-(u=Math.max(0,-(e*c+i)))*u+c*(c+2*o)+a):(c=-t,-(u=Math.max(0,-(e*c+i)))*u+c*(c+2*o)+a):c<=-h?(u=Math.max(0,-(-e*t+i)),c=0<u?-t:Math.min(Math.max(-t,-o),t),-u*u+c*(c+2*o)+a):c<=h?(u=0,(c=Math.min(Math.max(-t,-o),t))*(c+2*o)+a):(u=Math.max(0,-(e*t+i)),c=0<u?t:Math.min(Math.max(-t,-o),t),-u*u+c*(c+2*o)+a)):(c=0<e?-t:t,-(u=Math.max(0,-(e*c+i)))*u+c*(c+2*o)+a),n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(bn).multiplyScalar(c).add(yn),l}intersectSphere(t,e){vn.subVectors(t.center,this.origin);var n=vn.dot(this.direction),r=vn.dot(vn)-n*n;t=t.radius*t.radius;return t<r||(r=n+(t=Math.sqrt(t-r)),(n-=t)<0&&r<0)?null:n<0?this.at(r,e):this.at(n,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null}intersectPlane(t,e){return t=this.distanceToPlane(t),null===t?null:this.at(t,e)}intersectsPlane(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,o,a,s;var u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return r=0<=u?(n=(t.min.x-h.x)*u,(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,(t.min.x-h.x)*u),o=0<=c?(i=(t.min.y-h.y)*c,(t.max.y-h.y)*c):(i=(t.max.y-h.y)*c,(t.min.y-h.y)*c),n>o||i>r||((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),s=0<=l?(a=(t.min.z-h.z)*l,(t.max.z-h.z)*l):(a=(t.max.z-h.z)*l,(t.min.z-h.z)*l),n>s)||a>r||((a>n||n!=n)&&(n=a),(r=s<r||r!=r?s:r)<0)?null:this.at(0<=n?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,vn)}intersectTriangle(t,e,n,r,i){_n.subVectors(e,t),wn.subVectors(n,t),Sn.crossVectors(_n,wn);let o,a=this.direction.dot(Sn);if(0<a){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}return xn.subVectors(this.origin,t),e=o*this.direction.dot(wn.crossVectors(xn,wn)),e<0||(n=o*this.direction.dot(_n.cross(xn)))<0||e+n>a||(r=-o*xn.dot(Sn))<0?null:this.at(r/a,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Mn{constructor(){Mn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,g){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=r,m[1]=i,m[5]=o,m[9]=a,m[13]=s,m[2]=u,m[6]=c,m[10]=l,m[14]=h,m[3]=f,m[7]=d,m[11]=p,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Mn).fromArray(this.elements)}copy(t){var e=this.elements;t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this}copyPosition(t){var e=this.elements;t=t.elements;return e[12]=t[12],e[13]=t[13],e[14]=t[14],this}setFromMatrix3(t){return t=t.elements,this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){var e=this.elements,n=t.elements,r=1/An.setFromMatrixColumn(t,0).length(),i=1/An.setFromMatrixColumn(t,1).length();t=1/An.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*t,e[9]=n[9]*t,e[10]=n[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){var e,n,r,i,o=this.elements,a=t.x,s=t.y,u=t.z,c=Math.cos(a),l=(a=Math.sin(a),Math.cos(s)),h=(s=Math.sin(s),Math.cos(u));u=Math.sin(u);return"XYZ"===t.order?(n=c*h,r=c*u,i=a*h,e=a*u,o[0]=l*h,o[4]=-l*u,o[8]=s,o[1]=r+i*s,o[5]=n-e*s,o[9]=-a*l,o[2]=e-n*s,o[6]=i+r*s,o[10]=c*l):"YXZ"===t.order?(e=l*u,n=s*h,o[0]=(i=l*h)+(r=s*u)*a,o[4]=n*a-e,o[8]=c*s,o[1]=c*u,o[5]=c*h,o[9]=-a,o[2]=e*a-n,o[6]=r+i*a,o[10]=c*l):"ZXY"===t.order?(e=l*u,n=s*h,o[0]=(r=l*h)-(i=s*u)*a,o[4]=-c*u,o[8]=n+e*a,o[1]=e+n*a,o[5]=c*h,o[9]=i-r*a,o[2]=-c*s,o[6]=a,o[10]=c*l):"ZYX"===t.order?(e=c*h,n=c*u,i=a*h,r=a*u,o[0]=l*h,o[4]=i*s-n,o[8]=e*s+r,o[1]=l*u,o[5]=r*s+e,o[9]=n*s-i,o[2]=-s,o[6]=a*l,o[10]=c*l):"YZX"===t.order?(r=c*l,e=c*s,n=a*l,i=a*s,o[0]=l*h,o[4]=i-r*u,o[8]=n*u+e,o[1]=u,o[5]=c*h,o[9]=-a*h,o[2]=-s*h,o[6]=e*u+n,o[10]=r-i*u):"XZY"===t.order&&(e=c*l,n=c*s,r=a*l,i=a*s,o[0]=l*h,o[4]=-u,o[8]=s*h,o[1]=e*u+i,o[5]=c*h,o[9]=n*u-r,o[2]=r*u-n,o[6]=a*h,o[10]=i*u+e),o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Tn,t,kn)}lookAt(t,e,n){var r=this.elements;return In.subVectors(t,e),0===In.lengthSq()&&(In.z=1),In.normalize(),On.crossVectors(n,In),0===On.lengthSq()&&(1===Math.abs(n.z)?In.x+=1e-4:In.z+=1e-4,In.normalize(),On.crossVectors(n,In)),On.normalize(),Pn.crossVectors(In,On),r[0]=On.x,r[4]=Pn.x,r[8]=In.x,r[1]=On.y,r[5]=Pn.y,r[9]=In.y,r[2]=On.z,r[6]=Pn.z,r[10]=In.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){t=t.elements,e=e.elements;var n=this.elements,r=t[0],i=t[4],o=t[8],a=t[12],s=t[1],u=t[5],c=t[9],l=t[13],h=t[2],f=t[6],d=t[10],p=t[14],g=t[3],m=t[7],v=t[11],y=(t=t[15],e[0]),b=e[4],x=e[8],_=e[12],w=e[1],S=e[5],E=e[9],M=e[13],A=e[2],C=e[6],T=e[10],k=e[14],O=e[3],P=e[7],I=e[11];e=e[15];return n[0]=r*y+i*w+o*A+a*O,n[4]=r*b+i*S+o*C+a*P,n[8]=r*x+i*E+o*T+a*I,n[12]=r*_+i*M+o*k+a*e,n[1]=s*y+u*w+c*A+l*O,n[5]=s*b+u*S+c*C+l*P,n[9]=s*x+u*E+c*T+l*I,n[13]=s*_+u*M+c*k+l*e,n[2]=h*y+f*w+d*A+p*O,n[6]=h*b+f*S+d*C+p*P,n[10]=h*x+f*E+d*T+p*I,n[14]=h*_+f*M+d*k+p*e,n[3]=g*y+m*w+v*A+t*O,n[7]=g*b+m*S+v*C+t*P,n[11]=g*x+m*E+v*T+t*I,n[15]=g*_+m*M+v*k+t*e,this}multiplyScalar(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],c=t[2],l=t[6],h=t[10],f=t[14];return t[3]*(+i*s*l-r*u*l-i*a*h+n*u*h+r*a*f-n*s*f)+t[7]*(+e*s*f-e*u*h+i*o*h-r*o*f+r*u*c-i*s*c)+t[11]*(+e*u*l-e*a*f-i*o*l+n*o*f+i*a*c-n*u*c)+t[15]*(-r*a*c-e*s*l+e*a*h+r*o*l-n*o*h+n*s*c)}transpose(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],p=t[13],g=t[14],m=t[15],v=l*g*u-p*h*u+p*s*f-a*g*f-l*s*m+a*h*m,y=d*h*u-c*g*u-d*s*f+o*g*f+c*s*m-o*h*m,b=c*p*u-d*l*u+d*a*f-o*p*f-c*a*m+o*l*m,x=d*l*s-c*p*s-d*a*h+o*p*h+c*a*g-o*l*g,_=e*v+n*y+r*b+i*x;return 0==_?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(t[0]=v*(v=1/_),t[1]=(p*h*i-l*g*i-p*r*f+n*g*f+l*r*m-n*h*m)*v,t[2]=(a*g*i-p*s*i+p*r*u-n*g*u-a*r*m+n*s*m)*v,t[3]=(l*s*i-a*h*i-l*r*u+n*h*u+a*r*f-n*s*f)*v,t[4]=y*v,t[5]=(c*g*i-d*h*i+d*r*f-e*g*f-c*r*m+e*h*m)*v,t[6]=(d*s*i-o*g*i-d*r*u+e*g*u+o*r*m-e*s*m)*v,t[7]=(o*h*i-c*s*i+c*r*u-e*h*u-o*r*f+e*s*f)*v,t[8]=b*v,t[9]=(d*l*i-c*p*i-d*n*f+e*p*f+c*n*m-e*l*m)*v,t[10]=(o*p*i-d*a*i+d*n*u-e*p*u-o*n*m+e*a*m)*v,t[11]=(c*a*i-o*l*i-c*n*u+e*l*u+o*n*f-e*a*f)*v,t[12]=x*v,t[13]=(c*p*r-d*l*r+d*n*h-e*p*h-c*n*g+e*l*g)*v,t[14]=(d*a*r-o*p*r-d*n*s+e*p*s+o*n*g-e*a*g)*v,t[15]=(o*l*r-c*a*r+c*n*s-e*l*s-o*n*h+e*a*h)*v,this)}scale(t){var e=this.elements,n=t.x,r=t.y;t=t.z;return e[0]*=n,e[4]*=r,e[8]*=t,e[1]*=n,e[5]*=r,e[9]*=t,e[2]*=n,e[6]*=r,e[10]*=t,e[3]*=n,e[7]*=r,e[11]*=t,this}getMaxScaleOnAxis(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6];t=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,t))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){var e=Math.cos(t);t=Math.sin(t);return this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this}makeRotationY(t){var e=Math.cos(t);t=Math.sin(t);return this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this}makeRotationZ(t){var e=Math.cos(t);t=Math.sin(t);return this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){var n=Math.cos(e),r=(e=Math.sin(e),1-n),i=t.x,o=t.y,a=(t=t.z,r*i),s=r*o;return this.set(a*i+n,a*o-e*t,a*t+e*o,0,a*o+e*t,s*o+n,s*t-e*i,0,a*t-e*o,s*t+e*i,r*t*t+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){var r=this.elements,i=e._x,o=e._y,a=e._z,s=(e=e._w,i+i),u=o+o,c=a+a,l=i*s,h=i*u,f=(i=i*c,o*u),d=(o=o*c,a=a*c,s=e*s,u=e*u,e=e*c,c=n.x,n.y);n=n.z;return r[0]=(1-(f+a))*c,r[1]=(h+e)*c,r[2]=(i-u)*c,r[3]=0,r[4]=(h-e)*d,r[5]=(1-(l+a))*d,r[6]=(o+s)*d,r[7]=0,r[8]=(i+u)*n,r[9]=(o-s)*n,r[10]=(1-(l+f))*n,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){var r=this.elements;let i=An.set(r[0],r[1],r[2]).length();var o=An.set(r[4],r[5],r[6]).length(),a=An.set(r[8],r[9],r[10]).length(),s=(t=(this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Cn.copy(this),1/i),r=1/o,1/a);return Cn.elements[0]*=t,Cn.elements[1]*=t,Cn.elements[2]*=t,Cn.elements[4]*=r,Cn.elements[5]*=r,Cn.elements[6]*=r,Cn.elements[8]*=s,Cn.elements[9]*=s,Cn.elements[10]*=s,e.setFromRotationMatrix(Cn),n.x=i,n.y=o,n.z=a,this}makePerspective(t,e,n,r,i,o){var a=this.elements,s=2*i/(n-r),u=(e+t)/(e-t);n=(n+r)/(n-r),r=-(o+i)/(o-i),o=-2*o*i/(o-i);return a[0]=2*i/(e-t),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=s,a[9]=n,a[13]=0,a[2]=0,a[6]=0,a[10]=r,a[14]=o,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),c=1/(o-i);e=(e+t)*s,t=(n+r)*u,n=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-e,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-t,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-n,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){var e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const An=new qe,Cn=new Mn,Tn=new qe(0,0,0),kn=new qe(1,1,1),On=new qe,Pn=new qe,In=new qe,Nn=new Mn,Dn=new Ye;class Ln{constructor(t=0,e=0,n=0,r=Ln.DefaultOrder){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){t=t.elements;var r=t[0],i=t[4],o=t[8],a=t[1],s=t[5],u=t[9],c=t[2],l=t[6],h=t[10];switch(e){case"XYZ":this._y=Math.asin(pe(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-i,r)):(this._x=Math.atan2(l,s),this._z=0);break;case"YXZ":this._x=Math.asin(-pe(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(a,s)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(pe(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-i,s)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-pe(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(l,h),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-i,s));break;case"YZX":this._z=Math.asin(pe(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,s),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-pe(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(l,s),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-u,h),this._y=0)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Nn.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Nn,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Dn.setFromEuler(this),this.setFromQuaternion(Dn,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){}}Ln.DefaultOrder="XYZ",Ln.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Rn{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Bn=0;const jn=new qe,Fn=new Ye,zn=new Mn,Un=new qe,Gn=new qe,Vn=new qe,Wn=new Ye,Hn=new qe(1,0,0),Yn=new qe(0,1,0),qn=new qe(0,0,1),Xn={type:"added"},Kn={type:"removed"};class Zn extends ce{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Bn++}),this.uuid=de(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Zn.DefaultUp.clone();var t=new qe;const e=new Ln,n=new Ye;var r=new qe(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Mn},normalMatrix:{value:new we}}),this.matrix=new Mn,this.matrixWorld=new Mn,this.matrixAutoUpdate=Zn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Zn.DefaultMatrixWorldAutoUpdate,this.layers=new Rn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Fn.setFromAxisAngle(t,e),this.quaternion.multiply(Fn),this}rotateOnWorldAxis(t,e){return Fn.setFromAxisAngle(t,e),this.quaternion.premultiply(Fn),this}rotateX(t){return this.rotateOnAxis(Hn,t)}rotateY(t){return this.rotateOnAxis(Yn,t)}rotateZ(t){return this.rotateOnAxis(qn,t)}translateOnAxis(t,e){return jn.copy(t).applyQuaternion(this.quaternion),this.position.add(jn.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Hn,t)}translateY(t){return this.translateOnAxis(Yn,t)}translateZ(t){return this.translateOnAxis(qn,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(zn.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Un.copy(t):Un.set(t,e,n),t=this.parent,this.updateWorldMatrix(!0,!1),Gn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zn.lookAt(Gn,Un,this.up):zn.lookAt(Un,Gn,this.up),this.quaternion.setFromRotationMatrix(zn),t&&(zn.extractRotation(t.matrixWorld),Fn.setFromRotationMatrix(zn),this.quaternion.premultiply(Fn.invert()))}add(t){if(1<arguments.length)for(let e=0;e<arguments.length;e++)this.add(arguments[e]);else t!==this&&t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),(t.parent=this).children.push(t),t.dispatchEvent(Xn));return this}remove(t){if(1<arguments.length)for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);else{var e=this.children.indexOf(t);-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Kn))}return this}removeFromParent(){var t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Kn)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),zn.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),zn.multiply(t.parent.matrixWorld)),t.applyMatrix4(zn),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let r=0,i=this.children.length;r<i;r++){var n=this.children[r].getObjectByProperty(t,e);if(void 0!==n)return n}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gn,t,Vn),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gn,Wn,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);var e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1!==this.visible){t(this);var e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}}traverseAncestors(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));var e=this.children;for(let r=0,i=e.length;r<i;r++){var n=e[r];!0!==n.matrixWorldAutoUpdate&&!0!==t||n.updateMatrixWorld(t)}}updateWorldMatrix(t,e){var n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){var r=this.children;for(let t=0,e=r.length;t<e;t++){var i=r[t];!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!1,!0)}}}toJSON(t){var e,n,r,i,o,a,s=void 0===t||"string"==typeof t,u={},c=(s&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},u.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"}),{});function l(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(c.uuid=this.uuid,c.type=this.type,""!==this.name&&(c.name=this.name),!0===this.castShadow&&(c.castShadow=!0),!0===this.receiveShadow&&(c.receiveShadow=!0),!1===this.visible&&(c.visible=!1),!1===this.frustumCulled&&(c.frustumCulled=!1),0!==this.renderOrder&&(c.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData),c.layers=this.layers.mask,c.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(c.matrixAutoUpdate=!1),this.isInstancedMesh&&(c.type="InstancedMesh",c.count=this.count,c.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor)&&(c.instanceColor=this.instanceColor.toJSON()),this.isScene)this.background&&(this.background.isColor?c.background=this.background.toJSON():this.background.isTexture&&(c.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(c.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){c.geometry=l(t.geometries,this.geometry);var h=this.geometry.parameters;if(void 0!==h&&void 0!==h.shapes){var f=h.shapes;if(Array.isArray(f))for(let e=0,n=f.length;e<n;e++){var d=f[e];l(t.shapes,d)}else l(t.shapes,f)}}if(this.isSkinnedMesh&&(c.bindMode=this.bindMode,c.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton)&&(l(t.skeletons,this.skeleton),c.skeleton=this.skeleton.uuid),void 0!==this.material)if(Array.isArray(this.material)){var p=[];for(let e=0,n=this.material.length;e<n;e++)p.push(l(t.materials,this.material[e]));c.material=p}else c.material=l(t.materials,this.material);if(0<this.children.length){c.children=[];for(let e=0;e<this.children.length;e++)c.children.push(this.children[e].toJSON(t).object)}if(0<this.animations.length){c.animations=[];for(let e=0;e<this.animations.length;e++){var g=this.animations[e];c.animations.push(l(t.animations,g))}}return s&&(h=m(t.geometries),s=m(t.materials),e=m(t.textures),n=m(t.images),r=m(t.shapes),i=m(t.skeletons),o=m(t.animations),a=m(t.nodes),0<h.length&&(u.geometries=h),0<s.length&&(u.materials=s),0<e.length&&(u.textures=e),0<n.length&&(u.images=n),0<r.length&&(u.shapes=r),0<i.length&&(u.skeletons=i),0<o.length&&(u.animations=o),0<a.length)&&(u.nodes=a),u.object=c,u;function m(t){var e=[];for(const r in t){var n=t[r];delete n.metadata,e.push(n)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let r=0;r<t.children.length;r++){var n=t.children[r];this.add(n.clone())}return this}}Zn.DefaultUp=new qe(0,1,0),Zn.DefaultMatrixAutoUpdate=!0,Zn.DefaultMatrixWorldAutoUpdate=!0;const $n=new qe,Jn=new qe,Qn=new qe,tr=new qe,er=new qe,nr=new qe,rr=new qe,ir=new qe,or=new qe,ar=new qe;class sr{constructor(t=new qe,e=new qe,n=new qe){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){return r.subVectors(n,e),$n.subVectors(t,e),r.cross($n),n=r.lengthSq(),0<n?r.multiplyScalar(1/Math.sqrt(n)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){$n.subVectors(r,e),Jn.subVectors(n,e),Qn.subVectors(t,e);r=$n.dot($n),n=$n.dot(Jn),t=$n.dot(Qn),e=Jn.dot(Jn);var o=Jn.dot(Qn),a=r*e-n*n;return 0==a?i.set(-2,-1,-1):i.set(1-(e=(e*t-n*o)*(i=1/a))-(a=(r*o-n*t)*i),a,e)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,tr),0<=tr.x&&0<=tr.y&&tr.x+tr.y<=1}static getUV(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,tr),s.set(0,0),s.addScaledVector(i,tr.x),s.addScaledVector(o,tr.y),s.addScaledVector(a,tr.z),s}static isFrontFacing(t,e,n,r){return $n.subVectors(n,e),Jn.subVectors(t,e),$n.cross(Jn).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return $n.subVectors(this.c,this.b),Jn.subVectors(this.a,this.b),.5*$n.cross(Jn).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return sr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return sr.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return sr.getUV(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return sr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return sr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){var n=this.a,r=this.b,i=this.c;let o,a;er.subVectors(r,n),nr.subVectors(i,n),ir.subVectors(t,n);var s=er.dot(ir),u=nr.dot(ir);if(s<=0&&u<=0)return e.copy(n);or.subVectors(t,r);var c=er.dot(or),l=nr.dot(or);if(0<=c&&l<=c)return e.copy(r);var h=s*l-c*u;if(h<=0&&0<=s&&c<=0)return o=s/(s-c),e.copy(n).addScaledVector(er,o);ar.subVectors(t,i);t=er.dot(ar);var f=nr.dot(ar);return 0<=f&&t<=f?e.copy(i):(s=t*u-s*f)<=0&&0<=u&&f<=0?(a=u/(u-f),e.copy(n).addScaledVector(nr,a)):(u=c*f-t*l)<=0&&0<=l-c&&0<=t-f?(rr.subVectors(i,r),a=(l-c)/(l-c+(t-f)),e.copy(r).addScaledVector(rr,a)):(i=1/(u+s+h),o=s*i,a=h*i,e.copy(n).addScaledVector(er,o).addScaledVector(nr,a))}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let ur=0;class cr extends ce{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ur++}),this.uuid=de(),this.name="",this.type="Material",this.blending=g,this.side=h,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=k,this.blendDst=O,this.blendEquation=x,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=F,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){0<this._alphaTest!=0<t&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const r in t){var e,n=t[r];void 0!==n&&void 0!==(e=this[r])&&(e&&e.isColor?e.set(n):e&&e.isVector3&&n&&n.isVector3?e.copy(n):this[r]=n)}}toJSON(t){var e=void 0===t||"string"==typeof t,n=(e&&(t={textures:{},images:{}}),{metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}});function r(t){var e=[];for(const r in t){var n=t[r];delete n.metadata,e.push(n)}return e}return n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine)&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==g&&(n.blending=this.blending),this.side!==h&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e&&(e=r(t.textures),t=r(t.images),0<e.length&&(n.textures=e),0<t.length)&&(n.images=t),n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes;let n=null;if(null!==e){var r=e.length;n=new Array(r);for(let t=0;t!==r;++t)n[t]=e[t].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class lr extends cr{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Le(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const hr=new qe,fr=new _e;class dr{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)fr.fromBufferAttribute(this,e),fr.applyMatrix3(t),this.setXY(e,fr.x,fr.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)hr.fromBufferAttribute(this,e),hr.applyMatrix3(t),this.setXYZ(e,hr.x,hr.y,hr.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)hr.fromBufferAttribute(this,e),hr.applyMatrix4(t),this.setXYZ(e,hr.x,hr.y,hr.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)hr.fromBufferAttribute(this,e),hr.applyNormalMatrix(t),this.setXYZ(e,hr.x,hr.y,hr.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)hr.fromBufferAttribute(this,e),hr.transformDirection(t),this.setXYZ(e,hr.x,hr.y,hr.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized?be(e,this.array):e}setX(t,e){return this.normalized&&(e=xe(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized?be(e,this.array):e}setY(t,e){return this.normalized&&(e=xe(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized?be(e,this.array):e}setZ(t,e){return this.normalized&&(e=xe(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized?be(e,this.array):e}setW(t,e){return this.normalized&&(e=xe(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=xe(e,this.array),n=xe(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=xe(e,this.array),n=xe(n,this.array),r=xe(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=xe(e,this.array),n=xe(n,this.array),r=xe(r,this.array),i=xe(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){var t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}copyColorsArray(){}copyVector2sArray(){}copyVector3sArray(){}copyVector4sArray(){}}class pr extends dr{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class gr extends dr{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class mr extends dr{constructor(t,e,n){super(new Float32Array(t),e,n)}}let vr=0;const yr=new Mn,br=new Zn,xr=new qe,_r=new Ze,wr=new Ze,Sr=new qe;class Er extends ce{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:vr++}),this.uuid=de(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Se(t)?gr:pr)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){var e=this.attributes.position,n=(e=(void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0),this.attributes.normal),void 0!==e&&(n=(new we).getNormalMatrix(t),e.applyNormalMatrix(n),e.needsUpdate=!0),this.attributes.tangent);return void 0!==n&&(n.transformDirection(t),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return yr.makeRotationFromQuaternion(t),this.applyMatrix4(yr),this}rotateX(t){return yr.makeRotationX(t),this.applyMatrix4(yr),this}rotateY(t){return yr.makeRotationY(t),this.applyMatrix4(yr),this}rotateZ(t){return yr.makeRotationZ(t),this.applyMatrix4(yr),this}translate(t,e,n){return yr.makeTranslation(t,e,n),this.applyMatrix4(yr),this}scale(t,e,n){return yr.makeScale(t,e,n),this.applyMatrix4(yr),this}lookAt(t){return br.lookAt(t),br.updateMatrix(),this.applyMatrix4(br.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(xr).negate(),this.translate(xr.x,xr.y,xr.z),this}setFromPoints(t){var e=[];for(let r=0,i=t.length;r<i;r++){var n=t[r];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new mr(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ze);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingBox.set(new qe(-1/0,-1/0,-1/0),new qe(1/0,1/0,1/0));else{if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){var n=e[t];_r.setFromBufferAttribute(n),this.morphTargetsRelative?(Sr.addVectors(this.boundingBox.min,_r.min),this.boundingBox.expandByPoint(Sr),Sr.addVectors(this.boundingBox.max,_r.max),this.boundingBox.expandByPoint(Sr)):(this.boundingBox.expandByPoint(_r.min),this.boundingBox.expandByPoint(_r.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new mn);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingSphere.set(new qe,1/0);else if(t){var n=this.boundingSphere.center;if(_r.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){var r=e[t];wr.setFromBufferAttribute(r),this.morphTargetsRelative?(Sr.addVectors(_r.min,wr.min),_r.expandByPoint(Sr),Sr.addVectors(_r.max,wr.max),_r.expandByPoint(Sr)):(_r.expandByPoint(wr.min),_r.expandByPoint(wr.max))}_r.getCenter(n);let a=0;for(let e=0,r=t.count;e<r;e++)Sr.fromBufferAttribute(t,e),a=Math.max(a,n.distanceToSquared(Sr));if(e)for(let r=0,s=e.length;r<s;r++){var i=e[r],o=this.morphTargetsRelative;for(let e=0,r=i.count;e<r;e++)Sr.fromBufferAttribute(i,e),o&&(xr.fromBufferAttribute(t,e),Sr.add(xr)),a=Math.max(a,n.distanceToSquared(Sr))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)}}computeTangents(){var t=this.index,e=this.attributes;if(null!==t&&void 0!==e.position&&void 0!==e.normal&&void 0!==e.uv){var n=t.array;const f=e.position.array,d=e.normal.array,p=e.uv.array;var r,i,o,a,s=f.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new dr(new Float32Array(4*s),4));const g=this.getAttribute("tangent").array,m=[],v=[];for(let I=0;I<s;I++)m[I]=new qe,v[I]=new qe;const y=new qe,b=new qe,x=new qe,_=new _e,w=new _e,S=new _e,E=new qe,M=new qe;let A=this.groups;for(let N=0,D=(A=0===A.length?[{start:0,count:n.length}]:A).length;N<D;++N){var u=A[N],c=u.start;for(let L=c,R=c+u.count;L<R;L+=3)r=n[L+0],i=n[L+1],o=n[L+2],a=void 0,y.fromArray(f,3*r),b.fromArray(f,3*i),x.fromArray(f,3*o),_.fromArray(p,2*r),w.fromArray(p,2*i),S.fromArray(p,2*o),b.sub(y),x.sub(y),w.sub(_),S.sub(_),a=1/(w.x*S.y-S.x*w.y),isFinite(a)&&(E.copy(b).multiplyScalar(S.y).addScaledVector(x,-w.y).multiplyScalar(a),M.copy(x).multiplyScalar(w.x).addScaledVector(b,-S.x).multiplyScalar(a),m[r].add(E),m[i].add(E),m[o].add(E),v[r].add(M),v[i].add(M),v[o].add(M))}const C=new qe,T=new qe,k=new qe,O=new qe;for(let B=0,j=A.length;B<j;++B){var l=A[B],h=l.start;for(let F=h,z=h+l.count;F<z;F+=3)P(n[F+0]),P(n[F+1]),P(n[F+2])}function P(t){k.fromArray(d,3*t),O.copy(k);var e=m[t];C.copy(e),C.sub(k.multiplyScalar(k.dot(e))).normalize(),T.crossVectors(O,e),e=T.dot(v[t]),e=e<0?-1:1;g[4*t]=C.x,g[4*t+1]=C.y,g[4*t+2]=C.z,g[4*t+3]=e}}}computeVertexNormals(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){let d=this.getAttribute("normal");if(void 0===d)d=new dr(new Float32Array(3*e.count),3),this.setAttribute("normal",d);else for(let t=0,e=d.count;t<e;t++)d.setXYZ(t,0,0,0);var n=new qe,r=new qe,i=new qe,o=new qe,a=new qe,s=new qe,u=new qe,c=new qe;if(t)for(let p=0,g=t.count;p<g;p+=3){var l=t.getX(p+0),h=t.getX(p+1),f=t.getX(p+2);n.fromBufferAttribute(e,l),r.fromBufferAttribute(e,h),i.fromBufferAttribute(e,f),u.subVectors(i,r),c.subVectors(n,r),u.cross(c),o.fromBufferAttribute(d,l),a.fromBufferAttribute(d,h),s.fromBufferAttribute(d,f),o.add(u),a.add(u),s.add(u),d.setXYZ(l,o.x,o.y,o.z),d.setXYZ(h,a.x,a.y,a.z),d.setXYZ(f,s.x,s.y,s.z)}else for(let t=0,o=e.count;t<o;t+=3)n.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),i.fromBufferAttribute(e,t+2),u.subVectors(i,r),c.subVectors(n,r),u.cross(c),d.setXYZ(t+0,u.x,u.y,u.z),d.setXYZ(t+1,u.x,u.y,u.z),d.setXYZ(t+2,u.x,u.y,u.z);this.normalizeNormals(),d.needsUpdate=!0}}merge(){return this}normalizeNormals(){var t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Sr.fromBufferAttribute(t,e),Sr.normalize(),t.setXYZ(e,Sr.x,Sr.y,Sr.z)}toNonIndexed(){function t(t,e){var n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let a=0,s=0;for(let u=0,c=e.length;u<c;u++){a=t.isInterleavedBufferAttribute?e[u]*t.data.stride+t.offset:e[u]*r;for(let t=0;t<r;t++)o[s++]=n[a++]}return new dr(o,r,i)}if(null===this.index)return this;var e=new Er,n=this.index.array,r=this.attributes;for(const h in r){var i=t(r[h],n);e.setAttribute(h,i)}var o=this.morphAttributes;for(const h in o){var a=[],s=o[h];for(let e=0,r=s.length;e<r;e++){var u=t(s[e],n);a.push(u)}e.morphAttributes[h]=a}e.morphTargetsRelative=this.morphTargetsRelative;var c=this.groups;for(let h=0,f=c.length;h<f;h++){var l=c[h];e.addGroup(l.start,l.count,l.materialIndex)}return e}toJSON(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),0<Object.keys(this.userData).length&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n])}else{t.data={attributes:{}};var n=this.index,r=(null!==n&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)}),this.attributes);for(const n in r){var i=r[n];t.data.attributes[n]=i.toJSON(t.data)}var o={};let e=!1;for(const n in this.morphAttributes){var a=this.morphAttributes[n],s=[];for(let e=0,n=a.length;e<n;e++){var u=a[e];s.push(u.toJSON(t.data))}0<s.length&&(o[n]=s,e=!0)}e&&(t.data.morphAttributes=o,t.data.morphTargetsRelative=this.morphTargetsRelative),n=this.groups,0<n.length&&(t.data.groups=JSON.parse(JSON.stringify(n))),n=this.boundingSphere,null!==n&&(t.data.boundingSphere={center:n.center.toArray(),radius:n.radius})}return t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={},n=(this.name=t.name,t.index),r=(null!==n&&this.setIndex(n.clone(e)),t.attributes);for(const l in r){var i=r[l];this.setAttribute(l,i.clone(e))}var o=t.morphAttributes;for(const l in o){var a=[],s=o[l];for(let t=0,n=s.length;t<n;t++)a.push(s[t].clone(e));this.morphAttributes[l]=a}this.morphTargetsRelative=t.morphTargetsRelative;var u=t.groups;for(let l=0,h=u.length;l<h;l++){var c=u[l];this.addGroup(c.start,c.count,c.materialIndex)}return n=t.boundingBox,null!==n&&(this.boundingBox=n.clone()),n=t.boundingSphere,null!==n&&(this.boundingSphere=n.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Mr=new Mn,Ar=new En,Cr=new mn,Tr=new qe,kr=new qe,Or=new qe,Pr=new qe,Ir=new qe,Nr=new qe,Dr=new qe,Lr=new qe,Rr=new qe,Br=new _e,jr=new _e,Fr=new _e,zr=new qe,Ur=new qe;class Gr extends Zn{constructor(t=new Er,e=new lr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){var t=this.geometry.morphAttributes,e=Object.keys(t);if(0<e.length){var n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){var r=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}}}raycast(t,e){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r&&(null===n.boundingSphere&&n.computeBoundingSphere(),Cr.copy(n.boundingSphere),Cr.applyMatrix4(i),!1!==t.ray.intersectsSphere(Cr))&&(Mr.copy(i).invert(),Ar.copy(t.ray).applyMatrix4(Mr),null===n.boundingBox||!1!==Ar.intersectsBox(n.boundingBox))){let i;var o=n.index,a=n.attributes.position,s=n.morphAttributes.position,u=n.morphTargetsRelative,c=n.attributes.uv,l=n.attributes.uv2,h=n.groups,f=n.drawRange;if(null!==o)if(Array.isArray(r))for(let n=0,y=h.length;n<y;n++){var d=h[n],p=r[d.materialIndex];for(let n=Math.max(d.start,f.start),r=Math.min(o.count,Math.min(d.start+d.count,f.start+f.count));n<r;n+=3){var g=o.getX(n),m=o.getX(n+1),v=o.getX(n+2);(i=Vr(this,p,t,Ar,a,s,u,c,l,g,m,v))&&(i.faceIndex=Math.floor(n/3),i.face.materialIndex=d.materialIndex,e.push(i))}}else for(let n=Math.max(0,f.start),h=Math.min(o.count,f.start+f.count);n<h;n+=3){var y=o.getX(n),b=o.getX(n+1),x=o.getX(n+2);(i=Vr(this,r,t,Ar,a,s,u,c,l,y,b,x))&&(i.faceIndex=Math.floor(n/3),e.push(i))}else if(void 0!==a)if(Array.isArray(r))for(let n=0,o=h.length;n<o;n++){var _=h[n],w=r[_.materialIndex];for(let n=Math.max(_.start,f.start),r=Math.min(a.count,Math.min(_.start+_.count,f.start+f.count));n<r;n+=3){var S=n,E=n+1,M=n+2;(i=Vr(this,w,t,Ar,a,s,u,c,l,S,E,M))&&(i.faceIndex=Math.floor(n/3),i.face.materialIndex=_.materialIndex,e.push(i))}}else for(let n=Math.max(0,f.start),o=Math.min(a.count,f.start+f.count);n<o;n+=3){var A=n,C=n+1,T=n+2;(i=Vr(this,r,t,Ar,a,s,u,c,l,A,C,T))&&(i.faceIndex=Math.floor(n/3),e.push(i))}}}}function Vr(t,e,n,r,i,o,a,s,u,c,l,h){Tr.fromBufferAttribute(i,c),kr.fromBufferAttribute(i,l),Or.fromBufferAttribute(i,h);var p=t.morphTargetInfluences;if(o&&p){Dr.set(0,0,0),Lr.set(0,0,0),Rr.set(0,0,0);for(let t=0,e=o.length;t<e;t++){var g=p[t],m=o[t];0!==g&&(Pr.fromBufferAttribute(m,c),Ir.fromBufferAttribute(m,l),Nr.fromBufferAttribute(m,h),a?(Dr.addScaledVector(Pr,g),Lr.addScaledVector(Ir,g),Rr.addScaledVector(Nr,g)):(Dr.addScaledVector(Pr.sub(Tr),g),Lr.addScaledVector(Ir.sub(kr),g),Rr.addScaledVector(Nr.sub(Or),g)))}Tr.add(Dr),kr.add(Lr),Or.add(Rr)}return t.isSkinnedMesh&&(t.boneTransform(c,Tr),t.boneTransform(l,kr),t.boneTransform(h,Or)),i=function(t,e,n,r,i,o,a,s){let u;return null===(u=e.side===f?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==d,s))||(Ur.copy(s),Ur.applyMatrix4(t.matrixWorld),(r=n.ray.origin.distanceTo(Ur))<n.near)||r>n.far?null:{distance:r,point:Ur.clone(),object:t}}(t,e,n,r,Tr,kr,Or,zr),i&&(s&&(Br.fromBufferAttribute(s,c),jr.fromBufferAttribute(s,l),Fr.fromBufferAttribute(s,h),i.uv=sr.getUV(zr,Tr,kr,Or,Br,jr,Fr,new _e)),u&&(Br.fromBufferAttribute(u,c),jr.fromBufferAttribute(u,l),Fr.fromBufferAttribute(u,h),i.uv2=sr.getUV(zr,Tr,kr,Or,Br,jr,Fr,new _e)),t={a:c,b:l,c:h,normal:new qe,materialIndex:0},sr.getNormal(Tr,kr,Or,t.normal),i.face=t),i}class Wr extends Er{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this,s=(r=Math.floor(r),i=Math.floor(i),o=Math.floor(o),[]),u=[],c=[],l=[];let h=0,f=0;function d(t,e,n,r,i,o,d,p,g,m,v){var y=o/g,b=d/m,x=o/2,_=d/2,w=p/2,S=g+1,E=m+1;let M=0,A=0;var C=new qe;for(let a=0;a<E;a++){var T=a*b-_;for(let o=0;o<S;o++){var k=o*y-x;C[t]=k*r,C[e]=T*i,C[n]=w,u.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[n]=0<p?1:-1,c.push(C.x,C.y,C.z),l.push(o/g),l.push(1-a/m),M+=1}}for(let a=0;a<m;a++)for(let t=0;t<g;t++){var O=h+t+S*a,P=h+t+S*(a+1),I=h+(t+1)+S*(a+1),N=h+(t+1)+S*a;s.push(O,P,N),s.push(P,I,N),A+=6}a.addGroup(f,A,v),f+=A,h+=M}d("z","y","x",-1,-1,n,e,t,o,i,0),d("z","y","x",1,-1,n,e,-t,o,i,1),d("x","z","y",1,1,t,n,e,r,o,2),d("x","z","y",1,-1,t,n,-e,r,o,3),d("x","y","z",1,-1,t,e,n,r,i,4),d("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new mr(u,3)),this.setAttribute("normal",new mr(c,3)),this.setAttribute("uv",new mr(l,2))}static fromJSON(t){return new Wr(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Hr(t){var e={};for(const r in t){e[r]={};for(const i in t[r]){var n=t[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?e[r][i]=n.clone():Array.isArray(n)?e[r][i]=n.slice():e[r][i]=n}}return e}function Yr(t){var e={};for(let r=0;r<t.length;r++){var n=Hr(t[r]);for(const t in n)e[t]=n[t]}return e}const qr={clone:Hr,merge:Yr};class Xr extends cr{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Hr(t.uniforms),this.uniformsGroups=function(t){var e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){var e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){var n=this.uniforms[i].value;n&&n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}0<Object.keys(this.defines).length&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var r={};for(const i in this.extensions)!0===this.extensions[i]&&(r[i]=!0);return 0<Object.keys(r).length&&(e.extensions=r),e}}class Kr extends Zn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Mn,this.projectionMatrix=new Mn,this.projectionMatrixInverse=new Mn}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Zr extends Kr{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){t=.5*this.getFilmHeight()/t,this.fov=2*fe*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){var t=Math.tan(.5*he*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*fe*Math.atan(Math.tan(.5*he*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){var t=this.near;let e=t*Math.tan(.5*he*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;var o,a=this.view,s=(null!==this.view&&this.view.enabled&&(s=a.fullWidth,o=a.fullHeight,i+=a.offsetX*r/s,e-=a.offsetY*n/o,r*=a.width/s,n*=a.height/o),this.filmOffset);0!==s&&(i+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){return t=super.toJSON(t),t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class $r extends Zn{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,n=new Zr(90,1,t,e),n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new qe(1,0,0)),this.add(n),n=new Zr(90,1,t,e),n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new qe(-1,0,0)),this.add(n),n=new Zr(90,1,t,e),n.layers=this.layers,n.up.set(0,0,1),n.lookAt(new qe(0,1,0)),this.add(n),n=new Zr(90,1,t,e),n.layers=this.layers,n.up.set(0,0,-1),n.lookAt(new qe(0,-1,0)),this.add(n),n=new Zr(90,1,t,e),n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new qe(0,0,1)),this.add(n),n=new Zr(90,1,t,e),n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new qe(0,0,-1)),this.add(n)}update(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,[r,i,o,a,s,u]=this.children,c=t.getRenderTarget(),l=t.toneMapping,h=t.xr.enabled,f=(t.toneMapping=W,t.xr.enabled=!1,n.texture.generateMipmaps);n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=f,t.setRenderTarget(n,5),t.render(e,u),t.setRenderTarget(c),t.toneMapping=l,t.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class Jr extends Ue{constructor(t,e,n,r,i,o,a,s,u,c){super(t=void 0!==t?t:[],e=void 0!==e?e:H,n,r,i,o,a,s,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Qr extends Ve{constructor(t,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0,t={width:t,height:t,depth:1},t=[t,t,t,t,t,t],this.texture=new Jr(t,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:nt}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Wr(5,5,5);n=new Xr({name:"CubemapFromEquirect",uniforms:Hr(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:f,blending:p}),n.uniforms.tEquirect.value=e,r=new Gr(r,n),n=e.minFilter;return e.minFilter===it&&(e.minFilter=nt),new $r(1,10,this).update(t,r),e.minFilter=n,r.geometry.dispose(),r.material.dispose(),this}clear(t,e,n,r){var i=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(i)}}const ti=new qe,ei=new qe,ni=new we;class ri{constructor(t=new qe(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){return n=ti.subVectors(n,e).cross(ei.subVectors(t,e)).normalize(),this.setFromNormalAndCoplanarPoint(n,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){var n=t.delta(ti),r=this.normal.dot(n);return 0===r?0===this.distanceToPoint(t.start)?e.copy(t.start):null:(r=-(t.start.dot(this.normal)+this.constant)/r)<0||1<r?null:e.copy(n).multiplyScalar(r).add(t.start)}intersectsLine(t){var e=this.distanceToPoint(t.start);t=this.distanceToPoint(t.end);return e<0&&0<t||t<0&&0<e}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){return e=e||ni.getNormalMatrix(t),t=this.coplanarPoint(ti).applyMatrix4(t),e=this.normal.applyMatrix3(e).normalize(),this.constant=-t.dot(e),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const ii=new mn,oi=new qe;class ai{constructor(t=new ri,e=new ri,n=new ri,r=new ri,i=new ri,o=new ri){this.planes=[t,e,n,r,i,o]}set(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(t){var e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){var e=this.planes,n=(t=t.elements,t[0]),r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],d=t[11],p=t[12],g=t[13],m=t[14];t=t[15];return e[0].setComponents(o-n,c-a,d-l,t-p).normalize(),e[1].setComponents(o+n,c+a,d+l,t+p).normalize(),e[2].setComponents(o+r,c+s,d+h,t+g).normalize(),e[3].setComponents(o-r,c-s,d-h,t-g).normalize(),e[4].setComponents(o-i,c-u,d-f,t-m).normalize(),e[5].setComponents(o+i,c+u,d+f,t+m).normalize(),this}intersectsObject(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),ii.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ii)}intersectsSprite(t){return ii.center.set(0,0,0),ii.radius=.7071067811865476,ii.applyMatrix4(t.matrixWorld),this.intersectsSphere(ii)}intersectsSphere(t){var e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++)if(e[i].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){var e=this.planes;for(let r=0;r<6;r++){var n=e[r];if(oi.x=(0<n.normal.x?t.max:t.min).x,oi.y=(0<n.normal.y?t.max:t.min).y,oi.z=(0<n.normal.z?t.max:t.min).z,n.distanceToPoint(oi)<0)return!1}return!0}containsPoint(t){var e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function si(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function ui(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){var o,a,s,u;e.isGLBufferAttribute?(!(o=r.get(e))||o.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}):(e.isInterleavedBufferAttribute&&(e=e.data),void 0===(o=r.get(e))?r.set(e,function(e,r){var i=e.array,o=e.usage,a=t.createBuffer();let s;if(t.bindBuffer(r,a),t.bufferData(r,i,o),e.onUploadCallback(),i instanceof Float32Array)s=5126;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=5131}else s=5123;else if(i instanceof Int16Array)s=5122;else if(i instanceof Uint32Array)s=5125;else if(i instanceof Int32Array)s=5124;else if(i instanceof Int8Array)s=5120;else{if(!(i instanceof Uint8Array||i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=5121}return{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):o.version<e.version&&(a=o.buffer,u=(s=e).array,s=s.updateRange,t.bindBuffer(i,a),-1===s.count?t.bufferSubData(i,0,u):(n?t.bufferSubData(i,s.offset*u.BYTES_PER_ELEMENT,u,s.offset,s.count):t.bufferSubData(i,s.offset*u.BYTES_PER_ELEMENT,u.subarray(s.offset,s.offset+s.count)),s.count=-1),o.version=e.version))}}}class ci extends Er{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};var i=t/2,o=e/2,a=Math.floor(n),s=Math.floor(r),u=a+1,c=s+1,l=t/a,h=e/s,f=[],d=[],p=[],g=[];for(let w=0;w<c;w++){var m=w*h-o;for(let t=0;t<u;t++){var v=t*l-i;d.push(v,-m,0),p.push(0,0,1),g.push(t/a),g.push(1-w/s)}}for(let w=0;w<s;w++)for(let t=0;t<a;t++){var y=t+u*w,b=t+u*(w+1),x=t+1+u*(w+1),_=t+1+u*w;f.push(y,b,_),f.push(b,x,_)}this.setIndex(f),this.setAttribute("position",new mr(d,3)),this.setAttribute("normal",new mr(p,3)),this.setAttribute("uv",new mr(g,2))}static fromJSON(t){return new ci(t.width,t.height,t.widthSegments,t.heightSegments)}}const li={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},hi={common:{diffuse:{value:new Le(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new we},uv2Transform:{value:new we},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new _e(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Le(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Le(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new we}},sprite:{diffuse:{value:new Le(16777215)},opacity:{value:1},center:{value:new _e(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new we}}},fi={basic:{uniforms:Yr([hi.common,hi.specularmap,hi.envmap,hi.aomap,hi.lightmap,hi.fog]),vertexShader:li.meshbasic_vert,fragmentShader:li.meshbasic_frag},lambert:{uniforms:Yr([hi.common,hi.specularmap,hi.envmap,hi.aomap,hi.lightmap,hi.emissivemap,hi.bumpmap,hi.normalmap,hi.displacementmap,hi.fog,hi.lights,{emissive:{value:new Le(0)}}]),vertexShader:li.meshlambert_vert,fragmentShader:li.meshlambert_frag},phong:{uniforms:Yr([hi.common,hi.specularmap,hi.envmap,hi.aomap,hi.lightmap,hi.emissivemap,hi.bumpmap,hi.normalmap,hi.displacementmap,hi.fog,hi.lights,{emissive:{value:new Le(0)},specular:{value:new Le(1118481)},shininess:{value:30}}]),vertexShader:li.meshphong_vert,fragmentShader:li.meshphong_frag},standard:{uniforms:Yr([hi.common,hi.envmap,hi.aomap,hi.lightmap,hi.emissivemap,hi.bumpmap,hi.normalmap,hi.displacementmap,hi.roughnessmap,hi.metalnessmap,hi.fog,hi.lights,{emissive:{value:new Le(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:li.meshphysical_vert,fragmentShader:li.meshphysical_frag},toon:{uniforms:Yr([hi.common,hi.aomap,hi.lightmap,hi.emissivemap,hi.bumpmap,hi.normalmap,hi.displacementmap,hi.gradientmap,hi.fog,hi.lights,{emissive:{value:new Le(0)}}]),vertexShader:li.meshtoon_vert,fragmentShader:li.meshtoon_frag},matcap:{uniforms:Yr([hi.common,hi.bumpmap,hi.normalmap,hi.displacementmap,hi.fog,{matcap:{value:null}}]),vertexShader:li.meshmatcap_vert,fragmentShader:li.meshmatcap_frag},points:{uniforms:Yr([hi.points,hi.fog]),vertexShader:li.points_vert,fragmentShader:li.points_frag},dashed:{uniforms:Yr([hi.common,hi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:li.linedashed_vert,fragmentShader:li.linedashed_frag},depth:{uniforms:Yr([hi.common,hi.displacementmap]),vertexShader:li.depth_vert,fragmentShader:li.depth_frag},normal:{uniforms:Yr([hi.common,hi.bumpmap,hi.normalmap,hi.displacementmap,{opacity:{value:1}}]),vertexShader:li.meshnormal_vert,fragmentShader:li.meshnormal_frag},sprite:{uniforms:Yr([hi.sprite,hi.fog]),vertexShader:li.sprite_vert,fragmentShader:li.sprite_frag},background:{uniforms:{uvTransform:{value:new we},t2D:{value:null}},vertexShader:li.background_vert,fragmentShader:li.background_frag},cube:{uniforms:Yr([hi.envmap,{opacity:{value:1}}]),vertexShader:li.cube_vert,fragmentShader:li.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:li.equirect_vert,fragmentShader:li.equirect_frag},distanceRGBA:{uniforms:Yr([hi.common,hi.displacementmap,{referencePosition:{value:new qe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:li.distanceRGBA_vert,fragmentShader:li.distanceRGBA_frag},shadow:{uniforms:Yr([hi.lights,hi.fog,{color:{value:new Le(0)},opacity:{value:1}}]),vertexShader:li.shadow_vert,fragmentShader:li.shadow_frag}};function di(t,e,n,r,i,o){const a=new Le(0);let s,u,c=!0===i?0:1,l=null,d=0,p=null;function g(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,o)}return{getClearColor:function(){return a},setClearColor:function(t,e=1){a.set(t),c=e,g(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,g(a,c)},render:function(n,i){let o=!1,m=!0===i.isScene?i.background:null;m&&m.isTexture&&(m=e.get(m)),i=(i=t.xr).getSession&&i.getSession(),null===(m=i&&"additive"===i.environmentBlendMode?null:m)?g(a,c):m&&m.isColor&&(g(m,1),o=!0),(t.autoClear||o)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),m&&(m.isCubeTexture||m.mapping===K)?(void 0===u&&((u=new Gr(new Wr(1,1,1),new Xr({name:"BackgroundCubeMaterial",uniforms:Hr(fi.cube.uniforms),vertexShader:fi.cube.vertexShader,fragmentShader:fi.cube.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=m,u.material.uniforms.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1,l===m&&d===m.version&&p===t.toneMapping||(u.material.needsUpdate=!0,l=m,d=m.version,p=t.toneMapping),u.layers.enableAll(),n.unshift(u,u.geometry,u.material,0,0,null)):m&&m.isTexture&&(void 0===s&&((s=new Gr(new ci(2,2),new Xr({name:"BackgroundMaterial",uniforms:Hr(fi.background.uniforms),vertexShader:fi.background.vertexShader,fragmentShader:fi.background.fragmentShader,side:h,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),!0===(s.material.uniforms.t2D.value=m).matrixAutoUpdate&&m.updateMatrix(),s.material.uniforms.uvTransform.value.copy(m.matrix),l===m&&d===m.version&&p===t.toneMapping||(s.material.needsUpdate=!0,l=m,d=m.version,p=t.toneMapping),s.layers.enableAll(),n.unshift(s,s.geometry,s.material,0,0,null))}}}function pi(t,e,n,r){const i=t.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},u=d(null);let c=u,l=!1;function h(e){if(r.isWebGL2)return t.bindVertexArray(e);o.bindVertexArrayOES(e)}function f(e){if(r.isWebGL2)return t.deleteVertexArray(e);o.deleteVertexArrayOES(e)}function d(t){var e=[],n=[],r=[];for(let o=0;o<i;o++)e[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function p(){var t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function g(t){m(t,0)}function m(n,i){var o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==i&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function v(){var e=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function y(e,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,o,a,s):t.vertexAttribIPointer(e,n,i,a,s)}function b(){x(),l=!0,c!==u&&h((c=u).object)}function x(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,f,b,x){let _=!1;if(a){var w=function(e,n,i){i=!0===i.wireframe;let a=s[e.id];void 0===a&&(a={},s[e.id]=a);let u=a[n.id];void 0===u&&(u={},a[n.id]=u);let c=u[i];return void 0===c&&(c=d(r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),u[i]=c),c}(b,f,u);if(c!==w&&h((c=w).object),_=function(t,e,n,r){var i=c.attributes,o=e.attributes;let a=0;var s=n.getAttributes();for(const c in s)if(0<=s[c].location){var u=i[c];let e=o[c];if(void 0===e&&("instanceMatrix"===c&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===c)&&t.instanceColor&&(e=t.instanceColor),void 0===u)return!0;if(u.attribute!==e)return!0;if(e&&u.data!==e.data)return!0;a++}return c.attributesNum!==a||c.index!==r}(i,b,f,x)){var S=i,E=(w=f,x),M={},A=b.attributes;let t=0;var C=w.getAttributes();for(const e in C)if(0<=C[e].location){let n=A[e];void 0===n&&("instanceMatrix"===e&&S.instanceMatrix&&(n=S.instanceMatrix),"instanceColor"===e)&&S.instanceColor&&(n=S.instanceColor);var T={};(T.attribute=n)&&n.data&&(T.data=n.data),M[e]=T,t++}c.attributes=M,c.attributesNum=t,c.index=E}}else w=!0===u.wireframe,c.geometry===b.id&&c.program===f.id&&c.wireframe===w||(c.geometry=b.id,c.program=f.id,c.wireframe=w,_=!0);null!==x&&n.update(x,34963),(_||l)&&(l=!1,function(i,o,a,s){if(!1!==r.isWebGL2||!i.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==e.get("ANGLE_instanced_arrays")){p();var u=s.attributes,c=a.getAttributes(),l=o.defaultAttributeValues;for(const e in c){var h=c[e];if(0<=h.location){let r=u[e];if(void 0!==(r=void 0===r&&("instanceMatrix"===e&&i.instanceMatrix&&(r=i.instanceMatrix),"instanceColor"===e)&&i.instanceColor?i.instanceColor:r)){var f=r.normalized,d=r.itemSize,b=n.get(r);if(void 0!==b){var x=b.buffer,_=b.type,w=b.bytesPerElement;if(r.isInterleavedBufferAttribute){var S=r.data,E=S.stride,M=r.offset;if(S.isInstancedInterleavedBuffer){for(let t=0;t<h.locationSize;t++)m(h.location+t,S.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=S.meshPerAttribute*S.count)}else for(let t=0;t<h.locationSize;t++)g(h.location+t);t.bindBuffer(34962,x);for(let t=0;t<h.locationSize;t++)y(h.location+t,d/h.locationSize,_,f,E*w,(M+d/h.locationSize*t)*w)}else{if(r.isInstancedBufferAttribute){for(let t=0;t<h.locationSize;t++)m(h.location+t,r.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=r.meshPerAttribute*r.count)}else for(let t=0;t<h.locationSize;t++)g(h.location+t);t.bindBuffer(34962,x);for(let t=0;t<h.locationSize;t++)y(h.location+t,d/h.locationSize,_,f,d*w,d/h.locationSize*t*w)}}}else if(void 0!==l){var A=l[e];if(void 0!==A)switch(A.length){case 2:t.vertexAttrib2fv(h.location,A);break;case 3:t.vertexAttrib3fv(h.location,A);break;case 4:t.vertexAttrib4fv(h.location,A);break;default:t.vertexAttrib1fv(h.location,A)}}}}v()}}(i,u,f,b),null!==x)&&t.bindBuffer(34963,n.get(x).buffer)},reset:b,resetDefaultState:x,dispose:function(){b();for(const n in s){var t=s[n];for(const n in t){var e=t[n];for(const t in e)f(e[t].object),delete e[t];delete t[n]}delete s[n]}},releaseStatesOfGeometry:function(t){if(void 0!==s[t.id]){var e=s[t.id];for(const t in e){var n=e[t];for(const t in n)f(n[t].object),delete n[t];delete e[t]}delete s[t.id]}},releaseStatesOfProgram:function(t){for(const r in s){var e=s[r];if(void 0!==e[t.id]){var n=e[t.id];for(const t in n)f(n[t].object),delete n[t];delete e[t.id]}}},initAttributes:p,enableAttribute:g,disableUnusedAttributes:v}}function gi(t,e,n,r){const i=r.isWebGL2;let o;this.setMode=function(t){o=t},this.render=function(e,r){t.drawArrays(o,e,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0!==s){let u,c;if(i)u=t,c="drawArraysInstanced";else if(u=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===u)return;u[c](o,r,a,s),n.update(a,o,s)}}}function mi(t,e,n){let r;function i(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";var s=i(a),u=(s=(s!==a&&(a=s),o||e.has("WEBGL_draw_buffers")),n=!0===n.logarithmicDepthBuffer,t.getParameter(34930)),c=t.getParameter(35660),l=t.getParameter(3379),h=t.getParameter(34076),f=t.getParameter(34921),d=t.getParameter(36347),p=t.getParameter(36348),g=t.getParameter(36349),m=0<c,v=o||e.has("OES_texture_float"),y=m&&v,b=o?t.getParameter(36183):0;return{isWebGL2:o,drawBuffers:s,getMaxAnisotropy:function(){var n;return r=void 0===r?!0===e.has("EXT_texture_filter_anisotropic")?(n=e.get("EXT_texture_filter_anisotropic"),t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)):0:r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:n,maxTextures:u,maxVertexTextures:c,maxTextureSize:l,maxCubemapSize:h,maxAttributes:f,maxVertexUniforms:d,maxVaryings:p,maxFragmentUniforms:g,vertexTextures:m,floatFragmentTextures:v,floatVertexTextures:y,maxSamples:b}}function vi(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new ri,s=new we,u={value:null,needsUpdate:!1};function c(){u.value!==n&&(u.value=n,u.needsUpdate=0<r),e.numPlanes=r,e.numIntersection=0}function l(t,n,r,i){var o=null!==t?t.length:0;let c=null;if(0!==o){if(c=u.value,!0!==i||null===c){i=r+4*o;var l=n.matrixWorldInverse;s.getNormalMatrix(l),(null===c||c.length<i)&&(c=new Float32Array(i));for(let e=0,n=r;e!==o;++e,n+=4)a.copy(t[e]).applyMatrix4(l,s),a.normal.toArray(c,n),c[n+3]=a.constant}u.value=c,u.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,c}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){var a=0!==t.length||e||0!==r||i;return i=e,n=l(t,o,0),r=t.length,a},this.beginShadows=function(){o=!0,l(null)},this.endShadows=function(){o=!1,c()},this.setState=function(e,a,s){var h=e.clippingPlanes,f=e.clipIntersection,d=e.clipShadows;e=t.get(e);if(!i||null===h||0===h.length||o&&!d)o?l(null):c();else{d=o?0:r;var p=4*d,g=e.clippingState||null;u.value=g,g=l(h,a,p,s);for(let t=0;t!==p;++t)g[t]=n[t];e.clippingState=g,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=d}}}function yi(t){let e=new WeakMap;function n(t,e){return e===q?t.mapping=H:e===X&&(t.mapping=Y),t}function r(t){t=t.target;var n=(t.removeEventListener("dispose",r),e.get(t));void 0!==n&&(e.delete(t),n.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var o=i.mapping;if(o===q||o===X)return e.has(i)?n(e.get(i).texture,i.mapping):(o=i.image)&&0<o.height?((o=new Qr(o.height/2)).fromEquirectangularTexture(t,i),e.set(i,o),i.addEventListener("dispose",r),n(o.texture,i.mapping)):null}return i},dispose:function(){e=new WeakMap}}}fi.physical={uniforms:Yr([fi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new _e(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Le(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new _e},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Le(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Le(1,1,1)},specularColorMap:{value:null}}]),vertexShader:li.meshphysical_vert,fragmentShader:li.meshphysical_frag};class bi extends Kr{constructor(t=-1,e=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,a=r+e,s=r-e;null!==this.view&&this.view.enabled&&(n=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom,i+=n*this.view.offsetX,o=i+n*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height),this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){return t=super.toJSON(t),t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const xi=[.125,.215,.35,.446,.526,.582],_i=new bi,wi=new Le;let Si=null;n=(1+Math.sqrt(5))/2,e=1/n;const Ei=[new qe(1,1,1),new qe(-1,1,1),new qe(1,1,-1),new qe(-1,1,-1),new qe(0,n,e),new qe(0,n,-e),new qe(e,0,n),new qe(-e,0,n),new qe(n,e,0),new qe(-n,e,0)];class Mi{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){Si=this._renderer.getRenderTarget(),this._setSize(256);var i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),0<e&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=ki(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Ti(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Si),t.scissorTest=!1,Ci(t,0,0,t.width,t.height)}_fromTexture(t,e){return t.mapping===H||t.mapping===Y?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Si=this._renderer.getRenderTarget(),e=e||this._allocateTargets(),this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(){var t,e,n=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,i={magFilter:nt,minFilter:nt,generateMipmaps:!1,type:ft,format:yt,encoding:te,depthBuffer:!1},o=Ai(n,r,i);return null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.width===n||(null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Ai(n,r,i),i=this["_lodMax"],({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){var e=[],n=[],r=[];let i=t;var o=t-4+1+xi.length;for(let p=0;p<o;p++){var a=Math.pow(2,i);n.push(a);let o=1/a;p>t-4?o=xi[p-t+4-1]:0===p&&(o=0),r.push(o);a=1/(a-2);var s=-a,u=(a=1+a,[s,s,a,s,a,a,s,s,a,a,s,a]),c=new Float32Array(108),l=new Float32Array(72),h=new Float32Array(36);for(let t=0;t<6;t++){var f=t%3*2/3-1,d=2<t?0:-1;f=(c.set([f,d,0,f+2/3,d,0,f+2/3,1+d,0,f,d,0,f+2/3,1+d,0,f,1+d,0],18*t),l.set(u,12*t),[t,t,t,t,t,t]);h.set(f,6*t)}s=new Er,s.setAttribute("position",new dr(c,3)),s.setAttribute("uv",new dr(l,2)),s.setAttribute("faceIndex",new dr(h,1)),e.push(s),4<i&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}(i)),this._blurMaterial=(t=new Float32Array(20),e=new qe(0,1,0),n=new Xr({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/n,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:i+".0"},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:e}},vertexShader:Oi(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:p,depthTest:!1,depthWrite:!1}))),o}_compileMaterial(t){t=new Gr(this._lodPlanes[0],t),this._renderer.compile(t,_i)}_sceneToCubeUV(t,e,n,r){var i=new Zr(90,1,e,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,u=(e=s.autoClear,n=s.toneMapping,s.getClearColor(wi),s.toneMapping=W,s.autoClear=!1,new lr({name:"PMREM.Background",side:f,depthWrite:!1,depthTest:!1})),c=new Gr(new Wr,u);let l=!1;var h=t.background;h?h.isColor&&(u.color.copy(h),t.background=null,l=!0):(u.color.copy(wi),l=!0);for(let f=0;f<6;f++){var d=f%3,p=(0==d?(i.up.set(0,o[f],0),i.lookAt(a[f],0,0)):1==d?(i.up.set(0,0,o[f]),i.lookAt(0,a[f],0)):(i.up.set(0,o[f],0),i.lookAt(0,0,a[f])),this._cubeSize);Ci(r,d*p,2<f?p:0,p,p),s.setRenderTarget(r),l&&s.render(c,i),s.render(t,i)}c.geometry.dispose(),c.material.dispose(),s.toneMapping=n,s.autoClear=e,t.background=h}_textureToCubeUV(t,e){var n=this._renderer,r=t.mapping===H||t.mapping===Y,i=(r=(r?(null===this._cubemapMaterial&&(this._cubemapMaterial=ki()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Ti()),r?this._cubemapMaterial:this._equirectMaterial),new Gr(this._lodPlanes[0],r));r.uniforms.envMap.value=t,r=this._cubeSize;Ci(e,0,0,3*r,2*r),n.setRenderTarget(e),n.render(i,_i)}_applyPMREM(t){var e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){var r=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),i=Ei[(o-1)%Ei.length];this._blur(t,o-1,o,r,i)}e.autoClear=n}_blur(t,e,n,r,i){var o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,a){var s=this._renderer,u=this._blurMaterial,c=new Gr(this._lodPlanes[r],u),l=(u=u.uniforms,this._sizeLods[n]-1),h=(l=isFinite(i)?Math.PI/(2*l):2*Math.PI/39,i/l),f=isFinite(i)?1+Math.floor(3*h):20,d=[];let p=0;for(let v=0;v<20;++v){const t=v/h;var g=Math.exp(-t*t/2);d.push(g),0===v?p+=g:v<f&&(p+=2*g)}for(let v=0;v<d.length;v++)d[v]=d[v]/p;u.envMap.value=t.texture,u.samples.value=f,u.weights.value=d,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a),i=this._lodMax,u.dTheta.value=l,u.mipInt.value=i-n,t=this._sizeLods[r];const m=3*t*(i-4<r?r-i+4:0);o=4*(this._cubeSize-t),Ci(e,m,o,3*t,2*t),s.setRenderTarget(e),s.render(c,_i)}}function Ai(t,e,n){return t=new Ve(t,e,n),t.texture.mapping=K,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Ci(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Ti(){return new Xr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Oi(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:p,depthTest:!1,depthWrite:!1})}function ki(){return new Xr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Oi(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:p,depthTest:!1,depthWrite:!1})}function Oi(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Pi(t){let e=new WeakMap,n=null;function r(t){t=t.target;var n=(t.removeEventListener("dispose",r),e.get(t));void 0!==n&&(e.delete(t),n.dispose())}return{get:function(i){if(i&&i.isTexture){var o,a=i.mapping,s=a===q||a===X;a=a===H||a===Y;if(s||a)return i.isRenderTargetTexture&&!0===i.needsPMREMUpdate?(i.needsPMREMUpdate=!1,o=e.get(i),null===n&&(n=new Mi(t)),o=s?n.fromEquirectangular(i,o):n.fromCubemap(i,o),e.set(i,o),o.texture):e.has(i)?e.get(i).texture:(o=i.image,s&&o&&0<o.height||a&&o&&function(t){let e=0;for(let n=0;n<6;n++)void 0!==t[n]&&e++;return 6===e}(o)?(null===n&&(n=new Mi(t)),a=s?n.fromEquirectangular(i):n.fromCubemap(i),e.set(i,a),i.addEventListener("dispose",r),a.texture):null)}return i},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Ii(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){return t=n(t),t}}}function Ni(t,e,n,r){const i={},o=new WeakMap;function a(t){var s=t.target;null!==s.index&&e.remove(s.index);for(const n in s.attributes)e.remove(s.attributes[n]);s.removeEventListener("dispose",a),delete i[s.id],t=o.get(s),t&&(e.remove(t),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){var n=[],r=t.index,i=t.attributes.position;let a=0;if(null!==r){var s=r.array;a=r.version;for(let t=0,e=s.length;t<e;t+=3){var u=s[t+0],c=s[t+1],l=s[t+2];n.push(u,c,c,l,l,u)}}else{r=i.array,a=i.version;for(let t=0,e=r.length/3-1;t<e;t+=3){var h=t+0,f=t+1,d=t+2;n.push(h,f,f,d,d,h)}}i=new(Se(n)?gr:pr)(n,1),i.version=a,r=o.get(t),r&&e.remove(r),o.set(t,i)}return{get:function(t,e){return!0!==i[e.id]&&(e.addEventListener("dispose",a),i[e.id]=!0,n.memory.geometries++),e},update:function(t){var n=t.attributes;for(const o in n)e.update(n[o],34962);var r=t.morphAttributes;for(const o in r){var i=r[o];for(let t=0,n=i.length;t<n;t++)e.update(i[t],34962)}},getWireframeAttribute:function(t){var e,n=o.get(t);return(!n||null!==(e=t.index)&&n.version<e.version)&&s(t),o.get(t)}}}function Di(t,e,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(t){o=t},this.setIndex=function(t){a=t.type,s=t.bytesPerElement},this.render=function(e,r){t.drawElements(o,r,a,e*s),n.update(r,o,1)},this.renderInstances=function(r,u,c){if(0!==c){let l,h;if(i)l=t,h="drawElementsInstanced";else if(l=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===l)return;l[h](o,u,a,r*s,c),n.update(u,o,c)}}}function Li(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t}}}}function Ri(t,e){return t[0]-e[0]}function Bi(t,e){return Math.abs(e[1])-Math.abs(t[1])}function ji(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new Ge,s=[];for(let u=0;u<8;u++)s[u]=[u,0];return{update:function(u,c,l,h){var f=u.morphTargetInfluences;if(!0===e.isWebGL2){u=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color;var d=void 0!==u?u.length:0;let r=o.get(c);if(void 0===r||r.count!==d){void 0!==r&&r.texture.dispose();var p=void 0!==c.morphAttributes.position,g=void 0!==c.morphAttributes.normal,m=void 0!==c.morphAttributes.color,v=c.morphAttributes.position||[],y=c.morphAttributes.normal||[],b=c.morphAttributes.color||[];let t=1==m?3:1==g?2:1==p?1:0,n=c.attributes.position.count*t,i=1;n>e.maxTextureSize&&(i=Math.ceil(n/e.maxTextureSize),n=e.maxTextureSize);var x=new Float32Array(n*i*4*d);const s=new We(x,n,i,d);s.type=ht,s.needsUpdate=!0;var _=4*t;for(let e=0;e<d;e++){var w=v[e],S=y[e],E=b[e],M=n*i*4*e;for(let t=0;t<w.count;t++){var A=t*_;1==p&&(a.fromBufferAttribute(w,t),x[M+A]=a.x,x[M+A+1]=a.y,x[M+A+2]=a.z,x[M+A+3]=0),1==g&&(a.fromBufferAttribute(S,t),x[M+A+4]=a.x,x[M+A+5]=a.y,x[M+A+6]=a.z,x[M+A+7]=0),1==m&&(a.fromBufferAttribute(E,t),x[M+A+8]=a.x,x[M+A+9]=a.y,x[M+A+10]=a.z,x[M+A+11]=4===E.itemSize?a.w:1)}}r={count:d,texture:s,size:new _e(n,i)},o.set(c,r),c.addEventListener("dispose",(function t(){s.dispose(),o.delete(c),c.removeEventListener("dispose",t)}))}let i=0;for(let t=0;t<f.length;t++)i+=f[t];u=c.morphTargetsRelative?1:1-i,h.getUniforms().setValue(t,"morphTargetBaseInfluence",u),h.getUniforms().setValue(t,"morphTargetInfluences",f),h.getUniforms().setValue(t,"morphTargetsTexture",r.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",r.size)}else{var C=void 0===f?0:f.length;let e=r[c.id];if(void 0===e||e.length!==C){e=[];for(let t=0;t<C;t++)e[t]=[t,0];r[c.id]=e}for(let t=0;t<C;t++){var T=e[t];T[0]=t,T[1]=f[t]}e.sort(Bi);for(let t=0;t<8;t++)t<C&&e[t][1]?(s[t][0]=e[t][0],s[t][1]=e[t][1]):(s[t][0]=Number.MAX_SAFE_INTEGER,s[t][1]=0);s.sort(Ri);var k=c.morphAttributes.position,O=c.morphAttributes.normal;let n=0;for(let t=0;t<8;t++){var P=s[t],I=P[0];P=P[1];I!==Number.MAX_SAFE_INTEGER&&P?(k&&c.getAttribute("morphTarget"+t)!==k[I]&&c.setAttribute("morphTarget"+t,k[I]),O&&c.getAttribute("morphNormal"+t)!==O[I]&&c.setAttribute("morphNormal"+t,O[I]),i[t]=P,n+=P):(k&&!0===c.hasAttribute("morphTarget"+t)&&c.deleteAttribute("morphTarget"+t),O&&!0===c.hasAttribute("morphNormal"+t)&&c.deleteAttribute("morphNormal"+t),i[t]=0)}u=c.morphTargetsRelative?1:1-n,h.getUniforms().setValue(t,"morphTargetBaseInfluence",u),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}}}function Fi(t,e,n,r){let i=new WeakMap;function o(t){t=t.target,t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(t){var a=r.render.frame,s=t.geometry;s=e.get(t,s);return i.get(s)!==a&&(e.update(s),i.set(s,a)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",o)&&t.addEventListener("dispose",o),n.update(t.instanceMatrix,34962),null!==t.instanceColor)&&n.update(t.instanceColor,34962),s},dispose:function(){i=new WeakMap}}}const zi=new Ue,Ui=new We,Gi=new He,Vi=new Jr,Wi=[],Hi=[],Yi=new Float32Array(16),qi=new Float32Array(9),Xi=new Float32Array(4);function Ki(t,e,n){var r=t[0];if(r<=0||0<r)return t;var i=e*n;let o=Wi[i];if(void 0===o&&(o=new Float32Array(i),Wi[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function Zi(t,e){if(t.length===e.length){for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return;return 1}}function $i(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function Ji(t,e){let n=Hi[e];void 0===n&&(n=new Int32Array(e),Hi[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Qi(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function to(t,e){var n=this.cache;void 0!==e.x?n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y):Zi(n,e)||(t.uniform2fv(this.addr,e),$i(n,e))}function eo(t,e){var n=this.cache;void 0!==e.x?n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z):void 0!==e.r?n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b):Zi(n,e)||(t.uniform3fv(this.addr,e),$i(n,e))}function no(t,e){var n=this.cache;void 0!==e.x?n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w):Zi(n,e)||(t.uniform4fv(this.addr,e),$i(n,e))}function ro(t,e){var n=this.cache,r=e.elements;void 0===r?Zi(n,e)||(t.uniformMatrix2fv(this.addr,!1,e),$i(n,e)):Zi(n,r)||(Xi.set(r),t.uniformMatrix2fv(this.addr,!1,Xi),$i(n,r))}function io(t,e){var n=this.cache,r=e.elements;void 0===r?Zi(n,e)||(t.uniformMatrix3fv(this.addr,!1,e),$i(n,e)):Zi(n,r)||(qi.set(r),t.uniformMatrix3fv(this.addr,!1,qi),$i(n,r))}function oo(t,e){var n=this.cache,r=e.elements;void 0===r?Zi(n,e)||(t.uniformMatrix4fv(this.addr,!1,e),$i(n,e)):Zi(n,r)||(Yi.set(r),t.uniformMatrix4fv(this.addr,!1,Yi),$i(n,r))}function ao(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function so(t,e){var n=this.cache;Zi(n,e)||(t.uniform2iv(this.addr,e),$i(n,e))}function uo(t,e){var n=this.cache;Zi(n,e)||(t.uniform3iv(this.addr,e),$i(n,e))}function co(t,e){var n=this.cache;Zi(n,e)||(t.uniform4iv(this.addr,e),$i(n,e))}function lo(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function ho(t,e){var n=this.cache;Zi(n,e)||(t.uniform2uiv(this.addr,e),$i(n,e))}function fo(t,e){var n=this.cache;Zi(n,e)||(t.uniform3uiv(this.addr,e),$i(n,e))}function po(t,e){var n=this.cache;Zi(n,e)||(t.uniform4uiv(this.addr,e),$i(n,e))}function go(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||zi,i)}function mo(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Gi,i)}function vo(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Vi,i)}function yo(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Ui,i)}function bo(t,e){t.uniform1fv(this.addr,e)}function xo(t,e){e=Ki(e,this.size,2),t.uniform2fv(this.addr,e)}function _o(t,e){e=Ki(e,this.size,3),t.uniform3fv(this.addr,e)}function wo(t,e){e=Ki(e,this.size,4),t.uniform4fv(this.addr,e)}function So(t,e){e=Ki(e,this.size,4),t.uniformMatrix2fv(this.addr,!1,e)}function Eo(t,e){e=Ki(e,this.size,9),t.uniformMatrix3fv(this.addr,!1,e)}function Mo(t,e){e=Ki(e,this.size,16),t.uniformMatrix4fv(this.addr,!1,e)}function Ao(t,e){t.uniform1iv(this.addr,e)}function Co(t,e){t.uniform2iv(this.addr,e)}function To(t,e){t.uniform3iv(this.addr,e)}function ko(t,e){t.uniform4iv(this.addr,e)}function Oo(t,e){t.uniform1uiv(this.addr,e)}function Po(t,e){t.uniform2uiv(this.addr,e)}function Io(t,e){t.uniform3uiv(this.addr,e)}function No(t,e){t.uniform4uiv(this.addr,e)}function Do(t,e,n){var r=e.length,i=Ji(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture2D(e[o]||zi,i[o])}function Lo(t,e,n){var r=e.length,i=Ji(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture3D(e[o]||Gi,i[o])}function Ro(t,e,n){var r=e.length,i=Ji(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTextureCube(e[o]||Vi,i[o])}function Bo(t,e,n){var r=e.length,i=Ji(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||Ui,i[o])}class jo{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Qi;case 35664:return to;case 35665:return eo;case 35666:return no;case 35674:return ro;case 35675:return io;case 35676:return oo;case 5124:case 35670:return ao;case 35667:case 35671:return so;case 35668:case 35672:return uo;case 35669:case 35673:return co;case 5125:return lo;case 36294:return ho;case 36295:return fo;case 36296:return po;case 35678:case 36198:case 36298:case 36306:case 35682:return go;case 35679:case 36299:case 36307:return mo;case 35680:case 36300:case 36308:case 36293:return vo;case 36289:case 36303:case 36311:case 36292:return yo}}(e.type)}}class Fo{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return bo;case 35664:return xo;case 35665:return _o;case 35666:return wo;case 35674:return So;case 35675:return Eo;case 35676:return Mo;case 5124:case 35670:return Ao;case 35667:case 35671:return Co;case 35668:case 35672:return To;case 35669:case 35673:return ko;case 5125:return Oo;case 36294:return Po;case 36295:return Io;case 36296:return No;case 35678:case 36198:case 36298:case 36306:case 35682:return Do;case 35679:case 36299:case 36307:return Lo;case 35680:case 36300:case 36308:case 36293:return Ro;case 36289:case 36303:case 36311:case 36292:return Bo}}(e.type)}}class zo{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){var r=this.seq;for(let o=0,a=r.length;o!==a;++o){var i=r[o];i.setValue(t,e[i.id],n)}}}const Uo=/(\w+)(\])?(\[|\.)?/g;function Go(t,e){t.seq.push(e),t.map[e.id]=e}class Vo{constructor(t,e){this.seq=[],this.map={};var n=t.getProgramParameter(e,35718);for(let d=0;d<n;++d){var r=t.getActiveUniform(e,d),i=t.getUniformLocation(e,r.name),o=(f=h=l=c=u=s=a=o=void 0,r),a=i,s=this,u=o.name,c=u.length;for(Uo.lastIndex=0;;){var l=Uo.exec(u),h=Uo.lastIndex;let t=l[1];var f="]"===l[2];l=l[3];if(f&&(t|=0),void 0===l||"["===l&&h+2===c){Go(s,new(void 0===l?jo:Fo)(t,o,a));break}{let e=s.map[t];void 0===e&&Go(s,e=new zo(t)),s=e}}}}setValue(t,e,n,r){e=this.map[e],void 0!==e&&e.setValue(t,n,r)}setOptional(t,e,n){e=e[n],void 0!==e&&this.setValue(t,n,e)}static upload(t,e,n,r){for(let a=0,s=e.length;a!==s;++a){var i=e[a],o=n[i.id];!1!==o.needsUpdate&&i.setValue(t,o.value,r)}}static seqWithValue(t,e){var n=[];for(let i=0,o=t.length;i!==o;++i){var r=t[i];r.id in e&&n.push(r)}return n}}function Wo(t,e,n){return e=t.createShader(e),t.shaderSource(e,n),t.compileShader(e),e}let Ho=0;function Yo(t,e,n){var r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();return r&&""===i?"":(r=/ERROR: 0:(\d+)/.exec(i))?(r=parseInt(r[1]),n.toUpperCase()+"\n\n"+i+"\n\n"+function(t,e){var n=t.split("\n"),r=[],i=(t=Math.max(e-6,0),Math.min(e+6,n.length));for(let a=t;a<i;a++){var o=a+1;r.push(`${o===e?">":" "} ${o}: `+n[a])}return r.join("\n")}(t.getShaderSource(e),r)):i}function qo(t,e){return e=function(t){switch(t){case te:return["Linear","( value )"];case ee:return["sRGB","( value )"];default:return["Linear","( value )"]}}(e),"vec4 "+t+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function Xo(t){return""!==t}function Ko(t,e){var n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Zo(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const $o=/^[ \t]*#include +<([\w\d./]+)>/gm;function Jo(t){return t.replace($o,Qo)}function Qo(t,e){var n=li[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Jo(n)}const ta=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ea(t){return t.replace(ta,na)}function na(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function ra(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function ia(t,e,n,r){const i=t.getContext();var o,a=n.defines,s=n.vertexShader,u=n.fragmentShader,h=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===c?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===l&&(e="SHADOWMAP_TYPE_VSM"),e}(n),f=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case H:case Y:e="ENVMAP_TYPE_CUBE";break;case K:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),d=function(t){let e="ENVMAP_MODE_REFLECTION";return t.envMap&&t.envMapMode===Y?"ENVMAP_MODE_REFRACTION":e}(n),p=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),g=null===(g=(g=n).envMapCubeUVHeight)?null:(o=Math.log2(g)-2,g=1/g,{texelWidth:1/(3*Math.max(Math.pow(2,o),112)),texelHeight:g,maxMip:o}),m=n.isWebGL2?"":[(o=n).extensionDerivatives||o.envMapCubeUVHeight||o.bumpMap||o.tangentSpaceNormalMap||o.clearcoatNormalMap||o.flatShading||"physical"===o.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(o.extensionFragDepth||o.logarithmicDepthBuffer)&&o.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",o.extensionDrawBuffers&&o.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(o.extensionShaderTextureLOD||o.envMap||o.transmission)&&o.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Xo).join("\n");a=function(t){var e=[];for(const r in t){var n=t[r];!1!==n&&e.push("#define "+r+" "+n)}return e.join("\n")}(a);const v=i.createProgram();let y,b,x,_,w=n.glslVersion?"#version "+n.glslVersion+"\n":"";if(n.isRawShaderMaterial?(0<(y=[a].filter(Xo).join("\n")).length&&(y+="\n"),0<(b=[m,a].filter(Xo).join("\n")).length&&(b+="\n")):(y=[ra(n),"#define SHADER_NAME "+n.shaderName,a,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",0<n.morphTargetsCount&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",0<n.morphTargetsCount&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",0<n.morphTargetsCount&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Xo).join("\n"),b=[m,ra(n),"#define SHADER_NAME "+n.shaderName,a,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",n.envMap?"#define "+p:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==W?"#define TONE_MAPPING":"",n.toneMapping!==W?li.tonemapping_pars_fragment:"",n.toneMapping!==W?function(t,e){let n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",li.encodings_pars_fragment,qo("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Xo).join("\n")),s=Zo(Ko(Jo(s),n),n),u=Zo(Ko(Jo(u),n),n),s=ea(s),u=ea(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,b=["#define varying in",n.glslVersion===se?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===se?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b),m=w+y+s,a=w+b+u,f=Wo(i,35633,m),d=Wo(i,35632,a),i.attachShader(v,f),i.attachShader(v,d),void 0!==n.index0AttributeName?i.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v),t.debug.checkShaderErrors){p=i.getProgramInfoLog(v).trim(),g=i.getShaderInfoLog(f).trim(),h=i.getShaderInfoLog(d).trim();let t=!0,e=!0;!1===i.getProgramParameter(v,35714)?(t=!1,Yo(i,f,"vertex"),Yo(i,d,"fragment")):""!==p||""!==g&&""!==h||(e=!1),e&&(this.diagnostics={runnable:t,programLog:p,vertexShader:{log:g,prefix:y},fragmentShader:{log:h,prefix:b}})}return i.deleteShader(f),i.deleteShader(d),this.getUniforms=function(){return x=void 0===x?new Vo(i,v):x},this.getAttributes=function(){return _=void 0===_?function(t,e){var n={},r=t.getProgramParameter(e,35721);for(let a=0;a<r;a++){var i=t.getActiveAttrib(e,a),o=i.name;let r=1;35674===i.type&&(r=2),35675===i.type&&(r=3),35676===i.type&&(r=4),n[o]={type:i.type,location:t.getAttribLocation(e,o),locationSize:r}}return n}(i,v):_},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=Ho++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=f,this.fragmentShader=d,this}let oa=0;class aa{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){var e=t.vertexShader,n=t.fragmentShader;e=this._getShaderStage(e),n=this._getShaderStage(n),t=this._getShaderCacheForMaterial(t);return!1===t.has(e)&&(t.add(e),e.usedTimes++),!1===t.has(n)&&(t.add(n),n.usedTimes++),this}remove(t){for(const e of this.materialCache.get(t))e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){var e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){var e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new sa(t),e.set(t,n)),n}}class sa{constructor(t){this.id=oa++,this.code=t,this.usedTimes=0}}function ua(t,e,n,r,i,o,a){const s=new Rn,u=new aa,c=[],l=i.isWebGL2,h=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(o,s,c,y,b){var x=y.fog,_=b.geometry,w=(y=o.isMeshStandardMaterial?y.environment:null,(y=(o.isMeshStandardMaterial?n:e).get(o.envMap||y))&&y.mapping===K?y.image.height:null),S=v[o.type];null!==o.precision&&(m=i.getMaxPrecision(o.precision),o.precision);var E=void 0!==(E=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color)?E.length:0;let M,A,C,T,k=0;void 0!==_.morphAttributes.position&&(k=1),void 0!==_.morphAttributes.normal&&(k=2),void 0!==_.morphAttributes.color&&(k=3),S?(O=fi[S],M=O.vertexShader,A=O.fragmentShader):(M=o.vertexShader,A=o.fragmentShader,u.update(o),C=u.getVertexShaderID(o),T=u.getFragmentShaderID(o));var O=t.getRenderTarget(),P=0<o.alphaTest,I=0<o.clearcoat,N=0<o.iridescence;return{isWebGL2:l,shaderID:S,shaderName:o.type,vertexShader:M,fragmentShader:A,defines:o.defines,customVertexShaderID:C,customFragmentShaderID:T,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:p,outputEncoding:null===O?t.outputEncoding:!0===O.isXRRenderTarget?O.texture.encoding:te,map:!!o.map,matcap:!!o.matcap,envMap:!!y,envMapMode:y&&y.mapping,envMapCubeUVHeight:w,lightMap:!!o.lightMap,aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===ie,tangentSpaceNormalMap:o.normalMapType===re,decodeVideoTexture:!!o.map&&!0===o.map.isVideoTexture&&o.map.encoding===ee,clearcoat:I,clearcoatMap:I&&!!o.clearcoatMap,clearcoatRoughnessMap:I&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:I&&!!o.clearcoatNormalMap,iridescence:N,iridescenceMap:N&&!!o.iridescenceMap,iridescenceThicknessMap:N&&!!o.iridescenceThicknessMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,opaque:!1===o.transparent&&o.blending===g,alphaMap:!!o.alphaMap,alphaTest:P,gradientMap:!!o.gradientMap,sheen:0<o.sheen,sheenColorMap:!!o.sheenColorMap,sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:0<o.transmission,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!_.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.displacementMap||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheenColorMap||o.sheenRoughnessMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||0<o.transmission||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||0<o.sheen||o.sheenColorMap||o.sheenRoughnessMap||!o.displacementMap),fog:!!x,useFog:!0===o.fog,fogExp2:x&&x.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:E,morphTextureStride:k,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&0<c.length,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:W,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===d,flipSided:o.side===f,useDepthPacking:!!o.depthPacking,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(e){var n,r,i=[];if(e.shaderID?i.push(e.shaderID):(i.push(e.customVertexShaderID),i.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)i.push(t),i.push(e.defines[t]);return!1===e.isRawShaderMaterial&&((n=i).push((r=e).precision),n.push(r.outputEncoding),n.push(r.envMapMode),n.push(r.envMapCubeUVHeight),n.push(r.combine),n.push(r.vertexUvs),n.push(r.fogExp2),n.push(r.sizeAttenuation),n.push(r.morphTargetsCount),n.push(r.morphAttributeCount),n.push(r.numDirLights),n.push(r.numPointLights),n.push(r.numSpotLights),n.push(r.numSpotLightMaps),n.push(r.numHemiLights),n.push(r.numRectAreaLights),n.push(r.numDirLightShadows),n.push(r.numPointLightShadows),n.push(r.numSpotLightShadows),n.push(r.numSpotLightShadowsWithMaps),n.push(r.shadowMapType),n.push(r.toneMapping),n.push(r.numClippingPlanes),n.push(r.numClipIntersection),n.push(r.depthPacking),n=i,r=e,s.disableAll(),r.isWebGL2&&s.enable(0),r.supportsVertexTextures&&s.enable(1),r.instancing&&s.enable(2),r.instancingColor&&s.enable(3),r.map&&s.enable(4),r.matcap&&s.enable(5),r.envMap&&s.enable(6),r.lightMap&&s.enable(7),r.aoMap&&s.enable(8),r.emissiveMap&&s.enable(9),r.bumpMap&&s.enable(10),r.normalMap&&s.enable(11),r.objectSpaceNormalMap&&s.enable(12),r.tangentSpaceNormalMap&&s.enable(13),r.clearcoat&&s.enable(14),r.clearcoatMap&&s.enable(15),r.clearcoatRoughnessMap&&s.enable(16),r.clearcoatNormalMap&&s.enable(17),r.iridescence&&s.enable(18),r.iridescenceMap&&s.enable(19),r.iridescenceThicknessMap&&s.enable(20),r.displacementMap&&s.enable(21),r.specularMap&&s.enable(22),r.roughnessMap&&s.enable(23),r.metalnessMap&&s.enable(24),r.gradientMap&&s.enable(25),r.alphaMap&&s.enable(26),r.alphaTest&&s.enable(27),r.vertexColors&&s.enable(28),r.vertexAlphas&&s.enable(29),r.vertexUvs&&s.enable(30),r.vertexTangents&&s.enable(31),r.uvsVertexOnly&&s.enable(32),n.push(s.mask),s.disableAll(),r.fog&&s.enable(0),r.useFog&&s.enable(1),r.flatShading&&s.enable(2),r.logarithmicDepthBuffer&&s.enable(3),r.skinning&&s.enable(4),r.morphTargets&&s.enable(5),r.morphNormals&&s.enable(6),r.morphColors&&s.enable(7),r.premultipliedAlpha&&s.enable(8),r.shadowMapEnabled&&s.enable(9),r.physicallyCorrectLights&&s.enable(10),r.doubleSided&&s.enable(11),r.flipSided&&s.enable(12),r.useDepthPacking&&s.enable(13),r.dithering&&s.enable(14),r.specularIntensityMap&&s.enable(15),r.specularColorMap&&s.enable(16),r.transmission&&s.enable(17),r.transmissionMap&&s.enable(18),r.thicknessMap&&s.enable(19),r.sheen&&s.enable(20),r.sheenColorMap&&s.enable(21),r.sheenRoughnessMap&&s.enable(22),r.decodeVideoTexture&&s.enable(23),r.opaque&&s.enable(24),n.push(s.mask),i.push(t.outputEncoding)),i.push(e.customProgramCacheKey),i.join()},getUniforms:function(t){var e=v[t.type];return e?(e=fi[e],qr.clone(e.uniforms)):t.uniforms},acquireProgram:function(e,n){let r;for(let t=0,o=c.length;t<o;t++){var i=c[t];if(i.cacheKey===n){++(r=i).usedTimes;break}}return void 0===r&&(r=new ia(t,n,e,o),c.push(r)),r},releaseProgram:function(t){var e;0==--t.usedTimes&&(e=c.indexOf(t),c[e]=c[c.length-1],c.pop(),t.destroy())},releaseShaderCache:function(t){u.remove(t)},programs:c,dispose:function(){u.dispose()}}}function ca(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function la(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ha(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function fa(){const t=[];let e=0;const n=[],r=[],i=[];function o(n,r,i,o,a,s){let u=t[e];return void 0===u?(u={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},t[e]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=i,u.groupOrder=o,u.renderOrder=n.renderOrder,u.z=a,u.group=s),e++,u}return{opaque:n,transmissive:r,transparent:i,init:function(){e=0,n.length=0,r.length=0,i.length=0},push:function(t,e,a,s,u,c){t=o(t,e,a,s,u,c),(0<a.transmission?r:!0===a.transparent?i:n).push(t)},unshift:function(t,e,a,s,u,c){t=o(t,e,a,s,u,c),(0<a.transmission?r:!0===a.transparent?i:n).unshift(t)},finish:function(){for(let r=e,i=t.length;r<i;r++){var n=t[r];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.group=null}},sort:function(t,e){1<n.length&&n.sort(t||la),1<r.length&&r.sort(e||ha),1<i.length&&i.sort(e||ha)}}}function da(){let t=new WeakMap;return{get:function(e,n){var r=t.get(e);let i;return void 0===r?(i=new fa,t.set(e,[i])):n>=r.length?(i=new fa,r.push(i)):i=r[n],i},dispose:function(){t=new WeakMap}}}function pa(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new qe,color:new Le};break;case"SpotLight":n={position:new qe,direction:new qe,color:new Le,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new qe,color:new Le,distance:0,decay:0};break;case"HemisphereLight":n={direction:new qe,skyColor:new Le,groundColor:new Le};break;case"RectAreaLight":n={color:new Le,position:new qe,halfWidth:new qe,halfHeight:new qe}}return t[e.id]=n}}}let ga=0;function ma(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function va(t,e){const n=new pa,r=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)i.probe.push(new qe);const o=new qe,a=new Mn,s=new Mn;return{setup:function(o,a){let s=0,u=0,c=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let l=0,h=0,f=0,d=0,p=0,g=0,m=0,v=0,y=0,b=0;o.sort(ma);var x=!0!==a?Math.PI:1;for(let t=0,e=o.length;t<e;t++){var _,w,S,E,M=o[t],A=M.color,C=M.intensity,T=M.distance,k=M.shadow&&M.shadow.map?M.shadow.map.texture:null;if(M.isAmbientLight)s+=A.r*C*x,u+=A.g*C*x,c+=A.b*C*x;else if(M.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(M.sh.coefficients[t],C);else M.isDirectionalLight?((S=n.get(M)).color.copy(M.color).multiplyScalar(M.intensity*x),M.castShadow&&(_=M.shadow,(w=r.get(M)).shadowBias=_.bias,w.shadowNormalBias=_.normalBias,w.shadowRadius=_.radius,w.shadowMapSize=_.mapSize,i.directionalShadow[l]=w,i.directionalShadowMap[l]=k,i.directionalShadowMatrix[l]=M.shadow.matrix,g++),i.directional[l]=S,l++):M.isSpotLight?((_=n.get(M)).position.setFromMatrixPosition(M.matrixWorld),_.color.copy(A).multiplyScalar(C*x),_.distance=T,_.coneCos=Math.cos(M.angle),_.penumbraCos=Math.cos(M.angle*(1-M.penumbra)),_.decay=M.decay,i.spot[f]=_,w=M.shadow,M.map&&(i.spotLightMap[y]=M.map,y++,w.updateMatrices(M),M.castShadow)&&b++,i.spotLightMatrix[f]=w.matrix,M.castShadow&&((S=r.get(M)).shadowBias=w.bias,S.shadowNormalBias=w.normalBias,S.shadowRadius=w.radius,S.shadowMapSize=w.mapSize,i.spotShadow[f]=S,i.spotShadowMap[f]=k,v++),f++):M.isRectAreaLight?((T=n.get(M)).color.copy(A).multiplyScalar(C),T.halfWidth.set(.5*M.width,0,0),T.halfHeight.set(0,.5*M.height,0),i.rectArea[d]=T,d++):M.isPointLight?((A=n.get(M)).color.copy(M.color).multiplyScalar(M.intensity*x),A.distance=M.distance,A.decay=M.decay,M.castShadow&&(T=M.shadow,(E=r.get(M)).shadowBias=T.bias,E.shadowNormalBias=T.normalBias,E.shadowRadius=T.radius,E.shadowMapSize=T.mapSize,E.shadowCameraNear=T.camera.near,E.shadowCameraFar=T.camera.far,i.pointShadow[h]=E,i.pointShadowMap[h]=k,i.pointShadowMatrix[h]=M.shadow.matrix,m++),i.point[h]=A,h++):M.isHemisphereLight&&((T=n.get(M)).skyColor.copy(M.color).multiplyScalar(C*x),T.groundColor.copy(M.groundColor).multiplyScalar(C*x),i.hemi[p]=T,p++)}0<d&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=hi.LTC_FLOAT_1,i.rectAreaLTC2=hi.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")&&(i.rectAreaLTC1=hi.LTC_HALF_1,i.rectAreaLTC2=hi.LTC_HALF_2)),i.ambient[0]=s,i.ambient[1]=u,i.ambient[2]=c,(a=i.hash).directionalLength===l&&a.pointLength===h&&a.spotLength===f&&a.rectAreaLength===d&&a.hemiLength===p&&a.numDirectionalShadows===g&&a.numPointShadows===m&&a.numSpotShadows===v&&a.numSpotMaps===y||(i.directional.length=l,i.spot.length=f,i.rectArea.length=d,i.point.length=h,i.hemi.length=p,i.directionalShadow.length=g,i.directionalShadowMap.length=g,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=g,i.pointShadowMatrix.length=m,i.spotLightMatrix.length=v+y-b,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=b,a.directionalLength=l,a.pointLength=h,a.spotLength=f,a.rectAreaLength=d,a.hemiLength=p,a.numDirectionalShadows=g,a.numPointShadows=m,a.numSpotShadows=v,a.numSpotMaps=y,i.version=ga++)},setupView:function(t,e){let n=0,r=0,u=0,c=0,l=0;var h=e.matrixWorldInverse;for(let m=0,v=t.length;m<v;m++){var f,d,p,g=t[m];g.isDirectionalLight?((f=i.directional[n]).direction.setFromMatrixPosition(g.matrixWorld),o.setFromMatrixPosition(g.target.matrixWorld),f.direction.sub(o),f.direction.transformDirection(h),n++):g.isSpotLight?((f=i.spot[u]).position.setFromMatrixPosition(g.matrixWorld),f.position.applyMatrix4(h),f.direction.setFromMatrixPosition(g.matrixWorld),o.setFromMatrixPosition(g.target.matrixWorld),f.direction.sub(o),f.direction.transformDirection(h),u++):g.isRectAreaLight?((d=i.rectArea[c]).position.setFromMatrixPosition(g.matrixWorld),d.position.applyMatrix4(h),s.identity(),a.copy(g.matrixWorld),a.premultiply(h),s.extractRotation(a),d.halfWidth.set(.5*g.width,0,0),d.halfHeight.set(0,.5*g.height,0),d.halfWidth.applyMatrix4(s),d.halfHeight.applyMatrix4(s),c++):g.isPointLight?((d=i.point[r]).position.setFromMatrixPosition(g.matrixWorld),d.position.applyMatrix4(h),r++):g.isHemisphereLight&&((p=i.hemi[l]).direction.setFromMatrixPosition(g.matrixWorld),p.direction.transformDirection(h),l++)}},state:i}}function ya(t,e){const n=new va(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(t){n.setup(r,t)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function ba(t,e){let n=new WeakMap;return{get:function(r,i=0){var o=n.get(r);let a;return void 0===o?(a=new ya(t,e),n.set(r,[a])):i>=o.length?(a=new ya(t,e),o.push(a)):a=o[i],a},dispose:function(){n=new WeakMap}}}class xa extends cr{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class _a extends cr{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new qe,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const wa="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Sa="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Ea(t,e,n){let r=new ai;const i=new _e,o=new _e,a=new Ge,s=new xa({depthPacking:ne}),u=new _a,g={},m=n.maxTextureSize,v={0:f,1:h,2:d},y=new Xr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _e},radius:{value:4}},vertexShader:wa,fragmentShader:Sa}),b=y.clone();b.defines.HORIZONTAL_PASS=1,n=new Er,n.setAttribute("position",new dr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Gr(n,y),_=this;function w(e,n,r,i,o,a){let c=null;if(e=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial,c=void 0!==e?e:!0===r.isPointLight?u:s,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&0<n.alphaTest){e=c.uuid;var h=n.uuid;let t=g[e],r=(void 0===t&&(t={},g[e]=t),t[h]);void 0===r&&(r=c.clone(),t[h]=r),c=r}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=a===l?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:v[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=i,c.farDistance=o),c}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=c,this.render=function(n,s,u){if(!1!==_.enabled&&(!1!==_.autoUpdate||!1!==_.needsUpdate)&&0!==n.length){var c=t.getRenderTarget(),h=t.getActiveCubeFace(),f=t.getActiveMipmapLevel(),d=t.state;d.setBlending(p),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let c=0,h=n.length;c<h;c++){var g=n[c],v=g.shadow;if(void 0!==v&&(!1!==v.autoUpdate||!1!==v.needsUpdate)){i.copy(v.mapSize);var S,E,M=v.getFrameExtents(),A=(i.multiply(M),o.copy(v.mapSize),(i.x>m||i.y>m)&&(i.x>m&&(o.x=Math.floor(m/M.x),i.x=o.x*M.x,v.mapSize.x=o.x),i.y>m)&&(o.y=Math.floor(m/M.y),i.y=o.y*M.y,v.mapSize.y=o.y),null===v.map&&(M=this.type!==l?{minFilter:Q,magFilter:Q}:{},v.map=new Ve(i.x,i.y,M),v.map.texture.name=g.name+".shadowMap",v.camera.updateProjectionMatrix()),t.setRenderTarget(v.map),t.clear(),v.getViewportCount());for(let n=0;n<A;n++){var C=v.getViewport(n);a.set(o.x*C.x,o.y*C.y,o.x*C.z,o.y*C.w),d.viewport(a),v.updateMatrices(g,n),r=v.getFrustum(),function n(i,o,a,s,u){if(!1===i.visible)return;const c=i.layers.test(o.layers);if(c&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&u===l)&&(!i.frustumCulled||r.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,i.matrixWorld);const n=e.update(i),r=i.material;if(Array.isArray(r)){const e=n.groups;for(let o=0,c=e.length;o<c;o++){const c=e[o],l=r[c.materialIndex];if(l&&l.visible){const e=w(i,l,s,a.near,a.far,u);t.renderBufferDirect(a,null,n,e,i,c)}}}else if(r.visible){const e=w(i,r,s,a.near,a.far,u);t.renderBufferDirect(a,null,n,e,i,null)}}const h=i.children;for(let t=0,e=h.length;t<e;t++)n(h[t],o,a,s,u)}(s,u,v.camera,g,this.type)}!0!==v.isPointLightShadow&&this.type===l&&(E=S=M=void 0,M=v,S=u,E=e.update(x),y.defines.VSM_SAMPLES!==M.blurSamples&&(y.defines.VSM_SAMPLES=M.blurSamples,b.defines.VSM_SAMPLES=M.blurSamples,y.needsUpdate=!0,b.needsUpdate=!0),null===M.mapPass&&(M.mapPass=new Ve(i.x,i.y)),y.uniforms.shadow_pass.value=M.map.texture,y.uniforms.resolution.value=M.mapSize,y.uniforms.radius.value=M.radius,t.setRenderTarget(M.mapPass),t.clear(),t.renderBufferDirect(S,null,E,y,x,null),b.uniforms.shadow_pass.value=M.mapPass.texture,b.uniforms.resolution.value=M.mapSize,b.uniforms.radius.value=M.radius,t.setRenderTarget(M.map),t.clear(),t.renderBufferDirect(S,null,E,b,x,null)),v.needsUpdate=!1}}_.needsUpdate=!1,t.setRenderTarget(c,h,f)}}}function Ma(t,e,n){const r=n.isWebGL2,i=new function(){let e=!1;const n=new Ge;let r=null;const i=new Ge(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(t){(t?xt:_t)(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case R:t.depthFunc(512);break;case B:t.depthFunc(519);break;case j:t.depthFunc(513);break;case F:t.depthFunc(515);break;case z:t.depthFunc(514);break;case U:t.depthFunc(518);break;case G:t.depthFunc(516);break;case V:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},c=new function(){let e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(t){e||(t?xt:_t)(2960)},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}},l=new WeakMap,h=new WeakMap;let W={},H={},Y=new WeakMap,q=[],X=null,K=!1,Z=null,$=null,J=null,Q=null,tt=null,et=null,nt=null,rt=!1,it=null,ot=null,at=null,st=null,ut=null;const ct=t.getParameter(35661);let lt=!1,ht=0;var ft=t.getParameter(7938);-1!==ft.indexOf("WebGL")?(ht=parseFloat(/^WebGL (\d)/.exec(ft)[1]),lt=1<=ht):-1!==ft.indexOf("OpenGL ES")&&(ht=parseFloat(/^OpenGL ES (\d)/.exec(ft)[1]),lt=2<=ht);let dt=null,pt={};ft=t.getParameter(3088);var gt=t.getParameter(2978);const mt=(new Ge).fromArray(ft),vt=(new Ge).fromArray(gt);function yt(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let a=0;a<r;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}const bt={};function xt(e){!0!==W[e]&&(t.enable(e),W[e]=!0)}function _t(e){!1!==W[e]&&(t.disable(e),W[e]=!1)}bt[3553]=yt(3553,3553,1),bt[34067]=yt(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),c.setClear(0),xt(2929),o.setFunc(F),Mt(!1),At(s),xt(2884),Et(p);const wt={[x]:32774,[_]:32778,[w]:32779},St=(r?(wt[S]=32775,wt[E]=32776):null!==(ft=e.get("EXT_blend_minmax"))&&(wt[S]=ft.MIN_EXT,wt[E]=ft.MAX_EXT),{[M]:0,[A]:1,[C]:768,[k]:770,[L]:776,[N]:774,[P]:772,[T]:769,[O]:771,[D]:775,[I]:773});function Et(e,n,r,i,o,a,s,u){if(e===p)!0===K&&(_t(3042),K=!1);else if(!1===K&&(xt(3042),K=!0),e!==b){if(e!==Z||u!==rt){if($===x&&tt===x||(t.blendEquation(32774),$=x,tt=x),u)switch(e){case g:t.blendFuncSeparate(1,771,1,771);break;case m:t.blendFunc(1,1);break;case v:t.blendFuncSeparate(0,769,0,1);break;case y:t.blendFuncSeparate(0,768,0,770)}else switch(e){case g:t.blendFuncSeparate(770,771,1,771);break;case m:t.blendFunc(770,1);break;case v:t.blendFuncSeparate(0,769,0,1);break;case y:t.blendFunc(0,768)}J=null,Q=null,et=null,nt=null,Z=e,rt=u}}else o=o||n,a=a||r,s=s||i,n===$&&o===tt||(t.blendEquationSeparate(wt[n],wt[o]),$=n,tt=o),r===J&&i===Q&&a===et&&s===nt||(t.blendFuncSeparate(St[r],St[i],St[a],St[s]),J=r,Q=i,et=a,nt=s),Z=e,rt=null}function Mt(e){it!==e&&(e?t.frontFace(2304):t.frontFace(2305),it=e)}function At(e){e!==a?(xt(2884),e!==ot&&(e===s?t.cullFace(1029):e===u?t.cullFace(1028):t.cullFace(1032))):_t(2884),ot=e}function Ct(e,n,r){e?(xt(32823),st===n&&ut===r||(t.polygonOffset(n,r),st=n,ut=r)):_t(32823)}function Tt(e){void 0===e&&(e=33984+ct-1),dt!==e&&(t.activeTexture(e),dt=e)}return{buffers:{color:i,depth:o,stencil:c},enable:xt,disable:_t,bindFramebuffer:function(e,n){return H[e]!==n&&(t.bindFramebuffer(e,n),H[e]=n,r&&(36009===e&&(H[36160]=n),36160===e)&&(H[36009]=n),!0)},drawBuffers:function(r,i){let o=q,a=!1;if(r)if(void 0===(o=Y.get(i))&&(o=[],Y.set(i,o)),r.isWebGLMultipleRenderTargets){if(i=r.texture,o.length!==i.length||36064!==o[0]){for(let t=0,e=i.length;t<e;t++)o[t]=36064+t;o.length=i.length,a=!0}}else 36064!==o[0]&&(o[0]=36064,a=!0);else 1029!==o[0]&&(o[0]=1029,a=!0);a&&(n.isWebGL2?t.drawBuffers(o):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(e){return X!==e&&(t.useProgram(e),X=e,!0)},setBlending:Et,setMaterial:function(t,e){(t.side===d?_t:xt)(2884);let n=t.side===f;Mt(n=e?!n:n),t.blending===g&&!1===t.transparent?Et(p):Et(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite),e=t.stencilWrite,c.setTest(e),e&&(c.setMask(t.stencilWriteMask),c.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),c.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Ct(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),(!0===t.alphaToCoverage?xt:_t)(32926)},setFlipSided:Mt,setCullFace:At,setLineWidth:function(e){e!==at&&(lt&&t.lineWidth(e),at=e)},setPolygonOffset:Ct,setScissorTest:function(t){(t?xt:_t)(3089)},activeTexture:Tt,bindTexture:function(e,n){null===dt&&Tt();let r=pt[dt];void 0===r&&(r={type:void 0,texture:void 0},pt[dt]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||bt[e]),r.type=e,r.texture=n)},unbindTexture:function(){var e=pt[dt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ht){}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(ht){}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(ht){}},updateUBOMapping:function(e,n){let r=h.get(n);void 0===r&&(r=new WeakMap,h.set(n,r)),void 0===r.get(e)&&(n=t.getUniformBlockIndex(n,e.name),r.set(e,n))},uniformBlockBinding:function(e,n){var r=h.get(n).get(e);l.get(e)!==r&&(t.uniformBlockBinding(n,r,e.__bindingPointIndex),l.set(e,r))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(ht){}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(ht){}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(ht){}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(ht){}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ht){}},scissor:function(e){!1===mt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),mt.copy(e))},viewport:function(e){!1===vt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),vt.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),W={},dt=null,pt={},H={},Y=new WeakMap,q=[],X=null,K=!1,Z=null,$=null,J=null,Q=null,tt=null,et=null,nt=null,rt=!1,it=null,ot=null,at=null,st=null,ut=null,mt.set(0,0,t.canvas.width,t.canvas.height),vt.set(0,0,t.canvas.width,t.canvas.height),i.reset(),o.reset(),c.reset()}}}function Aa(t,n,r,i,o,a,s){const u=o.isWebGL2,c=(o.maxTextures,o.maxCubemapSize),l=o.maxTextureSize,h=o.maxSamples,f=n.has("WEBGL_multisampled_render_to_texture")?n.get("WEBGL_multisampled_render_to_texture"):null,d=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let g;const m=new WeakMap;let v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function y(t,e){return v?new OffscreenCanvas(t,e):Ee("canvas")}function b(t,e,n,r){let i=1;return((i=t.width>r||t.height>r?r/Math.max(t.width,t.height):i)<1||!0===e)&&("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap)?(e=(r=e?ye:Math.floor)(i*t.width),r=r(i*t.height),void 0===g&&(g=y(e,r)),(n=n?y(e,r):g).width=e,n.height=r,n.getContext("2d").drawImage(t,0,0,e,r),n):t}function x(t){return ve(t.width)&&ve(t.height)}function _(t,e){return t.generateMipmaps&&e&&t.minFilter!==Q&&t.minFilter!==nt}function w(e){t.generateMipmap(e)}function S(e,r,i,o,a=!1){if(!1===u)return r;if(null!==e&&void 0!==t[e])return t[e];let s=r;return 6403===r&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i)&&(s=33321),33319===r&&(5126===i&&(s=33328),5131===i&&(s=33327),5121===i)&&(s=33323),33325!==(s=6408===r&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=o===ee&&!1===a?35907:32856),32819===i&&(s=32854),32820===i)?32855:s)&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||n.get("EXT_color_buffer_float"),s}function E(t,e,n){return!0===_(t,n)||t.isFramebufferTexture&&t.minFilter!==Q&&t.minFilter!==nt?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&0<t.mipmaps.length?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function M(t){return t===Q||t===tt||t===et?9728:9729}function A(t){var e,n,r,o;t=t.target;t.removeEventListener("dispose",A),e=t,void 0!==(n=i.get(e)).__webglInit&&(r=e.source,(o=m.get(r))&&((n=o[n.__cacheKey]).usedTimes--,0===n.usedTimes&&T(e),0===Object.keys(o).length)&&m.delete(r),i.remove(e)),t.isVideoTexture&&p.delete(t)}function C(e){e=e.target;var n=(e.removeEventListener("dispose",C),e.texture),r=i.get(e),o=i.get(n);if(void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),s.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let i=0;i<6;i++)t.deleteFramebuffer(r.__webglFramebuffer[i]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[i]);else{if(t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let e=0;e<r.__webglColorRenderbuffer.length;e++)r.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(r.__webglColorRenderbuffer[e]);r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let u=0,c=n.length;u<c;u++){var a=i.get(n[u]);a.__webglTexture&&(t.deleteTexture(a.__webglTexture),s.memory.textures--),i.remove(n[u])}i.remove(n),i.remove(e)}function T(e){var n=i.get(e);t.deleteTexture(n.__webglTexture),e=e.source;delete m.get(e)[n.__cacheKey],s.memory.textures--}let k=0;function O(t,e){var n,o=i.get(t);if(t.isVideoTexture&&(n=t,a=s.render.frame,p.get(n)!==a)&&(p.set(n,a),n.update()),!1===t.isRenderTargetTexture&&0<t.version&&o.__version!==t.version){var a=t.image;if(null!==a&&!1!==a.complete)return void L(o,t,e)}r.activeTexture(33984+e),r.bindTexture(3553,o.__webglTexture)}const P={[Z]:10497,[$]:33071,[J]:33648},I={[Q]:9728,[tt]:9984,[et]:9986,[nt]:9729,[rt]:9985,[it]:9987};function N(e,r,a){a?(t.texParameteri(e,10242,P[r.wrapS]),t.texParameteri(e,10243,P[r.wrapT]),32879!==e&&35866!==e||t.texParameteri(e,32882,P[r.wrapR]),t.texParameteri(e,10240,I[r.magFilter]),t.texParameteri(e,10241,I[r.minFilter])):(t.texParameteri(e,10242,33071),t.texParameteri(e,10243,33071),32879!==e&&35866!==e||t.texParameteri(e,32882,33071),r.wrapS===$&&r.wrapT,t.texParameteri(e,10240,M(r.magFilter)),t.texParameteri(e,10241,M(r.minFilter)),r.minFilter!==Q&&r.minFilter),!0===n.has("EXT_texture_filter_anisotropic")&&(a=n.get("EXT_texture_filter_anisotropic"),r.type===ht&&!1===n.has("OES_texture_float_linear")||!1===u&&r.type===ft&&!1===n.has("OES_texture_half_float_linear")||(1<r.anisotropy||i.get(r).__currentAnisotropy)&&(t.texParameterf(e,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,o.getMaxAnisotropy())),i.get(r).__currentAnisotropy=r.anisotropy))}function D(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",A));var i=n.source;let o=m.get(i);void 0===o&&(o={},m.set(i,o)),(i=[]).push((a=n).wrapS),i.push(a.wrapT),i.push(a.magFilter),i.push(a.minFilter),i.push(a.anisotropy),i.push(a.internalFormat),i.push(a.format),i.push(a.type),i.push(a.generateMipmaps),i.push(a.premultiplyAlpha),i.push(a.flipY),i.push(a.unpackAlignment),i.push(a.encoding);var a=i.join();return a!==e.__cacheKey&&(void 0===o[a]&&(o[a]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,r=!0),o[a].usedTimes++,void 0!==(i=o[e.__cacheKey])&&(o[e.__cacheKey].usedTimes--,0===i.usedTimes)&&T(n),e.__cacheKey=a,e.__webglTexture=o[a].texture),r}function L(e,n,i){let o=3553;n.isDataArrayTexture&&(o=35866),n.isData3DTexture&&(o=32879);var s=D(e,n),c=n.source;if(r.activeTexture(33984+i),r.bindTexture(o,e.__webglTexture),c.version!==c.__currentVersion||!0===s){t.pixelStorei(37440,n.flipY),t.pixelStorei(37441,n.premultiplyAlpha),t.pixelStorei(3317,n.unpackAlignment),t.pixelStorei(37443,0),i=n;i=!u&&(i.wrapS!==$||i.wrapT!==$||i.minFilter!==Q&&i.minFilter!==nt)&&!1===x(n.image);var h=x(i=U(n,b(n.image,i,!1,l)))||u,f=a.convert(n.format,n.encoding);let e,m=a.convert(n.type),v=S(n.internalFormat,f,m,n.encoding,n.isVideoTexture);N(o,n,h);var d=n.mipmaps,p=u&&!0!==n.isVideoTexture,g=(s=void 0===c.__currentVersion||!0===s,E(n,i,h));if(n.isDepthTexture)v=6402,u?v=n.type===ht?36012:n.type===lt?33190:n.type===gt?35056:33189:n.type,n.format===_t&&6402===v&&n.type!==ut&&n.type!==lt&&(n.type=lt,m=a.convert(n.type)),n.format===wt&&6402===v&&(v=34041,n.type!==gt)&&(n.type=gt,m=a.convert(n.type)),s&&(p?r.texStorage2D(3553,1,v,i.width,i.height):r.texImage2D(3553,0,v,i.width,i.height,0,f,m,null));else if(n.isDataTexture)if(0<d.length&&h){p&&s&&r.texStorage2D(3553,g,v,d[0].width,d[0].height);for(let t=0,n=d.length;t<n;t++)e=d[t],p?r.texSubImage2D(3553,t,0,0,e.width,e.height,f,m,e.data):r.texImage2D(3553,t,v,e.width,e.height,0,f,m,e.data);n.generateMipmaps=!1}else p?(s&&r.texStorage2D(3553,g,v,i.width,i.height),r.texSubImage2D(3553,0,0,0,i.width,i.height,f,m,i.data)):r.texImage2D(3553,0,v,i.width,i.height,0,f,m,i.data);else if(n.isCompressedTexture){p&&s&&r.texStorage2D(3553,g,v,d[0].width,d[0].height);for(let t=0,i=d.length;t<i;t++)e=d[t],n.format!==yt?null!==f&&(p?r.compressedTexSubImage2D(3553,t,0,0,e.width,e.height,f,e.data):r.compressedTexImage2D(3553,t,v,e.width,e.height,0,e.data)):p?r.texSubImage2D(3553,t,0,0,e.width,e.height,f,m,e.data):r.texImage2D(3553,t,v,e.width,e.height,0,f,m,e.data)}else if(n.isDataArrayTexture)p?(s&&r.texStorage3D(35866,g,v,i.width,i.height,i.depth),r.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,f,m,i.data)):r.texImage3D(35866,0,v,i.width,i.height,i.depth,0,f,m,i.data);else if(n.isData3DTexture)p?(s&&r.texStorage3D(32879,g,v,i.width,i.height,i.depth),r.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,f,m,i.data)):r.texImage3D(32879,0,v,i.width,i.height,i.depth,0,f,m,i.data);else if(n.isFramebufferTexture){if(s)if(p)r.texStorage2D(3553,g,v,i.width,i.height);else{let t=i.width,e=i.height;for(let n=0;n<g;n++)r.texImage2D(3553,n,v,t,e,0,f,m,null),t>>=1,e>>=1}}else if(0<d.length&&h){p&&s&&r.texStorage2D(3553,g,v,d[0].width,d[0].height);for(let t=0,n=d.length;t<n;t++)e=d[t],p?r.texSubImage2D(3553,t,0,0,f,m,e):r.texImage2D(3553,t,v,f,m,e);n.generateMipmaps=!1}else p?(s&&r.texStorage2D(3553,g,v,i.width,i.height),r.texSubImage2D(3553,0,0,0,f,m,i)):r.texImage2D(3553,0,v,f,m,i);_(n,h)&&w(o),c.__currentVersion=c.version,n.onUpdate&&n.onUpdate(n)}e.__version=n.version}function R(e,n,o,s,u){var c=a.convert(o.format,o.encoding),l=a.convert(o.type),h=S(o.internalFormat,c,l,o.encoding);i.get(n).__hasExternalTextures||(32879===u||35866===u?r.texImage3D(u,0,h,n.width,n.height,n.depth,0,c,l,null):r.texImage2D(u,0,h,n.width,n.height,0,c,l,null)),r.bindFramebuffer(36160,e),z(n)?f.framebufferTexture2DMultisampleEXT(36160,s,u,i.get(o).__webglTexture,0,F(n)):t.framebufferTexture2D(36160,s,u,i.get(o).__webglTexture,0),r.bindFramebuffer(36160,null)}function B(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let o=33189;r||z(n)?((i=n.depthTexture)&&i.isDepthTexture&&(i.type===ht?o=36012:i.type===lt&&(o=33190)),i=F(n),z(n)?f.renderbufferStorageMultisampleEXT(36161,i,o,n.width,n.height):t.renderbufferStorageMultisample(36161,i,o,n.width,n.height)):t.renderbufferStorage(36161,o,n.width,n.height),t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){var i=F(n);r&&!1===z(n)?t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):z(n)?f.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{var o=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let e=0;e<o.length;e++){var s=o[e],u=a.convert(s.format,s.encoding),c=a.convert(s.type);u=S(s.internalFormat,u,c,s.encoding),c=F(n);r&&!1===z(n)?t.renderbufferStorageMultisample(36161,c,u,n.width,n.height):z(n)?f.renderbufferStorageMultisampleEXT(36161,c,u,n.width,n.height):t.renderbufferStorage(36161,u,n.width,n.height)}}t.bindRenderbuffer(36161,null)}function j(e){var n=i.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!n.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");var a=n.__webglFramebuffer,s=e;if(s&&s.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,a),!s.depthTexture||!s.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(s.depthTexture).__webglTexture&&s.depthTexture.image.width===s.width&&s.depthTexture.image.height===s.height||(s.depthTexture.image.width=s.width,s.depthTexture.image.height=s.height,s.depthTexture.needsUpdate=!0),O(s.depthTexture,0);a=i.get(s.depthTexture).__webglTexture;var u=F(s);if(s.depthTexture.format===_t)z(s)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,u):t.framebufferTexture2D(36160,36096,3553,a,0);else{if(s.depthTexture.format!==wt)throw new Error("Unknown depthTexture format");z(s)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,u):t.framebufferTexture2D(36160,33306,3553,a,0)}}else if(o){n.__webglDepthbuffer=[];for(let i=0;i<6;i++)r.bindFramebuffer(36160,n.__webglFramebuffer[i]),n.__webglDepthbuffer[i]=t.createRenderbuffer(),B(n.__webglDepthbuffer[i],e,!1)}else r.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),B(n.__webglDepthbuffer,e,!1);r.bindFramebuffer(36160,null)}function F(t){return Math.min(h,t.samples)}function z(t){var e=i.get(t);return u&&0<t.samples&&!0===n.has("WEBGL_multisampled_render_to_texture")&&!1!==e.__useRenderToTexture}function U(t,e){var r=t.encoding,i=t.format;return t.type,!0!==t.isCompressedTexture&&!0!==t.isVideoTexture&&t.format!==ue&&r!==te&&r===ee&&!1===u&&(!0===n.has("EXT_sRGB")&&i===yt?(t.format=ue,t.minFilter=nt,t.generateMipmaps=!1):e=Be.sRGBToLinear(e)),e}this.allocateTextureUnit=function(){var t=k;return k+=1,t},this.resetTextureUnits=function(){k=0},this.setTexture2D=O,this.setTexture2DArray=function(t,e){var n=i.get(t);0<t.version&&n.__version!==t.version?L(n,t,e):(r.activeTexture(33984+e),r.bindTexture(35866,n.__webglTexture))},this.setTexture3D=function(t,e){var n=i.get(t);0<t.version&&n.__version!==t.version?L(n,t,e):(r.activeTexture(33984+e),r.bindTexture(32879,n.__webglTexture))},this.setTextureCube=function(e,n){var o=i.get(e);if(0<e.version&&o.__version!==e.version){var s=o,l=e;e=n;if(6===l.image.length){var h=D(s,l),f=l.source;if(r.activeTexture(33984+e),r.bindTexture(34067,s.__webglTexture),f.version!==f.__currentVersion||!0===h){t.pixelStorei(37440,l.flipY),t.pixelStorei(37441,l.premultiplyAlpha),t.pixelStorei(3317,l.unpackAlignment),t.pixelStorei(37443,0);var d=l.isCompressedTexture||l.image[0].isCompressedTexture,p=l.image[0]&&l.image[0].isDataTexture,g=[];for(let t=0;t<6;t++)g[t]=d||p?p?l.image[t].image:l.image[t]:b(l.image[t],!1,!0,c),g[t]=U(l,g[t]);e=g[0];var m=x(e)||u,v=a.convert(l.format,l.encoding),y=a.convert(l.type),M=S(l.internalFormat,v,y,l.encoding),A=u&&!0!==l.isVideoTexture;h=void 0===f.__currentVersion||!0===h;let n,i=E(l,e,m);if(N(34067,l,m),d){A&&h&&r.texStorage2D(34067,i,M,e.width,e.height);for(let t=0;t<6;t++){n=g[t].mipmaps;for(let e=0;e<n.length;e++){var C=n[e];l.format!==yt?null!==v&&(A?r.compressedTexSubImage2D(34069+t,e,0,0,C.width,C.height,v,C.data):r.compressedTexImage2D(34069+t,e,M,C.width,C.height,0,C.data)):A?r.texSubImage2D(34069+t,e,0,0,C.width,C.height,v,y,C.data):r.texImage2D(34069+t,e,M,C.width,C.height,0,v,y,C.data)}}}else{n=l.mipmaps,A&&h&&(0<n.length&&i++,r.texStorage2D(34067,i,M,g[0].width,g[0].height));for(let t=0;t<6;t++)if(p){A?r.texSubImage2D(34069+t,0,0,0,g[t].width,g[t].height,v,y,g[t].data):r.texImage2D(34069+t,0,M,g[t].width,g[t].height,0,v,y,g[t].data);for(let e=0;e<n.length;e++){var T=n[e].image[t].image;A?r.texSubImage2D(34069+t,e+1,0,0,T.width,T.height,v,y,T.data):r.texImage2D(34069+t,e+1,M,T.width,T.height,0,v,y,T.data)}}else{A?r.texSubImage2D(34069+t,0,0,0,v,y,g[t]):r.texImage2D(34069+t,0,M,v,y,g[t]);for(let e=0;e<n.length;e++){var k=n[e];A?r.texSubImage2D(34069+t,e+1,0,0,v,y,k.image[t]):r.texImage2D(34069+t,e+1,M,v,y,k.image[t])}}}_(l,m)&&w(34067),f.__currentVersion=f.version,l.onUpdate&&l.onUpdate(l)}s.__version=l.version}}else r.activeTexture(33984+n),r.bindTexture(34067,o.__webglTexture)},this.rebindTextures=function(t,e,n){var r=i.get(t);void 0!==e&&R(r.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&j(t)},this.setupRenderTarget=function(e){const n=e.texture;var c=i.get(e),l=i.get(n),h=(e.addEventListener("dispose",C),!0!==e.isWebGLMultipleRenderTargets&&(void 0===l.__webglTexture&&(l.__webglTexture=t.createTexture()),l.__version=n.version,s.memory.textures++),!0===e.isWebGLCubeRenderTarget),f=!0===e.isWebGLMultipleRenderTargets,d=x(e)||u;if(h){c.__webglFramebuffer=[];for(let e=0;e<6;e++)c.__webglFramebuffer[e]=t.createFramebuffer()}else{if(c.__webglFramebuffer=t.createFramebuffer(),f&&o.drawBuffers){var p=e.texture;for(let e=0,n=p.length;e<n;e++){var g=i.get(p[e]);void 0===g.__webglTexture&&(g.__webglTexture=t.createTexture(),s.memory.textures++)}}if(u&&0<e.samples&&!1===z(e)){var m=f?n:[n];c.__webglMultisampledFramebuffer=t.createFramebuffer(),c.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<m.length;n++){const r=m[n];c.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);var v=a.convert(r.format,r.encoding),y=a.convert(r.type);v=S(r.internalFormat,v,y,r.encoding),y=F(e);t.renderbufferStorageMultisample(36161,y,v,e.width,e.height),t.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(c.__webglDepthRenderbuffer=t.createRenderbuffer(),B(c.__webglDepthRenderbuffer,e,!0)),r.bindFramebuffer(36160,null)}}if(h){r.bindTexture(34067,l.__webglTexture),N(34067,n,d);for(let t=0;t<6;t++)R(c.__webglFramebuffer[t],e,n,36064,34069+t);_(n,d)&&w(34067)}else if(f){var b=e.texture;for(let t=0,n=b.length;t<n;t++){var E=b[t],M=i.get(E);r.bindTexture(3553,M.__webglTexture),N(3553,E,d),R(c.__webglFramebuffer,e,E,36064+t,3553),_(E,d)&&w(3553)}}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&u&&(t=e.isWebGL3DRenderTarget?32879:35866),r.bindTexture(t,l.__webglTexture),N(t,n,d),R(c.__webglFramebuffer,e,n,36064,t),_(n,d)&&w(t)}r.unbindTexture(),e.depthBuffer&&j(e)},this.updateRenderTargetMipmap=function(t){var e=x(t)||u,n=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,u=n.length;s<u;s++){var o,a=n[s];_(a,e)&&(o=t.isWebGLCubeRenderTarget?34067:3553,a=i.get(a).__webglTexture,r.bindTexture(o,a),w(o),r.unbindTexture())}},this.updateMultisampleRenderTarget=function(e){if(u&&0<e.samples&&!1===z(e)){var n=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=e.width,a=e.height;let u=16384;var s=[],c=e.stencilBuffer?33306:36096,l=i.get(e),h=!0===e.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<n.length;e++)r.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,null),r.bindFramebuffer(36160,l.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,null,0);r.bindFramebuffer(36008,l.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,l.__webglFramebuffer);for(let r=0;r<n.length;r++){s.push(36064+r),e.depthBuffer&&s.push(c);var f=void 0!==l.__ignoreDepthValues&&l.__ignoreDepthValues;!1===f&&(e.depthBuffer&&(u|=256),e.stencilBuffer)&&(u|=1024),h&&t.framebufferRenderbuffer(36008,36064,36161,l.__webglColorRenderbuffer[r]),!0===f&&(t.invalidateFramebuffer(36008,[c]),t.invalidateFramebuffer(36009,[c])),h&&(f=i.get(n[r]).__webglTexture,t.framebufferTexture2D(36009,36064,3553,f,0)),t.blitFramebuffer(0,0,o,a,0,0,o,a,u,9728),d&&t.invalidateFramebuffer(36008,s)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),h)for(let e=0;e<n.length;e++){r.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,l.__webglColorRenderbuffer[e]);var p=i.get(n[e]).__webglTexture;r.bindFramebuffer(36160,l.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,p,0)}r.bindFramebuffer(36009,l.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=j,this.setupFrameBufferTexture=R,this.useMultisampledRTT=z}function Ca(t,e,n){const r=n.isWebGL2;return{convert:function(n,i=null){let o;if(n===ot)return 5121;if(n===dt)return 32819;if(n===pt)return 32820;if(n===at)return 5120;if(n===st)return 5122;if(n===ut)return 5123;if(n===ct)return 5124;if(n===lt)return 5125;if(n===ht)return 5126;if(n===ft)return r?5131:null!==(o=e.get("OES_texture_half_float"))?o.HALF_FLOAT_OES:null;if(n===mt)return 6406;if(n===yt)return 6408;if(n===bt)return 6409;if(n===xt)return 6410;if(n===_t)return 6402;if(n===wt)return 34041;if(n===St)return 6403;if(n===vt)return 6408;if(n===ue)return null!==(o=e.get("EXT_sRGB"))?o.SRGB_ALPHA_EXT:null;if(n===Et)return 36244;if(n===Mt)return 33319;if(n===At)return 33320;if(n===Ct)return 36249;if(n===Tt||n===kt||n===Ot||n===Pt)if(i===ee){if(null===(o=e.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===Tt)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===kt)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Ot)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Pt)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(o=e.get("WEBGL_compressed_texture_s3tc")))return null;if(n===Tt)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===kt)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ot)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Pt)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===It||n===Nt||n===Dt||n===Lt){if(null===(o=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===It)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Nt)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Dt)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Lt)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Rt)return null!==(o=e.get("WEBGL_compressed_texture_etc1"))?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Bt||n===jt){if(null===(o=e.get("WEBGL_compressed_texture_etc")))return null;if(n===Bt)return i===ee?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===jt)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===Ft||n===zt||n===Ut||n===Gt||n===Vt||n===Wt||n===Ht||n===Yt||n===qt||n===Xt||n===Kt||n===Zt||n===$t||n===Jt){if(null===(o=e.get("WEBGL_compressed_texture_astc")))return null;if(n===Ft)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===zt)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Ut)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Gt)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Vt)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Wt)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Ht)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Yt)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===qt)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Xt)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Kt)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Zt)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===$t)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Jt)return i===ee?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Qt){if(null===(o=e.get("EXT_texture_compression_bptc")))return null;if(n===Qt)return i===ee?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===gt?r?34042:null!==(o=e.get("WEBGL_depth_texture"))?o.UNSIGNED_INT_24_8_WEBGL:null:void 0!==t[n]?t[n]:null}}}class Ta extends Zr{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class ka extends Zn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Oa={type:"move"};class Pa{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ka,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ka,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new qe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new qe),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ka,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new qe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new qe),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,o=null;var a=this._targetRay,s=this._grip,u=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(u&&t.hand){o=!0;for(const r of t.hand.values()){var c=e.getJointPose(r,n),l=(void 0===u.joints[r.jointName]&&((l=new ka).matrixAutoUpdate=!1,l.visible=!1,u.joints[r.jointName]=l,u.add(l)),u.joints[r.jointName]);null!==c&&(l.matrix.fromArray(c.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.jointRadius=c.radius),l.visible=null!==c}var h=u.joints["index-finger-tip"],f=u.joints["thumb-tip"];h=h.position.distanceTo(f.position);u.inputState.pinching&&.025<h?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&h<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&null!==(i=e.getPose(t.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);null!==a&&null!==(r=null===(r=e.getPose(t.targetRaySpace,n))&&null!==i?i:r)&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Oa))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==o),this}}class Ia extends Ue{constructor(t,e,n,r,i,o,a,s,u,c){if((c=void 0!==c?c:_t)!==_t&&c!==wt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,i,o,a,s,c,n=void 0===(n=void 0===n&&c===_t?lt:n)&&c===wt?gt:n,u),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:Q,this.minFilter=void 0!==s?s:Q,this.flipY=!1,this.generateMipmaps=!1}}class Na extends ce{constructor(t,e){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=null,u=null,c=null,l=null,h=null,f=null;const d=e.getContextAttributes();let p=null,g=null;const m=[],v=[],y=new Zr,b=(y.layers.enable(1),y.viewport=new Ge,new Zr),x=(b.layers.enable(2),b.viewport=new Ge,[y,b]),_=new Ta;_.layers.enable(1),_.layers.enable(2);let w=null,S=null;function E(t){var e=v.indexOf(t.inputSource);-1!==e&&void 0!==(e=m[e])&&e.dispatchEvent({type:t.type,data:t.inputSource})}function M(){r.removeEventListener("select",E),r.removeEventListener("selectstart",E),r.removeEventListener("selectend",E),r.removeEventListener("squeeze",E),r.removeEventListener("squeezestart",E),r.removeEventListener("squeezeend",E),r.removeEventListener("end",M),r.removeEventListener("inputsourceschange",A);for(let t=0;t<m.length;t++){var e=v[t];null!==e&&(v[t]=null,m[t].disconnect(e))}w=null,S=null,t.setRenderTarget(p),h=null,l=null,c=null,r=null,g=null,P.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function A(t){for(let o=0;o<t.removed.length;o++){var e=t.removed[o],n=v.indexOf(e);0<=n&&(v[n]=null,m[n].dispatchEvent({type:"disconnected",data:e}))}for(let o=0;o<t.added.length;o++){var r=t.added[o];let e=v.indexOf(r);if(-1===e){for(let t=0;t<m.length;t++){if(t>=v.length){v.push(r),e=t;break}if(null===v[t]){v[t]=r,e=t;break}}if(-1===e)break}var i=m[e];i&&i.dispatchEvent({type:"connected",data:r})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=m[t];return void 0===e&&(e=new Pa,m[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=m[t];return void 0===e&&(e=new Pa,m[t]=e),e.getGripSpace()},this.getHand=function(t){let e=m[t];return void 0===e&&(e=new Pa,m[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,n.isPresenting},this.setReferenceSpaceType=function(t){a=t,n.isPresenting},this.getReferenceSpace=function(){return s||o},this.setReferenceSpace=function(t){s=t},this.getBaseLayer=function(){return null!==l?l:h},this.getBinding=function(){return c},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(u){if(null!==(r=u)){if(p=t.getRenderTarget(),r.addEventListener("select",E),r.addEventListener("selectstart",E),r.addEventListener("selectend",E),r.addEventListener("squeeze",E),r.addEventListener("squeezestart",E),r.addEventListener("squeezeend",E),r.addEventListener("end",M),r.addEventListener("inputsourceschange",A),!0!==d.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2)u={antialias:void 0!==r.renderState.layers||d.antialias,alpha:d.alpha,depth:d.depth,stencil:d.stencil,framebufferScaleFactor:i},h=new XRWebGLLayer(r,e,u),r.updateRenderState({baseLayer:h}),g=new Ve(h.framebufferWidth,h.framebufferHeight,{format:yt,type:ot,encoding:t.outputEncoding,stencilBuffer:d.stencil});else{let n=null,o=null,a=null;d.depth&&(a=d.stencil?35056:33190,n=d.stencil?wt:_t,o=d.stencil?gt:lt),u={colorFormat:32856,depthFormat:a,scaleFactor:i},c=new XRWebGLBinding(r,e),l=c.createProjectionLayer(u),r.updateRenderState({layers:[l]}),g=new Ve(l.textureWidth,l.textureHeight,{format:yt,type:ot,depthTexture:new Ia(l.textureWidth,l.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:d.stencil,encoding:t.outputEncoding,samples:d.antialias?4:0}),t.properties.get(g).__ignoreDepthValues=l.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),s=null,o=await r.requestReferenceSpace(a),P.setContext(r),P.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const C=new qe,T=new qe;function k(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null!==r){_.near=b.near=y.near=t.near,_.far=b.far=y.far=t.far,w===_.near&&S===_.far||(r.updateRenderState({depthNear:_.near,depthFar:_.far}),w=_.near,S=_.far);var e=t.parent,n=_.cameras;k(_,e);for(let t=0;t<n.length;t++)k(n[t],e);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),t.matrix.copy(_.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale);var i,o,a,s,u,c,l,h,f,d,p=t.children;for(let t=0,e=p.length;t<e;t++)p[t].updateMatrixWorld(!0);2===n.length?(t=_,i=y,o=b,C.setFromMatrixPosition(i.matrixWorld),T.setFromMatrixPosition(o.matrixWorld),a=C.distanceTo(T),s=i.projectionMatrix.elements,o=o.projectionMatrix.elements,u=s[14]/(s[10]-1),c=s[14]/(s[10]+1),l=(s[9]+1)/s[5],h=(s[9]-1)/s[5],s=(s[8]-1)/s[0],o=(o[8]+1)/o[0],f=u*s,d=u*o,s=(o=a/(o-s))*-s,i.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(s),t.translateZ(o),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert(),i=u+o,u=c+o,t.projectionMatrix.makePerspective(f-s,a-s+d,l*c/u*i,h*c/u*i,i,u)):_.projectionMatrix.copy(y.projectionMatrix)}},this.getCamera=function(){return _},this.getFoveation=function(){return null!==l?l.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(t){null!==l&&(l.fixedFoveation=t),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=t)};let O=null;const P=new si;P.setAnimationLoop((function(e,n){if(u=n.getViewerPose(s||o),f=n,null!==u){var r=u.views;null!==h&&(t.setRenderTargetFramebuffer(g,h.framebuffer),t.setRenderTarget(g));let e=!1;r.length!==_.cameras.length&&(_.cameras.length=0,e=!0);for(let n=0;n<r.length;n++){var i,a=r[n];let o=null,s=(null!==h?o=h.getViewport(a):(i=c.getViewSubImage(l,a),o=i.viewport,0===n&&(t.setRenderTargetTextures(g,i.colorTexture,l.ignoreDepthValues?void 0:i.depthStencilTexture),t.setRenderTarget(g))),x[n]);void 0===s&&((s=new Zr).layers.enable(n),s.viewport=new Ge,x[n]=s),s.matrix.fromArray(a.transform.matrix),s.projectionMatrix.fromArray(a.projectionMatrix),s.viewport.set(o.x,o.y,o.width,o.height),0===n&&_.matrix.copy(s.matrix),!0===e&&_.cameras.push(s)}}for(let t=0;t<m.length;t++){var d=v[t],p=m[t];null!==d&&void 0!==p&&p.update(d,n,s||o)}O&&O(e,n),f=null})),this.setAnimationLoop=function(t){O=t},this.dispose=function(){}}}function Da(t,e){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===f)&&(n.bumpScale.value*=-1),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===f)&&n.normalScale.value.negate(),r.specularMap&&(n.specularMap.value=r.specularMap),0<r.alphaTest&&(n.alphaTest.value=r.alphaTest);var i=e.get(r).envMap;let o,a;i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap&&(n.lightMap.value=r.lightMap,i=!0!==t.physicallyCorrectLights?Math.PI:1,n.lightMapIntensity.value=r.lightMapIntensity*i),r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?o=r.map:r.specularMap?o=r.specularMap:r.displacementMap?o=r.displacementMap:r.normalMap?o=r.normalMap:r.bumpMap?o=r.bumpMap:r.roughnessMap?o=r.roughnessMap:r.metalnessMap?o=r.metalnessMap:r.alphaMap?o=r.alphaMap:r.emissiveMap?o=r.emissiveMap:r.clearcoatMap?o=r.clearcoatMap:r.clearcoatNormalMap?o=r.clearcoatNormalMap:r.clearcoatRoughnessMap?o=r.clearcoatRoughnessMap:r.iridescenceMap?o=r.iridescenceMap:r.iridescenceThicknessMap?o=r.iridescenceThicknessMap:r.specularIntensityMap?o=r.specularIntensityMap:r.specularColorMap?o=r.specularColorMap:r.transmissionMap?o=r.transmissionMap:r.thicknessMap?o=r.thicknessMap:r.sheenColorMap?o=r.sheenColorMap:r.sheenRoughnessMap&&(o=r.sheenRoughnessMap),void 0!==o&&(!0===(o=o.isWebGLRenderTarget?o.texture:o).matrixAutoUpdate&&o.updateMatrix(),n.uvTransform.value.copy(o.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(!0===(a=a.isWebGLRenderTarget?a.texture:a).matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,i,o,a){if(r.isMeshBasicMaterial)n(t,r);else if(r.isMeshLambertMaterial)n(t,r);else if(r.isMeshToonMaterial)n(t,r),h=t,(d=r).gradientMap&&(h.gradientMap.value=d.gradientMap);else if(r.isMeshPhongMaterial)n(t,r),h=r,(d=t).specular.value.copy(h.specular),d.shininess.value=Math.max(h.shininess,1e-4);else if(r.isMeshStandardMaterial){n(t,r);var s=t,u=r,c=(s.roughness.value=u.roughness,s.metalness.value=u.metalness,u.roughnessMap&&(s.roughnessMap.value=u.roughnessMap),u.metalnessMap&&(s.metalnessMap.value=u.metalnessMap),e.get(u).envMap);c&&(s.envMapIntensity.value=u.envMapIntensity),r.isMeshPhysicalMaterial&&(c=r,s=a,(u=t).ior.value=c.ior,0<c.sheen&&(u.sheenColor.value.copy(c.sheenColor).multiplyScalar(c.sheen),u.sheenRoughness.value=c.sheenRoughness,c.sheenColorMap&&(u.sheenColorMap.value=c.sheenColorMap),c.sheenRoughnessMap)&&(u.sheenRoughnessMap.value=c.sheenRoughnessMap),0<c.clearcoat&&(u.clearcoat.value=c.clearcoat,u.clearcoatRoughness.value=c.clearcoatRoughness,c.clearcoatMap&&(u.clearcoatMap.value=c.clearcoatMap),c.clearcoatRoughnessMap&&(u.clearcoatRoughnessMap.value=c.clearcoatRoughnessMap),c.clearcoatNormalMap)&&(u.clearcoatNormalScale.value.copy(c.clearcoatNormalScale),u.clearcoatNormalMap.value=c.clearcoatNormalMap,c.side===f)&&u.clearcoatNormalScale.value.negate(),0<c.iridescence&&(u.iridescence.value=c.iridescence,u.iridescenceIOR.value=c.iridescenceIOR,u.iridescenceThicknessMinimum.value=c.iridescenceThicknessRange[0],u.iridescenceThicknessMaximum.value=c.iridescenceThicknessRange[1],c.iridescenceMap&&(u.iridescenceMap.value=c.iridescenceMap),c.iridescenceThicknessMap)&&(u.iridescenceThicknessMap.value=c.iridescenceThicknessMap),0<c.transmission&&(u.transmission.value=c.transmission,u.transmissionSamplerMap.value=s.texture,u.transmissionSamplerSize.value.set(s.width,s.height),c.transmissionMap&&(u.transmissionMap.value=c.transmissionMap),u.thickness.value=c.thickness,c.thicknessMap&&(u.thicknessMap.value=c.thicknessMap),u.attenuationDistance.value=c.attenuationDistance,u.attenuationColor.value.copy(c.attenuationColor)),u.specularIntensity.value=c.specularIntensity,u.specularColor.value.copy(c.specularColor),c.specularIntensityMap&&(u.specularIntensityMap.value=c.specularIntensityMap),c.specularColorMap)&&(u.specularColorMap.value=c.specularColorMap)}else if(r.isMeshMatcapMaterial)n(t,r),a=t,(s=r).matcap&&(a.matcap.value=s.matcap);else if(r.isMeshDepthMaterial)n(t,r);else if(r.isMeshDistanceMaterial)n(t,r),u=r,(c=t).referencePosition.value.copy(u.referencePosition),c.nearDistance.value=u.nearDistance,c.farDistance.value=u.farDistance;else if(r.isMeshNormalMaterial)n(t,r);else if(r.isLineBasicMaterial)a=r,(l=t).diffuse.value.copy(a.color),l.opacity.value=a.opacity,r.isLineDashedMaterial&&(l=r,(a=t).dashSize.value=l.dashSize,a.totalSize.value=l.dashSize+l.gapSize,a.scale.value=l.scale);else if(r.isPointsMaterial){let e;a=t,l=r,a.diffuse.value.copy(l.color),a.opacity.value=l.opacity,a.size.value=l.size*i,a.scale.value=.5*o,l.map&&(a.map.value=l.map),l.alphaMap&&(a.alphaMap.value=l.alphaMap),0<l.alphaTest&&(a.alphaTest.value=l.alphaTest),l.map?e=l.map:l.alphaMap&&(e=l.alphaMap),void 0!==e&&(!0===e.matrixAutoUpdate&&e.updateMatrix(),a.uvTransform.value.copy(e.matrix))}else if(r.isSpriteMaterial){let e;i=t,o=r,i.diffuse.value.copy(o.color),i.opacity.value=o.opacity,i.rotation.value=o.rotation,o.map&&(i.map.value=o.map),o.alphaMap&&(i.alphaMap.value=o.alphaMap),0<o.alphaTest&&(i.alphaTest.value=o.alphaTest),o.map?e=o.map:o.alphaMap&&(e=o.alphaMap),void 0!==e&&(!0===e.matrixAutoUpdate&&e.updateMatrix(),i.uvTransform.value.copy(e.matrix))}else r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1);var l,h,d}}}function La(t,e,n,r){let i={},o={},a=[];const s=n.isWebGL2?t.getParameter(35375):0;function u(e){e=e.target;var n=(e.removeEventListener("dispose",u),a.indexOf(e.__bindingPointIndex));a.splice(n,1),t.deleteBuffer(i[e.id]),delete i[e.id],delete o[e.id]}return{bind:function(t,e){e=e.program,r.uniformBlockBinding(t,e)},update:function(n,c){var l;if(void 0===(l=i[n.id])){{var h=n,f=h.uniforms;let t=0,e=0;for(let n=0,r=f.length;n<r;n++){var d,p=f[n],g=function(t){t=t.value;var e={boundary:0,storage:0};return"number"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture,e}(p);p.__data=new Float32Array(g.storage/Float32Array.BYTES_PER_ELEMENT),p.__offset=t,0<n&&(d=16-(e=t%16),0!==e)&&d-g.boundary<0&&(t+=16-e,p.__offset=t),t+=g.storage}0<(e=t%16)&&(t+=16-e),h.__size=t,h.__cache={}}h=n,v=function(){for(let t=0;t<s;t++)if(-1===a.indexOf(t))return a.push(t),t;return 0}(),h.__bindingPointIndex=v,y=t.createBuffer(),m=h.__size,h=h.usage,t.bindBuffer(35345,y),t.bufferData(35345,m,h),t.bindBuffer(35345,null),t.bindBufferBase(35345,v,y),l=y,i[n.id]=l,n.addEventListener("dispose",u)}var m=c.program;r.updateUBOMapping(n,m),h=e.render.frame;if(o[n.id]!==h){var v=n,y=i[v.id],b=v.uniforms,x=v.__cache;t.bindBuffer(35345,y);for(let e=0,n=b.length;e<n;e++){var _,w,S=b[e];!0===function(t,e,n){if(t=t.value,void 0===n[e])return n[e]="number"==typeof t?t:t.clone(),!0;if("number"==typeof t){if(n[e]!==t)return n[e]=t,!0}else if(n=n[e],!1===n.equals(t))return n.copy(t),!0;return!1}(S,e,x)&&(_=S.value,w=S.__offset,"number"==typeof _?S.__data[0]=_:S.value.isMatrix3?(S.__data[0]=S.value.elements[0],S.__data[1]=S.value.elements[1],S.__data[2]=S.value.elements[2],S.__data[3]=S.value.elements[0],S.__data[4]=S.value.elements[3],S.__data[5]=S.value.elements[4],S.__data[6]=S.value.elements[5],S.__data[7]=S.value.elements[0],S.__data[8]=S.value.elements[6],S.__data[9]=S.value.elements[7],S.__data[10]=S.value.elements[8],S.__data[11]=S.value.elements[0]):_.toArray(S.__data),t.bufferSubData(35345,w,S.__data))}t.bindBuffer(35345,null),o[n.id]=h}},dispose:function(){for(const e in i)t.deleteBuffer(i[e]);a=[],i={},o={}}}}function Ra(t={}){this.isWebGLRenderer=!0;const e=void 0!==t.canvas?t.canvas:((p=Ee("canvas")).style.display="block",p),n=void 0!==t.context?t.context:null,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",l=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;var p;let g,m=(g=null!==n?n.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha,null),v=null;const y=[],b=[],x=(this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=te,this.physicallyCorrectLights=!1,this.toneMapping=W,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return 2},set:function(){}}}),this);let _=!1,w=0,S=0,E=null,M=-1,A=null;const C=new Ge,T=new Ge;let k=null,O=e.width,P=e.height,I=1,N=null,D=null;const L=new Ge(0,0,O,P),R=new Ge(0,0,O,P);let B=!1;const j=new ai;let F=!1,z=!1,U=null;const G=new Mn,V=new _e,H=new qe,Y={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function q(){return null===E?I:1}let X,K,Z,$,J,Q,tt,et,nt,rt,at,st,ut,ct,lt,dt,pt,gt,mt,vt,bt,xt,_t,wt,St=n;function Et(t,n){for(let i=0;i<t.length;i++){var r=t[i];r=e.getContext(r,n);if(null!==r)return r}return null}try{var Mt={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:l};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r"+r),e.addEventListener("webglcontextlost",kt,!1),e.addEventListener("webglcontextrestored",Ot,!1),e.addEventListener("webglcontextcreationerror",Pt,!1),null===St){var At=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&At.shift(),null===(St=Et(At,Mt)))throw Et(At)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===St.getShaderPrecisionFormat&&(St.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw t}function Ct(){X=new Ii(St),K=new mi(St,X,t),X.init(K),xt=new Ca(St,X,K),Z=new Ma(St,X,K),$=new Li,J=new ca,Q=new Aa(St,X,Z,J,K,xt,$),tt=new yi(x),et=new Pi(x),nt=new ui(St,K),_t=new pi(St,X,nt,K),rt=new Ni(St,nt,$,_t),at=new Fi(St,rt,nt,$),mt=new ji(St,K,Q),dt=new vi(J),st=new ua(x,tt,et,X,K,_t,dt),ut=new Da(x,J),ct=new da,lt=new ba(X,K),gt=new di(x,tt,Z,at,g,s),pt=new Ea(x,at,K),wt=new La(St,$,K,Z),vt=new gi(St,X,$,K),bt=new Di(St,X,$,K),$.programs=st.programs,x.capabilities=K,x.extensions=X,x.properties=J,x.renderLists=ct,x.shadowMap=pt,x.state=Z,x.info=$}Ct();const Tt=new Na(x,St);function kt(t){t.preventDefault(),_=!0}function Ot(){_=!1;var t=$.autoReset,e=pt.enabled,n=pt.autoUpdate,r=pt.needsUpdate,i=pt.type;Ct(),$.autoReset=t,pt.enabled=e,pt.autoUpdate=n,pt.needsUpdate=r,pt.type=i}function Pt(t){}function It(t){t=t.target;var e=(t.removeEventListener("dispose",It),t),n=J.get(e).programs;void 0!==n&&(n.forEach((function(t){st.releaseProgram(t)})),e.isShaderMaterial)&&st.releaseShaderCache(e),J.remove(t)}this.xr=Tt,this.getContext=function(){return St},this.getContextAttributes=function(){return St.getContextAttributes()},this.forceContextLoss=function(){var t=X.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=X.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(t){void 0!==t&&(I=t,this.setSize(O,P,!1))},this.getSize=function(t){return t.set(O,P)},this.setSize=function(t,n,r){Tt.isPresenting||(O=t,P=n,e.width=Math.floor(t*I),e.height=Math.floor(n*I),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(O*I,P*I).floor()},this.setDrawingBufferSize=function(t,n,r){O=t,P=n,I=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(C)},this.getViewport=function(t){return t.copy(L)},this.setViewport=function(t,e,n,r){t.isVector4?L.set(t.x,t.y,t.z,t.w):L.set(t,e,n,r),Z.viewport(C.copy(L).multiplyScalar(I).floor())},this.getScissor=function(t){return t.copy(R)},this.setScissor=function(t,e,n,r){t.isVector4?R.set(t.x,t.y,t.z,t.w):R.set(t,e,n,r),Z.scissor(T.copy(R).multiplyScalar(I).floor())},this.getScissorTest=function(){return B},this.setScissorTest=function(t){Z.setScissorTest(B=t)},this.setOpaqueSort=function(t){N=t},this.setTransparentSort=function(t){D=t},this.getClearColor=function(t){return t.copy(gt.getClearColor())},this.setClearColor=function(){gt.setClearColor.apply(gt,arguments)},this.getClearAlpha=function(){return gt.getClearAlpha()},this.setClearAlpha=function(){gt.setClearAlpha.apply(gt,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;t&&(r|=16384),e&&(r|=256),n&&(r|=1024),St.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",kt,!1),e.removeEventListener("webglcontextrestored",Ot,!1),e.removeEventListener("webglcontextcreationerror",Pt,!1),ct.dispose(),lt.dispose(),J.dispose(),tt.dispose(),et.dispose(),at.dispose(),_t.dispose(),wt.dispose(),st.dispose(),Tt.dispose(),Tt.removeEventListener("sessionstart",Dt),Tt.removeEventListener("sessionend",Lt),U&&(U.dispose(),U=null),Rt.stop()},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=Y);var a=i.isMesh&&i.matrixWorld.determinant()<0;t=function(t,e,n,r,i){!0!==e.isScene&&(e=Y),Q.resetTextureUnits();var o=e.fog,a=r.isMeshStandardMaterial?e.environment:null,s=null===E?x.outputEncoding:!0===E.isXRRenderTarget?E.texture.encoding:te,u=(a=(r.isMeshStandardMaterial?et:tt).get(r.envMap||a),!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize),c=!!r.normalMap&&!!n.attributes.tangent,l=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,d=r.toneMapped?x.toneMapping:W,p=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=(p=void 0!==p?p.length:0,J.get(r)),m=v.state.lights;!0!==F||!0!==z&&t===A||(C=t===A&&r.id===M,dt.setState(r,t,C));let y=!1;r.version===g.__version?(g.needsLights&&g.lightsStateVersion!==m.state.version||g.outputEncoding!==s||i.isInstancedMesh&&!1===g.instancing||!i.isInstancedMesh&&!0===g.instancing||i.isSkinnedMesh&&!1===g.skinning||!i.isSkinnedMesh&&!0===g.skinning||g.envMap!==a||!0===r.fog&&g.fog!==o||void 0!==g.numClippingPlanes&&(g.numClippingPlanes!==dt.numPlanes||g.numIntersection!==dt.numIntersection)||g.vertexAlphas!==u||g.vertexTangents!==c||g.morphTargets!==l||g.morphNormals!==h||g.morphColors!==f||g.toneMapping!==d||!0===K.isWebGL2&&g.morphTargetsCount!==p)&&(y=!0):(y=!0,g.__version=r.version);let b=g.currentProgram;!0===y&&(b=Ft(r,e,i));let _=!1,w=!1,S=!1;var C=b.getUniforms();m=g.uniforms;if(Z.useProgram(b.program)&&(_=!0,w=!0,S=!0),r.id!==M&&(M=r.id,w=!0),(_||A!==t)&&(C.setValue(St,"projectionMatrix",t.projectionMatrix),K.logarithmicDepthBuffer&&C.setValue(St,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),A!==t&&(A=t,w=!0,S=!0),(r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap)&&void 0!==(s=C.map.cameraPosition)&&s.setValue(St,H.setFromMatrixPosition(t.matrixWorld)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&C.setValue(St,"isOrthographic",!0===t.isOrthographicCamera),r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&C.setValue(St,"viewMatrix",t.matrixWorldInverse),i.isSkinnedMesh&&(C.setOptional(St,i,"bindMatrix"),C.setOptional(St,i,"bindMatrixInverse"),u=i.skeleton)&&K.floatVertexTextures&&(null===u.boneTexture&&u.computeBoneTexture(),C.setValue(St,"boneTexture",u.boneTexture,Q),C.setValue(St,"boneTextureSize",u.boneTextureSize)),c=n.morphAttributes,(void 0!==c.position||void 0!==c.normal||void 0!==c.color&&!0===K.isWebGL2)&&mt.update(i,n,r,b),!w&&g.receiveShadow===i.receiveShadow||(g.receiveShadow=i.receiveShadow,C.setValue(St,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(m.envMap.value=a,m.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1),w&&(C.setValue(St,"toneMappingExposure",x.toneMappingExposure),g.needsLights&&function(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}(m,S),o&&!0===r.fog&&ut.refreshFogUniforms(m,o),ut.refreshMaterialUniforms(m,r,I,P,U),Vo.upload(St,g.uniformsList,m,Q)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Vo.upload(St,g.uniformsList,m,Q),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&C.setValue(St,"center",i.center),C.setValue(St,"modelViewMatrix",i.modelViewMatrix),C.setValue(St,"normalMatrix",i.normalMatrix),C.setValue(St,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){var T,k=r.uniformsGroups;for(let t=0,e=k.length;t<e;t++)K.isWebGL2&&(T=k[t],wt.update(T,b),wt.bind(T,b))}return b}(t,e,n,r,i);Z.setMaterial(r,a);let s=n.index;if(e=n.attributes.position,null===s){if(void 0===e||0===e.count)return}else if(0===s.count)return;let u=1,c=(!0===r.wireframe&&(s=rt.getWireframeAttribute(n),u=2),_t.setup(i,r,t,n,s),vt);null!==s&&(a=nt.get(s),(c=bt).setIndex(a));t=(null!==s?s:e).count,a=n.drawRange.start*u,e=n.drawRange.count*u;var l=null!==o?o.start*u:0,h=(o=null!==o?o.count*u:1/0,Math.max(a,l));t=Math.min(t,a+e,l+o)-1,a=Math.max(0,t-h+1);if(0!==a){if(i.isMesh)!0===r.wireframe?(Z.setLineWidth(r.wireframeLinewidth*q()),c.setMode(1)):c.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),Z.setLineWidth(t*q()),i.isLineSegments?c.setMode(1):i.isLineLoop?c.setMode(2):c.setMode(3)}else i.isPoints?c.setMode(0):i.isSprite&&c.setMode(4);i.isInstancedMesh?c.renderInstances(h,a,i.count):n.isInstancedBufferGeometry?(e=Math.min(n.instanceCount,n._maxInstanceCount),c.renderInstances(h,a,e)):c.render(h,a)}},this.compile=function(t,e){function n(t,e,n){!0===t.transparent&&t.side===d?(t.side=f,t.needsUpdate=!0,Ft(t,e,n),t.side=h,t.needsUpdate=!0,Ft(t,e,n),t.side=d):Ft(t,e,n)}(v=lt.get(t)).init(),b.push(v),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(v.pushLight(t),t.castShadow)&&v.pushShadow(t)})),v.setupLights(x.physicallyCorrectLights),t.traverse((function(e){var r=e.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++)n(r[i],t,e);else n(r,t,e)})),b.pop(),v=null};let Nt=null;function Dt(){Rt.stop()}function Lt(){Rt.start()}const Rt=new si;function Bt(t,e,n,r){var i=t.opaque,o=t.transmissive;t=t.transparent;if(v.setupLightsView(n),0<o.length){var s=i,u=e,c=n,l=K.isWebGL2,h=(l=(null===U&&(U=new Ve(1,1,{generateMipmaps:!0,type:X.has("EXT_color_buffer_half_float")?ft:ot,minFilter:it,samples:l&&!0===a?4:0})),x.getDrawingBufferSize(V),l?U.setSize(V.x,V.y):U.setSize(ye(V.x),ye(V.y)),x.getRenderTarget()),x.setRenderTarget(U),x.clear(),x.toneMapping);x.toneMapping=W,jt(s,u,c),x.toneMapping=h,Q.updateMultisampleRenderTarget(U),Q.updateRenderTargetMipmap(U),x.setRenderTarget(l)}r&&Z.viewport(C.copy(r)),0<i.length&&jt(i,e,n),0<o.length&&jt(o,e,n),0<t.length&&jt(t,e,n),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1)}function jt(t,e,n){var r=!0===e.isScene?e.overrideMaterial:null;for(let v=0,y=t.length;v<y;v++){var i,o,a,s,u,c,l=t[v],p=l.object,g=l.geometry,m=null===r?l.material:r;l=l.group;p.layers.test(n.layers)&&(c=u=s=a=o=i=void 0,o=e,a=n,s=g,u=m,c=l,(i=p).onBeforeRender(x,o,a,s,u,c),i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,i.matrixWorld),i.normalMatrix.getNormalMatrix(i.modelViewMatrix),u.onBeforeRender(x,o,a,s,i,c),!0===u.transparent&&u.side===d?(u.side=f,u.needsUpdate=!0,x.renderBufferDirect(a,o,s,u,i,c),u.side=h,u.needsUpdate=!0,x.renderBufferDirect(a,o,s,u,i,c),u.side=d):x.renderBufferDirect(a,o,s,u,i,c),i.onAfterRender(x,o,a,s,u,c))}}function Ft(t,e,n){!0!==e.isScene&&(e=Y);var r=J.get(t),i=v.state.lights,o=v.state.shadowsArray,a=i.state.version,s=(o=st.getParameters(t,i.state,o,e,n),st.getProgramCacheKey(o));let u=r.programs,c=(r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?et:tt).get(t.envMap||r.environment),void 0===u&&(t.addEventListener("dispose",It),u=new Map,r.programs=u),u.get(s));if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return zt(t,o),c}else o.uniforms=st.getUniforms(t),t.onBuild(n,o,x),t.onBeforeCompile(o,x),c=st.acquireProgram(o,s),u.set(s,c),r.uniforms=o.uniforms;return e=r.uniforms,(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(e.clippingPlanes=dt.uniform),zt(t,o),r.needsLights=(n=t).isMeshLambertMaterial||n.isMeshToonMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isShadowMaterial||n.isShaderMaterial&&!0===n.lights,r.lightsStateVersion=a,r.needsLights&&(e.ambientLightColor.value=i.state.ambient,e.lightProbe.value=i.state.probe,e.directionalLights.value=i.state.directional,e.directionalLightShadows.value=i.state.directionalShadow,e.spotLights.value=i.state.spot,e.spotLightShadows.value=i.state.spotShadow,e.rectAreaLights.value=i.state.rectArea,e.ltc_1.value=i.state.rectAreaLTC1,e.ltc_2.value=i.state.rectAreaLTC2,e.pointLights.value=i.state.point,e.pointLightShadows.value=i.state.pointShadow,e.hemisphereLights.value=i.state.hemi,e.directionalShadowMap.value=i.state.directionalShadowMap,e.directionalShadowMatrix.value=i.state.directionalShadowMatrix,e.spotShadowMap.value=i.state.spotShadowMap,e.spotLightMatrix.value=i.state.spotLightMatrix,e.spotLightMap.value=i.state.spotLightMap,e.pointShadowMap.value=i.state.pointShadowMap,e.pointShadowMatrix.value=i.state.pointShadowMatrix),s=c.getUniforms(),o=Vo.seqWithValue(s.seq,e),r.currentProgram=c,r.uniformsList=o,c}function zt(t,e){t=J.get(t),t.outputEncoding=e.outputEncoding,t.instancing=e.instancing,t.skinning=e.skinning,t.morphTargets=e.morphTargets,t.morphNormals=e.morphNormals,t.morphColors=e.morphColors,t.morphTargetsCount=e.morphTargetsCount,t.numClippingPlanes=e.numClippingPlanes,t.numIntersection=e.numClipIntersection,t.vertexAlphas=e.vertexAlphas,t.vertexTangents=e.vertexTangents,t.toneMapping=e.toneMapping}Rt.setAnimationLoop((function(t){Nt&&Nt(t)})),"undefined"!=typeof self&&Rt.setContext(self),this.setAnimationLoop=function(t){Nt=t,Tt.setAnimationLoop(t),null===t?Rt.stop():Rt.start()},Tt.addEventListener("sessionstart",Dt),Tt.addEventListener("sessionend",Lt),this.render=function(t,e){if((void 0===e||!0===e.isCamera)&&!0!==_){!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Tt.enabled&&!0===Tt.isPresenting&&(!0===Tt.cameraAutoUpdate&&Tt.updateCamera(e),e=Tt.getCamera()),!0===t.isScene&&t.onBeforeRender(x,t,e,E),(v=lt.get(t,b.length)).init(),b.push(v),G.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),j.setFromProjectionMatrix(G),z=this.localClippingEnabled,F=dt.init(this.clippingPlanes,z,e),(m=ct.get(t,y.length)).init(),y.push(m),function t(e,n,r,i){if(!1===e.visible)return;const o=e.layers.test(n.layers);if(o)if(e.isGroup)r=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(n);else if(e.isLight)v.pushLight(e),e.castShadow&&v.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||j.intersectsSprite(e)){i&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);const t=at.update(e),n=e.material;n.visible&&m.push(e,t,n,r,H.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==$.render.frame&&(e.skeleton.update(),e.skeleton.frame=$.render.frame),!e.frustumCulled||j.intersectsObject(e))){i&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);const t=at.update(e),n=e.material;if(Array.isArray(n)){const i=t.groups;for(let o=0,a=i.length;o<a;o++){const a=i[o],s=n[a.materialIndex];s&&s.visible&&m.push(e,t,s,r,H.z,a)}}else n.visible&&m.push(e,t,n,r,H.z,null)}const a=e.children;for(let s=0,u=a.length;s<u;s++)t(a[s],n,r,i)}(t,e,0,x.sortObjects),m.finish(),!0===x.sortObjects&&m.sort(N,D),!0===F&&dt.beginShadows();var n=v.state.shadowsArray;if(pt.render(n,t,e),!0===F&&dt.endShadows(),!0===this.info.autoReset&&this.info.reset(),gt.render(m,t),v.setupLights(x.physicallyCorrectLights),e.isArrayCamera){var r=e.cameras;for(let e=0,n=r.length;e<n;e++){var i=r[e];Bt(m,t,i,i.viewport)}}else Bt(m,t,e);null!==E&&(Q.updateMultisampleRenderTarget(E),Q.updateRenderTargetMipmap(E)),!0===t.isScene&&t.onAfterRender(x,t,e),_t.resetDefaultState(),M=-1,A=null,b.pop(),v=0<b.length?b[b.length-1]:null,y.pop(),m=0<y.length?y[y.length-1]:null}},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(t,e,n){J.get(t.texture).__webglTexture=e,J.get(t.depthTexture).__webglTexture=n,e=J.get(t),e.__hasExternalTextures=!0,e.__hasExternalTextures&&(e.__autoAllocateDepthBuffer=void 0===n,e.__autoAllocateDepthBuffer||!0===X.has("WEBGL_multisampled_render_to_texture")&&(e.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){t=J.get(t),t.__webglFramebuffer=e,t.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){E=t,w=e,S=n;let r=!0;var i;t&&(void 0!==(i=J.get(t)).__useDefaultFramebuffer?(Z.bindFramebuffer(36160,null),r=!1):void 0===i.__webglFramebuffer?Q.setupRenderTarget(t):i.__hasExternalTextures&&Q.rebindTextures(t,J.get(t.texture).__webglTexture,J.get(t.depthTexture).__webglTexture));let o=null,a=!1,s=!1;k=t?(((i=t.texture).isData3DTexture||i.isDataArrayTexture)&&(s=!0),i=J.get(t).__webglFramebuffer,t.isWebGLCubeRenderTarget?(o=i[e],a=!0):o=K.isWebGL2&&0<t.samples&&!1===Q.useMultisampledRTT(t)?J.get(t).__webglMultisampledFramebuffer:i,C.copy(t.viewport),T.copy(t.scissor),t.scissorTest):(C.copy(L).multiplyScalar(I).floor(),T.copy(R).multiplyScalar(I).floor(),B),Z.bindFramebuffer(36160,o)&&K.drawBuffers&&r&&Z.drawBuffers(t,o),Z.viewport(C),Z.scissor(T),Z.setScissorTest(k),a?(i=J.get(t.texture),St.framebufferTexture2D(36160,36064,34069+e,i.__webglTexture,n)):s&&(i=J.get(t.texture),t=e||0,St.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,t)),M=-1},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(t&&t.isWebGLRenderTarget){let h=J.get(t).__webglFramebuffer;if(h=t.isWebGLCubeRenderTarget&&void 0!==a?h[a]:h){Z.bindFramebuffer(36160,h);try{var s,u=t.texture,c=u.format,l=u.type;c!==yt&&xt.convert(c)!==St.getParameter(35739)||(s=l===ft&&(X.has("EXT_color_buffer_half_float")||K.isWebGL2&&X.has("EXT_color_buffer_float")),(l===ot||xt.convert(l)===St.getParameter(35738)||l===ht&&(K.isWebGL2||X.has("OES_texture_float")||X.has("WEBGL_color_buffer_float"))||s)&&0<=e&&e<=t.width-r&&0<=n&&n<=t.height-i&&St.readPixels(e,n,r,i,xt.convert(c),xt.convert(l),o))}finally{const t=null!==E?J.get(E).__webglFramebuffer:null;Z.bindFramebuffer(36160,t)}}}},this.copyFramebufferToTexture=function(t,e,n=0){var r=Math.pow(2,-n),i=Math.floor(e.image.width*r);r=Math.floor(e.image.height*r);Q.setTexture2D(e,0),St.copyTexSubImage2D(3553,n,0,0,t.x,t.y,i,r),Z.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){var i=e.image.width,o=e.image.height,a=xt.convert(n.format),s=xt.convert(n.type);Q.setTexture2D(n,0),St.pixelStorei(37440,n.flipY),St.pixelStorei(37441,n.premultiplyAlpha),St.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?St.texSubImage2D(3553,r,t.x,t.y,i,o,a,s,e.image.data):e.isCompressedTexture?St.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):St.texSubImage2D(3553,r,t.x,t.y,a,s,e.image),0===r&&n.generateMipmaps&&St.generateMipmap(3553),Z.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(!x.isWebGL1Renderer){var o=t.max.x-t.min.x+1,a=t.max.y-t.min.y+1,s=t.max.z-t.min.z+1,u=xt.convert(r.format),c=xt.convert(r.type);let m;if(r.isData3DTexture)Q.setTexture3D(r,0),m=32879;else{if(!r.isDataArrayTexture)return;Q.setTexture2DArray(r,0),m=35866}St.pixelStorei(37440,r.flipY),St.pixelStorei(37441,r.premultiplyAlpha),St.pixelStorei(3317,r.unpackAlignment);var l=St.getParameter(3314),h=St.getParameter(32878),f=St.getParameter(3316),d=St.getParameter(3315),p=St.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;St.pixelStorei(3314,g.width),St.pixelStorei(32878,g.height),St.pixelStorei(3316,t.min.x),St.pixelStorei(3315,t.min.y),St.pixelStorei(32877,t.min.z),n.isDataTexture||n.isData3DTexture?St.texSubImage3D(m,i,e.x,e.y,e.z,o,a,s,u,c,g.data):n.isCompressedTexture?St.compressedTexSubImage3D(m,i,e.x,e.y,e.z,o,a,s,u,g.data):St.texSubImage3D(m,i,e.x,e.y,e.z,o,a,s,u,c,g),St.pixelStorei(3314,l),St.pixelStorei(32878,h),St.pixelStorei(3316,f),St.pixelStorei(3315,d),St.pixelStorei(32877,p),0===i&&r.generateMipmaps&&St.generateMipmap(m),Z.unbindTexture()}},this.initTexture=function(t){t.isCubeTexture?Q.setTextureCube(t,0):t.isData3DTexture?Q.setTexture3D(t,0):t.isDataArrayTexture?Q.setTexture2DArray(t,0):Q.setTexture2D(t,0),Z.unbindTexture()},this.resetState=function(){w=0,S=0,E=null,Z.reset(),_t.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends Ra{}).prototype.isWebGL1Renderer=!0;class Ba extends Zn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){return t=super.toJSON(t),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}get autoUpdate(){return this.matrixWorldAutoUpdate}set autoUpdate(t){this.matrixWorldAutoUpdate=t}}class ja{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=de()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=de()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer),t=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),t=new this.constructor(t,this.stride),t.setUsage(this.usage),t}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=de()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Fa=new qe;class za{constructor(t,e,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Fa.fromBufferAttribute(this,e),Fa.applyMatrix4(t),this.setXYZ(e,Fa.x,Fa.y,Fa.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Fa.fromBufferAttribute(this,e),Fa.applyNormalMatrix(t),this.setXYZ(e,Fa.x,Fa.y,Fa.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Fa.fromBufferAttribute(this,e),Fa.transformDirection(t),this.setXYZ(e,Fa.x,Fa.y,Fa.z);return this}setX(t,e){return this.normalized&&(e=xe(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=xe(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=xe(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=xe(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized?be(e,this.array):e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized?be(e,this.array):e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized?be(e,this.array):e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized?be(e,this.array):e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=xe(e,this.array),n=xe(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=xe(e,this.array),n=xe(n,this.array),r=xe(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=xe(e,this.array),n=xe(n,this.array),r=xe(r,this.array),i=xe(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}clone(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new za(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);var e=[];for(let r=0;r<this.count;r++){var n=r*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new dr(new this.array.constructor(e),this.itemSize,this.normalized)}toJSON(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};var e=[];for(let r=0;r<this.count;r++){var n=r*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}class Ua extends cr{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Le(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Ga;const Va=new qe,Wa=new qe,Ha=new qe,Ya=new _e,qa=new _e,Xa=new Mn,Ka=new qe,Za=new qe,$a=new qe,Ja=new _e,Qa=new _e,ts=new _e;class es extends Zn{constructor(t){var e;super(),this.isSprite=!0,this.type="Sprite",void 0===Ga&&(Ga=new Er,e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new ja(e,5),Ga.setIndex([0,1,2,0,2,3]),Ga.setAttribute("position",new za(e,3,0,!1)),Ga.setAttribute("uv",new za(e,2,3,!1))),this.geometry=Ga,this.material=void 0!==t?t:new Ua,this.center=new _e(.5,.5)}raycast(t,e){t.camera,Wa.setFromMatrixScale(this.matrixWorld),Xa.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Ha.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Wa.multiplyScalar(-Ha.z);var n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));n=this.center;var o=(ns(Ka.set(-.5,-.5,0),Ha,n,Wa,r,i),ns(Za.set(.5,-.5,0),Ha,n,Wa,r,i),ns($a.set(.5,.5,0),Ha,n,Wa,r,i),Ja.set(0,0),Qa.set(1,0),ts.set(1,1),t.ray.intersectTriangle(Ka,Za,$a,!1,Va));null===o&&(ns(Za.set(-.5,.5,0),Ha,n,Wa,r,i),Qa.set(0,1),null===(o=t.ray.intersectTriangle(Ka,$a,Za,!1,Va)))||(n=t.ray.origin.distanceTo(Va))<t.near||n>t.far||e.push({distance:n,point:Va.clone(),uv:sr.getUV(Va,Ka,Za,$a,Ja,Qa,ts,new _e),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function ns(t,e,n,r,i,o){Ya.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(qa.x=o*Ya.x-i*Ya.y,qa.y=i*Ya.x+o*Ya.y):qa.copy(Ya),t.copy(e),t.x+=qa.x,t.y+=qa.y,t.applyMatrix4(Xa)}class rs extends cr{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Le(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const is=new qe,os=new qe,as=new Mn,ss=new En,us=new mn;class cs extends Zn{constructor(t=new Er,e=new rs){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){var t=this.geometry;if(null===t.index){var e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)is.fromBufferAttribute(e,t-1),os.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=is.distanceTo(os);t.setAttribute("lineDistance",new mr(n,1))}return this}raycast(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),us.copy(n.boundingSphere),us.applyMatrix4(r),us.radius+=i,!1!==t.ray.intersectsSphere(us)){as.copy(r).invert(),ss.copy(t.ray).applyMatrix4(as);r=i/((this.scale.x+this.scale.y+this.scale.z)/3);var a,s=r*r,u=new qe,c=new qe,l=new qe,h=new qe,f=this.isLineSegments?2:1,d=n.index,p=n.attributes.position;if(null!==d)for(let n=Math.max(0,o.start),r=Math.min(d.count,o.start+o.count)-1;n<r;n+=f){var g=d.getX(n),m=d.getX(n+1);g=(u.fromBufferAttribute(p,g),c.fromBufferAttribute(p,m),ss.distanceSqToSegment(u,c,h,l));s<g||(h.applyMatrix4(this.matrixWorld),(m=t.ray.origin.distanceTo(h))<t.near)||m>t.far||e.push({distance:m,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=f)u.fromBufferAttribute(p,n),c.fromBufferAttribute(p,n+1),s<ss.distanceSqToSegment(u,c,h,l)||(h.applyMatrix4(this.matrixWorld),(a=t.ray.origin.distanceTo(h))<t.near)||a>t.far||e.push({distance:a,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}updateMorphTargets(){var t=this.geometry.morphAttributes,e=Object.keys(t);if(0<e.length){var n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){var r=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}}}}class ls{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return null}getPointAt(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)}getPoints(t=5){var e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){var e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){var t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){var n=this.getLengths();let r=0;var i=n.length;let o,a,s=(o=e||t*n[i-1],0),u=i-1;for(;s<=u;)if((a=n[r=Math.floor(s+(u-s)/2)]-o)<0)s=r+1;else{if(!(0<a)){u=r;break}u=r-1}return n[r=u]===o?r/(i-1):(e=n[r],t=n[r+1],t=(o-e)/(t-e),(r+t)/(i-1))}getTangent(t,e){let n=t-1e-4,r=t+1e-4;n<0&&(n=0),1<r&&(r=1);t=this.getPoint(n);var i=this.getPoint(r);e=e||new(t.isVector2?_e:qe);return e.copy(i).sub(t).normalize(),e}getTangentAt(t,e){return t=this.getUtoTmapping(t),this.getTangent(t,e)}computeFrenetFrames(t,e){var n=new qe,r=[],i=[],o=[],a=new qe,s=new Mn;for(let p=0;p<=t;p++){var u=p/t;r[p]=this.getTangentAt(u,new qe)}i[0]=new qe,o[0]=new qe;let c=Number.MAX_VALUE;var l,h=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),f<=c&&(c=f,n.set(0,1,0)),d<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let p=1;p<=t;p++)i[p]=i[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(r[p-1],r[p]),a.length()>Number.EPSILON&&(a.normalize(),l=Math.acos(pe(r[p-1].dot(r[p]),-1,1)),i[p].applyMatrix4(s.makeRotationAxis(a,l))),o[p].crossVectors(r[p],i[p]);if(!0===e){let e=Math.acos(pe(i[0].dot(i[t]),-1,1));e/=t,0<r[0].dot(a.crossVectors(i[0],i[t]))&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],e*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class hs extends ls{constructor(t=0,e=0,n=1,r=1,i=0,o=2*Math.PI,a=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(t,e){e=e||new _e;var n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;for(var i=Math.abs(r)<Number.EPSILON;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=i?0:n),!0!==this.aClockwise||i||(r===n?r=-n:r-=n);var o,a;i=this.aStartAngle+t*r;let s=this.aX+this.xRadius*Math.cos(i),u=this.aY+this.yRadius*Math.sin(i);return 0!==this.aRotation&&(t=Math.cos(this.aRotation),i=Math.sin(this.aRotation),o=s-this.aX,a=u-this.aY,s=o*t-a*i+this.aX,u=o*i+a*t+this.aY),e.set(s,u)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){var t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function fs(){let t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){t=(e-t)/o-(n-t)/(o+a)+(n-e)/a,o=(n-e)/a-(r-e)/(a+s)+(r-n)/s,i(e,n,t*=a,o*=a)},calc:function(i){var o=i*i,a=o*i;return t+e*i+n*o+r*a}}}const ds=new qe,ps=new fs,gs=new fs,ms=new fs;function vs(t,e,n,r,i){e=.5*(r-e),i=.5*(i-n);var o=t*t;return(2*n-2*r+e+i)*(t*o)+(-3*n+3*r-2*e-i)*o+e*t+n}function ys(t,e,n,r){return(i=1-(i=t))*i*e+2*(1-t)*t*n+t*t*r;var i}function bs(t,e,n,r,i){return(o=1-(o=t))*o*o*e+3*(o=1-t)*o*t*n+3*(1-t)*t*t*r+t*t*t*i;var o}class xs extends ls{constructor(t=new _e,e=new _e,n=new _e,r=new _e){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new _e){var n=this.v0,r=this.v1,i=this.v2,o=this.v3;return e.set(bs(t,n.x,r.x,i.x,o.x),bs(t,n.y,r.y,i.y,o.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){var t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class _s extends ls{constructor(t=new qe,e=new qe,n=new qe,r=new qe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new qe){var n=this.v0,r=this.v1,i=this.v2,o=this.v3;return e.set(bs(t,n.x,r.x,i.x,o.x),bs(t,n.y,r.y,i.y,o.y),bs(t,n.z,r.z,i.z,o.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){var t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class ws extends ls{constructor(t=new _e,e=new _e){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new _e){return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){return e=e||new _e,e.copy(this.v2).sub(this.v1).normalize(),e}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){var t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ss extends ls{constructor(t=new _e,e=new _e,n=new _e){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new _e){var n=this.v0,r=this.v1,i=this.v2;return e.set(ys(t,n.x,r.x,i.x),ys(t,n.y,r.y,i.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){var t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Es extends ls{constructor(t=new qe,e=new qe,n=new qe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new qe){var n=this.v0,r=this.v1,i=this.v2;return e.set(ys(t,n.x,r.x,i.x),ys(t,n.y,r.y,i.y),ys(t,n.z,r.z,i.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){var t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ms extends ls{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new _e){var n=this.points,r=(t=(n.length-1)*t,Math.floor(t)),i=(t=t-r,n[0===r?r:r-1]),o=n[r],a=n[r>n.length-2?n.length-1:r+1];n=n[r>n.length-3?n.length-1:r+2];return e.set(vs(t,i.x,o.x,a.x,n.x),vs(t,i.y,o.y,a.y,n.y)),e}copy(t){super.copy(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){var e=t.points[n];this.points.push(e.clone())}return this}toJSON(){var t=super.toJSON();t.points=[];for(let n=0,r=this.points.length;n<r;n++){var e=this.points[n];t.points.push(e.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){var e=t.points[n];this.points.push((new _e).fromArray(e))}return this}}var As=Object.freeze({__proto__:null,ArcCurve:class extends hs{constructor(t,e,n,r,i,o){super(t,e,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends ls{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new qe){var n=this.points,r=n.length;t=(r-(this.closed?0:1))*t;let i,o,a=Math.floor(t),s=t-a;this.closed?a+=0<a?0:(Math.floor(Math.abs(a)/r)+1)*r:0===s&&a===r-1&&(a=r-2,s=1),i=this.closed||0<a?n[(a-1)%r]:(ds.subVectors(n[0],n[1]).add(n[0]),ds);t=n[a%r];var u=n[(a+1)%r];if(o=this.closed||a+2<r?n[(a+2)%r]:(ds.subVectors(n[r-1],n[r-2]).add(n[r-1]),ds),"centripetal"===this.curveType||"chordal"===this.curveType){n="chordal"===this.curveType?.5:.25;let e=Math.pow(i.distanceToSquared(t),n),r=Math.pow(t.distanceToSquared(u),n),a=Math.pow(u.distanceToSquared(o),n);r<1e-4&&(r=1),e<1e-4&&(e=r),a<1e-4&&(a=r),ps.initNonuniformCatmullRom(i.x,t.x,u.x,o.x,e,r,a),gs.initNonuniformCatmullRom(i.y,t.y,u.y,o.y,e,r,a),ms.initNonuniformCatmullRom(i.z,t.z,u.z,o.z,e,r,a)}else"catmullrom"===this.curveType&&(ps.initCatmullRom(i.x,t.x,u.x,o.x,this.tension),gs.initCatmullRom(i.y,t.y,u.y,o.y,this.tension),ms.initCatmullRom(i.z,t.z,u.z,o.z,this.tension));return e.set(ps.calc(s),gs.calc(s),ms.calc(s)),e}copy(t){super.copy(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){var e=t.points[n];this.points.push(e.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){var t=super.toJSON();t.points=[];for(let n=0,r=this.points.length;n<r;n++){var e=this.points[n];t.points.push(e.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){var e=t.points[n];this.points.push((new qe).fromArray(e))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:xs,CubicBezierCurve3:_s,EllipseCurve:hs,LineCurve:ws,LineCurve3:class extends ls{constructor(t=new qe,e=new qe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new qe){return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){var t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:Ss,QuadraticBezierCurve3:Es,SplineCurve:Ms});class Cs extends Er{constructor(t=1,e=1,n=1,r=8,i=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const u=this,c=(r=Math.floor(r),i=Math.floor(i),[]),l=[],h=[],f=[];let d=0;const p=[],g=n/2;let m=0;{var v=new qe,y=new qe;let o=0;var b=(e-t)/n;for(let u=0;u<=i;u++){var x=[],_=u/i,w=_*(e-t)+t;for(let t=0;t<=r;t++){var S=t/r,E=S*s+a,M=Math.sin(E);E=Math.cos(E);y.x=w*M,y.y=-_*n+g,y.z=w*E,l.push(y.x,y.y,y.z),v.set(M,b,E).normalize(),h.push(v.x,v.y,v.z),f.push(S,1-_),x.push(d++)}p.push(x)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){var A=p[e][t],C=p[e+1][t],T=p[e+1][t+1],k=p[e][t+1];c.push(A,C,k),c.push(C,T,k),o+=6}u.addGroup(m,o,0),m+=o}function O(n){var i=d,o=new _e,p=new qe;let v=0;var y=!0===n?t:e,b=!0===n?1:-1;for(let t=1;t<=r;t++)l.push(0,g*b,0),h.push(0,b,0),f.push(.5,.5),d++;var x=d;for(let t=0;t<=r;t++){var _=t/r*s+a,w=Math.cos(_);_=Math.sin(_);p.x=y*_,p.y=g*b,p.z=y*w,l.push(p.x,p.y,p.z),h.push(0,b,0),o.x=.5*w+.5,o.y=.5*_*b+.5,f.push(o.x,o.y),d++}for(let t=0;t<r;t++){var S=i+t,E=x+t;!0===n?c.push(E,E+1,S):c.push(E+1,E,S),v+=3}u.addGroup(m,v,!0===n?1:2),m+=v}!1===o&&(0<t&&O(!0),0<e)&&O(!1),this.setIndex(c),this.setAttribute("position",new mr(l,3)),this.setAttribute("normal",new mr(h,3)),this.setAttribute("uv",new mr(f,2))}static fromJSON(t){return new Cs(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Ts extends Cs{constructor(t=1,e=1,n=8,r=1,i=!1,o=0,a=2*Math.PI){super(0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}static fromJSON(t){return new Ts(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class ks extends Er{constructor(t=1,e=32,n=16,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));var s=Math.min(o+a,Math.PI);let u=0;var c=[],l=new qe,h=new qe,f=[],d=[],p=[],g=[];for(let S=0;S<=n;S++){var m=[],v=S/n;let f=0;0==S&&0==o?f=.5/e:S==n&&s==Math.PI&&(f=-.5/e);for(let n=0;n<=e;n++){var y=n/e;l.x=-t*Math.cos(r+y*i)*Math.sin(o+v*a),l.y=t*Math.cos(o+v*a),l.z=t*Math.sin(r+y*i)*Math.sin(o+v*a),d.push(l.x,l.y,l.z),h.copy(l).normalize(),p.push(h.x,h.y,h.z),g.push(y+f,1-v),m.push(u++)}c.push(m)}for(let S=0;S<n;S++)for(let t=0;t<e;t++){var b=c[S][t+1],x=c[S][t],_=c[S+1][t],w=c[S+1][t+1];(0!==S||0<o)&&f.push(b,x,w),(S!==n-1||s<Math.PI)&&f.push(x,_,w)}this.setIndex(f),this.setAttribute("position",new mr(d,3)),this.setAttribute("normal",new mr(p,3)),this.setAttribute("uv",new mr(g,2))}static fromJSON(t){return new ks(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Os extends Er{constructor(t=new Es(new qe(-1,-1,0),new qe(-1,1,0),new qe(1,1,0)),e=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i};const o=t.computeFrenetFrames(e,i),a=(this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,new qe),s=new qe,u=new _e;let c=new qe;const l=[],h=[],f=[],d=[];for(let b=0;b<e;b++)y(b);y(!1===i?e:0);for(let b=0;b<=e;b++)for(let t=0;t<=r;t++)u.x=b/e,u.y=t/r,f.push(u.x,u.y);for(let b=1;b<=e;b++)for(let t=1;t<=r;t++){var p=(r+1)*(b-1)+(t-1),g=(r+1)*b+(t-1),m=(r+1)*b+t,v=(r+1)*(b-1)+t;d.push(p,g,v),d.push(g,m,v)}function y(i){c=t.getPointAt(i/e,c);var u=o.normals[i],f=o.binormals[i];for(let t=0;t<=r;t++){var d=t/r*Math.PI*2,p=Math.sin(d);d=-Math.cos(d);s.x=d*u.x+p*f.x,s.y=d*u.y+p*f.y,s.z=d*u.z+p*f.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,l.push(a.x,a.y,a.z)}}this.setIndex(d),this.setAttribute("position",new mr(l,3)),this.setAttribute("normal",new mr(h,3)),this.setAttribute("uv",new mr(f,2))}toJSON(){var t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new Os((new As[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class Ps extends cr{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Le(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=re,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function Is(t,e,n){return Ds(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function Ns(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function Ds(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}class Ls{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){var e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let c;n:{r:if(!(t<r)){for(var o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,t<(r=e[++n]))break e}c=e.length;break n}if(t>=i)break t;var a=e[1];t<a&&(n=2,i=a);for(var s=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(r=i,t>=(i=e[--n-1]))break e}c=n,n=0}for(;n<c;){var u=n+c>>>1;t<e[u]?c=u:n=1+u}if(r=e[n],void 0===(i=e[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let o=0;o!==r;++o)e[o]=n[i+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Rs extends Ls{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){var r=this.parameterPositions;let i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=t,a=2*e-n;break;case 2402:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=t,s=2*n-e;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}var u=.5*(n-e),c=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(t,e,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=this._offsetPrev,l=this._offsetNext,h=(t=this._weightPrev,this._weightNext),f=(n=(n-e)/(r-e),r=n*n,e=r*n,-t*e+2*t*r-t*n),d=(1+t)*e+(-1.5-2*t)*r+(-.5+t)*n+1,p=(-1-h)*e+(1.5+h)*r+.5*n,g=h*e-h*r;for(let m=0;m!==a;++m)i[m]=f*o[c+m]+d*o[u+m]+p*o[s+m]+g*o[l+m];return i}}class Bs extends Ls{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=(n-e)/(r-e),l=1-c;for(let h=0;h!==a;++h)i[h]=o[u+h]*l+o[s+h]*c;return i}}class js extends Ls{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class Fs{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ns(e,this.TimeBufferType),this.values=Ns(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){var e=t.constructor;let n;return e.toJSON!==this.toJSON?n=e.toJSON(t):(n={name:t.name,times:Ns(t.times,Array),values:Ns(t.values,Array)},(e=t.getInterpolation())!==t.DefaultInterpolation&&(n.interpolation=e)),n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new js(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Bs(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Rs(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}}else this.createInterpolant=e;return this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){var e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){var e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){var n,r=this.times,i=r.length;let o=0,a=i-1;for(;o!==i&&r[o]<t;)++o;for(;-1!==a&&r[a]>e;)--a;return++a,0===o&&a===i||(o>=a&&(a=Math.max(a,1),o=a-1),n=this.getValueSize(),this.times=Is(r,o,a),this.values=Is(this.values,o*n,a*n)),this}validate(){let t=!0;var e=this.getValueSize(),n=(e-Math.floor(e)!=0&&(t=!1),this.times),r=this.values,i=n.length;0===i&&(t=!1);let o=null;for(let u=0;u!==i;u++){var a=n[u];if("number"==typeof a&&isNaN(a)){t=!1;break}if(null!==o&&o>a){t=!1;break}o=a}if(void 0!==r&&Ds(r))for(let u=0,c=r.length;u!==c;++u){var s=r[u];if(isNaN(s)){t=!1;break}}return t}optimize(){var t=Is(this.times),e=Is(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=t.length-1;let o=1;for(let d=1;d<i;++d){let i=!1;var a=t[d];if(a!==t[d+1]&&(1!==d||a!==t[0]))if(r)i=!0;else{var s=d*n,u=s-n,c=s+n;for(let t=0;t!==n;++t){var l=e[s+t];if(l!==e[u+t]||l!==e[c+t]){i=!0;break}}}if(i){if(d!==o){t[o]=t[d];var h=d*n,f=o*n;for(let t=0;t!==n;++t)e[f+t]=e[h+t]}++o}}if(0<i){t[o]=t[i];for(let t=i*n,r=o*n,a=0;a!==n;++a)e[r+a]=e[t+a];++o}return o!==t.length?(this.times=Is(t,0,o),this.values=Is(e,0,o*n)):(this.times=t,this.values=e),this}clone(){var t=Is(this.times,0),e=Is(this.values,0);t=new this.constructor(this.name,t,e);return t.createInterpolant=this.createInterpolant,t}}Fs.prototype.TimeBufferType=Float32Array,Fs.prototype.ValueBufferType=Float32Array,Fs.prototype.DefaultInterpolation=2301;class zs extends Fs{}zs.prototype.ValueTypeName="bool",zs.prototype.ValueBufferType=Array,zs.prototype.DefaultInterpolation=2300,zs.prototype.InterpolantFactoryMethodLinear=void 0,zs.prototype.InterpolantFactoryMethodSmooth=void 0;class Us extends Fs{}Us.prototype.ValueTypeName="color";class Gs extends Fs{}Gs.prototype.ValueTypeName="number";class Vs extends Ls{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(r-e);let u=t*a;for(var c=u+a;u!==c;u+=4)Ye.slerpFlat(i,0,o,u-a,o,u,s);return i}}class Ws extends Fs{InterpolantFactoryMethodLinear(t){return new Vs(this.times,this.values,this.getValueSize(),t)}}Ws.prototype.ValueTypeName="quaternion",Ws.prototype.DefaultInterpolation=2301,Ws.prototype.InterpolantFactoryMethodSmooth=void 0;class Hs extends Fs{}Hs.prototype.ValueTypeName="string",Hs.prototype.ValueBufferType=Array,Hs.prototype.DefaultInterpolation=2300,Hs.prototype.InterpolantFactoryMethodLinear=void 0,Hs.prototype.InterpolantFactoryMethodSmooth=void 0;class Ys extends Fs{}const qs={enabled:!(Ys.prototype.ValueTypeName="vector"),files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Xs{constructor(t,e,n){const r=this;let i,o=!1,a=0,s=0;const u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===o&&void 0!==r.onStart&&r.onStart(t,a,s),o=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,s),a===s&&(o=!1,void 0!==r.onLoad)&&r.onLoad()},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){return t=u.indexOf(t),-1!==t&&u.splice(t,2),this},this.getHandler=function(t){for(let r=0,i=u.length;r<i;r+=2){var e=u[r],n=u[r+1];if(e.global&&(e.lastIndex=0),e.test(t))return n}return null}}}const Ks=new Xs;class Zs{constructor(t){this.manager=void 0!==t?t:Ks,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Error;class $s extends Zs{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=qs.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a=Ee("img");function s(){c(),qs.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){c(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function c(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}class Js extends Zs{constructor(t){super(t)}load(t,e,n,r){const i=new Ue;var o=new $s(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}class Qs extends Zn{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Le(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){return t=super.toJSON(t),t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const tu=new Mn,eu=new qe,nu=new qe;class ru{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _e(512,512),this.map=null,this.mapPass=null,this.matrix=new Mn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ai,this._frameExtents=new _e(1,1),this._viewportCount=1,this._viewports=[new Ge(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){var e=this.camera,n=this.matrix;eu.setFromMatrixPosition(t.matrixWorld),e.position.copy(eu),nu.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(nu),e.updateMatrixWorld(),tu.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tu),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class iu extends ru{constructor(){super(new bi(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ou extends Qs{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Zn.DefaultUp),this.updateMatrix(),this.target=new Zn,this.shadow=new iu}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class au extends Qs{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class su{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=uu(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;var e;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(e=uu(),t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t),t)}}function uu(){return("undefined"==typeof performance?Date:performance).now()}n="\\[\\]\\.:\\/";const cu=new RegExp("["+n+"]","g");e="[^"+n+"]",n="[^"+n.replace("\\.","")+"]";const lu=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",e)+/(WCOD+)?/.source.replace("WCOD",n)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e)+"$"),hu=["material","materials","bones","map"];class fu{constructor(t,e,n){this.path=e,this.parsedPath=n||fu.parseTrackName(e),this.node=fu.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return new(t&&t.isAnimationObjectGroup?fu.Composite:fu)(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(cu,"")}static parseTrackName(t){var e=lu.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);e={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]};var n,r=e.nodeName&&e.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r&&(n=e.nodeName.substring(r+1),-1!==hu.indexOf(n))&&(e.nodeName=e.nodeName.substring(0,r),e.objectName=n),null===e.propertyName||0===e.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return e}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const r=function(t){for(let i=0;i<t.length;i++){var n=t[i];if(n.name===e||n.uuid===e)return n;if(n=r(n.children),n)return n}return null};if(n=r(t.children),n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){var n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){var n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){var n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){var n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;var e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=fu.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;case"map":if(!t.material)return;if(!t.material.map)return;t=t.material.map;break;default:if(void 0===t[n])return;t=t[n]}if(void 0!==r){if(void 0===t[r])return;t=t[r]}}var o=t[r];if(void 0===o)e.nodeName;else{let e=this.Versioning.None,n=(void 0!==(this.targetObject=t).needsUpdate?e=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(e=this.Versioning.MatrixWorldNeedsUpdate),this.BindingType.Direct);if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return;if(!t.geometry.morphAttributes)return;void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}n=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(n=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(n=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[n],this.setValue=this.SetterByBindingTypeAndVersioning[n][e]}}}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}fu.Composite=class{constructor(t,e,n){n=n||fu.parseTrackName(e),this._targetGroup=t,this._bindings=t.subscribe_(e,n)}getValue(t,e){this.bind();var n=this._targetGroup.nCachedObjects_;n=this._bindings[n];void 0!==n&&n.getValue(t,e)}setValue(t,e){var n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){var t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){var t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},fu.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},fu.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},fu.prototype.GetterByBindingType=[fu.prototype._getValue_direct,fu.prototype._getValue_array,fu.prototype._getValue_arrayElement,fu.prototype._getValue_toArray],fu.prototype.SetterByBindingTypeAndVersioning=[[fu.prototype._setValue_direct,fu.prototype._setValue_direct_setNeedsUpdate,fu.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[fu.prototype._setValue_array,fu.prototype._setValue_array_setNeedsUpdate,fu.prototype._setValue_array_setMatrixWorldNeedsUpdate],[fu.prototype._setValue_arrayElement,fu.prototype._setValue_arrayElement_setNeedsUpdate,fu.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[fu.prototype._setValue_fromArray,fu.prototype._setValue_fromArray_setNeedsUpdate,fu.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class du{constructor(t,e,n=0,r=1/0){this.ray=new En(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new Rn,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e)}intersectObject(t,e=!0,n=[]){return gu(t,this,n,e),n.sort(pu),n}intersectObjects(t,e=!0,n=[]){for(let r=0,i=t.length;r<i;r++)gu(t[r],this,n,e);return n.sort(pu),n}}function pu(t,e){return t.distance-e.distance}function gu(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){var i=t.children;for(let t=0,r=i.length;t<r;t++)gu(i[t],e,n,!0)}}class mu{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(pe(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class vu extends Ts{constructor(t,e,n,r,i,o,a){super(t,e,n,r,i,o,a)}}class yu extends Cs{constructor(t,e,n,r,i,o,a,s){super(t,e,n,r,i,o,a,s)}}class bu extends ks{constructor(t,e,n,r,i,o,a){super(t,e,n,r,i,o,a)}}class xu extends Os{constructor(t,e,n,r,i){super(t,e,n,r,i)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"==typeof window||window.__THREE__||(window.__THREE__=r)},29276:function(t,e,n){"use strict";n.d(e,{M:function(){return u}}),e=n(2212);const r=new e.Pa4,i=new e.yGw,o=new e.yGw,a=new e.Pa4,s=new e.Pa4;class u{constructor(t={}){const e=this;let n,u,c,l;const h={objects:new WeakMap},f=void 0!==t.element?t.element:document.createElement("div");function d(t,e){return a.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(e.matrixWorld),a.distanceToSquared(s)}f.style.overflow="hidden",this.domElement=f,this.getSize=function(){return{width:n,height:u}},this.render=function(t,n){!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===n.parent&&!0===n.matrixWorldAutoUpdate&&n.updateMatrixWorld(),i.copy(n.matrixWorldInverse),o.multiplyMatrices(n.projectionMatrix,i),function t(n,i,a){if(n.isCSS2DObject){r.setFromMatrixPosition(n.matrixWorld),r.applyMatrix4(o);const t=!0===n.visible&&-1<=r.z&&r.z<=1&&!0===n.layers.test(a.layers);if(n.element.style.display=1==t?"":"none",1==t){n.onBeforeRender(e,i,a);const t=n.element;t.style.transform="translate(-50%,-50%) translate("+(r.x*c+c)+"px,"+(-r.y*l+l)+"px)",t.parentNode!==f&&f.appendChild(t),n.onAfterRender(e,i,a)}const s={distanceToCameraSquared:d(a,n)};h.objects.set(n,s)}for(let e=0,r=n.children.length;e<r;e++)t(n.children[e],i,a)}(t,t,n);var a=function(t){const e=[];return t.traverse((function(t){t.isCSS2DObject&&e.push(t)})),e}(t).sort((function(t,e){return t.renderOrder!==e.renderOrder?e.renderOrder-t.renderOrder:h.objects.get(t).distanceToCameraSquared-h.objects.get(e).distanceToCameraSquared})),s=a.length;for(let e=0,r=a.length;e<r;e++)a[e].element.style.zIndex=s-e},this.setSize=function(t,e){n=t,u=e,c=n/2,l=u/2,f.style.width=t+"px",f.style.height=e+"px"}}}},17621:function(t,e,n){var r,i,o,a,s,u,c,l,h,f,d,p,g,m;function v(t,e){var n;return e=e||{},(t=t||"")instanceof v?t:this instanceof v?(n=function(t){var e={r:0,g:0,b:0},n=1,a=null,s=null,l=null,f=!1,d=!1;return"string"==typeof t&&(t=function(t){t=t.replace(i,"").replace(o,"").toLowerCase();var e,n=!1;if(h[t])t=h[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=m.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=m.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=m.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=m.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=m.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=m.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=m.hex8.exec(t))?{r:j(e[1]),g:j(e[2]),b:j(e[3]),a:G(e[4]),format:n?"name":"hex8"}:(e=m.hex6.exec(t))?{r:j(e[1]),g:j(e[2]),b:j(e[3]),format:n?"name":"hex"}:(e=m.hex4.exec(t))?{r:j(e[1]+""+e[1]),g:j(e[2]+""+e[2]),b:j(e[3]+""+e[3]),a:G(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=m.hex3.exec(t))&&{r:j(e[1]+""+e[1]),g:j(e[2]+""+e[2]),b:j(e[3]+""+e[3]),format:n?"name":"hex"}}(t)),"object"==typeof t&&(V(t.r)&&V(t.g)&&V(t.b)?(e=function(t,e,n){return{r:255*R(t,255),g:255*R(e,255),b:255*R(n,255)}}(t.r,t.g,t.b),f=!0,d="%"===String(t.r).substr(-1)?"prgb":"rgb"):V(t.h)&&V(t.s)&&V(t.v)?(a=z(t.s),s=z(t.v),e=function(t,e,n){t=6*R(t,360),e=R(e,100),n=R(n,100);var i=r.floor(t),o=(t=t-i,n*(1-e)),a=n*(1-t*e);t=n*(1-(1-t)*e),e=i%6;return{r:255*[n,a,o,o,t,n][e],g:255*[t,n,n,a,o,o][e],b:255*[o,o,t,n,n,a][e]}}(t.h,a,s),f=!0,d="hsv"):V(t.h)&&V(t.s)&&V(t.l)&&(a=z(t.s),l=z(t.l),e=function(t,e,n){var r,i,o;function a(t,e,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}return t=R(t,360),e=R(e,100),n=R(n,100),0===e?r=i=o=n:(r=a(e=2*n-(n=n<.5?n*(1+e):n+e-n*e),n,t+1/3),i=a(e,n,t),o=a(e,n,t-1/3)),{r:255*r,g:255*i,b:255*o}}(t.h,a,l),f=!0,d="hsl"),t.hasOwnProperty("a"))&&(n=t.a),n=L(n),{ok:f,format:t.format||d,r:u(255,c(e.r,0)),g:u(255,c(e.g,0)),b:u(255,c(e.b,0)),a:n}}(t),this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=s(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=s(this._r)),this._g<1&&(this._g=s(this._g)),this._b<1&&(this._b=s(this._b)),this._ok=n.ok,void(this._tc_id=a++)):new v(t,e)}function y(t,e,n){t=R(t,255),e=R(e,255),n=R(n,255);var r,i=c(t,e,n),o=u(t,e,n),a=(i+o)/2;if(i==o)r=l=0;else{var s=i-o,l=.5<a?s/(2-i-o):s/(i+o);switch(i){case t:r=(e-n)/s+(e<n?6:0);break;case e:r=(n-t)/s+2;break;case n:r=(t-e)/s+4}r/=6}return{h:r,s:l,l:a}}function b(t,e,n){t=R(t,255),e=R(e,255),n=R(n,255);var r,i=c(t,e,n),o=u(t,e,n),a=i,s=i-o,l=0===i?0:s/i;if(i==o)r=0;else{switch(i){case t:r=(e-n)/s+(e<n?6:0);break;case e:r=(n-t)/s+2;break;case n:r=(t-e)/s+4}r/=6}return{h:r,s:l,v:a}}function x(t,e,n,r){return t=[F(s(t).toString(16)),F(s(e).toString(16)),F(s(n).toString(16))],r&&t[0].charAt(0)==t[0].charAt(1)&&t[1].charAt(0)==t[1].charAt(1)&&t[2].charAt(0)==t[2].charAt(1)?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0):t.join("")}function _(t,e,n,r){return[F(U(r)),F(s(t).toString(16)),F(s(e).toString(16)),F(s(n).toString(16))].join("")}function w(t,e){return e=0===e?0:e||10,t=v(t).toHsl(),t.s-=e/100,t.s=B(t.s),v(t)}function S(t,e){return e=0===e?0:e||10,t=v(t).toHsl(),t.s+=e/100,t.s=B(t.s),v(t)}function E(t){return v(t).desaturate(100)}function M(t,e){return e=0===e?0:e||10,t=v(t).toHsl(),t.l+=e/100,t.l=B(t.l),v(t)}function A(t,e){return e=0===e?0:e||10,t=v(t).toRgb(),t.r=c(0,u(255,t.r-s(-e/100*255))),t.g=c(0,u(255,t.g-s(-e/100*255))),t.b=c(0,u(255,t.b-s(-e/100*255))),v(t)}function C(t,e){return e=0===e?0:e||10,t=v(t).toHsl(),t.l-=e/100,t.l=B(t.l),v(t)}function T(t,e){return t=v(t).toHsl(),e=(t.h+e)%360,t.h=e<0?360+e:e,v(t)}function k(t){return t=v(t).toHsl(),t.h=(t.h+180)%360,v(t)}function O(t){var e=v(t).toHsl(),n=e.h;return[v(t),v({h:(n+120)%360,s:e.s,l:e.l}),v({h:(n+240)%360,s:e.s,l:e.l})]}function P(t){var e=v(t).toHsl(),n=e.h;return[v(t),v({h:(n+90)%360,s:e.s,l:e.l}),v({h:(n+180)%360,s:e.s,l:e.l}),v({h:(n+270)%360,s:e.s,l:e.l})]}function I(t){var e=v(t).toHsl(),n=e.h;return[v(t),v({h:(n+72)%360,s:e.s,l:e.l}),v({h:(n+216)%360,s:e.s,l:e.l})]}function N(t,e,n){e=e||6,n=n||30;var r=v(t).toHsl(),i=360/n,o=[v(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(v(r));return o}function D(t,e){e=e||6;t=v(t).toHsv();for(var n=t.h,r=t.s,i=t.v,o=[],a=1/e;e--;)o.push(v({h:n,s:r,v:i})),i=(i+a)%1;return o}function L(t){return t=parseFloat(t),isNaN(t)||t<0||1<t?1:t}function R(t,e){"string"==typeof(n=t)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(t="100%");var n="string"==typeof(n=t)&&-1!=n.indexOf("%");return t=u(e,c(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),r.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function B(t){return u(1,c(0,t))}function j(t){return parseInt(t,16)}function F(t){return 1==t.length?"0"+t:""+t}function z(t){return t<=1?100*t+"%":t}function U(t){return r.round(255*parseFloat(t)).toString(16)}function G(t){return j(t)/255}function V(t){return m.CSS_UNIT.exec(t)}r=Math,i=/^\s+/,o=/\s+$/,a=0,s=r.round,u=r.min,c=r.max,l=r.random,v.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t=this.toRgb(),e=t.r/255,n=t.g/255;t=t.b/255,e=e<=.03928?e/12.92:r.pow((.055+e)/1.055,2.4),n=n<=.03928?n/12.92:r.pow((.055+n)/1.055,2.4),t=t<=.03928?t/12.92:r.pow((.055+t)/1.055,2.4);return.2126*e+.7152*n+.0722*t},setAlpha:function(t){return this._a=L(t),this._roundA=s(100*this._a)/100,this},toHsv:function(){var t=b(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=b(this._r,this._g,this._b),e=s(360*t.h),n=s(100*t.s);t=s(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+t+"%)":"hsva("+e+", "+n+"%, "+t+"%, "+this._roundA+")"},toHsl:function(){var t=y(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=y(this._r,this._g,this._b),e=s(360*t.h),n=s(100*t.s);t=s(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+t+"%)":"hsla("+e+", "+n+"%, "+t+"%, "+this._roundA+")"},toHex:function(t){return x(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){var e=this._r,n=this._g,r=this._b,i=this._a;return e=[F(s(e).toString(16)),F(s(n).toString(16)),F(s(r).toString(16)),F(U(i))],t&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)&&e[3].charAt(0)==e[3].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0)+e[3].charAt(0):e.join("")},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:s(this._r),g:s(this._g),b:s(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+s(this._r)+", "+s(this._g)+", "+s(this._b)+")":"rgba("+s(this._r)+", "+s(this._g)+", "+s(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:s(100*R(this._r,255))+"%",g:s(100*R(this._g,255))+"%",b:s(100*R(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+s(100*R(this._r,255))+"%, "+s(100*R(this._g,255))+"%, "+s(100*R(this._b,255))+"%)":"rgba("+s(100*R(this._r,255))+"%, "+s(100*R(this._g,255))+"%, "+s(100*R(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&f[x(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+_(this._r,this._g,this._b,this._a),n=e;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+e+",endColorstr="+(n=t?"#"+_((e=v(t))._r,e._g,e._b,e._a):n)+")"},toString:function(t){var e=!!t,n=(t=t||this._format,!1),r=this._a<1&&0<=this._a;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),(n="hsv"===t?this.toHsvString():n)||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return v(this.toString())},_applyModification:function(t,e){return t=t.apply(null,[this].concat([].slice.call(e))),this._r=t._r,this._g=t._g,this._b=t._b,this.setAlpha(t._a),this},lighten:function(){return this._applyModification(M,arguments)},brighten:function(){return this._applyModification(A,arguments)},darken:function(){return this._applyModification(C,arguments)},desaturate:function(){return this._applyModification(w,arguments)},saturate:function(){return this._applyModification(S,arguments)},greyscale:function(){return this._applyModification(E,arguments)},spin:function(){return this._applyModification(T,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(N,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(D,arguments)},splitcomplement:function(){return this._applyCombination(I,arguments)},triad:function(){return this._applyCombination(O,arguments)},tetrad:function(){return this._applyCombination(P,arguments)}},v.fromRatio=function(t,e){if("object"==typeof t){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:z(t[n]));t=r}return v(t,e)},v.equals=function(t,e){return!(!t||!e)&&v(t).toRgbString()==v(e).toRgbString()},v.random=function(){return v.fromRatio({r:l(),g:l(),b:l()})},v.mix=function(t,e,n){return n=0===n?0:n||50,t=v(t).toRgb(),e=v(e).toRgb(),n/=100,v({r:(e.r-t.r)*n+t.r,g:(e.g-t.g)*n+t.g,b:(e.b-t.b)*n+t.b,a:(e.a-t.a)*n+t.a})},v.readability=function(t,e){return t=v(t),e=v(e),(r.max(t.getLuminance(),e.getLuminance())+.05)/(r.min(t.getLuminance(),e.getLuminance())+.05)},v.isReadable=function(t,e,n){var r=v.readability(t,e),i=!1;t=function(t){var e;return e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),t=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==t&&"large"!==t&&(t="small"),{level:e,size:t}}(n);switch(t.level+t.size){case"AAsmall":case"AAAlarge":i=4.5<=r;break;case"AAlarge":i=3<=r;break;case"AAAsmall":i=7<=r}return i},v.mostReadable=function(t,e,n){for(var r,i=null,o=0,a=(n=n||{}).includeFallbackColors,s=n.level,u=n.size,c=0;c<e.length;c++)o<(r=v.readability(t,e[c]))&&(o=r,i=v(e[c]));return v.isReadable(t,i,{level:s,size:u})||!a?i:(n.includeFallbackColors=!1,v.mostReadable(t,["#fff","#000"],n))},h=v.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},f=v.hexNames=function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[t[e]]=e);return n}(h),p="[\\s|\\(]+("+(d="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+d+")[,|\\s]+("+d+")\\s*\\)?",g="[\\s|\\(]+("+d+")[,|\\s]+("+d+")[,|\\s]+("+d+")[,|\\s]+("+d+")\\s*\\)?",m={CSS_UNIT:new RegExp(d),rgb:new RegExp("rgb"+p),rgba:new RegExp("rgba"+g),hsl:new RegExp("hsl"+p),hsla:new RegExp("hsla"+g),hsv:new RegExp("hsv"+p),hsva:new RegExp("hsva"+g),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/},t.exports?t.exports=v:void 0!==(d=function(){return v}.call(e,n,e,t))&&(t.exports=d)},52511:function(t,e,n){var r,i,o,a,s,u,c,l,h,f,d,p,g,m;/*! https://mths.be/punycode v1.3.2 by @mathias */function v(t){throw RangeError(d[t])}function y(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function b(t,e){var n=t.split("@"),r="";1<n.length&&(r=n[0]+"@",t=n[1]),n=(t=t.replace(f,".")).split(".");return r+y(n,e).join(".")}function x(t){for(var e,n,r=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function _(t){return y(t,(function(t){var e="";return 65535<t&&(e+=m((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+m(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function S(t,e,n){var r=0;for(t=n?g(t/c):t>>1,t+=g(t/e);p*s>>1<t;r+=a)t=g(t/p);return g(r+(p+1)*t/(t+u))}function E(t){var e,n,r,i,u,c,l,h=[],f=t.length,d=0,p=128,m=72,y=t.lastIndexOf("-");for(y<0&&(y=0),n=0;n<y;++n)128<=t.charCodeAt(n)&&v("not-basic"),h.push(t.charCodeAt(n));for(r=0<y?y+1:0;r<f;){for(i=d,u=1,c=a;f<=r&&v("invalid-input"),l=t.charCodeAt(r++),(a<=(l=l-48<10?l-22:l-65<26?l-65:l-97<26?l-97:a)||l>g((o-d)/u))&&v("overflow"),d+=l*u,!(l<(l=c<=m?1:m+s<=c?s:c-m));c+=a)u>g(o/(l=a-l))&&v("overflow"),u*=l;m=S(d-i,e=h.length+1,0==i),g(d/e)>o-p&&v("overflow"),p+=g(d/e),d%=e,h.splice(d++,0,p)}return _(h)}function M(t){for(var e,n,r,i,u,c,l,h,f,d,p=[],y=(t=x(t)).length,b=128,_=72,E=e=0;E<y;++E)(l=t[E])<128&&p.push(m(l));for(n=r=p.length,r&&p.push("-");n<y;){for(i=o,E=0;E<y;++E)b<=(l=t[E])&&l<i&&(i=l);for(i-b>g((o-e)/(h=n+1))&&v("overflow"),e+=(i-b)*h,b=i,E=0;E<y;++E)if((l=t[E])<b&&++e>o&&v("overflow"),l==b){for(u=e,c=a;!(u<(f=c<=_?1:_+s<=c?s:c-_));c+=a)p.push(m(w(f+(d=u-f)%(f=a-f),0))),u=g(d/f);p.push(m(w(u,0))),_=S(e,h,n==r),e=0,++n}++e,++b}return p.join("")}t=n.nmd(t),e&&e.nodeType,t&&t.nodeType,(r="object"==typeof n.g&&n.g).global!==r&&r.window!==r&&r.self,o=2147483647,s=26,u=38,c=700,l=/^xn--/,h=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=(a=36)-1,g=Math.floor,m=String.fromCharCode,i={version:"1.3.2",ucs2:{decode:x,encode:_},decode:E,encode:M,toASCII:function(t){return b(t,(function(t){return h.test(t)?"xn--"+M(t):t}))},toUnicode:function(t){return b(t,(function(t){return l.test(t)?E(t.slice(4).toLowerCase()):t}))}},void 0!==(r=function(){return i}.call(e,n,e,t))&&(t.exports=r)},8575:function(t,e,n){"use strict";var r=n(52511),i=n(62502);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=y,e.resolve=function(t,e){return y(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?y(t,!1,!0).resolveObject(e):e},e.format=function(t){return i.isString(t)&&(t=y(t)),t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=(e=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),["'"].concat(e)),l=["%","/","?",";","#"].concat(c),h=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n(17673);function y(t,e,n){var r;return t&&i.isObject(t)&&t instanceof o?t:((r=new o).parse(t,e,n),r)}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=(o=-1!==o&&o<t.indexOf("#")?"?":"#",t.split(o));s[0]=s[0].replace(/\\/g,"/");var y=(y=t=s.join(o)).trim();if(!n&&1===t.split("#").length&&(s=u.exec(y),s))return this.path=y,this.href=y,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this;var b;o=a.exec(y);if(o&&(b=(o=o[0]).toLowerCase(),this.protocol=b,y=y.substr(o.length)),!(n||o||y.match(/^\/\/[^@\/]+@[^@\/]+/))||!(N="//"===y.substr(0,2))||o&&g[o]||(y=y.substr(2),this.slashes=!0),!g[o]&&(N||o&&!m[o])){for(var x=-1,_=0;_<h.length;_++)-1!==(w=y.indexOf(h[_]))&&(-1===x||w<x)&&(x=w);-1!==(t=-1===x?y.lastIndexOf("@"):y.lastIndexOf("@",x))&&(s=y.slice(0,t),y=y.slice(t+1),this.auth=decodeURIComponent(s));var w;for(x=-1,_=0;_<l.length;_++)-1!==(w=y.indexOf(l[_]))&&(-1===x||w<x)&&(x=w);if(-1===x&&(x=y.length),this.host=y.slice(0,x),y=y.slice(x),this.parseHost(),this.hostname=this.hostname||"",n="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1],!n)for(var S=this.hostname.split(/\./),E=(_=0,S.length);_<E;_++){var M=S[_];if(M&&!M.match(f)){for(var A="",C=0,T=M.length;C<T;C++)127<M.charCodeAt(C)?A+="x":A+=M[C];if(!A.match(f)){var k=S.slice(0,_),O=S.slice(_+1),P=M.match(d);P&&(k.push(P[1]),O.unshift(P[2])),O.length&&(y="/"+O.join(".")+y),this.hostname=k.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),n||(this.hostname=r.toASCII(this.hostname));var I=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+I,this.href+=this.host,n&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0])&&(y="/"+y)}if(!p[b])for(_=0,E=c.length;_<E;_++){var D,L=c[_];-1!==y.indexOf(L)&&((D=encodeURIComponent(L))===L&&(D=escape(L)),y=y.split(L).join(D))}return o=y.indexOf("#"),-1!==o&&(this.hash=y.substr(o),y=y.slice(0,o)),t=y.indexOf("?"),-1!==t?(this.search=y.substr(t),this.query=y.substr(t+1),e&&(this.query=v.parse(this.query)),y=y.slice(0,t)):e&&(this.search="",this.query={}),y&&(this.pathname=y),m[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(I=this.pathname||"",s=this.search||"",this.path=I+s),this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"",e=(t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@"),this.protocol||""),n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port)&&(o+=":"+this.port),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query)),t=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o=o||"",r&&"#"!==r.charAt(0)&&(r="#"+r),t&&"?"!==t.charAt(0)&&(t="?"+t),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(t=t.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},o.prototype.resolveObject=function(t){i.isString(t)&&((p=new o).parse(t,!1,!0),t=p);for(var e=new o,n=Object.keys(this),r=0;r<n.length;r++){var a=n[r];e[a]=this[a]}if(e.hash=t.hash,""!==t.href)if(t.slashes&&!t.protocol){for(var s=Object.keys(t),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(e[c]=t[c])}m[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/")}else if(t.protocol&&t.protocol!==e.protocol)if(m[t.protocol]){if(e.protocol=t.protocol,t.host||g[t.protocol])e.pathname=t.pathname;else{for(var l=(t.pathname||"").split("/");l.length&&!(t.host=l.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==l[0]&&l.unshift(""),l.length<2&&l.unshift(""),e.pathname=l.join("/")}e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,(e.pathname||e.search)&&(p=e.pathname||"",v=e.search||"",e.path=p+v),e.slashes=e.slashes||t.slashes}else for(var h=Object.keys(t),f=0;f<h.length;f++){var d=h[f];e[d]=t[d]}else{var p=e.pathname&&"/"===e.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=(p=v||p||e.host&&t.pathname,p),b=e.pathname&&e.pathname.split("/")||[],x=(l=t.pathname&&t.pathname.split("/")||[],e.protocol&&!m[e.protocol]);if(x&&(e.hostname="",e.port=null,e.host&&(""===b[0]?b[0]=e.host:b.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===l[0]?l[0]=t.host:l.unshift(t.host)),t.host=null),p=p&&(""===l[0]||""===b[0])),v)e.host=(t.host||""===t.host?t:e).host,e.hostname=(t.hostname||""===t.hostname?t:e).hostname,e.search=t.search,e.query=t.query,b=l;else if(l.length)(b=b||[]).pop(),b=b.concat(l),e.search=t.search,e.query=t.query;else if(!i.isNullOrUndefined(t.search))return x&&(e.hostname=e.host=b.shift(),E=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=E.shift(),e.host=e.hostname=E.shift()),e.search=t.search,e.query=t.query,i.isNull(e.pathname)&&i.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.href=e.format(),e;if(b.length){for(var _=b.slice(-1)[0],w=(v=(e.host||t.host||1<b.length)&&("."===_||".."===_)||""===_,0),S=b.length;0<=S;S--)"."===(_=b[S])?b.splice(S,1):".."===_?(b.splice(S,1),w++):w&&(b.splice(S,1),w--);if(!p&&!y)for(;w--;)b.unshift("..");!p||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),v&&"/"!==b.join("/").substr(-1)&&b.push("");var E;y=""===b[0]||b[0]&&"/"===b[0].charAt(0);x&&(e.hostname=e.host=!y&&b.length?b.shift():"",E=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=E.shift(),e.host=e.hostname=E.shift()),(p=p||e.host&&b.length)&&!y&&b.unshift(""),b.length?e.pathname=b.join("/"):(e.pathname=null,e.path=null),i.isNull(e.pathname)&&i.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes}else e.pathname=null,e.search?e.path="/"+e.search:e.path=null}return e.href=e.format(),e},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},62502:function(t){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},94927:function(t,e,n){function r(t){try{if(!n.g.localStorage)return}catch(t){return}return t=n.g.localStorage[t],null!=t&&"true"===String(t).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation"),n=!0}return t.apply(this,arguments)}}},42119:function(t,e,n){"use strict";n.d(e,{p7:function(){return Ct},r5:function(){return R}});var r=n(66252),i=n(2262);
/*!
  * vue-router v4.0.6
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;var a,s;e=t=>o?Symbol(t):"_vr_"+t;const u=e("rvlm"),c=e("rvd"),l=e("r"),h=e("rl"),f=e("rvl"),d="undefined"!=typeof window,p=Object.assign;function g(t,e){var n={};for(const i in e){var r=e[i];n[i]=Array.isArray(r)?r.map(t):t(r)}return n}let m=()=>{};const v=/\/$/,y=t=>t.replace(v,"");function b(t,e,n="/"){let r,i={},o="",a="";var s=e.indexOf("?"),u=e.indexOf("#",-1<s?s:0);return-1<s&&(r=e.slice(0,s),o=e.slice(s+1,-1<u?u:e.length),i=t(o)),-1<u&&(r=r||e.slice(0,u),a=e.slice(u,e.length)),{fullPath:(r=function(t,e){if(t.startsWith("/"))return t;if(!t)return e;e=e.split("/");var n=t.split("/");let r,i,o=e.length-1;for(r=0;r<n.length;r++)if(i=n[r],1!==o&&"."!==i){if(".."!==i)break;o--}return e.slice(0,o).join("/")+"/"+n.slice(r-(r===n.length?1:0)).join("/")}(null!=r?r:e,n))+(o&&"?")+o+a,path:r,query:i,hash:a}}function x(t,e){return!e||t.toLowerCase().indexOf(e.toLowerCase())?t:t.slice(e.length)||"/"}function _(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function w(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(r=t[n],n=e[n],!(Array.isArray(r)?S(r,n):Array.isArray(n)?S(n,r):r===n))return!1;var r;return!0}function S(t,e){return Array.isArray(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}(n=a=a||{}).pop="pop",n.push="push",(n=s=s||{}).back="back",n.forward="forward",n.unknown="";const E=/^[^#]+#/;function M(t,e){return t.replace(E,"#")+e}const A=()=>({left:window.pageXOffset,top:window.pageYOffset});function C(t){let e;if("el"in t){var n=t.el,r="string"==typeof n&&n.startsWith("#");r="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;n=r,r=t,i=document.documentElement.getBoundingClientRect(),n=n.getBoundingClientRect(),e={behavior:r.behavior,left:n.left-i.left-(r.left||0),top:n.top-i.top-(r.top||0)}}else e=t;var i;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function T(t,e){return(history.state?history.state.position-e:-1)+t}const k=new Map;let O=()=>location.protocol+"//"+location.host;function P(t,e){var{pathname:e,search:n,hash:r}=e;if(-1<t.indexOf("#")){let t=r.slice(1);return x(t="/"!==t[0]?"/"+t:t,"")}return x(e,t)+n+r}function I(t,e,n,r){let i=[],o=[],u=null;const c=({state:o})=>{var c=P(t,location);const l=n.value;var h=e.value;let f=0;if(o){if(n.value=c,e.value=o,u&&u===l)return void(u=null);f=h?o.position-h.position:0}else r(c);i.forEach((t=>{t(n.value,l,{delta:f,type:a.pop,direction:f?0<f?s.forward:s.back:s.unknown})}))};function l(){var t=window["history"];t.state&&t.replaceState(p({},t.state,{scroll:A()}),"")}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",l),{pauseListeners:function(){u=n.value},listen:function(t){i.push(t);var e=()=>{var e=i.indexOf(t);-1<e&&i.splice(e,1)};return o.push(e),e},destroy:function(){for(const t of o)t();o=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",l)}}}function N(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?A():null}}function D(t){const{history:e,location:n}=window;let r={value:P(t,n)},i={value:e.state};function o(r,o,a){var s=t.indexOf("#");s=-1<s?(n.host&&document.querySelector("base")?t:t.slice(s))+r:O()+t+r;try{e[a?"replaceState":"pushState"](o,"",s),i.value=o}catch(r){n[a?"replace":"assign"](s)}}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:function(t,n){o((a=p({},i.value,e.state,{forward:t,scroll:A()})).current,a,!0);var a=p({},N(r.value,t,null),{position:a.position+1},n);o(t,a,!1),r.value=t},replace:function(t,n){o(t,p({},e.state,N(i.value.back,t,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=t}}}function L(t){var e;"/"!==(e=(e=t)||(d?(e=(i=document.querySelector("base"))&&i.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,""):"/"))[0]&&"#"!==e[0]&&(e="/"+e);const n=D(t=y(e)),r=I(t,n.state,n.location,n.replace);var i=p({location:"",base:t,go:function(t,e=!0){e||r.pauseListeners(),history.go(t)},createHref:M.bind(null,t)},n,r);return Object.defineProperty(i,"location",{get:()=>n.location.value}),Object.defineProperty(i,"state",{get:()=>n.state.value}),i}function R(t){return(t=location.host?t||location.pathname+location.search:"").indexOf("#")<0&&(t+="#"),L(t)}function B(t){return"string"==typeof t||"symbol"==typeof t}const j={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},F=e("nf");function z(t,e){return p(new Error,{type:t,[F]:!0},e)}function U(t,e){return t instanceof Error&&F in t&&(null==e||t.type&e)}const G={sensitive:!1,strict:!1,start:!0,end:!0},V=/[.+*?^${}()[\]/\\]/g;function W(t,e){var n=p({},G,e),r=[];let i=n.start?"^":"";const o=[];for(const f of t){var a=f.length?[]:[90];n.strict&&!f.length&&(i+="/");for(let t=0;t<f.length;t++){var s=f[t];let r=40+(n.sensitive?.25:0);if(0===s.type)t||(i+="/"),i+=s.value.replace(V,"\\$&"),r+=40;else if(1===s.type){var{value:s,repeatable:u,optional:c,regexp:l}=s;o.push({name:s,repeatable:u,optional:c});const n=l||"[^/]+?";if("[^/]+?"!==n){r+=10;try{new RegExp(`(${n})`)}catch(e){throw new Error(`Invalid custom RegExp for param "${s}" (${n}): `+e.message)}}let a=u?`((?:${n})(?:/(?:${n}))*)`:`(${n})`;t||(a=c&&f.length<2?`(?:/${a})`:"/"+a),c&&(a+="?"),i+=a,r+=20,c&&(r+=-8),u&&(r+=-20),".*"===n&&(r+=-50)}a.push(r)}r.push(a)}n.strict&&n.end&&(r[e=r.length-1][r[e].length-1]+=.7000000000000001),n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const h=new RegExp(i,n.sensitive?"":"i");return{re:h,score:r,keys:o,parse:function(t){var e=t.match(h),n={};if(!e)return null;for(let a=1;a<e.length;a++){var r=e[a]||"",i=o[a-1];n[i.name]=r&&i.repeatable?r.split("/"):r}return n},stringify:function(e){let n="",r=!1;for(const u of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of u)if(0===t.type)n+=t.value;else if(1===t.type){var{value:i,repeatable:o,optional:a}=t,s=i in e?e[i]:"";if(Array.isArray(s)&&!o)throw new Error(`Provided param "${i}" is an array but it is not repeatable (* or + modifiers)`);if(o=Array.isArray(s)?s.join("/"):s,!o){if(!a)throw new Error(`Missing required param "${i}"`);u.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=o}}return n}}}function H(t,e){let n=0;for(var r=t.score,i=e.score;n<r.length&&n<i.length;){var o=function(t,e){let n=0;for(;n<t.length&&n<e.length;){var r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}(r[n],i[n]);if(o)return o;n++}return i.length-r.length}const Y={type:0,value:""},q=/[a-zA-Z0-9_]/;function X(t,e,n){return n=W(function(t){if(!t)return[[]];if("/"===t)return[[Y]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": `+t)}let n=0,r=n;const i=[];let o;function a(){o&&i.push(o),o=[]}let s,u=0,c="",l="";function h(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(1<o.length&&("*"===s||"+"===s)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:l,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):e("Invalid state to consume buffer"),c="")}function f(){c+=s}for(;u<t.length;)if("\\"===(s=t[u++])&&2!==n)r=n,n=4;else switch(n){case 0:"/"===s?(c&&h(),a()):":"===s?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:"("===s?n=2:q.test(s)?f():(h(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&u--);break;case 2:")"===s?"\\"==l[l.length-1]?l=l.slice(0,-1)+s:n=3:l+=s;break;case 3:h(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&u--,l="";break;default:e("Unknown state")}return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),h(),a(),i}(t.path),n),n=p(n,{record:t,parent:e,children:[],alias:[]}),e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function K(t,e){const n=[],r=new Map;function i(t,a,s){var u,c,l=!s,h={path:(u=t).path,redirect:u.redirect,name:u.name,meta:u.meta||{},aliasOf:void 0,beforeEnter:u.beforeEnter,props:function(t){var e={},n=t.props||!1;if("component"in t)e.default=n;else for(var r in t.components)e[r]="boolean"==typeof n?n:n[r];return e}(u),children:u.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in u?u.components||{}:{default:u.component}},f=(h.aliasOf=s&&s.record,$(e,t)),d=[h];if("alias"in t)for(const e of"string"==typeof t.alias?[t.alias]:t.alias)d.push(p({},h,{components:(s?s.record:h).components,path:e,aliasOf:s?s.record:h}));let g;for(const e of d){var v,y=e["path"];if(a&&"/"!==y[0]&&(v="/"===(v=a.record.path)[v.length-1]?"":"/",e.path=a.record.path+(y&&v+y)),c=X(e,a,f),s?s.alias.push(c):((g=g||c)!==c&&g.alias.push(c),l&&t.name&&!Z(c)&&o(t.name)),"children"in h){var b=h.children;for(let t=0;t<b.length;t++)i(b[t],c,s&&s.children[t])}s=s||c;{x=void 0;var x=c;let t=0;for(;t<n.length&&0<=H(x,n[t]);)t++;n.splice(t,0,x),x.record.name&&!Z(x)&&r.set(x.record.name,x)}}return g?()=>{o(g)}:m}function o(t){var e;B(t)?(e=r.get(t))&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o)):-1<(e=n.indexOf(t))&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}return e=$({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>i(t))),{addRoute:i,resolve:function(t,e){let i,o,a,s={};if("name"in t&&t.name){if(!(i=r.get(t.name)))throw z(1,{location:t});a=i.record.name,s=p(function(t,e){var n={};for(var r of e)r in t&&(n[r]=t[r]);return n}(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params),o=i.stringify(s)}else if("path"in t)o=t.path,(i=n.find((t=>t.re.test(o))))&&(s=i.parse(o),a=i.record.name);else{if(!(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path)))))throw z(1,{location:t,currentLocation:e});a=i.record.name,s=p({},e.params,t.params),o=i.stringify(s)}var u=[];let c=i;for(;c;)u.unshift(c.record),c=c.parent;return{name:a,path:o,params:s,matched:u,meta:u.reduce(((t,e)=>p(t,e.meta)),{})}},removeRoute:o,getRoutes:function(){return n},getRecordMatcher:function(t){return r.get(t)}}}function Z(t){for(;t;){if(t.record.aliasOf)return 1;t=t.parent}}function $(t,e){var n,r={};for(n in t)r[n]=(n in e?e:t)[n];return r}const J=/#/g,Q=/&/g,tt=/\//g,et=/=/g,nt=/\?/g,rt=/\+/g,it=/%5B/g,ot=/%5D/g,at=/%5E/g,st=/%60/g,ut=/%7B/g,ct=/%7C/g,lt=/%7D/g,ht=/%20/g;function ft(t){return encodeURI(""+t).replace(ct,"|").replace(it,"[").replace(ot,"]")}function dt(t){return ft(t).replace(rt,"%2B").replace(ht,"+").replace(J,"%23").replace(Q,"%26").replace(st,"`").replace(ut,"{").replace(lt,"}").replace(at,"^")}function pt(t){return ft(t).replace(J,"%23").replace(nt,"%3F").replace(tt,"%2F")}function gt(t){try{return decodeURIComponent(""+t)}catch(t){}return""+t}function mt(t){var e={};if(""!==t&&"?"!==t){var n=("?"===t[0]?t.slice(1):t).split("&");for(let t=0;t<n.length;++t){var r=n[t].replace(rt," "),i=r.indexOf("="),o=gt(i<0?r:r.slice(0,i));r=i<0?null:gt(r.slice(i+1));if(o in e){let t=e[o];(t=Array.isArray(t)?t:e[o]=[t]).push(r)}else e[o]=r}}return e}function vt(t){let e="";for(let i in t){e.length&&(e+="&");var n=t[i];if(i=dt(i).replace(et,"%3D"),null==n)void 0!==n&&(e+=i);else{var r=Array.isArray(n)?n.map((t=>t&&dt(t))):[n&&dt(n)];for(let t=0;t<r.length;t++)e+=(t?"&":"")+i,null!=r[t]&&(e+="="+r[t])}}return e}function yt(){let t=[];return{add:function(e){return t.push(e),()=>{var n=t.indexOf(e);-1<n&&t.splice(n,1)}},list:()=>t,reset:function(){t=[]}}}function bt(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((a,s)=>{var u=t=>{var u;!1===t?s(z(4,{from:n,to:e})):t instanceof Error?s(t):"string"==typeof(u=t)||u&&"object"==typeof u?s(z(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"==typeof t&&o.push(t),a())},c=t.call(r&&r.instances[i],e,n,u);let l=Promise.resolve(c);(l=t.length<3?l.then(u):l).catch((t=>s(t)))}))}function xt(t,e,n,r){var i=[];for(const u of t)for(const t in u.components){var a=u.components[t];if("beforeRouteEnter"===e||u.instances[t])if("object"==typeof(s=a)||"displayName"in s||"props"in s||"__vccOpts"in s){var s=(a.__vccOpts||a)[e];s&&i.push(bt(s,n,r,u,t))}else{let s=a();s=s.catch(console.error),i.push((()=>s.then((i=>{var a;return i?(a=(a=i).__esModule||o&&"Module"===a[Symbol.toStringTag]?i.default:i,(i=((u.components[t]=a).__vccOpts||a)[e])&&bt(i,n,r,u,t)()):Promise.reject(new Error(`Couldn't resolve component "${t}" at "${u.path}"`))}))))}}return i}function _t(t){const e=(0,r.f3)(l),n=(0,r.f3)(h),o=(0,r.Fl)((()=>e.resolve((0,i.SU)(t.to)))),a=(0,r.Fl)((()=>{var t,e,r=o.value["matched"],i=r["length"],a=r[i-1],s=n.matched;return a&&s.length?!(-1<(t=s.findIndex(_.bind(null,a))))&&(e=St(r[i-2]),1<i)&&St(a)===e&&s[s.length-1].path!==e?s.findIndex(_.bind(null,r[i-2])):t:-1}));var s=(0,r.Fl)((()=>-1<a.value&&function(t,e){for(var n in e){var r=e[n];let i=t[n];if("string"==typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}(n.params,o.value.params))),u=(0,r.Fl)((()=>-1<a.value&&a.value===n.matched.length-1&&w(n.params,o.value.params)));return{route:o,href:(0,r.Fl)((()=>o.value.href)),isActive:s,isExactActive:u,navigate:function(n={}){return function(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),1}}(n)?e[(0,i.SU)(t.replace)?"replace":"push"]((0,i.SU)(t.to)):Promise.resolve()}}}const wt=(0,r.aZ)({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},setup(t,{slots:e}){const n=(0,i.qj)(_t(t)),o=(0,r.f3)(l)["options"],a=(0,r.Fl)((()=>({[Et(t.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Et(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{var i=e.default&&e.default(n);return t.custom?i:(0,r.h)("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},i)}}});function St(t){return t?(t.aliasOf||t).path:""}const Et=(t,e,n)=>null!=t?t:null!=e?e:n;function Mt(t,e){return t?1===(t=t(e)).length?t[0]:t:null}const At=(0,r.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const o=(0,r.f3)(f),a=(0,r.Fl)((()=>t.route||o.value)),s=(0,r.f3)(c,0),l=(0,r.Fl)((()=>a.value.matched[s])),h=((0,r.JJ)(c,s+1),(0,r.JJ)(u,l),(0,r.JJ)(f,a),(0,i.iH)());return(0,r.YP)((()=>[h.value,l.value,t.name]),(([t,e,n],[r,i])=>{e&&(e.instances[n]=t,i)&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards)),!t||!e||i&&_(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{var i=a.value;const o=l.value;var s,u=o&&o.components[t.name];const c=t.name;return u?(s=(s=o.props[t.name])?!0===s?i.params:"function"==typeof s?s(i):s:null,s=(0,r.h)(u,p({},s,e,{onVnodeUnmounted:t=>{t.component.isUnmounted&&(o.instances[c]=null)},ref:h})),Mt(n.default,{Component:s,route:i})||s):Mt(n.default,{Component:u,route:i})}}});function Ct(t){const e=K(t.routes,t);let n=t.parseQuery||mt,o=t.stringifyQuery||vt,a=t.history;const s=yt(),u=yt(),c=yt(),v=(0,i.XI)(j);let y=j;d&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const x=g.bind(null,(t=>""+t)),S=g.bind(null,pt),E=g.bind(null,gt);function M(t,r){if(r=p({},r||v.value),"string"==typeof t)return c=b(n,t,r.path),u=e.resolve({path:c.path},r),s=a.createHref(c.fullPath),p(c,u,{params:E(u.params),hash:gt(c.hash),redirectedFrom:void 0,href:s});let i;"path"in t?i=p({},t,{path:b(n,t.path,r.path).path}):(i=p({},t,{params:S(t.params)}),r.params=S(r.params));var s,u=e.resolve(i,r),c=t.hash||"",l=(r=(u.params=x(E(u.params)),s=o,r=p({},t,{hash:ft(c).replace(ut,"{").replace(lt,"}").replace(at,"^"),path:u.path}),s=r.query?s(r.query):"",r.path+(s&&"?")+s+(r.hash||"")),a.createHref(r));return p({fullPath:r,hash:c,query:o===vt?function(t){var e,n={};for(e in t){var r=t[e];void 0!==r&&(n[e]=Array.isArray(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return n}(t.query):t.query},u,{redirectedFrom:void 0,href:l})}function O(t){return"string"==typeof t?b(n,t,v.value.path):p({},t)}function P(t,e){if(y!==t)return z(8,{from:e,to:t})}function I(t){return D(t)}function N(t){var e=t.matched[t.matched.length-1];if(e&&e.redirect){e=e["redirect"];let n="function"==typeof e?e(t):e;return"string"==typeof n&&(n=-1<n.indexOf("?")||-1<n.indexOf("#")?n=O(n):{path:n}),p({query:t.query,hash:t.hash,params:t.params},n)}}function D(t,e){var n=y=M(t);const r=v.value,i=t.state,a=t.force,s=!0===t.replace;var u,c,l;t=N(n);if(t)return D(p(O(t),{state:i,force:a,replace:s}),e||n);const h=n;let f;return h.redirectedFrom=e,!a&&(t=o,u=r,c=u.matched.length-1,l=n.matched.length-1,-1<c)&&c==l&&_(u.matched[c],n.matched[l])&&w(u.params,n.params)&&t(u.query)===t(n.query)&&u.hash===n.hash&&(f=z(16,{to:h,from:r}),Z(r,r,!0,!1)),(f?Promise.resolve(f):L(h,r)).catch((t=>U(t)?t:q(t))).then((t=>{if(t){if(U(t,2))return D(p(O(t.to),{state:i,force:a,replace:s}),e||h)}else t=F(h,r,!0,s,i);return R(h,r,t),t}))}function L(t,e){let n;const[r,i,o]=function(t,e){var n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let a=0;a<o;a++){const o=e.matched[a],s=(o&&(t.matched.find((t=>_(t,o)))?r:n).push(o),t.matched[a]);!s||e.matched.find((t=>_(t,s)))||i.push(s)}return[n,r,i]}(t,e);n=xt(r.reverse(),"beforeRouteLeave",t,e);for(const s of r)s.leaveGuards.forEach((r=>{n.push(bt(r,t,e))}));const a=function(t,e){return(t=P(t,e))?Promise.reject(t):Promise.resolve()}.bind(null,t,e);return n.push(a),Tt(n).then((()=>{n=[];for(const r of s.list())n.push(bt(r,t,e));return n.push(a),Tt(n)})).then((()=>{n=xt(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(bt(r,t,e))}));return n.push(a),Tt(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&e.matched.indexOf(r)<0)if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(bt(i,t,e));else n.push(bt(r.beforeEnter,t,e));return n.push(a),Tt(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),(n=xt(o,"beforeRouteEnter",t,e)).push(a),Tt(n)))).then((()=>{n=[];for(const r of u.list())n.push(bt(r,t,e));return n.push(a),Tt(n)})).catch((t=>U(t,8)?t:Promise.reject(t)))}function R(t,e,n){for(const r of c.list())r(t,e,n)}function F(t,e,n,r,i){var o=P(t,e);if(o)return o;o=e===j;var s=d?history.state:{};n&&(r||o?a.replace(t.fullPath,p({scroll:o&&s&&s.scroll},i)):a.push(t.fullPath,i)),Z(v.value=t,e,n,o),X()}let G;function V(){G=a.listen(((t,e,n)=>{let r=M(t);var i;t=N(r);if(t)D(p(t,{replace:!0}),r).catch(m);else{y=r;const e=v.value;d&&(t=T(e.fullPath,n.delta),i=A(),k.set(t,i)),L(r,e).catch((t=>U(t,12)?t:U(t,2)?(D(t.to,r).catch(m),Promise.reject()):(n.delta&&a.go(-n.delta,!1),q(t)))).then((t=>{(t=t||F(r,e,!1))&&n.delta&&a.go(-n.delta,!1),R(r,e,t)})).catch(m)}}))}let W,H=yt(),Y=yt();function q(t){return X(t),Y.list().forEach((e=>e(t))),Promise.reject(t)}function X(t){W||(W=!0,V(),H.list().forEach((([e,n])=>t?n(t):e())),H.reset())}function Z(e,n,i,o){const a=t["scrollBehavior"];if(!d||!a)return Promise.resolve();let s=!i&&(u=T(e.fullPath,0),c=k.get(u),k.delete(u),c)||(o||!i)&&history.state&&history.state.scroll||null;var u,c;(0,r.Y3)().then((()=>a(e,n,s))).then((t=>t&&C(t))).catch(q)}const $=t=>a.go(t);let J;const Q=new Set;return{currentRoute:v,addRoute:function(t,n){let r,i;return i=B(t)?(r=e.getRecordMatcher(t),n):t,e.addRoute(i,r)},removeRoute:function(t){(t=e.getRecordMatcher(t))&&e.removeRoute(t)},hasRoute:function(t){return!!e.getRecordMatcher(t)},getRoutes:function(){return e.getRoutes().map((t=>t.record))},resolve:M,options:t,push:I,replace:function(t){return I(p(O(t),{replace:!0}))},go:$,back:()=>$(-1),forward:()=>$(1),beforeEach:s.add,beforeResolve:u.add,afterEach:c.add,onError:Y.add,isReady:function(){return W&&v.value!==j?Promise.resolve():new Promise(((t,e)=>{H.add([t,e])}))},install(t){t.component("RouterLink",wt),t.component("RouterView",At),t.config.globalProperties.$router=this,Object.defineProperty(t.config.globalProperties,"$route",{get:()=>(0,i.SU)(v)}),d&&!J&&v.value===j&&(J=!0,I(a.location).catch((t=>{})));var e={};for(let i in j)e[i]=(0,r.Fl)((()=>v.value[i]));t.provide(l,this),t.provide(h,(0,i.qj)(e)),t.provide(f,v);let n=t.unmount;Q.add(t),t.unmount=function(){Q.delete(t),Q.size<1&&(G(),v.value=j,J=!1,W=!1),n()}}}}function Tt(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}},29812:function(t,e,n){"use strict";n.r(e),n.d(e,{BaseTransition:function(){return r.P$},Comment:function(){return r.sv},Fragment:function(){return r.HY},KeepAlive:function(){return r.Ob},Static:function(){return r.qG},Suspense:function(){return r.n4},Teleport:function(){return r.lR},Text:function(){return r.xv},Transition:function(){return r.uT},TransitionGroup:function(){return r.W3},callWithAsyncErrorHandling:function(){return r.$d},callWithErrorHandling:function(){return r.KU},camelize:function(){return r._A},capitalize:function(){return r.kC},cloneVNode:function(){return r.Ho},computed:function(){return r.Fl},createApp:function(){return r.ri},createBlock:function(){return r.j4},createCommentVNode:function(){return r.ry},createHydrationRenderer:function(){return r.Eo},createRenderer:function(){return r.Us},createSSRApp:function(){return r.vr},createSlots:function(){return r.Nv},createStaticVNode:function(){return r.uE},createTextVNode:function(){return r.Uk},createVNode:function(){return r.Wm},customRef:function(){return r.ZM},defineAsyncComponent:function(){return r.RC},defineComponent:function(){return r.aZ},defineEmit:function(){return r.zX},defineProps:function(){return r.MW},devtools:function(){return r.mW},getCurrentInstance:function(){return r.FN},getTransitionRawChildren:function(){return r.Q6},h:function(){return r.h},handleError:function(){return r.S3},hydrate:function(){return r.ZB},initCustomFormatter:function(){return r.Mr},inject:function(){return r.f3},isProxy:function(){return r.X3},isReactive:function(){return r.PG},isReadonly:function(){return r.$y},isRef:function(){return r.dq},isRuntimeOnly:function(){return r.of},isVNode:function(){return r.lA},markRaw:function(){return r.Xl},mergeProps:function(){return r.dG},nextTick:function(){return r.Y3},onActivated:function(){return r.dl},onBeforeMount:function(){return r.wF},onBeforeUnmount:function(){return r.Jd},onBeforeUpdate:function(){return r.Xn},onDeactivated:function(){return r.se},onErrorCaptured:function(){return r.d1},onMounted:function(){return r.bv},onRenderTracked:function(){return r.bT},onRenderTriggered:function(){return r.Yq},onUnmounted:function(){return r.Ah},onUpdated:function(){return r.ic},openBlock:function(){return r.wg},popScopeId:function(){return r.Cn},provide:function(){return r.JJ},proxyRefs:function(){return r.WL},pushScopeId:function(){return r.dD},queuePostFlushCb:function(){return r.qb},reactive:function(){return r.qj},readonly:function(){return r.OT},ref:function(){return r.iH},registerRuntimeCompiler:function(){return r.Y1},render:function(){return r.sY},renderList:function(){return r.Ko},renderSlot:function(){return r.WI},resolveComponent:function(){return r.up},resolveDirective:function(){return r.Q2},resolveDynamicComponent:function(){return r.LL},resolveTransitionHooks:function(){return r.U2},setBlockTracking:function(){return r.qZ},setDevtoolsHook:function(){return r.ec},setTransitionHooks:function(){return r.nK},shallowReactive:function(){return r.Um},shallowReadonly:function(){return r.YS},shallowRef:function(){return r.XI},ssrContextKey:function(){return r.Uc},ssrUtils:function(){return r.G},toDisplayString:function(){return r.zw},toHandlerKey:function(){return r.hR},toHandlers:function(){return r.mx},toRaw:function(){return r.IU},toRef:function(){return r.Vh},toRefs:function(){return r.BK},transformVNodeArgs:function(){return r.C3},triggerRef:function(){return r.oR},unref:function(){return r.SU},useContext:function(){return r.qp},useCssModule:function(){return r.fb},useCssVars:function(){return r.sj},useSSRContext:function(){return r.Zq},useTransitionState:function(){return r.Y8},vModelCheckbox:function(){return r.e8},vModelDynamic:function(){return r.YZ},vModelRadio:function(){return r.G2},vModelSelect:function(){return r.bM},vModelText:function(){return r.nr},vShow:function(){return r.F8},version:function(){return r.i8},warn:function(){return r.ZK},watch:function(){return r.YP},watchEffect:function(){return r.m0},withCtx:function(){return r.w5},withDirectives:function(){return r.wy},withKeys:function(){return r.D2},withModifiers:function(){return r.iM},withScopeId:function(){return r.HX},compile:function(){return i}});var r=n(49963);const i=()=>{}},52479:function(t){t.exports=function t(e,n){if(e&&n)return t(e)(n);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){r[t]=e[t]})),r;function r(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),i=t[t.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach((function(t){r[t]=i[t]})),r}}},47529:function(t){t.exports=function(){for(var t={},n=0;n<arguments.length;n++){var r,i=arguments[n];for(r in i)e.call(i,r)&&(t[r]=i[r])}return t};var e=Object.prototype.hasOwnProperty}}]);